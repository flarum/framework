{"version":3,"sources":["webpack://@flarum/markdown/webpack/bootstrap","webpack://@flarum/markdown/external \"flarum.core.compat['extend']\"","webpack://@flarum/markdown/external \"flarum.core.compat['components/TextEditor']\"","webpack://@flarum/markdown/external \"flarum.core.compat['Component']\"","webpack://@flarum/markdown/./node_modules/mdarea/mdarea.min.js","webpack://@flarum/markdown/external \"flarum.core.compat['helpers/icon']\"","webpack://@flarum/markdown/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/markdown/./src/forum/components/MarkdownToolbar.js","webpack://@flarum/markdown/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@flarum/markdown/./src/forum/util/insertText.js","webpack://@flarum/markdown/./src/forum/util/styles.js","webpack://@flarum/markdown/./src/forum/util/apply.js","webpack://@flarum/markdown/./src/forum/components/MarkdownButton.js","webpack://@flarum/markdown/./src/forum/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","self","test","navigator","platform","u","f","y","g","_","v","k","enter","indent","outdent","inline","e","this","_options","keyMap","Array","isArray","toString","trim","split","push","apply","map","action","forEach","ctrlKey","altKey","shiftKey","metaKey","length","join","_reOutdent","RegExp","_handleKey","setElement","toLowerCase","b","selectionStart","selectionEnd","arguments","window","InputEvent","dispatchEvent","x","replace","constructor","getElement","_elem","removeEventListener","addEventListener","getValue","setValue","destroy","defaultPrevented","find","substring","a","h","lastIndexOf","line","offset","prefix","exec","charAt","parseInt","slice","preventDefault","_inheritsLoose","subClass","superClass","__proto__","modifierKey","userAgent","match","MarkdownToolbar","oncreate","vnode","document","getElementById","attrs","for","shortcut","view","id","data-for","style","display","children","event","button","element","querySelector","click","Component","_extends","assign","target","source","canInsertText","isMultipleLines","string","repeat","wordSelectionStart","text","index","wordSelectionEnd","multiline","breakpoint","newlinesToSurroundSelectedText","textarea","newlinesToAppend","newlinesToPrepend","beforeSelection","afterSelection","breaksBefore","breaksAfter","newlinesBeforeSelection","newlinesAfterSelection","blockStyle","arg","suffix","blockPrefix","blockSuffix","replaceNext","prefixSpace","scanFor","surroundWithNewlines","originalSelectionStart","originalSelectionEnd","selectedText","prefixToUse","suffixToUse","undefined","expandedSelectionStart","expandedSelectionEnd","beginsWithPrefix","endsWithSuffix","expandSelectedText","hasReplaceNext","indexOf","ref","startsWith","endsWith","replacementText","position","Math","max","min","whitespaceEdges","trimFirst","leadingWhitespace","trailingWhitespace","styleSelectedText","styleArgs","result","orderedList","startOfLine","endOfLine","orderedListRegex","noInitialSelection","textToUnstyle","lines","linesBefore","linesToUnstyle","every","lengthDiff","len","results","multilineStyle","before","after","contentEditable","execCommand","error","createEvent","initEvent","setSelectionRange","insertText","MarkdownButton","$","tooltip","className","title","data-hotkey","hotkey","onclick","onkeydown","keydown","icon","stylesToApply","toolbar","parentElement","field","dataset","focus","app","initializers","add","extend","TextEditor","textareaId","vdom","editor","MarkdownArea","items","translator","trans"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['components/TextEditor'];","module.exports = flarum.core.compat['Component'];","!function(e,t){\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof module&&module.exports?module.exports=t():e.MarkdownArea=t()}(\"undefined\"!=typeof self?self:this,function(){var n=/mac|iphone|ipad|ipod/i.test(navigator.platform)?\"metaKey\":\"ctrlKey\",u=/[*_]/,d=/^[ \\t]*(?:(?:[-+*]|\\d+\\.)[ \\t]+(?:\\[[ x]][ \\t]+)?|>[ \\t]*)*(?::[ \\t]*)?/,f=/[-=\\s\"'`<>\\[\\](){}+*^$\\\\.|]$/,p=/(?:[-+*]|\\d+\\.)[ \\t]+(?:\\[[ x]][ \\t]+)?$/,y=/^(?:\\n|$)/,i=/[-+*\\[\\]x\\d.]/g,s=/[^ \\t]/g,m=/(\\d+)\\.(?=[ \\t]+$)/,g=/(?:(?:^[ \\t]+)?(?:[-+*]|\\d+\\.|[>:])(?:[ \\t]+\\[[ x]])?[ \\t]*|^[ \\t]+)$/,c=/^(?!$)/gm,_={\"`\":/^``$/m,\"~\":/^~~$/m},v={\"[\":\"]\",\"(\":\")\",\"{\":\"}\",\"<\":\">\"},k={\"]\":\"[\",\")\":\"(\",\"}\":\"{\",\">\":\"<\"},r={enter:[\"Enter\",\"Shift+Enter\"],indent:[\"Tab\",\"Cmd+m\"],outdent:[\"Shift+Tab\",\"Cmd+Shift+m\"],inline:['\"',\"'\",\"`\",\"*\",\"_\",\"[\",\"]\",\"(\",\")\",\"{\",\"}\",\"<\",\">\"]};function e(e,t){var n,i;this._options=((n=t)||(n={}),n.keyMap=function(e){e||(e={});var n={},t=[];for(var i in r)if(r.hasOwnProperty(i)){var s=e[i]||r[i];Array.isArray(s)||(s=s.toString().trim().split(/\\s*[|,]\\s*/g)),t.push.apply(t,s.map(function(e){return(e=l(e)).key in n||(n[e.key]=0),++n[e.key],{key:e,action:i}}))}return t.forEach(function(e){var t;1<n[e.key.key]&&(\"ctrlKey\"in(t=e.key)||(t.ctrlKey=!1),\"altKey\"in t||(t.altKey=!1),\"shiftKey\"in t||(t.shiftKey=!1),\"metaKey\"in t||(t.metaKey=!1))}),t}(n.keyMap),n.indent=(\"number\"!=typeof(i=n.indent||4)&&(i=(i+\"\").length),new Array(i+1).join(\" \")),n),this._reOutdent=new RegExp(\"^\"+this._options.indent,\"mg\"),this._handleKey=this._handleKey.bind(this),this.setElement(e)}function l(e){var t={};return e.trim().split(/\\s*\\+\\s*/g).forEach(function(e){switch(e.toLowerCase()){case\"cmd\":t[n]=!0;break;case\"ctrl\":case\"alt\":case\"shift\":case\"meta\":t[e.toLowerCase()+\"Key\"]=!0;break;default:t.key=e}}),t}function b(e,t,n,i){if(e.value=t,e.selectionStart=n,e.selectionEnd=3<arguments.length?i:n,\"InputEvent\"in window)try{var s=new InputEvent(\"input\");e.dispatchEvent(s)}catch(i){}}function x(e,t){return e.replace(t?s:i,\" \")}return e.prototype={constructor:e,getElement:function(){return this._elem},setElement:function(e){this._elem&&this._elem.removeEventListener(\"keydown\",this._handleKey),(this._elem=e).addEventListener(\"keydown\",this._handleKey)},getValue:function(){return this._elem.value},setValue:function(e){this._elem.value=e},destroy:function(){this._elem.removeEventListener(\"keydown\",this._handleKey),this._elem=this._options=this._reOutdent=this._handleKey=null},_handleKey:function(t){if(!t.defaultPrevented){var e=this._options.keyMap.find(function(e){return function(e,t){for(var n in t)if(t.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0}(t,e.key)});if(e){var n=this._elem.value.substring(0,this._elem.selectionStart),i=this._elem.value.substring(this._elem.selectionStart,this._elem.selectionEnd),s=this._elem.value.substring(this._elem.selectionEnd);switch(e.action){case\"enter\":!function(e,t,n,i,s,r){var l=n?null:(a=t,o=a.lastIndexOf(\"\\n\")+1,h=a.substring(o),u=d.exec(h),{line:h,offset:o,prefix:u&&u[0]});var a,o,h,u;if(n)t+=\"\\n\";else if(l.line&&l.line.charAt(l.line.length-1)in v){var f=l.prefix?x(l.prefix,!0):\"\";i=\"\\n\"+f+i,r||(t+=\"\\n\"+f+s)}else l.prefix?!r&&l.prefix===l.line&&y.test(i)?t=t.substring(0,l.offset)+l.prefix.replace(g,\"\"):!r&&(c=l.prefix,p.test(c))?t+=\"\\n\"+l.prefix.replace(m,function(e,t){return parseInt(t)+1+\".\"}):t+=\"\\n\"+x(l.prefix,r):t+=\"\\n\";var c;b(e,t+i,t.length)}(this._elem,n,i,s,this._options.indent,t.shiftKey);break;case\"indent\":!function(e,t,n,i,s){var r=t.length,l=t.lastIndexOf(\"\\n\")+1;l<r&&(n=t.substring(l)+n,t=t.substring(0,l));(l<r||!n)&&(r+=s.length);n?n=n.replace(c,s):t+=s;b(e,t+n+i,r,n?l+n.length:r)}(this._elem,n,i,s,this._options.indent);break;case\"outdent\":!function(e,t,n,i,s,r){var l=t.length,a=t.lastIndexOf(\"\\n\")+1;a<l&&(n=t.substring(a)+n,t=t.substring(0,a),n.substring(0,s.length)===s&&(l-=s.length));n=n.replace(r,\"\"),b(e,t+n+i,l,a+n.length)}(this._elem,n,i,s,this._options.indent,this._reOutdent);break;case\"inline\":r=this._elem,l=n,a=i,o=s,h=t.key,a||h in v||o.charAt(0)!==h?!a&&(\"'\"===h&&!f.test(l)||h in k)?b(r,l+h+o,l.length+1):!a&&h in _&&_[h].test(l)?b(r,l+h+\"language\\n\"+h+h+h+(\"\\n\"!==o.charAt(0)?\"\\n\":\"\")+o,l.length+1,l.length+9):h===l.slice(-1)&&h===o.slice(0,1)?b(r,l.slice(0,-1)+a+o.slice(1),l.length-1,l.length-1+a.length):b(r,l+(k[h]||h)+a+(v[h]||h)+o,l.length+1,l.length+1+a.length):b(r,l+(u.test(h)?h+h:\"\")+o,l.length+1)}t.preventDefault()}}var r,l,a,o,h}},e});\n//# sourceMappingURL=mdarea.min.map\n","module.exports = flarum.core.compat['helpers/icon'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Component from 'flarum/Component';\n\nconst modifierKey = navigator.userAgent.match(/Macintosh/) ? 'Meta' : 'Control';\n\nexport default class MarkdownToolbar extends Component {\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    const field = document.getElementById(this.attrs.for);\n\n    field.addEventListener('keydown', this.shortcut.bind(this));\n  }\n\n  view(vnode) {\n    return <div id=\"MarkdownToolbar\" data-for={this.attrs.for} style={{ display: 'inline-block' }}>\n      {vnode.children}\n    </div>;\n  }\n\n  shortcut(event) {\n    if ((event.metaKey && modifierKey === 'Meta') || (event.ctrlKey && modifierKey === 'Control')) {\n      const button = this.element.querySelector(`[data-hotkey=\"${event.key}\"]`);\n\n      if (button) {\n        button.click();\n        event.preventDefault()\n      }\n    }\n  }\n}\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","/*\n * Original Copyright GitHub, Inc. Licensed under the MIT License.\n * See license text at https://github.com/github/markdown-toolbar-element/blob/master/LICENSE.\n */\n\nexport let canInsertText = null;\n\nexport default (textarea, { text, selectionStart, selectionEnd }) => {\n  const originalSelectionStart = textarea.selectionStart;\n  const before = textarea.value.slice(0, originalSelectionStart);\n  const after = textarea.value.slice(textarea.selectionEnd);\n\n  if (canInsertText === null || canInsertText === true) {\n    textarea.contentEditable = 'true';\n    try {\n      canInsertText = document.execCommand('insertText', false, text);\n    }\n    catch (error) {\n      canInsertText = false;\n    }\n    textarea.contentEditable = 'false';\n  }\n  if (canInsertText && !textarea.value.slice(0, textarea.selectionStart).endsWith(text)) {\n    canInsertText = false;\n  }\n  if (!canInsertText) {\n    try {\n      document.execCommand('ms-beginUndoUnit');\n    }\n    catch (e) {\n      // Do nothing.\n    }\n    textarea.value = before + text + after;\n    try {\n      document.execCommand('ms-endUndoUnit');\n    }\n    catch (e) {\n      // Do nothing.\n    }\n\n    // fire custom event, works on IE\n    const event = document.createEvent('Event');\n\n    event.initEvent('input', true, true);\n\n    textarea.dispatchEvent(event);\n  }\n  if (selectionStart != null && selectionEnd != null) {\n    textarea.setSelectionRange(selectionStart, selectionEnd);\n  }\n  else {\n    textarea.setSelectionRange(originalSelectionStart, textarea.selectionEnd);\n  }\n};\n","/*\n * Original Copyright GitHub, Inc. Licensed under the MIT License.\n * See license text at https://github.com/github/markdown-toolbar-element/blob/master/LICENSE.\n */\n\nexport function isMultipleLines(string) {\n  return string.trim().split('\\n').length > 1;\n}\n\nexport function repeat(string, n) {\n  return Array(n + 1).join(string);\n}\n\nexport function wordSelectionStart(text, i) {\n  let index = i;\n\n  while (text[index] && text[index - 1] != null && !text[index - 1].match(/\\s/)) {\n    index--;\n  }\n\n  return index;\n}\n\nexport function wordSelectionEnd(text, i, multiline) {\n  let index = i;\n  const breakpoint = multiline ? /\\n/ : /\\s/;\n\n  while (text[index] && !text[index].match(breakpoint)) {\n    index++;\n  }\n\n  return index;\n}\n\nexport function expandSelectedText(textarea, prefixToUse, suffixToUse) {\n  let multiline = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  if (textarea.selectionStart === textarea.selectionEnd) {\n    textarea.selectionStart = wordSelectionStart(textarea.value, textarea.selectionStart);\n    textarea.selectionEnd = wordSelectionEnd(textarea.value, textarea.selectionEnd, multiline);\n  } else {\n    const expandedSelectionStart = textarea.selectionStart - prefixToUse.length;\n    const expandedSelectionEnd = textarea.selectionEnd + suffixToUse.length;\n    const beginsWithPrefix = textarea.value.slice(expandedSelectionStart, textarea.selectionStart) === prefixToUse;\n    const endsWithSuffix = textarea.value.slice(textarea.selectionEnd, expandedSelectionEnd) === suffixToUse;\n\n    if (beginsWithPrefix && endsWithSuffix) {\n      textarea.selectionStart = expandedSelectionStart;\n      textarea.selectionEnd = expandedSelectionEnd;\n    }\n  }\n\n  return textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n}\n\nexport function newlinesToSurroundSelectedText(textarea) {\n  const beforeSelection = textarea.value.slice(0, textarea.selectionStart);\n  const afterSelection = textarea.value.slice(textarea.selectionEnd);\n  const breaksBefore = beforeSelection.match(/\\n*$/);\n  const breaksAfter = afterSelection.match(/^\\n*/);\n  const newlinesBeforeSelection = breaksBefore ? breaksBefore[0].length : 0;\n  const newlinesAfterSelection = breaksAfter ? breaksAfter[0].length : 0;\n  let newlinesToAppend;\n  let newlinesToPrepend;\n\n  if (beforeSelection.match(/\\S/) && newlinesBeforeSelection < 2) {\n    newlinesToAppend = repeat('\\n', 2 - newlinesBeforeSelection);\n  }\n\n  if (afterSelection.match(/\\S/) && newlinesAfterSelection < 2) {\n    newlinesToPrepend = repeat('\\n', 2 - newlinesAfterSelection);\n  }\n\n  if (newlinesToAppend == null) {\n    newlinesToAppend = '';\n  }\n\n  if (newlinesToPrepend == null) {\n    newlinesToPrepend = '';\n  }\n\n  return {\n    newlinesToAppend,\n    newlinesToPrepend\n  };\n}\n\nexport const blockStyle = (textarea, arg) => {\n  let newlinesToAppend;\n  let newlinesToPrepend;\n  const { prefix, suffix, blockPrefix, blockSuffix, replaceNext, prefixSpace, scanFor, surroundWithNewlines } = arg;\n  const originalSelectionStart = textarea.selectionStart;\n  const originalSelectionEnd = textarea.selectionEnd;\n  let selectedText = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  let prefixToUse = isMultipleLines(selectedText) && blockPrefix.length > 0 ? `${blockPrefix}\\n` : prefix;\n  let suffixToUse = isMultipleLines(selectedText) && blockSuffix.length > 0 ? `\\n${blockSuffix}` : suffix;\n\n  if (prefixSpace) {\n    const beforeSelection = textarea.value[textarea.selectionStart - 1];\n    if (textarea.selectionStart !== 0 && beforeSelection != null && !beforeSelection.match(/\\s/)) {\n      prefixToUse = ` ${prefixToUse}`;\n    }\n  }\n\n  selectedText = expandSelectedText(textarea, prefixToUse, suffixToUse, arg.multiline);\n  let selectionStart = textarea.selectionStart;\n  let selectionEnd = textarea.selectionEnd;\n  const hasReplaceNext = replaceNext.length > 0 && suffixToUse.indexOf(replaceNext) > -1 && selectedText.length > 0;\n\n  if (surroundWithNewlines) {\n    const ref = newlinesToSurroundSelectedText(textarea);\n    newlinesToAppend = ref.newlinesToAppend;\n    newlinesToPrepend = ref.newlinesToPrepend;\n    prefixToUse = newlinesToAppend + prefix;\n    suffixToUse += newlinesToPrepend;\n  }\n\n  if (selectedText.startsWith(prefixToUse) && selectedText.endsWith(suffixToUse)) {\n    const replacementText = selectedText.slice(prefixToUse.length, selectedText.length - suffixToUse.length);\n    if (originalSelectionStart === originalSelectionEnd) {\n      let position = originalSelectionStart - prefixToUse.length;\n      position = Math.max(position, selectionStart);\n      position = Math.min(position, selectionStart + replacementText.length);\n      selectionStart = selectionEnd = position;\n    }\n    else {\n      selectionEnd = selectionStart + replacementText.length;\n    }\n    return { text: replacementText, selectionStart, selectionEnd };\n  }\n  else if (!hasReplaceNext) {\n    let replacementText = prefixToUse + selectedText + suffixToUse;\n    selectionStart = originalSelectionStart + prefixToUse.length;\n    selectionEnd = originalSelectionEnd + prefixToUse.length;\n    const whitespaceEdges = selectedText.match(/^\\s*|\\s*$/g);\n    if (arg.trimFirst && whitespaceEdges) {\n      const leadingWhitespace = whitespaceEdges[0] || '';\n      const trailingWhitespace = whitespaceEdges[1] || '';\n      replacementText = leadingWhitespace + prefixToUse + selectedText.trim() + suffixToUse + trailingWhitespace;\n      selectionStart += leadingWhitespace.length;\n      selectionEnd -= trailingWhitespace.length;\n    }\n    return { text: replacementText, selectionStart, selectionEnd };\n  }\n  else if (scanFor.length > 0 && selectedText.match(scanFor)) {\n    suffixToUse = suffixToUse.replace(replaceNext, selectedText);\n    const replacementText = prefixToUse + suffixToUse;\n    selectionStart = selectionEnd = selectionStart + prefixToUse.length;\n    return { text: replacementText, selectionStart, selectionEnd };\n  }\n  else {\n    const replacementText = prefixToUse + selectedText + suffixToUse;\n    selectionStart = selectionStart + prefixToUse.length + selectedText.length + suffixToUse.indexOf(replaceNext);\n    selectionEnd = selectionStart + replaceNext.length;\n    return { text: replacementText, selectionStart, selectionEnd };\n  }\n}\n\nexport const multilineStyle = (textarea, arg) => {\n  const { prefix, suffix, surroundWithNewlines } = arg;\n  let text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  let selectionStart = textarea.selectionStart;\n  let selectionEnd = textarea.selectionEnd;\n  const lines = text.split('\\n');\n  const undoStyle = lines.every(line => line.startsWith(prefix) && line.endsWith(suffix));\n  if (undoStyle) {\n    text = lines.map(line => line.slice(prefix.length, line.length - suffix.length)).join('\\n');\n    selectionEnd = selectionStart + text.length;\n  }\n  else {\n    text = lines.map(line => prefix + line + suffix).join('\\n');\n    if (surroundWithNewlines) {\n      const { newlinesToAppend, newlinesToPrepend } = newlinesToSurroundSelectedText(textarea);\n      selectionStart += newlinesToAppend.length;\n      selectionEnd = selectionStart + text.length;\n      text = newlinesToAppend + text + newlinesToPrepend;\n    }\n  }\n  return { text, selectionStart, selectionEnd };\n}\n\nexport const orderedList = (textarea) => {\n  const orderedListRegex = /^\\d+\\.\\s+/;\n  const noInitialSelection = textarea.selectionStart === textarea.selectionEnd;\n  let selectionEnd;\n  let selectionStart;\n  let text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  let textToUnstyle = text;\n  let lines = text.split('\\n');\n  let startOfLine, endOfLine;\n  if (noInitialSelection) {\n    const linesBefore = textarea.value.slice(0, textarea.selectionStart).split(/\\n/);\n    startOfLine = textarea.selectionStart - linesBefore[linesBefore.length - 1].length;\n    endOfLine = wordSelectionEnd(textarea.value, textarea.selectionStart, true);\n    textToUnstyle = textarea.value.slice(startOfLine, endOfLine);\n  }\n  const linesToUnstyle = textToUnstyle.split('\\n');\n  const undoStyling = linesToUnstyle.every(line => orderedListRegex.test(line));\n  if (undoStyling) {\n    lines = linesToUnstyle.map(line => line.replace(orderedListRegex, ''));\n    text = lines.join('\\n');\n    if (noInitialSelection && startOfLine && endOfLine) {\n      const lengthDiff = linesToUnstyle[0].length - lines[0].length;\n      selectionStart = selectionEnd = textarea.selectionStart - lengthDiff;\n      textarea.selectionStart = startOfLine;\n      textarea.selectionEnd = endOfLine;\n    }\n  }\n  else {\n    lines = (function () {\n      let i;\n      let len;\n      let index;\n      const results = [];\n      for (index = i = 0, len = lines.length; i < len; index = ++i) {\n        const line = lines[index];\n        results.push(`${index + 1}. ${line}`);\n      }\n      return results;\n    })();\n    text = lines.join('\\n');\n    const { newlinesToAppend, newlinesToPrepend } = newlinesToSurroundSelectedText(textarea);\n    selectionStart = textarea.selectionStart + newlinesToAppend.length;\n    selectionEnd = selectionStart + text.length;\n    if (noInitialSelection)\n      selectionStart = selectionEnd;\n    text = newlinesToAppend + text + newlinesToPrepend;\n  }\n  return { text, selectionStart, selectionEnd };\n}\n","/*\n * Original Copyright GitHub, Inc. Licensed under the MIT License.\n * See license text at https://github.com/github/markdown-toolbar-element/blob/master/LICENSE.\n */\n\nimport insertText from './insertText';\nimport { blockStyle, isMultipleLines, multilineStyle, orderedList } from './styles';\n\nexport const styleSelectedText = (textarea, styleArgs) => {\n  const text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  let result;\n  if (styleArgs.orderedList) {\n    result = orderedList(textarea);\n  }\n  else if (styleArgs.multiline && isMultipleLines(text)) {\n    result = multilineStyle(textarea, styleArgs);\n  }\n  else {\n    result = blockStyle(textarea, styleArgs);\n  }\n\n  insertText(textarea, result);\n};\n\nexport default (button, stylesToApply) => {\n  const toolbar = button.parentElement;\n\n  const defaults = {\n    prefix: '',\n    suffix: '',\n    blockPrefix: '',\n    blockSuffix: '',\n    multiline: false,\n    replaceNext: '',\n    prefixSpace: false,\n    scanFor: '',\n    surroundWithNewlines: false,\n    orderedList: false,\n    trimFirst: false\n  };\n\n  const style = Object.assign({}, defaults, stylesToApply);\n\n  const field = document.getElementById(toolbar.dataset.for);\n\n  if (field) {\n    field.focus();\n    styleSelectedText(field, style);\n  }\n}\n","import Component from 'flarum/Component';\nimport icon from 'flarum/helpers/icon';\nimport apply from '../util/apply';\n\nconst modifierKey = navigator.userAgent.match(/Macintosh/) ? '⌘' : 'ctrl';\n\nexport default class MarkdownButton extends Component {\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    this.$().tooltip();\n  }\n\n  view() {\n    return (\n      <button className=\"Button Button--icon Button--link\" title={this.title()} data-hotkey={this.attrs.hotkey}\n        onclick={this.click.bind(this)} onkeydown={this.keydown.bind(this)}>\n        {icon(this.attrs.icon)}\n      </button>\n    );\n  }\n\n  keydown(event) {\n    if (event.key === ' ' || event.key === 'Enter') {\n      event.preventDefault();\n      this.click();\n    }\n  }\n\n  click() {\n    return apply(this.element, this.attrs.style);\n  }\n\n  title() {\n    let tooltip = this.attrs.title;\n\n    if (this.attrs.hotkey) tooltip += ` <${modifierKey}-${this.attrs.hotkey}>`;\n\n    return tooltip;\n  }\n}\n","/*!\n * Includes modified code from GitHub Markdown Toolbar Element\n * https://github.com/github/markdown-toolbar-element/\n *\n * Original Copyright GitHub, Inc.\n * Released under the MIT license\n * https://github.com/github/markdown-toolbar-element/blob/master/LICENSE\n */\n\nimport { extend } from 'flarum/extend';\nimport TextEditor from 'flarum/components/TextEditor';\nimport MarkdownArea from 'mdarea';\n\nimport MarkdownToolbar from './components/MarkdownToolbar';\nimport MarkdownButton from './components/MarkdownButton';\n\napp.initializers.add('flarum-markdown', function(app) {\n  let index = 1;\n\n  extend(TextEditor.prototype, 'oninit', function() {\n    this.textareaId = 'textarea'+(index++);\n  });\n\n  extend(TextEditor.prototype, 'view', function(vdom) {\n    vdom.children[0].attrs.id = this.textareaId;\n  });\n\n  extend(TextEditor.prototype, 'oncreate', function() {\n    this.editor = new MarkdownArea(this.$('textarea')[0], {\n      keyMap: {\n        indent: ['Ctrl+m'],\n        outdent: ['Ctrl+M']\n      }\n    });\n  });\n\n  extend(TextEditor.prototype, 'onremove', function () {\n    this.editor.destroy();\n  });\n\n  extend(TextEditor.prototype, 'toolbarItems', function(items) {\n    const tooltip = name => app.translator.trans(`flarum-markdown.forum.composer.${name}_tooltip`);\n\n    items.add('markdown', (\n      <MarkdownToolbar for={this.textareaId}>\n        <MarkdownButton title={tooltip('header')} icon=\"fas fa-heading\" style={{ prefix: '### ' }} />\n        <MarkdownButton title={tooltip('bold')} icon=\"fas fa-bold\" style={{ prefix: '**', suffix: '**', trimFirst: true }} hotkey=\"b\" />\n        <MarkdownButton title={tooltip('italic')} icon=\"fas fa-italic\" style={{ prefix: '_', suffix: '_', trimFirst: true }} hotkey=\"i\" />\n        <MarkdownButton title={tooltip('quote')} icon=\"fas fa-quote-left\" style={{ prefix: '> ', multiline: true, surroundWithNewlines: true }} />\n        <MarkdownButton title={tooltip('code')} icon=\"fas fa-code\" style={{ prefix: '`', suffix: '`', blockPrefix: '```', blockSuffix: '```' }} />\n        <MarkdownButton title={tooltip('link')} icon=\"fas fa-link\" style={{ prefix: '[', suffix: '](https://)', replaceNext: 'https://', scanFor: 'https?://' }} />\n        <MarkdownButton title={tooltip('image')} icon=\"fas fa-image\" style={{ prefix: '![', suffix: '](https://)', replaceNext: 'https://', scanFor: 'https?://' }} />\n        <MarkdownButton title={tooltip('unordered_list')} icon=\"fas fa-list-ul\" style={{ prefix: '- ', multiline: true, surroundWithNewlines: true }} />\n        <MarkdownButton title={tooltip('ordered_list')} icon=\"fas fa-list-ol\" style={{ prefix: '1. ', multiline: true, orderedList: true }} />\n      </MarkdownToolbar>\n    ), 100);\n  });\n});\n"],"sourceRoot":""}