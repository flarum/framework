module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e){t.exports=flarum.core.compat["helpers/icon"]},function(t,e){t.exports=flarum.core.compat.extend},function(t,e){t.exports=flarum.core.compat["components/TextEditor"]},function(t,e,n){var r,o,i;"undefined"!=typeof self&&self,o=[],void 0===(i="function"==typeof(r=function(){var t=/mac|iphone|ipad|ipod/i.test(navigator.platform)?"metaKey":"ctrlKey",e=/^["'`*_[({<>})\]]$/,n=/[*_]/,r=/^[ \t]*(?:(?:[-+*]|\d+\.)[ \t]+(?:\[[ x]][ \t]+)?|>[ \t]*)*(?::[ \t]*)?/,o=/(?:[-+*]|\d+\.)[ \t]+(?:\[[ x]][ \t]+)?$/,i=/[-+*\[\]x\d.]/g,a=/[^ \t]/g,l=/(\d+)\.(?=[ \t]+$)/,c=/(?:(?:^[ \t]+)?(?:[-+*]|\d+\.|[>:])(?:[ \t]+\[[ x]])?[ \t]*|^[ \t]+)$/,s=/^(?!$)/gm,u={"`":/^``$/m,"~":/^~~$/m},f={"[":"]","(":")","{":"}","<":">"},p={"]":"[",")":"(","}":"{",">":"<"};function d(t){this._useTab=!0,this._useInline=!0,this._indent="    ",this._reOutdent=/^[ ]{4}/gm,this._reKey=h(!0,!0),this._handleKey=this._handleKey.bind(this),this.setElement(t)}function h(t,e){return new RegExp("^(?:Enter"+(t?"|Tab":"")+"|[io"+(e?"\"'`*_([{<>}\\])":"")+"])$")}function y(t,e,n,r){if(t.value=e,t.selectionStart=n,t.selectionEnd=arguments.length>3?r:n,"InputEvent"in window)try{var o=new InputEvent("input");t.dispatchEvent(o)}catch(r){}}return d.prototype={constructor:d,getElement:function(){return this._elem},setElement:function(t){this._elem&&this._elem.removeEventListener("keydown",this._handleKey),this._elem=t,t.addEventListener("keydown",this._handleKey)},getValue:function(){return this._elem.value},setValue:function(t){this._elem.value=t},getIndent:function(){return this._indent},setIndent:function(t){this._indent="number"==typeof t?new Array(t+1).join(" "):(t+"").replace(/[^ \t]/g," "),this._reOutdent=new RegExp("^"+this._indent,"mg")},isTabUsed:function(){return this._useTab},useTab:function(){this._useTab=!0,this._reKey=h(!0,this._useInline)},ignoreTab:function(){this._useTab=!1,this._reKey=h(!1,this._useInline)},isInlineEnabled:function(){return this._useInline},enableInline:function(){this._useInline=!0,this._reKey=h(this._useTab,!0)},disableInline:function(){this._useInline=!1,this._reKey=h(this._useTab,!1)},destroy:function(){this._elem.removeEventListener("keydown",this._handleKey),this._elem=this._reKey=this._handleKey=this._indent=this._reOutdent=null},_handleKey:function(d){if(!d.defaultPrevented&&this._reKey.test(d.key)){var h=d.target.value.substring(0,d.target.selectionStart),b=d.target.value.substring(d.target.selectionStart,d.target.selectionEnd),g=d.target.value.substring(d.target.selectionEnd);if("Enter"!==d.key||d.ctrlKey||d.altKey||d.metaKey)if("Tab"===d.key&&!d.shiftKey||"i"===d.key&&d[t])!function(t,e,n,r,o){var i=e.length,a=e.lastIndexOf("\n")+1;a<i&&(n=e.substring(a)+n,e=e.substring(0,a)),(a<i||!n)&&(i+=o.length),n?n=n.replace(s,o):e+=o,y(t,e+n+r,i,n?a+n.length:i)}(this._elem,h,b,g,this._indent);else if("Tab"===d.key&&d.shiftKey||"o"===d.key&&d[t])!function(t,e,n,r,o,i){var a=e.length,l=e.lastIndexOf("\n")+1;l<a&&(n=e.substring(l)+n,e=e.substring(0,l),n.substring(0,o.length)===o&&(a-=o.length)),n=n.replace(i,""),y(t,e+n+r,a,l+n.length)}(this._elem,h,b,g,this._indent,this._reOutdent);else{if(!e.test(d.key))return;!function(t,e,r,o,i){r||i in f||o.charAt(0)!==i?!r&&("'"===i||i in p)?y(t,e+i+o,e.length+1):!r&&i in u&&u[i].test(e)?y(t,e+i+"language\n"+i+i+i+("\n"!==o.charAt(0)?"\n":"")+o,e.length+1,e.length+9):y(t,e+(p[i]||i)+r+(f[i]||i)+o,e.length+1,e.length+1+r.length):y(t,e+(n.test(i)?i+i:"")+o,e.length+1)}(this._elem,h,b,g,d.key)}else!function(t,e,n,s,u){var f,p,d,h,b=n?null:(p=(f=e).lastIndexOf("\n")+1,d=f.substring(p),h=r.exec(d),{line:d,offset:p,prefix:h&&h[0]});!n&&b.prefix?u||b.prefix!==b.line?!u&&function(t){return o.test(t)}(b.prefix)?e+="\n"+function(t){return t.replace(l,function(t,e){return parseInt(e)+1+"."})}(b.prefix):e+="\n"+function(t,e){return t.replace(e?a:i," ")}(b.prefix,u):e=e.substring(0,b.offset)+function(t){return t.replace(c,"")}(b.prefix):e+="\n",y(t,e+s,e.length)}(this._elem,h,b,g,d.shiftKey);d.preventDefault()}}},d})?r.apply(e,o):r)||(t.exports=i)},function(t,e){(function(){"use strict";var t=new Set("annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "));function e(e){var n=t.has(e);return e=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(e),!n&&e}function n(t){var e=t.isConnected;if(void 0!==e)return e;for(;t&&!(t.__CE_isImportDocument||t instanceof Document);)t=t.parentNode||(window.ShadowRoot&&t instanceof ShadowRoot?t.host:void 0);return!(!t||!(t.__CE_isImportDocument||t instanceof Document))}function r(t,e){for(;e&&e!==t&&!e.nextSibling;)e=e.parentNode;return e&&e!==t?e.nextSibling:null}function o(t,e,n){n=void 0===n?new Set:n;for(var i=t;i;){if(i.nodeType===Node.ELEMENT_NODE){var a=i;e(a);var l=a.localName;if("link"===l&&"import"===a.getAttribute("rel")){if((i=a.import)instanceof Node&&!n.has(i))for(n.add(i),i=i.firstChild;i;i=i.nextSibling)o(i,e,n);i=r(t,a);continue}if("template"===l){i=r(t,a);continue}if(a=a.__CE_shadowRoot)for(a=a.firstChild;a;a=a.nextSibling)o(a,e,n)}i=i.firstChild?i.firstChild:r(t,i)}}function i(t,e,n){t[e]=n}function a(){this.a=new Map,this.f=new Map,this.c=[],this.b=!1}function l(t,e){t.b=!0,t.c.push(e)}function c(t,e){t.b&&o(e,function(e){return s(t,e)})}function s(t,e){if(t.b&&!e.__CE_patched){e.__CE_patched=!0;for(var n=0;n<t.c.length;n++)t.c[n](e)}}function u(t,e){var n=[];for(o(e,function(t){return n.push(t)}),e=0;e<n.length;e++){var r=n[e];1===r.__CE_state?t.connectedCallback(r):d(t,r)}}function f(t,e){var n=[];for(o(e,function(t){return n.push(t)}),e=0;e<n.length;e++){var r=n[e];1===r.__CE_state&&t.disconnectedCallback(r)}}function p(t,e,n){var r=(n=void 0===n?{}:n).u||new Set,i=n.h||function(e){return d(t,e)},a=[];if(o(e,function(e){if("link"===e.localName&&"import"===e.getAttribute("rel")){var n=e.import;n instanceof Node&&(n.__CE_isImportDocument=!0,n.__CE_hasRegistry=!0),n&&"complete"===n.readyState?n.__CE_documentLoadHandled=!0:e.addEventListener("load",function(){var n=e.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0;var o=new Set(r);o.delete(n),p(t,n,{u:o,h:i})}})}else a.push(e)},r),t.b)for(e=0;e<a.length;e++)s(t,a[e]);for(e=0;e<a.length;e++)i(a[e])}function d(t,e){if(void 0===e.__CE_state){var r=e.ownerDocument;if((r.defaultView||r.__CE_isImportDocument&&r.__CE_hasRegistry)&&(r=t.a.get(e.localName))){r.constructionStack.push(e);var o=r.constructorFunction;try{try{if(new o!==e)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{r.constructionStack.pop()}}catch(t){throw e.__CE_state=2,t}if(e.__CE_state=1,e.__CE_definition=r,r.attributeChangedCallback)for(r=r.observedAttributes,o=0;o<r.length;o++){var i=r[o],a=e.getAttribute(i);null!==a&&t.attributeChangedCallback(e,i,null,a,null)}n(e)&&t.connectedCallback(e)}}}function h(t){var e=document;this.c=t,this.a=e,this.b=void 0,p(this.c,this.a),"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}))}function y(t){t.b&&t.b.disconnect()}function b(){var t=this;this.b=this.a=void 0,this.c=new Promise(function(e){t.b=e,t.a&&e(t.a)})}function g(t){if(t.a)throw Error("Already resolved.");t.a=void 0,t.b&&t.b(void 0)}function v(t){this.c=!1,this.a=t,this.j=new Map,this.f=function(t){return t()},this.b=!1,this.i=[],this.o=new h(t)}a.prototype.connectedCallback=function(t){var e=t.__CE_definition;e.connectedCallback&&e.connectedCallback.call(t)},a.prototype.disconnectedCallback=function(t){var e=t.__CE_definition;e.disconnectedCallback&&e.disconnectedCallback.call(t)},a.prototype.attributeChangedCallback=function(t,e,n,r,o){var i=t.__CE_definition;i.attributeChangedCallback&&-1<i.observedAttributes.indexOf(e)&&i.attributeChangedCallback.call(t,e,n,r,o)},h.prototype.f=function(t){var e=this.a.readyState;for("interactive"!==e&&"complete"!==e||y(this),e=0;e<t.length;e++)for(var n=t[e].addedNodes,r=0;r<n.length;r++)p(this.c,n[r])},v.prototype.l=function(t,n){var r=this;if(!(n instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!e(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(this.a.a.get(t))throw Error("A custom element with name '"+t+"' has already been defined.");if(this.c)throw Error("A custom element is already being defined.");this.c=!0;try{var o=function(t){var e=i[t];if(void 0!==e&&!(e instanceof Function))throw Error("The '"+t+"' callback must be a function.");return e},i=n.prototype;if(!(i instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var a=o("connectedCallback"),l=o("disconnectedCallback"),c=o("adoptedCallback"),s=o("attributeChangedCallback"),u=n.observedAttributes||[]}catch(t){return}finally{this.c=!1}n={localName:t,constructorFunction:n,connectedCallback:a,disconnectedCallback:l,adoptedCallback:c,attributeChangedCallback:s,observedAttributes:u,constructionStack:[]},function(t,e,n){t.a.set(e,n),t.f.set(n.constructorFunction,n)}(this.a,t,n),this.i.push(n),this.b||(this.b=!0,this.f(function(){return function(t){if(!1!==t.b){t.b=!1;for(var e=t.i,n=[],r=new Map,o=0;o<e.length;o++)r.set(e[o].localName,[]);for(p(t.a,document,{h:function(e){if(void 0===e.__CE_state){var o=e.localName,i=r.get(o);i?i.push(e):t.a.a.get(o)&&n.push(e)}}}),o=0;o<n.length;o++)d(t.a,n[o]);for(;0<e.length;){var i=e.shift();o=i.localName,i=r.get(i.localName);for(var a=0;a<i.length;a++)d(t.a,i[a]);(o=t.j.get(o))&&g(o)}}}(r)}))},v.prototype.h=function(t){p(this.a,t)},v.prototype.get=function(t){if(t=this.a.a.get(t))return t.constructorFunction},v.prototype.m=function(t){if(!e(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var n=this.j.get(t);return n?n.c:(n=new b,this.j.set(t,n),this.a.a.get(t)&&!this.i.some(function(e){return e.localName===t})&&g(n),n.c)},v.prototype.s=function(t){y(this.o);var e=this.f;this.f=function(n){return t(function(){return e(n)})}},window.CustomElementRegistry=v,v.prototype.define=v.prototype.l,v.prototype.upgrade=v.prototype.h,v.prototype.get=v.prototype.get,v.prototype.whenDefined=v.prototype.m,v.prototype.polyfillWrapFlushCallback=v.prototype.s;var w=window.Document.prototype.createElement,m=window.Document.prototype.createElementNS,E=window.Document.prototype.importNode,_=window.Document.prototype.prepend,O=window.Document.prototype.append,j=window.DocumentFragment.prototype.prepend,x=window.DocumentFragment.prototype.append,P=window.Node.prototype.cloneNode,T=window.Node.prototype.appendChild,k=window.Node.prototype.insertBefore,C=window.Node.prototype.removeChild,S=window.Node.prototype.replaceChild,N=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),A=window.Element.prototype.attachShadow,D=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),M=window.Element.prototype.getAttribute,L=window.Element.prototype.setAttribute,F=window.Element.prototype.removeAttribute,K=window.Element.prototype.getAttributeNS,I=window.Element.prototype.setAttributeNS,H=window.Element.prototype.removeAttributeNS,R=window.Element.prototype.insertAdjacentElement,W=window.Element.prototype.insertAdjacentHTML,B=window.Element.prototype.prepend,$=window.Element.prototype.append,z=window.Element.prototype.before,U=window.Element.prototype.after,q=window.Element.prototype.replaceWith,V=window.Element.prototype.remove,Q=window.HTMLElement,X=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),G=window.HTMLElement.prototype.insertAdjacentElement,J=window.HTMLElement.prototype.insertAdjacentHTML,Y=new function(){};function Z(t,e,r){function o(e){return function(r){for(var o=[],i=0;i<arguments.length;++i)o[i]=arguments[i];i=[];for(var a=[],l=0;l<o.length;l++){var c=o[l];if(c instanceof Element&&n(c)&&a.push(c),c instanceof DocumentFragment)for(c=c.firstChild;c;c=c.nextSibling)i.push(c);else i.push(c)}for(e.apply(this,o),o=0;o<a.length;o++)f(t,a[o]);if(n(this))for(o=0;o<i.length;o++)(a=i[o])instanceof Element&&u(t,a)}}void 0!==r.g&&(e.prepend=o(r.g)),void 0!==r.append&&(e.append=o(r.append))}var tt,et=window.customElements;if(!et||et.forcePolyfill||"function"!=typeof et.define||"function"!=typeof et.get){var nt=new a;tt=nt,window.HTMLElement=function(){function t(){var t=this.constructor,e=tt.f.get(t);if(!e)throw Error("The custom element being constructed was not registered with `customElements`.");var n=e.constructionStack;if(0===n.length)return n=w.call(document,e.localName),Object.setPrototypeOf(n,t.prototype),n.__CE_state=1,n.__CE_definition=e,s(tt,n),n;var r=n[e=n.length-1];if(r===Y)throw Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return n[e]=Y,Object.setPrototypeOf(r,t.prototype),s(tt,r),r}return t.prototype=Q.prototype,Object.defineProperty(t.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:t}),t}(),function(){var t=nt;i(Document.prototype,"createElement",function(e){if(this.__CE_hasRegistry){var n=t.a.get(e);if(n)return new n.constructorFunction}return e=w.call(this,e),s(t,e),e}),i(Document.prototype,"importNode",function(e,n){return e=E.call(this,e,!!n),this.__CE_hasRegistry?p(t,e):c(t,e),e}),i(Document.prototype,"createElementNS",function(e,n){if(this.__CE_hasRegistry&&(null===e||"http://www.w3.org/1999/xhtml"===e)){var r=t.a.get(n);if(r)return new r.constructorFunction}return e=m.call(this,e,n),s(t,e),e}),Z(t,Document.prototype,{g:_,append:O})}(),Z(nt,DocumentFragment.prototype,{g:j,append:x}),function(){function t(t,r){Object.defineProperty(t,"textContent",{enumerable:r.enumerable,configurable:!0,get:r.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)r.set.call(this,t);else{var o=void 0;if(this.firstChild){var i=this.childNodes,a=i.length;if(0<a&&n(this)){o=Array(a);for(var l=0;l<a;l++)o[l]=i[l]}}if(r.set.call(this,t),o)for(t=0;t<o.length;t++)f(e,o[t])}}})}var e=nt;i(Node.prototype,"insertBefore",function(t,r){if(t instanceof DocumentFragment){var o=Array.prototype.slice.apply(t.childNodes);if(t=k.call(this,t,r),n(this))for(r=0;r<o.length;r++)u(e,o[r]);return t}return o=n(t),r=k.call(this,t,r),o&&f(e,t),n(this)&&u(e,t),r}),i(Node.prototype,"appendChild",function(t){if(t instanceof DocumentFragment){var r=Array.prototype.slice.apply(t.childNodes);if(t=T.call(this,t),n(this))for(var o=0;o<r.length;o++)u(e,r[o]);return t}return r=n(t),o=T.call(this,t),r&&f(e,t),n(this)&&u(e,t),o}),i(Node.prototype,"cloneNode",function(t){return t=P.call(this,!!t),this.ownerDocument.__CE_hasRegistry?p(e,t):c(e,t),t}),i(Node.prototype,"removeChild",function(t){var r=n(t),o=C.call(this,t);return r&&f(e,t),o}),i(Node.prototype,"replaceChild",function(t,r){if(t instanceof DocumentFragment){var o=Array.prototype.slice.apply(t.childNodes);if(t=S.call(this,t,r),n(this))for(f(e,r),r=0;r<o.length;r++)u(e,o[r]);return t}o=n(t);var i=S.call(this,t,r),a=n(this);return a&&f(e,r),o&&f(e,t),a&&u(e,t),i}),N&&N.get?t(Node.prototype,N):l(e,function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=0;e<this.childNodes.length;e++)t.push(this.childNodes[e].textContent);return t.join("")},set:function(t){for(;this.firstChild;)C.call(this,this.firstChild);T.call(this,document.createTextNode(t))}})})}(),function(){function t(t,e){Object.defineProperty(t,"innerHTML",{enumerable:e.enumerable,configurable:!0,get:e.get,set:function(t){var r=this,i=void 0;if(n(this)&&(i=[],o(this,function(t){t!==r&&i.push(t)})),e.set.call(this,t),i)for(var l=0;l<i.length;l++){var s=i[l];1===s.__CE_state&&a.disconnectedCallback(s)}return this.ownerDocument.__CE_hasRegistry?p(a,this):c(a,this),t}})}function e(t,e){i(t,"insertAdjacentElement",function(t,r){var o=n(r);return t=e.call(this,t,r),o&&f(a,r),n(t)&&u(a,r),t})}function r(t,e){function n(t,e){for(var n=[];t!==e;t=t.nextSibling)n.push(t);for(e=0;e<n.length;e++)p(a,n[e])}i(t,"insertAdjacentHTML",function(t,r){if("beforebegin"===(t=t.toLowerCase())){var o=this.previousSibling;e.call(this,t,r),n(o||this.parentNode.firstChild,this)}else if("afterbegin"===t)o=this.firstChild,e.call(this,t,r),n(this.firstChild,o);else if("beforeend"===t)o=this.lastChild,e.call(this,t,r),n(o||this.firstChild,null);else{if("afterend"!==t)throw new SyntaxError("The value provided ("+String(t)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");o=this.nextSibling,e.call(this,t,r),n(this.nextSibling,o)}})}var a=nt;A&&i(Element.prototype,"attachShadow",function(t){return this.__CE_shadowRoot=A.call(this,t)}),D&&D.get?t(Element.prototype,D):X&&X.get?t(HTMLElement.prototype,X):l(a,function(e){t(e,{enumerable:!0,configurable:!0,get:function(){return P.call(this,!0).innerHTML},set:function(t){var e="template"===this.localName,n=e?this.content:this,r=m.call(document,this.namespaceURI,this.localName);for(r.innerHTML=t;0<n.childNodes.length;)C.call(n,n.childNodes[0]);for(t=e?r.content:r;0<t.childNodes.length;)T.call(n,t.childNodes[0])}})}),i(Element.prototype,"setAttribute",function(t,e){if(1!==this.__CE_state)return L.call(this,t,e);var n=M.call(this,t);L.call(this,t,e),e=M.call(this,t),a.attributeChangedCallback(this,t,n,e,null)}),i(Element.prototype,"setAttributeNS",function(t,e,n){if(1!==this.__CE_state)return I.call(this,t,e,n);var r=K.call(this,t,e);I.call(this,t,e,n),n=K.call(this,t,e),a.attributeChangedCallback(this,e,r,n,t)}),i(Element.prototype,"removeAttribute",function(t){if(1!==this.__CE_state)return F.call(this,t);var e=M.call(this,t);F.call(this,t),null!==e&&a.attributeChangedCallback(this,t,e,null,null)}),i(Element.prototype,"removeAttributeNS",function(t,e){if(1!==this.__CE_state)return H.call(this,t,e);var n=K.call(this,t,e);H.call(this,t,e);var r=K.call(this,t,e);n!==r&&a.attributeChangedCallback(this,e,n,r,t)}),G?e(HTMLElement.prototype,G):R?e(Element.prototype,R):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),J?r(HTMLElement.prototype,J):W?r(Element.prototype,W):console.warn("Custom Elements: `Element#insertAdjacentHTML` was not patched."),Z(a,Element.prototype,{g:B,append:$}),function(t){function e(e){return function(r){for(var o=[],i=0;i<arguments.length;++i)o[i]=arguments[i];i=[];for(var a=[],l=0;l<o.length;l++){var c=o[l];if(c instanceof Element&&n(c)&&a.push(c),c instanceof DocumentFragment)for(c=c.firstChild;c;c=c.nextSibling)i.push(c);else i.push(c)}for(e.apply(this,o),o=0;o<a.length;o++)f(t,a[o]);if(n(this))for(o=0;o<i.length;o++)(a=i[o])instanceof Element&&u(t,a)}}var r=Element.prototype;void 0!==z&&(r.before=e(z)),void 0!==z&&(r.after=e(U)),void 0!==q&&i(r,"replaceWith",function(e){for(var r=[],o=0;o<arguments.length;++o)r[o]=arguments[o];o=[];for(var i=[],a=0;a<r.length;a++){var l=r[a];if(l instanceof Element&&n(l)&&i.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)o.push(l);else o.push(l)}for(a=n(this),q.apply(this,r),r=0;r<i.length;r++)f(t,i[r]);if(a)for(f(t,this),r=0;r<o.length;r++)(i=o[r])instanceof Element&&u(t,i)}),void 0!==V&&i(r,"remove",function(){var e=n(this);V.call(this),e&&f(t,this)})}(a)}(),document.__CE_hasRegistry=!0;var rt=new v(nt);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:rt})}}).call(self)},function(t,e,n){(function(t){!function(t){"use strict";function n(t){return/^(get|set|value|writable|enumerable|configurable)$/.test(t)}function r(t){if(Object(t)!==t)throw new TypeError("property descriptor should be an Object, given: "+t);var e={};if("enumerable"in t&&(e.enumerable=!!t.enumerable),"configurable"in t&&(e.configurable=!!t.configurable),"value"in t&&(e.value=t.value),"writable"in t&&(e.writable=!!t.writable),"get"in t){var n=t.get;if(void 0!==n&&"function"!=typeof n)throw new TypeError("property descriptor 'get' attribute must be callable or undefined, given: "+n);e.get=n}if("set"in t){var r=t.set;if(void 0!==r&&"function"!=typeof r)throw new TypeError("property descriptor 'set' attribute must be callable or undefined, given: "+r);e.set=r}if(("get"in e||"set"in e)&&("value"in e||"writable"in e))throw new TypeError("property descriptor cannot be both a data and an accessor descriptor: "+t);return e}function o(t){return void 0!==t&&("get"in t||"set"in t)}function i(t){return void 0!==t&&("value"in t||"writable"in t)}function a(t){return void 0!==t&&(!o(t)&&!i(t))}function l(t){return!("get"in t||"set"in t||"value"in t||"writable"in t||"enumerable"in t||"configurable"in t)}function c(t,e){return s(t.get,e.get)&&s(t.set,e.set)&&s(t.value,e.value)&&s(t.writable,e.writable)&&s(t.enumerable,e.enumerable)&&s(t.configurable,e.configurable)}function s(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function u(t){if(void 0!==t){var e=function(t){var e=r(t);return a(e)||i(e)?("value"in e||(e.value=void 0),"writable"in e||(e.writable=!1)):("get"in e||(e.get=void 0),"set"in e||(e.set=void 0)),"enumerable"in e||(e.enumerable=!1),"configurable"in e||(e.configurable=!1),e}(t);for(var o in t)n(o)||Object.defineProperty(e,o,{value:t[o],writable:!0,enumerable:!0,configurable:!0});return e}}function f(t){var e=r(t);for(var o in t)n(o)||Object.defineProperty(e,o,{value:t[o],writable:!0,enumerable:!0,configurable:!0});return e}"undefined"==typeof WeakMap&&(t.WeakMap=function(){},t.WeakMap.prototype={get:function(t){},set:function(t,e){throw new Error("WeakMap not supported")}});var p,d,h,y=Object.preventExtensions,b=(Object.seal,Object.freeze,Object.isExtensible),g=(Object.isSealed,Object.isFrozen,Object.getPrototypeOf),v=Object.getOwnPropertyDescriptor,w=Object.defineProperty,m=Object.defineProperties,E=Object.keys,_=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,j=Object.assign,x=Array.isArray,P=Array.prototype.concat,T=Object.prototype.isPrototypeOf,k=Object.prototype.hasOwnProperty;function C(t,e){return{}.hasOwnProperty.call(e,t)}function S(t,e){var n=Object.getOwnPropertyDescriptor(e,t);return void 0!==n&&!1===n.configurable}function N(t){return void 0!==t&&!1===t.configurable}function A(t,e,n){if(void 0===e&&!1===t)return!1;if(void 0===e&&!0===t)return!0;if(l(n))return!0;if(c(e,n))return!0;if(!1===e.configurable){if(!0===n.configurable)return!1;if("enumerable"in n&&n.enumerable!==e.enumerable)return!1}if(a(n))return!0;if(i(e)!==i(n))return!1!==e.configurable;if(i(e)&&i(n)){if(!1===e.configurable){if(!1===e.writable&&!0===n.writable)return!1;if(!1===e.writable&&"value"in n&&!s(n.value,e.value))return!1}return!0}if(o(e)&&o(n)&&!1===e.configurable){if("set"in n&&!s(n.set,e.set))return!1;if("get"in n&&!s(n.get,e.get))return!1}return!0}function D(t,e){var n=h(t),r=void 0;if("sealed"===e)for(var i=+n.length,a=0;a<i;a++){l=String(n[a]);try{Object.defineProperty(t,l,{configurable:!1})}catch(t){void 0===r&&(r=t)}}else{var l;for(i=+n.length,a=0;a<i;a++){l=String(n[a]);try{var c,s=Object.getOwnPropertyDescriptor(t,l);if(void 0!==s)c=o(s)?{configurable:!1}:{configurable:!1,writable:!1},Object.defineProperty(t,l,c)}catch(t){void 0===r&&(r=t)}}}if(void 0!==r)throw r;return W.preventExtensions(t)}function M(t,e){if(p(t))return!1;for(var n,r,o=h(t),a=void 0,l=!1,c=!1,s=+o.length,u=0;u<s;u++){n=String(o[u]);try{r=Object.getOwnPropertyDescriptor(t,n),l=l||r.configurable,i(r)&&(c=c||r.writable)}catch(t){void 0===a&&(a=t,l=!0)}}if(void 0!==a)throw a;return("frozen"!==e||!0!==c)&&!0!==l}function L(t,e){this.target=t,this.handler=e}L.prototype={getTrap:function(t){var e=this.handler[t];if(void 0!==e){if("function"!=typeof e)throw new TypeError(t+" trap is not callable: "+e);return e}},getOwnPropertyDescriptor:function(t){var e=this.getTrap("getOwnPropertyDescriptor");if(void 0===e)return W.getOwnPropertyDescriptor(this.target,t);t=String(t);var n=e.call(this.handler,this.target,t);n=u(n);var r=Object.getOwnPropertyDescriptor(this.target,t),o=Object.isExtensible(this.target);if(void 0!==n){if(!o&&void 0===r)throw new TypeError("cannot report a new own property '"+t+"' on a non-extensible object");if(void 0!==t&&!A(o,r,n))throw new TypeError("cannot report incompatible property descriptor for property '"+t+"'");if(!1===n.configurable){if(void 0===r||!0===r.configurable)throw new TypeError("cannot report a non-configurable descriptor for configurable or non-existent property '"+t+"'");if("writable"in n&&!1===n.writable&&!0===r.writable)throw new TypeError("cannot report non-configurable, writable property '"+t+"' as non-configurable, non-writable")}return n}if(N(r))throw new TypeError("cannot report non-configurable property '"+t+"' as non-existent");if(!o&&void 0!==r)throw new TypeError("cannot report existing own property '"+t+"' as non-existent on a non-extensible object")},getPropertyDescriptor:function(t){var e=this;if(e.has(t))return{get:function(){return e.get(this,t)},set:function(n){if(e.set(this,t,n))return n;throw new TypeError("failed assignment to "+t)},enumerable:!0,configurable:!0}},defineProperty:function(t,e){var n=this.getTrap("defineProperty");if(void 0===n)return W.defineProperty(this.target,t,e);t=String(t);var r=f(e),o=n.call(this.handler,this.target,t,r);if(!0===(o=!!o)){var a=Object.getOwnPropertyDescriptor(this.target,t),l=Object.isExtensible(this.target);if(!l&&void 0===a)throw new TypeError("cannot successfully add a new property '"+t+"' to a non-extensible object");if(void 0!==a){if(!A(l,a,e))throw new TypeError("cannot define incompatible property descriptor for property '"+t+"'");if(i(a)&&!1===a.configurable&&!0===a.writable&&!1===e.configurable&&!1===e.writable)throw new TypeError("cannot successfully define non-configurable, writable  property '"+t+"' as non-configurable, non-writable")}if(!1===e.configurable&&!N(a))throw new TypeError("cannot successfully define a non-configurable descriptor for configurable or non-existent property '"+t+"'")}return o},preventExtensions:function(){var t=this.getTrap("preventExtensions");if(void 0===t)return W.preventExtensions(this.target);var e=t.call(this.handler,this.target);if((e=!!e)&&p(this.target))throw new TypeError("can't report extensible object as non-extensible: "+this.target);return e},delete:function(t){var e=this.getTrap("deleteProperty");if(void 0===e)return W.deleteProperty(this.target,t);t=String(t);var n,r=e.call(this.handler,this.target,t);if(!0===(r=!!r)){if(void 0!==(n=Object.getOwnPropertyDescriptor(this.target,t))&&!1===n.configurable)throw new TypeError("property '"+t+"' is non-configurable and can't be deleted");if(void 0!==n&&!p(this.target))throw new TypeError("cannot successfully delete existing property '"+t+"' on a non-extensible object")}return r},getOwnPropertyNames:function(){return this.ownKeys()},ownKeys:function(){var t=this.getTrap("ownKeys");if(void 0===t)return W.ownKeys(this.target);for(var e=t.call(this.handler,this.target),n=Object.create(null),r=+e.length,o=new Array(r),i=0;i<r;i++){var a=String(e[i]);if(!Object.isExtensible(this.target)&&!C(a,this.target))throw new TypeError("ownKeys trap cannot list a new property '"+a+"' on a non-extensible object");n[a]=!0,o[i]=a}var l=h(this.target),c=this.target;return l.forEach(function(t){if(!n[t]){if(S(t,c))throw new TypeError("ownKeys trap failed to include non-configurable property '"+t+"'");if(!Object.isExtensible(c)&&C(t,c))throw new TypeError("ownKeys trap cannot report existing own property '"+t+"' as non-existent on a non-extensible object")}}),o},isExtensible:function(){var t=this.getTrap("isExtensible");if(void 0===t)return W.isExtensible(this.target);var e=t.call(this.handler,this.target);e=!!e;var n=p(this.target);if(e!==n)throw e?new TypeError("cannot report non-extensible object as extensible: "+this.target):new TypeError("cannot report extensible object as non-extensible: "+this.target);return n},getPrototypeOf:function(){var t=this.getTrap("getPrototypeOf");if(void 0===t)return W.getPrototypeOf(this.target);var e=t.call(this.handler,this.target);if(!p(this.target)&&!s(e,d(this.target)))throw new TypeError("prototype value does not match: "+this.target);return e},setPrototypeOf:function(t){var e=this.getTrap("setPrototypeOf");if(void 0===e)return W.setPrototypeOf(this.target,t);var n=e.call(this.handler,this.target,t);if((n=!!n)&&!p(this.target)&&!s(t,d(this.target)))throw new TypeError("prototype value does not match: "+this.target);return n},getPropertyNames:function(){throw new TypeError("getPropertyNames trap is deprecated")},has:function(t){var e=this.getTrap("has");if(void 0===e)return W.has(this.target,t);t=String(t);var n=e.call(this.handler,this.target,t);if(!1===(n=!!n)){if(S(t,this.target))throw new TypeError("cannot report existing non-configurable own property '"+t+"' as a non-existent property");if(!Object.isExtensible(this.target)&&C(t,this.target))throw new TypeError("cannot report existing own property '"+t+"' as non-existent on a non-extensible object")}return n},get:function(t,e){var n=this.getTrap("get");if(void 0===n)return W.get(this.target,e,t);e=String(e);var r=n.call(this.handler,this.target,e,t),a=Object.getOwnPropertyDescriptor(this.target,e);if(void 0!==a)if(i(a)&&!1===a.configurable&&!1===a.writable){if(!s(r,a.value))throw new TypeError("cannot report inconsistent value for non-writable, non-configurable property '"+e+"'")}else if(o(a)&&!1===a.configurable&&void 0===a.get&&void 0!==r)throw new TypeError("must report undefined for non-configurable accessor property '"+e+"' without getter");return r},set:function(t,e,n){var r=this.getTrap("set");if(void 0===r)return W.set(this.target,e,n,t);e=String(e);var a=r.call(this.handler,this.target,e,n,t);if(!0===(a=!!a)){var l=Object.getOwnPropertyDescriptor(this.target,e);if(void 0!==l)if(i(l)&&!1===l.configurable&&!1===l.writable){if(!s(n,l.value))throw new TypeError("cannot successfully assign to a non-writable, non-configurable property '"+e+"'")}else if(o(l)&&!1===l.configurable&&void 0===l.set)throw new TypeError("setting a property '"+e+"' that has  only a getter")}return a},enumerate:function(){var t=this.getTrap("enumerate");if(void 0===t){for(var e,n=[],r=(e=W.enumerate(this.target)).next();!r.done;)n.push(String(r.value)),r=e.next();return n}if(null==(e=t.call(this.handler,this.target))||void 0===e.next)throw new TypeError("enumerate trap should return an iterator, got: "+e);var o=Object.create(null);for(n=[],r=e.next();!r.done;){var i=String(r.value);if(o[i])throw new TypeError("enumerate trap cannot list a duplicate property '"+i+"'");o[i]=!0,n.push(i),r=e.next()}var a=Object.keys(this.target),l=this.target;return a.forEach(function(t){if(!o[t]){if(S(t,l))throw new TypeError("enumerate trap failed to include non-configurable enumerable property '"+t+"'");if(!Object.isExtensible(l)&&C(t,l))throw new TypeError("cannot report existing own property '"+t+"' as non-existent on a non-extensible object")}}),n},iterate:L.prototype.enumerate,apply:function(t,e,n){var r=this.getTrap("apply");if(void 0===r)return W.apply(t,e,n);if("function"==typeof this.target)return r.call(this.handler,t,e,n);throw new TypeError("apply: "+t+" is not a function")},construct:function(t,e,n){var r=this.getTrap("construct");if(void 0===r)return W.construct(t,e,n);if("function"!=typeof t)throw new TypeError("new: "+t+" is not a function");if(void 0===n)n=t;else if("function"!=typeof n)throw new TypeError("new: "+n+" is not a function");return r.call(this.handler,t,e,n)}};var F=new WeakMap;function K(t,e){return"object"===(r=typeof(n=e))&&null!==n||"function"===r?t.get(e):void 0;var n,r}function I(t){return function e(){var n=K(F,this);return void 0!==n?e.call(n.target):t.call(this)}}Object.preventExtensions=function(t){var e=F.get(t);if(void 0!==e){if(e.preventExtensions())return t;throw new TypeError("preventExtensions on "+t+" rejected")}return y(t)},Object.seal=function(t){return D(t,"sealed"),t},Object.freeze=function(t){return D(t,"frozen"),t},Object.isExtensible=p=function(t){var e=F.get(t);return void 0!==e?e.isExtensible():b(t)},Object.isSealed=function(t){return M(t,"sealed")},Object.isFrozen=function(t){return M(t,"frozen")},Object.getPrototypeOf=d=function(t){var e=F.get(t);return void 0!==e?e.getPrototypeOf():g(t)},Object.getOwnPropertyDescriptor=function(t,e){var n=F.get(t);return void 0!==n?n.getOwnPropertyDescriptor(e):v(t,e)},Object.defineProperty=function(t,e,n){var r=F.get(t);if(void 0!==r){var o=f(n);if(!1===r.defineProperty(e,o))throw new TypeError("can't redefine property '"+e+"'");return t}return w(t,e,n)},Object.defineProperties=function(t,e){var n=F.get(t);if(void 0!==n){for(var r=Object.keys(e),o=0;o<r.length;o++){var i=r[o],a=f(e[i]);if(!1===n.defineProperty(i,a))throw new TypeError("can't redefine property '"+i+"'")}return t}return m(t,e)},Object.keys=function(t){var e=F.get(t);if(void 0!==e){for(var n=e.ownKeys(),r=[],o=0;o<n.length;o++){var i=String(n[o]),a=Object.getOwnPropertyDescriptor(t,i);void 0!==a&&!0===a.enumerable&&r.push(i)}return r}return E(t)},Object.getOwnPropertyNames=h=function(t){var e=F.get(t);return void 0!==e?e.ownKeys():_(t)},void 0!==O&&(Object.getOwnPropertySymbols=function(t){return void 0!==F.get(t)?[]:O(t)}),void 0!==j&&(Object.assign=function(t){for(var e=!0,n=0;n<arguments.length;n++){if(void 0!==F.get(arguments[n])){e=!1;break}}if(e)return j.apply(Object,arguments);if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])}return r}),Object.prototype.valueOf=I(Object.prototype.valueOf),Object.prototype.toString=I(Object.prototype.toString),Function.prototype.toString=I(Function.prototype.toString),Date.prototype.toString=I(Date.prototype.toString),Object.prototype.isPrototypeOf=function(t){for(;;){var e=K(F,t);if(void 0===e)return T.call(this,t);if(null===(t=e.getPrototypeOf()))return!1;if(s(t,this))return!0}},Array.isArray=function(t){var e=K(F,t);return void 0!==e?Array.isArray(e.target):x(t)},Array.prototype.concat=function(){for(var t,e,n,r=0;r<arguments.length;r++)e=arguments[r],n=void 0,void 0!==(n=K(F,e))&&Array.isArray(n.target)&&(t=arguments[r].length,arguments[r]=Array.prototype.slice.call(arguments[r],0,t));return P.apply(this,arguments)};var H=Object.setPrototypeOf,R=function(){var t=v(Object.prototype,"__proto__");if(void 0===t||"function"!=typeof t.set)return function(){throw new TypeError("setPrototypeOf not supported on this platform")};try{t.set.call({},{})}catch(t){return function(){throw new TypeError("setPrototypeOf not supported on this platform")}}return w(Object.prototype,"__proto__",{set:function(t){return Object.setPrototypeOf(this,Object(t))}}),t.set}();Object.setPrototypeOf=function(t,e){var n=F.get(t);if(void 0!==n){if(n.setPrototypeOf(e))return t;throw new TypeError("proxy rejected prototype mutation")}if(!p(t))throw new TypeError("can't set prototype on non-extensible object: "+t);if(H)return H(t,e);if(Object(e)!==e||null===e)throw new TypeError("Object prototype may only be an Object or null: "+e);return R.call(t,e),t},Object.prototype.hasOwnProperty=function(t){var e=K(F,this);return void 0!==e?void 0!==e.getOwnPropertyDescriptor(t):k.call(this,t)};var W={getOwnPropertyDescriptor:function(t,e){return Object.getOwnPropertyDescriptor(t,e)},defineProperty:function(t,e,n){var r=F.get(t);if(void 0!==r)return r.defineProperty(t,e,n);var u=Object.getOwnPropertyDescriptor(t,e),f=Object.isExtensible(t);if(void 0===u&&!1===f)return!1;if(void 0===u&&!0===f)return Object.defineProperty(t,e,n),!0;if(l(n))return!0;if(c(u,n))return!0;if(!1===u.configurable){if(!0===n.configurable)return!1;if("enumerable"in n&&n.enumerable!==u.enumerable)return!1}if(a(n));else if(i(u)!==i(n)){if(!1===u.configurable)return!1}else if(i(u)&&i(n)){if(!1===u.configurable){if(!1===u.writable&&!0===n.writable)return!1;if(!1===u.writable&&"value"in n&&!s(n.value,u.value))return!1}}else if(o(u)&&o(n)&&!1===u.configurable){if("set"in n&&!s(n.set,u.set))return!1;if("get"in n&&!s(n.get,u.get))return!1}return Object.defineProperty(t,e,n),!0},deleteProperty:function(t,e){var n=F.get(t);if(void 0!==n)return n.delete(e);var r=Object.getOwnPropertyDescriptor(t,e);return void 0===r||!0===r.configurable&&(delete t[e],!0)},getPrototypeOf:function(t){return Object.getPrototypeOf(t)},setPrototypeOf:function(t,e){var n=F.get(t);if(void 0!==n)return n.setPrototypeOf(e);if(Object(e)!==e||null===e)throw new TypeError("Object prototype may only be an Object or null: "+e);if(!p(t))return!1;if(s(Object.getPrototypeOf(t),e))return!0;if(H)try{return H(t,e),!0}catch(t){return!1}return R.call(t,e),!0},preventExtensions:function(t){var e=F.get(t);return void 0!==e?e.preventExtensions():(y(t),!0)},isExtensible:function(t){return Object.isExtensible(t)},has:function(t,e){return e in t},get:function(t,e,n){n=n||t;var r=F.get(t);if(void 0!==r)return r.get(n,e);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var a=Object.getPrototypeOf(t);if(null===a)return;return W.get(a,e,n)}return i(o)?o.value:void 0!==o.get?o.get.call(n):void 0},set:function(t,e,n,r){r=r||t;var i=F.get(t);if(void 0!==i)return i.set(r,e,n);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var l=Object.getPrototypeOf(t);if(null!==l)return W.set(l,e,n,r);a={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if(o(a)){var c=a.set;return void 0!==c&&(c.call(r,n),!0)}if(!1===a.writable)return!1;var s=Object.getOwnPropertyDescriptor(r,e);if(void 0!==s){var u={value:n,writable:s.writable,enumerable:s.enumerable,configurable:s.configurable};return Object.defineProperty(r,e,u),!0}if(!Object.isExtensible(r))return!1;var f={value:n,writable:!0,enumerable:!0,configurable:!0};return Object.defineProperty(r,e,f),!0},enumerate:function(t){var e,n=F.get(t);if(void 0!==n)e=n.enumerate(n.target);else for(var r in e=[],t)e.push(r);var o=+e.length,i=0;return{next:function(){return i===o?{done:!0}:{done:!1,value:e[i++]}}}},ownKeys:function(t){return h(t)},apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},construct:function(t,e,n){var r=F.get(t);if(void 0!==r)return r.construct(r.target,e,n);if("function"!=typeof t)throw new TypeError("target is not a function: "+t);if(void 0===n||n===t)return new(Function.prototype.bind.apply(t,[null].concat(e)));if("function"!=typeof n)throw new TypeError("newTarget is not a function: "+t);var o=n.prototype,i=Object(o)===o?Object.create(o):{},a=Function.prototype.apply.call(t,i,e);return Object(a)===a?a:i}};if(void 0!==t.Reflect?Object.getOwnPropertyNames(W).forEach(function(e){t.Reflect[e]=W[e]}):t.Reflect=W,"undefined"!=typeof Proxy&&void 0!==Proxy.create){var B=Proxy.create,$=Proxy.createFunction,z=B({get:function(){throw new TypeError("proxy is revoked")}});t.Proxy=function(t,e){if(Object(t)!==t)throw new TypeError("Proxy target must be an Object, given "+t);if(Object(e)!==e)throw new TypeError("Proxy handler must be an Object, given "+e);var n,r=new L(t,e);return n="function"==typeof t?$(r,function(){var e=Array.prototype.slice.call(arguments);return r.apply(t,this,e)},function(){var e=Array.prototype.slice.call(arguments);return r.construct(t,e)}):B(r,Object.getPrototypeOf(t)),F.set(n,r),n},t.Proxy.revocable=function(t,e){var n=new Proxy(t,e);return{proxy:n,revoke:function(){var t=F.get(n);null!==t&&(t.target=null,t.handler=z)}}},t.Proxy.create=B,t.Proxy.createFunction=$}else"undefined"==typeof Proxy&&(t.Proxy=function(t,e){throw new Error("proxies not supported on this platform. On v8/node/iojs, make sure to pass the --harmony_proxies flag")});Object.keys(W).forEach(function(t){e[t]=W[t]})}(t)}).call(this,n(6))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.r(e);var o=n(1),i=n(2),a=n.n(i),l=n(0),c=n.n(l),s=(n(4),n(5),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),u=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function y(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(y.prototype,HTMLElement.prototype),Object.setPrototypeOf(y,HTMLElement);var b=new WeakMap,g=function(t){function e(){p(this,e);var t,n=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=function(){var t=b.get(n);t&&I(n,t)};return n.addEventListener("keydown",(t=r,function(e){" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),t(e))})),n.addEventListener("click",r),n}return h(e,y),f(e,[{key:"connectedCallback",value:function(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.hasAttribute("role")||this.setAttribute("role","button")}},{key:"click",value:function(){var t=b.get(this);t&&I(this,t)}}]),e}(),v=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return b.set(t,{prefix:"### "}),t}return h(e,g),e}();window.customElements.get("md-header")||(window.MarkdownHeaderButtonElement=v,window.customElements.define("md-header",v));var w=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return b.set(t,{prefix:"**",suffix:"**",trimFirst:!0}),t}return h(e,g),f(e,[{key:"connectedCallback",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","b")}}]),e}();window.customElements.get("md-bold")||(window.MarkdownBoldButtonElement=w,window.customElements.define("md-bold",w));var E=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return b.set(t,{prefix:"_",suffix:"_",trimFirst:!0}),t}return h(e,g),f(e,[{key:"connectedCallback",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","i")}}]),e}();window.customElements.get("md-italic")||(window.MarkdownItalicButtonElement=E,window.customElements.define("md-italic",E));var _=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return b.set(t,{prefix:"> ",multiline:!0,surroundWithNewlines:!0}),t}return h(e,g),e}();window.customElements.get("md-quote")||(window.MarkdownQuoteButtonElement=_,window.customElements.define("md-quote",_));var O=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return b.set(t,{prefix:"`",suffix:"`",blockPrefix:"```",blockSuffix:"```"}),t}return h(e,g),e}();window.customElements.get("md-code")||(window.MarkdownCodeButtonElement=O,window.customElements.define("md-code",O));var j=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return b.set(t,{prefix:"[",suffix:"](url)",replaceNext:"url",scanFor:"https?://"}),t}return h(e,g),f(e,[{key:"connectedCallback",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","k")}}]),e}();window.customElements.get("md-link")||(window.MarkdownLinkButtonElement=j,window.customElements.define("md-link",j));var x=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return b.set(t,{prefix:"- ",multiline:!0,surroundWithNewlines:!0}),t}return h(e,g),e}();window.customElements.get("md-unordered-list")||(window.MarkdownUnorderedListButtonElement=x,window.customElements.define("md-unordered-list",x));var P=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return b.set(t,{prefix:"1. ",multiline:!0,orderedList:!0}),t}return h(e,g),e}();window.customElements.get("md-ordered-list")||(window.MarkdownOrderedListButtonElement=P,window.customElements.define("md-ordered-list",P));var T=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return b.set(t,{prefix:"- [ ] ",multiline:!0,surroundWithNewlines:!0}),t}return h(e,g),f(e,[{key:"connectedCallback",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),this.setAttribute("hotkey","L")}}]),e}();window.customElements.get("md-task-list")||(window.MarkdownTaskListButtonElement=T,window.customElements.define("md-task-list",T));var k=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return b.set(t,{prefix:"@",prefixSpace:!0}),t}return h(e,g),e}();window.customElements.get("md-mention")||(window.MarkdownMentionButtonElement=k,window.customElements.define("md-mention",k));var C=function(t){function e(){p(this,e);var t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return b.set(t,{prefix:"#",prefixSpace:!0}),t}return h(e,g),e}();window.customElements.get("md-ref")||(window.MarkdownRefButtonElement=C,window.customElements.define("md-ref",C));var S=navigator.userAgent.match(/Macintosh/)?"Meta":"Control",N=function(t){function e(){return p(this,e),d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return h(e,y),f(e,[{key:"connectedCallback",value:function(){var t=function(t,e){if(e.metaKey&&"Meta"===S||e.ctrlKey&&"Control"===S){var n=t.querySelector('[hotkey="'+e.key+'"]');n&&(n.click(),e.preventDefault())}}.bind(null,this);this.field&&(this.field.addEventListener("keydown",t),A.set(this,t))}},{key:"disconnectedCallback",value:function(){var t=A.get(this);t&&this.field&&(this.field.removeEventListener("keydown",t),A.delete(this))}},{key:"field",get:function(){var t=this.getAttribute("for");if(t){var e=document.getElementById(t);return e instanceof HTMLTextAreaElement?e:null}}}]),e}(),A=new WeakMap;function D(t){return t.trim().split("\n").length>1}function M(t,e){return Array(e+1).join(t)}window.customElements.get("markdown-toolbar")||(window.MarkdownToolbarElement=N,window.customElements.define("markdown-toolbar",N));var L=null;function F(t,e){var n=t.value.slice(t.selectionStart,t.selectionEnd),r=void 0;r=e.orderedList?function(t){var e=/^\d+\.\s+/,n=void 0,r=void 0,o=t.value.slice(t.selectionStart,t.selectionEnd),i=o.split("\n");if(i.every(function(t){return e.test(t)}))i=i.map(function(t){return t.replace(e,"")}),o=i.join("\n");else{i=function(){var t=void 0,e=void 0,n=void 0,r=[];for(n=t=0,e=i.length;t<e;n=++t){var o=i[n];r.push(n+1+". "+o)}return r}(),o=i.join("\n");var a=K(t),l=a.newlinesToAppend,c=a.newlinesToPrepend;r=t.selectionStart+l.length,n=r+o.length,o=l+o+c}return{text:o,selectionStart:r,selectionEnd:n}}(t):e.multiline&&D(n)?function(t,e){var n=e.prefix,r=e.suffix,o=e.surroundWithNewlines,i=t.value.slice(t.selectionStart,t.selectionEnd),a=t.selectionStart,l=t.selectionEnd,c=i.split("\n");if(c.every(function(t){return t.startsWith(n)&&t.endsWith(r)}))i=c.map(function(t){return t.slice(n.length,t.length-r.length)}).join("\n"),l=a+i.length;else if(i=c.map(function(t){return n+t+r}).join("\n"),o){var s=K(t),u=s.newlinesToAppend,f=s.newlinesToPrepend;a+=u.length,l=a+i.length,i=u+i+f}return{text:i,selectionStart:a,selectionEnd:l}}(t,e):function(t,e){var n=void 0,r=void 0,o=e.prefix,i=e.suffix,a=e.blockPrefix,l=e.blockSuffix,c=e.replaceNext,s=e.prefixSpace,u=e.scanFor,f=e.surroundWithNewlines,p=t.selectionStart,d=t.selectionEnd,h=t.value.slice(t.selectionStart,t.selectionEnd),y=D(h)&&a.length>0?a+"\n":o,b=D(h)&&l.length>0?"\n"+l:i;if(s){var g=t.value[t.selectionStart-1];0===t.selectionStart||null==g||g.match(/\s/)||(y=" "+y)}h=function(t,e,n){if(t.selectionStart===t.selectionEnd)t.selectionStart=function(t,e){for(;t[e]&&null!=t[e-1]&&!t[e-1].match(/\s/);)e--;return e}(t.value,t.selectionStart),t.selectionEnd=function(t,e){for(;t[e]&&!t[e].match(/\s/);)e++;return e}(t.value,t.selectionEnd);else{var r=t.selectionStart-e.length,o=t.selectionEnd+n.length,i=t.value.slice(r,t.selectionStart)===e,a=t.value.slice(t.selectionEnd,o)===n;i&&a&&(t.selectionStart=r,t.selectionEnd=o)}return t.value.slice(t.selectionStart,t.selectionEnd)}(t,y,b);var v=t.selectionStart,w=t.selectionEnd,m=c.length>0&&b.indexOf(c)>-1&&h.length>0;if(f){var E=K(t);n=E.newlinesToAppend,r=E.newlinesToPrepend,y=n+o,b+=r}if(h.startsWith(y)&&h.endsWith(b)){var _=h.slice(y.length,h.length-b.length);if(p===d){var O=p-y.length;O=Math.max(O,v),O=Math.min(O,v+_.length),v=w=O}else w=v+_.length;return{text:_,selectionStart:v,selectionEnd:w}}if(m){if(u.length>0&&h.match(u)){b=b.replace(c,h);var j=y+b;return v=w=v+y.length,{text:j,selectionStart:v,selectionEnd:w}}var x=y+h+b;return v=v+y.length+h.length+b.indexOf(c),w=v+c.length,{text:x,selectionStart:v,selectionEnd:w}}var P=y+h+b;v=p+y.length,w=d+y.length;var T=h.match(/^\s*|\s*$/g);if(e.trimFirst&&T){var k=T[0]||"",C=T[1]||"";P=k+y+h.trim()+b+C,v+=k.length,w-=C.length}return{text:P,selectionStart:v,selectionEnd:w}}(t,e),function(t,e){var n=e.text,r=e.selectionStart,o=e.selectionEnd,i=t.selectionStart,a=t.value.slice(0,i),l=t.value.slice(t.selectionEnd);if(null===L||!0===L){t.contentEditable="true";try{L=document.execCommand("insertText",!1,n)}catch(t){L=!1}t.contentEditable="false"}if(L&&!t.value.slice(0,t.selectionStart).endsWith(n)&&(L=!1),!L){try{document.execCommand("ms-beginUndoUnit")}catch(t){}t.value=a+n+l;try{document.execCommand("ms-endUndoUnit")}catch(t){}t.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))}null!=r&&null!=o?t.setSelectionRange(r,o):t.setSelectionRange(i,t.selectionEnd)}(t,r)}function K(t){var e=t.value.slice(0,t.selectionStart),n=t.value.slice(t.selectionEnd),r=e.match(/\n*$/),o=n.match(/^\n*/),i=r?r[0].length:0,a=o?o[0].length:0,l=void 0,c=void 0;return e.match(/\S/)&&i<2&&(l=M("\n",2-i)),n.match(/\S/)&&a<2&&(c=M("\n",2-a)),null==l&&(l=""),null==c&&(c=""),{newlinesToAppend:l,newlinesToPrepend:c}}function I(t,e){var n=t.closest("markdown-toolbar");if(n instanceof N){var r=s({},{prefix:"",suffix:"",blockPrefix:"",blockSuffix:"",multiline:!1,replaceNext:"",prefixSpace:!1,scanFor:"",surroundWithNewlines:!1,orderedList:!1,trimFirst:!1},e),o=n.field;o&&(o.focus(),F(o,r))}}var H=n(3),R=n.n(H);app.initializers.add("flarum-markdown",function(t){var e=1;Object(o.extend)(a.a.prototype,"init",function(){this.textareaId="textarea"+e++}),Object(o.extend)(a.a.prototype,"view",function(t){t.children[0].attrs.id=this.textareaId}),Object(o.extend)(a.a.prototype,"configTextarea",function(t,e,n,r){if(!n){var o=new R.a(e);o.disableInline(),r.onunload=function(){o.destroy()}}}),Object(o.extend)(a.a.prototype,"toolbarItems",function(e){var n={className:"Button Button--icon Button--link",config:function(t){return $(t).tooltip()}},o=function(e){return t.translator.trans("flarum-markdown.forum.composer."+e+"_tooltip")};e.add("markdown",m("markdown-toolbar",{for:this.textareaId},m("md-header",r({title:o("header")},n),c()("fas fa-heading")),m("md-bold",r({title:o("bold")+" <cmd-b>"},n),c()("fas fa-bold")),m("md-italic",r({title:o("italic")+" <cmd-i>"},n),c()("fas fa-italic")),m("md-quote",r({title:o("quote")},n),c()("fas fa-quote-left")),m("md-code",r({title:o("code")},n),c()("fas fa-code")),m("md-link",r({title:o("link")+" <cmd-k>"},n),c()("fas fa-link")),m("md-unordered-list",r({title:o("unordered_list")},n),c()("fas fa-list-ul")),m("md-ordered-list",r({title:o("ordered_list")},n),c()("fas fa-list-ol"))),100)})})}]);
//# sourceMappingURL=forum.js.map