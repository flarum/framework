{"version":3,"sources":["webpack://@flarum/tags/webpack/bootstrap","webpack://@flarum/tags/external \"flarum.core.compat['Model']\"","webpack://@flarum/tags/external \"flarum.core.compat['extend']\"","webpack://@flarum/tags/./src/common/utils/sortTags.js","webpack://@flarum/tags/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/tags/./src/common/helpers/tagLabel.js","webpack://@flarum/tags/./src/common/helpers/tagIcon.js","webpack://@flarum/tags/./src/common/helpers/tagsLabel.js","webpack://@flarum/tags/external \"flarum.core.compat['components/Button']\"","webpack://@flarum/tags/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@flarum/tags/./src/common/models/Tag.js","webpack://@flarum/tags/external \"flarum.core.compat['utils/extract']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/PermissionGrid']\"","webpack://@flarum/tags/external \"flarum.core.compat['utils/mixin']\"","webpack://@flarum/tags/external \"flarum.core.compat['utils/computed']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/Page']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/Modal']\"","webpack://@flarum/tags/./src/common/compat.js","webpack://@flarum/tags/external \"flarum.core\"","webpack://@flarum/tags/./src/admin/addTagsPermissionScope.js","webpack://@flarum/tags/./src/admin/addTagPermission.js","webpack://@flarum/tags/./src/admin/components/EditTagModal.js","webpack://@flarum/tags/./src/admin/components/TagSettingsModal.js","webpack://@flarum/tags/./src/admin/components/TagsPage.js","webpack://@flarum/tags/./src/admin/addTagsPane.js","webpack://@flarum/tags/./src/admin/addTagsHomePageOption.js","webpack://@flarum/tags/./src/admin/addTagChangePermission.js","webpack://@flarum/tags/./src/admin/compat.js","webpack://@flarum/tags/./src/admin/index.js","webpack://@flarum/tags/external \"flarum.core.compat['components/PermissionDropdown']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/Dropdown']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/AdminNav']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/AdminLinkButton']\"","webpack://@flarum/tags/external \"flarum.core.compat['utils/ItemList']\"","webpack://@flarum/tags/external \"flarum.core.compat['utils/string']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/SettingsModal']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/BasicsPage']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/SettingDropdown']\"","webpack://@flarum/tags/./admin.js","webpack://@flarum/tags/./node_modules/html5sortable/dist/html.sortable.js","webpack://@flarum/tags/external \"jQuery\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","sortTags","tags","slice","sort","a","b","aPos","position","bPos","discussionCount","aParent","parent","bParent","__webpack_exports__","_inheritsLoose","subClass","superClass","constructor","__proto__","tagLabel","flarum_utils_extract__WEBPACK_IMPORTED_MODULE_0__","flarum_utils_extract__WEBPACK_IMPORTED_MODULE_0___default","tag","attrs","style","className","link","extract","color","backgroundColor","title","description","href","app","route","slug","config","translator","trans","tagIcon","tagsLabel","_tagLabel__WEBPACK_IMPORTED_MODULE_1__","_utils_sortTags__WEBPACK_IMPORTED_MODULE_2__","children","forEach","length","push","_extends","assign","target","arguments","source","apply","this","Tag","mixin","Model","attribute","backgroundUrl","backgroundMode","hasOne","defaultSort","isChild","isHidden","lastPostedAt","transformDate","lastPostedDiscussion","isRestricted","canStartDiscussion","canAddToDiscussion","isPrimary","computed","_utils_sortTags__WEBPACK_IMPORTED_MODULE_0__","_models_Tag__WEBPACK_IMPORTED_MODULE_1__","_helpers_tagsLabel__WEBPACK_IMPORTED_MODULE_2__","_helpers_tagIcon__WEBPACK_IMPORTED_MODULE_3__","_helpers_tagLabel__WEBPACK_IMPORTED_MODULE_4__","tags/utils/sortTags","tags/models/Tag","tags/helpers/tagsLabel","tags/helpers/tagIcon","tags/helpers/tagLabel","addTagsPermissionScope","override","original","permission","tagPrefix","match","substr","map","required","extend","PermissionGrid","items","store","all","filter","add","id","label","onremove","save","render","item","indexOf","PermissionDropdown","component","allowGuest","Dropdown","buttonClassName","icon","caretIcon","Button","onclick","addTagPermission","EditTagModal","init","_Modal","props","createRecord","prop","content","fields","toArray","_this","ItemList","placeholder","oninput","e","withAttr","type","checked","onchange","loading","exists","delete","submitData","onsubmit","_this2","preventDefault","then","hide","response","handleErrors","_this3","confirm","pushData","attributes","relationships","redraw","Modal","TagSettingsModal","setMinTags","minTags","maxTags","Math","max","form","minPrimaryTags","setting","maxPrimaryTags","minSecondaryTags","maxSecondaryTags","min","bidi","SettingsModal","tagItem","data-id","modal","show","child","TagsPage","view","localeCompare","$","sortable","connectWith","on","ui","startparent","is","endparent","getById","data","order","find","j","request","url","forum","method","strategy","Page","addTagsPane","routes","path","extensionSettings","AdminNav","AdminLinkButton","addTagsHomePageOption","BasicsPage","addTagChangePermission","minutes","parseInt","settings","allow_tag_change","SettingDropdown","defaultLabel","transChoice","count","options","admin_compat","esm_extends","tags/addTagsHomePageOption","tags/addTagChangePermission","tags/addTagsPane","tags/components/TagSettingsModal","tags/components/TagsPage","tags/components/EditTagModal","tags/addTagPermission","tags/addTagsPermissionScope","initializers","models","tagsCompat","_src_common__WEBPACK_IMPORTED_MODULE_0__","__WEBPACK_IMPORT_KEY__","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","dragging","draggingHeight","placeholders","sortables","_removeItemEvents","off","_removeSortableEvents","_attachGhost","event","ghost","dataTransfer","effectAllowed","setData","setDragImage","x","y","_getGhost","$draggedItem","draggedItem","_makeGhost","pageX","offset","left","pageY","top","_addGhostPos","_listsConnected","curList","destList","_enableSortable","opts","handles","handle","attr","document","createElement","dragDrop","disableIEFix","index","parents","selector","$sortables","String","dragImage","placeholderClass","draggingClass","each","$sortable","test","soptions","_getOptions","_reloadSortable","startParent","newParent","tagName","addClass","stopImmediatePropagation","originalEvent","console","log","height","triggerHandler","removeClass","detach","oldindex","elementIndex","oldElementIndex","stopPropagation","after","trigger","dropEffect","thisHeight","forcePlaceholderSize","deadZone","offsetTop","before","not","append","destroy","removeData","removeAttr","_removeSortableData","_removeItemData","_destroySortable","enable","disable","_disableSortable","fn","jQuery"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 49);\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['extend'];","export default function sortTags(tags) {\n  return tags.slice(0).sort((a, b) => {\n    const aPos = a.position();\n    const bPos = b.position();\n\n    // If they're both secondary tags, sort them by their discussions count,\n    // descending.\n    if (aPos === null && bPos === null)\n      return b.discussionCount() - a.discussionCount();\n\n    // If just one is a secondary tag, then the primary tag should\n    // come first.\n    if (bPos === null) return -1;\n    if (aPos === null) return 1;\n\n    // If we've made it this far, we know they're both primary tags. So we'll\n    // need to see if they have parents.\n    const aParent = a.parent();\n    const bParent = b.parent();\n\n    // If they both have the same parent, then their positions are local,\n    // so we can compare them directly.\n    if (aParent === bParent) return aPos - bPos;\n\n    // If they are both child tags, then we will compare the positions of their\n    // parents.\n    else if (aParent && bParent)\n      return aParent.position() - bParent.position();\n\n    // If we are comparing a child tag with its parent, then we let the parent\n    // come first. If we are comparing an unrelated parent/child, then we\n    // compare both of the parents.\n    else if (aParent)\n      return aParent === b ? 1 : aParent.position() - bPos;\n\n    else if (bParent)\n      return bParent === a ? -1 : aPos - bParent.position();\n\n    return 0;\n  });\n}\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import extract from 'flarum/utils/extract';\n\nexport default function tagLabel(tag, attrs = {}) {\n  attrs.style = attrs.style || {};\n  attrs.className = 'TagLabel ' + (attrs.className || '');\n\n  const link = extract(attrs, 'link');\n\n  if (tag) {\n    const color = tag.color();\n    if (color) {\n      attrs.style.backgroundColor = attrs.style.color = color;\n      attrs.className += ' colored';\n    }\n\n    if (link) {\n      attrs.title = tag.description() || '';\n      attrs.href = app.route('tag', {tags: tag.slug()});\n      attrs.config = m.route;\n    }\n  } else {\n    attrs.className += ' untagged';\n  }\n\n  return (\n    m((link ? 'a' : 'span'), attrs,\n      <span className=\"TagLabel-text\">\n        {tag ? tag.name() : app.translator.trans('flarum-tags.lib.deleted_tag_text')}\n      </span>\n    )\n  );\n}\n","export default function tagIcon(tag, attrs = {}) {\n  attrs.className = 'icon TagIcon ' + (attrs.className || '');\n\n  if (tag) {\n    attrs.style = attrs.style || {};\n    attrs.style.backgroundColor = tag.color();\n  } else {\n    attrs.className += ' untagged';\n  }\n\n  return <span {...attrs}/>;\n}\n","import extract from 'flarum/utils/extract';\nimport tagLabel from './tagLabel';\nimport sortTags from '../utils/sortTags';\n\nexport default function tagsLabel(tags, attrs = {}) {\n  const children = [];\n  const link = extract(attrs, 'link');\n\n  attrs.className = 'TagsLabel ' + (attrs.className || '');\n\n  if (tags) {\n    sortTags(tags).forEach(tag => {\n      if (tag || tags.length === 1) {\n        children.push(tagLabel(tag, {link}));\n      }\n    });\n  } else {\n    children.push(tagLabel());\n  }\n\n  return <span {...attrs}>{children}</span>;\n}\n","module.exports = flarum.core.compat['components/Button'];","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\nimport computed from 'flarum/utils/computed';\n\nexport default class Tag extends mixin(Model, {\n  name: Model.attribute('name'),\n  slug: Model.attribute('slug'),\n  description: Model.attribute('description'),\n\n  color: Model.attribute('color'),\n  backgroundUrl: Model.attribute('backgroundUrl'),\n  backgroundMode: Model.attribute('backgroundMode'),\n\n  position: Model.attribute('position'),\n  parent: Model.hasOne('parent'),\n  defaultSort: Model.attribute('defaultSort'),\n  isChild: Model.attribute('isChild'),\n  isHidden: Model.attribute('isHidden'),\n\n  discussionCount: Model.attribute('discussionCount'),\n  lastPostedAt: Model.attribute('lastPostedAt', Model.transformDate),\n  lastPostedDiscussion: Model.hasOne('lastPostedDiscussion'),\n\n  isRestricted: Model.attribute('isRestricted'),\n  canStartDiscussion: Model.attribute('canStartDiscussion'),\n  canAddToDiscussion: Model.attribute('canAddToDiscussion'),\n\n  isPrimary: computed('position', 'parent', (position, parent) => position !== null && parent === false)\n}) {}\n","module.exports = flarum.core.compat['utils/extract'];","module.exports = flarum.core.compat['components/PermissionGrid'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['utils/computed'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Modal'];","import sortTags from './utils/sortTags';\nimport Tag from './models/Tag';\nimport tagsLabel from './helpers/tagsLabel';\nimport tagIcon from './helpers/tagIcon';\nimport tagLabel from './helpers/tagLabel';\n\nexport default {\n  'tags/utils/sortTags': sortTags,\n  'tags/models/Tag': Tag,\n  'tags/helpers/tagsLabel': tagsLabel,\n  'tags/helpers/tagIcon': tagIcon,\n  'tags/helpers/tagLabel': tagLabel\n};\n","module.exports = flarum.core;","import { extend, override } from 'flarum/extend';\nimport PermissionGrid from 'flarum/components/PermissionGrid';\nimport PermissionDropdown from 'flarum/components/PermissionDropdown';\nimport Dropdown from 'flarum/components/Dropdown';\nimport Button from 'flarum/components/Button';\n\nimport tagLabel from '../common/helpers/tagLabel';\nimport tagIcon from '../common/helpers/tagIcon';\nimport sortTags from '../common/utils/sortTags';\n\nexport default function() {\n  override(app, 'getRequiredPermissions', (original, permission) => {\n    const tagPrefix = permission.match(/^tag\\d+\\./);\n\n    if (tagPrefix) {\n      const globalPermission = permission.substr(tagPrefix[0].length);\n\n      const required = original(globalPermission);\n\n      return required.map(required => tagPrefix[0] + required);\n    }\n\n    return original(permission);\n  });\n\n  extend(PermissionGrid.prototype, 'scopeItems', items => {\n    sortTags(app.store.all('tags'))\n      .filter(tag => tag.isRestricted())\n      .forEach(tag => items.add('tag' + tag.id(), {\n        label: tagLabel(tag),\n        onremove: () => tag.save({isRestricted: false}),\n        render: item => {\n          if (item.permission === 'viewDiscussions'\n            || item.permission === 'startDiscussion'\n            || (item.permission && item.permission.indexOf('discussion.') === 0)) {\n            return PermissionDropdown.component({\n              permission: 'tag' + tag.id() + '.' + item.permission,\n              allowGuest: item.allowGuest\n            });\n          }\n\n          return '';\n        }\n      }));\n  });\n\n  extend(PermissionGrid.prototype, 'scopeControlItems', items => {\n    const tags = sortTags(app.store.all('tags').filter(tag => !tag.isRestricted()));\n\n    if (tags.length) {\n      items.add('tag', Dropdown.component({\n        className: 'Dropdown--restrictByTag',\n        buttonClassName: 'Button Button--text',\n        label: app.translator.trans('flarum-tags.admin.permissions.restrict_by_tag_heading'),\n        icon: 'fas fa-plus',\n        caretIcon: null,\n        children: tags.map(tag => Button.component({\n          icon: true,\n          children: [tagIcon(tag, {className: 'Button-icon'}), ' ', tag.name()],\n          onclick: () => tag.save({isRestricted: true})\n        }))\n      }));\n    }\n  });\n}\n","import { extend } from 'flarum/extend';\nimport PermissionGrid from 'flarum/components/PermissionGrid';\n\nexport default function() {\n  extend(PermissionGrid.prototype, 'moderateItems', items => {\n    items.add('tag', {\n      icon: 'fas fa-tag',\n      label: app.translator.trans('flarum-tags.admin.permissions.tag_discussions_label'),\n      permission: 'discussion.tag'\n    }, 95);\n  });\n}\n","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\nimport { slug } from 'flarum/utils/string';\n\nimport tagLabel from '../../common/helpers/tagLabel';\n\n/**\n * The `EditTagModal` component shows a modal dialog which allows the user\n * to create or edit a tag.\n */\nexport default class EditTagModal extends Modal {\n  init() {\n    super.init();\n\n    this.tag = this.props.tag || app.store.createRecord('tags');\n\n    this.name = m.prop(this.tag.name() || '');\n    this.slug = m.prop(this.tag.slug() || '');\n    this.description = m.prop(this.tag.description() || '');\n    this.color = m.prop(this.tag.color() || '');\n    this.isHidden = m.prop(this.tag.isHidden() || false);\n  }\n\n  className() {\n    return 'EditTagModal Modal--small';\n  }\n\n  title() {\n    return this.name()\n      ? tagLabel({\n        name: this.name,\n        color: this.color\n      })\n      : app.translator.trans('flarum-tags.admin.edit_tag.title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">\n          {this.fields().toArray()}\n        </div>\n      </div>\n    );\n  }\n\n  fields() {\n    const items = new ItemList();\n\n    items.add('name', <div className=\"Form-group\">\n      <label>{app.translator.trans('flarum-tags.admin.edit_tag.name_label')}</label>\n      <input className=\"FormControl\" placeholder={app.translator.trans('flarum-tags.admin.edit_tag.name_placeholder')} value={this.name()} oninput={e => {\n        this.name(e.target.value);\n        this.slug(slug(e.target.value));\n      }}/>\n    </div>, 50);\n\n    items.add('slug', <div className=\"Form-group\">\n      <label>{app.translator.trans('flarum-tags.admin.edit_tag.slug_label')}</label>\n      <input className=\"FormControl\" value={this.slug()} oninput={m.withAttr('value', this.slug)}/>\n    </div>, 40);\n\n    items.add('description', <div className=\"Form-group\">\n      <label>{app.translator.trans('flarum-tags.admin.edit_tag.description_label')}</label>\n      <textarea className=\"FormControl\" value={this.description()} oninput={m.withAttr('value', this.description)}/>\n    </div>, 30);\n\n    items.add('color', <div className=\"Form-group\">\n      <label>{app.translator.trans('flarum-tags.admin.edit_tag.color_label')}</label>\n      <input className=\"FormControl\" placeholder=\"#aaaaaa\" value={this.color()} oninput={m.withAttr('value', this.color)}/>\n    </div>, 20);\n\n    items.add('hidden', <div className=\"Form-group\">\n      <div>\n        <label className=\"checkbox\">\n          <input type=\"checkbox\" value=\"1\" checked={this.isHidden()} onchange={m.withAttr('checked', this.isHidden)}/>\n          {app.translator.trans('flarum-tags.admin.edit_tag.hide_label')}\n        </label>\n      </div>\n    </div>, 10);\n\n    items.add('submit', <div className=\"Form-group\">\n      {Button.component({\n        type: 'submit',\n        className: 'Button Button--primary EditTagModal-save',\n        loading: this.loading,\n        children: app.translator.trans('flarum-tags.admin.edit_tag.submit_button')\n      })}\n      {this.tag.exists ? (\n        <button type=\"button\" className=\"Button EditTagModal-delete\" onclick={this.delete.bind(this)}>\n          {app.translator.trans('flarum-tags.admin.edit_tag.delete_tag_button')}\n        </button>\n      ) : ''}\n    </div>, -10);\n\n    return items;\n  }\n\n  submitData() {\n    return {\n      name: this.name(),\n      slug: this.slug(),\n      description: this.description(),\n      color: this.color(),\n      isHidden: this.isHidden()\n    };\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    this.tag.save(this.submitData()).then(\n      () => this.hide(),\n      response => {\n        this.loading = false;\n        this.handleErrors(response);\n      }\n    );\n  }\n\n  delete() {\n    if (confirm(app.translator.trans('flarum-tags.admin.edit_tag.delete_tag_confirmation'))) {\n      const children = app.store.all('tags').filter(tag => tag.parent() === this.tag);\n\n      this.tag.delete().then(() => {\n        children.forEach(tag => tag.pushData({\n          attributes: {isChild: false},\n          relationships: {parent: null}\n        }));\n        m.redraw();\n      });\n\n      this.hide();\n    }\n  }\n}\n","import SettingsModal from 'flarum/components/SettingsModal';\n\nexport default class TagSettingsModal extends SettingsModal {\n  setMinTags(minTags, maxTags, value) {\n    minTags(value);\n    maxTags(Math.max(value, maxTags()));\n  }\n\n  className() {\n    return 'TagSettingsModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('flarum-tags.admin.tag_settings.title');\n  }\n\n  form() {\n    const minPrimaryTags = this.setting('flarum-tags.min_primary_tags', 0);\n    const maxPrimaryTags = this.setting('flarum-tags.max_primary_tags', 0);\n\n    const minSecondaryTags = this.setting('flarum-tags.min_secondary_tags', 0);\n    const maxSecondaryTags = this.setting('flarum-tags.max_secondary_tags', 0);\n\n    return [\n      <div className=\"Form-group\">\n        <label>{app.translator.trans('flarum-tags.admin.tag_settings.required_primary_heading')}</label>\n        <div className=\"helpText\">\n          {app.translator.trans('flarum-tags.admin.tag_settings.required_primary_text')}\n        </div>\n        <div className=\"TagSettingsModal-rangeInput\">\n          <input className=\"FormControl\"\n            type=\"number\"\n            min=\"0\"\n            value={minPrimaryTags()}\n            oninput={m.withAttr('value', this.setMinTags.bind(this, minPrimaryTags, maxPrimaryTags))} />\n          {app.translator.trans('flarum-tags.admin.tag_settings.range_separator_text')}\n          <input className=\"FormControl\"\n            type=\"number\"\n            min={minPrimaryTags()}\n            bidi={maxPrimaryTags} />\n        </div>\n      </div>,\n\n      <div className=\"Form-group\">\n        <label>{app.translator.trans('flarum-tags.admin.tag_settings.required_secondary_heading')}</label>\n        <div className=\"helpText\">\n          {app.translator.trans('flarum-tags.admin.tag_settings.required_secondary_text')}\n        </div>\n        <div className=\"TagSettingsModal-rangeInput\">\n          <input className=\"FormControl\"\n            type=\"number\"\n            min=\"0\"\n            value={minSecondaryTags()}\n            oninput={m.withAttr('value', this.setMinTags.bind(this, minSecondaryTags, maxSecondaryTags))} />\n          {app.translator.trans('flarum-tags.admin.tag_settings.range_separator_text')}\n          <input className=\"FormControl\"\n            type=\"number\"\n            min={minSecondaryTags()}\n            bidi={maxSecondaryTags} />\n        </div>\n      </div>\n    ];\n  }\n}\n","import 'html5sortable';\n\nimport Page from 'flarum/components/Page';\nimport Button from 'flarum/components/Button';\n\nimport EditTagModal from './EditTagModal';\nimport TagSettingsModal from './TagSettingsModal';\nimport tagIcon from '../../common/helpers/tagIcon';\nimport sortTags from '../../common/utils/sortTags';\n\nfunction tagItem(tag) {\n  return (\n    <li data-id={tag.id()} style={{color: tag.color()}}>\n      <div className=\"TagListItem-info\">\n        {tagIcon(tag)}\n        <span className=\"TagListItem-name\">{tag.name()}</span>\n        {Button.component({\n          className: 'Button Button--link',\n          icon: 'fas fa-pencil-alt',\n          onclick: () => app.modal.show(new EditTagModal({tag}))\n        })}\n      </div>\n      {!tag.isChild() && tag.position() !== null ? (\n        <ol className=\"TagListItem-children\">\n          {sortTags(app.store.all('tags'))\n            .filter(child => child.parent() === tag)\n            .map(tagItem)}\n        </ol>\n      ) : ''}\n    </li>\n  );\n}\n\nexport default class TagsPage extends Page {\n  view() {\n    return (\n      <div className=\"TagsPage\">\n        <div className=\"TagsPage-header\">\n          <div className=\"container\">\n            <p>\n              {app.translator.trans('flarum-tags.admin.tags.about_tags_text')}\n            </p>\n            {Button.component({\n              className: 'Button Button--primary',\n              icon: 'fas fa-plus',\n              children: app.translator.trans('flarum-tags.admin.tags.create_tag_button'),\n              onclick: () => app.modal.show(new EditTagModal())\n            })}\n            {Button.component({\n              className: 'Button',\n              children: app.translator.trans('flarum-tags.admin.tags.settings_button'),\n              onclick: () => app.modal.show(new TagSettingsModal())\n            })}\n          </div>\n        </div>\n        <div className=\"TagsPage-list\">\n          <div className=\"container\">\n            <div className=\"TagGroup\">\n              <label>{app.translator.trans('flarum-tags.admin.tags.primary_heading')}</label>\n              <ol className=\"TagList TagList--primary\">\n                {sortTags(app.store.all('tags'))\n                  .filter(tag => tag.position() !== null && !tag.isChild())\n                  .map(tagItem)}\n              </ol>\n            </div>\n\n            <div className=\"TagGroup\">\n              <label>{app.translator.trans('flarum-tags.admin.tags.secondary_heading')}</label>\n              <ul className=\"TagList\">\n                {app.store.all('tags')\n                  .filter(tag => tag.position() === null)\n                  .sort((a, b) => a.name().localeCompare(b.name()))\n                  .map(tagItem)}\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  config() {\n    this.$('ol, ul')\n      .sortable({connectWith: 'primary'})\n      .on('sortupdate', (e, ui) => {\n        // If we've moved a tag from 'primary' to 'secondary', then we'll update\n        // its attributes in our local store so that when we redraw the change\n        // will be made.\n        if (ui.startparent.is('ol') && ui.endparent.is('ul')) {\n          app.store.getById('tags', ui.item.data('id')).pushData({\n            attributes: {\n              position: null,\n              isChild: false\n            },\n            relationships: {parent: null}\n          });\n        }\n\n        // Construct an array of primary tag IDs and their children, in the same\n        // order that they have been arranged in.\n        const order = this.$('.TagList--primary > li')\n          .map(function() {\n            return {\n              id: $(this).data('id'),\n              children: $(this).find('li')\n                .map(function() {\n                  return $(this).data('id');\n                }).get()\n            };\n          }).get();\n\n        // Now that we have an accurate representation of the order which the\n        // primary tags are in, we will update the tag attributes in our local\n        // store to reflect this order.\n        order.forEach((tag, i) => {\n          const parent = app.store.getById('tags', tag.id);\n          parent.pushData({\n            attributes: {\n              position: i,\n              isChild: false\n            },\n            relationships: {parent: null}\n          });\n\n          tag.children.forEach((child, j) => {\n            app.store.getById('tags', child).pushData({\n              attributes: {\n                position: j,\n                isChild: true\n              },\n              relationships: {parent}\n            });\n          });\n        });\n\n        app.request({\n          url: app.forum.attribute('apiUrl') + '/tags/order',\n          method: 'POST',\n          data: {order}\n        });\n\n        // A diff redraw won't work here, because sortable has mucked around\n        // with the DOM which will confuse Mithril's diffing algorithm. Instead\n        // we force a full reconstruction of the DOM.\n        m.redraw.strategy('all');\n        m.redraw();\n      });\n  }\n}\n","import { extend } from 'flarum/extend';\nimport AdminNav from 'flarum/components/AdminNav';\nimport AdminLinkButton from 'flarum/components/AdminLinkButton';\n\nimport TagsPage from './components/TagsPage';\n\nexport default function() {\n  app.routes.tags = {path: '/tags', component: TagsPage.component()};\n\n  app.extensionSettings['flarum-tags'] = () => m.route(app.route('tags'));\n\n  extend(AdminNav.prototype, 'items', items => {\n    items.add('tags', AdminLinkButton.component({\n      href: app.route('tags'),\n      icon: 'fas fa-tags',\n      children: app.translator.trans('flarum-tags.admin.nav.tags_button'),\n      description: app.translator.trans('flarum-tags.admin.nav.tags_text')\n    }));\n  });\n}\n","import { extend } from 'flarum/extend';\nimport BasicsPage from 'flarum/components/BasicsPage';\n\nexport default function() {\n  extend(BasicsPage.prototype, 'homePageItems', items => {\n    items.add('tags', {\n      path: '/tags',\n      label: app.translator.trans('flarum-tags.admin.basics.tags_label')\n    });\n  });\n}\n","import { extend } from 'flarum/extend';\nimport PermissionGrid from 'flarum/components/PermissionGrid';\nimport SettingDropdown from 'flarum/components/SettingDropdown';\n\nexport default function() {\n  extend(PermissionGrid.prototype, 'startItems', items => {\n    items.add('allowTagChange', {\n      icon: 'fas fa-tag',\n      label: app.translator.trans('flarum-tags.admin.permissions.allow_edit_tags_label'),\n      setting: () => {\n        const minutes = parseInt(app.data.settings.allow_tag_change, 10);\n\n        return SettingDropdown.component({\n          defaultLabel: minutes\n            ? app.translator.transChoice('core.admin.permissions_controls.allow_some_minutes_button', minutes, {count: minutes})\n            : app.translator.trans('core.admin.permissions_controls.allow_indefinitely_button'),\n          key: 'allow_tag_change',\n          options: [\n            {value: '-1', label: app.translator.trans('core.admin.permissions_controls.allow_indefinitely_button')},\n            {value: '10', label: app.translator.trans('core.admin.permissions_controls.allow_ten_minutes_button')},\n            {value: 'reply', label: app.translator.trans('core.admin.permissions_controls.allow_until_reply_button')}\n          ]\n        });\n      }\n    }, 90);\n  });\n}\n","import compat from '../common/compat';\n\nimport addTagsHomePageOption from './addTagsHomePageOption';\nimport addTagChangePermission from './addTagChangePermission';\nimport addTagsPane from './addTagsPane';\nimport TagSettingsModal from './components/TagSettingsModal';\nimport TagsPage from './components/TagsPage';\nimport EditTagModal from './components/EditTagModal';\nimport addTagPermission from './addTagPermission';\nimport addTagsPermissionScope from './addTagsPermissionScope';\n\nexport default Object.assign(compat, {\n  'tags/addTagsHomePageOption': addTagsHomePageOption,\n  'tags/addTagChangePermission': addTagChangePermission,\n  'tags/addTagsPane': addTagsPane,\n  'tags/components/TagSettingsModal': TagSettingsModal,\n  'tags/components/TagsPage': TagsPage,\n  'tags/components/EditTagModal': EditTagModal,\n  'tags/addTagPermission': addTagPermission,\n  'tags/addTagsPermissionScope': addTagsPermissionScope,\n});\n","import Tag from '../common/models/Tag';\nimport addTagsPermissionScope from './addTagsPermissionScope';\nimport addTagPermission from './addTagPermission';\nimport addTagsPane from './addTagsPane';\nimport addTagsHomePageOption from './addTagsHomePageOption';\nimport addTagChangePermission from './addTagChangePermission';\n\napp.initializers.add('flarum-tags', app => {\n  app.store.models.tags = Tag;\n\n  addTagsPermissionScope();\n  addTagPermission();\n  addTagsPane();\n  addTagsHomePageOption();\n  addTagChangePermission();\n});\n\n\n// Expose compat API\nimport tagsCompat from './compat';\nimport { compat } from '@flarum/core/admin';\n\nObject.assign(compat, tagsCompat);\n","module.exports = flarum.core.compat['components/PermissionDropdown'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/AdminNav'];","module.exports = flarum.core.compat['components/AdminLinkButton'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/string'];","module.exports = flarum.core.compat['components/SettingsModal'];","module.exports = flarum.core.compat['components/BasicsPage'];","module.exports = flarum.core.compat['components/SettingDropdown'];","/*\n * This file is part of Flarum.\n *\n * (c) Toby Zerner <toby.zerner@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nexport * from './src/common';\nexport * from './src/admin';\n",";(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('jquery'));\n  } else {\n    root.sortable = factory(root.jQuery);\n  }\n}(this, function($) {\n/*\n * HTML5 Sortable jQuery Plugin\n * https://github.com/voidberg/html5sortable\n *\n * Original code copyright 2012 Ali Farhadi.\n * This version is mantained by Alexandru Badiu <andu@ctrlz.ro> & Lukas Oppermann <lukas@vea.re>\n *\n *\n * Released under the MIT license.\n */\n'use strict';\n/*\n * variables global to the plugin\n */\nvar dragging;\nvar draggingHeight;\nvar placeholders = $();\nvar sortables = [];\n/*\n * remove event handlers from items\n * @param [jquery Collection] items\n * @info event.h5s (jquery way of namespacing events, to bind multiple handlers to the event)\n */\nvar _removeItemEvents = function(items) {\n  items.off('dragstart.h5s');\n  items.off('dragend.h5s');\n  items.off('selectstart.h5s');\n  items.off('dragover.h5s');\n  items.off('dragenter.h5s');\n  items.off('drop.h5s');\n};\n/*\n * remove event handlers from sortable\n * @param [jquery Collection] sortable\n * @info event.h5s (jquery way of namespacing events, to bind multiple handlers to the event)\n */\nvar _removeSortableEvents = function(sortable) {\n  sortable.off('dragover.h5s');\n  sortable.off('dragenter.h5s');\n  sortable.off('drop.h5s');\n};\n/*\n * attache ghost to dataTransfer object\n * @param [event] original event\n * @param [object] ghost-object with item, x and y coordinates\n */\nvar _attachGhost = function(event, ghost) {\n  // this needs to be set for HTML5 drag & drop to work\n  event.dataTransfer.effectAllowed = 'move';\n  event.dataTransfer.setData('text', '');\n\n  // check if setDragImage method is available\n  if (event.dataTransfer.setDragImage) {\n    event.dataTransfer.setDragImage(ghost.item, ghost.x, ghost.y);\n  }\n};\n/**\n * _addGhostPos clones the dragged item and adds it as a Ghost item\n * @param [object] event - the event fired when dragstart is triggered\n * @param [object] ghost - .item = node, draggedItem = jQuery collection\n */\nvar _addGhostPos = function(e, ghost) {\n  if (!ghost.x) {\n    ghost.x = parseInt(e.pageX - ghost.draggedItem.offset().left);\n  }\n  if (!ghost.y) {\n    ghost.y = parseInt(e.pageY - ghost.draggedItem.offset().top);\n  }\n  return ghost;\n};\n/**\n * _makeGhost decides which way to make a ghost and passes it to attachGhost\n * @param [jQuery selection] $draggedItem - the item that the user drags\n */\nvar _makeGhost = function($draggedItem) {\n  return {\n    item: $draggedItem[0],\n    draggedItem: $draggedItem\n  };\n};\n/**\n * _getGhost constructs ghost and attaches it to dataTransfer\n * @param [event] event - the original drag event object\n * @param [jQuery selection] $draggedItem - the item that the user drags\n * @param [object] ghostOpt - the ghost options\n */\n// TODO: could $draggedItem be replaced by event.target in all instances\nvar _getGhost = function(event, $draggedItem) {\n  // add ghost item & draggedItem to ghost object\n  var ghost = _makeGhost($draggedItem);\n  // attach ghost position\n  ghost = _addGhostPos(event, ghost);\n  // attach ghost to dataTransfer\n  _attachGhost(event, ghost);\n};\n/*\n * return options if not set on sortable already\n * @param [object] soptions\n * @param [object] options\n */\nvar _getOptions = function(soptions, options) {\n  if (typeof soptions === 'undefined') {\n    return options;\n  }\n  return soptions;\n};\n/*\n * remove data from sortable\n * @param [jquery Collection] a single sortable\n */\nvar _removeSortableData = function(sortable) {\n  sortable.removeData('opts');\n  sortable.removeData('connectWith');\n  sortable.removeData('items');\n  sortable.removeAttr('aria-dropeffect');\n};\n/*\n * remove data from items\n * @param [jquery Collection] items\n */\nvar _removeItemData = function(items) {\n  items.removeAttr('aria-grabbed');\n  items.removeAttr('draggable');\n  items.removeAttr('role');\n};\n/*\n * check if two lists are connected\n * @param [jquery Collection] items\n */\nvar _listsConnected = function(curList, destList) {\n  if (curList[0] === destList[0]) {\n    return true;\n  }\n  if (curList.data('connectWith') !== undefined) {\n    return curList.data('connectWith') === destList.data('connectWith');\n  }\n  return false;\n};\n/*\n * destroy the sortable\n * @param [jquery Collection] a single sortable\n */\nvar _destroySortable = function(sortable) {\n  var opts = sortable.data('opts') || {};\n  var items = sortable.children(opts.items);\n  var handles = opts.handle ? items.find(opts.handle) : items;\n  // remove event handlers & data from sortable\n  _removeSortableEvents(sortable);\n  _removeSortableData(sortable);\n  // remove event handlers & data from items\n  handles.off('mousedown.h5s');\n  _removeItemEvents(items);\n  _removeItemData(items);\n};\n/*\n * enable the sortable\n * @param [jquery Collection] a single sortable\n */\nvar _enableSortable = function(sortable) {\n  var opts = sortable.data('opts');\n  var items = sortable.children(opts.items);\n  var handles = opts.handle ? items.find(opts.handle) : items;\n  sortable.attr('aria-dropeffect', 'move');\n  handles.attr('draggable', 'true');\n  // IE FIX for ghost\n  // can be disabled as it has the side effect that other events\n  // (e.g. click) will be ignored\n  if (typeof document.createElement('span').dragDrop === 'function' && !opts.disableIEFix) {\n    handles.on('mousedown.h5s', function() {\n      if (items.index(this) !== -1) {\n        this.dragDrop();\n      } else {\n        $(this).parents(opts.items)[0].dragDrop();\n      }\n    });\n  }\n};\n/*\n * disable the sortable\n * @param [jquery Collection] a single sortable\n */\nvar _disableSortable = function(sortable) {\n  var opts = sortable.data('opts');\n  var items = sortable.children(opts.items);\n  var handles = opts.handle ? items.find(opts.handle) : items;\n  sortable.attr('aria-dropeffect', 'none');\n  handles.attr('draggable', false);\n  handles.off('mousedown.h5s');\n};\n/*\n * reload the sortable\n * @param [jquery Collection] a single sortable\n * @description events need to be removed to not be double bound\n */\nvar _reloadSortable = function(sortable) {\n  var opts = sortable.data('opts');\n  var items = sortable.children(opts.items);\n  var handles = opts.handle ? items.find(opts.handle) : items;\n  // remove event handlers from items\n  _removeItemEvents(items);\n  handles.off('mousedown.h5s');\n  // remove event handlers from sortable\n  _removeSortableEvents(sortable);\n};\n/*\n * public sortable object\n * @param [object|string] options|method\n */\nvar sortable = function(selector, options) {\n\n  var $sortables = $(selector);\n  var method = String(options);\n\n  options = $.extend({\n    connectWith: false,\n    placeholder: null,\n    // dragImage can be null or a jQuery element\n    dragImage: null,\n    disableIEFix: false,\n    placeholderClass: 'sortable-placeholder',\n    draggingClass: 'sortable-dragging'\n  }, options);\n\n  /* TODO: maxstatements should be 25, fix and remove line below */\n  /*jshint maxstatements:false */\n  return $sortables.each(function() {\n\n    var $sortable = $(this);\n\n    if (/enable|disable|destroy/.test(method)) {\n      sortable[method]($sortable);\n      return;\n    }\n\n    // get options & set options on sortable\n    options = _getOptions($sortable.data('opts'), options);\n    $sortable.data('opts', options);\n    // reset sortable\n    _reloadSortable($sortable);\n    // initialize\n    var items = $sortable.children(options.items);\n    var index;\n    var startParent;\n    var newParent;\n    var placeholder = (options.placeholder === null) ? $('<' + (/^ul|ol$/i.test(this.tagName) ? 'li' : 'div') + ' class=\"' + options.placeholderClass + '\"/>') : $(options.placeholder).addClass(options.placeholderClass);\n\n    // setup sortable ids\n    if (!$sortable.attr('data-sortable-id')) {\n      var id = sortables.length;\n      sortables[id] = $sortable;\n      $sortable.attr('data-sortable-id', id);\n      items.attr('data-item-sortable-id', id);\n    }\n\n    $sortable.data('items', options.items);\n    placeholders = placeholders.add(placeholder);\n    if (options.connectWith) {\n      $sortable.data('connectWith', options.connectWith);\n    }\n\n    _enableSortable($sortable);\n    items.attr('role', 'option');\n    items.attr('aria-grabbed', 'false');\n\n    // Handle drag events on draggable items\n    items.on('dragstart.h5s', function(e) {\n      e.stopImmediatePropagation();\n\n      if (options.dragImage) {\n        _attachGhost(e.originalEvent, {\n          item: options.dragImage,\n          x: 0,\n          y: 0\n        });\n        console.log('WARNING: dragImage option is deprecated' +\n        ' and will be removed in the future!');\n      } else {\n        // add transparent clone or other ghost to cursor\n        _getGhost(e.originalEvent, $(this), options.dragImage);\n      }\n      // cache selsection & add attr for dragging\n      dragging = $(this);\n      dragging.addClass(options.draggingClass);\n      dragging.attr('aria-grabbed', 'true');\n      // grab values\n      index = dragging.index();\n      draggingHeight = dragging.height();\n      startParent = $(this).parent();\n      // trigger sortstar update\n      dragging.parent().triggerHandler('sortstart', {\n        item: dragging,\n        startparent: startParent\n      });\n    });\n    // Handle drag events on draggable items\n    items.on('dragend.h5s', function() {\n      if (!dragging) {\n        return;\n      }\n      // remove dragging attributes and show item\n      dragging.removeClass(options.draggingClass);\n      dragging.attr('aria-grabbed', 'false');\n      dragging.show();\n\n      placeholders.detach();\n      newParent = $(this).parent();\n      dragging.parent().triggerHandler('sortstop', {\n        item: dragging,\n        startparent: startParent,\n      });\n      if (index !== dragging.index() ||\n          startParent.get(0) !== newParent.get(0)) {\n        dragging.parent().triggerHandler('sortupdate', {\n          item: dragging,\n          index: newParent.children(newParent.data('items')).index(dragging),\n          oldindex: items.index(dragging),\n          elementIndex: dragging.index(),\n          oldElementIndex: index,\n          startparent: startParent,\n          endparent: newParent\n        });\n      }\n      dragging = null;\n      draggingHeight = null;\n    });\n    // Handle drop event on sortable & placeholder\n    // TODO: REMOVE placeholder?????\n    $(this).add([placeholder]).on('drop.h5s', function(e) {\n      if (!_listsConnected($sortable, $(dragging).parent())) {\n        return;\n      }\n\n      e.stopPropagation();\n      placeholders.filter(':visible').after(dragging);\n      dragging.trigger('dragend.h5s');\n      return false;\n    });\n\n    // Handle dragover and dragenter events on draggable items\n    // TODO: REMOVE placeholder?????\n    items.add([this, placeholder]).on('dragover.h5s dragenter.h5s', function(e) {\n      if (!_listsConnected($sortable, $(dragging).parent())) {\n        return;\n      }\n\n      e.preventDefault();\n      e.originalEvent.dataTransfer.dropEffect = 'move';\n      if (items.is(this)) {\n        var thisHeight = $(this).height();\n        if (options.forcePlaceholderSize) {\n          placeholder.height(draggingHeight);\n        }\n\n        // Check if $(this) is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n        if (thisHeight > draggingHeight) {\n          // Dead zone?\n          var deadZone = thisHeight - draggingHeight;\n          var offsetTop = $(this).offset().top;\n          if (placeholder.index() < $(this).index() &&\n              e.originalEvent.pageY < offsetTop + deadZone) {\n            return false;\n          }\n          if (placeholder.index() > $(this).index() &&\n              e.originalEvent.pageY > offsetTop + thisHeight - deadZone) {\n            return false;\n          }\n        }\n\n        dragging.hide();\n        if (placeholder.index() < $(this).index()) {\n          $(this).after(placeholder);\n        } else {\n          $(this).before(placeholder);\n        }\n        placeholders.not(placeholder).detach();\n      } else {\n        if (!placeholders.is(this) && !$(this).children(options.items).length) {\n          placeholders.detach();\n          $(this).append(placeholder);\n        }\n      }\n      return false;\n    });\n  });\n};\n\nsortable.destroy = function(sortable) {\n  _destroySortable(sortable);\n};\n\nsortable.enable = function(sortable) {\n  _enableSortable(sortable);\n};\n\nsortable.disable = function(sortable) {\n  _disableSortable(sortable);\n};\n\n$.fn.sortable = function(options) {\n  return sortable(this, options);\n};\n\nreturn sortable;\n}));\n","module.exports = jQuery;"],"sourceRoot":""}