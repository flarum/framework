module.exports=function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=49)}([function(t,e){t.exports=flarum.core.compat.Model},function(t,e){t.exports=flarum.core.compat.extend},function(t,e,n){"use strict";function a(t){return t.slice(0).sort((function(t,e){var n=t.position(),a=e.position();if(null===n&&null===a)return e.discussionCount()-t.discussionCount();if(null===a)return-1;if(null===n)return 1;var r=t.parent(),o=e.parent();return r===o?n-a:r&&o?r.position()-o.position():r?r===e?1:r.position()-a:o?o===t?-1:n-o.position():0}))}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n(12),r=n.n(a);function o(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var a=t&&t.icon(),o=n.useColor,i=void 0===o||o;return e.className=r()([e.className,"icon",a?t.icon():"TagIcon"]),t?(e.style=e.style||{},a?e.style.color=i?t.color():"":e.style.backgroundColor=t.color()):e.className+=" untagged",a?m("i",e):m("span",e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(11),r=n.n(a),o=n(4);function i(t,e){void 0===e&&(e={}),e.style=e.style||{},e.className="TagLabel "+(e.className||"");var n=r()(e,"link"),a=t?t.name():app.translator.trans("flarum-tags.lib.deleted_tag_text");if(t){var i=t.color();i&&(e.style.backgroundColor=e.style.color=i,e.className+=" colored"),n&&(e.title=t.description()||"",e.href=app.route("tag",{tags:t.slug()}),e.config=m.route)}else e.className+=" untagged";return m(n?"a":"span",e,m("span",{className:"TagLabel-text"},t&&t.icon()&&Object(o.a)(t,{},{useColor:!1})," ",a))}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(11),r=n.n(a),o=n(5),i=n(2);function s(t,e){void 0===e&&(e={});var n=[],a=r()(e,"link");return e.className="TagsLabel "+(e.className||""),t?Object(i.a)(t).forEach((function(e){(e||1===t.length)&&n.push(Object(o.a)(e,{link:a}))})):n.push(Object(o.a)()),m("span",e,n)}},function(t,e){t.exports=flarum.core.compat["components/Button"]},function(t,e,n){"use strict";function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n(3),r=n(0),o=n.n(r),i=n(16),s=n.n(i),l=n(17),c=n.n(l),u=function(t){function e(){return t.apply(this,arguments)||this}return Object(a.a)(e,t),e}(s()(o.a,{name:o.a.attribute("name"),slug:o.a.attribute("slug"),description:o.a.attribute("description"),color:o.a.attribute("color"),backgroundUrl:o.a.attribute("backgroundUrl"),backgroundMode:o.a.attribute("backgroundMode"),icon:o.a.attribute("icon"),position:o.a.attribute("position"),parent:o.a.hasOne("parent"),defaultSort:o.a.attribute("defaultSort"),isChild:o.a.attribute("isChild"),isHidden:o.a.attribute("isHidden"),discussionCount:o.a.attribute("discussionCount"),lastPostedAt:o.a.attribute("lastPostedAt",o.a.transformDate),lastPostedDiscussion:o.a.hasOne("lastPostedDiscussion"),isRestricted:o.a.attribute("isRestricted"),canStartDiscussion:o.a.attribute("canStartDiscussion"),canAddToDiscussion:o.a.attribute("canAddToDiscussion"),isPrimary:c()("position","parent",(function(t,e){return null!==t&&!1===e}))}))},function(t,e){t.exports=flarum.core.compat["utils/extract"]},function(t,e){t.exports=flarum.core.compat["utils/classList"]},function(t,e){t.exports=flarum.core.compat["components/PermissionGrid"]},,function(t,e){},function(t,e){t.exports=flarum.core.compat["utils/mixin"]},function(t,e){t.exports=flarum.core.compat["utils/computed"]},function(t,e){t.exports=flarum.core.compat["components/Page"]},function(t,e){t.exports=flarum.core.compat["components/Modal"]},function(t,e,n){"use strict";var a=n(2),r=n(10),o=n(7),i=n(4),s=n(5);e.a={"tags/utils/sortTags":a.a,"tags/models/Tag":r.a,"tags/helpers/tagsLabel":o.a,"tags/helpers/tagIcon":i.a,"tags/helpers/tagLabel":s.a}},function(t,e){t.exports=flarum.core},,,,,,function(t,e,n){"use strict";var a=n(9),r=n(10),o=n(1),i=n(13),s=n.n(i),l=n(39),c=n.n(l),u=n(40),d=n.n(u),p=n(8),f=n.n(p),g=n(5),h=n(4),v=n(2),b=function(){Object(o.override)(app,"getRequiredPermissions",(function(t,e){var n=e.match(/^tag\d+\./);return n?t(e.substr(n[0].length)).map((function(t){return n[0]+t})):t(e)})),Object(o.extend)(s.a.prototype,"scopeItems",(function(t){Object(v.a)(app.store.all("tags")).filter((function(t){return t.isRestricted()})).forEach((function(e){return t.add("tag"+e.id(),{label:Object(g.a)(e),onremove:function(){return e.save({isRestricted:!1})},render:function(t){return"viewDiscussions"===t.permission||"startDiscussion"===t.permission||t.permission&&0===t.permission.indexOf("discussion.")?c.a.component({permission:"tag"+e.id()+"."+t.permission,allowGuest:t.allowGuest}):""}})}))})),Object(o.extend)(s.a.prototype,"scopeControlItems",(function(t){var e=Object(v.a)(app.store.all("tags").filter((function(t){return!t.isRestricted()})));e.length&&t.add("tag",d.a.component({className:"Dropdown--restrictByTag",buttonClassName:"Button Button--text",label:app.translator.trans("flarum-tags.admin.permissions.restrict_by_tag_heading"),icon:"fas fa-plus",caretIcon:null,children:e.map((function(t){return f.a.component({icon:!0,children:[Object(h.a)(t,{className:"Button-icon"})," ",t.name()],onclick:function(){return t.save({isRestricted:!0})}})}))}))}))},y=function(){Object(o.extend)(s.a.prototype,"moderateItems",(function(t){t.add("tag",{icon:"fas fa-tag",label:app.translator.trans("flarum-tags.admin.permissions.tag_discussions_label"),permission:"discussion.tag"},95)}))},_=n(41),w=n.n(_),E=n(42),T=n.n(E),x=n(3);function C(t,e,n){if(void 0===n)return t&&t.h5s&&t.h5s.data&&t.h5s.data[e];t.h5s=t.h5s||{},t.h5s.data=t.h5s.data||{},t.h5s.data[e]=n}var N=function(t,e){if(!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof e?Array.from(t):Array.from(t).filter((function(t){return 1===t.nodeType&&t.matches(e)}))},L=new Map,O=function(){function t(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(t.prototype,"config",{get:function(){var t={};return this._config.forEach((function(e,n){t[n]=e})),t},set:function(t){if("object"!=typeof t)throw new Error("You must provide a valid configuration object to the config setter.");var e=Object.assign({},t);this._config=new Map(Object.entries(e))},enumerable:!0,configurable:!0}),t.prototype.setConfig=function(t,e){if(!this._config.has(t))throw new Error("Trying to set invalid configuration item: "+t);this._config.set(t,e)},t.prototype.getConfig=function(t){if(!this._config.has(t))throw new Error("Invalid configuration item requested: "+t);return this._config.get(t)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){if(!(t instanceof HTMLElement)&&null!==t)throw new Error("A placeholder must be an html element or null.");this._placeholder=t},enumerable:!0,configurable:!0}),t.prototype.setData=function(t,e){if("string"!=typeof t)throw new Error("The key must be a string.");this._data.set(t,e)},t.prototype.getData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.get(t)},t.prototype.deleteData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.delete(t)},t}(),M=function(t){if(!(t instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return L.has(t)||L.set(t,new O),L.get(t)};function D(t,e,n){if(t instanceof Array)for(var a=0;a<t.length;++a)D(t[a],e,n);else t.addEventListener(e,n),M(t).setData("event"+e,n)}function j(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)j(t[n],e);else t.removeEventListener(e,M(t).getData("event"+e)),M(t).deleteData("event"+e)}function I(t,e,n){if(t instanceof Array)for(var a=0;a<t.length;++a)I(t[a],e,n);else t.setAttribute(e,n)}function S(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)S(t[n],e);else t.removeAttribute(e)}var A=function(t){if(!t.parentElement||0===t.getClientRects().length)throw new Error("target element must be part of the dom");var e=t.getClientRects()[0];return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}},P=function(t,e){if(!(t instanceof HTMLElement&&(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(e).indexOf(t)},H=function(t){if(!(t instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==t.parentNode},F=function(t,e,n){if(!(t instanceof HTMLElement&&t.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");t.parentElement.insertBefore(e,"before"===n?t:t.nextElementSibling)},k=function(t,e){return F(t,e,"after")},B=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return["height","padding-top","padding-bottom"].map((function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n})).reduce((function(t,e){return t+e}))},Y=function(t,e){if(!(t instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof e?t:t.filter((function(t){return t.querySelector(e)instanceof HTMLElement||t.shadowRoot&&t.shadowRoot.querySelector(e)instanceof HTMLElement})).map((function(t){return t.querySelector(e)||t.shadowRoot&&t.shadowRoot.querySelector(e)}))},R=function(t){return t.composedPath&&t.composedPath()[0]||t.target},q=function(t,e,n){return{element:t,posX:n.pageX-e.left,posY:n.pageY-e.top}},U=function(t,e){if(!0===t.isSortable){var n=M(t).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(t){return t.length>0&&e.matches(t)})).length>0;if(t===e)return!0;if(void 0!==M(t).getConfig("connectWith")&&null!==M(t).getConfig("connectWith"))return M(t).getConfig("connectWith")===M(e).getConfig("connectWith")}return!1},W={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null};var z,X,G,V,J,K,Q,Z,tt=function(t,e){if("string"==typeof M(t).getConfig("hoverClass")){var n=M(t).getConfig("hoverClass").split(" ");!0===e?(D(t,"mousemove",function(t,e){var n=this;if(void 0===e&&(e=250),"function"!=typeof t)throw new Error("You must provide a function as the first argument for throttle.");if("number"!=typeof e)throw new Error("You must provide a number as the second argument for throttle.");var a=null;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=Date.now();(null===a||i-a>=e)&&(a=i,t.apply(n,r))}}((function(e){0===e.buttons&&N(t.children,M(t).getConfig("items")).forEach((function(t){var a,r;t!==e.target?(a=t.classList).remove.apply(a,n):(r=t.classList).add.apply(r,n)}))}),M(t).getConfig("throttleTime"))),D(t,"mouseleave",(function(){N(t.children,M(t).getConfig("items")).forEach((function(t){var e;(e=t.classList).remove.apply(e,n)}))}))):(j(t,"mousemove"),j(t,"mouseleave"))}},et=function(t){j(t,"dragstart"),j(t,"dragend"),j(t,"dragover"),j(t,"dragenter"),j(t,"drop"),j(t,"mouseenter"),j(t,"mouseleave")},nt=function(t){var e;(e=t).h5s&&delete e.h5s.data,S(t,"aria-dropeffect")},at=function(t){S(t,"aria-grabbed"),S(t,"aria-copied"),S(t,"draggable"),S(t,"role")};function rt(t,e){if(e.composedPath)return e.composedPath().find((function(t){return t.isSortable}));for(;!0!==t.isSortable;)t=t.parentElement;return t}function ot(t,e){var n=C(t,"opts"),a=N(t.children,n.items).filter((function(t){return t.contains(e)||t.shadowRoot&&t.shadowRoot.contains(e)}));return a.length>0?a[0]:e}var it=function(t){var e=C(t,"opts"),n=N(t.children,e.items),a=Y(n,e.handle);(I(t,"aria-dropeffect","move"),C(t,"_disabled","false"),I(a,"draggable","true"),!1===e.disableIEFix)&&("function"==typeof(document||window.document).createElement("span").dragDrop&&D(a,"mousedown",(function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var t=this.parentElement;-1===n.indexOf(t);)t=t.parentElement;t.dragDrop()}})))};function st(t,e){var n=String(e);return e=e||{},"string"==typeof t&&(t=document.querySelectorAll(t)),t instanceof HTMLElement&&(t=[t]),t=Array.prototype.slice.call(t),/serialize/.test(n)?t.map((function(t){var e=C(t,"opts");return function(t,e,n){if(void 0===e&&(e=function(t,e){return t}),void 0===n&&(n=function(t){return t}),!(t instanceof HTMLElement)||!0==!t.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof e||"function"!=typeof n)throw new Error("You need to provide a valid serializer for items and the container.");var a=C(t,"opts").items,r=N(t.children,a),o=r.map((function(e){return{parent:t,node:e,html:e.outerHTML,index:P(e,r)}}));return{container:n({node:t,itemCount:o.length}),items:o.map((function(n){return e(n,t)}))}}(t,e.itemSerializer,e.containerSerializer)})):(t.forEach((function(t){if(/enable|disable|destroy/.test(n))return st[n](t);["connectWith","disableIEFix"].forEach((function(t){e.hasOwnProperty(t)&&null!==e[t]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+t+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),e=Object.assign({},W,M(t).config,e),M(t).config=e,C(t,"opts",e),t.isSortable=!0,function(t){var e=C(t,"opts"),n=N(t.children,e.items),a=Y(n,e.handle);C(t,"_disabled","false"),et(n),j(a,"mousedown"),j(t,"dragover"),j(t,"dragenter"),j(t,"drop")}(t);var a,r=N(t.children,e.items);if(null!==e.placeholder&&void 0!==e.placeholder){var o=document.createElement(t.tagName);e.placeholder instanceof HTMLElement?o.appendChild(e.placeholder):o.innerHTML=e.placeholder,a=o.children[0]}M(t).placeholder=function(t,e,n){var a;if(void 0===n&&(n="sortable-placeholder"),!(t instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(e instanceof HTMLElement)&&void 0!==e)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===e&&(["UL","OL"].includes(t.tagName)?e=document.createElement("li"):["TABLE","TBODY"].includes(t.tagName)?(e=document.createElement("tr")).innerHTML='<td colspan="100"></td>':e=document.createElement("div")),"string"==typeof n&&(a=e.classList).add.apply(a,n.split(" ")),e}(t,a,e.placeholderClass),C(t,"items",e.items),e.acceptFrom?C(t,"acceptFrom",e.acceptFrom):e.connectWith&&C(t,"connectWith",e.connectWith),it(t),I(r,"role","option"),I(r,"aria-grabbed","false"),tt(t,!0),D(t,"dragstart",(function(t){var n=R(t);if(!0!==n.isSortable&&(t.stopImmediatePropagation(),(!e.handle||n.matches(e.handle))&&"false"!==n.getAttribute("draggable"))){var a=rt(n,t),r=ot(a,n);K=N(a.children,e.items),V=K.indexOf(r),J=P(r,a.children),G=a,function(t,e,n){if(!(t instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(e instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=q),t.dataTransfer&&t.dataTransfer.setDragImage){var a=n(e,A(e),t);if(!(a.element instanceof HTMLElement)||"number"!=typeof a.posX||"number"!=typeof a.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setData("text/plain",R(t).id),t.dataTransfer.setDragImage(a.element,a.posX,a.posY)}}(t,r,e.customDragImage),X=B(r),r.classList.add(e.draggingClass),z=function(t,e){var n=t;return!0===M(e).getConfig("copy")&&(I(n=t.cloneNode(!0),"aria-copied","true"),t.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=t.style.display),n}(r,a),I(z,"aria-grabbed","true"),a.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:J,index:V,container:G},item:z,originalTarget:n}}))}})),D(t,"dragenter",(function(e){var n=R(e),a=rt(n,e);a&&a!==Q&&(Z=N(a.children,C(a,"items")).filter((function(e){return e!==M(t).placeholder})),a.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:J,index:V,container:G},destination:{container:a,itemsBeforeUpdate:Z},item:z,originalTarget:n}}))),Q=a})),D(t,"dragend",(function(n){if(z){z.classList.remove(e.draggingClass),I(z,"aria-grabbed","false"),"true"===z.getAttribute("aria-copied")&&"true"!==C(z,"dropped")&&z.remove(),z.style.display=z.oldDisplay,delete z.oldDisplay;var a=Array.from(L.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(H)[0];a&&a.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:J,index:V,container:G},item:z}})),Q=null,z=null,X=null}})),D(t,"drop",(function(n){if(U(t,z.parentElement)){n.preventDefault(),n.stopPropagation(),C(z,"dropped","true");var a=Array.from(L.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(H)[0];k(a,z),a.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:J,index:V,container:G},item:z}}));var r=M(t).placeholder,o=N(G.children,e.items).filter((function(t){return t!==r})),i=!0===this.isSortable?this:this.parentElement,s=N(i.children,C(i,"items")).filter((function(t){return t!==r})),l=P(z,Array.from(z.parentElement.children).filter((function(t){return t!==r}))),c=P(z,s);J===l&&G===i||t.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:J,index:V,container:G,itemsBeforeUpdate:K,items:o},destination:{index:c,elementIndex:l,container:i,itemsBeforeUpdate:Z,items:s},item:z}}))}}));var i,s,l,c=(i=function(t,n,a){if(z)if(e.forcePlaceholderSize&&(M(t).placeholder.style.height=X+"px"),Array.from(t.children).indexOf(n)>-1){var r=B(n),o=P(M(t).placeholder,n.parentElement.children),i=P(n,n.parentElement.children);if(r>X){var s=r-X,l=A(n).top;if(o<i&&a<l)return;if(o>i&&a>l+r-s)return}void 0===z.oldDisplay&&(z.oldDisplay=z.style.display),"none"!==z.style.display&&(z.style.display="none");var c=!1;try{c=a>=A(n).top+n.offsetHeight/2}catch(t){c=o<i}c?k(n,M(t).placeholder):function(t,e){F(t,e,"before")}(n,M(t).placeholder),Array.from(L.values()).filter((function(t){return void 0!==t.placeholder})).forEach((function(e){e.placeholder!==M(t).placeholder&&e.placeholder.remove()}))}else{var u=Array.from(L.values()).filter((function(t){return void 0!==t.placeholder})).map((function(t){return t.placeholder}));-1!==u.indexOf(n)||t!==n||N(n.children,e.items).length||(u.forEach((function(t){return t.remove()})),n.appendChild(M(t).placeholder))}},void 0===(s=e.debounce)&&(s=0),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];clearTimeout(l),l=setTimeout((function(){i.apply(void 0,t)}),s)}),u=function(t){var e=t.target,n=!0===e.isSortable?e:rt(e,t);if(e=ot(n,e),z&&U(n,z.parentElement)&&"true"!==C(n,"_disabled")){var a=C(n,"opts");parseInt(a.maxItems)&&N(n.children,C(n,"items")).length>=parseInt(a.maxItems)&&z.parentElement!==n||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=!0===M(n).getConfig("copy")?"copy":"move",c(n,e,t.pageY))}};D(r.concat(t),"dragover",u),D(r.concat(t),"dragenter",u)})),t)}st.destroy=function(t){!function(t){var e=C(t,"opts")||{},n=N(t.children,e.items),a=Y(n,e.handle);j(t,"dragover"),j(t,"dragenter"),j(t,"drop"),nt(t),j(a,"mousedown"),et(n),at(n)}(t)},st.enable=function(t){it(t)},st.disable=function(t){!function(t){var e=C(t,"opts"),n=N(t.children,e.items),a=Y(n,e.handle);I(t,"aria-dropeffect","none"),C(t,"_disabled","true"),I(a,"draggable","false"),j(a,"mousedown")}(t)},st.__testing={_data:C,_removeItemEvents:et,_removeItemData:at,_removeSortableData:nt};var lt=st,ct=n(18),ut=n.n(ct),dt=n(19),pt=n.n(dt),mt=n(43),ft=n.n(mt),gt=n(44),ht=function(t){function e(){return t.apply(this,arguments)||this}Object(x.a)(e,t);var n=e.prototype;return n.init=function(){t.prototype.init.call(this),this.tag=this.props.tag||app.store.createRecord("tags"),this.name=m.prop(this.tag.name()||""),this.slug=m.prop(this.tag.slug()||""),this.description=m.prop(this.tag.description()||""),this.color=m.prop(this.tag.color()||""),this.icon=m.prop(this.tag.icon()||""),this.isHidden=m.prop(this.tag.isHidden()||!1)},n.className=function(){return"EditTagModal Modal--small"},n.title=function(){return this.name()?Object(g.a)({name:this.name,color:this.color,icon:this.icon}):app.translator.trans("flarum-tags.admin.edit_tag.title")},n.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},this.fields().toArray()))},n.fields=function(){var t=this,e=new ft.a;return e.add("name",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.name_label")),m("input",{className:"FormControl",placeholder:app.translator.trans("flarum-tags.admin.edit_tag.name_placeholder"),value:this.name(),oninput:function(e){t.name(e.target.value),t.slug(Object(gt.slug)(e.target.value))}})),50),e.add("slug",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.slug_label")),m("input",{className:"FormControl",value:this.slug(),oninput:m.withAttr("value",this.slug)})),40),e.add("description",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.description_label")),m("textarea",{className:"FormControl",value:this.description(),oninput:m.withAttr("value",this.description)})),30),e.add("color",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.color_label")),m("input",{className:"FormControl",placeholder:"#aaaaaa",value:this.color(),oninput:m.withAttr("value",this.color)})),20),e.add("icon",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.icon_label")),m("div",{className:"helpText"},app.translator.trans("flarum-tags.admin.edit_tag.icon_text",{a:m("a",{href:"https://fontawesome.com/icons?m=free",tabindex:"-1"})})),m("input",{className:"FormControl",placeholder:"fas fa-bolt",value:this.icon(),oninput:m.withAttr("value",this.icon)})),10),e.add("hidden",m("div",{className:"Form-group"},m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",value:"1",checked:this.isHidden(),onchange:m.withAttr("checked",this.isHidden)}),app.translator.trans("flarum-tags.admin.edit_tag.hide_label")))),10),e.add("submit",m("div",{className:"Form-group"},f.a.component({type:"submit",className:"Button Button--primary EditTagModal-save",loading:this.loading,children:app.translator.trans("flarum-tags.admin.edit_tag.submit_button")}),this.tag.exists?m("button",{type:"button",className:"Button EditTagModal-delete",onclick:this.delete.bind(this)},app.translator.trans("flarum-tags.admin.edit_tag.delete_tag_button")):""),-10),e},n.submitData=function(){return{name:this.name(),slug:this.slug(),description:this.description(),color:this.color(),icon:this.icon(),isHidden:this.isHidden()}},n.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0,this.tag.save(this.submitData()).then((function(){return e.hide()}),(function(t){e.loading=!1,e.handleErrors(t)}))},n.delete=function(){var t=this;if(confirm(app.translator.trans("flarum-tags.admin.edit_tag.delete_tag_confirmation"))){var e=app.store.all("tags").filter((function(e){return e.parent()===t.tag}));this.tag.delete().then((function(){e.forEach((function(t){return t.pushData({attributes:{isChild:!1},relationships:{parent:null}})})),m.redraw()})),this.hide()}},e}(pt.a),vt=n(45),bt=function(t){function e(){return t.apply(this,arguments)||this}Object(x.a)(e,t);var n=e.prototype;return n.setMinTags=function(t,e,n){t(n),e(Math.max(n,e()))},n.className=function(){return"TagSettingsModal Modal--small"},n.title=function(){return app.translator.trans("flarum-tags.admin.tag_settings.title")},n.form=function(){var t=this.setting("flarum-tags.min_primary_tags",0),e=this.setting("flarum-tags.max_primary_tags",0),n=this.setting("flarum-tags.min_secondary_tags",0),a=this.setting("flarum-tags.max_secondary_tags",0);return[m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.tag_settings.required_primary_heading")),m("div",{className:"helpText"},app.translator.trans("flarum-tags.admin.tag_settings.required_primary_text")),m("div",{className:"TagSettingsModal-rangeInput"},m("input",{className:"FormControl",type:"number",min:"0",value:t(),oninput:m.withAttr("value",this.setMinTags.bind(this,t,e))}),app.translator.trans("flarum-tags.admin.tag_settings.range_separator_text"),m("input",{className:"FormControl",type:"number",min:t(),bidi:e}))),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.tag_settings.required_secondary_heading")),m("div",{className:"helpText"},app.translator.trans("flarum-tags.admin.tag_settings.required_secondary_text")),m("div",{className:"TagSettingsModal-rangeInput"},m("input",{className:"FormControl",type:"number",min:"0",value:n(),oninput:m.withAttr("value",this.setMinTags.bind(this,n,a))}),app.translator.trans("flarum-tags.admin.tag_settings.range_separator_text"),m("input",{className:"FormControl",type:"number",min:n(),bidi:a})))]},e}(n.n(vt).a);function yt(t){return m("li",{"data-id":t.id(),style:{color:t.color()}},m("div",{className:"TagListItem-info"},Object(h.a)(t),m("span",{className:"TagListItem-name"},t.name()),f.a.component({className:"Button Button--link",icon:"fas fa-pencil-alt",onclick:function(){return app.modal.show(new ht({tag:t}))}})),t.isChild()||null===t.position()?"":m("ol",{className:"TagListItem-children"},Object(v.a)(app.store.all("tags")).filter((function(e){return e.parent()===t})).map(yt)))}var _t=function(t){function e(){return t.apply(this,arguments)||this}Object(x.a)(e,t);var n=e.prototype;return n.view=function(){return m("div",{className:"TagsPage"},m("div",{className:"TagsPage-header"},m("div",{className:"container"},m("p",null,app.translator.trans("flarum-tags.admin.tags.about_tags_text")),f.a.component({className:"Button Button--primary",icon:"fas fa-plus",children:app.translator.trans("flarum-tags.admin.tags.create_tag_button"),onclick:function(){return app.modal.show(new ht)}}),f.a.component({className:"Button",children:app.translator.trans("flarum-tags.admin.tags.settings_button"),onclick:function(){return app.modal.show(new bt)}}))),m("div",{className:"TagsPage-list"},m("div",{className:"container"},m("div",{className:"TagGroup"},m("label",null,app.translator.trans("flarum-tags.admin.tags.primary_heading")),m("ol",{className:"TagList TagList--primary"},Object(v.a)(app.store.all("tags")).filter((function(t){return null!==t.position()&&!t.isChild()})).map(yt))),m("div",{className:"TagGroup"},m("label",null,app.translator.trans("flarum-tags.admin.tags.secondary_heading")),m("ul",{className:"TagList"},app.store.all("tags").filter((function(t){return null===t.position()})).sort((function(t,e){return t.name().localeCompare(e.name())})).map(yt))))))},n.config=function(){lt(this.$("ol, ul"),{acceptFrom:"ol,ul"}).forEach(this.onSortUpdate.bind(this))},n.onSortUpdate=function(t){var e=this;t.addEventListener("sortupdate",(function(t){t.detail.origin.container instanceof HTMLOListElement&&t.detail.destination.container instanceof HTMLUListElement&&app.store.getById("tags",t.detail.item.getAttribute("data-id")).pushData({attributes:{position:null,isChild:!1},relationships:{parent:null}});var n=e.$(".TagList--primary > li").map((function(){return{id:$(this).data("id"),children:$(this).find("li").map((function(){return $(this).data("id")})).get()}})).get();n.forEach((function(t,e){var n=app.store.getById("tags",t.id);n.pushData({attributes:{position:e,isChild:!1},relationships:{parent:null}}),t.children.forEach((function(t,e){app.store.getById("tags",t).pushData({attributes:{position:e,isChild:!0},relationships:{parent:n}})}))})),app.request({url:app.forum.attribute("apiUrl")+"/tags/order",method:"POST",data:{order:n}}),m.redraw.strategy("all"),m.redraw()}))},e}(ut.a),wt=function(){app.routes.tags={path:"/tags",component:_t.component()},app.extensionSettings["flarum-tags"]=function(){return m.route(app.route("tags"))},Object(o.extend)(w.a.prototype,"items",(function(t){t.add("tags",T.a.component({href:app.route("tags"),icon:"fas fa-tags",children:app.translator.trans("flarum-tags.admin.nav.tags_button"),description:app.translator.trans("flarum-tags.admin.nav.tags_text")}))}))},Et=n(46),Tt=n.n(Et),xt=function(){Object(o.extend)(Tt.a.prototype,"homePageItems",(function(t){t.add("tags",{path:"/tags",label:app.translator.trans("flarum-tags.admin.basics.tags_label")})}))},Ct=n(47),Nt=n.n(Ct),Lt=function(){Object(o.extend)(s.a.prototype,"startItems",(function(t){t.add("allowTagChange",{icon:"fas fa-tag",label:app.translator.trans("flarum-tags.admin.permissions.allow_edit_tags_label"),setting:function(){var t=parseInt(app.data.settings.allow_tag_change,10);return Nt.a.component({defaultLabel:t?app.translator.transChoice("core.admin.permissions_controls.allow_some_minutes_button",t,{count:t}):app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button"),key:"allow_tag_change",options:[{value:"-1",label:app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button")},{value:"10",label:app.translator.trans("core.admin.permissions_controls.allow_ten_minutes_button")},{value:"reply",label:app.translator.trans("core.admin.permissions_controls.allow_until_reply_button")}]})}},90)}))},Ot=n(20),Mt=Object(a.a)(Ot.a,{"tags/addTagsHomePageOption":xt,"tags/addTagChangePermission":Lt,"tags/addTagsPane":wt,"tags/components/TagSettingsModal":bt,"tags/components/TagsPage":_t,"tags/components/EditTagModal":ht,"tags/addTagPermission":y,"tags/addTagsPermissionScope":b}),Dt=n(21);app.initializers.add("flarum-tags",(function(t){t.store.models.tags=r.a,b(),y(),wt(),xt(),Lt()})),Object(a.a)(Dt.compat,Mt)},,,,,,,,,,,,function(t,e){t.exports=flarum.core.compat["components/PermissionDropdown"]},function(t,e){t.exports=flarum.core.compat["components/Dropdown"]},function(t,e){t.exports=flarum.core.compat["components/AdminNav"]},function(t,e){t.exports=flarum.core.compat["components/AdminLinkButton"]},function(t,e){t.exports=flarum.core.compat["utils/ItemList"]},function(t,e){t.exports=flarum.core.compat["utils/string"]},function(t,e){t.exports=flarum.core.compat["components/SettingsModal"]},function(t,e){t.exports=flarum.core.compat["components/BasicsPage"]},function(t,e){t.exports=flarum.core.compat["components/SettingDropdown"]},,function(t,e,n){"use strict";n.r(e);var a=n(15);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n(27)}]);
//# sourceMappingURL=admin.js.map