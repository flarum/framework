module.exports=function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=49)}([function(t,e){t.exports=flarum.core.compat.Model},function(t,e){t.exports=flarum.core.compat.extend},function(t,e,n){"use strict";function a(t){return t.slice(0).sort(function(t,e){var n=t.position(),a=e.position();if(null===n&&null===a)return e.discussionCount()-t.discussionCount();if(null===a)return-1;if(null===n)return 1;var r=t.parent(),o=e.parent();return r===o?n-a:r&&o?r.position()-o.position():r?r===e?1:r.position()-a:o?o===t?-1:n-o.position():0})}n.d(e,"a",function(){return a})},function(t,e,n){"use strict";function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",function(){return a})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var a=n(11),r=n.n(a);function o(t,e){void 0===e&&(e={}),e.style=e.style||{},e.className="TagLabel "+(e.className||"");var n=r()(e,"link");if(t){var a=t.color();a&&(e.style.backgroundColor=e.style.color=a,e.className+=" colored"),n&&(e.title=t.description()||"",e.href=app.route("tag",{tags:t.slug()}),e.config=m.route)}else e.className+=" untagged";return m(n?"a":"span",e,m("span",{className:"TagLabel-text"},t?t.name():app.translator.trans("flarum-tags.lib.deleted_tag_text")))}},,function(t,e,n){"use strict";function a(t,e){return void 0===e&&(e={}),e.className="icon TagIcon "+(e.className||""),t?(e.style=e.style||{},e.style.backgroundColor=t.color()):e.className+=" untagged",m("span",e)}n.d(e,"a",function(){return a})},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var a=n(11),r=n.n(a),o=n(4),i=n(2);function s(t,e){void 0===e&&(e={});var n=[],a=r()(e,"link");return e.className="TagsLabel "+(e.className||""),t?Object(i.a)(t).forEach(function(e){(e||1===t.length)&&n.push(Object(o.a)(e,{link:a}))}):n.push(Object(o.a)()),m("span",e,n)}},function(t,e){t.exports=flarum.core.compat["components/Button"]},function(t,e,n){"use strict";function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}n.d(e,"a",function(){return a})},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var a=n(3),r=n(0),o=n.n(r),i=n(15),s=n.n(i),l=n(16),c=n.n(l),u=function(t){function e(){return t.apply(this,arguments)||this}return Object(a.a)(e,t),e}(s()(o.a,{name:o.a.attribute("name"),slug:o.a.attribute("slug"),description:o.a.attribute("description"),color:o.a.attribute("color"),backgroundUrl:o.a.attribute("backgroundUrl"),backgroundMode:o.a.attribute("backgroundMode"),position:o.a.attribute("position"),parent:o.a.hasOne("parent"),defaultSort:o.a.attribute("defaultSort"),isChild:o.a.attribute("isChild"),isHidden:o.a.attribute("isHidden"),discussionCount:o.a.attribute("discussionCount"),lastPostedAt:o.a.attribute("lastPostedAt",o.a.transformDate),lastPostedDiscussion:o.a.hasOne("lastPostedDiscussion"),isRestricted:o.a.attribute("isRestricted"),canStartDiscussion:o.a.attribute("canStartDiscussion"),canAddToDiscussion:o.a.attribute("canAddToDiscussion"),isPrimary:c()("position","parent",function(t,e){return null!==t&&!1===e})}))},function(t,e){t.exports=flarum.core.compat["utils/extract"]},function(t,e){t.exports=flarum.core.compat["components/PermissionGrid"]},,function(t,e){},function(t,e){t.exports=flarum.core.compat["utils/mixin"]},function(t,e){t.exports=flarum.core.compat["utils/computed"]},function(t,e){t.exports=flarum.core.compat["components/Page"]},function(t,e){t.exports=flarum.core.compat["components/Modal"]},function(t,e,n){"use strict";var a=n(2),r=n(10),o=n(7),i=n(6),s=n(4);e.a={"tags/utils/sortTags":a.a,"tags/models/Tag":r.a,"tags/helpers/tagsLabel":o.a,"tags/helpers/tagIcon":i.a,"tags/helpers/tagLabel":s.a}},function(t,e){t.exports=flarum.core},,,,,,function(t,e,n){"use strict";var a=n(9),r=n(10),o=n(1),i=n(12),s=n.n(i),l=n(39),c=n.n(l),u=n(40),p=n.n(u),d=n(8),f=n.n(d),g=n(4),h=n(6),v=n(2),b=function(){Object(o.override)(app,"getRequiredPermissions",function(t,e){var n=e.match(/^tag\d+\./);return n?t(e.substr(n[0].length)).map(function(t){return n[0]+t}):t(e)}),Object(o.extend)(s.a.prototype,"scopeItems",function(t){Object(v.a)(app.store.all("tags")).filter(function(t){return t.isRestricted()}).forEach(function(e){return t.add("tag"+e.id(),{label:Object(g.a)(e),onremove:function(){return e.save({isRestricted:!1})},render:function(t){return"viewDiscussions"===t.permission||"startDiscussion"===t.permission||t.permission&&0===t.permission.indexOf("discussion.")?c.a.component({permission:"tag"+e.id()+"."+t.permission,allowGuest:t.allowGuest}):""}})})}),Object(o.extend)(s.a.prototype,"scopeControlItems",function(t){var e=Object(v.a)(app.store.all("tags").filter(function(t){return!t.isRestricted()}));e.length&&t.add("tag",p.a.component({className:"Dropdown--restrictByTag",buttonClassName:"Button Button--text",label:app.translator.trans("flarum-tags.admin.permissions.restrict_by_tag_heading"),icon:"fas fa-plus",caretIcon:null,children:e.map(function(t){return f.a.component({icon:!0,children:[Object(h.a)(t,{className:"Button-icon"})," ",t.name()],onclick:function(){return t.save({isRestricted:!0})}})})}))})},y=function(){Object(o.extend)(s.a.prototype,"moderateItems",function(t){t.add("tag",{icon:"fas fa-tag",label:app.translator.trans("flarum-tags.admin.permissions.tag_discussions_label"),permission:"discussion.tag"},95)})},w=n(41),_=n.n(w),E=n(42),T=n.n(E),x=n(3),N=(n(50),n(17)),C=n.n(N),O=n(18),L=n.n(O),M=n(43),D=n.n(M),j=n(44),I=function(t){function e(){return t.apply(this,arguments)||this}Object(x.a)(e,t);var n=e.prototype;return n.init=function(){t.prototype.init.call(this),this.tag=this.props.tag||app.store.createRecord("tags"),this.name=m.prop(this.tag.name()||""),this.slug=m.prop(this.tag.slug()||""),this.description=m.prop(this.tag.description()||""),this.color=m.prop(this.tag.color()||""),this.isHidden=m.prop(this.tag.isHidden()||!1)},n.className=function(){return"EditTagModal Modal--small"},n.title=function(){return this.name()?Object(g.a)({name:this.name,color:this.color}):app.translator.trans("flarum-tags.admin.edit_tag.title")},n.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},this.fields().toArray()))},n.fields=function(){var t=this,e=new D.a;return e.add("name",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.name_label")),m("input",{className:"FormControl",placeholder:app.translator.trans("flarum-tags.admin.edit_tag.name_placeholder"),value:this.name(),oninput:function(e){t.name(e.target.value),t.slug(Object(j.slug)(e.target.value))}})),50),e.add("slug",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.slug_label")),m("input",{className:"FormControl",value:this.slug(),oninput:m.withAttr("value",this.slug)})),40),e.add("description",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.description_label")),m("textarea",{className:"FormControl",value:this.description(),oninput:m.withAttr("value",this.description)})),30),e.add("color",m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.edit_tag.color_label")),m("input",{className:"FormControl",placeholder:"#aaaaaa",value:this.color(),oninput:m.withAttr("value",this.color)})),20),e.add("hidden",m("div",{className:"Form-group"},m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",value:"1",checked:this.isHidden(),onchange:m.withAttr("checked",this.isHidden)}),app.translator.trans("flarum-tags.admin.edit_tag.hide_label")))),10),e.add("submit",m("div",{className:"Form-group"},f.a.component({type:"submit",className:"Button Button--primary EditTagModal-save",loading:this.loading,children:app.translator.trans("flarum-tags.admin.edit_tag.submit_button")}),this.tag.exists?m("button",{type:"button",className:"Button EditTagModal-delete",onclick:this.delete.bind(this)},app.translator.trans("flarum-tags.admin.edit_tag.delete_tag_button")):""),-10),e},n.submitData=function(){return{name:this.name(),slug:this.slug(),description:this.description(),color:this.color(),isHidden:this.isHidden()}},n.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0,this.tag.save(this.submitData()).then(function(){return e.hide()},function(t){e.loading=!1,e.handleErrors(t)})},n.delete=function(){var t=this;if(confirm(app.translator.trans("flarum-tags.admin.edit_tag.delete_tag_confirmation"))){var e=app.store.all("tags").filter(function(e){return e.parent()===t.tag});this.tag.delete().then(function(){e.forEach(function(t){return t.pushData({attributes:{isChild:!1},relationships:{parent:null}})}),m.redraw()}),this.hide()}},e}(L.a),A=n(45),S=function(t){function e(){return t.apply(this,arguments)||this}Object(x.a)(e,t);var n=e.prototype;return n.setMinTags=function(t,e,n){t(n),e(Math.max(n,e()))},n.className=function(){return"TagSettingsModal Modal--small"},n.title=function(){return app.translator.trans("flarum-tags.admin.tag_settings.title")},n.form=function(){var t=this.setting("flarum-tags.min_primary_tags",0),e=this.setting("flarum-tags.max_primary_tags",0),n=this.setting("flarum-tags.min_secondary_tags",0),a=this.setting("flarum-tags.max_secondary_tags",0);return[m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.tag_settings.required_primary_heading")),m("div",{className:"helpText"},app.translator.trans("flarum-tags.admin.tag_settings.required_primary_text")),m("div",{className:"TagSettingsModal-rangeInput"},m("input",{className:"FormControl",type:"number",min:"0",value:t(),oninput:m.withAttr("value",this.setMinTags.bind(this,t,e))}),app.translator.trans("flarum-tags.admin.tag_settings.range_separator_text"),m("input",{className:"FormControl",type:"number",min:t(),bidi:e}))),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-tags.admin.tag_settings.required_secondary_heading")),m("div",{className:"helpText"},app.translator.trans("flarum-tags.admin.tag_settings.required_secondary_text")),m("div",{className:"TagSettingsModal-rangeInput"},m("input",{className:"FormControl",type:"number",min:"0",value:n(),oninput:m.withAttr("value",this.setMinTags.bind(this,n,a))}),app.translator.trans("flarum-tags.admin.tag_settings.range_separator_text"),m("input",{className:"FormControl",type:"number",min:n(),bidi:a})))]},e}(n.n(A).a);function P(t){return m("li",{"data-id":t.id(),style:{color:t.color()}},m("div",{className:"TagListItem-info"},Object(h.a)(t),m("span",{className:"TagListItem-name"},t.name()),f.a.component({className:"Button Button--link",icon:"fas fa-pencil-alt",onclick:function(){return app.modal.show(new I({tag:t}))}})),t.isChild()||null===t.position()?"":m("ol",{className:"TagListItem-children"},Object(v.a)(app.store.all("tags")).filter(function(e){return e.parent()===t}).map(P)))}var H=function(t){function e(){return t.apply(this,arguments)||this}Object(x.a)(e,t);var n=e.prototype;return n.view=function(){return m("div",{className:"TagsPage"},m("div",{className:"TagsPage-header"},m("div",{className:"container"},m("p",null,app.translator.trans("flarum-tags.admin.tags.about_tags_text")),f.a.component({className:"Button Button--primary",icon:"fas fa-plus",children:app.translator.trans("flarum-tags.admin.tags.create_tag_button"),onclick:function(){return app.modal.show(new I)}}),f.a.component({className:"Button",children:app.translator.trans("flarum-tags.admin.tags.settings_button"),onclick:function(){return app.modal.show(new S)}}))),m("div",{className:"TagsPage-list"},m("div",{className:"container"},m("div",{className:"TagGroup"},m("label",null,app.translator.trans("flarum-tags.admin.tags.primary_heading")),m("ol",{className:"TagList TagList--primary"},Object(v.a)(app.store.all("tags")).filter(function(t){return null!==t.position()&&!t.isChild()}).map(P))),m("div",{className:"TagGroup"},m("label",null,app.translator.trans("flarum-tags.admin.tags.secondary_heading")),m("ul",{className:"TagList"},app.store.all("tags").filter(function(t){return null===t.position()}).sort(function(t,e){return t.name().localeCompare(e.name())}).map(P))))))},n.config=function(){var t=this;this.$("ol, ul").sortable({connectWith:"primary"}).on("sortupdate",function(e,n){n.startparent.is("ol")&&n.endparent.is("ul")&&app.store.getById("tags",n.item.data("id")).pushData({attributes:{position:null,isChild:!1},relationships:{parent:null}});var a=t.$(".TagList--primary > li").map(function(){return{id:$(this).data("id"),children:$(this).find("li").map(function(){return $(this).data("id")}).get()}}).get();a.forEach(function(t,e){var n=app.store.getById("tags",t.id);n.pushData({attributes:{position:e,isChild:!1},relationships:{parent:null}}),t.children.forEach(function(t,e){app.store.getById("tags",t).pushData({attributes:{position:e,isChild:!0},relationships:{parent:n}})})}),app.request({url:app.forum.attribute("apiUrl")+"/tags/order",method:"POST",data:{order:a}}),m.redraw.strategy("all"),m.redraw()})},e}(C.a),F=function(){app.routes.tags={path:"/tags",component:H.component()},app.extensionSettings["flarum-tags"]=function(){return m.route(app.route("tags"))},Object(o.extend)(_.a.prototype,"items",function(t){t.add("tags",T.a.component({href:app.route("tags"),icon:"fas fa-tags",children:app.translator.trans("flarum-tags.admin.nav.tags_button"),description:app.translator.trans("flarum-tags.admin.nav.tags_text")}))})},k=n(46),B=n.n(k),Y=function(){Object(o.extend)(B.a.prototype,"homePageItems",function(t){t.add("tags",{path:"/tags",label:app.translator.trans("flarum-tags.admin.basics.tags_label")})})},q=n(47),W=n.n(q),R=function(){Object(o.extend)(s.a.prototype,"startItems",function(t){t.add("allowTagChange",{icon:"fas fa-tag",label:app.translator.trans("flarum-tags.admin.permissions.allow_edit_tags_label"),setting:function(){var t=parseInt(app.data.settings.allow_tag_change,10);return W.a.component({defaultLabel:t?app.translator.transChoice("core.admin.permissions_controls.allow_some_minutes_button",t,{count:t}):app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button"),key:"allow_tag_change",options:[{value:"-1",label:app.translator.trans("core.admin.permissions_controls.allow_indefinitely_button")},{value:"10",label:app.translator.trans("core.admin.permissions_controls.allow_ten_minutes_button")},{value:"reply",label:app.translator.trans("core.admin.permissions_controls.allow_until_reply_button")}]})}},90)})},z=n(19),X=Object(a.a)(z.a,{"tags/addTagsHomePageOption":Y,"tags/addTagChangePermission":R,"tags/addTagsPane":F,"tags/components/TagSettingsModal":S,"tags/components/TagsPage":H,"tags/components/EditTagModal":I,"tags/addTagPermission":y,"tags/addTagsPermissionScope":b}),U=n(20);app.initializers.add("flarum-tags",function(t){t.store.models.tags=r.a,b(),y(),F(),Y(),R()}),Object(a.a)(U.compat,X)},,,,,,,,,,,,,function(t,e){t.exports=flarum.core.compat["components/PermissionDropdown"]},function(t,e){t.exports=flarum.core.compat["components/Dropdown"]},function(t,e){t.exports=flarum.core.compat["components/AdminNav"]},function(t,e){t.exports=flarum.core.compat["components/AdminLinkButton"]},function(t,e){t.exports=flarum.core.compat["utils/ItemList"]},function(t,e){t.exports=flarum.core.compat["utils/string"]},function(t,e){t.exports=flarum.core.compat["components/SettingsModal"]},function(t,e){t.exports=flarum.core.compat["components/BasicsPage"]},function(t,e){t.exports=flarum.core.compat["components/SettingDropdown"]},,function(t,e,n){"use strict";n.r(e);var a=n(14);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n(26)},function(t,e){!function(){"use strict";function t(t,e,n){if(void 0===n)return t&&t.h5s&&t.h5s.data&&t.h5s.data[e];t.h5s=t.h5s||{},t.h5s.data=t.h5s.data||{},t.h5s.data[e]=n}function e(t,e){if(!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof e?Array.from(t):Array.from(t).filter(function(t){return 1===t.nodeType&&t.matches(e)})}var n=new Map,a=function(){function t(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(t.prototype,"config",{get:function(){var t={};return this._config.forEach(function(e,n){t[n]=e}),t},set:function(t){if("object"!=typeof t)throw new Error("You must provide a valid configuration object to the config setter.");var e=Object.assign({},t);this._config=new Map(Object.entries(e))},enumerable:!0,configurable:!0}),t.prototype.setConfig=function(t,e){if(!this._config.has(t))throw new Error("Trying to set invalid configuration item: "+t);this._config.set(t,e)},t.prototype.getConfig=function(t){if(!this._config.has(t))throw new Error("Invalid configuration item requested: "+t);return this._config.get(t)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){if(!(t instanceof HTMLElement)&&null!==t)throw new Error("A placeholder must be an html element or null.");this._placeholder=t},enumerable:!0,configurable:!0}),t.prototype.setData=function(t,e){if("string"!=typeof t)throw new Error("The key must be a string.");this._data.set(t,e)},t.prototype.getData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.get(t)},t.prototype.deleteData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.delete(t)},t}();function r(t){if(!(t instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return n.has(t)||n.set(t,new a),n.get(t)}function o(t,e,n){if(t instanceof Array)for(var a=0;a<t.length;++a)o(t[a],e,n);else t.addEventListener(e,n),r(t).setData("event"+e,n)}function i(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)i(t[n],e);else t.removeEventListener(e,r(t).getData("event"+e)),r(t).deleteData("event"+e)}function s(t,e,n){if(t instanceof Array)for(var a=0;a<t.length;++a)s(t[a],e,n);else t.setAttribute(e,n)}function l(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)l(t[n],e);else t.removeAttribute(e)}function c(t){if(!t.parentElement||0===t.getClientRects().length)throw new Error("target element must be part of the dom");var e=t.getClientRects()[0];return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}}function u(t,e){if(!(t instanceof HTMLElement&&(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(e).indexOf(t)}function p(t){if(!(t instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==t.parentNode}var d=function(t,e,n){if(!(t instanceof HTMLElement&&t.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");t.parentElement.insertBefore(e,"before"===n?t:t.nextElementSibling)},m=function(t,e){return d(t,e,"before")},f=function(t,e){return d(t,e,"after")};function g(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return["height","padding-top","padding-bottom"].map(function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n}).reduce(function(t,e){return t+e})}function h(t,e){if(!(t instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof e?t:t.filter(function(t){return t.querySelector(e)instanceof HTMLElement}).map(function(t){return t.querySelector(e)})}var v=function(t,e,n){return{element:t,posX:n.pageX-e.left,posY:n.pageY-e.top}};function b(t,e){if(!0===t.isSortable){var n=r(t).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter(function(t){return t.length>0&&e.matches(t)}).length>0;if(t===e)return!0;if(void 0!==r(t).getConfig("connectWith")&&null!==r(t).getConfig("connectWith"))return r(t).getConfig("connectWith")===r(e).getConfig("connectWith")}return!1}var y,w,_,E,T,x,N,C={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null};function O(t,n){if("string"==typeof r(t).getConfig("hoverClass")){var a=r(t).getConfig("hoverClass").split(" ");!0===n?(o(t,"mousemove",function(t,e){var n=this;if(void 0===e&&(e=250),"function"!=typeof t)throw new Error("You must provide a function as the first argument for throttle.");if("number"!=typeof e)throw new Error("You must provide a number as the second argument for throttle.");var a=null;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o-0]=arguments[o];var i=Date.now();(null===a||i-a>=e)&&(a=i,t.apply(n,r))}}(function(n){0===n.buttons&&e(t.children,r(t).getConfig("items")).forEach(function(t){var e,r;t!==n.target?(e=t.classList).remove.apply(e,a):(r=t.classList).add.apply(r,a)})},r(t).getConfig("throttleTime"))),o(t,"mouseleave",function(){e(t.children,r(t).getConfig("items")).forEach(function(t){var e;(e=t.classList).remove.apply(e,a)})})):(i(t,"mousemove"),i(t,"mouseleave"))}}var L=function(t){i(t,"dragstart"),i(t,"dragend"),i(t,"dragover"),i(t,"dragenter"),i(t,"drop"),i(t,"mouseenter"),i(t,"mouseleave")},M=function(t,e){var n=t;return!0===r(e).getConfig("copy")&&(s(n=t.cloneNode(!0),"aria-copied","true"),t.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=t.style.display),n};function D(t){for(;!0!==t.isSortable;)t=t.parentElement;return t}function j(n,a){var r=t(n,"opts"),o=e(n.children,r.items).filter(function(t){return t.contains(a)});return o.length>0?o[0]:a}var I=function(n){var a,r,o=t(n,"opts")||{},s=e(n.children,o.items),c=h(s,o.handle);i(n,"dragover"),i(n,"dragenter"),i(n,"drop"),(r=a=n).h5s&&delete r.h5s.data,l(a,"aria-dropeffect"),i(c,"mousedown"),L(s),function(t){l(t,"aria-grabbed"),l(t,"aria-copied"),l(t,"draggable"),l(t,"role")}(s)},A=function(n){var a=t(n,"opts"),r=e(n.children,a.items),i=h(r,a.handle);(s(n,"aria-dropeffect","move"),t(n,"_disabled","false"),s(i,"draggable","true"),!1===a.disableIEFix)&&("function"==typeof(document||window.document).createElement("span").dragDrop&&o(i,"mousedown",function(){if(-1!==r.indexOf(this))this.dragDrop();else{for(var t=this.parentElement;-1===r.indexOf(t);)t=t.parentElement;t.dragDrop()}}))},S=function(n){var a=t(n,"opts"),r=e(n.children,a.items),o=h(r,a.handle);t(n,"_disabled","false"),L(r),i(o,"mousedown"),i(n,"dragover"),i(n,"dragenter"),i(n,"drop")};function P(a,i){var l=String(i);return i=i||{},"string"==typeof a&&(a=document.querySelectorAll(a)),a instanceof HTMLElement&&(a=[a]),a=Array.prototype.slice.call(a),/serialize/.test(l)?a.map(function(n){var a=t(n,"opts");return function(n,a,r){if(void 0===a&&(a=function(t,e){return t}),void 0===r&&(r=function(t){return t}),!(n instanceof HTMLElement)||1==!n.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof a||"function"!=typeof r)throw new Error("You need to provide a valid serializer for items and the container.");var o=t(n,"opts").items,i=e(n.children,o),s=i.map(function(t){return{parent:n,node:t,html:t.outerHTML,index:u(t,i)}});return{container:r({node:n,itemCount:s.length}),items:s.map(function(t){return a(t,n)})}}(n,a.itemSerializer,a.containerSerializer)}):(a.forEach(function(a){if(/enable|disable|destroy/.test(l))return P[l](a);["connectWith","disableIEFix"].forEach(function(t){i.hasOwnProperty(t)&&null!==i[t]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+t+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')}),i=Object.assign({},C,r(a).config,i),r(a).config=i,t(a,"opts",i),a.isSortable=!0,S(a);var d,h=e(a.children,i.items);if(null!==i.placeholder&&void 0!==i.placeholder){var L=document.createElement(a.tagName);L.innerHTML=i.placeholder,d=L.children[0]}r(a).placeholder=function(t,e,n){if(void 0===n&&(n="sortable-placeholder"),!(t instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(e instanceof HTMLElement)&&void 0!==e)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===e&&(["UL","OL"].includes(t.tagName)?e=document.createElement("li"):["TABLE","TBODY"].includes(t.tagName)?(e=document.createElement("tr")).innerHTML='<td colspan="100"></td>':e=document.createElement("div")),"string"==typeof n&&(a=e.classList).add.apply(a,n.split(" ")),e;var a}(a,d,i.placeholderClass),t(a,"items",i.items),i.acceptFrom?t(a,"acceptFrom",i.acceptFrom):i.connectWith&&t(a,"connectWith",i.connectWith),A(a),s(h,"role","option"),s(h,"aria-grabbed","false"),O(a,!0),o(a,"dragstart",function(t){if(!0!==t.target.isSortable&&(t.stopImmediatePropagation(),(!i.handle||t.target.matches(i.handle))&&"false"!==t.target.getAttribute("draggable"))){var n=D(t.target),a=j(n,t.target);x=e(n.children,i.items),E=x.indexOf(a),T=u(a,n.children),_=n,function(t,e,n){if(!(t instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(e instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=v),t.dataTransfer&&t.dataTransfer.setDragImage){var a=n(e,c(e),t);if(!(a.element instanceof HTMLElement)||"number"!=typeof a.posX||"number"!=typeof a.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setData("text/plain",t.target.id),t.dataTransfer.setDragImage(a.element,a.posX,a.posY)}}(t,a,i.customDragImage),w=g(a),a.classList.add(i.draggingClass),s(y=M(a,n),"aria-grabbed","true"),n.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:T,index:E,container:_},item:y}}))}}),o(a,"dragenter",function(n){if(!0!==n.target.isSortable){var o=D(n.target);N=e(o.children,t(o,"items")).filter(function(t){return t!==r(a).placeholder})}}),o(a,"dragend",function(e){if(y){y.classList.remove(i.draggingClass),s(y,"aria-grabbed","false"),"true"===y.getAttribute("aria-copied")&&"true"!==t(y,"dropped")&&y.remove(),y.style.display=y.oldDisplay,delete y.oldDisplay;var r=Array.from(n.values()).map(function(t){return t.placeholder}).filter(function(t){return t instanceof HTMLElement}).filter(p)[0];r&&r.remove(),a.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:T,index:E,container:_},item:y}})),y=null,w=null}}),o(a,"drop",function(o){if(b(a,y.parentElement)){o.preventDefault(),o.stopPropagation(),t(y,"dropped","true");var s=Array.from(n.values()).map(function(t){return t.placeholder}).filter(function(t){return t instanceof HTMLElement}).filter(p)[0];f(s,y),s.remove(),a.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:T,index:E,container:_},item:y}}));var l=r(a).placeholder,c=e(_.children,i.items).filter(function(t){return t!==l}),d=!0===this.isSortable?this:this.parentElement,m=e(d.children,t(d,"items")).filter(function(t){return t!==l}),g=u(y,Array.from(y.parentElement.children).filter(function(t){return t!==l})),h=u(y,m);T===g&&_===d||a.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:T,index:E,container:_,itemsBeforeUpdate:x,items:c},destination:{index:h,elementIndex:g,container:d,itemsBeforeUpdate:N,items:m},item:y}}))}});var I,H,F,k=(I=function(t,a,o){if(y)if(i.forcePlaceholderSize&&(r(t).placeholder.style.height=w+"px"),Array.from(t.children).indexOf(a)>-1){var s=g(a),l=u(r(t).placeholder,a.parentElement.children),p=u(a,a.parentElement.children);if(s>w){var d=s-w,h=c(a).top;if(l<p&&o<h)return;if(l>p&&o>h+s-d)return}void 0===y.oldDisplay&&(y.oldDisplay=y.style.display),"none"!==y.style.display&&(y.style.display="none");var v=!1;try{v=o>=c(a).top+a.offsetHeight/2}catch(t){v=l<p}v?f(a,r(t).placeholder):m(a,r(t).placeholder),Array.from(n.values()).filter(function(t){return void 0!==t.placeholder}).forEach(function(e){e.placeholder!==r(t).placeholder&&e.placeholder.remove()})}else{var b=Array.from(n.values()).filter(function(t){return void 0!==t.placeholder}).map(function(t){return t.placeholder});-1!==b.indexOf(a)||t!==a||e(a.children,i.items).length||(b.forEach(function(t){return t.remove()}),a.appendChild(r(t).placeholder))}},void 0===(H=i.debounce)&&(H=0),function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];clearTimeout(F),F=setTimeout(function(){I.apply(void 0,t)},H)}),B=function(n){var a=n.target,o=!0===a.isSortable?a:D(a);if(a=j(o,a),y&&b(o,y.parentElement)&&"true"!==t(o,"_disabled")){var i=t(o,"opts");parseInt(i.maxItems)&&e(o.children,t(o,"items")).length>=parseInt(i.maxItems)&&y.parentElement!==o||(n.preventDefault(),n.stopPropagation(),n.dataTransfer.dropEffect=!0===r(o).getConfig("copy")?"copy":"move",k(o,a,n.pageY))}};o(h.concat(a),"dragover",B),o(h.concat(a),"dragenter",B)}),a)}P.destroy=function(t){I(t)},P.enable=function(t){A(t)},P.disable=function(n){!function(n){var a=t(n,"opts"),r=h(e(n.children,a.items),a.handle);s(n,"aria-dropeffect","none"),t(n,"_disabled","true"),s(r,"draggable","false"),i(r,"mousedown")}(n)}}()}]);
//# sourceMappingURL=admin.js.map