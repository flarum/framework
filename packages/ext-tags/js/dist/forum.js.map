{"version":3,"sources":["webpack://@flarum/tags/webpack/bootstrap","webpack://@flarum/tags/external \"flarum.core.compat['Model']\"","webpack://@flarum/tags/external \"flarum.core.compat['extend']\"","webpack://@flarum/tags/./src/common/utils/sortTags.js","webpack://@flarum/tags/./src/common/helpers/tagIcon.js","webpack://@flarum/tags/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/tags/./src/common/helpers/tagLabel.js","webpack://@flarum/tags/external \"flarum.core.compat['components/IndexPage']\"","webpack://@flarum/tags/./src/common/helpers/tagsLabel.js","webpack://@flarum/tags/external \"flarum.core.compat['components/Button']\"","webpack://@flarum/tags/external \"flarum.core.compat['utils/classList']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/Link']\"","webpack://@flarum/tags/external \"flarum.core.compat['utils/Stream']\"","webpack://@flarum/tags/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@flarum/tags/./src/common/models/Tag.js","webpack://@flarum/tags/external \"flarum.core.compat['utils/extract']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/DiscussionComposer']\"","webpack://@flarum/tags/external \"flarum.core.compat['utils/mixin']\"","webpack://@flarum/tags/external \"flarum.core.compat['utils/computed']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/Modal']\"","webpack://@flarum/tags/./src/common/compat.js","webpack://@flarum/tags/external \"flarum.core\"","webpack://@flarum/tags/external \"flarum.core.compat['components/LinkButton']\"","webpack://@flarum/tags/external \"flarum.core.compat['models/Discussion']\"","webpack://@flarum/tags/./node_modules/@babel/runtime/regenerator/index.js","webpack://@flarum/tags/external \"flarum.core.compat['components/DiscussionHero']\"","webpack://@flarum/tags/external \"flarum.core.compat['utils/extractText']\"","webpack://@flarum/tags/./src/forum/components/TagsPage.js","webpack://@flarum/tags/./src/forum/components/DiscussionTaggedPost.js","webpack://@flarum/tags/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@flarum/tags/./src/forum/states/TagListState.js","webpack://@flarum/tags/./src/forum/components/TagLinkButton.js","webpack://@flarum/tags/./src/forum/addTagList.js","webpack://@flarum/tags/./src/forum/components/TagHero.js","webpack://@flarum/tags/./src/forum/addTagFilter.js","webpack://@flarum/tags/./src/forum/addTagLabels.js","webpack://@flarum/tags/./src/forum/utils/getSelectableTags.js","webpack://@flarum/tags/./src/forum/components/TagDiscussionModal.js","webpack://@flarum/tags/./src/forum/addTagControl.js","webpack://@flarum/tags/./src/forum/addTagComposer.js","webpack://@flarum/tags/./src/forum/compat.js","webpack://@flarum/tags/./src/forum/index.js","webpack://@flarum/tags/external \"flarum.core.compat['components/Page']\"","webpack://@flarum/tags/external \"flarum.core.compat['helpers/listItems']\"","webpack://@flarum/tags/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/EventPost']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/Separator']\"","webpack://@flarum/tags/external \"flarum.core.compat['states/DiscussionListState']\"","webpack://@flarum/tags/external \"flarum.core.compat['states/GlobalSearchState']\"","webpack://@flarum/tags/external \"flarum.core.compat['Component']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/DiscussionListItem']\"","webpack://@flarum/tags/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@flarum/tags/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@flarum/tags/external \"flarum.core.compat['helpers/highlight']\"","webpack://@flarum/tags/external \"flarum.core.compat['utils/KeyboardNavigatable']\"","webpack://@flarum/tags/./forum.js","webpack://@flarum/tags/./node_modules/regenerator-runtime/runtime-module.js","webpack://@flarum/tags/./node_modules/regenerator-runtime/runtime.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","sortTags","tags","slice","sort","a","b","aPos","position","bPos","discussionCount","aParent","parent","bParent","tagIcon","tag","attrs","settings","hasIcon","icon","useColor","className","classList","style","color","backgroundColor","_inheritsLoose","subClass","superClass","constructor","__proto__","tagLabel","link","extract","tagText","app","translator","trans","title","description","href","route","slug","isChild","Link","tagsLabel","children","forEach","length","push","_extends","assign","target","arguments","source","apply","this","Tag","mixin","Model","attribute","backgroundUrl","backgroundMode","hasOne","hasMany","defaultSort","isHidden","lastPostedAt","transformDate","lastPostedDiscussion","isRestricted","canStartDiscussion","canAddToDiscussion","isPrimary","computed","TagsPage","oninit","vnode","history","preloaded","preloadedApiDocument","filter","loading","tagList","load","then","store","all","redraw","view","pinned","cloud","IndexPage","hero","listItems","sidebarItems","toArray","map","child","discussion","lastPostNumber","humanTime","oncreate","setTitle","setTitleCount","Page","DiscussionTaggedPost","initAttrs","oldTags","post","content","newTags","diffTags","tags1","tags2","indexOf","id","getById","tagsAdded","tagsRemoved","descriptionKey","descriptionData","data","count","EventPost","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","TagListState","loadedIncludes","Set","fn","includes","unloadedIncludes","include","has","find","val","add","self","args","err","undefined","TagLinkButton","model","active","isActive","params","LinkButton","extend","items","current","matches","Separator","component","search","stickyParams","currentTag","addTag","more","splice","TagHero","Component","currentActiveTag","getBy","override","original","vdom","session","user","disabled","GlobalSearchState","param","DiscussionListState","q","DiscussionListItem","DiscussionHero","getSelectableTags","TagDiscussionModal","tagsLoading","selected","Stream","focused","minPrimary","forum","maxPrimary","minSecondary","maxSecondary","navigator","KeyboardNavigatable","onUp","setIndex","getCurrentNumericIndex","onDown","onSelect","select","onRemove","selectedTags","index","primaryCount","secondaryCount","removeTag","getInstruction","remaining","toLowerCase","substr","inputWidth","Math","max","extractText","onclick","$","focus","onready","placeholder","bidi","width","onkeydown","navigate","onfocus","onblur","type","meetsRequirements","data-index","colored","onmouseover","toggleTag","highlight","e","metaKey","ctrlKey","click","getItem","dispatchEvent","Event","selectableItems","scrollToItem","$items","$dropdown","$item","eq","attr","scrollTop","dropdownScroll","dropdownTop","offset","top","dropdownBottom","outerHeight","itemTop","itemBottom","parseInt","css","stop","animate","onsubmit","preventDefault","save","relationships","DiscussionPage","update","hide","Modal","DiscussionControls","canTag","modal","show","promise","composer","fields","DiscussionComposer","chooseTags","selectableTags","chosenTags","chosenPrimaryTags","chosenSecondaryTags","addTagFilter","addTagControl","addTagList","addTagLabels","addTagComposer","initializers","routes","path","postComponents","discussionTagged","models","Discussion","tagsCompat","g","Function","hadRuntime","regeneratorRuntime","getOwnPropertyNames","oldRuntime","global","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","inModule","runtime","wrap","ContinueSentinel","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","GeneratorFunctionPrototype","Generator","GeneratorFunction","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","awrap","__await","defineIteratorMethods","AsyncIterator","async","innerFn","outerFn","tryLocsList","iter","next","result","toString","keys","reverse","pop","Context","reset","skipTempReset","prev","sent","_sent","delegate","method","tryEntries","resetTryEntry","charAt","isNaN","rootRecord","completion","rval","dispatchException","exception","context","handle","loc","caught","record","entry","tryLoc","hasCatch","hasFinally","catchLoc","finallyLoc","Error","abrupt","finallyEntry","complete","afterLoc","finish","thrown","delegateYield","iterable","resultName","nextLoc","protoGenerator","generator","_invoke","state","doneResult","delegateResult","maybeInvokeDelegate","tryCatch","makeInvokeMethod","obj","previousPromise","callInvokeWithMethodAndArg","invoke","unwrapped","return","TypeError","pushTryEntry","locs","iteratorMethod"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 52);\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['extend'];","export default function sortTags(tags) {\n  return tags.slice(0).sort((a, b) => {\n    const aPos = a.position();\n    const bPos = b.position();\n\n    // If they're both secondary tags, sort them by their discussions count,\n    // descending.\n    if (aPos === null && bPos === null)\n      return b.discussionCount() - a.discussionCount();\n\n    // If just one is a secondary tag, then the primary tag should\n    // come first.\n    if (bPos === null) return -1;\n    if (aPos === null) return 1;\n\n    // If we've made it this far, we know they're both primary tags. So we'll\n    // need to see if they have parents.\n    const aParent = a.parent();\n    const bParent = b.parent();\n\n    // If they both have the same parent, then their positions are local,\n    // so we can compare them directly.\n    if (aParent === bParent) return aPos - bPos;\n\n    // If they are both child tags, then we will compare the positions of their\n    // parents.\n    else if (aParent && bParent)\n      return aParent.position() - bParent.position();\n\n    // If we are comparing a child tag with its parent, then we let the parent\n    // come first. If we are comparing an unrelated parent/child, then we\n    // compare both of the parents.\n    else if (aParent)\n      return aParent === b ? 1 : aParent.position() - bPos;\n\n    else if (bParent)\n      return bParent === a ? -1 : aPos - bParent.position();\n\n    return 0;\n  });\n}\n","import classList from 'flarum/utils/classList';\n\nexport default function tagIcon(tag, attrs = {}, settings = {}) {\n  const hasIcon = tag && tag.icon();\n  const { useColor = true } = settings;\n\n  attrs.className = classList([\n    attrs.className,\n    'icon',\n    hasIcon ? tag.icon() : 'TagIcon'\n  ]);\n\n  if (tag) {\n    attrs.style = attrs.style || {};\n\n    if (hasIcon) {\n      attrs.style.color = useColor ? tag.color() : '';\n    } else {\n      attrs.style.backgroundColor = tag.color();\n    }\n\n  } else {\n    attrs.className += ' untagged';\n  }\n\n  return hasIcon ? <i {...attrs}/> : <span {...attrs}/>;\n}\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import extract from 'flarum/utils/extract';\nimport Link from 'flarum/components/Link';\nimport tagIcon from './tagIcon';\n\nexport default function tagLabel(tag, attrs = {}) {\n  attrs.style = attrs.style || {};\n  attrs.className = 'TagLabel ' + (attrs.className || '');\n\n  const link = extract(attrs, 'link');\n  const tagText = tag ? tag.name() : app.translator.trans('flarum-tags.lib.deleted_tag_text');\n\n  if (tag) {\n    const color = tag.color();\n    if (color) {\n      attrs.style.backgroundColor = attrs.style.color = color;\n      attrs.className += ' colored';\n    }\n\n    if (link) {\n      attrs.title = tag.description() || '';\n      attrs.href = app.route('tag', {tags: tag.slug()});\n    }\n\n    if (tag.isChild()) {\n      attrs.className += ' TagLabel--child';\n    }\n  } else {\n    attrs.className += ' untagged';\n  }\n\n  return (\n    m((link ? Link : 'span'), attrs,\n      <span className=\"TagLabel-text\">\n        {tag && tag.icon() && tagIcon(tag, {}, {useColor: false})} {tagText}\n      </span>\n    )\n  );\n}\n","module.exports = flarum.core.compat['components/IndexPage'];","import extract from 'flarum/utils/extract';\nimport tagLabel from './tagLabel';\nimport sortTags from '../utils/sortTags';\n\nexport default function tagsLabel(tags, attrs = {}) {\n  const children = [];\n  const link = extract(attrs, 'link');\n\n  attrs.className = 'TagsLabel ' + (attrs.className || '');\n\n  if (tags) {\n    sortTags(tags).forEach(tag => {\n      if (tag || tags.length === 1) {\n        children.push(tagLabel(tag, {link}));\n      }\n    });\n  } else {\n    children.push(tagLabel());\n  }\n\n  return <span {...attrs}>{children}</span>;\n}\n","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['utils/classList'];","module.exports = flarum.core.compat['components/Link'];","module.exports = flarum.core.compat['utils/Stream'];","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\nimport computed from 'flarum/utils/computed';\n\nexport default class Tag extends mixin(Model, {\n  name: Model.attribute('name'),\n  slug: Model.attribute('slug'),\n  description: Model.attribute('description'),\n\n  color: Model.attribute('color'),\n  backgroundUrl: Model.attribute('backgroundUrl'),\n  backgroundMode: Model.attribute('backgroundMode'),\n  icon: Model.attribute('icon'),\n\n  position: Model.attribute('position'),\n  parent: Model.hasOne('parent'),\n  children: Model.hasMany('children'),\n  defaultSort: Model.attribute('defaultSort'),\n  isChild: Model.attribute('isChild'),\n  isHidden: Model.attribute('isHidden'),\n\n  discussionCount: Model.attribute('discussionCount'),\n  lastPostedAt: Model.attribute('lastPostedAt', Model.transformDate),\n  lastPostedDiscussion: Model.hasOne('lastPostedDiscussion'),\n\n  isRestricted: Model.attribute('isRestricted'),\n  canStartDiscussion: Model.attribute('canStartDiscussion'),\n  canAddToDiscussion: Model.attribute('canAddToDiscussion'),\n\n  isPrimary: computed('position', 'parent', (position, parent) => position !== null && parent === false)\n}) {}\n","module.exports = flarum.core.compat['utils/extract'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/DiscussionComposer'];","module.exports = flarum.core.compat['utils/mixin'];","module.exports = flarum.core.compat['utils/computed'];","module.exports = flarum.core.compat['components/Modal'];","import sortTags from './utils/sortTags';\nimport Tag from './models/Tag';\nimport tagsLabel from './helpers/tagsLabel';\nimport tagIcon from './helpers/tagIcon';\nimport tagLabel from './helpers/tagLabel';\n\nexport default {\n  'tags/utils/sortTags': sortTags,\n  'tags/models/Tag': Tag,\n  'tags/helpers/tagsLabel': tagsLabel,\n  'tags/helpers/tagIcon': tagIcon,\n  'tags/helpers/tagLabel': tagLabel\n};\n","module.exports = flarum.core;","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = require(\"regenerator-runtime\");\n","module.exports = flarum.core.compat['components/DiscussionHero'];","module.exports = flarum.core.compat['utils/extractText'];","import Page from 'flarum/components/Page';\nimport IndexPage from 'flarum/components/IndexPage';\nimport Link from 'flarum/components/Link';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport listItems from 'flarum/helpers/listItems';\nimport humanTime from 'flarum/helpers/humanTime';\n\nimport tagIcon from '../../common/helpers/tagIcon';\nimport tagLabel from '../../common/helpers/tagLabel';\nimport sortTags from '../../common/utils/sortTags';\n\nexport default class TagsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.history.push('tags', app.translator.trans('flarum-tags.forum.header.back_to_tags_tooltip'));\n\n    this.tags = [];\n\n    const preloaded = app.preloadedApiDocument();\n\n    if (preloaded) {\n      this.tags = sortTags(preloaded.filter(tag => !tag.isChild()));\n      return;\n    }    \n\n    this.loading = true;\n\n    app.tagList.load(['children', 'lastPostedDiscussion']).then(() => {\n      this.tags = sortTags(app.store.all('tags').filter(tag => !tag.isChild()));\n\n      this.loading = false;\n\n      m.redraw();\n    });\n  }\n\n  view() {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    const pinned = this.tags.filter(tag => tag.position() !== null);\n    const cloud = this.tags.filter(tag => tag.position() === null);\n\n    return (\n      <div className=\"TagsPage\">\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <nav className=\"TagsPage-nav IndexPage-nav sideNav\">\n            <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\n          </nav>\n\n          <div className=\"TagsPage-content sideNavOffset\">\n            <ul className=\"TagTiles\">\n              {pinned.map(tag => {\n                const lastPostedDiscussion = tag.lastPostedDiscussion();\n                const children = sortTags(tag.children() || []);\n\n                return (\n                  <li className={'TagTile ' + (tag.color() ? 'colored' : '')}\n                    style={{backgroundColor: tag.color()}}>\n                    <Link className=\"TagTile-info\" href={app.route.tag(tag)}>\n                      {tag.icon() && tagIcon(tag, {}, { useColor: false })}\n                      <h3 className=\"TagTile-name\">{tag.name()}</h3>\n                      <p className=\"TagTile-description\">{tag.description()}</p>\n                      {children\n                        ? (\n                          <div className=\"TagTile-children\">\n                            {children.map(child => [\n                              <Link href={app.route.tag(child)}>\n                                {child.name()}\n                              </Link>,\n                              ' '\n                            ])}\n                          </div>\n                        ) : ''}\n                    </Link>\n                    {lastPostedDiscussion\n                      ? (\n                        <Link className=\"TagTile-lastPostedDiscussion\"\n                          href={app.route.discussion(lastPostedDiscussion, lastPostedDiscussion.lastPostNumber())}\n                          >\n                          <span className=\"TagTile-lastPostedDiscussion-title\">{lastPostedDiscussion.title()}</span>\n                          {humanTime(lastPostedDiscussion.lastPostedAt())}\n                        </Link>\n                      ) : (\n                        <span className=\"TagTile-lastPostedDiscussion\"/>\n                      )}\n                  </li>\n                );\n              })}\n            </ul>\n\n            {cloud.length ? (\n              <div className=\"TagCloud\">\n                {cloud.map(tag => [\n                  tagLabel(tag, {link: true}),\n                  ' ',\n                ])}\n              </div>\n            ) : ''}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    app.setTitle(app.translator.trans('flarum-tags.forum.all_tags.meta_title_text'));\n    app.setTitleCount(0);\n  }\n}\n","import EventPost from 'flarum/components/EventPost';\nimport tagsLabel from '../../common/helpers/tagsLabel';\n\nexport default class DiscussionTaggedPost extends EventPost {\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    const oldTags = attrs.post.content()[0];\n    const newTags = attrs.post.content()[1];\n\n    function diffTags(tags1, tags2) {\n      return tags1\n        .filter(tag => tags2.indexOf(tag) === -1)\n        .map(id => app.store.getById('tags', id));\n    }\n\n    attrs.tagsAdded = diffTags(newTags, oldTags);\n    attrs.tagsRemoved = diffTags(oldTags, newTags);\n  }\n\n  icon() {\n    return 'fas fa-tag';\n  }\n\n  descriptionKey() {\n    if (this.attrs.tagsAdded.length) {\n      if (this.attrs.tagsRemoved.length) {\n        return 'flarum-tags.forum.post_stream.added_and_removed_tags_text';\n      }\n\n      return 'flarum-tags.forum.post_stream.added_tags_text';\n    }\n\n    return 'flarum-tags.forum.post_stream.removed_tags_text';\n  }\n\n  descriptionData() {\n    const data = {};\n\n    if (this.attrs.tagsAdded.length) {\n      data.tagsAdded = app.translator.trans('flarum-tags.forum.post_stream.tags_text', {\n        tags: tagsLabel(this.attrs.tagsAdded, {link: true}),\n        count: this.attrs.tagsAdded.length\n      });\n    }\n\n    if (this.attrs.tagsRemoved.length) {\n      data.tagsRemoved = app.translator.trans('flarum-tags.forum.post_stream.tags_text', {\n        tags: tagsLabel(this.attrs.tagsRemoved, {link: true}),\n        count: this.attrs.tagsRemoved.length\n      });\n    }\n\n    return data;\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default class TagListState {\n    constructor() {\n        this.loadedIncludes = new Set();\n    }\n\n    async load(includes = []) {\n        const unloadedIncludes = includes.filter(include => !this.loadedIncludes.has(include));\n\n        if (unloadedIncludes.length === 0) {\n            return Promise.resolve(app.store.all('tags'));\n        }\n\n        return app.store\n            .find('tags', { include: 'parent,lastPostedDiscussion' })\n            .then(val => {\n                unloadedIncludes.forEach(include => this.loadedIncludes.add(include));\n                return val;\n            });\n    }\n}","import Link from 'flarum/components/Link';\nimport LinkButton from 'flarum/components/LinkButton';\nimport classList from 'flarum/utils/classList';\nimport tagIcon from '../../common/helpers/tagIcon';\n\nexport default class TagLinkButton extends LinkButton {\n  view(vnode) {\n    const tag = this.attrs.model;\n    const active = this.constructor.isActive(this.attrs);\n    const description = tag && tag.description();\n    const className = classList([\n      'TagLinkButton',\n      'hasIcon',\n      this.attrs.className,\n      tag.isChild() && 'child',\n    ]);\n\n    return (\n      <Link className={className} href={this.attrs.route}\n        style={active && tag ? {color: tag.color()} : ''}\n        title={description || ''}>\n        {tagIcon(tag, {className: 'Button-icon'})}\n        <span className=\"Button-label\">\n          {tag ? tag.name() : app.translator.trans('flarum-tags.forum.index.untagged_link')}\n        </span>\n      </Link>\n    );\n  }\n\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    const tag = attrs.model;\n\n    attrs.params.tags = tag ? tag.slug() : 'untagged';\n    attrs.route = app.route('tag', attrs.params);\n  }\n}\n","import { extend } from 'flarum/extend';\nimport IndexPage from 'flarum/components/IndexPage';\nimport Separator from 'flarum/components/Separator';\nimport LinkButton from 'flarum/components/LinkButton';\n\nimport TagLinkButton from './components/TagLinkButton';\nimport TagsPage from './components/TagsPage';\nimport sortTags from '../common/utils/sortTags';\n\nexport default function() {\n  // Add a link to the tags page, as well as a list of all the tags,\n  // to the index page's sidebar.\n  extend(IndexPage.prototype, 'navItems', function (items) {\n    items.add('tags', <LinkButton icon=\"fas fa-th-large\" href={app.route('tags')}>\n      {app.translator.trans('flarum-tags.forum.index.tags_link')}\n    </LinkButton>\n      , -10);\n\n    if (app.current.matches(TagsPage)) return;\n\n    items.add('separator', Separator.component(), -12);\n\n    const params = app.search.stickyParams();\n    const tags = app.store.all('tags');\n    const currentTag = this.currentTag();\n\n    const addTag = tag => {\n      let active = currentTag === tag;\n\n      if (!active && currentTag) {\n        active = currentTag.parent() === tag;\n      }\n\n      // tag.name() is passed here as children even though it isn't used directly\n      // because when we need to get the active child in SelectDropdown, we need to\n      // use its children to populate the dropdown. The problem here is that `view`\n      // on TagLinkButton is only called AFTER SelectDropdown, so no children are available\n      // for SelectDropdown to use at the time.\n      items.add('tag' + tag.id(), TagLinkButton.component({model: tag, params, active}, tag?.name()), -14);\n    };\n\n    sortTags(tags)\n      .filter(tag => tag.position() !== null && (!tag.isChild() || (currentTag && (tag.parent() === currentTag || tag.parent() === currentTag.parent()))))\n      .forEach(addTag);\n\n    const more = tags\n      .filter(tag => tag.position() === null)\n      .sort((a, b) => b.discussionCount() - a.discussionCount());\n\n    more.splice(0, 3).forEach(addTag);\n\n    if (more.length) {\n      items.add('moreTags', <LinkButton href={app.route('tags')}>\n        {app.translator.trans('flarum-tags.forum.index.more_link')}\n      </LinkButton>, -16)\n    }\n  });\n}\n","import Component from 'flarum/Component';\nimport tagIcon from '../../common/helpers/tagIcon';\n\nexport default class TagHero extends Component {\n  view() {\n    const tag = this.attrs.model;\n    const color = tag.color();\n\n    return (\n      <header className={'Hero TagHero' + (color ? ' TagHero--colored' : '')}\n        style={color ? {color: '#fff', backgroundColor: color} : ''}>\n        <div className=\"container\">\n          <div className=\"containerNarrow\">\n            <h2 className=\"Hero-title\">{tag.icon() && tagIcon(tag, {}, { useColor: false })} {tag.name()}</h2>\n            <div className=\"Hero-subtitle\">{tag.description()}</div>\n          </div>\n        </div>\n      </header>\n    );\n  }\n}\n","import { extend, override } from 'flarum/extend';\nimport IndexPage from 'flarum/components/IndexPage';\nimport DiscussionListState from 'flarum/states/DiscussionListState';\nimport GlobalSearchState from 'flarum/states/GlobalSearchState';\n\nimport TagHero from './components/TagHero';\n\nexport default function() {\n  IndexPage.prototype.currentTag = function() {\n    if (this.currentActiveTag) {\n      return this.currentActiveTag;\n    }\n\n    const slug = app.search.params().tags;\n    let tag = null;\n\n    if (slug) {\n      tag = app.store.getBy('tags', 'slug', slug);\n    }\n\n    if (slug && !tag || (tag && !tag.isChild() && !tag.children())) {\n      // Unlike the backend, no need to fetch parent.children because if we're on\n      // a child tag page, then either:\n      //    - We loaded in that child tag (and its siblings) in the API document\n      //    - We first navigated to the current tag's parent, which would have loaded in the current tag's siblings.\n      app.store.find('tags', slug, { include: 'children,children.parent,parent,state'}).then(() => {\n        this.currentActiveTag = app.store.getBy('tags', 'slug', slug);\n\n        m.redraw();\n      });\n    }\n\n    if (tag) {\n      this.currentActiveTag = tag;\n      return this.currentActiveTag;\n    }\n  };\n\n  // If currently viewing a tag, insert a tag hero at the top of the view.\n  override(IndexPage.prototype, 'hero', function(original) {\n    const tag = this.currentTag();\n\n    if (tag) return <TagHero model={tag} />;\n\n    return original();\n  });\n\n  extend(IndexPage.prototype, 'view', function(vdom) {\n    const tag = this.currentTag();\n\n    if (tag) vdom.attrs.className += ' IndexPage--tag'+tag.id();\n  });\n\n  extend(IndexPage.prototype, 'setTitle', function() {\n    const tag = this.currentTag();\n\n    if (tag) {\n      app.setTitle(tag.name());\n    }\n  });\n\n  // If currently viewing a tag, restyle the 'new discussion' button to use\n  // the tag's color, and disable if the user isn't allowed to edit.\n  extend(IndexPage.prototype, 'sidebarItems', function(items) {\n    const tag = this.currentTag();\n\n    if (tag) {\n      const color = tag.color();\n      const canStartDiscussion = tag.canStartDiscussion() || !app.session.user;\n\n      if (color) {\n        items.get('newDiscussion').attrs.style = {backgroundColor: color};\n      }\n\n      items.get('newDiscussion').attrs.disabled = !canStartDiscussion;\n      items.get('newDiscussion').children = app.translator.trans(canStartDiscussion ? 'core.forum.index.start_discussion_button' : 'core.forum.index.cannot_start_discussion_button');\n    }\n  });\n\n  // Add a parameter for the global search state to pass on to the\n  // DiscussionListState that will let us filter discussions by tag.\n  extend(GlobalSearchState.prototype, 'params', function(params) {\n    params.tags = m.route.param('tags');\n  });\n\n  // Translate that parameter into a gambit appended to the search query.\n  extend(DiscussionListState.prototype, 'requestParams', function(params) {\n    params.include.push('tags');\n\n    if (this.params.tags) {\n      params.filter.tag = this.params.tags;\n      // TODO: replace this with a more robust system.\n      const q = params.filter.q;\n      if (q) {\n        params.filter.q = `${q} tag:${this.params.tags}`;\n      }\n    }\n  });\n}\n","import { extend } from 'flarum/extend';\nimport DiscussionListItem from 'flarum/components/DiscussionListItem';\nimport DiscussionHero from 'flarum/components/DiscussionHero';\n\nimport tagsLabel from '../common/helpers/tagsLabel';\nimport sortTags from '../common/utils/sortTags';\n\nexport default function() {\n  // Add tag labels to each discussion in the discussion list.\n  extend(DiscussionListItem.prototype, 'infoItems', function(items) {\n    const tags = this.attrs.discussion.tags();\n\n    if (tags && tags.length) {\n      items.add('tags', tagsLabel(tags), 10);\n    }\n  });\n\n  // Restyle a discussion's hero to use its first tag's color.\n  extend(DiscussionHero.prototype, 'view', function(view) {\n    const tags = sortTags(this.attrs.discussion.tags());\n\n    if (tags && tags.length) {\n      const color = tags[0].color();\n      if (color) {\n        view.attrs.style = {backgroundColor: color};\n        view.attrs.className += ' DiscussionHero--colored';\n      }\n    }\n  });\n\n  // Add a list of a discussion's tags to the discussion hero, displayed\n  // before the title. Put the title on its own line.\n  extend(DiscussionHero.prototype, 'items', function(items) {\n    const tags = this.attrs.discussion.tags();\n\n    if (tags && tags.length) {\n      items.add('tags', tagsLabel(tags, {link: true}), 5);\n    }\n  });\n}\n","export default function getSelectableTags(discussion) {\n  let tags = app.store.all('tags');\n\n  if (discussion) {\n    tags = tags.filter(tag => tag.canAddToDiscussion() || discussion.tags().indexOf(tag) !== -1);\n  } else {\n    tags = tags.filter(tag => tag.canStartDiscussion());\n  }\n\n  return tags;\n}\n","import Modal from 'flarum/components/Modal';\nimport DiscussionPage from 'flarum/components/DiscussionPage';\nimport Button from 'flarum/components/Button';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport highlight from 'flarum/helpers/highlight';\nimport classList from 'flarum/utils/classList';\nimport extractText from 'flarum/utils/extractText';\nimport KeyboardNavigatable from 'flarum/utils/KeyboardNavigatable';\nimport Stream from 'flarum/utils/Stream';\n\nimport tagLabel from '../../common/helpers/tagLabel';\nimport tagIcon from '../../common/helpers/tagIcon';\nimport sortTags from '../../common/utils/sortTags';\nimport getSelectableTags from '../utils/getSelectableTags';\n\nexport default class TagDiscussionModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.tagsLoading = true;\n\n    this.selected = [];\n    this.filter = Stream('');\n    this.focused = false;\n\n    this.minPrimary = app.forum.attribute('minPrimaryTags');\n    this.maxPrimary = app.forum.attribute('maxPrimaryTags');\n    this.minSecondary = app.forum.attribute('minSecondaryTags');\n    this.maxSecondary = app.forum.attribute('maxSecondaryTags');\n\n    this.navigator = new KeyboardNavigatable();\n    this.navigator\n      .onUp(() => this.setIndex(this.getCurrentNumericIndex() - 1, true))\n      .onDown(() => this.setIndex(this.getCurrentNumericIndex() + 1, true))\n      .onSelect(this.select.bind(this))\n      .onRemove(() => this.selected.splice(this.selected.length - 1, 1));\n\n    app.tagList.load(['parent']).then(() => {\n      this.tagsLoading = false;\n\n      this.tags = sortTags(getSelectableTags(this.attrs.discussion));\n\n      if (this.attrs.selectedTags) {\n        this.attrs.selectedTags.map(this.addTag.bind(this));\n      } else if (this.attrs.discussion) {\n        this.attrs.discussion.tags().map(this.addTag.bind(this));\n      }\n\n      this.index = this.tags[0].id();\n\n      m.redraw();\n    });\n  }\n\n  primaryCount() {\n    return this.selected.filter(tag => tag.isPrimary()).length;\n  }\n\n  secondaryCount() {\n    return this.selected.filter(tag => !tag.isPrimary()).length;\n  }\n\n  /**\n   * Add the given tag to the list of selected tags.\n   *\n   * @param {Tag} tag\n   */\n  addTag(tag) {\n    if (!tag.canStartDiscussion()) return;\n\n    // If this tag has a parent, we'll also need to add the parent tag to the\n    // selected list if it's not already in there.\n    const parent = tag.parent();\n    if (parent && this.selected.indexOf(parent) === -1) {\n      this.selected.push(parent);\n    }\n\n    if (this.selected.indexOf(tag) === -1) {\n      this.selected.push(tag);\n    }\n  }\n\n  /**\n   * Remove the given tag from the list of selected tags.\n   *\n   * @param {Tag} tag\n   */\n  removeTag(tag) {\n    const index = this.selected.indexOf(tag);\n    if (index !== -1) {\n      this.selected.splice(index, 1);\n\n      // Look through the list of selected tags for any tags which have the tag\n      // we just removed as their parent. We'll need to remove them too.\n      this.selected\n        .filter(selected => selected.parent() === tag)\n        .forEach(this.removeTag.bind(this));\n    }\n  }\n\n  className() {\n    return 'TagDiscussionModal';\n  }\n\n  title() {\n    return this.attrs.discussion\n      ? app.translator.trans('flarum-tags.forum.choose_tags.edit_title', {title: <em>{this.attrs.discussion.title()}</em>})\n      : app.translator.trans('flarum-tags.forum.choose_tags.title');\n  }\n\n  getInstruction(primaryCount, secondaryCount) {\n    if (primaryCount < this.minPrimary) {\n      const remaining = this.minPrimary - primaryCount;\n      return app.translator.trans('flarum-tags.forum.choose_tags.choose_primary_placeholder', {count: remaining});\n    } else if (secondaryCount < this.minSecondary) {\n      const remaining = this.minSecondary - secondaryCount;\n      return app.translator.trans('flarum-tags.forum.choose_tags.choose_secondary_placeholder', {count: remaining});\n    }\n\n    return '';\n  }\n\n  content() {\n    if (this.tagsLoading) {\n      return <LoadingIndicator />;\n    }\n  \n    let tags = this.tags;\n    const filter = this.filter().toLowerCase();\n    const primaryCount = this.primaryCount();\n    const secondaryCount = this.secondaryCount();\n\n    // Filter out all child tags whose parents have not been selected. This\n    // makes it impossible to select a child if its parent hasn't been selected.\n    tags = tags.filter(tag => {\n      const parent = tag.parent();\n      return parent === false || this.selected.indexOf(parent) !== -1;\n    });\n\n    // If the number of selected primary/secondary tags is at the maximum, then\n    // we'll filter out all other tags of that type.\n    if (primaryCount >= this.maxPrimary) {\n      tags = tags.filter(tag => !tag.isPrimary() || this.selected.indexOf(tag) !== -1);\n    }\n\n    if (secondaryCount >= this.maxSecondary) {\n      tags = tags.filter(tag => tag.isPrimary() || this.selected.indexOf(tag) !== -1);\n    }\n\n    // If the user has entered text in the filter input, then filter by tags\n    // whose name matches what they've entered.\n    if (filter) {\n      tags = tags.filter(tag => tag.name().substr(0, filter.length).toLowerCase() === filter);\n    }\n\n    if (tags.indexOf(this.index) === -1) this.index = tags[0];\n\n    const inputWidth = Math.max(extractText(this.getInstruction(primaryCount, secondaryCount)).length, this.filter().length);\n\n    return [\n      <div className=\"Modal-body\">\n        <div className=\"TagDiscussionModal-form\">\n          <div className=\"TagDiscussionModal-form-input\">\n            <div className={'TagsInput FormControl ' + (this.focused ? 'focus' : '')}\n              onclick={() => this.$('.TagsInput input').focus()}\n            >\n              <span className=\"TagsInput-selected\">\n                {this.selected.map(tag =>\n                  <span className=\"TagsInput-tag\" onclick={() => {\n                    this.removeTag(tag);\n                    this.onready();\n                  }}>\n                    {tagLabel(tag)}\n                  </span>\n                )}\n              </span>\n              <input className=\"FormControl\"\n                placeholder={extractText(this.getInstruction(primaryCount, secondaryCount))}\n                bidi={this.filter}\n                style={{ width: inputWidth + 'ch' }}\n                onkeydown={this.navigator.navigate.bind(this.navigator)}\n                onfocus={() => this.focused = true}\n                onblur={() => this.focused = false}/>\n            </div>\n          </div>\n          <div className=\"TagDiscussionModal-form-submit App-primaryControl\">\n            <Button type=\"submit\" className=\"Button Button--primary\" disabled={!this.meetsRequirements(primaryCount, secondaryCount)} icon=\"fas fa-check\">\n              {app.translator.trans('flarum-tags.forum.choose_tags.submit_button')}\n            </Button>\n          </div>\n        </div>\n      </div>,\n\n      <div className=\"Modal-footer\">\n        <ul className=\"TagDiscussionModal-list SelectTagList\">\n          {tags\n            .filter(tag => filter || !tag.parent() || this.selected.indexOf(tag.parent()) !== -1)\n            .map(tag => (\n              <li data-index={tag.id()}\n                className={classList({\n                  pinned: tag.position() !== null,\n                  child: !!tag.parent(),\n                  colored: !!tag.color(),\n                  selected: this.selected.indexOf(tag) !== -1,\n                  active: this.index === tag\n                })}\n                style={{color: tag.color()}}\n                onmouseover={() => this.index = tag}\n                onclick={this.toggleTag.bind(this, tag)}\n              >\n                {tagIcon(tag)}\n                <span className=\"SelectTagListItem-name\">\n                  {highlight(tag.name(), filter)}\n                </span>\n                {tag.description()\n                  ? (\n                    <span className=\"SelectTagListItem-description\">\n                      {tag.description()}\n                    </span>\n                  ) : ''}\n              </li>\n            ))}\n        </ul>\n      </div>\n    ];\n  }\n\n  meetsRequirements(primaryCount, secondaryCount) {\n    if (app.forum.attribute('canBypassTagCounts')) {\n      return true;\n    }\n\n    return primaryCount >= this.minPrimary && secondaryCount >= this.minSecondary;\n  }\n\n  toggleTag(tag) {\n    const index = this.selected.indexOf(tag);\n\n    if (index !== -1) {\n      this.removeTag(tag);\n    } else {\n      this.addTag(tag);\n    }\n\n    if (this.filter()) {\n      this.filter('');\n      this.index = this.tags[0];\n    }\n\n    this.onready();\n  }\n\n  select(e) {\n    // Ctrl + Enter submits the selection, just Enter completes the current entry\n    if (e.metaKey || e.ctrlKey || this.selected.indexOf(this.index) !== -1) {\n      if (this.selected.length) {\n        // The DOM submit method doesn't emit a `submit event, so we\n        // simulate a manual submission so our `onsubmit` logic is run.\n        this.$('button[type=\"submit\"]').click();\n      }\n    } else {\n      this.getItem(this.index)[0].dispatchEvent(new Event('click'));\n    }\n  }\n\n  selectableItems() {\n    return this.$('.TagDiscussionModal-list > li');\n  }\n\n  getCurrentNumericIndex() {\n    return this.selectableItems().index(\n      this.getItem(this.index)\n    );\n  }\n\n  getItem(index) {\n    return this.selectableItems().filter(`[data-index=\"${index.id()}\"]`);\n  }\n\n  setIndex(index, scrollToItem) {\n    const $items = this.selectableItems();\n    const $dropdown = $items.parent();\n\n    if (index < 0) {\n      index = $items.length - 1;\n    } else if (index >= $items.length) {\n      index = 0;\n    }\n\n    const $item = $items.eq(index);\n\n    this.index = app.store.getById('tags', $item.attr('data-index'));\n\n    m.redraw();\n\n    if (scrollToItem) {\n      const dropdownScroll = $dropdown.scrollTop();\n      const dropdownTop = $dropdown.offset().top;\n      const dropdownBottom = dropdownTop + $dropdown.outerHeight();\n      const itemTop = $item.offset().top;\n      const itemBottom = itemTop + $item.outerHeight();\n\n      let scrollTop;\n      if (itemTop < dropdownTop) {\n        scrollTop = dropdownScroll - dropdownTop + itemTop - parseInt($dropdown.css('padding-top'), 10);\n      } else if (itemBottom > dropdownBottom) {\n        scrollTop = dropdownScroll - dropdownBottom + itemBottom + parseInt($dropdown.css('padding-bottom'), 10);\n      }\n\n      if (typeof scrollTop !== 'undefined') {\n        $dropdown.stop(true).animate({scrollTop}, 100);\n      }\n    }\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    const discussion = this.attrs.discussion;\n    const tags = this.selected;\n\n    if (discussion) {\n      discussion.save({relationships: {tags}})\n        .then(() => {\n          if (app.current.matches(DiscussionPage)) {\n            app.current.get('stream').update();\n          }\n          m.redraw();\n        });\n    }\n\n    if (this.attrs.onsubmit) this.attrs.onsubmit(tags);\n\n    this.hide();\n  }\n}\n","import { extend } from 'flarum/extend';\nimport DiscussionControls from 'flarum/utils/DiscussionControls';\nimport Button from 'flarum/components/Button';\n\nimport TagDiscussionModal from './components/TagDiscussionModal';\n\nexport default function() {\n  // Add a control allowing the discussion to be moved to another category.\n  extend(DiscussionControls, 'moderationControls', function(items, discussion) {\n    if (discussion.canTag()) {\n      items.add('tags', <Button icon=\"fas fa-tag\" onclick={() => app.modal.show(TagDiscussionModal, { discussion })}>\n        {app.translator.trans('flarum-tags.forum.discussion_controls.edit_tags_button')}\n      </Button>);\n    }\n  });\n}\n","import { extend, override } from 'flarum/extend';\nimport IndexPage from 'flarum/components/IndexPage';\nimport DiscussionComposer from 'flarum/components/DiscussionComposer';\nimport classList from 'flarum/utils/classList';\n\nimport TagDiscussionModal from './components/TagDiscussionModal';\nimport tagsLabel from '../common/helpers/tagsLabel';\nimport getSelectableTags from './utils/getSelectableTags';\n\nexport default function () {\n  extend(IndexPage.prototype, 'newDiscussionAction', function (promise) {\n    // From `addTagFilter\n    const tag = this.currentTag();\n\n    if (tag) {\n      const parent = tag.parent();\n      const tags = parent ? [parent, tag] : [tag];\n      promise.then(composer => composer.fields.tags = tags);\n    } else {\n      app.composer.fields.tags = [];\n    }\n  });\n\n\n  extend(DiscussionComposer.prototype, 'oninit', function () {\n    app.tagList.load(['parent']).then(() => m.redraw())\n  });\n\n  // Add tag-selection abilities to the discussion composer.\n  DiscussionComposer.prototype.chooseTags = function () {\n    const selectableTags = getSelectableTags();\n\n    if (!selectableTags.length) return;\n\n    app.modal.show(TagDiscussionModal, {\n      selectedTags: (this.composer.fields.tags || []).slice(0),\n      onsubmit: tags => {\n        this.composer.fields.tags = tags;\n        this.$('textarea').focus();\n      }\n    });\n  };\n\n  // Add a tag-selection menu to the discussion composer's header, after the\n  // title.\n  extend(DiscussionComposer.prototype, 'headerItems', function (items) {\n    const tags = this.composer.fields.tags || [];\n    const selectableTags = getSelectableTags();\n\n    items.add('tags', (\n      <a className={classList(['DiscussionComposer-changeTags', !selectableTags.length && 'disabled'])} onclick={this.chooseTags.bind(this)}>\n        {tags.length\n          ? tagsLabel(tags)\n          : <span className=\"TagLabel untagged\">{app.translator.trans('flarum-tags.forum.composer_discussion.choose_tags_link')}</span>}\n      </a>\n    ), 10);\n  });\n\n  override(DiscussionComposer.prototype, 'onsubmit', function (original) {\n    const chosenTags = this.composer.fields.tags || [];\n    const chosenPrimaryTags = chosenTags.filter(tag => tag.position() !== null && !tag.isChild());\n    const chosenSecondaryTags = chosenTags.filter(tag => tag.position() === null);\n    const selectableTags = getSelectableTags();\n\n    if ((!chosenTags.length\n          || (chosenPrimaryTags.length < app.forum.attribute('minPrimaryTags'))\n          || (chosenSecondaryTags.length < app.forum.attribute('minSecondaryTags'))\n        ) && selectableTags.length) {\n      app.modal.show(TagDiscussionModal, {\n          selectedTags: chosenTags,\n          onsubmit: tags => {\n            this.composer.fields.tags = tags;\n            original();\n          }\n        });\n    } else {\n      original();\n    }\n  });\n\n  // Add the selected tags as data to submit to the server.\n  extend(DiscussionComposer.prototype, 'data', function (data) {\n    data.relationships = data.relationships || {};\n    data.relationships.tags = this.composer.fields.tags;\n  });\n}\n","import compat from '../common/compat';\n\nimport addTagFilter from './addTagFilter';\nimport addTagControl from './addTagControl';\nimport TagHero from './components/TagHero';\nimport TagDiscussionModal from './components/TagDiscussionModal';\nimport TagsPage from './components/TagsPage';\nimport DiscussionTaggedPost from './components/DiscussionTaggedPost';\nimport TagLinkButton from './components/TagLinkButton';\nimport addTagList from './addTagList';\nimport addTagLabels from './addTagLabels';\nimport addTagComposer from './addTagComposer';\n\nexport default Object.assign(compat, {\n  'tags/addTagFilter': addTagFilter,\n  'tags/addTagControl': addTagControl,\n  'tags/components/TagHero': TagHero,\n  'tags/components/TagDiscussionModal': TagDiscussionModal,\n  'tags/components/TagsPage': TagsPage,\n  'tags/components/DiscussionTaggedPost': DiscussionTaggedPost,\n  'tags/components/TagLinkButton': TagLinkButton,\n  'tags/addTagList': addTagList,\n  'tags/addTagLabels': addTagLabels,\n  'tags/addTagComposer': addTagComposer,\n});\n","import Model from 'flarum/Model';\nimport Discussion from 'flarum/models/Discussion';\nimport IndexPage from 'flarum/components/IndexPage';\n\nimport Tag from '../common/models/Tag';\nimport TagsPage from './components/TagsPage';\nimport DiscussionTaggedPost from './components/DiscussionTaggedPost';\n\nimport TagListState from './states/TagListState';\n\nimport addTagList from './addTagList';\nimport addTagFilter from './addTagFilter';\nimport addTagLabels from './addTagLabels';\nimport addTagControl from './addTagControl';\nimport addTagComposer from './addTagComposer';\n\napp.initializers.add('flarum-tags', function(app) {\n  app.routes.tags = {path: '/tags', component: TagsPage };\n  app.routes.tag = {path: '/t/:tags', component: IndexPage };\n\n  app.route.tag = tag => app.route('tag', {tags: tag.slug()});\n\n  app.postComponents.discussionTagged = DiscussionTaggedPost;\n\n  app.store.models.tags = Tag;\n\n  app.tagList = new TagListState();\n\n  Discussion.prototype.tags = Model.hasMany('tags');\n  Discussion.prototype.canTag = Model.attribute('canTag');\n\n  addTagList();\n  addTagFilter();\n  addTagLabels();\n  addTagControl();\n  addTagComposer();\n});\n\n\n// Expose compat API\nimport tagsCompat from './compat';\nimport { compat } from '@flarum/core/forum';\n\nObject.assign(compat, tagsCompat);\n","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['components/EventPost'];","module.exports = flarum.core.compat['components/Separator'];","module.exports = flarum.core.compat['states/DiscussionListState'];","module.exports = flarum.core.compat['states/GlobalSearchState'];","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['components/DiscussionListItem'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['helpers/highlight'];","module.exports = flarum.core.compat['utils/KeyboardNavigatable'];","/*\n * This file is part of Flarum.\n *\n * (c) Toby Zerner <toby.zerner@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nexport * from './src/common';\nexport * from './src/forum';\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() {\n  return this || (typeof self === \"object\" && self);\n})() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() {\n    return this || (typeof self === \"object\" && self);\n  })() || Function(\"return this\")()\n);\n"],"sourceRoot":""}