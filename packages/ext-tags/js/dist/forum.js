module.exports=function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=91)}([function(t,n){t.exports=flarum.core.compat.Model},function(t,n){t.exports=flarum.core.compat.extend},function(t,n,e){"use strict";e.d(n,"a",function(){return a});var r=e(30),o=e.n(r);function a(t,n){t.prototype=o()(n.prototype),t.prototype.constructor=t,t.__proto__=n}},function(t,n,e){"use strict";function r(t){return t.slice(0).sort(function(t,n){var e=t.position(),r=n.position();if(null===e&&null===r)return n.discussionsCount()-t.discussionsCount();if(null===r)return-1;if(null===e)return 1;var o=t.parent(),a=n.parent();return o===a?e-r:o&&a?o.position()-a.position():o?o===n?1:o.position()-r:a?a===t?-1:e-a.position():0})}e.d(n,"a",function(){return r})},function(t,n){t.exports=flarum.core.compat["components/IndexPage"]},function(t,n,e){"use strict";e.d(n,"a",function(){return a});var r=e(13),o=e.n(r);function a(t,n){void 0===n&&(n={}),n.style=n.style||{},n.className="TagLabel "+(n.className||"");var e=o()(n,"link");if(t){var r=t.color();r&&(n.style.backgroundColor=n.style.color=r,n.className+=" colored"),e&&(n.title=t.description()||"",n.href=app.route("tag",{tags:t.slug()}),n.config=m.route)}else n.className+=" untagged";return m(e?"a":"span",n,m("span",{className:"TagLabel-text"},t?t.name():app.translator.trans("flarum-tags.lib.deleted_tag_text")))}},function(t,n){t.exports=flarum.core.compat["components/Button"]},function(t,n,e){"use strict";function r(t,n){return void 0===n&&(n={}),n.className="icon TagIcon "+(n.className||""),t?(n.style=n.style||{},n.style.backgroundColor=t.color()):n.className+=" untagged",m("span",n)}e.d(n,"a",function(){return r})},function(t,n,e){t.exports=!e(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=flarum.core.compat["utils/extract"]},function(t,n,e){"use strict";e.d(n,"a",function(){return p});var r=e(2),o=e(0),a=e.n(o),s=e(29),i=e.n(s),c=e(28),u=e.n(c),p=function(t){function n(){return t.apply(this,arguments)||this}return Object(r.a)(n,t),n}(i()(a.a,{name:a.a.attribute("name"),slug:a.a.attribute("slug"),description:a.a.attribute("description"),color:a.a.attribute("color"),backgroundUrl:a.a.attribute("backgroundUrl"),backgroundMode:a.a.attribute("backgroundMode"),position:a.a.attribute("position"),parent:a.a.hasOne("parent"),defaultSort:a.a.attribute("defaultSort"),isChild:a.a.attribute("isChild"),isHidden:a.a.attribute("isHidden"),discussionsCount:a.a.attribute("discussionsCount"),lastTime:a.a.attribute("lastTime",a.a.transformDate),lastDiscussion:a.a.hasOne("lastDiscussion"),isRestricted:a.a.attribute("isRestricted"),canStartDiscussion:a.a.attribute("canStartDiscussion"),canAddToDiscussion:a.a.attribute("canAddToDiscussion"),isPrimary:u()("position","parent",function(t,n){return null!==t&&!1===n})}))},,function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=flarum.core.compat["components/DiscussionComposer"]},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,e){var r=e(45)("keys"),o=e(43);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(33),o=e(32);t.exports=function(t){return r(o(t))}},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(11),o=e(9).document,a=r(o)&&r(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,n,e){var r=e(12),o=e(53),a=e(52),s=Object.defineProperty;n.f=e(8)?Object.defineProperty:function(t,n,e){if(r(t),n=a(n,!0),r(e),o)try{return s(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n){},function(t,n){t.exports=flarum.core.compat["components/Modal"]},function(t,n){t.exports=flarum.core.compat["components/Page"]},function(t,n){t.exports=flarum.core.compat["utils/computed"]},function(t,n){t.exports=flarum.core.compat["utils/mixin"]},function(t,n,e){t.exports=e(42)},function(t,n){t.exports=flarum.core.compat["components/LinkButton"]},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,e){var r=e(49);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(50),o=e(18);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(9),o=e(10),a=e(56),s=e(54),i=e(22),c=function(t,n,e){var u,p,l,f=t&c.F,m=t&c.G,d=t&c.S,g=t&c.P,h=t&c.B,v=t&c.W,y=m?o:o[n]||(o[n]={}),b=y.prototype,x=m?r:d?r[n]:(r[n]||{}).prototype;for(u in m&&(e=n),e)(p=!f&&x&&void 0!==x[u])&&i(y,u)||(l=p?x[u]:e[u],y[u]=m&&"function"!=typeof x[u]?e[u]:h&&p?a(l,r):v&&x[u]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n.prototype=t.prototype,n}(l):g&&"function"==typeof l?a(Function.call,l):l,g&&((y.virtual||(y.virtual={}))[u]=l,t&c.R&&b&&!b[u]&&s(b,u,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){t.exports=flarum.core.compat["components/DiscussionPage"]},function(t,n,e){t.exports=e(90)},function(t,n,e){var r=e(9).document;t.exports=r&&r.documentElement},function(t,n,e){var r=e(24),o=e(12),a=e(34);t.exports=e(8)?Object.defineProperties:function(t,n){o(t);for(var e,s=a(n),i=s.length,c=0;i>c;)r.f(t,e=s[c++],n[e]);return t}},function(t,n,e){var r=e(12),o=e(39),a=e(18),s=e(19)("IE_PROTO"),i=function(){},c=function(){var t,n=e(23)("iframe"),r=a.length;for(n.style.display="none",e(38).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[a[r]];return c()};t.exports=Object.create||function(t,n){var e;return null!==t?(i.prototype=r(t),e=new i,i.prototype=null,e[s]=t):e=c(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35);r(r.S,"Object",{create:e(40)})},function(t,n,e){e(41);var r=e(10).Object;t.exports=function(t,n){return r.create(t,n)}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){t.exports=!0},function(t,n,e){var r=e(10),o=e(9),a=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,n){return a[t]||(a[t]=void 0!==n?n:{})})("versions",[]).push({version:r.version,mode:e(44)?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,n,e){var r=e(20),o=Math.max,a=Math.min;t.exports=function(t,n){return(t=r(t))<0?o(t+n,0):a(t,n)}},function(t,n,e){var r=e(20),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){var r=e(21),o=e(47),a=e(46);t.exports=function(t){return function(n,e,s){var i,c=r(n),u=o(c.length),p=a(s,u);if(t&&e!=e){for(;u>p;)if((i=c[p++])!=i)return!0}else for(;u>p;p++)if((t||p in c)&&c[p]===e)return t||p||0;return!t&&-1}}},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(22),o=e(21),a=e(48)(!1),s=e(19)("IE_PROTO");t.exports=function(t,n){var e,i=o(t),c=0,u=[];for(e in i)e!=s&&r(i,e)&&u.push(e);for(;n.length>c;)r(i,e=n[c++])&&(~a(u,e)||u.push(e));return u}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){t.exports=!e(8)&&!e(16)(function(){return 7!=Object.defineProperty(e(23)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(24),o=e(51);t.exports=e(8)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,e){var r=e(55);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n){t.exports=flarum.core.compat["components/DiscussionHero"]},function(t,n){t.exports=flarum.core.compat["models/Discussion"]},,function(t,n,e){"use strict";var r=e(37),o=e.n(r),a=e(0),s=e.n(a),i=e(58),c=e.n(i),u=e(4),p=e.n(u),l=e(14),f=e(2),d=e(27),g=e.n(d),h=e(81),v=e.n(h),y=e(80),b=e.n(y),x=e(5),T=e(3),O=function(t){function n(){return t.apply(this,arguments)||this}Object(f.a)(n,t);var e=n.prototype;return e.init=function(){t.prototype.init.call(this),this.tags=Object(T.a)(app.store.all("tags").filter(function(t){return!t.parent()})),app.history.push("tags",app.translator.trans("flarum-tags.forum.header.back_to_tags_tooltip"))},e.view=function(){var t=this.tags.filter(function(t){return null!==t.position()}),n=this.tags.filter(function(t){return null===t.position()});return m("div",{className:"TagsPage"},p.a.prototype.hero(),m("div",{className:"container"},m("nav",{className:"TagsPage-nav IndexPage-nav sideNav",config:p.a.prototype.affixSidebar},m("ul",null,v()(p.a.prototype.sidebarItems().toArray()))),m("div",{className:"TagsPage-content sideNavOffset"},m("ul",{className:"TagTiles"},t.map(function(t){var n=t.lastDiscussion(),e=Object(T.a)(app.store.all("tags").filter(function(n){return n.parent()===t}));return m("li",{className:"TagTile "+(t.color()?"colored":""),style:{backgroundColor:t.color()}},m("a",{className:"TagTile-info",href:app.route.tag(t),config:m.route},m("h3",{className:"TagTile-name"},t.name()),m("p",{className:"TagTile-description"},t.description()),e?m("div",{className:"TagTile-children"},e.map(function(t){return[m("a",{href:app.route.tag(t),config:function(t,n){n||($(t).on("click",function(t){return t.stopPropagation()}),m.route.apply(this,arguments))}},t.name())," "]})):""),n?m("a",{className:"TagTile-lastDiscussion",href:app.route.discussion(n,n.lastPostNumber()),config:m.route},m("span",{className:"TagTile-lastDiscussion-title"},n.title()),b()(n.lastTime())):m("span",{className:"TagTile-lastDiscussion"}))})),n.length?m("div",{className:"TagCloud"},n.map(function(t){return[Object(x.a)(t,{link:!0})," "]})):"")))},n}(g.a),_=e(79),j=e.n(_),N=e(13),P=e.n(N);function w(t,n){void 0===n&&(n={});var e=[],r=P()(n,"link");return n.className="TagsLabel "+(n.className||""),t?Object(T.a)(t).forEach(function(n){(n||1===t.length)&&e.push(Object(x.a)(n,{link:r}))}):e.push(Object(x.a)()),m("span",n,e)}var C=function(t){function n(){return t.apply(this,arguments)||this}Object(f.a)(n,t),n.initProps=function(n){t.initProps.call(this,n);var e=n.post.content()[0],r=n.post.content()[1];function o(t,n){return t.filter(function(t){return-1===n.indexOf(t)}).map(function(t){return app.store.getById("tags",t)})}n.tagsAdded=o(r,e),n.tagsRemoved=o(e,r)};var e=n.prototype;return e.icon=function(){return"fas fa-tag"},e.descriptionKey=function(){return this.props.tagsAdded.length?this.props.tagsRemoved.length?"flarum-tags.forum.post_stream.added_and_removed_tags_text":"flarum-tags.forum.post_stream.added_tags_text":"flarum-tags.forum.post_stream.removed_tags_text"},e.descriptionData=function(){var t={};return this.props.tagsAdded.length&&(t.tagsAdded=app.translator.transChoice("flarum-tags.forum.post_stream.tags_text",this.props.tagsAdded.length,{tags:w(this.props.tagsAdded,{link:!0}),count:this.props.tagsAdded.length})),this.props.tagsRemoved.length&&(t.tagsRemoved=app.translator.transChoice("flarum-tags.forum.post_stream.tags_text",this.props.tagsRemoved.length,{tags:w(this.props.tagsRemoved,{link:!0}),count:this.props.tagsRemoved.length})),t},n}(j.a),I=e(1),k=e(78),S=e.n(k),D=e(31),M=e.n(D),E=e(7),L=function(t){function n(){return t.apply(this,arguments)||this}return Object(f.a)(n,t),n.prototype.view=function(){var t=this.props.tag,n=this.constructor.isActive(this.props),e=t&&t.description();return m("a",{className:"TagLinkButton hasIcon "+(t.isChild()?"child":""),href:this.props.href,config:m.route,style:n&&t?{color:t.color()}:"",title:e||""},Object(E.a)(t,{className:"Button-icon"}),this.props.children)},n.initProps=function(t){var n=t.tag;t.params.tags=n?n.slug():"untagged",t.href=app.route("tag",t.params),t.children=n?n.name():app.translator.trans("flarum-tags.forum.index.untagged_link")},n}(M.a),A=function(){Object(I.extend)(p.a.prototype,"navItems",function(t){if(t.add("tags",M.a.component({icon:"fas fa-th-large",children:app.translator.trans("flarum-tags.forum.index.tags_link"),href:app.route("tags")}),-10),!(app.current instanceof O)){t.add("separator",S.a.component(),-10);var n=this.stickyParams(),e=app.store.all("tags"),r=this.currentTag(),o=function(e){var o=r===e;!o&&r&&(o=r.parent()===e),t.add("tag"+e.id(),L.component({tag:e,params:n,active:o}),-10)};Object(T.a)(e).filter(function(t){return null!==t.position()&&(!t.isChild()||r&&(t.parent()===r||t.parent()===r.parent()))}).forEach(o);var a=e.filter(function(t){return null===t.position()}).sort(function(t,n){return n.discussionsCount()-t.discussionsCount()});a.splice(0,3).forEach(o),a.length&&t.add("moreTags",M.a.component({children:app.translator.trans("flarum-tags.forum.index.more_link"),href:app.route("tags")}),-10)}})},R=e(77),B=e.n(R),H=e(76),F=function(t){function n(){return t.apply(this,arguments)||this}return Object(f.a)(n,t),n.prototype.view=function(){var t=this.props.tag,n=t.color();return m("header",{className:"Hero TagHero"+(n?" TagHero--colored":""),style:n?{color:"#fff",backgroundColor:n}:""},m("div",{className:"container"},m("div",{className:"containerNarrow"},m("h2",{className:"Hero-title"},t.name()),m("div",{className:"Hero-subtitle"},t.description()))))},n}(e.n(H).a),q=function(){p.a.prototype.currentTag=function(){var t=this.params().tags;if(t)return app.store.getBy("tags","slug",t)},Object(I.override)(p.a.prototype,"hero",function(t){var n=this.currentTag();return n?F.component({tag:n}):t()}),Object(I.extend)(p.a.prototype,"view",function(t){var n=this.currentTag();n&&(t.attrs.className+=" IndexPage--tag"+n.id())}),Object(I.extend)(p.a.prototype,"sidebarItems",function(t){var n=this.currentTag();if(n){var e=n.color();e&&(t.get("newDiscussion").props.style={backgroundColor:e})}}),Object(I.extend)(p.a.prototype,"params",function(t){t.tags=m.route.param("tags")}),Object(I.extend)(B.a.prototype,"requestParams",function(t){t.include.push("tags"),this.props.params.tags&&(t.filter.q=(t.filter.q||"")+" tag:"+this.props.params.tags)})},K=e(75),U=e.n(K),z=e(36),W=e.n(z),G=e(57),J=e.n(G),Q=function(){Object(I.extend)(U.a.prototype,"infoItems",function(t){var n=this.props.discussion.tags();n&&n.length&&t.add("tags",w(n),10)}),Object(I.extend)(W.a.prototype,"params",function(t){t.include.push("tags")}),Object(I.extend)(J.a.prototype,"view",function(t){var n=Object(T.a)(this.props.discussion.tags());if(n&&n.length){var e=n[0].color();e&&(t.attrs.style={backgroundColor:e},t.attrs.className+=" DiscussionHero--colored")}}),Object(I.extend)(J.a.prototype,"items",function(t){var n=this.props.discussion.tags();n&&n.length&&t.add("tags",w(n,{link:!0}),5)})},V=e(74),X=e.n(V),Y=e(6),Z=e.n(Y),tt=e(26),nt=e.n(tt),et=e(73),rt=e.n(et),ot=e(72),at=e.n(ot),st=e(71),it=e.n(st),ct=e(70),ut=e.n(ct),pt=function(t){function n(){return t.apply(this,arguments)||this}Object(f.a)(n,t);var e=n.prototype;return e.init=function(){var n=this;t.prototype.init.call(this),this.tags=app.store.all("tags"),this.props.discussion?this.tags=this.tags.filter(function(t){return t.canAddToDiscussion()||-1!==n.props.discussion.tags().indexOf(t)}):this.tags=this.tags.filter(function(t){return t.canStartDiscussion()}),this.tags=Object(T.a)(this.tags),this.selected=[],this.filter=m.prop(""),this.index=this.tags[0].id(),this.focused=!1,this.props.selectedTags?this.props.selectedTags.map(this.addTag.bind(this)):this.props.discussion&&this.props.discussion.tags().map(this.addTag.bind(this)),this.minPrimary=app.forum.attribute("minPrimaryTags"),this.maxPrimary=app.forum.attribute("maxPrimaryTags"),this.minSecondary=app.forum.attribute("minSecondaryTags"),this.maxSecondary=app.forum.attribute("maxSecondaryTags"),this.navigator=new ut.a,this.navigator.onUp(function(){return n.setIndex(n.getCurrentNumericIndex()-1,!0)}).onDown(function(){return n.setIndex(n.getCurrentNumericIndex()+1,!0)}).onSelect(this.select.bind(this)).onRemove(function(){return n.selected.splice(n.selected.length-1,1)})},e.primaryCount=function(){return this.selected.filter(function(t){return t.isPrimary()}).length},e.secondaryCount=function(){return this.selected.filter(function(t){return!t.isPrimary()}).length},e.addTag=function(t){if(t.canStartDiscussion()){var n=t.parent();if(n)-1===this.selected.indexOf(n)&&this.selected.push(n);this.selected.push(t)}},e.removeTag=function(t){var n=this.selected.indexOf(t);-1!==n&&(this.selected.splice(n,1),this.selected.filter(function(n){return n.parent()===t}).forEach(this.removeTag.bind(this)))},e.className=function(){return"TagDiscussionModal"},e.title=function(){return this.props.discussion?app.translator.trans("flarum-tags.forum.choose_tags.edit_title",{title:m("em",null,this.props.discussion.title())}):app.translator.trans("flarum-tags.forum.choose_tags.title")},e.getInstruction=function(t,n){if(t<this.minPrimary){var e=this.minPrimary-t;return app.translator.transChoice("flarum-tags.forum.choose_tags.choose_primary_placeholder",e,{count:e})}if(n<this.minSecondary){var r=this.minSecondary-n;return app.translator.transChoice("flarum-tags.forum.choose_tags.choose_secondary_placeholder",r,{count:r})}return""},e.content=function(){var t=this,n=this.tags,e=this.filter().toLowerCase(),r=this.primaryCount(),o=this.secondaryCount();return n=n.filter(function(n){var e=n.parent();return!1===e||-1!==t.selected.indexOf(e)}),r>=this.maxPrimary&&(n=n.filter(function(n){return!n.isPrimary()||-1!==t.selected.indexOf(n)})),o>=this.maxSecondary&&(n=n.filter(function(n){return n.isPrimary()||-1!==t.selected.indexOf(n)})),e&&(n=n.filter(function(t){return t.name().substr(0,e.length).toLowerCase()===e})),-1===n.indexOf(this.index)&&(this.index=n[0]),[m("div",{className:"Modal-body"},m("div",{className:"TagDiscussionModal-form"},m("div",{className:"TagDiscussionModal-form-input"},m("div",{className:"TagsInput FormControl "+(this.focused?"focus":"")},m("span",{className:"TagsInput-selected"},this.selected.map(function(n){return m("span",{className:"TagsInput-tag",onclick:function(){t.removeTag(n),t.onready()}},Object(x.a)(n))})),m("input",{className:"FormControl",placeholder:it()(this.getInstruction(r,o)),value:this.filter(),oninput:m.withAttr("value",this.filter),onkeydown:this.navigator.navigate.bind(this.navigator),onfocus:function(){return t.focused=!0},onblur:function(){return t.focused=!1}}))),m("div",{className:"TagDiscussionModal-form-submit App-primaryControl"},Z.a.component({type:"submit",className:"Button Button--primary",disabled:r<this.minPrimary||o<this.minSecondary,icon:"fas fa-check",children:app.translator.trans("flarum-tags.forum.choose_tags.submit_button")})))),m("div",{className:"Modal-footer"},m("ul",{className:"TagDiscussionModal-list SelectTagList"},n.filter(function(n){return e||!n.parent()||-1!==t.selected.indexOf(n.parent())}).map(function(n){return m("li",{"data-index":n.id(),className:at()({pinned:null!==n.position(),child:!!n.parent(),colored:!!n.color(),selected:-1!==t.selected.indexOf(n),active:t.index===n}),style:{color:n.color()},onmouseover:function(){return t.index=n},onclick:t.toggleTag.bind(t,n)},Object(E.a)(n),m("span",{className:"SelectTagListItem-name"},rt()(n.name(),e)),n.description()?m("span",{className:"SelectTagListItem-description"},n.description()):"")})))]},e.toggleTag=function(t){-1!==this.selected.indexOf(t)?this.removeTag(t):this.addTag(t),this.filter()&&(this.filter(""),this.index=this.tags[0]),this.onready()},e.select=function(t){t.metaKey||t.ctrlKey||-1!==this.selected.indexOf(this.index)?this.selected.length&&this.$("form").submit():this.getItem(this.index)[0].dispatchEvent(new Event("click"))},e.selectableItems=function(){return this.$(".TagDiscussionModal-list > li")},e.getCurrentNumericIndex=function(){return this.selectableItems().index(this.getItem(this.index))},e.getItem=function(t){return this.selectableItems().filter('[data-index="'+t.id()+'"]')},e.setIndex=function(t,n){var e=this.selectableItems(),r=e.parent();t<0?t=e.length-1:t>=e.length&&(t=0);var o=e.eq(t);if(this.index=app.store.getById("tags",o.attr("data-index")),m.redraw(),n){var a,s=r.scrollTop(),i=r.offset().top,c=i+r.outerHeight(),u=o.offset().top,p=u+o.outerHeight();u<i?a=s-i+u-parseInt(r.css("padding-top"),10):p>c&&(a=s-c+p+parseInt(r.css("padding-bottom"),10)),void 0!==a&&r.stop(!0).animate({scrollTop:a},100)}},e.onsubmit=function(t){t.preventDefault();var n=this.props.discussion,e=this.selected;n&&n.save({relationships:{tags:e}}).then(function(){app.current instanceof W.a&&app.current.stream.update(),m.redraw()}),this.props.onsubmit&&this.props.onsubmit(e),app.modal.close(),m.redraw.strategy("none")},n}(nt.a),lt=function(){Object(I.extend)(X.a,"moderationControls",function(t,n){n.canTag()&&t.add("tags",Z.a.component({children:app.translator.trans("flarum-tags.forum.discussion_controls.edit_tags_button"),icon:"fas fa-tag",onclick:function(){return app.modal.show(new pt({discussion:n}))}}))})},ft=e(17),mt=e.n(ft),dt=function(){Object(I.extend)(p.a.prototype,"composeNewDiscussion",function(t){var n=app.store.getBy("tags","slug",this.params().tags);if(n){var e=n.parent(),r=e?[e,n]:[n];t.then(function(t){return t.tags=r})}}),mt.a.prototype.tags=[],mt.a.prototype.chooseTags=function(){var t=this;app.modal.show(new pt({selectedTags:this.tags.slice(0),onsubmit:function(n){t.tags=n,t.$("textarea").focus()}}))},Object(I.extend)(mt.a.prototype,"headerItems",function(t){t.add("tags",m("a",{className:"DiscussionComposer-changeTags",onclick:this.chooseTags.bind(this)},this.tags.length?w(this.tags):m("span",{className:"TagLabel untagged"},app.translator.trans("flarum-tags.forum.composer_discussion.choose_tags_link"))),10)}),Object(I.override)(mt.a.prototype,"onsubmit",function(t){var n=this,e=this.tags,r=e.filter(function(t){return null!==t.position()&&!t.isChild()}),o=e.filter(function(t){return null===t.position()});!e.length||r.length<app.forum.attribute("minPrimaryTags")||o.length<app.forum.attribute("minSecondaryTags")?app.modal.show(new pt({selectedTags:e,onsubmit:function(e){n.tags=e,t()}})):t()}),Object(I.extend)(mt.a.prototype,"data",function(t){t.relationships=t.relationships||{},t.relationships.tags=this.tags})},gt={"tags/utils/sortTags":T.a,"tags/models/Tag":l.a,"tags/helpers/tagsLabel":w,"tags/helpers/tagIcon":E.a,"tags/helpers/tagLabel":x.a},ht=o()(gt,{addTagFilter:q,addTagControl:lt,"components/TagHero":F,"components/TagDiscussionModal":pt,"components/TagsPage":O,"components/DiscussionTaggedPost":C,"components/TagLinkButton":L,addTagList:A,addTagLabels:Q,addTagComposer:dt}),vt=e(69);app.initializers.add("flarum-tags",function(t){t.routes.tags={path:"/tags",component:O.component()},t.routes.tag={path:"/t/:tags",component:p.a.component()},t.route.tag=function(n){return t.route("tag",{tags:n.slug()})},t.postComponents.discussionTagged=C,t.store.models.tags=l.a,c.a.prototype.tags=s.a.hasMany("tags"),c.a.prototype.canTag=s.a.attribute("canTag"),A(),q(),Q(),lt(),dt()}),o()(vt.compat,ht)},,,,,,,,,function(t,n){t.exports=flarum.core},function(t,n){t.exports=flarum.core.compat["utils/KeyboardNavigatable"]},function(t,n){t.exports=flarum.core.compat["utils/extractText"]},function(t,n){t.exports=flarum.core.compat["utils/classList"]},function(t,n){t.exports=flarum.core.compat["helpers/highlight"]},function(t,n){t.exports=flarum.core.compat["utils/DiscussionControls"]},function(t,n){t.exports=flarum.core.compat["components/DiscussionListItem"]},function(t,n){t.exports=flarum.core.compat.Component},function(t,n){t.exports=flarum.core.compat["components/DiscussionList"]},function(t,n){t.exports=flarum.core.compat["components/Separator"]},function(t,n){t.exports=flarum.core.compat["components/EventPost"]},function(t,n){t.exports=flarum.core.compat["helpers/humanTime"]},function(t,n){t.exports=flarum.core.compat["helpers/listItems"]},,,,function(t,n,e){var r=e(32);t.exports=function(t){return Object(r(t))}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){"use strict";var r=e(34),o=e(87),a=e(86),s=e(85),i=e(33),c=Object.assign;t.exports=!c||e(16)(function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach(function(t){n[t]=t}),7!=c({},t)[e]||Object.keys(c({},n)).join("")!=r})?function(t,n){for(var e=s(t),c=arguments.length,u=1,p=o.f,l=a.f;c>u;)for(var f,m=i(arguments[u++]),d=p?r(m).concat(p(m)):r(m),g=d.length,h=0;g>h;)l.call(m,f=d[h++])&&(e[f]=m[f]);return e}:c},function(t,n,e){var r=e(35);r(r.S+r.F,"Object",{assign:e(88)})},function(t,n,e){e(89),t.exports=e(10).Object.assign},function(t,n,e){"use strict";e.r(n);var r=e(25);for(var o in r)"default"!==o&&function(t){e.d(n,t,function(){return r[t]})}(o);e(60)}]);
//# sourceMappingURL=forum.js.map