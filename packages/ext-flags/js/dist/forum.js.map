{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@flarum/flags/webpack/bootstrap","webpack://@flarum/flags/webpack/runtime/compat get default export","webpack://@flarum/flags/webpack/runtime/define property getters","webpack://@flarum/flags/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/flags/webpack/runtime/make namespace object","webpack://@flarum/flags/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@flarum/flags/external root \"flarum.core.compat['app']\"","webpack://@flarum/flags/external root \"flarum.core.compat['Model']\"","webpack://@flarum/flags/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/flags/./src/forum/models/Flag.js","webpack://@flarum/flags/external root \"flarum.core.compat['components/Page']\"","webpack://@flarum/flags/external root \"flarum.core.compat['Component']\"","webpack://@flarum/flags/external root \"flarum.core.compat['components/Link']\"","webpack://@flarum/flags/external root \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@flarum/flags/external root \"flarum.core.compat['helpers/avatar']\"","webpack://@flarum/flags/external root \"flarum.core.compat['helpers/username']\"","webpack://@flarum/flags/external root \"flarum.core.compat['helpers/icon']\"","webpack://@flarum/flags/external root \"flarum.core.compat['helpers/humanTime']\"","webpack://@flarum/flags/./src/forum/components/FlagList.js","webpack://@flarum/flags/./src/forum/components/FlagsPage.js","webpack://@flarum/flags/./src/forum/states/FlagListState.js","webpack://@flarum/flags/external root \"flarum.core.compat['extend']\"","webpack://@flarum/flags/external root \"flarum.core.compat['utils/PostControls']\"","webpack://@flarum/flags/external root \"flarum.core.compat['components/Button']\"","webpack://@flarum/flags/external root \"flarum.core.compat['components/Modal']\"","webpack://@flarum/flags/external root \"flarum.core.compat['utils/Stream']\"","webpack://@flarum/flags/external root \"flarum.core.compat['utils/withAttr']\"","webpack://@flarum/flags/./src/forum/components/FlagPostModal.js","webpack://@flarum/flags/./src/forum/addFlagControl.js","webpack://@flarum/flags/external root \"flarum.core.compat['components/HeaderSecondary']\"","webpack://@flarum/flags/external root \"flarum.core.compat['components/NotificationsDropdown']\"","webpack://@flarum/flags/./src/forum/components/FlagsDropdown.js","webpack://@flarum/flags/./src/forum/addFlagsDropdown.js","webpack://@flarum/flags/external root \"flarum.core.compat['components/Post']\"","webpack://@flarum/flags/external root \"flarum.core.compat['utils/ItemList']\"","webpack://@flarum/flags/external root \"flarum.core.compat['utils/humanTime']\"","webpack://@flarum/flags/./src/forum/addFlagsToPosts.js","webpack://@flarum/flags/./src/forum/compat.js","webpack://@flarum/flags/external assign \"flarum.core\"","webpack://@flarum/flags/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Model'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Model from 'flarum/Model';\n\nclass Flag extends Model {}\n\nObject.assign(Flag.prototype, {\n  type: Model.attribute('type'),\n  reason: Model.attribute('reason'),\n  reasonDetail: Model.attribute('reasonDetail'),\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n\n  post: Model.hasOne('post'),\n  user: Model.hasOne('user')\n});\n\nexport default Flag;\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['helpers/humanTime'];","import Component from 'flarum/Component';\nimport Link from 'flarum/components/Link';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\nimport icon from 'flarum/helpers/icon';\nimport humanTime from 'flarum/helpers/humanTime';\n\nexport default class FlagList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.state = this.attrs.state;\n  }\n\n  view() {\n    const flags = this.state.cache || [];\n\n    return (\n      <div className=\"NotificationList FlagList\">\n        <div className=\"NotificationList-header\">\n          <h4 className=\"App-titleControl App-titleControl--text\">{app.translator.trans('flarum-flags.forum.flagged_posts.title')}</h4>\n        </div>\n        <div className=\"NotificationList-content\">\n          <ul className=\"NotificationGroup-content\">\n            {flags.length\n              ? flags.map(flag => {\n                const post = flag.post();\n\n                return (\n                  <li>\n                    <Link href={app.route.post(post)} className=\"Notification Flag\" onclick={e => {\n                      app.flags.index = post;\n                      e.redraw = false;\n                    }}>\n                      {avatar(post.user())}\n                      {icon('fas fa-flag', {className: 'Notification-icon'})}\n                      <span className=\"Notification-content\">\n                        {app.translator.trans('flarum-flags.forum.flagged_posts.item_text', {username: username(post.user()), em: <em/>, discussion: post.discussion().title()})}\n                      </span>\n                      {humanTime(flag.createdAt())}\n                      <div className=\"Notification-excerpt\">\n                        {post.contentPlain()}\n                      </div>\n                    </Link>\n                  </li>\n                );\n              })\n              : !this.state.loading\n                ? <div className=\"NotificationList-empty\">{app.translator.trans('flarum-flags.forum.flagged_posts.empty_text')}</div>\n                : LoadingIndicator.component({className: 'LoadingIndicator--block'})}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n","import Page from 'flarum/components/Page';\n\nimport FlagList from './FlagList';\n\n/**\n * The `FlagsPage` component shows the flags list. It is only\n * used on mobile devices where the flags dropdown is within the drawer.\n */\nexport default class FlagsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.history.push('flags');\n\n    app.flags.load();\n\n    this.bodyClass = 'App--flags';\n  }\n\n  view() {\n    return <div className=\"FlagsPage\"><FlagList state={app.flags}></FlagList></div>;\n  }\n}\n","export default class FlagListState {\n  constructor(app) {\n    this.app = app;\n\n    /**\n     * Whether or not the flags are loading.\n     *\n     * @type {Boolean}\n     */\n    this.loading = false;\n  }\n\n  /**\n   * Load flags into the application's cache if they haven't already\n   * been loaded.\n   */\n  load() {\n    if (this.cache && !this.app.session.user.attribute('newFlagCount')) {\n      return;\n    }\n\n    this.loading = true;\n    m.redraw();\n\n    this.app.store.find('flags')\n      .then(flags => {\n        this.app.session.user.pushAttributes({ newFlagCount: 0 });\n        this.cache = flags.sort((a, b) => b.createdAt() - a.createdAt());\n      })\n      .catch(() => { })\n      .then(() => {\n        this.loading = false;\n        m.redraw();\n      });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/PostControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/withAttr'];","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\n\nimport Stream from 'flarum/utils/Stream';\nimport withAttr from 'flarum/utils/withAttr';\n\nexport default class FlagPostModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.success = false;\n\n    this.reason = Stream('');\n    this.reasonDetail = Stream('');\n  }\n\n  className() {\n    return 'FlagPostModal Modal--medium';\n  }\n\n  title() {\n    return app.translator.trans('flarum-flags.forum.flag_post.title');\n  }\n\n  content() {\n    if (this.success) {\n      return (\n        <div className=\"Modal-body\">\n          <div className=\"Form Form--centered\">\n            <p className=\"helpText\">{app.translator.trans('flarum-flags.forum.flag_post.confirmation_message')}</p>\n            <div className=\"Form-group\">\n              <Button className=\"Button Button--primary Button--block\" onclick={this.hide.bind(this)}>\n                {app.translator.trans('flarum-flags.forum.flag_post.dismiss_button')}\n              </Button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    const guidelinesUrl = app.forum.attribute('guidelinesUrl');\n\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            <div>\n              <label className=\"checkbox\">\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'off_topic'} value=\"off_topic\" onclick={withAttr('value', this.reason)}/>\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_label')}</strong>\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_text')}\n                {this.reason() === 'off_topic' ? (\n                  <textarea className=\"FormControl\" placeholder={app.translator.trans('flarum-flags.forum.flag_post.reason_details_placeholder')} value={this.reasonDetail()} oninput={withAttr('value', this.reasonDetail)}></textarea>\n                ) : ''}\n              </label>\n\n              <label className=\"checkbox\">\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'inappropriate'} value=\"inappropriate\" onclick={withAttr('value', this.reason)}/>\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_label')}</strong>\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_text', {\n                  a: guidelinesUrl ? <a href={guidelinesUrl} target=\"_blank\"/> : undefined\n                })}\n                {this.reason() === 'inappropriate' ? (\n                  <textarea className=\"FormControl\" placeholder={app.translator.trans('flarum-flags.forum.flag_post.reason_details_placeholder')} value={this.reasonDetail()} oninput={withAttr('value', this.reasonDetail)}></textarea>\n                ) : ''}\n              </label>\n\n              <label className=\"checkbox\">\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'spam'} value=\"spam\" onclick={withAttr('value', this.reason)}/>\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_spam_label')}</strong>\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_spam_text')}\n                {this.reason() === 'spam' ? (\n                  <textarea className=\"FormControl\" placeholder={app.translator.trans('flarum-flags.forum.flag_post.reason_details_placeholder')} value={this.reasonDetail()} oninput={withAttr('value', this.reasonDetail)}></textarea>\n                ) : ''}\n              </label>\n\n              <label className=\"checkbox\">\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'other'} value=\"other\" onclick={withAttr('value', this.reason)}/>\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_other_label')}</strong>\n                {this.reason() === 'other' ? (\n                  <textarea className=\"FormControl\" value={this.reasonDetail()} oninput={withAttr('value', this.reasonDetail)}></textarea>\n                ) : ''}\n              </label>\n            </div>\n          </div>\n\n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary Button--block\"\n              type=\"submit\"\n              loading={this.loading}\n              disabled={!this.reason()}>\n              {app.translator.trans('flarum-flags.forum.flag_post.submit_button')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    app.store.createRecord('flags').save({\n      reason: this.reason() === 'other' ? null : this.reason(),\n      reasonDetail: this.reasonDetail(),\n      relationships: {\n        user: app.session.user,\n        post: this.attrs.post\n      }\n    }, {errorHandler: this.onerror.bind(this)})\n      .then(() => this.success = true)\n      .catch(() => {})\n      .then(this.loaded.bind(this));\n  }\n}\n","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport PostControls from 'flarum/utils/PostControls';\nimport Button from 'flarum/components/Button';\n\nimport FlagPostModal from './components/FlagPostModal';\n\nexport default function() {\n  extend(PostControls, 'userControls', function(items, post) {\n    if (post.isHidden() || post.contentType() !== 'comment' || !post.canFlag()) return;\n\n    items.add('flag',\n      <Button icon=\"fas fa-flag\" onclick={() => app.modal.show(FlagPostModal, {post})}>{app.translator.trans('flarum-flags.forum.post_controls.flag_button')}</Button>\n    );\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/HeaderSecondary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/NotificationsDropdown'];","import NotificationsDropdown from 'flarum/components/NotificationsDropdown';\n\nimport FlagList from './FlagList';\n\nexport default class FlagsDropdown extends NotificationsDropdown {\n  static initAttrs(attrs) {\n    attrs.label = attrs.label || app.translator.trans('flarum-flags.forum.flagged_posts.tooltip');\n    attrs.icon = attrs.icon || 'fas fa-flag';\n\n    super.initAttrs(attrs);\n  }\n\n  getMenu() {\n    return (\n      <div className={'Dropdown-menu ' + this.attrs.menuClassName} onclick={this.menuClick.bind(this)}>\n        {this.showing ? FlagList.component({ state: this.attrs.state }) : ''}\n      </div>\n    );\n  }\n\n  goToRoute() {\n    m.route.set(app.route('flags'));\n  }\n\n  getUnreadCount() {\n    return app.flags.cache ? app.flags.cache.length : app.forum.attribute('flagCount');\n  }\n\n  getNewCount() {\n    return app.session.user.attribute('newFlagCount');\n  }\n}\n","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport HeaderSecondary from 'flarum/components/HeaderSecondary';\nimport FlagsDropdown from './components/FlagsDropdown';\n\nexport default function() {\n  extend(HeaderSecondary.prototype, 'items', function(items) {\n    if (app.forum.attribute('canViewFlags')) {\n      items.add('flags', <FlagsDropdown state={app.flags} />, 15);\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['utils/humanTime'];","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport Post from 'flarum/components/Post';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\nimport PostControls from 'flarum/utils/PostControls';\nimport humanTime from 'flarum/utils/humanTime';\n\nexport default function() {\n  extend(Post.prototype, 'elementAttrs', function(attrs) {\n    if (this.attrs.post.flags().length) {\n      attrs.className += ' Post--flagged';\n    }\n  });\n\n  Post.prototype.dismissFlag = function(body) {\n    const post = this.attrs.post;\n\n    delete post.data.relationships.flags;\n\n    this.subtree.invalidate();\n\n    if (app.flags.cache) {\n      app.flags.cache.some((flag, i) => {\n        if (flag.post() === post) {\n          app.flags.cache.splice(i, 1);\n\n          if (app.flags.index === post) {\n            let next = app.flags.cache[i];\n\n            if (!next) next = app.flags.cache[0];\n\n            if (next) {\n              const nextPost = next.post();\n              app.flags.index = nextPost;\n              m.route.set(app.route.post(nextPost));\n            }\n          }\n\n          return true;\n        }\n      });\n    }\n\n    return app.request({\n      url: app.forum.attribute('apiUrl') + post.apiEndpoint() + '/flags',\n      method: 'DELETE',\n      body\n    });\n  };\n\n  Post.prototype.flagActionItems = function() {\n    const items = new ItemList();\n\n    const controls = PostControls.destructiveControls(this.attrs.post);\n\n    Object.keys(controls.items).forEach(k => {\n      const attrs = controls.get(k).attrs;\n\n      attrs.className = 'Button';\n\n      extend(attrs, 'onclick', () => this.dismissFlag());\n    });\n\n    items.add('controls', (\n      <div className=\"ButtonGroup\">\n        {controls.toArray()}\n      </div>\n    ));\n\n    items.add('dismiss', (\n      <Button className=\"Button\" icon=\"far fa-eye-slash\" onclick={this.dismissFlag.bind(this)}>\n        {app.translator.trans('flarum-flags.forum.post.dismiss_flag_button')}\n      </Button>\n    ), -100);\n\n    return items;\n  };\n\n  extend(Post.prototype, 'content', function(vdom) {\n    const post = this.attrs.post;\n    const flags = post.flags();\n\n    if (!flags.length) return;\n\n    if (post.isHidden()) this.revealContent = true;\n\n    vdom.unshift(\n      <div className=\"Post-flagged\">\n        <div className=\"Post-flagged-flags\">\n          {flags.map(flag =>\n            <div className=\"Post-flagged-flag\">\n              {this.flagReason(flag)}\n            </div>\n          )}\n        </div>\n        <div className=\"Post-flagged-actions\">\n          {this.flagActionItems().toArray()}\n        </div>\n      </div>\n    );\n  });\n\n  Post.prototype.flagReason = function(flag) {\n    if (flag.type() === 'user') {\n      const user = flag.user();\n      const reason = flag.reason();\n      const detail = flag.reasonDetail();\n      const time = humanTime(flag.createdAt());\n\n      return [\n        app.translator.trans(reason ? 'flarum-flags.forum.post.flagged_by_with_reason_text' : 'flarum-flags.forum.post.flagged_by_text', {time, user, reason}),\n        detail ? <span className=\"Post-flagged-detail\">{detail}</span> : ''\n      ];\n    }\n  };\n}\n","import addFlagsToPosts from './addFlagsToPosts';\nimport addFlagControl from './addFlagControl';\nimport addFlagsDropdown from './addFlagsDropdown';\nimport Flag from './models/Flag';\nimport FlagList from './components/FlagList';\nimport FlagPostModal from './components/FlagPostModal';\nimport FlagsPage from './components/FlagsPage';\nimport FlagsDropdown from './components/FlagsDropdown';\n\nexport default {\n  'flags/addFlagsToPosts': addFlagsToPosts,\n  'flags/addFlagControl': addFlagControl,\n  'flags/addFlagsDropdown': addFlagsDropdown,\n  'flags/models/Flag': Flag,\n  'flags/components/FlagList': FlagList,\n  'flags/components/FlagPostModal': FlagPostModal,\n  'flags/components/FlagsPage': FlagsPage,\n  'flags/components/FlagsDropdown': FlagsDropdown,\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core;","import app from 'flarum/app';\nimport Model from 'flarum/Model';\n\nimport Flag from './models/Flag';\nimport FlagsPage from './components/FlagsPage';\nimport FlagListState from './states/FlagListState';\nimport addFlagControl from './addFlagControl';\nimport addFlagsDropdown from './addFlagsDropdown';\nimport addFlagsToPosts from './addFlagsToPosts';\n\napp.initializers.add('flarum-flags', () => {\n  app.store.models.posts.prototype.flags = Model.hasMany('flags');\n  app.store.models.posts.prototype.canFlag = Model.attribute('canFlag');\n\n  app.store.models.flags = Flag;\n\n  app.routes.flags = { path: '/flags', component: FlagsPage };\n\n  app.flags = new FlagListState(app);\n\n  addFlagControl();\n  addFlagsDropdown();\n  addFlagsToPosts();\n});\n\n// Expose compat API\nimport flagsCompat from './compat';\nimport { compat } from '@flarum/core/forum';\n\nObject.assign(compat, flagsCompat);\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","_extends","assign","target","i","arguments","length","source","apply","this","flarum","core","compat","_inheritsLoose","subClass","superClass","create","constructor","__proto__","Flag","Model","type","reason","reasonDetail","createdAt","post","user","FlagList","oninit","vnode","state","attrs","view","flags","cache","className","app","translator","trans","map","flag","href","route","onclick","e","index","redraw","avatar","icon","username","em","discussion","title","humanTime","contentPlain","loading","LoadingIndicator","Component","FlagsPage","history","push","load","bodyClass","Page","FlagListState","session","attribute","m","store","find","then","pushAttributes","newFlagCount","sort","b","catch","FlagPostModal","success","Stream","content","hide","bind","guidelinesUrl","forum","name","checked","withAttr","placeholder","oninput","undefined","disabled","onsubmit","preventDefault","createRecord","save","relationships","errorHandler","onerror","loaded","Modal","extend","PostControls","items","isHidden","contentType","canFlag","add","FlagsDropdown","initAttrs","label","getMenu","menuClassName","menuClick","showing","component","goToRoute","set","getUnreadCount","getNewCount","NotificationsDropdown","HeaderSecondary","Post","body","data","subtree","invalidate","next","nextPost","url","apiEndpoint","method","ItemList","controls","keys","forEach","k","dismissFlag","toArray","vdom","revealContent","unshift","flagReason","flagActionItems","detail","time","addFlagsToPosts","addFlagControl","addFlagsDropdown","path","flagsCompat"],"sourceRoot":""}