module.exports=function(o){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return o[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=o,n.c=t,n.d=function(o,t,r){n.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:r})},n.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},n.t=function(o,t){if(1&t&&(o=n(o)),8&t)return o;if(4&t&&"object"==typeof o&&o&&o.__esModule)return o;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var s in o)n.d(r,s,function(t){return o[t]}.bind(null,s));return r},n.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(t,"a",t),t},n.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},n.p="",n(n.s=22)}([function(o,t){o.exports=flarum.core.compat["forum/app"]},function(o,t){o.exports=flarum.core.compat["common/extend"]},function(o,t){o.exports=flarum.core.compat["forum/components/IndexPage"]},function(o,t){o.exports=flarum.core.compat["common/helpers/icon"]},function(o,t){o.exports=flarum.core.compat["common/models/Discussion"]},function(o,t){o.exports=flarum.core.compat["common/components/Button"]},function(o,t){o.exports=flarum.core.compat["common/components/Badge"]},function(o,t){o.exports=flarum.core.compat["forum/components/DiscussionPage"]},function(o,t){o.exports=flarum.core.compat["common/utils/classList"]},function(o,t){o.exports=flarum.core.compat["common/Model"]},function(o,t){o.exports=flarum.core.compat["forum/components/NotificationGrid"]},function(o,t){o.exports=flarum.core.compat["forum/utils/DiscussionControls"]},function(o,t){o.exports=flarum.core.compat["common/components/Dropdown"]},function(o,t){o.exports=flarum.core.compat["common/components/Tooltip"]},function(o,t){o.exports=flarum.core.compat["common/utils/extractText"]},function(o,t){o.exports=flarum.core.compat["common/Component"]},function(o,t){o.exports=flarum.core.compat["common/components/LinkButton"]},function(o,t){o.exports=flarum.core.compat["forum/states/DiscussionListState"]},function(o,t){o.exports=flarum.core.compat["forum/states/GlobalSearchState"]},function(o,t){o.exports=flarum.core.compat["forum/components/SettingsPage"]},function(o,t){o.exports=flarum.core.compat["common/components/Switch"]},function(o,t){o.exports=flarum.core.compat["forum/components/Notification"]},function(o,t,n){"use strict";n.r(t);var r=n(1),s=n(0),e=n.n(s),a=n(9),i=n.n(a),c=n(4),u=n.n(c),l=n(2),f=n.n(l),p=n(10),b=n.n(p),d=n(6),g=n.n(d);var _=n(5),w=n.n(_),y=n(7),h=n.n(y),x=n(11),v=n.n(x);function O(){return(O=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r])}return o}).apply(this,arguments)}function j(o,t){return(j=Object.setPrototypeOf||function(o,t){return o.__proto__=t,o})(o,t)}function S(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,j(o,t)}var P=n(12),N=n.n(P),M=n(13),k=n.n(M),B=n(3),D=n.n(B),I=n(14),T=n.n(I),A=n(8),L=n.n(A),R=n(15),C=function(o){function t(){return o.apply(this,arguments)||this}return S(t,o),t.prototype.view=function(){return m("button",{className:"SubscriptionMenuItem hasIcon",onclick:this.attrs.onclick},this.attrs.active?D()("fas fa-check",{className:"Button-icon"}):"",m("span",{className:"SubscriptionMenuItem-label"},D()(this.attrs.icon,{className:"Button-icon"}),m("strong",null,this.attrs.label),m("span",{className:"SubscriptionMenuItem-description"},this.attrs.description)))},t}(n.n(R).a),G=function(o){function t(){return o.apply(this,arguments)||this}S(t,o);var n=t.prototype;return n.oninit=function(t){o.prototype.oninit.call(this,t),this.options=[{subscription:null,icon:"far fa-star",label:e.a.translator.trans("flarum-subscriptions.forum.sub_controls.not_following_button"),description:e.a.translator.trans("flarum-subscriptions.forum.sub_controls.not_following_text")},{subscription:"follow",icon:"fas fa-star",label:e.a.translator.trans("flarum-subscriptions.forum.sub_controls.following_button"),description:e.a.translator.trans("flarum-subscriptions.forum.sub_controls.following_text")},{subscription:"ignore",icon:"far fa-eye-slash",label:e.a.translator.trans("flarum-subscriptions.forum.sub_controls.ignoring_button"),description:e.a.translator.trans("flarum-subscriptions.forum.sub_controls.ignoring_text")}]},n.view=function(){var o=this,t=this.attrs.discussion,n=t.subscription(),r=e.a.translator.trans("flarum-subscriptions.forum.sub_controls.follow_button"),s="far fa-star",a="SubscriptionMenu-button--"+n;switch(n){case"follow":r=e.a.translator.trans("flarum-subscriptions.forum.sub_controls.following_button"),s="fas fa-star";break;case"ignore":r=e.a.translator.trans("flarum-subscriptions.forum.sub_controls.ignoring_button"),s="far fa-eye-slash"}var i=e.a.session.user.preferences(),c=i.notify_newPost_email,u=i.notify_newPost_alert,l=T()(e.a.translator.trans(c?"flarum-subscriptions.forum.sub_controls.notify_email_tooltip":"flarum-subscriptions.forum.sub_controls.notify_alert_tooltip")),f=(c||u)&&null===n,p=m(w.a,{className:L()("Button","SubscriptionMenu-button",a),icon:s,onclick:this.saveSubscription.bind(this,t,-1!==["follow","ignore"].indexOf(n)?null:"follow")},r);return m("div",{className:"Dropdown ButtonGroup SubscriptionMenu"},f?m(k.a,{text:l,position:"bottom"},p):p,m("button",{className:L()("Dropdown-toggle Button Button--icon",a),"data-toggle":"dropdown"},D()("fas fa-caret-down",{className:"Button-icon"})),m("ul",{className:"Dropdown-menu dropdown-menu Dropdown-menu--right"},this.options.map((function(r){return m("li",null,C.component(O({},r,{onclick:o.saveSubscription.bind(o,t,r.subscription),active:n===r.subscription})))}))))},n.saveSubscription=function(o,t){o.save({subscription:t}),this.$(".SubscriptionMenu-button").tooltip("hide")},t}(N.a);var F=n(16),q=n.n(F),z=n(17),U=n.n(z),$=n(18),E=n.n($);var H=n(19),J=n.n(H),K=n(20),Q=n.n(K),V=n(21),W=function(o){function t(){return o.apply(this,arguments)||this}S(t,o);var n=t.prototype;return n.icon=function(){return"fas fa-star"},n.href=function(){var o=this.attrs.notification,t=o.subject(),n=o.content()||{};return e.a.route.discussion(t,n.postNumber)},n.content=function(){return e.a.translator.trans("flarum-subscriptions.forum.notifications.new_post_text",{user:this.attrs.notification.fromUser()})},t}(n.n(V).a);e.a.initializers.add("subscriptions",(function(){e.a.routes.following={path:"/following",component:f.a},e.a.notificationComponents.newPost=W,u.a.prototype.subscription=i.a.attribute("subscription"),Object(r.extend)(u.a.prototype,"badges",(function(o){var t;switch(this.subscription()){case"follow":t=g.a.component({label:e.a.translator.trans("flarum-subscriptions.forum.badge.following_tooltip"),icon:"fas fa-star",type:"following"});break;case"ignore":t=g.a.component({label:e.a.translator.trans("flarum-subscriptions.forum.badge.ignoring_tooltip"),icon:"far fa-eye-slash",type:"ignoring"})}t&&o.add("subscription",t)})),Object(r.extend)(v.a,"userControls",(function(o,t,n){if(e.a.session.user&&!(n instanceof h.a)){var r={none:{label:e.a.translator.trans("flarum-subscriptions.forum.discussion_controls.follow_button"),icon:"fas fa-star",save:"follow"},follow:{label:e.a.translator.trans("flarum-subscriptions.forum.discussion_controls.unfollow_button"),icon:"far fa-star",save:null},ignore:{label:e.a.translator.trans("flarum-subscriptions.forum.discussion_controls.unignore_button"),icon:"fas fa-eye",save:null}},s=t.subscription()||"none";o.add("subscription",w.a.component({icon:r[s].icon,onclick:t.save.bind(t,{subscription:r[s].save})},r[s].label))}})),Object(r.extend)(h.a.prototype,"sidebarItems",(function(o){if(e.a.session.user){var t=this.discussion;o.add("subscription",G.component({discussion:t}),80)}})),Object(r.extend)(f.a.prototype,"navItems",(function(o){if(e.a.session.user){var t=e.a.search.stickyParams();o.add("following",q.a.component({href:e.a.route("following",t),icon:"fas fa-star"},e.a.translator.trans("flarum-subscriptions.forum.index.following_link")),50)}})),Object(r.extend)(f.a.prototype,"setTitle",(function(){"following"===e.a.current.get("routeName")&&e.a.setTitle(e.a.translator.trans("flarum-subscriptions.forum.following.meta_title_text"))})),Object(r.extend)(E.a.prototype,"params",(function(o){o.onFollowing="following"===e.a.current.get("routeName")})),Object(r.extend)(U.a.prototype,"requestParams",(function(o){this.params.onFollowing&&(o.filter.subscription="following")})),Object(r.extend)(J.a.prototype,"notificationsItems",(function(o){var t=this;o.add("followAfterReply",Q.a.component({state:this.user.preferences().followAfterReply,onchange:function(o){t.followAfterReplyLoading=!0,t.user.savePreferences({followAfterReply:o}).then((function(){t.followAfterReplyLoading=!1,m.redraw()}))},loading:this.followAfterReplyLoading},e.a.translator.trans("flarum-subscriptions.forum.settings.follow_after_reply_label")))})),Object(r.extend)(b.a.prototype,"notificationTypes",(function(o){o.add("newPost",{name:"newPost",icon:"fas fa-star",label:e.a.translator.trans("flarum-subscriptions.forum.settings.notify_new_post_label")})}))}))}]);
//# sourceMappingURL=forum.js.map