name: Package Manager JS

on: [workflow_dispatch, push, pull_request]

# The reusable workflow definitions will be moved to the `flarum/framework` repo soon.
# This will break your current script.
# When this happens, run `flarum-cli audit infra --fix` to update your infrastructure.

jobs:
  run:
    uses: flarum/.github/.github/workflows/REUSABLE_frontend.yml@as/support-npm-yarn
    with:
      enable_bundlewatch: false
      enable_prettier: true
      enable_typescript: true

      frontend_directory: ./js
      backend_directory: .
      package_manager: yarn
      main_git_branch: main

    secrets:
      bundlewatch_github_token: ${{ secrets.BUNDLEWATCH_GITHUB_TOKEN }}
