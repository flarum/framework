{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,qDCL9D,MAAM,EAA+BC,OAAOC,IAAIV,IAAI,OAAQ,a,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,iBCAtD,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,4B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,4B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,uB,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,+B,aCA7C,SAASW,EAAQV,GAG9B,OAAOU,EAAU,mBAAqBL,QAAU,iBAAmBA,OAAOM,SAAW,SAAUX,GAC7F,cAAcA,CAChB,EAAI,SAAUA,GACZ,OAAOA,GAAO,mBAAqBK,QAAUL,EAAIY,cAAgBP,QAAUL,IAAQK,OAAOH,UAAY,gBAAkBF,CAC1H,EAAGU,EAAQV,EACb,CCPe,SAASa,EAAgBb,EAAKN,EAAKa,GAYhD,OAXAb,ECAa,SAAwBoB,GACrC,IAAIpB,ECFS,SAAsBqB,EAAOC,GAC1C,GAAuB,WAAnBN,EAAQK,IAAiC,OAAVA,EAAgB,OAAOA,EAC1D,IAAIE,EAAOF,EAAMV,OAAOa,aACxB,QAAaC,IAATF,EAAoB,CACtB,IAAIG,EAAMH,EAAKb,KAAKW,EAAOC,GAC3B,GAAqB,WAAjBN,EAAQU,GAAmB,OAAOA,EACtC,MAAM,IAAIC,UAAU,+CACtB,CACA,OAA4BC,OAAiBP,EAC/C,CDPYG,CAAYJ,EAAK,UAC3B,MAAwB,WAAjBJ,EAAQhB,GAAoBA,EAAM4B,OAAO5B,EAClD,CDHQ6B,CAAc7B,MACTM,EACTJ,OAAOC,eAAeG,EAAKN,EAAK,CAC9Ba,MAAOA,EACPT,YAAY,EACZ0B,cAAc,EACdC,UAAU,IAGZzB,EAAIN,GAAOa,EAENP,CACT,CGce,MAAM0B,EACnBd,cAIEC,EAAgBc,KAAM,eAAW,GAMjCd,EAAgBc,KAAM,aAAS,GAY/Bd,EAAgBc,KAAM,aAAS,EACjC,CAOAC,OAAOC,GACLF,KAAKG,SAASD,EAAME,MACtB,CAKAC,SAASH,GACPF,KAAKM,QAAUJ,EAAMK,GACvB,CAKAC,eAAeN,GACbF,KAAKG,SAASD,EAAME,MACtB,CAKAK,SAASP,GAAQ,CAKjBQ,eAAeR,GAAQ,CAKvBS,SAAST,GAAQ,CAejBU,EAAEC,GACA,MAAMC,EAAWF,EAAEZ,KAAKM,SACxB,OAAOO,EAAWC,EAASC,KAAKF,GAAYC,CAC9C,CAQAE,iBAAiBZ,EAAOa,QACR,IAAVb,IACFA,EAAQ,CAAC,QAEM,IAAba,IACFA,EAAW,MAEb,MAAMC,EAAiB,IAClBd,GAEL,OAAOe,EAAEnB,KAAMkB,EAAgBD,EACjC,CAMAd,SAASC,GAKP,QAJc,IAAVA,IACFA,EAAQ,CAAC,GAEXJ,KAAKf,YAAYmC,UAAUhB,GACvBA,EAAO,CACT,GAAI,aAAcA,EAChB,MAAM,IAAIiB,MAAM,IAAIC,OAAOtB,KAAKf,YAAYsC,KAAM,oIAEpD,GAAI,QAASnB,EACX,MAAM,IAAIiB,MAAM,IAAIC,OAAOtB,KAAKf,YAAYsC,KAAM,6DAEtD,CACAvB,KAAKI,MAAQA,CACf,CAOAY,iBAAiBZ,GAAQ,EC1J3B,SAASoB,EAAEC,GAAG,IAAIC,EAAEC,EAAEC,EAAE,GAAG,GAAG,iBAAiBH,GAAG,iBAAiBA,EAAEG,GAAGH,OAAO,GAAG,iBAAiBA,EAAE,GAAGI,MAAMC,QAAQL,GAAG,IAAIC,EAAE,EAAEA,EAAED,EAAEM,OAAOL,IAAID,EAAEC,KAAKC,EAAEH,EAAEC,EAAEC,OAAOE,IAAIA,GAAG,KAAKA,GAAGD,QAAQ,IAAID,KAAKD,EAAEA,EAAEC,KAAKE,IAAIA,GAAG,KAAKA,GAAGF,GAAG,OAAOE,CAAC,CD4JvO/C,OAAOC,IAAIkD,IAAI,mBAAoB,qDAAsDjC,GC5JyQ,MCS5VkC,EDTyO,WAAgB,IAAI,IAAIR,EAAEC,EAAEC,EAAE,EAAEC,EAAE,GAAGD,EAAEO,UAAUH,SAASN,EAAES,UAAUP,QAAQD,EAAEF,EAAEC,MAAMG,IAAIA,GAAG,KAAKA,GAAGF,GAAG,OAAOE,CAAC,ECUjW,IACA/C,OAAOC,IAAIkD,IAAI,mBAAoB,2DAA4DC,GCThF,MAAME,UAAapC,EAChCqC,KAAKlC,GACH,MAAM,MACJmC,EAAK,YACLC,EAAW,UACXC,KACGnC,GACDF,EAAME,MACV,OAAOe,EAAE,MAAOlD,OAAOuE,OAAO,CAC5BD,UAAW,EAAU,OAAQA,IAC5BnC,GAAQe,EAAE,MAAO,CAClBoB,UAAW,eACVF,GAASlB,EAAE,QAAS,KAAMkB,GAAQC,GAAenB,EAAE,IAAK,CACzDoB,UAAW,YACVD,IAAenB,EAAE,MAAO,CACzBoB,UAAW,aACVrC,EAAMe,UACX,EAEFpC,OAAOC,IAAIkD,IAAI,mBAAoB,2DAA4DG,GChBhF,MAAMM,UAAsB,KACzCxC,OAAOC,GACLwC,MAAMzC,OAAOC,GACbF,KAAK2C,SAAW,IAAO,+BACzB,CACAJ,YACE,MAAO,2BACT,CACAK,QACE,OAAO,qBAAqB,+CAC9B,CACAC,UACE,OAAO1B,EAAE,MAAO,CACdoB,UAAW,cACVpB,EAAEgB,EAAM,CACTI,UAAW,kBACVpB,EAAE,MAAO,CACVoB,UAAW,cACVpB,EAAE,QAAS,CACZ2B,KAAM,OACNC,aAAc,MACdxB,KAAM,WACNgB,UAAW,cACXS,KAAMhD,KAAK2C,SACXM,SAAUjD,KAAKkD,WACZ/B,EAAE,MAAO,CACZoB,UAAW,4BACVpB,EAAE,IAAQ,CACXoB,UAAW,uCACXO,KAAM,SACNI,QAASlD,KAAKkD,SACb,qBAAqB,2DAC1B,CACAC,SAAS1B,GACPA,EAAE2B,iBACEpD,KAAK2C,aAAe,gCAIxB3C,KAAKkD,SAAU,EACf,sBAAsB,CACpBP,SAAU3C,KAAK2C,YACd,CACDU,aAAcrD,KAAKsD,QAAQC,KAAKvD,QAC/BwD,KAAKxD,KAAKyD,KAAKF,KAAKvD,OAAO0D,OAAM,KAClC1D,KAAKkD,SAAU,EACf/B,EAAEwC,QAAQ,KAVV3D,KAAKyD,MAYT,EAEF5E,OAAOC,IAAIkD,IAAI,mBAAoB,iCAAkCS,GCvDrE,MAAM,EAA+B5D,OAAOC,IAAIV,IAAI,OAAQ,oB,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,sB,aCE5D,SAAgB,IAAI,WAAa,KAChCwF,UAAU,oBCIX,qBAAqB,oBAAoB,MACvC,IAAAC,QAAO,uCAAwC,gBAAgB,SAAUC,GACtB,aAA7C,oBAAoB,sBACpB9D,KAAK+D,KAAKC,mBACZF,EAAM9B,IAAI,iBAAkBb,EAAE,IAAQ,CACpCoB,UAAW,SACX0B,QAAS,IAAM,eAAe,IAC7B,qBAAqB,2DAE5B,KACA,IAAAJ,QAAO,yCAA0C,UAAU,WACzD7D,KAAK2C,SAAW,IAAO3C,KAAKI,MAAM2D,KAAKG,cACzC,KACA,IAAAL,QAAO,yCAA0C,UAAU,SAAUC,GAClB,aAA7C,oBAAoB,sBACnB9D,KAAKI,MAAM2D,KAAKC,mBACrBF,EAAM9B,IAAI,WAAYb,EAAE,MAAO,CAC7BoB,UAAW,cACVpB,EAAE,QAAS,KAAM,qBAAqB,uDAAwDA,EAAE,QAAS,CAC1GoB,UAAW,cACX4B,YAAa,IAAY,qBAAqB,oDAC9CnB,KAAMhD,KAAK2C,YACR,IACP,KACA,IAAAkB,QAAO,yCAA0C,QAAQ,SAAUO,GAChB,aAA7C,oBAAoB,sBACnBpE,KAAKI,MAAM2D,KAAKC,mBACjBhE,KAAK2C,aAAe3C,KAAKI,MAAM2D,KAAKG,gBACtCE,EAAKzB,SAAW3C,KAAK2C,WAEzB,KACA,IAAAkB,QAAO,sCAAuC,UAAU,WACL,aAA7C,oBAAoB,uBACxB7D,KAAK2C,SAAW,IAAO3C,KAAKI,MAAMiE,UAAY,IAChD,KACA,IAAAR,QAAO,sCAAuC,WAAW,WACN,aAA7C,oBAAoB,sBACpB,oBAAoB,8BAAgC,oBAAoB,oCAC1E7D,KAAKY,EAAE,mBAAmB0D,QAE9B,KACA,IAAAT,QAAO,sCAAuC,UAAU,SAAUC,GACf,aAA7C,oBAAoB,sBACpB,oBAAoB,+BACtBA,EAAM9B,IAAI,WAAYb,EAAE,MAAO,CAC7BoB,UAAW,cACVpB,EAAE,QAAS,CACZoB,UAAW,cACXhB,KAAM,WACNuB,KAAM,OACNqB,YAAa,IAAY,qBAAqB,wDAC9CnB,KAAMhD,KAAK2C,SACXM,SAAUjD,KAAKkD,SAAWlD,KAAKuE,WAAW,YAC1CC,SAAU,oBAAoB,sCAC3B,IACD,oBAAoB,oCACtBV,EAAMW,OAAO,YAGnB,KACA,IAAAZ,QAAO,sCAAuC,cAAc,SAAUO,GACpE,GAAiD,aAA7C,oBAAoB,sBACpB,oBAAoB,+BACtBA,EAAKzB,SAAW3C,KAAK2C,WACjB,oBAAoB,oCAAoC,CAC1D,MAAM+B,EAAM,IAAIC,YAAY,GAC5BC,OAAOC,gBAAgBH,GACvBN,EAAKC,SAAWK,EAAII,KAAK,GAC3B,CAEJ,GAAE,G","sources":["webpack://@flarum/nicknames/webpack/bootstrap","webpack://@flarum/nicknames/webpack/runtime/compat get default export","webpack://@flarum/nicknames/webpack/runtime/define property getters","webpack://@flarum/nicknames/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/nicknames/webpack/runtime/make namespace object","webpack://@flarum/nicknames/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@flarum/nicknames/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@flarum/nicknames/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@flarum/nicknames/external root \"flarum.reg.get('core', 'common/utils/extractText')\"","webpack://@flarum/nicknames/external root \"flarum.reg.get('core', 'common/utils/Stream')\"","webpack://@flarum/nicknames/external root \"flarum.reg.get('core', 'common/components/FormModal')\"","webpack://@flarum/nicknames/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@flarum/nicknames/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@flarum/nicknames/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@flarum/nicknames/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@flarum/nicknames/../../../framework/core/js/src/common/Component.ts","webpack://@flarum/nicknames/../../../node_modules/clsx/dist/clsx.m.js","webpack://@flarum/nicknames/../../../framework/core/js/src/common/utils/classList.ts","webpack://@flarum/nicknames/../../../framework/core/js/src/common/components/Form.tsx","webpack://@flarum/nicknames/./src/forum/components/NicknameModal.js","webpack://@flarum/nicknames/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@flarum/nicknames/external root \"flarum.reg.get('core', 'common/models/User')\"","webpack://@flarum/nicknames/./src/forum/extend.ts","webpack://@flarum/nicknames/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/extractText');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/Stream');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/FormModal');","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n/**\n * The `Component` class defines a user interface 'building block'. A component\n * generates a virtual DOM to be rendered on each redraw.\n *\n * Essentially, this is a wrapper for Mithril's components that adds several useful features:\n *\n *  - In the `oninit` and `onbeforeupdate` lifecycle hooks, we store vnode attrs in `this.attrs.\n *    This allows us to use attrs across components without having to pass the vnode to every single\n *    method.\n *  - The static `initAttrs` method allows a convenient way to provide defaults (or to otherwise modify)\n *    the attrs that have been passed into a component.\n *  - When the component is created in the DOM, we store its DOM element under `this.element`; this lets\n *    us use jQuery to modify child DOM state from internal methods via the `this.$()` method.\n *  - A convenience `component` method, which serves as an alternative to hyperscript and JSX.\n *\n * As with other Mithril components, components extending Component can be initialized\n * and nested using JSX, hyperscript, or a combination of both. The `component` method can also\n * be used.\n *\n * @example\n * return m('div', <MyComponent foo=\"bar\"><p>Hello World</p></MyComponent>);\n *\n * @example\n * return m('div', MyComponent.component({foo: 'bar'), m('p', 'Hello World!'));\n *\n * @see https://mithril.js.org/components.html\n */\nexport default class Component {\n  constructor() {\n    /**\n     * The root DOM element for the component.\n     */\n    _defineProperty(this, \"element\", void 0);\n    /**\n     * The attributes passed into the component.\n     *\n     * @see https://mithril.js.org/components.html#passing-data-to-components\n     */\n    _defineProperty(this, \"attrs\", void 0);\n    /**\n     * Class component state that is persisted between redraws.\n     *\n     * Updating this will **not** automatically trigger a redraw, unlike\n     * other frameworks.\n     *\n     * This is different to Vnode state, which is always an instance of your\n     * class component.\n     *\n     * This is `undefined` by default.\n     */\n    _defineProperty(this, \"state\", void 0);\n  }\n  /**\n   * @inheritdoc\n   */\n  /**\n   * @inheritdoc\n   */\n  oninit(vnode) {\n    this.setAttrs(vnode.attrs);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  oncreate(vnode) {\n    this.element = vnode.dom;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  onbeforeupdate(vnode) {\n    this.setAttrs(vnode.attrs);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  onupdate(vnode) {}\n\n  /**\n   * @inheritdoc\n   */\n  onbeforeremove(vnode) {}\n\n  /**\n   * @inheritdoc\n   */\n  onremove(vnode) {}\n\n  /**\n   * Returns a jQuery object for this component's element. If you pass in a\n   * selector string, this method will return a jQuery object, using the current\n   * element as its buffer.\n   *\n   * For example, calling `component.$('li')` will return a jQuery object\n   * containing all of the `li` elements inside the DOM element of this\n   * component.\n   *\n   * @param [selector] a jQuery-compatible selector string\n   * @returns the jQuery object for the DOM node\n   * @final\n   */\n  $(selector) {\n    const $element = $(this.element);\n    return selector ? $element.find(selector) : $element;\n  }\n\n  /**\n   * Convenience method to attach a component without JSX.\n   * Has the same effect as calling `m(THIS_CLASS, attrs, children)`.\n   *\n   * @see https://mithril.js.org/hyperscript.html#mselector,-attributes,-children\n   */\n  static component(attrs, children) {\n    if (attrs === void 0) {\n      attrs = {};\n    }\n    if (children === void 0) {\n      children = null;\n    }\n    const componentAttrs = {\n      ...attrs\n    };\n    return m(this, componentAttrs, children);\n  }\n\n  /**\n   * Saves a reference to the vnode attrs after running them through initAttrs,\n   * and checking for common issues.\n   */\n  setAttrs(attrs) {\n    if (attrs === void 0) {\n      attrs = {};\n    }\n    this.constructor.initAttrs(attrs);\n    if (attrs) {\n      if ('children' in attrs) {\n        throw new Error(\"[\".concat(this.constructor.name, \"] The \\\"children\\\" attribute of attrs should never be used. Either pass children in as the vnode children or rename the attribute\"));\n      }\n      if ('tag' in attrs) {\n        throw new Error(\"[\".concat(this.constructor.name, \"] You cannot use the \\\"tag\\\" attribute name with Mithril 2.\"));\n      }\n    }\n    this.attrs = attrs;\n  }\n\n  /**\n   * Initialize the component's attrs.\n   *\n   * This can be used to assign default values for missing, optional attrs.\n   */\n  static initAttrs(attrs) {}\n}\nflarum.reg.add('flarum-nicknames', '../../../../framework/core/js/src/common/Component', Component);","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f);else for(t in e)e[t]&&(n&&(n+=\" \"),n+=t);return n}export function clsx(){for(var e,t,f=0,n=\"\";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import clsx from 'clsx';\n\n/**\n * This util exposes `clsx` to core and extensions as a re-usable utility.\n *\n * For full documentation, see `clsx` on GitHub.\n *\n * @see https://github.com/lukeed/clsx\n */\nconst classList = clsx;\nexport default classList;\nflarum.reg.add('flarum-nicknames', '../../../../framework/core/js/src/common/utils/classList', classList);","import Component from '../Component';\nimport classList from '../utils/classList';\nexport default class Form extends Component {\n  view(vnode) {\n    const {\n      label,\n      description,\n      className,\n      ...attrs\n    } = vnode.attrs;\n    return m(\"div\", Object.assign({\n      className: classList('Form', className)\n    }, attrs), m(\"div\", {\n      className: \"Form-header\"\n    }, label && m(\"label\", null, label), description && m(\"p\", {\n      className: \"helpText\"\n    }, description)), m(\"div\", {\n      className: \"Form-body\"\n    }, vnode.children));\n  }\n}\nflarum.reg.add('flarum-nicknames', '../../../../framework/core/js/src/common/components/Form', Form);","import app from 'flarum/forum/app';\nimport FormModal from 'flarum/common/components/FormModal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nimport Form from '@flarum/core/src/common/components/Form';\nexport default class NicknameModal extends FormModal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.nickname = Stream(app.session.user.displayName());\n  }\n  className() {\n    return 'NickameModal Modal--small';\n  }\n  title() {\n    return app.translator.trans('flarum-nicknames.forum.change_nickname.title');\n  }\n  content() {\n    return m(\"div\", {\n      className: \"Modal-body\"\n    }, m(Form, {\n      className: \"Form--centered\"\n    }, m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"input\", {\n      type: \"text\",\n      autocomplete: \"off\",\n      name: \"nickname\",\n      className: \"FormControl\",\n      bidi: this.nickname,\n      disabled: this.loading\n    })), m(\"div\", {\n      className: \"Form-group Form-controls\"\n    }, m(Button, {\n      className: \"Button Button--primary Button--block\",\n      type: \"submit\",\n      loading: this.loading\n    }, app.translator.trans('flarum-nicknames.forum.change_nickname.submit_button')))));\n  }\n  onsubmit(e) {\n    e.preventDefault();\n    if (this.nickname() === app.session.user.displayName()) {\n      this.hide();\n      return;\n    }\n    this.loading = true;\n    app.session.user.save({\n      nickname: this.nickname()\n    }, {\n      errorHandler: this.onerror.bind(this)\n    }).then(this.hide.bind(this)).catch(() => {\n      this.loading = false;\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('flarum-nicknames', 'forum/components/NicknameModal', NicknameModal);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/User');","import Extend from 'flarum/common/extenders';\nimport User from 'flarum/common/models/User';\nexport default [new Extend.Model(User) //\n.attribute('canEditNickname')];","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Button from 'flarum/common/components/Button';\nimport extractText from 'flarum/common/utils/extractText';\nimport Stream from 'flarum/common/utils/Stream';\nimport NickNameModal from './components/NicknameModal';\nexport { default as extend } from './extend';\napp.initializers.add('flarum-nicknames', () => {\n  extend('flarum/forum/components/SettingsPage', 'accountItems', function (items) {\n    if (app.forum.attribute('displayNameDriver') !== 'nickname') return;\n    if (this.user.canEditNickname()) {\n      items.add('changeNickname', m(Button, {\n        className: \"Button\",\n        onclick: () => app.modal.show(NickNameModal)\n      }, app.translator.trans('flarum-nicknames.forum.settings.change_nickname_button')));\n    }\n  });\n  extend('flarum/common/components/EditUserModal', 'oninit', function () {\n    this.nickname = Stream(this.attrs.user.displayName());\n  });\n  extend('flarum/common/components/EditUserModal', 'fields', function (items) {\n    if (app.forum.attribute('displayNameDriver') !== 'nickname') return;\n    if (!this.attrs.user.canEditNickname()) return;\n    items.add('nickname', m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-nicknames.forum.edit_user.nicknames_heading')), m(\"input\", {\n      className: \"FormControl\",\n      placeholder: extractText(app.translator.trans('flarum-nicknames.forum.edit_user.nicknames_text')),\n      bidi: this.nickname\n    })), 100);\n  });\n  extend('flarum/common/components/EditUserModal', 'data', function (data) {\n    if (app.forum.attribute('displayNameDriver') !== 'nickname') return;\n    if (!this.attrs.user.canEditNickname()) return;\n    if (this.nickname() !== this.attrs.user.displayName()) {\n      data.nickname = this.nickname();\n    }\n  });\n  extend('flarum/forum/components/SignUpModal', 'oninit', function () {\n    if (app.forum.attribute('displayNameDriver') !== 'nickname') return;\n    this.nickname = Stream(this.attrs.username || '');\n  });\n  extend('flarum/forum/components/SignUpModal', 'onready', function () {\n    if (app.forum.attribute('displayNameDriver') !== 'nickname') return;\n    if (app.forum.attribute('setNicknameOnRegistration') && app.forum.attribute('randomizeUsernameOnRegistration')) {\n      this.$('[name=nickname]').select();\n    }\n  });\n  extend('flarum/forum/components/SignUpModal', 'fields', function (items) {\n    if (app.forum.attribute('displayNameDriver') !== 'nickname') return;\n    if (app.forum.attribute('setNicknameOnRegistration')) {\n      items.add('nickname', m(\"div\", {\n        className: \"Form-group\"\n      }, m(\"input\", {\n        className: \"FormControl\",\n        name: \"nickname\",\n        type: \"text\",\n        placeholder: extractText(app.translator.trans('flarum-nicknames.forum.sign_up.nickname_placeholder')),\n        bidi: this.nickname,\n        disabled: this.loading || this.isProvided('nickname'),\n        required: app.forum.attribute('randomizeUsernameOnRegistration')\n      })), 25);\n      if (app.forum.attribute('randomizeUsernameOnRegistration')) {\n        items.remove('username');\n      }\n    }\n  });\n  extend('flarum/forum/components/SignUpModal', 'submitData', function (data) {\n    if (app.forum.attribute('displayNameDriver') !== 'nickname') return;\n    if (app.forum.attribute('setNicknameOnRegistration')) {\n      data.nickname = this.nickname();\n      if (app.forum.attribute('randomizeUsernameOnRegistration')) {\n        const arr = new Uint32Array(2);\n        crypto.getRandomValues(arr);\n        data.username = arr.join('');\n      }\n    }\n  });\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","_typeof","iterator","constructor","_defineProperty","arg","input","hint","prim","toPrimitive","undefined","res","TypeError","String","toPropertyKey","configurable","writable","Component","this","oninit","vnode","setAttrs","attrs","oncreate","element","dom","onbeforeupdate","onupdate","onbeforeremove","onremove","$","selector","$element","find","static","children","componentAttrs","m","initAttrs","Error","concat","name","r","e","t","f","n","Array","isArray","length","add","classList","arguments","Form","view","label","description","className","assign","NicknameModal","super","nickname","title","content","type","autocomplete","bidi","disabled","loading","onsubmit","preventDefault","errorHandler","onerror","bind","then","hide","catch","redraw","attribute","extend","items","user","canEditNickname","onclick","displayName","placeholder","data","username","select","isProvided","required","remove","arr","Uint32Array","crypto","getRandomValues","join"],"sourceRoot":""}