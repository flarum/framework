module.exports=function(t){var n={};function e(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=t,e.c=n,e.d=function(t,n,s){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(s,a,function(n){return t[n]}.bind(null,a));return s},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=11)}([function(t,n){t.exports=flarum.core.compat.app},function(t,n){t.exports=flarum.core.compat["components/Button"]},function(t,n){t.exports=flarum.core.compat["components/Notification"]},function(t,n){t.exports=flarum.core.compat.Model},function(t,n){t.exports=flarum.core.compat["models/User"]},function(t,n){t.exports=flarum.core.compat["utils/withAttr"]},function(t,n){t.exports=flarum.core.compat.extend},function(t,n){t.exports=flarum.core.compat["utils/Stream"]},function(t,n){t.exports=flarum.core.compat["utils/UserControls"]},function(t,n){t.exports=flarum.core.compat["components/Badge"]},function(t,n){t.exports=flarum.core.compat["components/Modal"]},function(t,n,e){"use strict";e.r(n);var s=e(6),a=e(0),r=e.n(a),o=e(8),u=e.n(o),i=e(1),l=e.n(i),p=e(9),c=e.n(p),d=e(3),f=e.n(d),y=e(4),h=e.n(y);function b(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var v=e(10),_=e.n(v),x=e(7),g=e.n(x),j=e(5),S=e.n(j),M=function(t){function n(){return t.apply(this,arguments)||this}b(n,t);var e=n.prototype;return e.oninit=function(n){t.prototype.oninit.call(this,n);var e=this.attrs.user.suspendedUntil(),s=null;new Date>e&&(e=null),e&&(s=9999===e.getFullYear()?"indefinitely":"limited"),this.status=g()(s),this.daysRemaining=g()("limited"===s&&1-dayjs().diff(e,"days"))},e.className=function(){return"SuspendUserModal Modal--small"},e.title=function(){return app.translator.trans("flarum-suspend.forum.suspend_user.title",{user:this.attrs.user})},e.content=function(){var t=this;return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-suspend.forum.suspend_user.status_heading")),m("div",null,m("label",{className:"checkbox"},m("input",{type:"radio",name:"status",checked:!this.status(),value:"",onclick:S()("value",this.status)}),app.translator.trans("flarum-suspend.forum.suspend_user.not_suspended_label")),m("label",{className:"checkbox"},m("input",{type:"radio",name:"status",checked:"indefinitely"===this.status(),value:"indefinitely",onclick:S()("value",this.status)}),app.translator.trans("flarum-suspend.forum.suspend_user.indefinitely_label")),m("label",{className:"checkbox SuspendUserModal-days"},m("input",{type:"radio",name:"status",checked:"limited"===this.status(),value:"limited",onclick:function(n){t.status(n.target.value),m.redraw.sync(),t.$(".SuspendUserModal-days-input input").select(),n.redraw=!1}}),app.translator.trans("flarum-suspend.forum.suspend_user.limited_time_label"),"limited"===this.status()?m("div",{className:"SuspendUserModal-days-input"},m("input",{type:"number",min:"0",value:this.daysRemaining(),oninput:S()("value",this.daysRemaining),className:"FormControl"}),app.translator.trans("flarum-suspend.forum.suspend_user.limited_time_days_text")):""))),m("div",{className:"Form-group"},m(l.a,{className:"Button Button--primary",loading:this.loading,type:"submit"},app.translator.trans("flarum-suspend.forum.suspend_user.submit_button")))))},e.onsubmit=function(t){var n=this;t.preventDefault(),this.loading=!0;var e=null;switch(this.status()){case"indefinitely":e=new Date("2038-01-01");break;case"limited":e=dayjs().add(this.daysRemaining(),"days").toDate()}this.attrs.user.save({suspendedUntil:e}).then((function(){return n.hide()}),this.loaded.bind(this))},n}(_.a),N=e(2),U=e.n(N),k=function(t){function n(){return t.apply(this,arguments)||this}b(n,t);var e=n.prototype;return e.icon=function(){return"fas fa-ban"},e.href=function(){return app.route.user(this.attrs.notification.subject())},e.content=function(){var t=this.attrs.notification,n=t.content(),e=dayjs(n).from(t.createdAt(),!0);return app.translator.trans("flarum-suspend.forum.notifications.user_suspended_text",{timeReadable:e})},n}(U.a),O=function(t){function n(){return t.apply(this,arguments)||this}b(n,t);var e=n.prototype;return e.icon=function(){return"fas fa-ban"},e.href=function(){return app.route.user(this.attrs.notification.subject())},e.content=function(){this.attrs.notification;return app.translator.trans("flarum-suspend.forum.notifications.user_unsuspended_text")},n}(U.a);r.a.initializers.add("flarum-suspend",(function(){r.a.notificationComponents.userSuspended=k,r.a.notificationComponents.userUnsuspended=O,h.a.prototype.canSuspend=f.a.attribute("canSuspend"),h.a.prototype.suspendedUntil=f.a.attribute("suspendedUntil",f.a.transformDate),Object(s.extend)(u.a,"moderationControls",(function(t,n){n.canSuspend()&&t.add("suspend",l.a.component({icon:"fas fa-ban",onclick:function(){return r.a.modal.show(M,{user:n})}},r.a.translator.trans("flarum-suspend.forum.user_controls.suspend_button")))})),Object(s.extend)(h.a.prototype,"badges",(function(t){var n=this.suspendedUntil();new Date<n&&t.add("suspended",c.a.component({icon:"fas fa-ban",type:"suspended",label:r.a.translator.trans("flarum-suspend.forum.user_badge.suspended_tooltip")}))}))}))}]);
//# sourceMappingURL=forum.js.map