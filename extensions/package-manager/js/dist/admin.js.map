{"version":3,"file":"admin.js","mappings":"6BAAoEA,EAAOC,QAAmJ,WAAW,aAAa,IAAIC,EAAEC,EAAEC,EAAE,IAAIC,EAAE,IAAIC,EAAE,KAAKC,EAAE,MAAMC,EAAE,sFAAsFC,EAAE,QAAQC,EAAE,OAAOC,EAAE,sKAAsKC,EAAE,CAACC,MAAMJ,EAAEK,OAAOJ,EAAEK,KAAKR,EAAES,MAAMV,EAAEW,QAAQZ,EAAEa,QAAQd,EAAEe,aAAa,EAAEC,MAAM,QAAQC,EAAE,SAASnB,GAAG,OAAOA,aAAaoB,CAAC,EAAEC,EAAE,SAASrB,EAAEC,EAAEC,GAAG,OAAO,IAAIkB,EAAEpB,EAAEE,EAAED,EAAEqB,GAAG,EAAEC,EAAE,SAASvB,GAAG,OAAOC,EAAEuB,EAAExB,GAAG,GAAG,EAAEyB,EAAE,SAASzB,GAAG,OAAOA,EAAE,CAAC,EAAE0B,EAAE,SAAS1B,GAAG,OAAOyB,EAAEzB,GAAG2B,KAAKC,KAAK5B,GAAG2B,KAAKE,MAAM7B,EAAE,EAAE8B,EAAE,SAAS9B,GAAG,OAAO2B,KAAKI,IAAI/B,EAAE,EAAEgC,EAAE,SAAShC,EAAEC,GAAG,OAAOD,EAAEyB,EAAEzB,GAAG,CAACiC,UAAS,EAAGC,OAAO,GAAGJ,EAAE9B,GAAGC,GAAG,CAACgC,UAAS,EAAGC,OAAO,GAAGlC,EAAEC,GAAG,CAACgC,UAAS,EAAGC,OAAO,GAAG,EAAEd,EAAE,WAAW,SAASK,EAAEzB,EAAEC,EAAEC,GAAG,IAAIC,EAAEgC,KAAK,GAAGA,KAAKC,GAAG,CAAC,EAAED,KAAKb,GAAGpB,OAAE,IAASF,IAAImC,KAAKE,IAAI,EAAEF,KAAKG,yBAAyBrC,EAAE,OAAOoB,EAAErB,EAAEU,EAAEa,EAAEtB,IAAIkC,MAAM,GAAG,iBAAiBnC,EAAE,OAAOmC,KAAKE,IAAIrC,EAAEmC,KAAKG,wBAAwBH,KAAK,GAAG,iBAAiBnC,EAAE,OAAOuC,OAAOC,KAAKxC,GAAGyC,SAAS,SAASxC,GAAGE,EAAEiC,GAAGb,EAAEtB,IAAID,EAAEC,EAAE,IAAIkC,KAAKO,kBAAkBP,KAAK,GAAG,iBAAiBnC,EAAE,CAAC,IAAII,EAAEJ,EAAE2C,MAAMlC,GAAG,GAAGL,EAAE,CAAC,IAAIC,EAAED,EAAEwC,MAAM,GAAGC,KAAK,SAAS7C,GAAG,OAAO,MAAMA,EAAE8C,OAAO9C,GAAG,CAAC,IAAI,OAAOmC,KAAKC,GAAGzB,MAAMN,EAAE,GAAG8B,KAAKC,GAAGxB,OAAOP,EAAE,GAAG8B,KAAKC,GAAGlB,MAAMb,EAAE,GAAG8B,KAAKC,GAAGvB,KAAKR,EAAE,GAAG8B,KAAKC,GAAGtB,MAAMT,EAAE,GAAG8B,KAAKC,GAAGrB,QAAQV,EAAE,GAAG8B,KAAKC,GAAGpB,QAAQX,EAAE,GAAG8B,KAAKO,kBAAkBP,IAAI,CAAC,CAAC,OAAOA,IAAI,CAAC,IAAIL,EAAEL,EAAEsB,UAAU,OAAOjB,EAAEY,gBAAgB,WAAW,IAAI1C,EAAEmC,KAAKA,KAAKE,IAAIE,OAAOC,KAAKL,KAAKC,IAAIY,QAAQ,SAAS/C,EAAEC,GAAG,OAAOD,GAAGD,EAAEoC,GAAGlC,IAAI,GAAGQ,EAAER,EAAE,GAAG,EAAE,EAAE4B,EAAEQ,sBAAsB,WAAW,IAAItC,EAAEmC,KAAKE,IAAIF,KAAKC,GAAGzB,MAAMe,EAAE1B,EAAEO,GAAGP,GAAGO,EAAE4B,KAAKC,GAAGxB,OAAOc,EAAE1B,EAAEQ,GAAGR,GAAGQ,EAAE2B,KAAKC,GAAGvB,KAAKa,EAAE1B,EAAEK,GAAGL,GAAGK,EAAE8B,KAAKC,GAAGtB,MAAMY,EAAE1B,EAAEI,GAAGJ,GAAGI,EAAE+B,KAAKC,GAAGrB,QAAQW,EAAE1B,EAAEG,GAAGH,GAAGG,EAAEgC,KAAKC,GAAGpB,QAAQU,EAAE1B,EAAEE,GAAGF,GAAGE,EAAEiC,KAAKC,GAAGnB,aAAajB,CAAC,EAAE8B,EAAEmB,YAAY,WAAW,IAAIjD,EAAEgC,EAAEG,KAAKC,GAAGzB,MAAM,KAAKV,EAAE+B,EAAEG,KAAKC,GAAGxB,OAAO,KAAKV,GAAGiC,KAAKC,GAAGvB,MAAM,EAAEsB,KAAKC,GAAGlB,QAAQhB,GAAG,EAAEiC,KAAKC,GAAGlB,OAAO,IAAIf,EAAE6B,EAAE9B,EAAE,KAAKE,EAAE4B,EAAEG,KAAKC,GAAGtB,MAAM,KAAKT,EAAE2B,EAAEG,KAAKC,GAAGrB,QAAQ,KAAKT,EAAE6B,KAAKC,GAAGpB,SAAS,EAAEmB,KAAKC,GAAGnB,eAAeX,GAAG6B,KAAKC,GAAGnB,aAAa,IAAIX,EAAEqB,KAAKuB,MAAM,IAAI5C,GAAG,KAAK,IAAIC,EAAEyB,EAAE1B,EAAE,KAAKE,EAAER,EAAEiC,UAAUhC,EAAEgC,UAAU9B,EAAE8B,UAAU7B,EAAE6B,UAAU5B,EAAE4B,UAAU1B,EAAE0B,SAASxB,EAAEL,EAAE8B,QAAQ7B,EAAE6B,QAAQ3B,EAAE2B,OAAO,IAAI,GAAGxB,GAAGF,EAAE,IAAI,IAAI,IAAIR,EAAEkC,OAAOjC,EAAEiC,OAAO/B,EAAE+B,OAAOzB,EAAEL,EAAE8B,OAAO7B,EAAE6B,OAAO3B,EAAE2B,OAAO,MAAM,MAAMxB,GAAG,OAAOA,EAAE,MAAMA,CAAC,EAAEoB,EAAEqB,OAAO,WAAW,OAAOhB,KAAKc,aAAa,EAAEnB,EAAEI,OAAO,SAASlC,GAAG,IAAIE,EAAEF,GAAG,sBAAsBG,EAAE,CAACiD,EAAEjB,KAAKC,GAAGzB,MAAM0C,GAAGpD,EAAEA,EAAEkC,KAAKC,GAAGzB,MAAM,EAAE,KAAK2C,KAAKrD,EAAEA,EAAEkC,KAAKC,GAAGzB,MAAM,EAAE,KAAK4C,EAAEpB,KAAKC,GAAGxB,OAAO4C,GAAGvD,EAAEA,EAAEkC,KAAKC,GAAGxB,OAAO,EAAE,KAAK6C,EAAEtB,KAAKC,GAAGvB,KAAK6C,GAAGzD,EAAEA,EAAEkC,KAAKC,GAAGvB,KAAK,EAAE,KAAK8C,EAAExB,KAAKC,GAAGtB,MAAM8C,GAAG3D,EAAEA,EAAEkC,KAAKC,GAAGtB,MAAM,EAAE,KAAKS,EAAEY,KAAKC,GAAGrB,QAAQ8C,GAAG5D,EAAEA,EAAEkC,KAAKC,GAAGrB,QAAQ,EAAE,KAAKd,EAAEkC,KAAKC,GAAGpB,QAAQ8C,GAAG7D,EAAEA,EAAEkC,KAAKC,GAAGpB,QAAQ,EAAE,KAAK+C,IAAI9D,EAAEA,EAAEkC,KAAKC,GAAGnB,aAAa,EAAE,MAAM,OAAOf,EAAE8D,QAAQ1D,GAAG,SAASN,EAAEC,GAAG,OAAOA,GAAGgE,OAAO9D,EAAEH,GAAG,GAAG,EAAE8B,EAAEoC,GAAG,SAASlE,GAAG,OAAOmC,KAAKE,IAAI3B,EAAEa,EAAEvB,GAAG,EAAE8B,EAAEqC,IAAI,SAASnE,GAAG,IAAIC,EAAEkC,KAAKE,IAAInC,EAAEqB,EAAEvB,GAAG,MAAM,iBAAiBE,EAAED,GAAG,IAAIA,EAAE,UAAUC,EAAEwB,EAAEzB,EAAES,EAAER,IAAIiC,KAAKC,GAAGlC,GAAGD,GAAG,CAAC,EAAE6B,EAAEsC,IAAI,SAASpE,EAAEC,EAAEC,GAAG,IAAIC,EAAE,OAAOA,EAAEF,EAAED,EAAEU,EAAEa,EAAEtB,IAAIkB,EAAEnB,GAAGA,EAAEqC,IAAIhB,EAAErB,EAAEmC,MAAME,IAAIhB,EAAEc,KAAKE,IAAIlC,GAAGD,GAAG,EAAE,GAAGiC,KAAK,EAAEL,EAAEuC,SAAS,SAASrE,EAAEC,GAAG,OAAOkC,KAAKiC,IAAIpE,EAAEC,GAAE,EAAG,EAAE6B,EAAEwC,OAAO,SAAStE,GAAG,IAAIC,EAAEkC,KAAKoC,QAAQ,OAAOtE,EAAEqB,GAAGtB,EAAEC,CAAC,EAAE6B,EAAEyC,MAAM,WAAW,OAAOlD,EAAEc,KAAKE,IAAIF,KAAK,EAAEL,EAAE0C,SAAS,SAASvE,GAAG,OAAOD,IAAIoE,IAAIjC,KAAKE,IAAI,MAAMiC,OAAOnC,KAAKb,IAAImD,SAASxE,EAAE,EAAE6B,EAAE4C,QAAQ,WAAW,OAAOvC,KAAKwC,gBAAgB,EAAE7C,EAAEb,aAAa,WAAW,OAAOkB,KAAKgC,IAAI,eAAe,EAAErC,EAAE6C,eAAe,WAAW,OAAOxC,KAAK+B,GAAG,eAAe,EAAEpC,EAAEd,QAAQ,WAAW,OAAOmB,KAAKgC,IAAI,UAAU,EAAErC,EAAE8C,UAAU,WAAW,OAAOzC,KAAK+B,GAAG,UAAU,EAAEpC,EAAEf,QAAQ,WAAW,OAAOoB,KAAKgC,IAAI,UAAU,EAAErC,EAAE+C,UAAU,WAAW,OAAO1C,KAAK+B,GAAG,UAAU,EAAEpC,EAAEhB,MAAM,WAAW,OAAOqB,KAAKgC,IAAI,QAAQ,EAAErC,EAAEgD,QAAQ,WAAW,OAAO3C,KAAK+B,GAAG,QAAQ,EAAEpC,EAAEjB,KAAK,WAAW,OAAOsB,KAAKgC,IAAI,OAAO,EAAErC,EAAEiD,OAAO,WAAW,OAAO5C,KAAK+B,GAAG,OAAO,EAAEpC,EAAEZ,MAAM,WAAW,OAAOiB,KAAKgC,IAAI,QAAQ,EAAErC,EAAEkD,QAAQ,WAAW,OAAO7C,KAAK+B,GAAG,QAAQ,EAAEpC,EAAElB,OAAO,WAAW,OAAOuB,KAAKgC,IAAI,SAAS,EAAErC,EAAEmD,SAAS,WAAW,OAAO9C,KAAK+B,GAAG,SAAS,EAAEpC,EAAEnB,MAAM,WAAW,OAAOwB,KAAKgC,IAAI,QAAQ,EAAErC,EAAEoD,QAAQ,WAAW,OAAO/C,KAAK+B,GAAG,QAAQ,EAAEzC,CAAC,CAAtxG,GAA0xGD,EAAE,SAASxB,EAAEC,EAAEC,GAAG,OAAOF,EAAEoE,IAAInE,EAAEU,QAAQT,EAAE,KAAKkE,IAAInE,EAAEW,SAASV,EAAE,KAAKkE,IAAInE,EAAEY,OAAOX,EAAE,KAAKkE,IAAInE,EAAEa,QAAQZ,EAAE,KAAKkE,IAAInE,EAAEc,UAAUb,EAAE,KAAKkE,IAAInE,EAAEe,UAAUd,EAAE,KAAKkE,IAAInE,EAAEgB,eAAef,EAAE,KAAK,EAAE,OAAO,SAASA,EAAEC,EAAEC,GAAGJ,EAAEI,EAAEH,EAAEG,IAAI+E,SAAS/E,EAAEgF,SAAS,SAASpF,EAAEC,GAAG,IAAIC,EAAEE,EAAEkE,SAAS,OAAOjD,EAAErB,EAAE,CAACsB,GAAGpB,GAAGD,EAAE,EAAEG,EAAEiF,WAAWlE,EAAE,IAAId,EAAEF,EAAE4C,UAAUqB,IAAI9D,EAAEH,EAAE4C,UAAUsB,SAASlE,EAAE4C,UAAUqB,IAAI,SAASpE,EAAEC,GAAG,OAAOkB,EAAEnB,GAAGwB,EAAEW,KAAKnC,EAAE,GAAGK,EAAEiF,KAAKnD,KAAP9B,CAAaL,EAAEC,EAAE,EAAEE,EAAE4C,UAAUsB,SAAS,SAASrE,EAAEC,GAAG,OAAOkB,EAAEnB,GAAGwB,EAAEW,KAAKnC,GAAG,GAAGM,EAAEgF,KAAKnD,KAAP7B,CAAaN,EAAEC,EAAE,CAAC,CAAC,CAAtpJA,E,GCC/EsF,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAa3F,QAGrB,IAAID,EAASyF,EAAyBE,GAAY,CAGjD1F,QAAS,CAAC,GAOX,OAHA6F,EAAoBH,GAAUI,KAAK/F,EAAOC,QAASD,EAAQA,EAAOC,QAASyF,GAGpE1F,EAAOC,OACf,CCrBAyF,EAAoBtF,EAAKJ,IACxB,IAAIgG,EAAShG,GAAUA,EAAOiG,WAC7B,IAAOjG,EAAiB,QACxB,IAAM,EAEP,OADA0F,EAAoBhF,EAAEsF,EAAQ,CAAErF,EAAGqF,IAC5BA,CAAM,ECLdN,EAAoBhF,EAAI,CAACT,EAASiG,KACjC,IAAI,IAAIC,KAAOD,EACXR,EAAoBlF,EAAE0F,EAAYC,KAAST,EAAoBlF,EAAEP,EAASkG,IAC5E1D,OAAO2D,eAAenG,EAASkG,EAAK,CAAEE,YAAY,EAAMhC,IAAK6B,EAAWC,IAE1E,ECNDT,EAAoBlF,EAAI,CAAC8F,EAAKC,IAAU9D,OAAOQ,UAAUuD,eAAeT,KAAKO,EAAKC,GCClFb,EAAoBnF,EAAKN,IACH,oBAAXwG,QAA0BA,OAAOC,aAC1CjE,OAAO2D,eAAenG,EAASwG,OAAOC,YAAa,CAAEC,MAAO,WAE7DlE,OAAO2D,eAAenG,EAAS,aAAc,CAAE0G,OAAO,GAAO,E,0DCL9D,MAAM,EAA+BC,OAAOC,IAAIxC,IAAI,OAAQ,iBCAtD,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,a,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,kC,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,4B,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,iC,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,kC,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,gB,aCA5D,MAAMyC,EAAa,CAClB,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAGKC,EAAe,CACpB,IACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAGKC,EAAY,CACjB,IACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QAGKC,EAAc,CACnB,IACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,SASKC,EAAiBA,CAACC,EAAQ3C,EAAQ4C,KACvC,IAAIC,EAASF,EAOb,MANsB,iBAAX3C,GAAuB8C,MAAMC,QAAQ/C,GAC/C6C,EAASF,EAAOD,eAAe1C,EAAQ4C,IAClB,IAAX5C,QAA+BqB,IAAZuB,IAC7BC,EAASF,EAAOD,oBAAerB,EAAWuB,IAGpCC,CAAM,EC5DC,MAAMG,UAAa,KAChC,MAAAC,GACE,OAAO,cAAgB,UAAU1B,KAAK1D,KACxC,CACA,SAAAqF,GACE,OAAO,cAAgB,aAAa3B,KAAK1D,KAC3C,CACA,OAAAsF,GACE,OAAO,cAAgB,WAAW5B,KAAK1D,KACzC,CACA,OAAAuF,GACE,OAAO,cAAgB,WAAW7B,KAAK1D,KACzC,CACA,MAAAwF,GACE,OAAO,cAAgB,UAAU9B,KAAK1D,KACxC,CACA,YAAAyF,GACE,OAAO,cAAgB,gBAAgB/B,KAAK1D,KAC9C,CACA,SAAA0F,GACE,OAAO,cAAgB,YAAa,mBAAqBhC,KAAK1D,KAChE,CACA,SAAA2F,GACE,OAAO,cAAgB,YAAa,mBAAqBjC,KAAK1D,KAChE,CACA,UAAA4F,GACE,OAAO,cAAgB,aAAc,mBAAqBlC,KAAK1D,KACjE,CACA,cAAA6F,GACE,ODkCW,SAAqBf,EAAQC,GAC3C,IAAKpE,OAAOmF,SAAShB,GACpB,MAAM,IAAIiB,UAAU,iCAADC,cAAyClB,EAAM,MAAAkB,OAAKlB,IAUxE,MAAMmB,GAPNlB,EAAU,CACTmB,MAAM,EACNC,QAAQ,EACRC,OAAO,KACJrB,IAGkBmB,KAClBnB,EAAQoB,OAASvB,EAAcD,EAC/BI,EAAQoB,OAASzB,EAAeD,EAE9B4B,EAAYtB,EAAQqB,MAAQ,IAAM,GAExC,GAAIrB,EAAQuB,QAAqB,IAAXxB,EACrB,MAAO,KAAPkB,OAAYK,GAASL,OAAGC,EAAM,IAG/B,MAAMM,EAAazB,EAAS,EACtB0B,EAASD,EAAa,IAAOxB,EAAQuB,OAAS,IAAM,GAM1D,IAAIG,EAUJ,GAdIF,IACHzB,GAAUA,QAK2BtB,IAAlCuB,EAAQ2B,wBACXD,EAAgB,CAACC,sBAAuB3B,EAAQ2B,6BAGXlD,IAAlCuB,EAAQ4B,wBACXF,EAAgB,CAACE,sBAAuB5B,EAAQ4B,yBAA0BF,IAGvE3B,EAAS,EAEZ,OAAO0B,EADc3B,EAAeC,EAAQC,EAAQ5C,OAAQsE,GAC7BJ,EAAYJ,EAAM,GAGlD,MAAMW,EAAWpH,KAAKqH,IAAIrH,KAAKE,MAAMqF,EAAQoB,OAAS3G,KAAKsH,IAAIhC,GAAUtF,KAAKsH,IAAI,MAAQtH,KAAKuH,MAAMjC,GAAU,GAAImB,EAAMe,OAAS,GAWlI,OAVAlC,IAAWC,EAAQoB,OAAS,KAAO,MAASS,EAEvCH,IACJ3B,EAASA,EAAOmC,YAAY,IAOtBT,EAJc3B,EAAelE,OAAOmE,GAASC,EAAQ5C,OAAQsE,GAIrCJ,EAFlBJ,EAAMW,EAGpB,CC1FWM,CAA2D,KAA/C,cAAgB,kBAAkBxD,KAAK1D,MAC5D,EC5Ba,SAASmH,IACtB,UAAUC,QACVhI,EAAEiI,MAAMC,IAAI,UAAU,YAAa,CACjCC,GAAI,8BAEN,qBAAqBC,MAAMC,KAAK,CAAC,GAAG,GACpCC,YAAW,KACT,IAAIC,EACkF,OAArFA,EAAwBC,SAASC,eAAe,mCAA6CF,EAAsBG,eAAe,CACjIC,MAAO,WACP,GACD,IACL,CChBe,SAASC,EAAQ7J,GAG9B,OAAO6J,EAAU,mBAAqB5D,QAAU,iBAAmBA,OAAO6D,SAAW,SAAU9J,GAC7F,cAAcA,CAChB,EAAI,SAAUA,GACZ,OAAOA,GAAK,mBAAqBiG,QAAUjG,EAAE+J,cAAgB9D,QAAUjG,IAAMiG,OAAOxD,UAAY,gBAAkBzC,CACpH,EAAG6J,EAAQ7J,EACb,CCPe,SAASgK,EAAgBlE,EAAKH,EAAKQ,GAYhD,OCVItG,ECFS,SAAqBH,EAAGK,GACrC,GAAI,UAAY8J,EAAQnK,KAAOA,EAAG,OAAOA,EACzC,IAAII,EAAIJ,EAAEuG,OAAOgE,aACjB,QAAI,IAAWnK,EAAG,CAChB,IAAID,EAAIC,EAAEyF,KAAK7F,EAAGK,UAClB,GAAI,UAAY8J,EAAQhK,GAAI,OAAOA,EACnC,MAAM,IAAI+H,UAAU,+CACtB,CACA,OAAyBjE,OAAiBjE,EAC5C,CDPUuK,CDDYtE,IAApBA,ECEO,UAAYkE,EAAQhK,GAAKA,EAAIA,EAAI,MDD7BiG,EACT7D,OAAO2D,eAAeE,EAAKH,EAAK,CAC9BQ,MAAOA,EACPN,YAAY,EACZqE,cAAc,EACdC,UAAU,IAGZrE,EAAIH,GAAOQ,EAENL,ECXM,IACTjG,CDWN,CHoBAuG,OAAOC,IAAIvC,IAAI,2BAA4B,oBAAqBkD,GC/BhEoD,OAAOpB,YAAcA,EAcrB5C,OAAOC,IAAIvC,IAAI,2BAA4B,0BAA2BkF,GKfvD,MAAMqB,EACnB,WAAAN,GACEC,EAAgBnI,KAAM,UAAW,MACjCmI,EAAgBnI,KAAM,QAAS,MAC/BmI,EAAgBnI,KAAM,QAAS,IAC/BmI,EAAgBnI,KAAM,SAAU,GAChCmI,EAAgBnI,KAAM,QAAS,EACjC,CACA,IAAAyH,CAAKgB,EAAQC,GACX,IAAIC,EAaJ,YAZoB,IAAhBD,IACFA,GAAc,GAEhB1I,KAAK4I,MAAQ,KACbH,EAAS,CACPI,KAAM,CACJC,MAAO9I,KAAK8I,MACZC,OAAQ/I,KAAK+I,UACa,OAArBJ,EAAUF,QAAkB,EAASE,EAAQE,SAEjDJ,GAEE,UAAUO,KAAK,0BAA2BP,GAAU,CAAC,GAAGQ,MAAKC,IAClE,IAAIC,EAiBJ,OAhBAnJ,KAAK4I,MAAQM,EACblJ,KAAKoJ,OAAqD,OAA3CD,EAAqBD,EAAKG,QAAQC,WAAgB,EAASH,EAAmBC,QAAU,EACvGhK,EAAEmK,UAG0B,MAARL,OAAe,EAASA,EAAKF,MAAKQ,GAA0B,YAAlBA,EAAKpE,UAA4C,YAAlBoE,EAAKpE,YAEhGpF,KAAKyJ,UAAUf,GACNA,GACT,qBAAqBgB,QAAQC,WAAW,MAGxCpB,OAAOqB,SAASC,UACP,qBAAqBH,QAAQI,aACtC,qBAAqBJ,QAAQC,WAAW,MAEnCT,CAAI,GAEf,CACA,QAAAa,GACE,OAAO/J,KAAK4I,KACd,CACA,aAAAoB,GACE,OAAOxK,KAAKC,KAAKO,KAAKoJ,MAAQpJ,KAAK8I,MACrC,CACA,UAAAmB,GACE,OAAOzK,KAAKC,KAAKO,KAAK+I,OAAS/I,KAAK8I,MACtC,CACA,OAAAoB,GACE,OAA6B,IAAtBlK,KAAKiK,YACd,CACA,OAAAE,GACE,OAAOnK,KAAK+I,OAAS/I,KAAK8I,MAAQ9I,KAAKoJ,KACzC,CACA,IAAAgB,GACMpK,KAAKkK,YACPlK,KAAK+I,QAAU/I,KAAK8I,MACpB9I,KAAKyH,OAET,CACA,IAAA4C,GACMrK,KAAKmK,YACPnK,KAAK+I,QAAU/I,KAAK8I,MACpB9I,KAAKyH,OAET,CACA,SAAAgC,CAAUf,QACY,IAAhBA,IACFA,GAAc,GAEZ1I,KAAKsK,SACPC,aAAavK,KAAKsK,SAEpBtK,KAAKsK,QAAU5C,YAAW,KACxB1H,KAAKyH,KAAK,CAAC,EAAGiB,EAAY,GACzB,IACL,CACA,UAAA8B,GACE,IAAIC,EACJ,QAAwC,OAA7BA,EAAczK,KAAK4I,SAAkB6B,EAAYzB,MAAKQ,GAA0B,YAAlBA,EAAKpE,UAA4C,YAAlBoE,EAAKpE,WAC/G,ECrFa,SAAS,EAACnH,GACvB,qBAAqByL,QAAQC,WAAW,MACxC,MAAMe,EAAQzM,EAAE0M,SAASC,OAAO,GAChC,IAAK,CAAC,2BAA4B,8BAA+B,2BAA2BC,SAASH,EAAMI,MACzG,MAAM7M,EAGR,OADA,WAAW8M,QACHL,EAAMI,MACZ,IAAK,2BACCJ,EAAMM,eACR,WAAWC,KAAK,CACdC,KAAM,SACL,eAAeC,MAAM,2DAA2DnF,OAAO0E,EAAMM,iBAChG,UAAU5D,SAEV,WAAW6D,KAAK,CACdC,KAAM,SACL,eAAeC,MAAM,uEAE1B,MACF,IAAK,8BACH,WAAWF,KAAK,CACdC,KAAM,SACL,eAAeC,MAAM,0EACxB,UAAU/D,QACV,MACF,IAAK,0BACH,WAAW6D,KAAK,CACdC,KAAM,SACL,eAAeC,MAAM,sEACxB,UAAU/D,QAEhB,CDuDA7C,OAAOC,IAAIvC,IAAI,2BAA4B,0BAA2BuG,GExFtE,MAAM,EAA+BjE,OAAOC,IAAIxC,IAAI,OAAQ,4B,aCM7C,MAAMoJ,EACnB,iBAAIC,GACF,MAAMA,EAAgBC,KAAKC,MAAM,SAASC,SAAS,6CAEnD,OADAH,EAAcI,gBAAkB,IAAM,IAAIJ,EAAcK,MAAMD,mBAAoBJ,EAAcM,MAAMF,mBAAoBJ,EAAcO,OAAOH,iBACxIJ,CACT,CACA,WAAAnD,GACEC,EAAgBnI,KAAM,UAAW,MACjCmI,EAAgBnI,KAAM,iBAAkB,CAAC,GACzCmI,EAAgBnI,KAAM,uBAAmB,GACzCmI,EAAgBnI,KAAM,wBAAoB,GAC1CmI,EAAgBnI,KAAM,aAAc,MACpCA,KAAK6L,gBAAkBP,KAAKC,MAAM,SAASC,SAAS,+CACpDxL,KAAK8L,iBAAmB9L,KAAK+L,uBAAuB/L,KAAK6L,iBACzD7L,KAAKgM,WAAahM,KAAKiM,iBAAiBjM,KAAK6L,gBAC/C,CACA,SAAA/B,CAAUoC,GAIR,YAHa,IAATA,IACFA,EAAO,MAEFA,GAAQlM,KAAKmM,UAAYD,IAASA,GAAyB,OAAjBlM,KAAKmM,OACxD,CACA,mBAAAC,GACE,OAAOpM,KAAK8J,aAAe,qBAAqBtC,MAAMgD,YACxD,CACA,UAAAb,CAAWuC,GACTlM,KAAKmM,QAAUD,CACjB,CACA,cAAAG,CAAenD,GACb,qBAAqBQ,QAAQC,WAAW,qBACxC,UAAUsB,KAAK,KACf,YAAY,CACVqB,OAAQ,OACRC,IAAK,GAAGvG,OAAO,UAAUwG,UAAU,UAAW,iCAC9CC,KAAM,CACJvD,UAEDD,MAAK0B,IACN,GAAIA,EAAS+B,WACXvF,QACK,CACL,MAAMwF,EAAchC,EAASpD,GAC7B,WAAW0D,KAAK,CACdC,KAAM,WACL,eAAeC,MAAM,+DAAgE,CACtFyB,UAAWD,KAEbpE,OAAOqB,SAASiD,KAAO,GAAG7G,OAAO,UAAUwG,UAAU,YAAa,gBAAgBxG,OAAO2G,GACzFpE,OAAOqB,SAASC,QAClB,KACCiD,MAAMC,GAAcC,SAAQ,KAC7B,UAAU5F,QACVhI,EAAEmK,QAAQ,GAEd,CACA,eAAA0D,GACEjN,KAAK2J,WAAW,SAChB,YAAY,CACV2C,OAAQ,OACRC,IAAK,GAAGvG,OAAO,UAAUwG,UAAU,UAAW,0CAC7CvD,MAAK0B,IACFA,EAAS+B,WACXvF,KAEAnH,KAAK6L,gBAAkBlB,EACvB3K,KAAK8L,iBAAmB9L,KAAK+L,uBAAuBpB,GACpD3K,KAAKgM,WAAahM,KAAKiM,iBAAiBtB,GACxC3K,KAAK2J,WAAW,MAChBvK,EAAEmK,SACJ,IACCuD,MAAMC,GAAcC,SAAQ,KAC7B5N,EAAEmK,QAAQ,GAEd,CACA,eAAA2D,GACMC,QAAQ,IAAY,eAAehC,MAAM,wEAC3C,UAAUF,KAAK,KACfjL,KAAK2J,WAAW,gBAChB,YAAY,CACV2C,OAAQ,OACRC,IAAK,GAAGvG,OAAO,UAAUwG,UAAU,UAAW,qCAC7CvD,MAAK0B,IACU,MAAZA,GAAoBA,EAAS+B,WAC/BvF,KAEA,WAAW8D,KAAK,CACdC,KAAM,WACL,eAAeC,MAAM,qDACxB5C,OAAOqB,SAASC,SAClB,IACCiD,MAAMC,GAAcC,SAAQ,KAC7B,UAAU5F,QACVhI,EAAEmK,QAAQ,IAGhB,CACA,eAAA6D,CAAgBR,EAAWS,GACzB,UAAUpC,KAAK,KACfjL,KAAK2J,WAAW,oBAChB,YAAY,CACV2C,OAAQ,QACRC,IAAK,GAAGvG,OAAO,UAAUwG,UAAU,UAAW,kCAAkCxG,OAAO4G,EAAUrF,IACjGkF,KAAM,CACJvD,KAAM,CACJmE,iBAGHpE,MAAK0B,IACU,MAAZA,GAAoBA,EAAS+B,WAC/BvF,KAEA,WAAW8D,KAAK,CACdC,KAAM,WACL,eAAeC,MAAM,8DAA+D,CACrFyB,UAAWA,EAAUU,MAAM,oBAAoBC,SAEjDhF,OAAOqB,SAASC,SAClB,IACCiD,MAAMC,GAAcC,SAAQ,KAC7B,UAAU5F,QACVhI,EAAEmK,QAAQ,GAEd,CACA,cAAAiE,GACE,UAAUvC,KAAK,KACfjL,KAAK2J,WAAW,iBAChB,YAAY,CACV2C,OAAQ,OACRC,IAAK,GAAGvG,OAAO,UAAUwG,UAAU,UAAW,sCAC7CvD,MAAK0B,IACU,MAAZA,GAAoBA,EAAS+B,WAC/BvF,KAEA,WAAW8D,KAAK,CACdC,KAAM,WACL,eAAeC,MAAM,oEACxB5C,OAAOqB,SAASC,SAClB,IACCiD,MAAMC,GAAcC,SAAQ,KAC7B,UAAU5F,QACVhI,EAAEmK,QAAQ,GAEd,CACA,sBAAAwC,CAAuBF,GACrB,IAAI4B,EAWJ,OAVAzN,KAAK0N,eAAiB,CAAC,EACJ,MAAnB7B,GAAgF,OAApD4B,EAAwB5B,EAAgB8B,UAAiF,OAA5DF,EAAwBA,EAAsBG,YAAsBH,EAAsBI,QAAOC,IACxL,MAAMvG,EAAKuG,EAAgB5B,KAAKrK,QAAQ,IAAK,KAAKA,QAAQ,0BAA2B,IAC/E+K,EAAY,SAASmB,WAAWxG,GAChCyG,EAAe,CAAC,qBAAsB,mBAAmBnD,SAASiD,EAAgB,kBAIxF,OAHIlB,GAAaoB,IACfhO,KAAK0N,eAAed,EAAUrF,IAAMuG,GAE/BlB,GAAaoB,CAAY,IAE3B5N,OAAO6N,OAAO,SAASF,YAAYF,QAAOjB,GAAa5M,KAAK0N,eAAed,EAAUrF,KAC9F,CACA,gBAAA0E,CAAiBJ,GACf,IAAIqC,EACJ,MAAMC,EAA0B,MAAnBtC,GAAiF,OAArDqC,EAAyBrC,EAAgB8B,UAAmF,OAA9DO,EAAyBA,EAAuBN,gBAAqB,EAASM,EAAuBL,QAAOC,GAA4C,gBAAzBA,EAAgB5B,OAAwBkC,MAC9Q,OAAKD,EACE,CACL5I,QAAS4I,EACTvB,UAAW,CACTrF,GAAI,cACJ2E,KAAM,cACNmC,QAAS,SAAS7C,SAAS6C,QAC3BC,KAAM,CAEJC,gBAAiB,OAAOvI,OAAO,SAASwI,UAAU,GAAe,WAAW,QAAG,2DAEjFlB,MAAO,CACL,mBAAoB,CAClBC,MAAO,IAAY,eAAepC,MAAM,sDAb9B,IAkBpB,CACA,WAAAsD,CAAYC,GACV,IAAI,OACFC,GACED,EACJ,qBAAqBhF,QAAQC,WAAWgF,EAAS,uBAAyB,gBAC1E,UAAU1D,KAAK,KACf,MAAM2D,EAAc5O,KAAKqL,cAAcK,MACvC,YAAY,CACVY,OAAQ,OACRC,IAAK,GAAGvG,OAAO,UAAUwG,UAAU,UAAW,mCAC9CC,KAAM,CACJvD,KAAM,CACJyF,aAGH1F,MAAK0B,IACU,MAAZA,GAAoBA,EAAS+B,WAC/BvF,KAEA,WAAW8D,KAAK,CACdC,KAAM,WACL,eAAeC,MAAM,qDACxB5C,OAAOqB,SAASC,SAClB,IACCiD,MAAMC,GAAcD,OAAM7O,IAC3B,IAAI4Q,EACJ,UAAUzH,QACVwH,EAAYxJ,OAAS,UACrBwJ,EAAYE,uBAAuD,OAA7BD,EAAc5Q,EAAE0M,WAA2D,OAArCkE,EAAcA,EAAYjE,SAAwD,OAApCiE,EAAcA,EAAYT,YAAiB,EAASS,EAAYE,uBAAuB,IAChN/B,SAAQ,KACT5N,EAAEmK,QAAQ,GAEd,EAEFhF,OAAOC,IAAIvC,IAAI,2BAA4B,mCAAoCmJ,GCxNhE,MAAM4D,EACnB,WAAA9G,GACEC,EAAgBnI,KAAM,QAAS,IAAIwI,GACnCL,EAAgBnI,KAAM,UAAW,IAAIoL,EACvC,EAEF7G,OAAOC,IAAIvC,IAAI,2BAA4B,qCAAsC+M,GCTjF,MAAM,EAA+BzK,OAAOC,IAAIxC,IAAI,OAAQ,oB,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,oB,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,sC,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,6B,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,0B,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,yB,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,0B,aCA5D,MAAM,EAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,0B,aCE7C,MAAMiN,UAAc,KACjC,IAAAC,CAAKC,GACH,MAAM,UACJC,EAAS,KACTlE,KACGmE,GACDrP,KAAKqP,MACT,OAAOjQ,EAAE,OAAQgB,OAAOkP,OAAO,CAC7BF,UAAW,IAAU,CAAC,QAAS,UAAUpJ,OAAOhG,KAAKqP,MAAMnE,MAAOkE,KACjEC,GAAQF,EAAMI,SACnB,EAEFhL,OAAOC,IAAIvC,IAAI,2BAA4B,yBAA0BgN,GCdrE,MAAM,EAA+B1K,OAAOC,IAAIxC,IAAI,OAAQ,2B,aCE7C,MAAMwN,UAAwB,KAC3C,SAAAJ,GACE,MAAO,yBACT,CACA,KAAA7B,GACE,OAAO,eAAepC,MAAM,4DAA4DnF,OAAOhG,KAAKqP,MAAM7F,KAAKnE,aACjH,CACA,OAAAoK,GACE,OAAOrQ,EAAE,MAAO,CACdgQ,UAAW,cACVhQ,EAAE,MAAO,CACVgQ,UAAW,wBACmB,YAA7BpP,KAAKqP,MAAM7F,KAAKpE,UAA0BhG,EAAE,MAAO,CACpDgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,6EAA8E/L,EAAE,MAAO,CAC9HgQ,UAAW,kDACVpP,KAAKqP,MAAM7F,KAAK/D,gBAAkB,eAAe0F,MAAM,2DAA6DnL,KAAKqP,MAAM7F,KAAK/D,iBAAmB,eAAe0F,MAAM,8EAA+E/L,EAAE,MAAO,CACrQgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,uEAAwE/L,EAAE,MAAO,CACxHgQ,UAAW,4CACVhQ,EAAE,OAAQ,KAAM,cAAeY,KAAKqP,MAAM7F,KAAKlE,aAAclG,EAAE,MAAO,CACvEgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,sEAAuE/L,EAAE,MAAO,CACvHgQ,UAAW,2CACVhQ,EAAE,OAAQ,KAAMA,EAAE,MAAO,KAAMY,KAAKqP,MAAM7F,KAAKhE,cACpD,EAEFjB,OAAOC,IAAIvC,IAAI,2BAA4B,mCAAoCuN,G,sBC5BhE,SAASE,EAAcC,EAAOC,GAC3CC,MAAMC,OAAO,KACb,MAAMC,EAAeF,MAAMD,GAAKI,KAAKL,GACrC,OAAOE,MAAM5M,SAAS8M,GAAc1N,UACtC,CACAkC,OAAOC,IAAIvC,IAAI,2BAA4B,4BAA6ByN,GCAzD,MAAMO,WAAmB,KACtC,IAAAf,GACE,OAAO9P,EAAE,MAAO,CACdgQ,UAAW,0CACVhQ,EAAE,IAAQ,CACX8Q,UAAWlQ,KAAKqP,MAAMc,KAAKjG,WAAa,qBAAqBR,QAAQI,YACrEyD,MAAO,eAAepC,MAAM,2CAC5BiF,QAAS,IAAMpQ,KAAKqP,MAAMc,KAAK/F,OAC/BkE,KAAM,sBACNc,UAAW,6CACThQ,EAAE,OAAQ,CACZgQ,UAAW,2BACV,eAAejE,MAAM,2CAA4C,CAClEkF,QAASrQ,KAAKqP,MAAMc,KAAKlG,aAAe,EACxCb,MAAOpJ,KAAKqP,MAAMc,KAAKnG,mBACpB5K,EAAE,IAAQ,CACb8Q,UAAWlQ,KAAKqP,MAAMc,KAAKhG,WAAa,qBAAqBT,QAAQI,YACrEyD,MAAO,eAAepC,MAAM,2CAC5BiF,QAAS,IAAMpQ,KAAKqP,MAAMc,KAAK9F,OAC/BiE,KAAM,uBACNc,UAAW,6CAEf,EAEF7K,OAAOC,IAAIvC,IAAI,2BAA4B,8BAA+BgO,ICjB3D,MAAMK,WAAqB,KACxC,MAAAC,CAAOpB,GACLqB,MAAMD,OAAOpB,GACb,qBAAqB3H,MAAMC,MAC7B,CACA,IAAAyH,GACE,OAAO9P,EAAE,UAAW,CAClBmI,GAAI,gCACJ6H,UAAW,2DACVhQ,EAAE,MAAO,CACVgQ,UAAW,yEACVhQ,EAAE,MAAO,CACVgQ,UAAW,aACVhQ,EAAE,KAAM,CACTgQ,UAAW,kBACV,eAAejE,MAAM,wDAAyD/L,EAAE,IAAQ,CACzFgQ,UAAW,sBACXd,KAAM,kBACN8B,QAAS,IAAM,qBAAqB5I,MAAMC,OAC1C,aAAc,eAAe0D,MAAM,yDACnC+E,SAAU,qBAAqBxG,QAAQI,gBACnC1K,EAAE,MAAO,CACbgQ,UAAW,aACVpP,KAAKyQ,cACV,CACA,OAAAC,GACE,MAAMC,EAAQ,IAAI,KA4ElB,OA3EAA,EAAM1O,IAAI,YAAa,CACrB2O,MAAO,IAAY,eAAezF,MAAM,oEACxCsE,QAASjG,GAAQpK,EAAE,MAAO,CACxBgQ,UAAW,yCACVhQ,EAAE,OAAQ,CACXgQ,UAAW,8CACVpP,KAAK6Q,cAAcrH,EAAKnE,cAAejG,EAAE,OAAQ,CAClDgQ,UAAW,8CACV,eAAejE,MAAM,4DAA4DnF,OAAOwD,EAAKnE,iBAC/F,IACHsL,EAAM1O,IAAI,UAAW,CACnB2O,MAAO,IAAY,eAAezF,MAAM,kEACxCsE,QAASjG,IACP,IAAIsH,EACJ,MAAMlE,EAAY,SAASmB,WAA+C,OAAnC+C,EAAgBtH,EAAKjE,gBAAqB,EAASuL,EAAcjP,QAAQ,gCAAiC,MACjJ,OAAO+K,EAAYxN,EAAE,IAAM,CACzBgQ,UAAW,sCACXvC,KAAM,UAAU,YAAa,CAC3BtF,GAAIqF,EAAUrF,MAEfnI,EAAE,MAAO,CACVgQ,UAAW,yDACX2B,MAAOnE,EAAU0B,QACd1B,EAAU0B,MAAQlP,EAAE,IAAM,CAC7B8M,KAAMU,EAAU0B,KAAKpC,QAClB9M,EAAE,MAAO,CACZgQ,UAAW,+CACVhQ,EAAE,OAAQ,CACXgQ,UAAW,6CACVxC,EAAUU,MAAM,oBAAoBC,OAAQnO,EAAE,OAAQ,CACvDgQ,UAAW,4CACV5F,EAAKjE,aAAeiE,EAAKjE,SAAS,GAEtC,IACHoL,EAAM1O,IAAI,SAAU,CAClB2O,MAAO,IAAY,eAAezF,MAAM,iEACxCsE,QAASjG,GAAQpK,EAAE,IAAK,KAAMA,EAAE6P,EAAO,CACrCG,UAAW,qCACXlE,KAAM,CACJ8F,QAAS,UACTC,QAAS,QACTC,QAAS,UACTC,QAAS,WACT3H,EAAKpE,WACN,eAAe+F,MAAM,0DAA0DnF,OAAOwD,EAAKpE,YAAa,CAAC,UAAW,WAAWyF,SAASrB,EAAKpE,WAAahG,EAAE,IAAkB,CAC/KgS,KAAM,QACNC,QAAS,aAEV,IACHV,EAAM1O,IAAI,cAAe,CACvB2O,MAAO,IAAY,eAAezF,MAAM,uEACxCsE,QAASjG,GAASA,EAAK7D,aAAgB6D,EAAK5D,aAAyGxG,EAAE,IAAS,CAC9JkS,KAAM,GAAGtL,OAAO6J,MAAMrG,EAAK7D,aAAa5F,OAAO,UAAW,MAAMiG,OAAO6J,MAAMrG,EAAK5D,cAAc7F,OAAO,YACtGX,EAAE,OAAQ,KAAMsQ,EAAclG,EAAK7D,YAAa6D,EAAK5D,gBAFG,eAAeuF,MAAM,oEAG/E,IACHwF,EAAM1O,IAAI,aAAc,CACtB2O,MAAO,IAAY,eAAezF,MAAM,2EACxCsE,QAASjG,GAAQpK,EAAE,OAAQ,KAAMoK,EAAK3D,mBACrC,IACH8K,EAAM1O,IAAI,UAAW,CACnB2O,MAAO,IAAY,eAAezF,MAAM,kEACxCsE,QAASjG,GAAQpK,EAAE,IAAQ,CACzBgQ,UAAW,0CACXd,KAAM,kBACN,aAAc,eAAenD,MAAM,iEAInCiF,QAAS,IAAM,UAAUnF,KAAKuE,EAAiB,CAC7ChG,SAEF0G,SAAU,CAAC,UAAW,WAAWrF,SAASrB,EAAKpE,YAEjDgK,UAAW,kBACV,IACIuB,CACT,CACA,UAAAF,GACE,MAAM7H,EAAQ,qBAAqBpB,MAAMuC,WACzC,IAAKnB,EACH,OAAOxJ,EAAE,IAAkB,MAE7B,GAAIwJ,IAAUA,EAAM5B,OAClB,OAAO5H,EAAE,KAAM,CACbgQ,UAAW,2BACV,eAAejE,MAAM,uDAE1B,MAAMuF,EAAU1Q,KAAK0Q,UACrB,OAAOtR,EAAE,IAAK,KAAMA,EAAE,QAAS,CAC7BgQ,UAAW,qCACVhQ,EAAE,QAAS,KAAMA,EAAE,KAAM,KAAMsR,EAAQa,UAAU7Q,KAAI,CAAC8Q,EAAMC,IAAUrS,EAAE,KAAM,CAC/E0E,IAAK2N,GACJD,EAAKZ,WAAWxR,EAAE,QAAS,KAAMwJ,EAAMlI,KAAI,CAAC8I,EAAMiI,IAAUrS,EAAE,KAAM,CACrE0E,IAAK2N,GACJf,EAAQa,UAAU7Q,KAAI,CAAC8Q,EAAMC,KAC9B,MAAM,MACJb,EAAK,QACLnB,KACGJ,GACDmC,EACJ,OAAOpS,EAAE,KAAMgB,OAAOkP,OAAO,CAC3BxL,IAAK2N,GACJpC,GAAQI,EAAQjG,GAAM,SACnBpK,EAAE6Q,GAAY,CACpBE,KAAM,qBAAqB3I,QAE/B,CACA,aAAAqJ,CAAcxL,GACZ,OAAOjG,EAAE,IAAM,CACb8M,KAAM,CACJwF,aAAc,kBACdC,aAAc,cACdC,aAAc,cACdC,cAAe,cACfC,kBAAmB,kBACnBC,iBAAkB,eAClBC,iBAAkB,6BAClBC,QAAS,6BACT5M,IAEN,EAEFd,OAAOC,IAAIvC,IAAI,2BAA4B,gCAAiCqO,IClK5E,MAAM,GAA+B/L,OAAOC,IAAIxC,IAAI,OAAQ,2B,eCA5D,MAAM,GAA+BuC,OAAOC,IAAIxC,IAAI,OAAQ,uB,eCK7C,MAAMkQ,WAAkB,KACrC,WAAAhK,GACEsI,SAAS2B,WACThK,EAAgBnI,KAAM,mBAAe,EACvC,CACA,MAAAuQ,CAAOpB,GACLqB,MAAMD,OAAOpB,GACbnP,KAAKoS,YAAc,KAAO,GAC5B,CACA,IAAAlD,GACE,OAAO9P,EAAE,MAAO,CACdgQ,UAAW,yCACVhQ,EAAE,QAAS,CACZiT,QAAS,qBACR,eAAelH,MAAM,sDAAuD/L,EAAE,MAAO,CACtFgQ,UAAW,YACV,eAAejE,MAAM,yDAA0D,CAChFmH,UAAWlT,EAAE,IAAK,CAChByN,KAAM,yBACL,iBACH0F,cAAenT,EAAE,IAAK,CACpByN,KAAM,+BAER/B,KAAM1L,EAAE,OAAQ,SACbA,EAAE,MAAO,CACZgQ,UAAW,yBACVhQ,EAAE,QAAS,CACZgQ,UAAW,cACX7H,GAAI,oBACJiL,YAAa,sBACbC,KAAMzS,KAAKoS,cACThT,EAAE,IAAQ,CACZgQ,UAAW,SACXd,KAAM,kBACN8B,QAASpQ,KAAK0S,SAASvP,KAAKnD,MAC5BmM,QAAS,qBAAqBzC,QAAQI,UAAU,qBAChDoG,SAAU,qBAAqBxG,QAAQ0C,uBACtC,eAAejB,MAAM,uDAC1B,CACA,IAAAjC,GACE,MAAO,CACL3D,QAASvF,KAAKoS,cAElB,CACA,QAAAM,GACE,qBAAqBhJ,QAAQ2C,eAAerM,KAAKkJ,OACnD,EAEF3E,OAAOC,IAAIvC,IAAI,2BAA4B,6BAA8BiQ,ICrDzE,MAAM,GAA+B3N,OAAOC,IAAIxC,IAAI,OAAQ,4B,eCK7C,MAAM2Q,WAAoB,KACvC,WAAAzK,GACEsI,SAAS2B,WACThK,EAAgBnI,KAAM,WAAW,GACjCmI,EAAgBnI,KAAM,SAAU,KAClC,CACA,SAAAoP,GACE,MAAO,0BACT,CACA,KAAA7B,GACE,OAAO,eAAepC,MAAM,qDAC9B,CACA,QAAAyH,CAASzD,GACPqB,MAAMoC,SAASzD,GACfnP,KAAK6S,eACP,CACA,OAAApD,GACE,OAAOrQ,EAAE,MAAO,CACdgQ,UAAW,cACVpP,KAAKmM,QAAU/M,EAAE,IAAkB,MAAQA,EAAE,MAAO,CACrDgQ,UAAW,wBACVpP,KAAK8S,QACV,CACA,aAAAD,GACE,YAAY,CACVvG,OAAQ,OACRC,IAAK,GAAGvG,OAAO,UAAUwG,UAAU,UAAW,8BAC9CC,KAAM,CACJvD,KAAM,CACJ3D,QAASvF,KAAKqP,MAAM9J,YAGvB0D,MAAK0B,IACN3K,KAAKmM,SAAU,EACfnM,KAAK8S,OAASnI,EAASzB,KAAK6J,OAC5B3T,EAAEmK,QAAQ,IACTuD,MAAMC,EACX,EAEFxI,OAAOC,IAAIvC,IAAI,2BAA4B,+BAAgC0Q,IC5C3E,MAAM,GAA+BpO,OAAOC,IAAIxC,IAAI,OAAQ,8B,eCS7C,MAAMgR,WAAsB,KACzC,IAAA9D,CAAKC,GACH,IAAI8D,EACJ,MAAM,UACJrG,EAAS,QACTe,EAAO,cACPuF,EAAa,cACbC,EAAa,OACbC,EAAM,SACNC,GACErT,KAAKqP,MACHiE,EAAoE,OAAnDL,EAAuBtF,EAAQ,iBAA2BsF,EAAuBtF,EAAQ,kBAAoByF,EAASzF,EAAQ,gBAAkB,KACvK,OAAOvO,EAAE,MAAO,CACdgQ,UAAW,IAAU,CACnB,8BAA8B,EAC9B,mCAAoCgE,EACpC,qCAAsCC,KAEvCjU,EAAE,MAAO,CACVgQ,UAAW,gDACX2B,MAAOnE,EAAU0B,MAChB1B,EAAU0B,KAAOlP,EAAE,IAAM,CAC1B8M,KAAMU,EAAU0B,KAAKpC,OAClB,IAAK9M,EAAE,MAAO,CACjBgQ,UAAW,mCACVhQ,EAAE,MAAO,CACVgQ,UAAW,mCACVxC,EAAUU,MAAM,oBAAoBC,OAAQnO,EAAE,MAAO,CACtDgQ,UAAW,sCACVhQ,EAAE,OAAQ,CACXgQ,UAAW,8CACVpP,KAAKqO,QAAQV,EAAiB,UAAK2F,EAAgBlU,EAAE6P,EAAO,CAC7DG,UAAW,4CACXlE,KAAMyC,EAAQ,gBAAkB,UAAY,WAC3C3N,KAAKqO,QAAQiF,IAAkB,OAAQlU,EAAE,MAAO,CACjDgQ,UAAW,uCACV8D,GAA0C,mBAAlBA,EAA+B9T,EAAE,IAAS,CACnEkS,KAAM,eAAenG,MAAM,qDAC1B/L,EAAE,IAAQ,CACXkP,KAAM,6BACNc,UAAW,mCACXgB,QAAS8C,EACT,aAAc,eAAe/H,MAAM,uDAC/B+H,EAAgB9T,EAAE,KAAU,CAChCmU,gBAAiB,mCACjBjF,KAAM,6BACNsC,MAAO,eAAezF,MAAM,qDAC3B/L,EAAE,IAAQ,CACXkP,KAAM,6BACNc,UAAW,SACXgB,QAAS8C,EAAcM,MACtB,eAAerI,MAAM,gEAAiE/L,EAAE,IAAQ,CACjGkP,KAAM,6BACNc,UAAW,SACXgB,QAAS8C,EAAcO,KACvBvD,UAAWvC,EAAQ,sBAClB,eAAexC,MAAM,iEAAmE,KAAMgI,EAAgB/T,EAAE,IAAS,CAC1HkS,KAAM,eAAenG,MAAM,2EAC1B/L,EAAE,IAAQ,CACXkP,KAAM,4BACNc,UAAW,kDACXgB,QAAS,IAAM,UAAUnF,KAAK0H,GAAa,CACzCpN,QAASqH,EAAUV,OAErB,aAAc,eAAef,MAAM,6EAC/B,MACR,CACA,OAAAkD,CAAQxO,GACN,MAAuB,MAAhBA,EAAE6T,OAAO,GAAa7T,EAAE8T,UAAU,GAAK9T,CAChD,EAEF0E,OAAOC,IAAIvC,IAAI,2BAA4B,iCAAkC+Q,ICvE9D,MAAMY,WAAqB,KACxC,WAAA1L,GACEsI,SAAS2B,WACThK,EAAgBnI,KAAM,mBAAe,EACvC,CACA,MAAAuQ,CAAOpB,GACLqB,MAAMD,OAAOpB,GACbnP,KAAK4O,YAAc5O,KAAKqP,MAAMT,WAChC,CACA,IAAAM,GAEE,OAAO9P,EAAE,MAAO,CACdgQ,UAAW,IAAU,6DAA8D,CACjF,uCAAoE,YAA5BpP,KAAK4O,YAAYxJ,OACzD,uDAAwDpF,KAAK4O,YAAYE,uBAAuB9H,UAEjG5H,EAAE,MAAO,CACVyU,IAAK,cACLC,IAAK,UAAUtH,UAAU,WAAa,2DACpCpN,EAAE,QAAS,KAAM,eAAe+L,MAAM,qDAAsD,CAC9FkD,QAASrO,KAAKqP,MAAMrD,WAAW,mBAC5B5M,EAAE,IAAK,CACVgQ,UAAW,YACV,eAAejE,MAAM,6DAA8D/L,EAAE,MAAO,CAC7FgQ,UAAW,oCACVhQ,EAAE,IAAS,CACZkS,KAAM,eAAenG,MAAM,8DAC1B/L,EAAE,IAAQ,CACXgQ,UAAW,SACXd,KAAM,cACN8B,QAASpQ,KAAK+T,OAAO5Q,KAAKnD,MAAM,GAChCkQ,SAAU,qBAAqBxG,QAAQ0C,uBACtC,eAAejB,MAAM,0DAA2D/L,EAAE,IAAQ,CAC3FgQ,UAAW,wBACXd,KAAM,cACN8B,QAASpQ,KAAK+T,OAAO5Q,KAAKnD,MAAM,GAChCkQ,SAAU,qBAAqBxG,QAAQ0C,uBACtC,eAAejB,MAAM,yDAA0DnL,KAAK4O,YAAYE,uBAAuB9H,OAAS5H,EAAE,MAAO,CAC1IgQ,UAAW,wFACVpP,KAAK4O,YAAYE,uBAAuBpO,KAAIkM,GAAaxN,EAAE4T,GAAe,CAC3EpG,UAAW,SAASmB,WAAWnB,EAAU/K,QAAQ,UAAW,IAAIA,QAAQ,cAAe,IAAIA,QAAQ,IAAK,MACxG8L,QAAS,CAAC,EACVuF,cAAe,KACfG,UAAU,OACL,KAAkC,YAA5BrT,KAAK4O,YAAYxJ,OAAuBhG,EAAE,KAAO,CAC5D8L,KAAM,QACNkE,UAAW,uCACX4E,aAAa,EACbC,SAAU,CAAC7U,EAAE,IAAQ,CACnBgQ,UAAW,mEACXd,KAAM,yBACN8B,QAAS,IAAM,UAAUnF,KAAK0H,GAAa,CACzCpN,QAAS,iBAEV,eAAe4F,MAAM,+DACvB/L,EAAE,IAAK,CACRgQ,UAAW,6CACV,eAAejE,MAAM,+DAAiE,KAC3F,CACA,MAAA4I,CAAOpF,GACL,qBAAqBjF,QAAQ+E,YAAY,CACvCE,UAEJ,EAEFpK,OAAOC,IAAIvC,IAAI,2BAA4B,gCAAiC2R,IClE7D,MAAMM,WAAgB,KACnC,IAAAhF,GACE,MAAMf,EAAO,qBAAqBzE,QAAQsC,WAC1C,MAAO,CAAC5M,EAAE,MAAO,CACfgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,yDAA0D/L,EAAE,MAAO,CAC1GgQ,UAAW,YACV,eAAejE,MAAM,wDAAyDnL,KAAKmU,sBAAuB/U,EAAE,MAAO,CACpHgQ,UAAW,oCACVpP,KAAKoU,eAAe7C,WAAYvR,KAAKqU,wBAAyBlG,GAAQA,EAAK5I,QAAQ,gBAAkBnG,EAAEwU,GAAc,CACtH5H,WAAYmC,EAAK5I,QACjBqJ,YAAa,qBAAqBlF,QAAQ2B,cAAcK,QACrD,KACP,CACA,mBAAAyI,GACE,IAAIG,EACJ,OAAkF,OAAzEA,EAAwB,qBAAqB5K,QAAQmC,sBAA2B,EAASyI,EAAsBC,YAAcnV,EAAE,IAAK,CAC3IgQ,UAAW,kCACVhQ,EAAE,OAAQ,CACXgQ,UAAW,wCACV,eAAejE,MAAM,kEAAmE/L,EAAE,OAAQ,CACnGgQ,UAAW,wCACV,KAAU,qBAAqB1F,QAAQmC,gBAAgB0I,cAAgB,IAC5E,CACA,oBAAAF,GACE,MAAMG,EAAQ,qBAAqB9K,QACnC,GAAI,qBAAqBA,QAAQI,UAAU,UAAY,qBAAqBJ,QAAQI,UAAU,iBAC5F,OAAO1K,EAAE,MAAO,CACdgQ,UAAW,+BACVhQ,EAAE,IAAkB,OAEzB,MAAMqV,EAAqBD,EAAMxI,YAAcwI,EAAMxI,WAAWzG,QAAQ,gBACxE,OAAMiP,EAAM1I,iBAAiB9E,QAAUyN,EAOhCrV,EAAE,MAAO,CACdgQ,UAAW,+BACVhQ,EAAE,MAAO,CACVgQ,UAAW,oCACVqF,EAAqBrV,EAAE4T,GAAe,CACvCpG,UAAW4H,EAAMxI,WAAWY,UAC5Be,QAAS6G,EAAMxI,WAAWzG,QAC1B6N,QAAQ,EACRF,cAAe,IAAMsB,EAAMtH,kBAC3BiG,cAAeqB,EAAMnJ,cAAcI,kBAAkBZ,SAAS,iBAC3D,KAAM2J,EAAM1I,iBAAiBpL,KAAIkM,GAAaxN,EAAE4T,GAAe,CAClEpG,UAAWA,EACXe,QAAS6G,EAAM9G,eAAed,EAAUrF,IACxC2L,cAAe,CACbM,KAAM,IAAMgB,EAAMpH,gBAAgBR,EAAW,QAC7C6G,KAAM,IAAMe,EAAMpH,gBAAgBR,EAAW,SAE/CuG,cAAeqB,EAAMnJ,cAAcI,kBAAkBZ,SAAS+B,EAAUV,YAvBjE9M,EAAE,MAAO,CACdgQ,UAAW,+BACVhQ,EAAE,OAAQ,CACXgQ,UAAW,YACV,eAAejE,MAAM,sDAqB5B,CACA,YAAAiJ,GACE,MAAMzD,EAAQ,IAAI,KAelB,OAdAA,EAAM1O,IAAI,cAAe7C,EAAE,IAAQ,CACjCgQ,UAAW,SACXd,KAAM,kBACN8B,QAAS,IAAM,qBAAqB1G,QAAQuD,kBAC5Cd,QAAS,qBAAqBzC,QAAQI,UAAU,SAChDoG,SAAU,qBAAqBxG,QAAQ0C,uBACtC,eAAejB,MAAM,6DAA8D,KACtFwF,EAAM1O,IAAI,eAAgB7C,EAAE,IAAQ,CAClCgQ,UAAW,SACXd,KAAM,cACN8B,QAAS,IAAM,qBAAqB1G,QAAQ8D,iBAC5CrB,QAAS,qBAAqBzC,QAAQI,UAAU,iBAChDoG,SAAU,qBAAqBxG,QAAQ0C,uBACtC,eAAejB,MAAM,8DACjBwF,CACT,EAEFpM,OAAOC,IAAIvC,IAAI,2BAA4B,2BAA4BiS,ICtFvE,MAAM,GAA+B3P,OAAOC,IAAIxC,IAAI,OAAQ,0B,eCM7C,MAAM0S,WAAuB,KAC1C,MAAAnE,CAAOpB,GACLqB,MAAMD,OAAOpB,EACf,CACA,IAAAD,GACE,OAAO9P,EAAE,MAAO,CACdgQ,UAAW,6DACVhQ,EAAE,MAAO,CACVgQ,UAAW,oCACVhQ,EAAE,MAAO,CACVgQ,UAAW,aACVhQ,EAAE,KAAM,CACTgQ,UAAW,kBACV,eAAejE,MAAM,4DAA6D/L,EAAE,MAAO,CAC5FgQ,UAAW,aACV,SAAS,0CAA4ChQ,EAAE,KAAM,KAAMA,EAAE8S,GAAW,MAAO9S,EAAE8U,GAAS,OAAS9U,EAAE,MAAO,CACrHgQ,UAAW,cACVhQ,EAAE,KAAO,CACV8L,KAAM,UACN8I,aAAa,GACZ,eAAe7I,MAAM,sDAC1B,EAEF5G,OAAOC,IAAIvC,IAAI,2BAA4B,kCAAmCyS,IC7B9E,MAAM,GAA+BnQ,OAAOC,IAAIxC,IAAI,OAAQ,+B,eCO7C,MAAM2S,WAAsB,KACzC,WAAAzM,GACEsI,SAAS2B,WACThK,EAAgBnI,KAAM,WAAY,CAAC,GACnCmI,EAAgBnI,KAAM,kBAAmB,MACzCmI,EAAgBnI,KAAM,WAAW,GACjCmI,EAAgBnI,KAAM,YAAQ,EAChC,CACA,MAAAuQ,CAAOpB,GACLqB,MAAMD,OAAOpB,GACbnP,KAAK4U,QAAO,EACd,CACA,SAAAxF,GACE,MAAO,EACT,CACA,IAAAF,GACE,OAAO9P,EAAE,MAAO,CACdgQ,UAAW,IAAU,cAAepP,KAAKoP,cACxChQ,EAAE,QAAS,KAAMY,KAAKuN,SAAUvN,KAAKyP,UAAWrQ,EAAE,MAAO,CAC1DgQ,UAAW,4BACVpP,KAAK6U,gBACV,CACA,YAAAA,GACE,MAAO,CAACzV,EAAE,IAAQ,CAChBgQ,UAAW,yBACXjD,QAASnM,KAAKmM,QACdiE,QAAS,IAAMpQ,KAAK4U,QAAO,GAC3B1E,UAAWlQ,KAAK8U,WACf,eAAe3J,MAAM,sCAC1B,CACA,uBAAA4J,GACE,OAAO,eAAoBC,uBAC7B,CACA,OAAAC,CAAQnR,GACN,IAAIoR,EACJ,OAAoD,OAA5CA,EAAqBlV,KAAKwL,SAAS1H,IAAgBoR,EAAqBlV,KAAKwL,SAAS1H,GAAO,MACvG,CACA,MAAA8Q,CAAOO,GACLnV,KAAKmM,SAAU,EACf,MAAMiJ,EAAgB,CAAC,EACvBhV,OAAOC,KAAKL,KAAKwL,UAAUlL,SAAQwD,IACjCsR,EAActR,GAAO9D,KAAKwL,SAAS1H,IAAM,IAE3C,YAAY,CACVwI,OAAQ,OACRC,IAAK,UAAUC,UAAU,UAAY,8BACrCC,KAAM,CACJvB,KAAMlL,KAAKkL,KACXhC,KAAMiM,EAAW,KAAOC,KAEzBnM,MAAKyF,IACN,IAAI,KACFxF,GACEwF,EACJtO,OAAOC,KAAK6I,GAAM5I,SAAQwD,IACxB9D,KAAKwL,SAAS1H,GAAO,KAAOoF,EAAKpF,GAAK,IAExC9D,KAAKqV,gBAAkBpQ,MAAMC,QAAQgE,GAAQ,CAAC,EAAIA,CAAI,IACrD8D,SAAQ,KACThN,KAAKmM,SAAU,EACf/M,EAAEmK,QAAQ,GAEd,CACA,OAAAuL,GACE,OAAOxJ,KAAKgK,UAAUtV,KAAKqV,mBAAqB/J,KAAKgK,UAAUtV,KAAKwL,SACtE,EAEFjH,OAAOC,IAAIvC,IAAI,2BAA4B,iCAAkC0S,IC1E7E,MAAM,GAA+BpQ,OAAOC,IAAIxC,IAAI,OAAQ,4B,eCO7C,MAAMuT,WAAwB,KAC3C,WAAArN,GACEsI,SAAS2B,WACThK,EAAgBnI,KAAM,YAAQ,GAC9BmI,EAAgBnI,KAAM,kBAAc,EACtC,CACA,MAAAuQ,CAAOpB,GACLqB,MAAMD,OAAOpB,GACbnP,KAAKkM,KAAO,KAAOlM,KAAKqP,MAAMnD,MAAQ,IACtClM,KAAKwV,WAAa,KAAOxV,KAAKqP,MAAMmG,YAAc,CAChDtK,KAAM,WACNqB,IAAK,IAET,CACA,SAAA6C,GACE,MAAO,8BACT,CACA,KAAA7B,GACE,MAAMkI,EAAUzV,KAAKqP,MAAMmG,WAAa,OAAS,MACjD,OAAO,eAAerK,MAAM,2CAA2CnF,OAAOyP,EAAS,qBACzF,CACA,OAAAhG,GACE,MAAMiG,EAAQ,CACZC,SAAU,eAAexK,MAAM,uEAC/ByK,IAAK,eAAezK,MAAM,kEAC1B0K,KAAM,eAAe1K,MAAM,oEAE7B,OAAO/L,EAAE,MAAO,CACdgQ,UAAW,cACVhQ,EAAE,KAAM,KAAMA,EAAE,MAAO,CACxBgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,8EAA+E/L,EAAE,QAAS,CACjIgQ,UAAW,cACXqD,KAAMzS,KAAKkM,QACR9M,EAAE,MAAO,CACZgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,8EAA+E/L,EAAE,KAAQ,CAChI2F,QAAS2Q,EACTpR,MAAOtE,KAAKwV,aAAatK,KACzB4K,SAAUxR,GAAStE,KAAKwV,WAAW,IAC9BxV,KAAKwV,aACRtK,KAAM5G,OAELlF,EAAE,MAAO,CACZgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,uEAAwE/L,EAAE,QAAS,CAC1HgQ,UAAW,cACX0G,SAAU7X,GAAK+B,KAAKwV,WAAW,IAC1BxV,KAAKwV,aACRjJ,IAAKtO,EAAE8X,OAAOzR,QAEhBA,MAAOtE,KAAKwV,aAAajJ,OACtBnN,EAAE,MAAO,CACZgQ,UAAW,cACVhQ,EAAE,IAAQ,CACXgQ,UAAW,yBACXgB,QAASpQ,KAAK4U,OAAOzR,KAAKnD,OACzB,eAAemL,MAAM,mFAC1B,CACA,MAAAyJ,GACE5U,KAAKqP,MAAMqD,SAAS1S,KAAKwV,aAAcxV,KAAKkM,QAC5ClM,KAAKgW,MACP,EAEFzR,OAAOC,IAAIvC,IAAI,2BAA4B,mCAAoCsT,ICjEhE,MAAMU,WAA0BtB,GAC7C,WAAAzM,GACEsI,SAAS2B,WACThK,EAAgBnI,KAAM,OAAQ,WAChC,CACA,KAAAuN,GACE,OAAO,eAAepC,MAAM,gDAC9B,CACA,SAAAiE,GACE,MAAO,mBACT,CACA,OAAAK,GACE,OAAOrQ,EAAE,MAAO,CACdgQ,UAAW,gDACVpP,KAAKqP,MAAM6G,sBAAsBxS,KAAK1D,KAAM,CAC7CiV,QAAS,oBACTrE,MAAO,eAAezF,MAAM,mEAC5BgL,KAAM,eAAehL,MAAM,kEAC3BD,KAAM,SACNnG,QAAS,CACPqR,OAAQ,eAAejL,MAAM,4EAC7BkL,GAAI,eAAelL,MAAM,wEACzBmL,KAAM,eAAenL,MAAM,0EAC3BoL,MAAO,eAAepL,MAAM,2EAC5BqL,IAAK,eAAerL,MAAM,4EAE1B/L,EAAE,MAAO,CACXgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,+DAAgE/L,EAAE,MAAO,CAChHgQ,UAAW,YACV,eAAejE,MAAM,8DAA+D/L,EAAE,MAAO,CAC9FgQ,UAAW,kCACVhP,OAAOC,KAAKL,KAAKiV,QAAQ,eAAbjV,IAAkC,CAAC,GAAGU,KAAIwL,IACvD,MAAMsJ,EAAaxV,KAAKiV,QAAQ,eAAbjV,GAA+BkM,GAClD,OAAO9M,EAAE,MAAO,CACdgQ,UAAW,iCACVhQ,EAAE,IAAQ,CACXgQ,UAAW,SACXd,KAAM,CACJqH,SAAU,eACVC,IAAK,qBACLC,KAAM,iBACNL,EAAWtK,MACbkF,QAAS,IAAM,UAAUnF,KAAKsK,GAAiB,CAC7CrJ,OACAsJ,aACA9C,SAAU,CAAC8C,EAAYiB,KACrB,MAAMC,EAAe1W,KAAKiV,QAAQ,eAAbjV,UACd0W,EAAaxK,GACpBlM,KAAKiV,QAAQ,eAAbjV,CAA6B0W,GAC7B1W,KAAK8V,SAASN,EAAYiB,EAAQ,KAGrCvK,EAAM,KAAMsJ,EAAWtK,KAAM,KAAM9L,EAAE,IAAQ,CAC9CgQ,UAAW,sBACXd,KAAM,eACN,aAAc,eAAenD,MAAM,mEACnCiF,QAAS,KACP,GAAIjD,QAAQ,IAAY,eAAehC,MAAM,4EAA6E,CACxH,MAAMuL,EAAe,IAChB1W,KAAKiV,QAAQ,eAAbjV,WAEE0W,EAAaxK,GACpBlM,KAAKiV,QAAQ,eAAbjV,CAA6B0W,EAC/B,KAED,MAEP,CACA,YAAA7B,GACE,MAAMlE,EAAQH,MAAMqE,eAOpB,OANAlE,EAAMgG,KAAKvX,EAAE,IAAQ,CACnBgQ,UAAW,SACXgB,QAAS,IAAM,UAAUnF,KAAKsK,GAAiB,CAC7C7C,SAAU1S,KAAK8V,SAAS3S,KAAKnD,SAE9B,eAAemL,MAAM,kEACjBwF,CACT,CACA,QAAAmF,CAASN,EAAYtJ,GACnBlM,KAAKiV,QAAQ,eAAbjV,CAA6B,IACxBA,KAAKiV,QAAQ,eAAbjV,GACH,CAACkM,GAAOsJ,GAEZ,EAEFjR,OAAOC,IAAIvC,IAAI,2BAA4B,qCAAsCgU,IC5FjF,MAAM,GAA+B1R,OAAOC,IAAIxC,IAAI,OAAQ,4B,eCQ7C,MAAM4U,WAAwB,KAC3C,WAAA1O,GACEsI,SAAS2B,WACThK,EAAgBnI,KAAM,YAAQ,GAC9BmI,EAAgBnI,KAAM,YAAQ,GAC9BmI,EAAgBnI,KAAM,aAAS,EACjC,CACA,MAAAuQ,CAAOpB,GACLqB,MAAMD,OAAOpB,GACbnP,KAAKkL,KAAO,KAAOlL,KAAKqP,MAAMnE,MAAQ,UACtClL,KAAK6W,KAAO,KAAO7W,KAAKqP,MAAMwH,MAAQ,IACtC7W,KAAK8W,MAAQ,KAAO9W,KAAKqP,MAAMyH,OAAS,GAC1C,CACA,SAAA1H,GACE,MAAO,8BACT,CACA,KAAA7B,GACE,MAAMkI,EAAUzV,KAAKqP,MAAMwH,KAAO,OAAS,MAC3C,OAAO,eAAe1L,MAAM,8CAA8CnF,OAAOyP,EAAS,UAC5F,CACA,OAAAhG,GACE,MAAMiG,EAAQ,CACZ,eAAgB,eAAevK,MAAM,iEACrC,eAAgB,eAAeA,MAAM,iEACrC,eAAgB,eAAeA,MAAM,iEACrC4L,OAAQ,eAAe5L,MAAM,4DAE/B,OAAO/L,EAAE,MAAO,CACdgQ,UAAW,cACVhQ,EAAE,KAAM,KAAMA,EAAE,MAAO,CACxBgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,oEAAqE/L,EAAE,KAAQ,CACtH2F,QAAS2Q,EACTpR,MAAOtE,KAAKkL,OACZ4K,SAAU9V,KAAKkL,QACZ9L,EAAE,MAAO,CACZgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,oEAAqE/L,EAAE,QAAS,CACvHgQ,UAAW,cACXqD,KAAMzS,KAAK6W,KACXrE,YAAa,eAAerH,MAAM,4EAC/B/L,EAAE,MAAO,CACZgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,qEAAsE/L,EAAE,WAAY,CAC3HgQ,UAAW,cACX4H,QAAS/Y,GAAK+B,KAAK8W,MAAM7Y,EAAE8X,OAAOzR,OAClC2S,KAAM,IACNzE,YAAaxS,KAAK8W,QAAQI,WAAW,cAAgB,IAAY,eAAe/L,MAAM,qFAAuF,IAC5KnL,KAAK8W,QAAQI,WAAW,cAAgB,GAAKlX,KAAK8W,UAAW1X,EAAE,MAAO,CACvEgQ,UAAW,cACVhQ,EAAE,IAAQ,CACXgQ,UAAW,yBACXgB,QAASpQ,KAAK4U,OAAOzR,KAAKnD,OACzB,eAAemL,MAAM,yEAC1B,CACA,MAAAyJ,GACE5U,KAAKqP,MAAMqD,SAAS1S,KAAKkL,OAAQlL,KAAK6W,OAAQ7W,KAAK8W,SACnD9W,KAAKgW,MACP,EAEFzR,OAAOC,IAAIvC,IAAI,2BAA4B,mCAAoC2U,IC9DhE,MAAMO,WAAsBxC,GACzC,WAAAzM,GACEsI,SAAS2B,WACThK,EAAgBnI,KAAM,OAAQ,OAChC,CACA,KAAAuN,GACE,OAAO,eAAepC,MAAM,mDAC9B,CACA,SAAAiE,GACE,MAAO,eACT,CACA,OAAAK,GACE,MAAM2H,EAAehX,OAAOC,KAAKL,KAAKwL,UAChC6L,EAAkBD,EAAapQ,QAAUoQ,EAAaE,OAAMpM,IAChE,MAAMhC,EAAOlJ,KAAKwL,SAASN,KAC3B,OAAOjG,MAAMC,QAAQgE,GAAQA,EAAKlC,OAAS5G,OAAOC,KAAK6I,GAAMlC,MAAM,IAErE,OAAO5H,EAAE,MAAO,CACdgQ,UAAW,2CACViI,EAAkBD,EAAa1W,KAAIwK,IACpC,MAAMqM,EAAQvX,KAAKwL,SAASN,KAC5B,OAAO9L,EAAE,MAAO,CACdgQ,UAAW,cACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,oDAAoDnF,OAAOkF,KAAS9L,EAAE,MAAO,CACpHgQ,UAAW,uBACVhP,OAAOC,KAAKkX,GAAO7W,KAAImW,IACxB,MAAM3N,EAAOqO,EAAMV,GACnB,OAAOzX,EAAE,MAAO,CACdgQ,UAAW,iCACVhQ,EAAE,IAAQ,CACXgQ,UAAW,SACXd,KAAM,aACN8B,QAAS,IAAM,UAAUnF,KAAK2L,GAAiB,CAC7C1L,OACA2L,OACAC,MAAO5N,EACPwJ,SAAU1S,KAAK8V,SAAS3S,KAAKnD,KAAM6W,MAEpCA,GAAOzX,EAAE,IAAQ,CAClBgQ,UAAW,sBACXd,KAAM,eACN,aAAc,eAAenD,MAAM,2DACnCiF,QAAS,KACP,GAAIjD,QAAQ,IAAY,eAAehC,MAAM,oEAAqE,CAChH,MAAMqM,EAAU,IACXxX,KAAKiV,QAAQ/J,EAAblL,WAEEwX,EAAQX,GACXzW,OAAOC,KAAKmX,GAASxQ,OACvBhH,KAAKiV,QAAQ/J,EAAblL,CAAmBwX,UAEZxX,KAAKwL,SAASN,EAEzB,KAED,KACD,IACD9L,EAAE,OAAQ,CACbgQ,UAAW,YACV,eAAejE,MAAM,0EAC1B,CACA,YAAA0J,GACE,MAAMlE,EAAQH,MAAMqE,eAQpB,OAPAlE,EAAMgG,KAAKvX,EAAE,IAAQ,CACnBgQ,UAAW,SACXjD,QAASnM,KAAKmM,QACdiE,QAAS,IAAM,UAAUnF,KAAK2L,GAAiB,CAC7ClE,SAAU1S,KAAK8V,SAAS3S,KAAKnD,KAAM,SAEpC,eAAemL,MAAM,0DACjBwF,CACT,CACA,QAAAmF,CAAS2B,EAASvM,EAAM2L,EAAMC,GAC5B,MAAM5N,EAAO,IACRlJ,KAAKiV,QAAQ/J,EAAblL,IAEDyX,UACKvO,EAAKuO,GAEdvO,EAAK2N,GAAQC,EACb9W,KAAKiV,QAAQ/J,EAAblL,CAAmBkJ,EACrB,EAEF3E,OAAOC,IAAIvC,IAAI,2BAA4B,iCAAkCkV,ICjF9D,MAAMO,WAAqB,KACxC,OAAAjI,GACE,MAAMjE,EAAW,aAAamM,YAAY3X,KAAK4M,UAAUrF,IACnDqQ,EAAW,CAAC,eAAezM,MAAM,2DAEvC,OADI,SAAS0M,cAAcD,EAASjB,KAAK,eAAexL,MAAM,+DACvD/L,EAAE,MAAO,CACdgQ,UAAW,0BACVhQ,EAAE,MAAO,CACVgQ,UAAW,aACVhQ,EAAE,MAAO,CACVgQ,UAAW,wCACVhQ,EAAE,KAAO,CACVgQ,UAAW,kCACXlE,KAAM,UACN8I,aAAa,GACZ5U,EAAE,KAAM,KAAM,KAAUwY,MAAcpM,EAAWpM,EAAE,MAAO,CAC3DgQ,UAAW,oDACVhQ,EAAE,MAAO,CACVgQ,UAAW,eACVhQ,EAAE,QAAS,KAAM,eAAe+L,MAAM,kDAAmD/L,EAAE,MAAO,CACnGgQ,UAAW,QACV5D,EAAS9K,IAAIV,KAAKkW,sBAAsB/S,KAAKnD,QAASZ,EAAE,MAAO,CAChEgQ,UAAW,6BACVpP,KAAK6U,iBAAkBzV,EAAE6W,GAAmB,CAC7CC,sBAAuBlW,KAAKkW,wBAC1B9W,EAAE+X,GAAe,CACnBjB,sBAAuBlW,KAAKkW,yBACxB9W,EAAE,KAAM,CACZgQ,UAAW,2BACV,eAAejE,MAAM,sCAC1B,CACA,QAAA2M,CAAS3I,GACP,MAAMwB,EAAQH,MAAMsH,SAAS3I,GAO7B,OANAwB,EAAMoH,YAAY,UAAW,IAC7BpH,EAAM1O,IAAI,UAAW7C,EAAEsV,GAAgB,MAAO,GACmB,MAA7D,SAASlJ,SAAS,wCAAkD,SAASA,SAAS,wCACxFmF,EAAM1O,IAAI,QAAS7C,EAAEkR,GAAc,MAAO,GAE5CK,EAAMqH,OAAO,eACNrH,CACT,CACA,OAAAsH,GACEzH,MAAMyH,UACN7Y,EAAEmK,QACJ,EAEFhF,OAAOC,IAAIvC,IAAI,2BAA4B,gCAAiCyV,IClD5E,WAAgB,IAAI,YAAezC,SAAQ,KAAM,CAC/CA,QAAS,sCACTrE,MAAO,eAAezF,MAAM,sDAC5BgL,KAAM/W,EAAE8Y,MAAM,IAAY,eAAe/M,MAAM,0DAA2D,CACxGgN,gBAAiB,+FACjBC,cAAe,iEACfC,YAAa,WAAWrS,OAAO,SAASsS,WAAY,aACpDC,kBAAmB,uDAErBrN,KAAM,UACNgF,SAAU,SAAS,iDACjB+E,SAAQ,KAAM,CAChBA,QAAS,+CACTrE,MAAO,eAAezF,MAAM,+DAC5BgL,KAAM,eAAehL,MAAM,oEAC3BD,KAAM,aACJrC,KAAK6O,IAAcc,kBAAkB,YAAY,IAAM,CAAC,CAC1DjR,GAAI,oBACJqJ,MAAO,eAAezF,MAAM,kEAAmE,CAAC,GAAG,GACnGgL,KAAM,eAAehL,MAAM,iEAAkE,CAAC,GAAG,IAChG,CACD5D,GAAI,eACJqJ,MAAO,eAAezF,MAAM,6DAA8D,CAAC,GAAG,GAC9FgL,KAAM,eAAehL,MAAM,4DAA6D,CAAC,GAAG,IAC3F,CACD5D,GAAI,gBACJqJ,MAAO,eAAezF,MAAM,mDAAoD,CAAC,GAAG,IACnF,CACD5D,GAAI,UACJqJ,MAAO,eAAezF,MAAM,uDAAwD,CAAC,GAAG,GACxFgL,KAAM,eAAehL,MAAM,sDAAuD,CAAC,GAAG,QCxBxF,iBAAiBlJ,IAAI,4BAA4BwW,IAC/CA,EAAIC,MAAMC,OAAO,2BAA6BxT,EAC9CsT,EAAIG,iBAAmB,IAAI5J,EACvByJ,EAAIvP,KAAK,+CACXuP,EAAIvP,KAAKsC,SAAS,uCAAyC,MAE7D,IAAAsE,QAAO,cAAyB,YAAY,SAAUa,GAC1B,6BAAtB3Q,KAAK4M,UAAUrF,IAAqC,IAAmBvH,KAAK4M,UAAUrF,KAG1FoJ,EAAM1O,IAAI,SAAU7C,EAAE,IAAQ,CAC5BgQ,UAAW,wBACXd,KAAM,eACN8B,QAAS,KACPqI,EAAII,MAAM5N,KAAK,KACfwN,EAAIK,QAAQ,CACVvM,IAAK,GAAGvG,OAAOyS,EAAIM,MAAMvM,UAAU,UAAW,kCAAkCxG,OAAOhG,KAAK4M,UAAUrF,IACtG+E,OAAQ,WACPrD,MAAK0B,IACU,MAAZA,GAAoBA,EAAS+B,WAC/BvF,KAEAsR,EAAIO,OAAO/N,KAAK,CACdC,KAAM,WACLuN,EAAIQ,WAAW9N,MAAM,gEACxB5C,OAAOqB,SAAW6O,EAAIM,MAAMvM,UAAU,YACxC,IACCQ,SAAQ,KACTyL,EAAII,MAAMzR,OAAO,GACjB,GAEHqR,EAAIQ,WAAW9N,MAAM,qDAC1B,GAAE,G","sources":["webpack://@flarum/extension-manager/../../../node_modules/dayjs/plugin/duration.js","webpack://@flarum/extension-manager/webpack/bootstrap","webpack://@flarum/extension-manager/webpack/runtime/compat get default export","webpack://@flarum/extension-manager/webpack/runtime/define property getters","webpack://@flarum/extension-manager/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/extension-manager/webpack/runtime/make namespace object","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'admin/app')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'admin/components/ExtensionPage')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'admin/components/LoadingModal')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'admin/utils/isExtensionEnabled')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@flarum/extension-manager/../../../node_modules/pretty-bytes/index.js","webpack://@flarum/extension-manager/./src/admin/models/Task.ts","webpack://@flarum/extension-manager/./src/admin/utils/jumpToQueue.ts","webpack://@flarum/extension-manager/../../../node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@flarum/extension-manager/../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@flarum/extension-manager/../../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@flarum/extension-manager/../../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@flarum/extension-manager/./src/admin/states/QueueState.ts","webpack://@flarum/extension-manager/./src/admin/utils/errorHandler.ts","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/utils/extractText')\"","webpack://@flarum/extension-manager/./src/admin/states/ControlSectionState.ts","webpack://@flarum/extension-manager/./src/admin/states/ExtensionManagerState.ts","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/components/Tooltip')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/components/Icon')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/components/Link')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/utils/classList')\"","webpack://@flarum/extension-manager/./src/admin/components/Label.tsx","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/components/Modal')\"","webpack://@flarum/extension-manager/./src/admin/components/TaskOutputModal.tsx","webpack://@flarum/extension-manager/./src/admin/utils/humanDuration.ts","webpack://@flarum/extension-manager/./src/admin/components/Pagination.tsx","webpack://@flarum/extension-manager/./src/admin/components/QueueSection.tsx","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/components/Alert')\"","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/utils/Stream')\"","webpack://@flarum/extension-manager/./src/admin/components/Installer.tsx","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/helpers/humanTime')\"","webpack://@flarum/extension-manager/./src/admin/components/WhyNotModal.tsx","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/components/Dropdown')\"","webpack://@flarum/extension-manager/./src/admin/components/ExtensionItem.tsx","webpack://@flarum/extension-manager/./src/admin/components/MajorUpdater.tsx","webpack://@flarum/extension-manager/./src/admin/components/Updater.tsx","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/components/Form')\"","webpack://@flarum/extension-manager/./src/admin/components/ControlSection.tsx","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/components/FormGroup')\"","webpack://@flarum/extension-manager/./src/admin/components/ConfigureJson.tsx","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/components/Select')\"","webpack://@flarum/extension-manager/./src/admin/components/RepositoryModal.tsx","webpack://@flarum/extension-manager/./src/admin/components/ConfigureComposer.tsx","webpack://@flarum/extension-manager/external root \"flarum.reg.get('core', 'common/helpers/listItems')\"","webpack://@flarum/extension-manager/./src/admin/components/AuthMethodModal.tsx","webpack://@flarum/extension-manager/./src/admin/components/ConfigureAuth.tsx","webpack://@flarum/extension-manager/./src/admin/components/SettingsPage.tsx","webpack://@flarum/extension-manager/./src/admin/extend.tsx","webpack://@flarum/extension-manager/./src/admin/index.tsx"],"sourcesContent":["!function(t,s){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=s():\"function\"==typeof define&&define.amd?define(s):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs_plugin_duration=s()}(this,(function(){\"use strict\";var t,s,n=1e3,i=6e4,e=36e5,r=864e5,o=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,d=2628e6,a=/^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,h={years:u,months:d,days:r,hours:e,minutes:i,seconds:n,milliseconds:1,weeks:6048e5},c=function(t){return t instanceof g},f=function(t,s,n){return new g(t,n,s.$l)},m=function(t){return s.p(t)+\"s\"},l=function(t){return t<0},$=function(t){return l(t)?Math.ceil(t):Math.floor(t)},y=function(t){return Math.abs(t)},v=function(t,s){return t?l(t)?{negative:!0,format:\"\"+y(t)+s}:{negative:!1,format:\"\"+t+s}:{negative:!1,format:\"\"}},g=function(){function l(t,s,n){var i=this;if(this.$d={},this.$l=n,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),s)return f(t*h[m(s)],this);if(\"number\"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if(\"object\"==typeof t)return Object.keys(t).forEach((function(s){i.$d[m(s)]=t[s]})),this.calMilliseconds(),this;if(\"string\"==typeof t){var e=t.match(a);if(e){var r=e.slice(2).map((function(t){return null!=t?Number(t):0}));return this.$d.years=r[0],this.$d.months=r[1],this.$d.weeks=r[2],this.$d.days=r[3],this.$d.hours=r[4],this.$d.minutes=r[5],this.$d.seconds=r[6],this.calMilliseconds(),this}}return this}var y=l.prototype;return y.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(s,n){return s+(t.$d[n]||0)*h[n]}),0)},y.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=$(t/u),t%=u,this.$d.months=$(t/d),t%=d,this.$d.days=$(t/r),t%=r,this.$d.hours=$(t/e),t%=e,this.$d.minutes=$(t/i),t%=i,this.$d.seconds=$(t/n),t%=n,this.$d.milliseconds=t},y.toISOString=function(){var t=v(this.$d.years,\"Y\"),s=v(this.$d.months,\"M\"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var i=v(n,\"D\"),e=v(this.$d.hours,\"H\"),r=v(this.$d.minutes,\"M\"),o=this.$d.seconds||0;this.$d.milliseconds&&(o+=this.$d.milliseconds/1e3,o=Math.round(1e3*o)/1e3);var u=v(o,\"S\"),d=t.negative||s.negative||i.negative||e.negative||r.negative||u.negative,a=e.format||r.format||u.format?\"T\":\"\",h=(d?\"-\":\"\")+\"P\"+t.format+s.format+i.format+a+e.format+r.format+u.format;return\"P\"===h||\"-P\"===h?\"P0D\":h},y.toJSON=function(){return this.toISOString()},y.format=function(t){var n=t||\"YYYY-MM-DDTHH:mm:ss\",i={Y:this.$d.years,YY:s.s(this.$d.years,2,\"0\"),YYYY:s.s(this.$d.years,4,\"0\"),M:this.$d.months,MM:s.s(this.$d.months,2,\"0\"),D:this.$d.days,DD:s.s(this.$d.days,2,\"0\"),H:this.$d.hours,HH:s.s(this.$d.hours,2,\"0\"),m:this.$d.minutes,mm:s.s(this.$d.minutes,2,\"0\"),s:this.$d.seconds,ss:s.s(this.$d.seconds,2,\"0\"),SSS:s.s(this.$d.milliseconds,3,\"0\")};return n.replace(o,(function(t,s){return s||String(i[t])}))},y.as=function(t){return this.$ms/h[m(t)]},y.get=function(t){var s=this.$ms,n=m(t);return\"milliseconds\"===n?s%=1e3:s=\"weeks\"===n?$(s/h[n]):this.$d[n],s||0},y.add=function(t,s,n){var i;return i=s?t*h[m(s)]:c(t)?t.$ms:f(t,this).$ms,f(this.$ms+i*(n?-1:1),this)},y.subtract=function(t,s){return this.add(t,s,!0)},y.locale=function(t){var s=this.clone();return s.$l=t,s},y.clone=function(){return f(this.$ms,this)},y.humanize=function(s){return t().add(this.$ms,\"ms\").locale(this.$l).fromNow(!s)},y.valueOf=function(){return this.asMilliseconds()},y.milliseconds=function(){return this.get(\"milliseconds\")},y.asMilliseconds=function(){return this.as(\"milliseconds\")},y.seconds=function(){return this.get(\"seconds\")},y.asSeconds=function(){return this.as(\"seconds\")},y.minutes=function(){return this.get(\"minutes\")},y.asMinutes=function(){return this.as(\"minutes\")},y.hours=function(){return this.get(\"hours\")},y.asHours=function(){return this.as(\"hours\")},y.days=function(){return this.get(\"days\")},y.asDays=function(){return this.as(\"days\")},y.weeks=function(){return this.get(\"weeks\")},y.asWeeks=function(){return this.as(\"weeks\")},y.months=function(){return this.get(\"months\")},y.asMonths=function(){return this.as(\"months\")},y.years=function(){return this.get(\"years\")},y.asYears=function(){return this.as(\"years\")},l}(),p=function(t,s,n){return t.add(s.years()*n,\"y\").add(s.months()*n,\"M\").add(s.days()*n,\"d\").add(s.hours()*n,\"h\").add(s.minutes()*n,\"m\").add(s.seconds()*n,\"s\").add(s.milliseconds()*n,\"ms\")};return function(n,i,e){t=e,s=e().$utils(),e.duration=function(t,s){var n=e.locale();return f(t,{$l:n},s)},e.isDuration=c;var r=i.prototype.add,o=i.prototype.subtract;i.prototype.add=function(t,s){return c(t)?p(this,t,1):r.bind(this)(t,s)},i.prototype.subtract=function(t,s){return c(t)?p(this,t,-1):o.bind(this)(t,s)}}}));","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/ExtensionPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/LoadingModal');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/utils/isExtensionEnabled');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","const BYTE_UNITS = [\n\t'B',\n\t'kB',\n\t'MB',\n\t'GB',\n\t'TB',\n\t'PB',\n\t'EB',\n\t'ZB',\n\t'YB',\n];\n\nconst BIBYTE_UNITS = [\n\t'B',\n\t'KiB',\n\t'MiB',\n\t'GiB',\n\t'TiB',\n\t'PiB',\n\t'EiB',\n\t'ZiB',\n\t'YiB',\n];\n\nconst BIT_UNITS = [\n\t'b',\n\t'kbit',\n\t'Mbit',\n\t'Gbit',\n\t'Tbit',\n\t'Pbit',\n\t'Ebit',\n\t'Zbit',\n\t'Ybit',\n];\n\nconst BIBIT_UNITS = [\n\t'b',\n\t'kibit',\n\t'Mibit',\n\t'Gibit',\n\t'Tibit',\n\t'Pibit',\n\t'Eibit',\n\t'Zibit',\n\t'Yibit',\n];\n\n/*\nFormats the given number using `Number#toLocaleString`.\n- If locale is a string, the value is expected to be a locale-key (for example: `de`).\n- If locale is true, the system default locale is used for translation.\n- If no value for locale is specified, the number is returned unmodified.\n*/\nconst toLocaleString = (number, locale, options) => {\n\tlet result = number;\n\tif (typeof locale === 'string' || Array.isArray(locale)) {\n\t\tresult = number.toLocaleString(locale, options);\n\t} else if (locale === true || options !== undefined) {\n\t\tresult = number.toLocaleString(undefined, options);\n\t}\n\n\treturn result;\n};\n\nexport default function prettyBytes(number, options) {\n\tif (!Number.isFinite(number)) {\n\t\tthrow new TypeError(`Expected a finite number, got ${typeof number}: ${number}`);\n\t}\n\n\toptions = {\n\t\tbits: false,\n\t\tbinary: false,\n\t\tspace: true,\n\t\t...options,\n\t};\n\n\tconst UNITS = options.bits\n\t\t? (options.binary ? BIBIT_UNITS : BIT_UNITS)\n\t\t: (options.binary ? BIBYTE_UNITS : BYTE_UNITS);\n\n\tconst separator = options.space ? ' ' : '';\n\n\tif (options.signed && number === 0) {\n\t\treturn ` 0${separator}${UNITS[0]}`;\n\t}\n\n\tconst isNegative = number < 0;\n\tconst prefix = isNegative ? '-' : (options.signed ? '+' : '');\n\n\tif (isNegative) {\n\t\tnumber = -number;\n\t}\n\n\tlet localeOptions;\n\n\tif (options.minimumFractionDigits !== undefined) {\n\t\tlocaleOptions = {minimumFractionDigits: options.minimumFractionDigits};\n\t}\n\n\tif (options.maximumFractionDigits !== undefined) {\n\t\tlocaleOptions = {maximumFractionDigits: options.maximumFractionDigits, ...localeOptions};\n\t}\n\n\tif (number < 1) {\n\t\tconst numberString = toLocaleString(number, options.locale, localeOptions);\n\t\treturn prefix + numberString + separator + UNITS[0];\n\t}\n\n\tconst exponent = Math.min(Math.floor(options.binary ? Math.log(number) / Math.log(1024) : Math.log10(number) / 3), UNITS.length - 1);\n\tnumber /= (options.binary ? 1024 : 1000) ** exponent;\n\n\tif (!localeOptions) {\n\t\tnumber = number.toPrecision(3);\n\t}\n\n\tconst numberString = toLocaleString(Number(number), options.locale, localeOptions);\n\n\tconst unit = UNITS[exponent];\n\n\treturn prefix + numberString + separator + unit;\n}\n","import Model from 'flarum/common/Model';\nimport prettyBytes from 'pretty-bytes';\nexport default class Task extends Model {\n  status() {\n    return Model.attribute('status').call(this);\n  }\n  operation() {\n    return Model.attribute('operation').call(this);\n  }\n  command() {\n    return Model.attribute('command').call(this);\n  }\n  package() {\n    return Model.attribute('package').call(this);\n  }\n  output() {\n    return Model.attribute('output').call(this);\n  }\n  guessedCause() {\n    return Model.attribute('guessedCause').call(this);\n  }\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n  startedAt() {\n    return Model.attribute('startedAt', Model.transformDate).call(this);\n  }\n  finishedAt() {\n    return Model.attribute('finishedAt', Model.transformDate).call(this);\n  }\n  peakMemoryUsed() {\n    return prettyBytes(Model.attribute('peakMemoryUsed').call(this) * 1024);\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/models/Task', Task);","import app from 'flarum/admin/app';\n\n// @ts-ignore\nwindow.jumpToQueue = jumpToQueue;\nexport default function jumpToQueue() {\n  app.modal.close();\n  m.route.set(app.route('extension', {\n    id: 'flarum-extension-manager'\n  }));\n  app.extensionManager.queue.load({}, true);\n  setTimeout(() => {\n    var _document$getElementB;\n    (_document$getElementB = document.getElementById('ExtensionManager-queueSection')) == null || _document$getElementB.scrollIntoView({\n      block: 'nearest'\n    });\n  }, 200);\n}\nflarum.reg.add('flarum-extension-manager', 'admin/utils/jumpToQueue', jumpToQueue);","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nexport default class QueueState {\n  constructor() {\n    _defineProperty(this, \"polling\", null);\n    _defineProperty(this, \"tasks\", null);\n    _defineProperty(this, \"limit\", 20);\n    _defineProperty(this, \"offset\", 0);\n    _defineProperty(this, \"total\", 0);\n  }\n  load(params, actionTaken) {\n    var _params;\n    if (actionTaken === void 0) {\n      actionTaken = false;\n    }\n    this.tasks = null;\n    params = {\n      page: {\n        limit: this.limit,\n        offset: this.offset,\n        ...((_params = params) == null ? void 0 : _params.page)\n      },\n      ...params\n    };\n    return app.store.find('extension-manager-tasks', params || {}).then(data => {\n      var _data$payload$meta;\n      this.tasks = data;\n      this.total = ((_data$payload$meta = data.payload.meta) == null ? void 0 : _data$payload$meta.total) || 0;\n      m.redraw();\n\n      // Check if there is a pending or running task\n      const pendingTask = data == null ? void 0 : data.find(task => task.status() === 'pending' || task.status() === 'running');\n      if (pendingTask) {\n        this.pollQueue(actionTaken);\n      } else if (actionTaken) {\n        app.extensionManager.control.setLoading(null);\n\n        // Refresh the page\n        window.location.reload();\n      } else if (app.extensionManager.control.isLoading()) {\n        app.extensionManager.control.setLoading(null);\n      }\n      return data;\n    });\n  }\n  getItems() {\n    return this.tasks;\n  }\n  getTotalPages() {\n    return Math.ceil(this.total / this.limit);\n  }\n  pageNumber() {\n    return Math.ceil(this.offset / this.limit);\n  }\n  hasPrev() {\n    return this.pageNumber() !== 0;\n  }\n  hasNext() {\n    return this.offset + this.limit < this.total;\n  }\n  prev() {\n    if (this.hasPrev()) {\n      this.offset -= this.limit;\n      this.load();\n    }\n  }\n  next() {\n    if (this.hasNext()) {\n      this.offset += this.limit;\n      this.load();\n    }\n  }\n  pollQueue(actionTaken) {\n    if (actionTaken === void 0) {\n      actionTaken = false;\n    }\n    if (this.polling) {\n      clearTimeout(this.polling);\n    }\n    this.polling = setTimeout(() => {\n      this.load({}, actionTaken);\n    }, 6000);\n  }\n  hasPending() {\n    var _this$tasks;\n    return !!((_this$tasks = this.tasks) != null && _this$tasks.find(task => task.status() === 'pending' || task.status() === 'running'));\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/states/QueueState', QueueState);","import app from 'flarum/admin/app';\nexport default function (e) {\n  app.extensionManager.control.setLoading(null);\n  const error = e.response.errors[0];\n  if (!['composer_command_failure', 'extension_already_installed', 'extension_not_installed'].includes(error.code)) {\n    throw e;\n  }\n  app.alerts.clear();\n  switch (error.code) {\n    case 'composer_command_failure':\n      if (error.guessed_cause) {\n        app.alerts.show({\n          type: 'error'\n        }, app.translator.trans(\"flarum-extension-manager.admin.exceptions.guessed_cause.\".concat(error.guessed_cause)));\n        app.modal.close();\n      } else {\n        app.alerts.show({\n          type: 'error'\n        }, app.translator.trans('flarum-extension-manager.admin.exceptions.composer_command_failure'));\n      }\n      break;\n    case 'extension_already_installed':\n      app.alerts.show({\n        type: 'error'\n      }, app.translator.trans('flarum-extension-manager.admin.exceptions.extension_already_installed'));\n      app.modal.close();\n      break;\n    case 'extension_not_installed':\n      app.alerts.show({\n        type: 'error'\n      }, app.translator.trans('flarum-extension-manager.admin.exceptions.extension_not_installed'));\n      app.modal.close();\n  }\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/extractText');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport LoadingModal from 'flarum/admin/components/LoadingModal';\nimport errorHandler from '../utils/errorHandler';\nimport jumpToQueue from '../utils/jumpToQueue';\nimport extractText from 'flarum/common/utils/extractText';\nexport default class ControlSectionState {\n  get lastUpdateRun() {\n    const lastUpdateRun = JSON.parse(app.data.settings['flarum-extension-manager.last_update_run']);\n    lastUpdateRun.limitedPackages = () => [...lastUpdateRun.major.limitedPackages, ...lastUpdateRun.minor.limitedPackages, ...lastUpdateRun.global.limitedPackages];\n    return lastUpdateRun;\n  }\n  constructor() {\n    _defineProperty(this, \"loading\", null);\n    _defineProperty(this, \"packageUpdates\", {});\n    _defineProperty(this, \"lastUpdateCheck\", void 0);\n    _defineProperty(this, \"extensionUpdates\", void 0);\n    _defineProperty(this, \"coreUpdate\", null);\n    this.lastUpdateCheck = JSON.parse(app.data.settings['flarum-extension-manager.last_update_check']);\n    this.extensionUpdates = this.formatExtensionUpdates(this.lastUpdateCheck);\n    this.coreUpdate = this.formatCoreUpdate(this.lastUpdateCheck);\n  }\n  isLoading(name) {\n    if (name === void 0) {\n      name = null;\n    }\n    return name && this.loading === name || !name && this.loading !== null;\n  }\n  hasOperationRunning() {\n    return this.isLoading() || app.extensionManager.queue.hasPending();\n  }\n  setLoading(name) {\n    this.loading = name;\n  }\n  requirePackage(data) {\n    app.extensionManager.control.setLoading('extension-install');\n    app.modal.show(LoadingModal);\n    app.request({\n      method: 'POST',\n      url: \"\".concat(app.forum.attribute('apiUrl'), \"/extension-manager/extensions\"),\n      body: {\n        data\n      }\n    }).then(response => {\n      if (response.processing) {\n        jumpToQueue();\n      } else {\n        const extensionId = response.id;\n        app.alerts.show({\n          type: 'success'\n        }, app.translator.trans('flarum-extension-manager.admin.extensions.successful_install', {\n          extension: extensionId\n        }));\n        window.location.href = \"\".concat(app.forum.attribute('adminUrl'), \"#/extension/\").concat(extensionId);\n        window.location.reload();\n      }\n    }).catch(errorHandler).finally(() => {\n      app.modal.close();\n      m.redraw();\n    });\n  }\n  checkForUpdates() {\n    this.setLoading('check');\n    app.request({\n      method: 'POST',\n      url: \"\".concat(app.forum.attribute('apiUrl'), \"/extension-manager/check-for-updates\")\n    }).then(response => {\n      if (response.processing) {\n        jumpToQueue();\n      } else {\n        this.lastUpdateCheck = response;\n        this.extensionUpdates = this.formatExtensionUpdates(response);\n        this.coreUpdate = this.formatCoreUpdate(response);\n        this.setLoading(null);\n        m.redraw();\n      }\n    }).catch(errorHandler).finally(() => {\n      m.redraw();\n    });\n  }\n  updateCoreMinor() {\n    if (confirm(extractText(app.translator.trans('flarum-extension-manager.admin.minor_update_confirmation.content')))) {\n      app.modal.show(LoadingModal);\n      this.setLoading('minor-update');\n      app.request({\n        method: 'POST',\n        url: \"\".concat(app.forum.attribute('apiUrl'), \"/extension-manager/minor-update\")\n      }).then(response => {\n        if (response != null && response.processing) {\n          jumpToQueue();\n        } else {\n          app.alerts.show({\n            type: 'success'\n          }, app.translator.trans('flarum-extension-manager.admin.update_successful'));\n          window.location.reload();\n        }\n      }).catch(errorHandler).finally(() => {\n        app.modal.close();\n        m.redraw();\n      });\n    }\n  }\n  updateExtension(extension, updateMode) {\n    app.modal.show(LoadingModal);\n    this.setLoading('extension-update');\n    app.request({\n      method: 'PATCH',\n      url: \"\".concat(app.forum.attribute('apiUrl'), \"/extension-manager/extensions/\").concat(extension.id),\n      body: {\n        data: {\n          updateMode\n        }\n      }\n    }).then(response => {\n      if (response != null && response.processing) {\n        jumpToQueue();\n      } else {\n        app.alerts.show({\n          type: 'success'\n        }, app.translator.trans('flarum-extension-manager.admin.extensions.successful_update', {\n          extension: extension.extra['flarum-extension'].title\n        }));\n        window.location.reload();\n      }\n    }).catch(errorHandler).finally(() => {\n      app.modal.close();\n      m.redraw();\n    });\n  }\n  updateGlobally() {\n    app.modal.show(LoadingModal);\n    this.setLoading('global-update');\n    app.request({\n      method: 'POST',\n      url: \"\".concat(app.forum.attribute('apiUrl'), \"/extension-manager/global-update\")\n    }).then(response => {\n      if (response != null && response.processing) {\n        jumpToQueue();\n      } else {\n        app.alerts.show({\n          type: 'success'\n        }, app.translator.trans('flarum-extension-manager.admin.updater.global_update_successful'));\n        window.location.reload();\n      }\n    }).catch(errorHandler).finally(() => {\n      app.modal.close();\n      m.redraw();\n    });\n  }\n  formatExtensionUpdates(lastUpdateCheck) {\n    var _lastUpdateCheck$upda;\n    this.packageUpdates = {};\n    lastUpdateCheck == null || (_lastUpdateCheck$upda = lastUpdateCheck.updates) == null || (_lastUpdateCheck$upda = _lastUpdateCheck$upda.installed) == null || _lastUpdateCheck$upda.filter(composerPackage => {\n      const id = composerPackage.name.replace('/', '-').replace(/(flarum-ext-)|(flarum-)/, '');\n      const extension = app.data.extensions[id];\n      const safeToUpdate = ['semver-safe-update', 'update-possible'].includes(composerPackage['latest-status']);\n      if (extension && safeToUpdate) {\n        this.packageUpdates[extension.id] = composerPackage;\n      }\n      return extension && safeToUpdate;\n    });\n    return Object.values(app.data.extensions).filter(extension => this.packageUpdates[extension.id]);\n  }\n  formatCoreUpdate(lastUpdateCheck) {\n    var _lastUpdateCheck$upda2;\n    const core = lastUpdateCheck == null || (_lastUpdateCheck$upda2 = lastUpdateCheck.updates) == null || (_lastUpdateCheck$upda2 = _lastUpdateCheck$upda2.installed) == null ? void 0 : _lastUpdateCheck$upda2.filter(composerPackage => composerPackage.name === 'flarum/core').pop();\n    if (!core) return null;\n    return {\n      package: core,\n      extension: {\n        id: 'flarum-core',\n        name: 'flarum/core',\n        version: app.data.settings.version,\n        icon: {\n          // @ts-ignore\n          backgroundImage: \"url(\".concat(app.data.resources[0]['attributes']['baseUrl'], \"/assets/extensions/flarum-extension-manager/flarum.svg\")\n        },\n        extra: {\n          'flarum-extension': {\n            title: extractText(app.translator.trans('flarum-extension-manager.admin.updater.flarum'))\n          }\n        }\n      }\n    };\n  }\n  majorUpdate(_ref) {\n    let {\n      dryRun\n    } = _ref;\n    app.extensionManager.control.setLoading(dryRun ? 'major-update-dry-run' : 'major-update');\n    app.modal.show(LoadingModal);\n    const updateState = this.lastUpdateRun.major;\n    app.request({\n      method: 'POST',\n      url: \"\".concat(app.forum.attribute('apiUrl'), \"/extension-manager/major-update\"),\n      body: {\n        data: {\n          dryRun\n        }\n      }\n    }).then(response => {\n      if (response != null && response.processing) {\n        jumpToQueue();\n      } else {\n        app.alerts.show({\n          type: 'success'\n        }, app.translator.trans('flarum-extension-manager.admin.update_successful'));\n        window.location.reload();\n      }\n    }).catch(errorHandler).catch(e => {\n      var _e$response;\n      app.modal.close();\n      updateState.status = 'failure';\n      updateState.incompatibleExtensions = (_e$response = e.response) == null || (_e$response = _e$response.errors) == null || (_e$response = _e$response.pop()) == null ? void 0 : _e$response.incompatible_extensions;\n    }).finally(() => {\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/states/ControlSectionState', ControlSectionState);","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport QueueState from './QueueState';\nimport ControlSectionState from './ControlSectionState';\nexport default class ExtensionManagerState {\n  constructor() {\n    _defineProperty(this, \"queue\", new QueueState());\n    _defineProperty(this, \"control\", new ControlSectionState());\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/states/ExtensionManagerState', ExtensionManagerState);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LoadingIndicator');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Tooltip');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Icon');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/ItemList');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Link');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/classList');","import Component from 'flarum/common/Component';\nimport classList from 'flarum/common/utils/classList';\nexport default class Label extends Component {\n  view(vnode) {\n    const {\n      className,\n      type,\n      ...attrs\n    } = this.attrs;\n    return m(\"span\", Object.assign({\n      className: classList(['Label', \"Label--\".concat(this.attrs.type), className])\n    }, attrs), vnode.children);\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/Label', Label);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Modal');","import app from 'flarum/admin/app';\nimport Modal from 'flarum/common/components/Modal';\nexport default class TaskOutputModal extends Modal {\n  className() {\n    return 'Modal--large QuickModal';\n  }\n  title() {\n    return app.translator.trans(\"flarum-extension-manager.admin.sections.queue.operations.\".concat(this.attrs.task.operation()));\n  }\n  content() {\n    return m(\"div\", {\n      className: \"Modal-body\"\n    }, m(\"div\", {\n      className: \"TaskOutputModal-data\"\n    }, this.attrs.task.status() === 'failure' && m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.sections.queue.output_modal.guessed_cause')), m(\"div\", {\n      className: \"FormControl TaskOutputModal-data-guessed-cause\"\n    }, this.attrs.task.guessedCause() && app.translator.trans('flarum-extension-manager.admin.exceptions.guessed_cause.' + this.attrs.task.guessedCause()) || app.translator.trans('flarum-extension-manager.admin.sections.queue.output_modal.cause_unknown'))), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.sections.queue.output_modal.command')), m(\"div\", {\n      className: \"FormControl TaskOutputModal-data-command\"\n    }, m(\"code\", null, \"$ composer \", this.attrs.task.command()))), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.sections.queue.output_modal.output')), m(\"div\", {\n      className: \"FormControl TaskOutputModal-data-output\"\n    }, m(\"code\", null, m(\"pre\", null, this.attrs.task.output()))))));\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/TaskOutputModal', TaskOutputModal);","import duration from 'dayjs/plugin/duration';\nexport default function humanDuration(start, end) {\n  dayjs.extend(duration);\n  const durationTime = dayjs(end).diff(start);\n  return dayjs.duration(durationTime).humanize();\n}\nflarum.reg.add('flarum-extension-manager', 'admin/utils/humanDuration', humanDuration);","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\n/**\n * @todo make it abstract in core for reusability.\n */\nexport default class Pagination extends Component {\n  view() {\n    return m(\"nav\", {\n      className: \"Pagination UserListPage-gridPagination\"\n    }, m(Button, {\n      disabled: !this.attrs.list.hasPrev() || app.extensionManager.control.isLoading(),\n      title: app.translator.trans('core.admin.users.pagination.back_button'),\n      onclick: () => this.attrs.list.prev(),\n      icon: \"fas fa-chevron-left\",\n      className: \"Button Button--icon UserListPage-backBtn\"\n    }), m(\"span\", {\n      className: \"UserListPage-pageNumber\"\n    }, app.translator.trans('core.admin.users.pagination.page_counter', {\n      current: this.attrs.list.pageNumber() + 1,\n      total: this.attrs.list.getTotalPages()\n    })), m(Button, {\n      disabled: !this.attrs.list.hasNext() || app.extensionManager.control.isLoading(),\n      title: app.translator.trans('core.admin.users.pagination.next_button'),\n      onclick: () => this.attrs.list.next(),\n      icon: \"fas fa-chevron-right\",\n      className: \"Button Button--icon UserListPage-nextBtn\"\n    }));\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/Pagination', Pagination);","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Button from 'flarum/common/components/Button';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Icon from 'flarum/common/components/Icon';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport extractText from 'flarum/common/utils/extractText';\nimport Link from 'flarum/common/components/Link';\nimport Label from './Label';\nimport TaskOutputModal from './TaskOutputModal';\nimport humanDuration from '../utils/humanDuration';\nimport Pagination from './Pagination';\nexport default class QueueSection extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    app.extensionManager.queue.load();\n  }\n  view() {\n    return m(\"section\", {\n      id: \"ExtensionManager-queueSection\",\n      className: \"ExtensionPage-permissions ExtensionManager-queueSection\"\n    }, m(\"div\", {\n      className: \"ExtensionPage-permissions-header ExtensionManager-queueSection-header\"\n    }, m(\"div\", {\n      className: \"container\"\n    }, m(\"h2\", {\n      className: \"ExtensionTitle\"\n    }, app.translator.trans('flarum-extension-manager.admin.sections.queue.title')), m(Button, {\n      className: \"Button Button--icon\",\n      icon: \"fas fa-sync-alt\",\n      onclick: () => app.extensionManager.queue.load(),\n      \"aria-label\": app.translator.trans('flarum-extension-manager.admin.sections.queue.refresh'),\n      disabled: app.extensionManager.control.isLoading()\n    }))), m(\"div\", {\n      className: \"container\"\n    }, this.queueTable()));\n  }\n  columns() {\n    const items = new ItemList();\n    items.add('operation', {\n      label: extractText(app.translator.trans('flarum-extension-manager.admin.sections.queue.columns.operation')),\n      content: task => m(\"div\", {\n        className: \"ExtensionManager-queueTable-operation\"\n      }, m(\"span\", {\n        className: \"ExtensionManager-queueTable-operation-icon\"\n      }, this.operationIcon(task.operation())), m(\"span\", {\n        className: \"ExtensionManager-queueTable-operation-name\"\n      }, app.translator.trans(\"flarum-extension-manager.admin.sections.queue.operations.\".concat(task.operation()))))\n    }, 80);\n    items.add('package', {\n      label: extractText(app.translator.trans('flarum-extension-manager.admin.sections.queue.columns.package')),\n      content: task => {\n        var _task$package;\n        const extension = app.data.extensions[(_task$package = task.package()) == null ? void 0 : _task$package.replace(/(\\/flarum-|\\/flarum-ext-|\\/)/g, '-')];\n        return extension ? m(Link, {\n          className: \"ExtensionManager-queueTable-package\",\n          href: app.route('extension', {\n            id: extension.id\n          })\n        }, m(\"div\", {\n          className: \"ExtensionManager-queueTable-package-icon ExtensionIcon\",\n          style: extension.icon\n        }, !!extension.icon && m(Icon, {\n          name: extension.icon.name\n        })), m(\"div\", {\n          className: \"ExtensionManager-queueTable-package-details\"\n        }, m(\"span\", {\n          className: \"ExtensionManager-queueTable-package-title\"\n        }, extension.extra['flarum-extension'].title), m(\"span\", {\n          className: \"ExtensionManager-queueTable-package-name\"\n        }, task.package()))) : task.package();\n      }\n    }, 75);\n    items.add('status', {\n      label: extractText(app.translator.trans('flarum-extension-manager.admin.sections.queue.columns.status')),\n      content: task => m('[', null, m(Label, {\n        className: \"ExtensionManager-queueTable-status\",\n        type: {\n          running: 'neutral',\n          failure: 'error',\n          pending: 'warning',\n          success: 'success'\n        }[task.status()]\n      }, app.translator.trans(\"flarum-extension-manager.admin.sections.queue.statuses.\".concat(task.status()))), ['pending', 'running'].includes(task.status()) && m(LoadingIndicator, {\n        size: \"small\",\n        display: \"inline\"\n      }))\n    }, 70);\n    items.add('elapsedTime', {\n      label: extractText(app.translator.trans('flarum-extension-manager.admin.sections.queue.columns.elapsed_time')),\n      content: task => !task.startedAt() || !task.finishedAt() ? app.translator.trans('flarum-extension-manager.admin.sections.queue.task_just_started') : m(Tooltip, {\n        text: \"\".concat(dayjs(task.startedAt()).format('LL LTS'), \"  \").concat(dayjs(task.finishedAt()).format('LL LTS'))\n      }, m(\"span\", null, humanDuration(task.startedAt(), task.finishedAt())))\n    }, 65);\n    items.add('memoryUsed', {\n      label: extractText(app.translator.trans('flarum-extension-manager.admin.sections.queue.columns.peak_memory_used')),\n      content: task => m(\"span\", null, task.peakMemoryUsed())\n    }, 60);\n    items.add('details', {\n      label: extractText(app.translator.trans('flarum-extension-manager.admin.sections.queue.columns.details')),\n      content: task => m(Button, {\n        className: \"Button Button--icon Table-controls-item\",\n        icon: \"fas fa-file-alt\",\n        \"aria-label\": app.translator.trans('flarum-extension-manager.admin.sections.queue.columns.details')\n        // @todo fix in core\n        // @ts-ignore\n        ,\n        onclick: () => app.modal.show(TaskOutputModal, {\n          task\n        }),\n        disabled: ['pending', 'running'].includes(task.status())\n      }),\n      className: 'Table-controls'\n    }, 55);\n    return items;\n  }\n  queueTable() {\n    const tasks = app.extensionManager.queue.getItems();\n    if (!tasks) {\n      return m(LoadingIndicator, null);\n    }\n    if (tasks && !tasks.length) {\n      return m(\"h3\", {\n        className: \"ExtensionPage-subHeader\"\n      }, app.translator.trans('flarum-extension-manager.admin.sections.queue.none'));\n    }\n    const columns = this.columns();\n    return m('[', null, m(\"table\", {\n      className: \"Table ExtensionManager-queueTable\"\n    }, m(\"thead\", null, m(\"tr\", null, columns.toArray().map((item, index) => m(\"th\", {\n      key: index\n    }, item.label)))), m(\"tbody\", null, tasks.map((task, index) => m(\"tr\", {\n      key: index\n    }, columns.toArray().map((item, index) => {\n      const {\n        label,\n        content,\n        ...attrs\n      } = item;\n      return m(\"td\", Object.assign({\n        key: index\n      }, attrs), content(task));\n    }))))), m(Pagination, {\n      list: app.extensionManager.queue\n    }));\n  }\n  operationIcon(operation) {\n    return m(Icon, {\n      name: {\n        update_check: 'fas fa-sync-alt',\n        update_major: 'fas fa-play',\n        update_minor: 'fas fa-play',\n        update_global: 'fas fa-play',\n        extension_install: 'fas fa-download',\n        extension_remove: 'fas fa-times',\n        extension_update: 'fas fa-arrow-alt-circle-up',\n        why_not: 'fas fa-exclamation-circle'\n      }[operation]\n    });\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/QueueSection', QueueSection);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Alert');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/Stream');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nexport default class Installer extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"packageName\", void 0);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.packageName = Stream('');\n  }\n  view() {\n    return m(\"div\", {\n      className: \"Form-group ExtensionManager-installer\"\n    }, m(\"label\", {\n      htmlFor: \"install-extension\"\n    }, app.translator.trans('flarum-extension-manager.admin.extensions.install')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('flarum-extension-manager.admin.extensions.install_help', {\n      extiverse: m(\"a\", {\n        href: \"https://extiverse.com\"\n      }, \"extiverse.com\"),\n      semantic_link: m(\"a\", {\n        href: \"https://devhints.io/semver\"\n      }),\n      code: m(\"code\", null)\n    })), m(\"div\", {\n      className: \"FormControl-container\"\n    }, m(\"input\", {\n      className: \"FormControl\",\n      id: \"install-extension\",\n      placeholder: \"vendor/package-name\",\n      bidi: this.packageName\n    }), m(Button, {\n      className: \"Button\",\n      icon: \"fas fa-download\",\n      onclick: this.onsubmit.bind(this),\n      loading: app.extensionManager.control.isLoading('extension-install'),\n      disabled: app.extensionManager.control.hasOperationRunning()\n    }, app.translator.trans('flarum-extension-manager.admin.extensions.proceed'))));\n  }\n  data() {\n    return {\n      package: this.packageName()\n    };\n  }\n  onsubmit() {\n    app.extensionManager.control.requirePackage(this.data());\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/Installer', Installer);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/humanTime');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport Modal from 'flarum/common/components/Modal';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport errorHandler from '../utils/errorHandler';\nexport default class WhyNotModal extends Modal {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"loading\", true);\n    _defineProperty(this, \"whyNot\", null);\n  }\n  className() {\n    return 'Modal--large WhyNotModal';\n  }\n  title() {\n    return app.translator.trans('flarum-extension-manager.admin.why_not_modal.title');\n  }\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    this.requestWhyNot();\n  }\n  content() {\n    return m(\"div\", {\n      className: \"Modal-body\"\n    }, this.loading ? m(LoadingIndicator, null) : m(\"pre\", {\n      className: \"WhyNotModal-contents\"\n    }, this.whyNot));\n  }\n  requestWhyNot() {\n    app.request({\n      method: 'POST',\n      url: \"\".concat(app.forum.attribute('apiUrl'), \"/extension-manager/why-not\"),\n      body: {\n        data: {\n          package: this.attrs.package\n        }\n      }\n    }).then(response => {\n      this.loading = false;\n      this.whyNot = response.data.reason;\n      m.redraw();\n    }).catch(errorHandler);\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/WhyNotModal', WhyNotModal);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Dropdown');","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport classList from 'flarum/common/utils/classList';\nimport Icon from 'flarum/common/components/Icon';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Button from 'flarum/common/components/Button';\nimport WhyNotModal from './WhyNotModal';\nimport Label from './Label';\nimport Dropdown from 'flarum/common/components/Dropdown';\nexport default class ExtensionItem extends Component {\n  view(vnode) {\n    var _updates$latestMinor;\n    const {\n      extension,\n      updates,\n      onClickUpdate,\n      whyNotWarning,\n      isCore,\n      isDanger\n    } = this.attrs;\n    const latestVersion = (_updates$latestMinor = updates['latest-minor']) != null ? _updates$latestMinor : updates['latest-major'] && !isCore ? updates['latest-major'] : null;\n    return m(\"div\", {\n      className: classList({\n        'ExtensionManager-extension': true,\n        'ExtensionManager-extension--core': isCore,\n        'ExtensionManager-extension--danger': isDanger\n      })\n    }, m(\"div\", {\n      className: \"ExtensionManager-extension-icon ExtensionIcon\",\n      style: extension.icon\n    }, extension.icon ? m(Icon, {\n      name: extension.icon.name\n    }) : ''), m(\"div\", {\n      className: \"ExtensionManager-extension-info\"\n    }, m(\"div\", {\n      className: \"ExtensionManager-extension-name\"\n    }, extension.extra['flarum-extension'].title), m(\"div\", {\n      className: \"ExtensionManager-extension-version\"\n    }, m(\"span\", {\n      className: \"ExtensionManager-extension-version-current\"\n    }, this.version(updates['version'])), latestVersion ? m(Label, {\n      className: \"ExtensionManager-extension-version-latest\",\n      type: updates['latest-minor'] ? 'success' : 'warning'\n    }, this.version(latestVersion)) : null)), m(\"div\", {\n      className: \"ExtensionManager-extension-controls\"\n    }, onClickUpdate && typeof onClickUpdate === 'function' ? m(Tooltip, {\n      text: app.translator.trans('flarum-extension-manager.admin.extensions.update')\n    }, m(Button, {\n      icon: \"fas fa-arrow-alt-circle-up\",\n      className: \"Button Button--icon Button--flat\",\n      onclick: onClickUpdate,\n      \"aria-label\": app.translator.trans('flarum-extension-manager.admin.extensions.update')\n    })) : onClickUpdate ? m(Dropdown, {\n      buttonClassName: \"Button Button--icon Button--flat\",\n      icon: \"fas fa-arrow-alt-circle-up\",\n      label: app.translator.trans('flarum-extension-manager.admin.extensions.update')\n    }, m(Button, {\n      icon: \"fas fa-arrow-alt-circle-up\",\n      className: \"Button\",\n      onclick: onClickUpdate.soft\n    }, app.translator.trans('flarum-extension-manager.admin.extensions.update_soft_label')), m(Button, {\n      icon: \"fas fa-arrow-alt-circle-up\",\n      className: \"Button\",\n      onclick: onClickUpdate.hard,\n      disabled: !updates['direct-dependency']\n    }, app.translator.trans('flarum-extension-manager.admin.extensions.update_hard_label'))) : null, whyNotWarning ? m(Tooltip, {\n      text: app.translator.trans('flarum-extension-manager.admin.extensions.check_why_it_failed_updating')\n    }, m(Button, {\n      icon: \"fas fa-exclamation-circle\",\n      className: \"Button Button--icon Button--flat Button--danger\",\n      onclick: () => app.modal.show(WhyNotModal, {\n        package: extension.name\n      }),\n      \"aria-label\": app.translator.trans('flarum-extension-manager.admin.extensions.check_why_it_failed_updating')\n    })) : null));\n  }\n  version(v) {\n    return v.charAt(0) === 'v' ? v.substring(1) : v;\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/ExtensionItem', ExtensionItem);","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Alert from 'flarum/common/components/Alert';\nimport WhyNotModal from './WhyNotModal';\nimport ExtensionItem from './ExtensionItem';\nimport classList from 'flarum/common/utils/classList';\nexport default class MajorUpdater extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"updateState\", void 0);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.updateState = this.attrs.updateState;\n  }\n  view() {\n    // @todo move Form-group--danger class to core for reuse\n    return m(\"div\", {\n      className: classList('Form-group Form-group--danger ExtensionManager-majorUpdate', {\n        'ExtensionManager-majorUpdate--failed': this.updateState.status === 'failure',\n        'ExtensionManager-majorUpdate--incompatibleExtensions': this.updateState.incompatibleExtensions.length\n      })\n    }, m(\"img\", {\n      alt: \"flarum logo\",\n      src: app.forum.attribute('baseUrl') + '/assets/extensions/flarum-extension-manager/flarum.svg'\n    }), m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.major_updater.title', {\n      version: this.attrs.coreUpdate['latest-major']\n    })), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('flarum-extension-manager.admin.major_updater.description')), m(\"div\", {\n      className: \"ExtensionManager-updaterControls\"\n    }, m(Tooltip, {\n      text: app.translator.trans('flarum-extension-manager.admin.major_updater.dry_run_help')\n    }, m(Button, {\n      className: \"Button\",\n      icon: \"fas fa-vial\",\n      onclick: this.update.bind(this, true),\n      disabled: app.extensionManager.control.hasOperationRunning()\n    }, app.translator.trans('flarum-extension-manager.admin.major_updater.dry_run'))), m(Button, {\n      className: \"Button Button--danger\",\n      icon: \"fas fa-play\",\n      onclick: this.update.bind(this, false),\n      disabled: app.extensionManager.control.hasOperationRunning()\n    }, app.translator.trans('flarum-extension-manager.admin.major_updater.update'))), this.updateState.incompatibleExtensions.length ? m(\"div\", {\n      className: \"ExtensionManager-majorUpdate-incompatibleExtensions ExtensionManager-extensions-grid\"\n    }, this.updateState.incompatibleExtensions.map(extension => m(ExtensionItem, {\n      extension: app.data.extensions[extension.replace('flarum-', '').replace('flarum-ext-', '').replace('/', '-')],\n      updates: {},\n      onClickUpdate: null,\n      isDanger: true\n    }))) : null, this.updateState.status === 'failure' ? m(Alert, {\n      type: \"error\",\n      className: \"ExtensionManager-majorUpdate-failure\",\n      dismissible: false,\n      controls: [m(Button, {\n        className: \"Button Button--text ExtensionManager-majorUpdate-failure-details\",\n        icon: \"fas fa-question-circle\",\n        onclick: () => app.modal.show(WhyNotModal, {\n          package: 'flarum/core'\n        })\n      }, app.translator.trans('flarum-extension-manager.admin.major_updater.failure.why'))]\n    }, m(\"p\", {\n      className: \"ExtensionManager-majorUpdate-failure-desc\"\n    }, app.translator.trans('flarum-extension-manager.admin.major_updater.failure.desc'))) : null);\n  }\n  update(dryRun) {\n    app.extensionManager.control.majorUpdate({\n      dryRun\n    });\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/MajorUpdater', MajorUpdater);","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport MajorUpdater from './MajorUpdater';\nimport ExtensionItem from './ExtensionItem';\nimport ItemList from 'flarum/common/utils/ItemList';\nexport default class Updater extends Component {\n  view() {\n    const core = app.extensionManager.control.coreUpdate;\n    return [m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.updater.updater_title')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('flarum-extension-manager.admin.updater.updater_help')), this.lastUpdateCheckView(), m(\"div\", {\n      className: \"ExtensionManager-updaterControls\"\n    }, this.controlItems().toArray()), this.availableUpdatesView()), core && core.package['latest-major'] ? m(MajorUpdater, {\n      coreUpdate: core.package,\n      updateState: app.extensionManager.control.lastUpdateRun.major\n    }) : null];\n  }\n  lastUpdateCheckView() {\n    var _app$extensionManager;\n    return ((_app$extensionManager = app.extensionManager.control.lastUpdateCheck) == null ? void 0 : _app$extensionManager.checkedAt) && m(\"p\", {\n      className: \"ExtensionManager-lastUpdatedAt\"\n    }, m(\"span\", {\n      className: \"ExtensionManager-lastUpdatedAt-label\"\n    }, app.translator.trans('flarum-extension-manager.admin.updater.last_update_checked_at')), m(\"span\", {\n      className: \"ExtensionManager-lastUpdatedAt-value\"\n    }, humanTime(app.extensionManager.control.lastUpdateCheck.checkedAt))) || null;\n  }\n  availableUpdatesView() {\n    const state = app.extensionManager.control;\n    if (app.extensionManager.control.isLoading('check') || app.extensionManager.control.isLoading('global-update')) {\n      return m(\"div\", {\n        className: \"ExtensionManager-extensions\"\n      }, m(LoadingIndicator, null));\n    }\n    const hasMinorCoreUpdate = state.coreUpdate && state.coreUpdate.package['latest-minor'];\n    if (!(state.extensionUpdates.length || hasMinorCoreUpdate)) {\n      return m(\"div\", {\n        className: \"ExtensionManager-extensions\"\n      }, m(\"span\", {\n        className: \"helpText\"\n      }, app.translator.trans('flarum-extension-manager.admin.updater.up_to_date')));\n    }\n    return m(\"div\", {\n      className: \"ExtensionManager-extensions\"\n    }, m(\"div\", {\n      className: \"ExtensionManager-extensions-grid\"\n    }, hasMinorCoreUpdate ? m(ExtensionItem, {\n      extension: state.coreUpdate.extension,\n      updates: state.coreUpdate.package,\n      isCore: true,\n      onClickUpdate: () => state.updateCoreMinor(),\n      whyNotWarning: state.lastUpdateRun.limitedPackages().includes('flarum/core')\n    }) : null, state.extensionUpdates.map(extension => m(ExtensionItem, {\n      extension: extension,\n      updates: state.packageUpdates[extension.id],\n      onClickUpdate: {\n        soft: () => state.updateExtension(extension, 'soft'),\n        hard: () => state.updateExtension(extension, 'hard')\n      },\n      whyNotWarning: state.lastUpdateRun.limitedPackages().includes(extension.name)\n    }))));\n  }\n  controlItems() {\n    const items = new ItemList();\n    items.add('updateCheck', m(Button, {\n      className: \"Button\",\n      icon: \"fas fa-sync-alt\",\n      onclick: () => app.extensionManager.control.checkForUpdates(),\n      loading: app.extensionManager.control.isLoading('check'),\n      disabled: app.extensionManager.control.hasOperationRunning()\n    }, app.translator.trans('flarum-extension-manager.admin.updater.check_for_updates')), 100);\n    items.add('globalUpdate', m(Button, {\n      className: \"Button\",\n      icon: \"fas fa-play\",\n      onclick: () => app.extensionManager.control.updateGlobally(),\n      loading: app.extensionManager.control.isLoading('global-update'),\n      disabled: app.extensionManager.control.hasOperationRunning()\n    }, app.translator.trans('flarum-extension-manager.admin.updater.run_global_update')));\n    return items;\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/Updater', Updater);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Form');","import app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Alert from 'flarum/common/components/Alert';\nimport Installer from './Installer';\nimport Updater from './Updater';\nimport Form from 'flarum/common/components/Form';\nexport default class ControlSection extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n  }\n  view() {\n    return m(\"div\", {\n      className: \"ExtensionPage-permissions ExtensionManager-controlSection\"\n    }, m(\"div\", {\n      className: \"ExtensionPage-permissions-header\"\n    }, m(\"div\", {\n      className: \"container\"\n    }, m(\"h2\", {\n      className: \"ExtensionTitle\"\n    }, app.translator.trans('flarum-extension-manager.admin.sections.control.title')))), m(\"div\", {\n      className: \"container\"\n    }, app.data['flarum-extension-manager.writable_dirs'] ? m(Form, null, m(Installer, null), m(Updater, null)) : m(\"div\", {\n      className: \"Form-group\"\n    }, m(Alert, {\n      type: \"warning\",\n      dismissible: false\n    }, app.translator.trans('flarum-extension-manager.admin.file_permissions')))));\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/ControlSection', ControlSection);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/FormGroup');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport FormGroup from 'flarum/common/components/FormGroup';\nimport Stream from 'flarum/common/utils/Stream';\nimport Button from 'flarum/common/components/Button';\nimport classList from 'flarum/common/utils/classList';\nexport default class ConfigureJson extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"settings\", {});\n    _defineProperty(this, \"initialSettings\", null);\n    _defineProperty(this, \"loading\", false);\n    _defineProperty(this, \"type\", void 0);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.submit(true);\n  }\n  className() {\n    return '';\n  }\n  view() {\n    return m(\"div\", {\n      className: classList('FormSection', this.className())\n    }, m(\"label\", null, this.title()), this.content(), m(\"div\", {\n      className: \"Form-group Form-controls\"\n    }, this.submitButton()));\n  }\n  submitButton() {\n    return [m(Button, {\n      className: \"Button Button--primary\",\n      loading: this.loading,\n      onclick: () => this.submit(false),\n      disabled: !this.isDirty()\n    }, app.translator.trans('core.admin.settings.submit_button'))];\n  }\n  customSettingComponents() {\n    return FormGroup.prototype.customFieldComponents();\n  }\n  setting(key) {\n    var _this$settings$key;\n    return (_this$settings$key = this.settings[key]) != null ? _this$settings$key : this.settings[key] = Stream();\n  }\n  submit(readOnly) {\n    this.loading = true;\n    const configuration = {};\n    Object.keys(this.settings).forEach(key => {\n      configuration[key] = this.settings[key]();\n    });\n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/extension-manager/composer',\n      body: {\n        type: this.type,\n        data: readOnly ? null : configuration\n      }\n    }).then(_ref => {\n      let {\n        data\n      } = _ref;\n      Object.keys(data).forEach(key => {\n        this.settings[key] = Stream(data[key]);\n      });\n      this.initialSettings = Array.isArray(data) ? {} : data;\n    }).finally(() => {\n      this.loading = false;\n      m.redraw();\n    });\n  }\n  isDirty() {\n    return JSON.stringify(this.initialSettings) !== JSON.stringify(this.settings);\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/ConfigureJson', ConfigureJson);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Select');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Modal from 'flarum/common/components/Modal';\nimport app from 'flarum/admin/app';\nimport Select from 'flarum/common/components/Select';\nimport Stream from 'flarum/common/utils/Stream';\nimport Button from 'flarum/common/components/Button';\nimport Form from 'flarum/common/components/Form';\nexport default class RepositoryModal extends Modal {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"name\", void 0);\n    _defineProperty(this, \"repository\", void 0);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.name = Stream(this.attrs.name || '');\n    this.repository = Stream(this.attrs.repository || {\n      type: 'composer',\n      url: ''\n    });\n  }\n  className() {\n    return 'RepositoryModal Modal--small';\n  }\n  title() {\n    const context = this.attrs.repository ? 'edit' : 'add';\n    return app.translator.trans(\"flarum-extension-manager.admin.composer.\".concat(context, \"_repository_label\"));\n  }\n  content() {\n    const types = {\n      composer: app.translator.trans('flarum-extension-manager.admin.composer.repositories.types.composer'),\n      vcs: app.translator.trans('flarum-extension-manager.admin.composer.repositories.types.vcs'),\n      path: app.translator.trans('flarum-extension-manager.admin.composer.repositories.types.path')\n    };\n    return m(\"div\", {\n      className: \"Modal-body\"\n    }, m(Form, null, m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.composer.repositories.add_modal.name_label')), m(\"input\", {\n      className: \"FormControl\",\n      bidi: this.name\n    })), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.composer.repositories.add_modal.type_label')), m(Select, {\n      options: types,\n      value: this.repository().type,\n      onchange: value => this.repository({\n        ...this.repository(),\n        type: value\n      })\n    })), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.composer.repositories.add_modal.url')), m(\"input\", {\n      className: \"FormControl\",\n      onchange: e => this.repository({\n        ...this.repository(),\n        url: e.target.value\n      }),\n      value: this.repository().url\n    })), m(\"div\", {\n      className: \"Form-group\"\n    }, m(Button, {\n      className: \"Button Button--primary\",\n      onclick: this.submit.bind(this)\n    }, app.translator.trans('flarum-extension-manager.admin.composer.repositories.add_modal.submit_button')))));\n  }\n  submit() {\n    this.attrs.onsubmit(this.repository(), this.name());\n    this.hide();\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/RepositoryModal', RepositoryModal);","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport ConfigureJson from './ConfigureJson';\nimport Button from 'flarum/common/components/Button';\nimport extractText from 'flarum/common/utils/extractText';\nimport RepositoryModal from './RepositoryModal';\nexport default class ConfigureComposer extends ConfigureJson {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"type\", 'composer');\n  }\n  title() {\n    return app.translator.trans('flarum-extension-manager.admin.composer.title');\n  }\n  className() {\n    return 'ConfigureComposer';\n  }\n  content() {\n    return m(\"div\", {\n      className: \"Form ExtensionManager-SettingsGroups-content\"\n    }, this.attrs.buildSettingComponent.call(this, {\n      setting: 'minimum-stability',\n      label: app.translator.trans('flarum-extension-manager.admin.composer.minimum_stability.label'),\n      help: app.translator.trans('flarum-extension-manager.admin.composer.minimum_stability.help'),\n      type: 'select',\n      options: {\n        stable: app.translator.trans('flarum-extension-manager.admin.composer.minimum_stability.options.stable'),\n        RC: app.translator.trans('flarum-extension-manager.admin.composer.minimum_stability.options.rc'),\n        beta: app.translator.trans('flarum-extension-manager.admin.composer.minimum_stability.options.beta'),\n        alpha: app.translator.trans('flarum-extension-manager.admin.composer.minimum_stability.options.alpha'),\n        dev: app.translator.trans('flarum-extension-manager.admin.composer.minimum_stability.options.dev')\n      }\n    }), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.composer.repositories.label')), m(\"div\", {\n      className: \"helpText\"\n    }, app.translator.trans('flarum-extension-manager.admin.composer.repositories.help')), m(\"div\", {\n      className: \"ConfigureComposer-repositories\"\n    }, Object.keys(this.setting('repositories')() || {}).map(name => {\n      const repository = this.setting('repositories')()[name];\n      return m(\"div\", {\n        className: \"ButtonGroup ButtonGroup--full\"\n      }, m(Button, {\n        className: \"Button\",\n        icon: {\n          composer: 'fas fa-cubes',\n          vcs: 'fas fa-code-branch',\n          path: 'fas fa-folder'\n        }[repository.type],\n        onclick: () => app.modal.show(RepositoryModal, {\n          name,\n          repository,\n          onsubmit: (repository, newName) => {\n            const repositories = this.setting('repositories')();\n            delete repositories[name];\n            this.setting('repositories')(repositories);\n            this.onchange(repository, newName);\n          }\n        })\n      }, name, \" (\", repository.type, \")\"), m(Button, {\n        className: \"Button Button--icon\",\n        icon: \"fas fa-trash\",\n        \"aria-label\": app.translator.trans('flarum-extension-manager.admin.composer.delete_repository_label'),\n        onclick: () => {\n          if (confirm(extractText(app.translator.trans('flarum-extension-manager.admin.composer.delete_repository_confirmation')))) {\n            const repositories = {\n              ...this.setting('repositories')()\n            };\n            delete repositories[name];\n            this.setting('repositories')(repositories);\n          }\n        }\n      }));\n    }))));\n  }\n  submitButton() {\n    const items = super.submitButton();\n    items.push(m(Button, {\n      className: \"Button\",\n      onclick: () => app.modal.show(RepositoryModal, {\n        onsubmit: this.onchange.bind(this)\n      })\n    }, app.translator.trans('flarum-extension-manager.admin.composer.add_repository_label')));\n    return items;\n  }\n  onchange(repository, name) {\n    this.setting('repositories')({\n      ...this.setting('repositories')(),\n      [name]: repository\n    });\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/ConfigureComposer', ConfigureComposer);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/listItems');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Modal from 'flarum/common/components/Modal';\nimport app from 'flarum/admin/app';\nimport Select from 'flarum/common/components/Select';\nimport Stream from 'flarum/common/utils/Stream';\nimport Button from 'flarum/common/components/Button';\nimport extractText from 'flarum/common/utils/extractText';\nimport Form from 'flarum/common/components/Form';\nexport default class AuthMethodModal extends Modal {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"type\", void 0);\n    _defineProperty(this, \"host\", void 0);\n    _defineProperty(this, \"token\", void 0);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.type = Stream(this.attrs.type || 'bearer');\n    this.host = Stream(this.attrs.host || '');\n    this.token = Stream(this.attrs.token || '');\n  }\n  className() {\n    return 'AuthMethodModal Modal--small';\n  }\n  title() {\n    const context = this.attrs.host ? 'edit' : 'add';\n    return app.translator.trans(\"flarum-extension-manager.admin.auth_config.\".concat(context, \"_label\"));\n  }\n  content() {\n    const types = {\n      'github-oauth': app.translator.trans('flarum-extension-manager.admin.auth_config.types.github-oauth'),\n      'gitlab-oauth': app.translator.trans('flarum-extension-manager.admin.auth_config.types.gitlab-oauth'),\n      'gitlab-token': app.translator.trans('flarum-extension-manager.admin.auth_config.types.gitlab-token'),\n      bearer: app.translator.trans('flarum-extension-manager.admin.auth_config.types.bearer')\n    };\n    return m(\"div\", {\n      className: \"Modal-body\"\n    }, m(Form, null, m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.auth_config.add_modal.type_label')), m(Select, {\n      options: types,\n      value: this.type(),\n      onchange: this.type\n    })), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.auth_config.add_modal.host_label')), m(\"input\", {\n      className: \"FormControl\",\n      bidi: this.host,\n      placeholder: app.translator.trans('flarum-extension-manager.admin.auth_config.add_modal.host_placeholder')\n    })), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.auth_config.add_modal.token_label')), m(\"textarea\", {\n      className: \"FormControl\",\n      oninput: e => this.token(e.target.value),\n      rows: \"6\",\n      placeholder: this.token().startsWith('unchanged:') ? extractText(app.translator.trans('flarum-extension-manager.admin.auth_config.add_modal.unchanged_token_placeholder')) : ''\n    }, this.token().startsWith('unchanged:') ? '' : this.token())), m(\"div\", {\n      className: \"Form-group\"\n    }, m(Button, {\n      className: \"Button Button--primary\",\n      onclick: this.submit.bind(this)\n    }, app.translator.trans('flarum-extension-manager.admin.auth_config.add_modal.submit_button')))));\n  }\n  submit() {\n    this.attrs.onsubmit(this.type(), this.host(), this.token());\n    this.hide();\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/AuthMethodModal', AuthMethodModal);","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport ConfigureJson from './ConfigureJson';\nimport Button from 'flarum/common/components/Button';\nimport AuthMethodModal from './AuthMethodModal';\nimport extractText from 'flarum/common/utils/extractText';\nexport default class ConfigureAuth extends ConfigureJson {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"type\", 'auth');\n  }\n  title() {\n    return app.translator.trans('flarum-extension-manager.admin.auth_config.title');\n  }\n  className() {\n    return 'ConfigureAuth';\n  }\n  content() {\n    const authSettings = Object.keys(this.settings);\n    const hasAuthSettings = authSettings.length && authSettings.every(type => {\n      const data = this.settings[type]();\n      return Array.isArray(data) ? data.length : Object.keys(data).length;\n    });\n    return m(\"div\", {\n      className: \"ExtensionManager-SettingsGroups-content\"\n    }, hasAuthSettings ? authSettings.map(type => {\n      const hosts = this.settings[type]();\n      return m(\"div\", {\n        className: \"Form-group\"\n      }, m(\"label\", null, app.translator.trans(\"flarum-extension-manager.admin.auth_config.types.\".concat(type))), m(\"div\", {\n        className: \"ConfigureAuth-hosts\"\n      }, Object.keys(hosts).map(host => {\n        const data = hosts[host];\n        return m(\"div\", {\n          className: \"ButtonGroup ButtonGroup--full\"\n        }, m(Button, {\n          className: \"Button\",\n          icon: \"fas fa-key\",\n          onclick: () => app.modal.show(AuthMethodModal, {\n            type,\n            host,\n            token: data,\n            onsubmit: this.onchange.bind(this, host)\n          })\n        }, host), m(Button, {\n          className: \"Button Button--icon\",\n          icon: \"fas fa-trash\",\n          \"aria-label\": app.translator.trans('flarum-extension-manager.admin.auth_config.delete_label'),\n          onclick: () => {\n            if (confirm(extractText(app.translator.trans('flarum-extension-manager.admin.auth_config.delete_confirmation')))) {\n              const newType = {\n                ...this.setting(type)()\n              };\n              delete newType[host];\n              if (Object.keys(newType).length) {\n                this.setting(type)(newType);\n              } else {\n                delete this.settings[type];\n              }\n            }\n          }\n        }));\n      })));\n    }) : m(\"span\", {\n      className: \"helpText\"\n    }, app.translator.trans('flarum-extension-manager.admin.auth_config.no_auth_methods_configured')));\n  }\n  submitButton() {\n    const items = super.submitButton();\n    items.push(m(Button, {\n      className: \"Button\",\n      loading: this.loading,\n      onclick: () => app.modal.show(AuthMethodModal, {\n        onsubmit: this.onchange.bind(this, null)\n      })\n    }, app.translator.trans('flarum-extension-manager.admin.auth_config.add_label')));\n    return items;\n  }\n  onchange(oldHost, type, host, token) {\n    const data = {\n      ...this.setting(type)()\n    };\n    if (oldHost) {\n      delete data[oldHost];\n    }\n    data[host] = token;\n    this.setting(type)(data);\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/ConfigureAuth', ConfigureAuth);","import app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport QueueSection from './QueueSection';\nimport ControlSection from './ControlSection';\nimport ConfigureComposer from './ConfigureComposer';\nimport Alert from 'flarum/common/components/Alert';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ConfigureAuth from './ConfigureAuth';\nexport default class SettingsPage extends ExtensionPage {\n  content() {\n    const settings = app.registry.getSettings(this.extension.id);\n    const warnings = [app.translator.trans('flarum-extension-manager.admin.settings.access_warning')];\n    if (app.data.debugEnabled) warnings.push(app.translator.trans('flarum-extension-manager.admin.settings.debug_mode_warning'));\n    return m(\"div\", {\n      className: \"ExtensionPage-settings\"\n    }, m(\"div\", {\n      className: \"container\"\n    }, m(\"div\", {\n      className: \"ExtensionManager-warnings Form-group\"\n    }, m(Alert, {\n      className: \"ExtensionManager-primaryWarning\",\n      type: \"warning\",\n      dismissible: false\n    }, m(\"ul\", null, listItems(warnings)))), settings ? m(\"div\", {\n      className: \"FormSectionGroup ExtensionManager-SettingsGroups\"\n    }, m(\"div\", {\n      className: \"FormSection\"\n    }, m(\"label\", null, app.translator.trans('flarum-extension-manager.admin.settings.title')), m(\"div\", {\n      className: \"Form\"\n    }, settings.map(this.buildSettingComponent.bind(this))), m(\"div\", {\n      className: \"Form-group Form--controls\"\n    }, this.submitButton())), m(ConfigureComposer, {\n      buildSettingComponent: this.buildSettingComponent\n    }), m(ConfigureAuth, {\n      buildSettingComponent: this.buildSettingComponent\n    })) : m(\"h3\", {\n      className: \"ExtensionPage-subHeader\"\n    }, app.translator.trans('core.admin.extension.no_settings'))));\n  }\n  sections(vnode) {\n    const items = super.sections(vnode);\n    items.setPriority('content', 10);\n    items.add('control', m(ControlSection, null), 8);\n    if (app.data.settings['flarum-extension-manager.queue_jobs'] !== '0' && app.data.settings['flarum-extension-manager.queue_jobs']) {\n      items.add('queue', m(QueueSection, null), 5);\n    }\n    items.remove('permissions');\n    return items;\n  }\n  onsaved() {\n    super.onsaved();\n    m.redraw();\n  }\n}\nflarum.reg.add('flarum-extension-manager', 'admin/components/SettingsPage', SettingsPage);","import Extend from 'flarum/common/extenders';\nimport app from 'flarum/admin/app';\nimport extractText from 'flarum/common/utils/extractText';\nimport SettingsPage from './components/SettingsPage';\nexport default [new Extend.Admin().setting(() => ({\n  setting: 'flarum-extension-manager.queue_jobs',\n  label: app.translator.trans('flarum-extension-manager.admin.settings.queue_jobs'),\n  help: m.trust(extractText(app.translator.trans('flarum-extension-manager.admin.settings.queue_jobs_help', {\n    basic_impl_link: 'https://discuss.flarum.org/d/28151-database-queue-the-simplest-queue-even-for-shared-hosting',\n    adv_impl_link: 'https://discuss.flarum.org/d/21873-redis-sessions-cache-queues',\n    php_version: \"<strong>\".concat(app.data.phpVersion, \"</strong>\"),\n    folder_perms_link: 'https://docs.flarum.org/install#folder-ownership'\n  }))),\n  type: 'boolean',\n  disabled: app.data['flarum-extension-manager.using_sync_queue']\n})).setting(() => ({\n  setting: 'flarum-extension-manager.task_retention_days',\n  label: app.translator.trans('flarum-extension-manager.admin.settings.task_retention_days'),\n  help: app.translator.trans('flarum-extension-manager.admin.settings.task_retention_days_help'),\n  type: 'number'\n})).page(SettingsPage).generalIndexItems('settings', () => [{\n  id: 'minimum-stability',\n  label: app.translator.trans('flarum-extension-manager.admin.composer.minimum_stability.label', {}, true),\n  help: app.translator.trans('flarum-extension-manager.admin.composer.minimum_stability.help', {}, true)\n}, {\n  id: 'repositories',\n  label: app.translator.trans('flarum-extension-manager.admin.composer.repositories.label', {}, true),\n  help: app.translator.trans('flarum-extension-manager.admin.composer.repositories.help', {}, true)\n}, {\n  id: 'composer-auth',\n  label: app.translator.trans('flarum-extension-manager.admin.auth_config.title', {}, true)\n}, {\n  id: 'updates',\n  label: app.translator.trans('flarum-extension-manager.admin.updater.updater_title', {}, true),\n  help: app.translator.trans('flarum-extension-manager.admin.updater.updater_help', {}, true)\n}])];","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Button from 'flarum/common/components/Button';\nimport LoadingModal from 'flarum/admin/components/LoadingModal';\nimport isExtensionEnabled from 'flarum/admin/utils/isExtensionEnabled';\nimport Task from './models/Task';\nimport jumpToQueue from './utils/jumpToQueue';\nimport ExtensionManagerState from './states/ExtensionManagerState';\nexport { default as extend } from './extend';\napp.initializers.add('flarum-extension-manager', app => {\n  app.store.models['extension-manager-tasks'] = Task;\n  app.extensionManager = new ExtensionManagerState();\n  if (app.data['flarum-extension-manager.using_sync_queue']) {\n    app.data.settings['flarum-extension-manager.queue_jobs'] = '0';\n  }\n  extend(ExtensionPage.prototype, 'topItems', function (items) {\n    if (this.extension.id === 'flarum-extension-manager' || isExtensionEnabled(this.extension.id)) {\n      return;\n    }\n    items.add('remove', m(Button, {\n      className: \"Button Button--danger\",\n      icon: \"fas fa-times\",\n      onclick: () => {\n        app.modal.show(LoadingModal);\n        app.request({\n          url: \"\".concat(app.forum.attribute('apiUrl'), \"/extension-manager/extensions/\").concat(this.extension.id),\n          method: 'DELETE'\n        }).then(response => {\n          if (response != null && response.processing) {\n            jumpToQueue();\n          } else {\n            app.alerts.show({\n              type: 'success'\n            }, app.translator.trans('flarum-extension-manager.admin.extensions.successful_remove'));\n            window.location = app.forum.attribute('adminUrl');\n          }\n        }).finally(() => {\n          app.modal.close();\n        });\n      }\n    }, app.translator.trans('flarum-extension-manager.admin.extensions.remove')));\n  });\n});"],"names":["module","exports","t","s","n","i","e","r","o","u","d","a","h","years","months","days","hours","minutes","seconds","milliseconds","weeks","c","g","f","$l","m","p","l","$","Math","ceil","floor","y","abs","v","negative","format","this","$d","$ms","parseFromMilliseconds","Object","keys","forEach","calMilliseconds","match","slice","map","Number","prototype","reduce","toISOString","round","toJSON","Y","YY","YYYY","M","MM","D","DD","H","HH","mm","ss","SSS","replace","String","as","get","add","subtract","locale","clone","humanize","fromNow","valueOf","asMilliseconds","asSeconds","asMinutes","asHours","asDays","asWeeks","asMonths","asYears","$utils","duration","isDuration","bind","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call","getter","__esModule","definition","key","defineProperty","enumerable","obj","prop","hasOwnProperty","Symbol","toStringTag","value","flarum","reg","BYTE_UNITS","BIBYTE_UNITS","BIT_UNITS","BIBIT_UNITS","toLocaleString","number","options","result","Array","isArray","Task","status","operation","command","package","output","guessedCause","createdAt","startedAt","finishedAt","peakMemoryUsed","isFinite","TypeError","concat","UNITS","bits","binary","space","separator","signed","isNegative","prefix","localeOptions","minimumFractionDigits","maximumFractionDigits","exponent","min","log","log10","length","toPrecision","prettyBytes","jumpToQueue","close","route","set","id","queue","load","setTimeout","_document$getElementB","document","getElementById","scrollIntoView","block","_typeof","iterator","constructor","_defineProperty","toPrimitive","configurable","writable","window","QueueState","params","actionTaken","_params","tasks","page","limit","offset","find","then","data","_data$payload$meta","total","payload","meta","redraw","task","pollQueue","control","setLoading","location","reload","isLoading","getItems","getTotalPages","pageNumber","hasPrev","hasNext","prev","next","polling","clearTimeout","hasPending","_this$tasks","error","response","errors","includes","code","clear","guessed_cause","show","type","trans","ControlSectionState","lastUpdateRun","JSON","parse","settings","limitedPackages","major","minor","global","lastUpdateCheck","extensionUpdates","formatExtensionUpdates","coreUpdate","formatCoreUpdate","name","loading","hasOperationRunning","requirePackage","method","url","attribute","body","processing","extensionId","extension","href","catch","errorHandler","finally","checkForUpdates","updateCoreMinor","confirm","updateExtension","updateMode","extra","title","updateGlobally","_lastUpdateCheck$upda","packageUpdates","updates","installed","filter","composerPackage","extensions","safeToUpdate","values","_lastUpdateCheck$upda2","core","pop","version","icon","backgroundImage","resources","majorUpdate","_ref","dryRun","updateState","_e$response","incompatibleExtensions","incompatible_extensions","ExtensionManagerState","Label","view","vnode","className","attrs","assign","children","TaskOutputModal","content","humanDuration","start","end","dayjs","extend","durationTime","diff","Pagination","disabled","list","onclick","current","QueueSection","oninit","super","queueTable","columns","items","label","operationIcon","_task$package","style","running","failure","pending","success","size","display","text","toArray","item","index","update_check","update_major","update_minor","update_global","extension_install","extension_remove","extension_update","why_not","Installer","arguments","packageName","htmlFor","extiverse","semantic_link","placeholder","bidi","onsubmit","WhyNotModal","oncreate","requestWhyNot","whyNot","reason","ExtensionItem","_updates$latestMinor","onClickUpdate","whyNotWarning","isCore","isDanger","latestVersion","buttonClassName","soft","hard","charAt","substring","MajorUpdater","alt","src","update","dismissible","controls","Updater","lastUpdateCheckView","controlItems","availableUpdatesView","_app$extensionManager","checkedAt","state","hasMinorCoreUpdate","ControlSection","ConfigureJson","submit","submitButton","isDirty","customSettingComponents","customFieldComponents","setting","_this$settings$key","readOnly","configuration","initialSettings","stringify","RepositoryModal","repository","context","types","composer","vcs","path","onchange","target","hide","ConfigureComposer","buildSettingComponent","help","stable","RC","beta","alpha","dev","newName","repositories","push","AuthMethodModal","host","token","bearer","oninput","rows","startsWith","ConfigureAuth","authSettings","hasAuthSettings","every","hosts","newType","oldHost","SettingsPage","getSettings","warnings","debugEnabled","sections","setPriority","remove","onsaved","trust","basic_impl_link","adv_impl_link","php_version","phpVersion","folder_perms_link","generalIndexItems","app","store","models","extensionManager","modal","request","forum","alerts","translator"],"sourceRoot":""}