(()=>{var o={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return o.d(n,{a:n}),n},d:(t,n)=>{for(var e in n)o.o(n,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},t={};(()=>{"use strict";o.r(t),o.d(t,{extend:()=>O});const n=flarum.core.compat["common/extend"],e=flarum.core.compat["forum/app"];var c=o.n(e);const s=flarum.core.compat["forum/components/NotificationGrid"];var r=o.n(s);const a=flarum.core.compat["forum/components/Notification"];var i=o.n(a);class l extends(i()){icon(){return"fas fa-lock"}href(){const o=this.attrs.notification;return c().route.discussion(o.subject(),o.content().postNumber)}content(){return c().translator.trans("flarum-lock.forum.notifications.discussion_locked_text",{user:this.attrs.notification.fromUser()})}}const u=flarum.core.compat["common/models/Discussion"];var d=o.n(u);const f=flarum.core.compat["common/components/Badge"];var p=o.n(f);const k=flarum.core.compat["forum/utils/DiscussionControls"];var b=o.n(k);const _=flarum.core.compat["forum/components/DiscussionPage"];var v=o.n(_);const y=flarum.core.compat["common/components/Button"];var h=o.n(y);const x=flarum.core.compat["common/extenders"];var g=o.n(x);const L=flarum.core.compat["forum/components/EventPost"];var P=o.n(L);class j extends(P()){icon(){return this.attrs.post.content().locked?"fas fa-lock":"fas fa-unlock"}descriptionKey(){return this.attrs.post.content().locked?"flarum-lock.forum.post_stream.discussion_locked_text":"flarum-lock.forum.post_stream.discussion_unlocked_text"}}const O=[(new(g().PostTypes)).add("discussionLocked",j),new(g().Model)(d()).attribute("isLocked").attribute("canLock")];c().initializers.add("flarum-lock",(()=>{c().notificationComponents.discussionLocked=l,(0,n.extend)(d().prototype,"badges",(function(o){this.isLocked()&&o.add("locked",m(p(),{type:"locked",label:c().translator.trans("flarum-lock.forum.badge.locked_tooltip"),icon:"fas fa-lock"}))})),(0,n.extend)(b(),"moderationControls",(function(o,t){t.canLock()&&o.add("lock",m(h(),{icon:"fas fa-lock",onclick:this.lockAction.bind(t)},c().translator.trans("flarum-lock.forum.discussion_controls.".concat(t.isLocked()?"unlock":"lock","_button"))))})),b().lockAction=function(){this.save({isLocked:!this.isLocked()}).then((()=>{c().current.matches(v())&&c().current.get("stream").update(),m.redraw()}))},(0,n.extend)(r().prototype,"notificationTypes",(function(o){o.add("discussionLocked",{name:"discussionLocked",icon:"fas fa-lock",label:c().translator.trans("flarum-lock.forum.settings.notify_discussion_locked_label")})}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map