{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@flarum/flags/webpack/bootstrap","webpack://@flarum/flags/webpack/runtime/compat get default export","webpack://@flarum/flags/webpack/runtime/define property getters","webpack://@flarum/flags/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/flags/webpack/runtime/make namespace object","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@flarum/flags/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@flarum/flags/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@flarum/flags/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@flarum/flags/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@flarum/flags/./src/forum/states/FlagListState.tsx","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/utils/PostControls')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/components/FormModal')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/components/Form')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/utils/Stream')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/utils/withAttr')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@flarum/flags/./src/forum/components/FlagPostModal.js","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/components/HeaderSecondary')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/components/HeaderDropdown')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/utils/classList')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/components/Avatar')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/helpers/username')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/components/HeaderList')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/components/HeaderListItem')\"","webpack://@flarum/flags/./src/forum/components/FlagList.tsx","webpack://@flarum/flags/./src/forum/components/FlagsDropdown.tsx","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/components/Post')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/utils/humanTime')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/models/Post')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/components/Page')\"","webpack://@flarum/flags/./src/forum/components/FlagsPage.js","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@flarum/flags/./src/forum/models/Flag.ts","webpack://@flarum/flags/./src/forum/extend.ts","webpack://@flarum/flags/./src/forum/index.ts","webpack://@flarum/flags/./src/forum/addFlagControl.js","webpack://@flarum/flags/./src/forum/addFlagsDropdown.js","webpack://@flarum/flags/./src/forum/addFlagsToPosts.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/app');","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nexport default class FlagListState {\n  constructor(app) {\n    _defineProperty(this, \"app\", void 0);\n    _defineProperty(this, \"loading\", false);\n    _defineProperty(this, \"cache\", null);\n    _defineProperty(this, \"index\", null);\n    this.app = app;\n  }\n\n  /**\n   * Load flags into the application's cache if they haven't already\n   * been loaded.\n   */\n  load() {\n    if (this.cache && !this.app.session.user.attribute('newFlagCount')) {\n      return;\n    }\n    this.loading = true;\n    m.redraw();\n    this.app.store.find('flags').then(flags => {\n      this.app.session.user.pushAttributes({\n        newFlagCount: 0\n      });\n      this.cache = flags.sort((a, b) => b.createdAt().getTime() - a.createdAt().getTime());\n    }).catch(() => {}).then(() => {\n      this.loading = false;\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/states/FlagListState', FlagListState);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/PostControls');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/FormModal');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Form');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/Stream');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/withAttr');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/ItemList');","import app from 'flarum/forum/app';\nimport FormModal from 'flarum/common/components/FormModal';\nimport Form from 'flarum/common/components/Form';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport ItemList from 'flarum/common/utils/ItemList';\nexport default class FlagPostModal extends FormModal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.success = false;\n    this.reason = Stream('');\n    this.reasonDetail = Stream('');\n  }\n  className() {\n    return 'FlagPostModal Modal--medium';\n  }\n  title() {\n    return app.translator.trans('flarum-flags.forum.flag_post.title');\n  }\n  content() {\n    if (this.success) {\n      return m(\"div\", {\n        className: \"Modal-body\"\n      }, m(Form, {\n        className: \"Form--centered\"\n      }, m(\"p\", {\n        className: \"helpText\"\n      }, app.translator.trans('flarum-flags.forum.flag_post.confirmation_message')), m(\"div\", {\n        className: \"Form-group Form-controls\"\n      }, m(Button, {\n        className: \"Button Button--primary Button--block\",\n        onclick: this.hide.bind(this)\n      }, app.translator.trans('flarum-flags.forum.flag_post.dismiss_button')))));\n    }\n    return m(\"div\", {\n      className: \"Modal-body\"\n    }, m(Form, {\n      className: \"Form--centered\"\n    }, m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"div\", null, this.flagReasons().toArray())), m(\"div\", {\n      className: \"Form-group Form-controls\"\n    }, m(Button, {\n      className: \"Button Button--primary Button--block\",\n      type: \"submit\",\n      loading: this.loading,\n      disabled: !this.reason()\n    }, app.translator.trans('flarum-flags.forum.flag_post.submit_button')))));\n  }\n  flagReasons() {\n    const items = new ItemList();\n    const guidelinesUrl = app.forum.attribute('guidelinesUrl');\n    items.add('off-topic', m(\"label\", {\n      className: \"checkbox\"\n    }, m(\"input\", {\n      type: \"radio\",\n      name: \"reason\",\n      checked: this.reason() === 'off_topic',\n      value: \"off_topic\",\n      onclick: withAttr('value', this.reason)\n    }), m(\"strong\", null, app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_label')), app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_text'), this.reason() === 'off_topic' && m(\"textarea\", {\n      className: \"FormControl\",\n      placeholder: app.translator.trans('flarum-flags.forum.flag_post.reason_details_placeholder'),\n      value: this.reasonDetail(),\n      oninput: withAttr('value', this.reasonDetail)\n    })), 70);\n    items.add('inappropriate', m(\"label\", {\n      className: \"checkbox\"\n    }, m(\"input\", {\n      type: \"radio\",\n      name: \"reason\",\n      checked: this.reason() === 'inappropriate',\n      value: \"inappropriate\",\n      onclick: withAttr('value', this.reason)\n    }), m(\"strong\", null, app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_label')), app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_text', {\n      a: guidelinesUrl ? m(\"a\", {\n        href: guidelinesUrl,\n        target: \"_blank\"\n      }) : undefined\n    }), this.reason() === 'inappropriate' && m(\"textarea\", {\n      className: \"FormControl\",\n      placeholder: app.translator.trans('flarum-flags.forum.flag_post.reason_details_placeholder'),\n      value: this.reasonDetail(),\n      oninput: withAttr('value', this.reasonDetail)\n    })), 60);\n    items.add('spam', m(\"label\", {\n      className: \"checkbox\"\n    }, m(\"input\", {\n      type: \"radio\",\n      name: \"reason\",\n      checked: this.reason() === 'spam',\n      value: \"spam\",\n      onclick: withAttr('value', this.reason)\n    }), m(\"strong\", null, app.translator.trans('flarum-flags.forum.flag_post.reason_spam_label')), app.translator.trans('flarum-flags.forum.flag_post.reason_spam_text'), this.reason() === 'spam' && m(\"textarea\", {\n      className: \"FormControl\",\n      placeholder: app.translator.trans('flarum-flags.forum.flag_post.reason_details_placeholder'),\n      value: this.reasonDetail(),\n      oninput: withAttr('value', this.reasonDetail)\n    })), 50);\n    items.add('other', m(\"label\", {\n      className: \"checkbox\"\n    }, m(\"input\", {\n      type: \"radio\",\n      name: \"reason\",\n      checked: this.reason() === 'other',\n      value: \"other\",\n      onclick: withAttr('value', this.reason)\n    }), m(\"strong\", null, app.translator.trans('flarum-flags.forum.flag_post.reason_other_label')), this.reason() === 'other' && m(\"textarea\", {\n      className: \"FormControl\",\n      value: this.reasonDetail(),\n      oninput: withAttr('value', this.reasonDetail)\n    })), 10);\n    return items;\n  }\n  onsubmit(e) {\n    e.preventDefault();\n    this.loading = true;\n    app.store.createRecord('flags').save({\n      reason: this.reason() === 'other' ? null : this.reason(),\n      reasonDetail: this.reasonDetail(),\n      relationships: {\n        user: app.session.user,\n        post: this.attrs.post\n      }\n    }, {\n      errorHandler: this.onerror.bind(this)\n    }).then(() => this.success = true).catch(() => {}).then(this.loaded.bind(this));\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/components/FlagPostModal', FlagPostModal);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/HeaderSecondary');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/HeaderDropdown');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/classList');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Avatar');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/username');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/HeaderList');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/HeaderListItem');","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Avatar from 'flarum/common/components/Avatar';\nimport username from 'flarum/common/helpers/username';\nimport HeaderList from 'flarum/forum/components/HeaderList';\nimport HeaderListItem from 'flarum/forum/components/HeaderListItem';\nexport default class FlagList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.state = this.attrs.state;\n  }\n  view() {\n    const flags = this.state.cache || [];\n    return m(HeaderList, {\n      className: \"FlagList\",\n      title: app.translator.trans('flarum-flags.forum.flagged_posts.title'),\n      hasItems: flags.length,\n      loading: this.state.loading,\n      emptyText: app.translator.trans('flarum-flags.forum.flagged_posts.empty_text')\n    }, m(\"ul\", {\n      className: \"HeaderListGroup-content\"\n    }, !this.state.loading && flags.map(flag => {\n      const post = flag.post();\n      return m(\"li\", null, m(HeaderListItem, {\n        className: \"Flag\",\n        avatar: m(Avatar, {\n          user: post.user() || null\n        }),\n        icon: \"fas fa-flag\",\n        content: app.translator.trans('flarum-flags.forum.flagged_posts.item_text', {\n          username: username(post.user()),\n          em: m(\"em\", null),\n          discussion: post.discussion().title()\n        }),\n        excerpt: post.contentPlain(),\n        datetime: flag.createdAt(),\n        href: app.route.post(post),\n        onclick: e => {\n          app.flags.index = post;\n          e.redraw = false;\n        }\n      }));\n    })));\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/components/FlagList', FlagList);","import app from 'flarum/forum/app';\nimport HeaderDropdown from 'flarum/forum/components/HeaderDropdown';\nimport classList from 'flarum/common/utils/classList';\nimport FlagList from './FlagList';\nexport default class FlagsDropdown extends HeaderDropdown {\n  static initAttrs(attrs) {\n    attrs.className = classList('FlagsDropdown', attrs.className);\n    attrs.label = attrs.label || app.translator.trans('flarum-flags.forum.flagged_posts.tooltip');\n    attrs.icon = attrs.icon || 'fas fa-flag';\n    super.initAttrs(attrs);\n  }\n  getContent() {\n    return m(FlagList, {\n      state: this.attrs.state\n    });\n  }\n  goToRoute() {\n    m.route.set(app.route('flags'));\n  }\n  getUnreadCount() {\n    return app.flags.cache ? app.flags.cache.length : app.forum.attribute('flagCount');\n  }\n  getNewCount() {\n    return app.session.user.attribute('newFlagCount');\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/components/FlagsDropdown', FlagsDropdown);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/Post');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/humanTime');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/Post');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Page');","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport FlagList from './FlagList';\n\n/**\n * The `FlagsPage` component shows the flags list. It is only\n * used on mobile devices where the flags dropdown is within the drawer.\n */\nexport default class FlagsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n    app.history.push('flags');\n    app.flags.load();\n    this.bodyClass = 'App--flags';\n  }\n  view() {\n    return m(\"div\", {\n      className: \"FlagsPage\"\n    }, m(FlagList, {\n      state: app.flags\n    }));\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/components/FlagsPage', FlagsPage);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","import Model from 'flarum/common/Model';\nexport default class Flag extends Model {\n  type() {\n    return Model.attribute('type').call(this);\n  }\n  reason() {\n    return Model.attribute('reason').call(this);\n  }\n  reasonDetail() {\n    return Model.attribute('reasonDetail').call(this);\n  }\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n  post() {\n    return Model.hasOne('post').call(this);\n  }\n  user() {\n    return Model.hasOne('user').call(this);\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/models/Flag', Flag);","import Extend from 'flarum/common/extenders';\nimport Post from 'flarum/common/models/Post';\nimport FlagsPage from './components/FlagsPage';\nimport Flag from './models/Flag';\nexport default [new Extend.Routes() //\n.add('flags', '/flags', FlagsPage), new Extend.Store() //\n.add('flags', Flag), new Extend.Model(Post) //\n.hasMany('flags').attribute('canFlag')];","import app from 'flarum/forum/app';\nimport FlagListState from './states/FlagListState';\nimport addFlagControl from './addFlagControl';\nimport addFlagsDropdown from './addFlagsDropdown';\nimport addFlagsToPosts from './addFlagsToPosts';\nexport { default as extend } from './extend';\napp.initializers.add('flarum-flags', () => {\n  app.flags = new FlagListState(app);\n  addFlagControl();\n  addFlagsDropdown();\n  addFlagsToPosts();\n});\nimport './forum';","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport Button from 'flarum/common/components/Button';\nimport FlagPostModal from './components/FlagPostModal';\nexport default function () {\n  extend(PostControls, 'userControls', function (items, post) {\n    if (post.isHidden() || post.contentType() !== 'comment' || !post.canFlag()) return;\n    items.add('flag', m(Button, {\n      icon: \"fas fa-flag\",\n      onclick: () => app.modal.show(FlagPostModal, {\n        post\n      })\n    }, app.translator.trans('flarum-flags.forum.post_controls.flag_button')));\n  });\n}","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport FlagsDropdown from './components/FlagsDropdown';\nexport default function () {\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    if (app.forum.attribute('canViewFlags')) {\n      items.add('flags', m(FlagsDropdown, {\n        state: app.flags\n      }), 15);\n    }\n  });\n}","import { extend, override } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport Post from 'flarum/forum/components/Post';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport humanTime from 'flarum/common/utils/humanTime';\nexport default function () {\n  extend(Post.prototype, 'elementAttrs', function (attrs) {\n    if (this.attrs.post.flags().length) {\n      attrs.className += ' Post--flagged';\n    }\n  });\n  Post.prototype.dismissFlag = function (body) {\n    const post = this.attrs.post;\n    delete post.data.relationships.flags;\n    this.subtree.invalidate();\n    if (app.flags.cache) {\n      app.flags.cache.some((flag, i) => {\n        if (flag.post() === post) {\n          app.flags.cache.splice(i, 1);\n          if (app.flags.index === post) {\n            let next = app.flags.cache[i];\n            if (!next) next = app.flags.cache[0];\n            if (next) {\n              const nextPost = next.post();\n              app.flags.index = nextPost;\n              m.route.set(app.route.post(nextPost));\n            }\n          }\n          return true;\n        }\n      });\n    }\n    return app.request({\n      url: app.forum.attribute('apiUrl') + post.apiEndpoint() + '/flags',\n      method: 'DELETE',\n      body\n    });\n  };\n  Post.prototype.flagActionItems = function () {\n    const items = new ItemList();\n    const controls = PostControls.destructiveControls(this.attrs.post);\n    Object.keys(controls.toObject()).forEach(k => {\n      const attrs = controls.get(k).attrs;\n      attrs.className = 'Button';\n      extend(attrs, 'onclick', () => this.dismissFlag());\n    });\n    items.add('controls', m(\"div\", {\n      className: \"ButtonGroup\"\n    }, controls.toArray()));\n    items.add('dismiss', m(Button, {\n      className: \"Button\",\n      icon: \"far fa-eye-slash\",\n      onclick: this.dismissFlag.bind(this)\n    }, app.translator.trans('flarum-flags.forum.post.dismiss_flag_button')), -100);\n    return items;\n  };\n  override(Post.prototype, 'header', function (vdom) {\n    const post = this.attrs.post;\n    const flags = post.flags();\n    if (!flags.length) return;\n    if (post.isHidden()) this.revealContent = true;\n    return m(\"div\", {\n      className: \"Post-flagged\"\n    }, m(\"div\", {\n      className: \"Post-flagged-flags\"\n    }, flags.map(flag => m(\"div\", {\n      className: \"Post-flagged-flag\"\n    }, this.flagReason(flag)))), m(\"div\", {\n      className: \"Post-flagged-actions\"\n    }, this.flagActionItems().toArray()));\n  });\n  Post.prototype.flagReason = function (flag) {\n    if (flag.type() === 'user') {\n      const user = flag.user();\n      const reason = flag.reason() ? app.translator.trans(\"flarum-flags.forum.flag_post.reason_\".concat(flag.reason(), \"_label\")) : null;\n      const detail = flag.reasonDetail();\n      const time = humanTime(flag.createdAt());\n      return [app.translator.trans(reason ? 'flarum-flags.forum.post.flagged_by_with_reason_text' : 'flarum-flags.forum.post.flagged_by_text', {\n        time,\n        user,\n        reason\n      }), !!detail && m(\"span\", {\n        className: \"Post-flagged-detail\"\n      }, detail)];\n    }\n  };\n}"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","_typeof","iterator","constructor","_defineProperty","arg","input","hint","prim","toPrimitive","undefined","res","TypeError","String","toPropertyKey","configurable","writable","FlagListState","app","this","load","cache","session","user","attribute","loading","m","redraw","store","find","then","flags","pushAttributes","newFlagCount","sort","b","createdAt","getTime","catch","add","FlagPostModal","oninit","vnode","super","success","reason","reasonDetail","className","title","content","onclick","hide","bind","flagReasons","toArray","type","disabled","items","guidelinesUrl","name","checked","placeholder","oninput","href","target","onsubmit","e","preventDefault","save","relationships","post","attrs","errorHandler","onerror","loaded","FlagList","state","view","hasItems","length","emptyText","map","flag","avatar","icon","username","em","discussion","excerpt","contentPlain","datetime","FlagsDropdown","static","label","initAttrs","getContent","goToRoute","route","set","getUnreadCount","getNewCount","FlagsPage","bodyClass","Flag","hasMany","extend","isHidden","contentType","canFlag","body","data","subtree","invalidate","i","next","nextPost","url","apiEndpoint","method","controls","keys","toObject","forEach","k","dismissFlag","override","vdom","revealContent","flagReason","flagActionItems","concat","detail","time"],"sourceRoot":""}