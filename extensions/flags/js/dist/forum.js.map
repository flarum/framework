{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,sDCL9D,MAAM,EAA+BC,OAAOC,IAAIV,IAAI,OAAQ,a,aCA7C,MAAMW,EACnBC,YAAYC,GACVC,KAAKD,IAAMA,EAOXC,KAAKC,SAAU,CACjB,CAMAC,OACMF,KAAKG,QAAUH,KAAKD,IAAIK,QAAQC,KAAKC,UAAU,kBAGnDN,KAAKC,SAAU,EACfM,EAAEC,SACFR,KAAKD,IAAIU,MAAMC,KAAK,SAASC,MAAKC,IAChCZ,KAAKD,IAAIK,QAAQC,KAAKQ,eAAe,CACnCC,aAAc,IAEhBd,KAAKG,MAAQS,EAAMG,MAAK,CAACrC,EAAGsC,IAAMA,EAAEC,YAAcvC,EAAEuC,aAAY,IAC/DC,OAAM,SAAUP,MAAK,KACtBX,KAAKC,SAAU,EACfM,EAAEC,QAAQ,IAEd,EAEFb,OAAOC,IAAIuB,IAAI,eAAgB,6BAA8BtB,GCjC7D,MAAM,EAA+BF,OAAOC,IAAIV,IAAI,OAAQ,iBCAtD,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,4B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,4B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,2B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,uB,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,yB,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,yB,aCM7C,MAAMkC,UAAsB,KACzCC,OAAOC,GACLC,MAAMF,OAAOC,GACbtB,KAAKwB,SAAU,EACfxB,KAAKyB,OAAS,IAAO,IACrBzB,KAAK0B,aAAe,IAAO,GAC7B,CACAC,YACE,MAAO,6BACT,CACAC,QACE,OAAO,qBAAqB,qCAC9B,CACAC,UACE,OAAI7B,KAAKwB,QACAjB,EAAE,MAAO,CACdoB,UAAW,cACVpB,EAAE,MAAO,CACVoB,UAAW,uBACVpB,EAAE,IAAK,CACRoB,UAAW,YACV,qBAAqB,sDAAuDpB,EAAE,MAAO,CACtFoB,UAAW,cACVpB,EAAE,IAAQ,CACXoB,UAAW,uCACXG,QAAS9B,KAAK+B,KAAKC,KAAKhC,OACvB,qBAAqB,mDAEnBO,EAAE,MAAO,CACdoB,UAAW,cACVpB,EAAE,MAAO,CACVoB,UAAW,uBACVpB,EAAE,MAAO,CACVoB,UAAW,cACVpB,EAAE,MAAO,KAAMP,KAAKiC,cAAcC,YAAa3B,EAAE,MAAO,CACzDoB,UAAW,cACVpB,EAAE,IAAQ,CACXoB,UAAW,uCACXQ,KAAM,SACNlC,QAASD,KAAKC,QACdmC,UAAWpC,KAAKyB,UACf,qBAAqB,iDAC1B,CACAQ,cACE,MAAMI,EAAQ,IAAI,KACZC,EAAgB,oBAAoB,iBA6D1C,OA5DAD,EAAMlB,IAAI,YAAaZ,EAAE,QAAS,CAChCoB,UAAW,YACVpB,EAAE,QAAS,CACZ4B,KAAM,QACNI,KAAM,SACNC,QAA2B,cAAlBxC,KAAKyB,SACd/B,MAAO,YACPoC,QAAS,IAAS,QAAS9B,KAAKyB,UAC9BlB,EAAE,SAAU,KAAM,qBAAqB,wDAAyD,qBAAqB,sDAAyE,cAAlBP,KAAKyB,UAA4BlB,EAAE,WAAY,CAC7NoB,UAAW,cACXc,YAAa,qBAAqB,2DAClC/C,MAAOM,KAAK0B,eACZgB,QAAS,IAAS,QAAS1C,KAAK0B,iBAC7B,IACLW,EAAMlB,IAAI,gBAAiBZ,EAAE,QAAS,CACpCoB,UAAW,YACVpB,EAAE,QAAS,CACZ4B,KAAM,QACNI,KAAM,SACNC,QAA2B,kBAAlBxC,KAAKyB,SACd/B,MAAO,gBACPoC,QAAS,IAAS,QAAS9B,KAAKyB,UAC9BlB,EAAE,SAAU,KAAM,qBAAqB,4DAA6D,qBAAqB,yDAA0D,CACrL7B,EAAG4D,EAAgB/B,EAAE,IAAK,CACxBoC,KAAML,EACNM,OAAQ,gBACLC,IACe,kBAAlB7C,KAAKyB,UAAgClB,EAAE,WAAY,CACrDoB,UAAW,cACXc,YAAa,qBAAqB,2DAClC/C,MAAOM,KAAK0B,eACZgB,QAAS,IAAS,QAAS1C,KAAK0B,iBAC7B,IACLW,EAAMlB,IAAI,OAAQZ,EAAE,QAAS,CAC3BoB,UAAW,YACVpB,EAAE,QAAS,CACZ4B,KAAM,QACNI,KAAM,SACNC,QAA2B,SAAlBxC,KAAKyB,SACd/B,MAAO,OACPoC,QAAS,IAAS,QAAS9B,KAAKyB,UAC9BlB,EAAE,SAAU,KAAM,qBAAqB,mDAAoD,qBAAqB,iDAAoE,SAAlBP,KAAKyB,UAAuBlB,EAAE,WAAY,CAC9MoB,UAAW,cACXc,YAAa,qBAAqB,2DAClC/C,MAAOM,KAAK0B,eACZgB,QAAS,IAAS,QAAS1C,KAAK0B,iBAC7B,IACLW,EAAMlB,IAAI,QAASZ,EAAE,QAAS,CAC5BoB,UAAW,YACVpB,EAAE,QAAS,CACZ4B,KAAM,QACNI,KAAM,SACNC,QAA2B,UAAlBxC,KAAKyB,SACd/B,MAAO,QACPoC,QAAS,IAAS,QAAS9B,KAAKyB,UAC9BlB,EAAE,SAAU,KAAM,qBAAqB,oDAAuE,UAAlBP,KAAKyB,UAAwBlB,EAAE,WAAY,CACzIoB,UAAW,cACXjC,MAAOM,KAAK0B,eACZgB,QAAS,IAAS,QAAS1C,KAAK0B,iBAC7B,IACEW,CACT,CACAS,SAASC,GACPA,EAAEC,iBACFhD,KAAKC,SAAU,EACf,uBAAuB,SAASgD,KAAK,CACnCxB,OAA0B,UAAlBzB,KAAKyB,SAAuB,KAAOzB,KAAKyB,SAChDC,aAAc1B,KAAK0B,eACnBwB,cAAe,CACb7C,KAAM,iBACN8C,KAAMnD,KAAKoD,MAAMD,OAElB,CACDE,aAAcrD,KAAKsD,QAAQtB,KAAKhC,QAC/BW,MAAK,IAAMX,KAAKwB,SAAU,IAAMN,OAAM,SAAUP,KAAKX,KAAKuD,OAAOvB,KAAKhC,MAC3E,EAEFL,OAAOC,IAAIuB,IAAI,eAAgB,iCAAkCC,GCjIjE,MAAM,EAA+BzB,OAAOC,IAAIV,IAAI,OAAQ,oC,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,0C,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,oB,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,0B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,sC,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,yB,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,2B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,uB,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,4B,aCQ7C,MAAMsE,UAAiB,KACpCnC,OAAOC,GACLC,MAAMF,OAAOC,GACbtB,KAAKyD,MAAQzD,KAAKoD,MAAMK,KAC1B,CACAC,OACE,MAAM9C,EAAQZ,KAAKyD,MAAMtD,OAAS,GAClC,OAAOI,EAAE,MAAO,CACdoB,UAAW,6BACVpB,EAAE,MAAO,CACVoB,UAAW,2BACVpB,EAAE,KAAM,CACToB,UAAW,2CACV,qBAAqB,4CAA6CpB,EAAE,MAAO,CAC5EoB,UAAW,4BACVpB,EAAE,KAAM,CACToB,UAAW,6BACVf,EAAM+C,OAAS/C,EAAMgD,KAAIC,IAC1B,MAAMV,EAAOU,EAAKV,OAClB,OAAO5C,EAAE,KAAM,KAAMA,EAAE,IAAM,CAC3BoC,KAAM,eAAeQ,GACrBxB,UAAW,oBACXG,QAASiB,IACP,gBAAkBI,EAClBJ,EAAEvC,QAAS,CAAK,GAEjB,IAAO2C,EAAK9C,QAAS,IAAK,cAAe,CAC1CsB,UAAW,sBACTpB,EAAE,OAAQ,CACZoB,UAAW,wBACV,qBAAqB,6CAA8C,CACpEmC,SAAU,IAASX,EAAK9C,QACxB0D,GAAIxD,EAAE,KAAM,MACZyD,WAAYb,EAAKa,aAAapC,WAC3B,IAAUiC,EAAK5C,aAAcV,EAAE,MAAO,CACzCoB,UAAW,wBACVwB,EAAKc,iBAAiB,IACrBjE,KAAKyD,MAAMxD,QAEyDM,EAAE,IAAkB,CAC5FoB,UAAW,4BAHcpB,EAAE,MAAO,CAClCoB,UAAW,0BACV,qBAAqB,kDAG1B,EAEFhC,OAAOC,IAAIuB,IAAI,eAAgB,4BAA6BqC,GCjD7C,MAAMU,UAAsB,KACzCC,iBAAiBf,GACfA,EAAMgB,MAAQhB,EAAMgB,OAAS,qBAAqB,4CAClDhB,EAAMiB,KAAOjB,EAAMiB,MAAQ,cAC3B9C,MAAM+C,UAAUlB,EAClB,CACAmB,UACE,OAAOhE,EAAE,MAAO,CACdoB,UAAW,iBAAmB3B,KAAKoD,MAAMoB,cACzC1C,QAAS9B,KAAKyE,UAAUzC,KAAKhC,OAC5BA,KAAK0E,SAAWnE,EAAEiD,EAAU,CAC7BC,MAAOzD,KAAKoD,MAAMK,QAEtB,CACAkB,YACEpE,EAAEqE,MAAMC,IAAI,UAAU,SACxB,CACAC,iBACE,OAAO,gBAAkB,uBAAyB,oBAAoB,YACxE,CACAC,cACE,OAAO,2BAA2B,eACpC,EAEFpF,OAAOC,IAAIuB,IAAI,eAAgB,iCAAkC+C,GC3BjE,MAAM,EAA+BvE,OAAOC,IAAIV,IAAI,OAAQ,yB,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,0B,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,oB,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,sB,aCA5D,MAAM,EAA+BS,OAAOC,IAAIV,IAAI,OAAQ,0B,aCQ7C,MAAM8F,UAAkB,KACrC3D,OAAOC,GACLC,MAAMF,OAAOC,GACb,iBAAiB,SACjB,iBACAtB,KAAKiF,UAAY,YACnB,CACAvB,OACE,OAAOnD,EAAE,MAAO,CACdoB,UAAW,aACVpB,EAAEiD,EAAU,CACbC,MAAO,YAEX,EAEF9D,OAAOC,IAAIuB,IAAI,eAAgB,6BAA8B6D,GCvB7D,MAAM,EAA+BrF,OAAOC,IAAIV,IAAI,OAAQ,gB,aCC7C,MAAMgG,UAAa,KAChC/C,OACE,OAAO,cAAgB,QAAQ5C,KAAKS,KACtC,CACAyB,SACE,OAAO,cAAgB,UAAUlC,KAAKS,KACxC,CACA0B,eACE,OAAO,cAAgB,gBAAgBnC,KAAKS,KAC9C,CACAiB,YACE,OAAO,cAAgB,YAAa,mBAAqB1B,KAAKS,KAChE,CACAmD,OACE,OAAO,WAAa,QAAQ5D,KAAKS,KACnC,CACAK,OACE,OAAO,WAAa,QAAQd,KAAKS,KACnC,EAEFL,OAAOC,IAAIuB,IAAI,eAAgB,oBAAqB+D,GCjBpD,WAAgB,IAAI,aACnB/D,IAAI,QAAS,SAAU6D,IAAY,IAAI,YACvC7D,IAAI,QAAS+D,GAAO,IAAI,WAAa,KACrCC,QAAQ,SAAS7E,UAAU,YCD5B,qBAAqB,gBAAgB,KACnC,UAAY,IAAIT,EAAc,MCD9B,IAAAuF,QAAO,IAAc,gBAAgB,SAAU/C,EAAOc,IAChDA,EAAKkC,YAAqC,YAAvBlC,EAAKmC,eAAgCnC,EAAKoC,WACjElD,EAAMlB,IAAI,OAAQZ,EAAE,IAAQ,CAC1B8D,KAAM,cACNvC,QAAS,IAAM,eAAeV,EAAe,CAC3C+B,UAED,qBAAqB,iDAC1B,KCTA,IAAAiC,QAAO,cAA2B,SAAS,SAAU/C,GAC/C,oBAAoB,iBACtBA,EAAMlB,IAAI,QAASZ,EAAE2D,EAAe,CAClCT,MAAO,YACL,GAER,KCHA,IAAA2B,QAAO,cAAgB,gBAAgB,SAAUhC,GAC3CpD,KAAKoD,MAAMD,KAAKvC,QAAQ+C,SAC1BP,EAAMzB,WAAa,iBAEvB,IACA,0BAA6B,SAAU6D,GACrC,MAAMrC,EAAOnD,KAAKoD,MAAMD,KAoBxB,cAnBOA,EAAKsC,KAAKvC,cAActC,MAC/BZ,KAAK0F,QAAQC,aACT,iBACF,sBAAqB,CAAC9B,EAAM+B,KAC1B,GAAI/B,EAAKV,SAAWA,EAAM,CAExB,GADA,uBAAuByC,EAAG,GACtB,kBAAoBzC,EAAM,CAC5B,IAAI0C,EAAO,gBAAgBD,GAE3B,GADKC,IAAMA,EAAO,oBACdA,EAAM,CACR,MAAMC,EAAWD,EAAK1C,OACtB,gBAAkB2C,EAClBvF,EAAEqE,MAAMC,IAAI,eAAeiB,GAC7B,CACF,CACA,OAAO,CACT,KAGG,YAAY,CACjBC,IAAK,oBAAoB,UAAY5C,EAAK6C,cAAgB,SAC1DC,OAAQ,SACRT,QAEJ,EACA,8BAAiC,WAC/B,MAAMnD,EAAQ,IAAI,KACZ6D,EAAW,wBAAiClG,KAAKoD,MAAMD,MAc7D,OAbApE,OAAOoH,KAAKD,EAAS7D,OAAO+D,SAAQC,IAClC,MAAMjD,EAAQ8C,EAAShH,IAAImH,GAAGjD,MAC9BA,EAAMzB,UAAY,UAClB,IAAAyD,QAAOhC,EAAO,WAAW,IAAMpD,KAAKsG,eAAc,IAEpDjE,EAAMlB,IAAI,WAAYZ,EAAE,MAAO,CAC7BoB,UAAW,eACVuE,EAAShE,YACZG,EAAMlB,IAAI,UAAWZ,EAAE,IAAQ,CAC7BoB,UAAW,SACX0C,KAAM,mBACNvC,QAAS9B,KAAKsG,YAAYtE,KAAKhC,OAC9B,qBAAqB,iDAAkD,KACnEqC,CACT,GACA,IAAA+C,QAAO,cAAgB,WAAW,SAAUmB,GAC1C,MAAMpD,EAAOnD,KAAKoD,MAAMD,KAClBvC,EAAQuC,EAAKvC,QACdA,EAAM+C,SACPR,EAAKkC,aAAYrF,KAAKwG,eAAgB,GAC1CD,EAAKE,QAAQlG,EAAE,MAAO,CACpBoB,UAAW,gBACVpB,EAAE,MAAO,CACVoB,UAAW,sBACVf,EAAMgD,KAAIC,GAAQtD,EAAE,MAAO,CAC5BoB,UAAW,qBACV3B,KAAK0G,WAAW7C,OAAUtD,EAAE,MAAO,CACpCoB,UAAW,wBACV3B,KAAK2G,kBAAkBzE,aAC5B,IACA,yBAA4B,SAAU2B,GACpC,GAAoB,SAAhBA,EAAK1B,OAAmB,CAC1B,MAAM9B,EAAOwD,EAAKxD,OACZoB,EAASoC,EAAKpC,SAAW,qBAAqB,uCAAuCmF,OAAO/C,EAAKpC,SAAU,WAAa,KACxHoF,EAAShD,EAAKnC,eACdoF,EAAO,IAAUjD,EAAK5C,aAC5B,MAAO,CAAC,qBAAqBQ,EAAS,sDAAwD,0CAA2C,CACvIqF,OACAzG,OACAoB,aACIoF,GAAUtG,EAAE,OAAQ,CACxBoB,UAAW,uBACVkF,GACL,CACF,CH7EiB,G","sources":["webpack://@flarum/flags/webpack/bootstrap","webpack://@flarum/flags/webpack/runtime/compat get default export","webpack://@flarum/flags/webpack/runtime/define property getters","webpack://@flarum/flags/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/flags/webpack/runtime/make namespace object","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@flarum/flags/./src/forum/states/FlagListState.js","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/utils/PostControls')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/components/Modal')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/utils/Stream')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/utils/withAttr')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@flarum/flags/./src/forum/components/FlagPostModal.js","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/components/HeaderSecondary')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/components/NotificationsDropdown')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/components/Link')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/helpers/avatar')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/helpers/username')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/helpers/icon')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/helpers/humanTime')\"","webpack://@flarum/flags/./src/forum/components/FlagList.js","webpack://@flarum/flags/./src/forum/components/FlagsDropdown.js","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'forum/components/Post')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/utils/humanTime')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/models/Post')\"","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/components/Page')\"","webpack://@flarum/flags/./src/forum/components/FlagsPage.js","webpack://@flarum/flags/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@flarum/flags/./src/forum/models/Flag.ts","webpack://@flarum/flags/./src/forum/extend.ts","webpack://@flarum/flags/./src/forum/index.ts","webpack://@flarum/flags/./src/forum/addFlagControl.js","webpack://@flarum/flags/./src/forum/addFlagsDropdown.js","webpack://@flarum/flags/./src/forum/addFlagsToPosts.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/app');","export default class FlagListState {\n  constructor(app) {\n    this.app = app;\n\n    /**\n     * Whether or not the flags are loading.\n     *\n     * @type {Boolean}\n     */\n    this.loading = false;\n  }\n\n  /**\n   * Load flags into the application's cache if they haven't already\n   * been loaded.\n   */\n  load() {\n    if (this.cache && !this.app.session.user.attribute('newFlagCount')) {\n      return;\n    }\n    this.loading = true;\n    m.redraw();\n    this.app.store.find('flags').then(flags => {\n      this.app.session.user.pushAttributes({\n        newFlagCount: 0\n      });\n      this.cache = flags.sort((a, b) => b.createdAt() - a.createdAt());\n    }).catch(() => {}).then(() => {\n      this.loading = false;\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/states/FlagListState', FlagListState);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/PostControls');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Modal');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/Stream');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/withAttr');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/ItemList');","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport ItemList from 'flarum/common/utils/ItemList';\nexport default class FlagPostModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.success = false;\n    this.reason = Stream('');\n    this.reasonDetail = Stream('');\n  }\n  className() {\n    return 'FlagPostModal Modal--medium';\n  }\n  title() {\n    return app.translator.trans('flarum-flags.forum.flag_post.title');\n  }\n  content() {\n    if (this.success) {\n      return m(\"div\", {\n        className: \"Modal-body\"\n      }, m(\"div\", {\n        className: \"Form Form--centered\"\n      }, m(\"p\", {\n        className: \"helpText\"\n      }, app.translator.trans('flarum-flags.forum.flag_post.confirmation_message')), m(\"div\", {\n        className: \"Form-group\"\n      }, m(Button, {\n        className: \"Button Button--primary Button--block\",\n        onclick: this.hide.bind(this)\n      }, app.translator.trans('flarum-flags.forum.flag_post.dismiss_button')))));\n    }\n    return m(\"div\", {\n      className: \"Modal-body\"\n    }, m(\"div\", {\n      className: \"Form Form--centered\"\n    }, m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"div\", null, this.flagReasons().toArray())), m(\"div\", {\n      className: \"Form-group\"\n    }, m(Button, {\n      className: \"Button Button--primary Button--block\",\n      type: \"submit\",\n      loading: this.loading,\n      disabled: !this.reason()\n    }, app.translator.trans('flarum-flags.forum.flag_post.submit_button')))));\n  }\n  flagReasons() {\n    const items = new ItemList();\n    const guidelinesUrl = app.forum.attribute('guidelinesUrl');\n    items.add('off-topic', m(\"label\", {\n      className: \"checkbox\"\n    }, m(\"input\", {\n      type: \"radio\",\n      name: \"reason\",\n      checked: this.reason() === 'off_topic',\n      value: \"off_topic\",\n      onclick: withAttr('value', this.reason)\n    }), m(\"strong\", null, app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_label')), app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_text'), this.reason() === 'off_topic' && m(\"textarea\", {\n      className: \"FormControl\",\n      placeholder: app.translator.trans('flarum-flags.forum.flag_post.reason_details_placeholder'),\n      value: this.reasonDetail(),\n      oninput: withAttr('value', this.reasonDetail)\n    })), 70);\n    items.add('inappropriate', m(\"label\", {\n      className: \"checkbox\"\n    }, m(\"input\", {\n      type: \"radio\",\n      name: \"reason\",\n      checked: this.reason() === 'inappropriate',\n      value: \"inappropriate\",\n      onclick: withAttr('value', this.reason)\n    }), m(\"strong\", null, app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_label')), app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_text', {\n      a: guidelinesUrl ? m(\"a\", {\n        href: guidelinesUrl,\n        target: \"_blank\"\n      }) : undefined\n    }), this.reason() === 'inappropriate' && m(\"textarea\", {\n      className: \"FormControl\",\n      placeholder: app.translator.trans('flarum-flags.forum.flag_post.reason_details_placeholder'),\n      value: this.reasonDetail(),\n      oninput: withAttr('value', this.reasonDetail)\n    })), 60);\n    items.add('spam', m(\"label\", {\n      className: \"checkbox\"\n    }, m(\"input\", {\n      type: \"radio\",\n      name: \"reason\",\n      checked: this.reason() === 'spam',\n      value: \"spam\",\n      onclick: withAttr('value', this.reason)\n    }), m(\"strong\", null, app.translator.trans('flarum-flags.forum.flag_post.reason_spam_label')), app.translator.trans('flarum-flags.forum.flag_post.reason_spam_text'), this.reason() === 'spam' && m(\"textarea\", {\n      className: \"FormControl\",\n      placeholder: app.translator.trans('flarum-flags.forum.flag_post.reason_details_placeholder'),\n      value: this.reasonDetail(),\n      oninput: withAttr('value', this.reasonDetail)\n    })), 50);\n    items.add('other', m(\"label\", {\n      className: \"checkbox\"\n    }, m(\"input\", {\n      type: \"radio\",\n      name: \"reason\",\n      checked: this.reason() === 'other',\n      value: \"other\",\n      onclick: withAttr('value', this.reason)\n    }), m(\"strong\", null, app.translator.trans('flarum-flags.forum.flag_post.reason_other_label')), this.reason() === 'other' && m(\"textarea\", {\n      className: \"FormControl\",\n      value: this.reasonDetail(),\n      oninput: withAttr('value', this.reasonDetail)\n    })), 10);\n    return items;\n  }\n  onsubmit(e) {\n    e.preventDefault();\n    this.loading = true;\n    app.store.createRecord('flags').save({\n      reason: this.reason() === 'other' ? null : this.reason(),\n      reasonDetail: this.reasonDetail(),\n      relationships: {\n        user: app.session.user,\n        post: this.attrs.post\n      }\n    }, {\n      errorHandler: this.onerror.bind(this)\n    }).then(() => this.success = true).catch(() => {}).then(this.loaded.bind(this));\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/components/FlagPostModal', FlagPostModal);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/HeaderSecondary');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/NotificationsDropdown');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Link');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LoadingIndicator');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/avatar');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/username');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/icon');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/humanTime');","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport Link from 'flarum/common/components/Link';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport icon from 'flarum/common/helpers/icon';\nimport humanTime from 'flarum/common/helpers/humanTime';\nexport default class FlagList extends Component {\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.state = this.attrs.state;\n  }\n  view() {\n    const flags = this.state.cache || [];\n    return m(\"div\", {\n      className: \"NotificationList FlagList\"\n    }, m(\"div\", {\n      className: \"NotificationList-header\"\n    }, m(\"h4\", {\n      className: \"App-titleControl App-titleControl--text\"\n    }, app.translator.trans('flarum-flags.forum.flagged_posts.title'))), m(\"div\", {\n      className: \"NotificationList-content\"\n    }, m(\"ul\", {\n      className: \"NotificationGroup-content\"\n    }, flags.length ? flags.map(flag => {\n      const post = flag.post();\n      return m(\"li\", null, m(Link, {\n        href: app.route.post(post),\n        className: \"Notification Flag\",\n        onclick: e => {\n          app.flags.index = post;\n          e.redraw = false;\n        }\n      }, avatar(post.user()), icon('fas fa-flag', {\n        className: 'Notification-icon'\n      }), m(\"span\", {\n        className: \"Notification-content\"\n      }, app.translator.trans('flarum-flags.forum.flagged_posts.item_text', {\n        username: username(post.user()),\n        em: m(\"em\", null),\n        discussion: post.discussion().title()\n      })), humanTime(flag.createdAt()), m(\"div\", {\n        className: \"Notification-excerpt\"\n      }, post.contentPlain())));\n    }) : !this.state.loading ? m(\"div\", {\n      className: \"NotificationList-empty\"\n    }, app.translator.trans('flarum-flags.forum.flagged_posts.empty_text')) : m(LoadingIndicator, {\n      className: \"LoadingIndicator--block\"\n    }))));\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/components/FlagList', FlagList);","import app from 'flarum/forum/app';\nimport NotificationsDropdown from 'flarum/forum/components/NotificationsDropdown';\nimport FlagList from './FlagList';\nexport default class FlagsDropdown extends NotificationsDropdown {\n  static initAttrs(attrs) {\n    attrs.label = attrs.label || app.translator.trans('flarum-flags.forum.flagged_posts.tooltip');\n    attrs.icon = attrs.icon || 'fas fa-flag';\n    super.initAttrs(attrs);\n  }\n  getMenu() {\n    return m(\"div\", {\n      className: 'Dropdown-menu ' + this.attrs.menuClassName,\n      onclick: this.menuClick.bind(this)\n    }, this.showing && m(FlagList, {\n      state: this.attrs.state\n    }));\n  }\n  goToRoute() {\n    m.route.set(app.route('flags'));\n  }\n  getUnreadCount() {\n    return app.flags.cache ? app.flags.cache.length : app.forum.attribute('flagCount');\n  }\n  getNewCount() {\n    return app.session.user.attribute('newFlagCount');\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/components/FlagsDropdown', FlagsDropdown);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/Post');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/humanTime');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/Post');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Page');","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport FlagList from './FlagList';\n\n/**\n * The `FlagsPage` component shows the flags list. It is only\n * used on mobile devices where the flags dropdown is within the drawer.\n */\nexport default class FlagsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n    app.history.push('flags');\n    app.flags.load();\n    this.bodyClass = 'App--flags';\n  }\n  view() {\n    return m(\"div\", {\n      className: \"FlagsPage\"\n    }, m(FlagList, {\n      state: app.flags\n    }));\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/components/FlagsPage', FlagsPage);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","import Model from 'flarum/common/Model';\nexport default class Flag extends Model {\n  type() {\n    return Model.attribute('type').call(this);\n  }\n  reason() {\n    return Model.attribute('reason').call(this);\n  }\n  reasonDetail() {\n    return Model.attribute('reasonDetail').call(this);\n  }\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n  post() {\n    return Model.hasOne('post').call(this);\n  }\n  user() {\n    return Model.hasOne('user').call(this);\n  }\n}\nflarum.reg.add('flarum-flags', 'forum/models/Flag', Flag);","import Extend from 'flarum/common/extenders';\nimport Post from 'flarum/common/models/Post';\nimport FlagsPage from './components/FlagsPage';\nimport Flag from './models/Flag';\nexport default [new Extend.Routes() //\n.add('flags', '/flags', FlagsPage), new Extend.Store() //\n.add('flags', Flag), new Extend.Model(Post) //\n.hasMany('flags').attribute('canFlag')];","import app from 'flarum/forum/app';\nimport FlagListState from './states/FlagListState';\nimport addFlagControl from './addFlagControl';\nimport addFlagsDropdown from './addFlagsDropdown';\nimport addFlagsToPosts from './addFlagsToPosts';\nexport { default as extend } from './extend';\napp.initializers.add('flarum-flags', () => {\n  app.flags = new FlagListState(app);\n  addFlagControl();\n  addFlagsDropdown();\n  addFlagsToPosts();\n});\nimport './forum';","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport Button from 'flarum/common/components/Button';\nimport FlagPostModal from './components/FlagPostModal';\nexport default function () {\n  extend(PostControls, 'userControls', function (items, post) {\n    if (post.isHidden() || post.contentType() !== 'comment' || !post.canFlag()) return;\n    items.add('flag', m(Button, {\n      icon: \"fas fa-flag\",\n      onclick: () => app.modal.show(FlagPostModal, {\n        post\n      })\n    }, app.translator.trans('flarum-flags.forum.post_controls.flag_button')));\n  });\n}","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport FlagsDropdown from './components/FlagsDropdown';\nexport default function () {\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    if (app.forum.attribute('canViewFlags')) {\n      items.add('flags', m(FlagsDropdown, {\n        state: app.flags\n      }), 15);\n    }\n  });\n}","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport Post from 'flarum/forum/components/Post';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport humanTime from 'flarum/common/utils/humanTime';\nexport default function () {\n  extend(Post.prototype, 'elementAttrs', function (attrs) {\n    if (this.attrs.post.flags().length) {\n      attrs.className += ' Post--flagged';\n    }\n  });\n  Post.prototype.dismissFlag = function (body) {\n    const post = this.attrs.post;\n    delete post.data.relationships.flags;\n    this.subtree.invalidate();\n    if (app.flags.cache) {\n      app.flags.cache.some((flag, i) => {\n        if (flag.post() === post) {\n          app.flags.cache.splice(i, 1);\n          if (app.flags.index === post) {\n            let next = app.flags.cache[i];\n            if (!next) next = app.flags.cache[0];\n            if (next) {\n              const nextPost = next.post();\n              app.flags.index = nextPost;\n              m.route.set(app.route.post(nextPost));\n            }\n          }\n          return true;\n        }\n      });\n    }\n    return app.request({\n      url: app.forum.attribute('apiUrl') + post.apiEndpoint() + '/flags',\n      method: 'DELETE',\n      body\n    });\n  };\n  Post.prototype.flagActionItems = function () {\n    const items = new ItemList();\n    const controls = PostControls.destructiveControls(this.attrs.post);\n    Object.keys(controls.items).forEach(k => {\n      const attrs = controls.get(k).attrs;\n      attrs.className = 'Button';\n      extend(attrs, 'onclick', () => this.dismissFlag());\n    });\n    items.add('controls', m(\"div\", {\n      className: \"ButtonGroup\"\n    }, controls.toArray()));\n    items.add('dismiss', m(Button, {\n      className: \"Button\",\n      icon: \"far fa-eye-slash\",\n      onclick: this.dismissFlag.bind(this)\n    }, app.translator.trans('flarum-flags.forum.post.dismiss_flag_button')), -100);\n    return items;\n  };\n  extend(Post.prototype, 'content', function (vdom) {\n    const post = this.attrs.post;\n    const flags = post.flags();\n    if (!flags.length) return;\n    if (post.isHidden()) this.revealContent = true;\n    vdom.unshift(m(\"div\", {\n      className: \"Post-flagged\"\n    }, m(\"div\", {\n      className: \"Post-flagged-flags\"\n    }, flags.map(flag => m(\"div\", {\n      className: \"Post-flagged-flag\"\n    }, this.flagReason(flag)))), m(\"div\", {\n      className: \"Post-flagged-actions\"\n    }, this.flagActionItems().toArray())));\n  });\n  Post.prototype.flagReason = function (flag) {\n    if (flag.type() === 'user') {\n      const user = flag.user();\n      const reason = flag.reason() ? app.translator.trans(\"flarum-flags.forum.flag_post.reason_\".concat(flag.reason(), \"_label\")) : null;\n      const detail = flag.reasonDetail();\n      const time = humanTime(flag.createdAt());\n      return [app.translator.trans(reason ? 'flarum-flags.forum.post.flagged_by_with_reason_text' : 'flarum-flags.forum.post.flagged_by_text', {\n        time,\n        user,\n        reason\n      }), !!detail && m(\"span\", {\n        className: \"Post-flagged-detail\"\n      }, detail)];\n    }\n  };\n}"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","FlagListState","constructor","app","this","loading","load","cache","session","user","attribute","m","redraw","store","find","then","flags","pushAttributes","newFlagCount","sort","b","createdAt","catch","add","FlagPostModal","oninit","vnode","super","success","reason","reasonDetail","className","title","content","onclick","hide","bind","flagReasons","toArray","type","disabled","items","guidelinesUrl","name","checked","placeholder","oninput","href","target","undefined","onsubmit","e","preventDefault","save","relationships","post","attrs","errorHandler","onerror","loaded","FlagList","state","view","length","map","flag","username","em","discussion","contentPlain","FlagsDropdown","static","label","icon","initAttrs","getMenu","menuClassName","menuClick","showing","goToRoute","route","set","getUnreadCount","getNewCount","FlagsPage","bodyClass","Flag","hasMany","extend","isHidden","contentType","canFlag","body","data","subtree","invalidate","i","next","nextPost","url","apiEndpoint","method","controls","keys","forEach","k","dismissFlag","vdom","revealContent","unshift","flagReason","flagActionItems","concat","detail","time"],"sourceRoot":""}