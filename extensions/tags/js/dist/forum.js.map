{"version":3,"file":"forum.js","mappings":"qEAAA,MAAM,EAA+BA,OAAOC,KAAKC,OAAO,a,aCAzC,SAASC,EAAQC,GAG9B,OAAOD,EAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAC7F,cAAcA,CAChB,EAAI,SAAUA,GACZ,OAAOA,GAAO,mBAAqBC,QAAUD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,CAC1H,EAAGD,EAAQC,EACb,CCPe,SAASK,EAAgBL,EAAKM,EAAKC,GAYhD,OAXAD,ECAa,SAAwBE,GACrC,IAAIF,ECFS,SAAsBG,EAAOC,GAC1C,GAAuB,WAAnBX,EAAQU,IAAiC,OAAVA,EAAgB,OAAOA,EAC1D,IAAIE,EAAOF,EAAMR,OAAOW,aACxB,QAAaC,IAATF,EAAoB,CACtB,IAAIG,EAAMH,EAAKI,KAAKN,EAAOC,GAC3B,GAAqB,WAAjBX,EAAQe,GAAmB,OAAOA,EACtC,MAAM,IAAIE,UAAU,+CACtB,CACA,OAA4BC,OAAiBR,EAC/C,CDPYG,CAAYJ,EAAK,UAC3B,MAAwB,WAAjBT,EAAQO,GAAoBA,EAAMW,OAAOX,EAClD,CDHQY,CAAcZ,MACTN,EACTmB,OAAOC,eAAepB,EAAKM,EAAK,CAC9BC,MAAOA,EACPc,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZvB,EAAIM,GAAOC,EAENP,CACT,CGdA,MAAM,EAA+BJ,OAAOC,KAAKC,OAAO,c,aCGzC,MAAM0B,EAAarB,cAAAE,EAAA,8BAGhCoB,WAAWC,GACT,QAD2B,IAAlBA,IAAAA,EAAqB,KACzBC,KAAKC,eACR,OAAOD,KAAKE,MAAMH,GAGpB,MAAMI,EAAmBJ,EAASK,QAAQC,IAAaL,KAAKC,eAAgBK,IAAID,KAEhF,OAAgC,IAA5BF,EAAiBI,OACZC,QAAQC,QAAQC,IAAAA,MAAAA,IAAmB,SAGrCV,KAAKE,MAAMC,EACpB,CAEAL,YAAYC,GAGV,YAH4B,IAAlBA,IAAAA,EAAqB,IACZ,MAAnBC,KAAKC,iBAALD,KAAKC,eAAmB,IAAIU,KAErBD,IAAAA,MAAAA,KAAsB,OAAQ,CAAEL,QAASN,EAASa,KAAK,OAAQC,MAAMC,IAC1Ef,EAASgB,SAASV,GAAYL,KAAKC,eAAgBe,IAAIX,KAChDS,IAEX,EC3BF,MAAM,EAA+B7C,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,8B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,+B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,0B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,0B,aCEzC,SAAS8C,EAAQC,EAAKC,EAAYC,QAAP,IAALD,IAAAA,EAAQ,CAAC,QAAW,IAARC,IAAAA,EAAW,CAAC,GAC3D,MAAMC,EAAUH,GAAOA,EAAII,QACrB,SAAEC,GAAW,GAASH,EAe5B,OAbAD,EAAMK,UAAYC,IAAU,CAACN,EAAMK,UAAW,OAAQH,EAAUH,EAAII,OAAS,YAEzEJ,GAAOK,GACTJ,EAAMO,MAAQP,EAAMO,OAAS,CAAC,EAC9BP,EAAMO,MAAM,WAAaR,EAAIS,QAEzBN,IACFF,EAAMO,MAAMC,MAAQT,EAAIS,UAEhBT,IACVC,EAAMK,WAAa,aAGdH,EAAUO,EAAA,IAAOT,GAAYS,EAAA,OAAUT,EAChD,CCfe,MAAMU,UAAsBC,KACzCC,KAAKC,GACH,MAAMd,EAAMlB,KAAKmB,MAAMc,MACjBC,EAAchB,GAAOA,EAAIgB,cACzBV,EAAYC,IAAU,wBAAyB,CAAEU,MAAOjB,EAAIkB,WAAapC,KAAKmB,MAAMK,WAE1F,OACEI,EAACS,IAAI,CAACb,UAAWA,EAAWc,KAAMtC,KAAKmB,MAAMoB,MAAOb,MAAOR,EAAM,CAAE,UAAWA,EAAIS,cAAYzC,EAAWsD,MAAON,QAAehD,GAC5H+B,EAAQC,EAAK,CAAEM,UAAW,gBAC3BI,EAAA,QAAMJ,UAAU,gBAAgBN,EAAMA,EAAIuB,OAAS/B,IAAIgC,WAAWC,MAAM,0CAG9E,CAEAC,iBAAiBzB,GACf0B,MAAMC,UAAU3B,GAEhB,MAAMD,EAAMC,EAAMc,MAElBd,EAAM4B,OAAOC,KAAO9B,EAAMA,EAAI+B,OAAS,WACvC9B,EAAMoB,MAAQ7B,IAAI6B,MAAM,MAAOpB,EAAM4B,OACvC,EC1BF,MAAM,EAA+B9E,OAAOC,KAAKC,OAAO,0B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,yB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,oC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,wB,aCMzC,SAAS+E,EAAShC,EAAKC,QAAK,IAALA,IAAAA,EAAQ,CAAC,GAC7CA,EAAMO,MAAQP,EAAMO,OAAS,CAAC,EAC9BP,EAAMK,UAAY,aAAeL,EAAMK,WAAa,IAEpD,MAAM2B,EAAOC,IAAQjC,EAAO,QACtBkC,EAAUnC,EAAMA,EAAIuB,OAAS/B,IAAIgC,WAAWC,MAAM,oCAExD,GAAIzB,EAAK,CACP,MAAMS,EAAQT,EAAIS,QACdA,IACFR,EAAMO,MAAM,YAAcC,EAC1BR,EAAMK,UAAYC,IAAUN,EAAMK,UAAW,UAAW8B,IAAkB3B,KAGxEwB,IACFhC,EAAMqB,MAAQtB,EAAIgB,eAAiB,GACnCf,EAAMmB,KAAO5B,IAAI6B,MAAM,MAAO,CAAES,KAAM9B,EAAI+B,UAGxC/B,EAAIkB,YACNjB,EAAMK,WAAa,mBAEvB,MACEL,EAAMK,WAAa,YAGrB,OAAOI,EACLuB,EAAOd,IAAO,OACdlB,EACAS,EAAA,QAAMJ,UAAU,iBACbN,GAAOA,EAAII,QAAUL,EAAQC,EAAK,CAAEM,UAAW,iBAAmB,CAAED,UAAU,IAC/EK,EAAA,QAAMJ,UAAU,iBAAiB6B,IAGvC,CCtCe,SAASE,EAASP,GAC/B,OAAOA,EAAKQ,MAAM,GAAGC,MAAK,CAACC,EAAGC,KAC5B,MAAMC,EAAOF,EAAEG,WACTC,EAAOH,EAAEE,WAIf,GAAa,OAATD,GAA0B,OAATE,EAAe,OAAOH,EAAEI,kBAAoBL,EAAEK,kBAInE,GAAa,OAATD,EAAe,OAAQ,EAC3B,GAAa,OAATF,EAAe,OAAO,EAI1B,MAAMI,EAAUN,EAAEO,SACZC,EAAUP,EAAEM,SAIlB,OAAID,IAAYE,EAAgBN,EAAOE,EAG9BE,GAAWE,EAAgBF,EAAQH,WAAcK,EAAQL,WAIzDG,EAAgBA,IAAYL,EAAI,EAAIK,EAAQH,WAAcC,EAC1DI,EAAgBA,IAAYR,GAAK,EAAIE,EAAOM,EAAQL,WAEtD,CAAC,GAEZ,CCrBe,MAAMM,UAAiBC,KACpCC,OAAOrC,GACLa,MAAMwB,OAAOrC,GAEbtB,IAAI4D,QAAQC,KAAK,OAAQ7D,IAAIgC,WAAWC,MAAM,kDAE9C3C,KAAKgD,KAAO,GAEZ,MAAMwB,EAAY9D,IAAI+D,uBAElBD,EACFxE,KAAKgD,KAAOO,EAASiB,EAAUpE,QAAQc,IAASA,EAAIkB,cAItDpC,KAAK0E,SAAU,EAEfhE,IAAIiE,QAAQC,KAAK,CAAC,WAAY,uBAAwB,WAAW/D,MAAK,KACpEb,KAAKgD,KAAOO,EAAS7C,IAAImE,MAAMC,IAAI,QAAQ1E,QAAQc,IAASA,EAAIkB,aAEhEpC,KAAK0E,SAAU,EAEf9C,EAAEmD,QAAQ,IAEd,CAEAC,SAAShD,GACPa,MAAMmC,SAAShD,GAEftB,IAAIuE,SAASvE,IAAIgC,WAAWC,MAAM,+CAClCjC,IAAIwE,cAAc,EACpB,CAEAnD,OACE,OAAOH,EAAA,OAAKJ,UAAU,YAAYxB,KAAKmF,cAAcC,UACvD,CAEAD,cACE,MAAME,EAAQ,IAAIC,KAKlB,OAHAD,EAAMrE,IAAI,OAAQhB,KAAKuF,OAAQ,KAC/BF,EAAMrE,IAAI,OAAQY,EAAA,OAAKJ,UAAU,aAAaxB,KAAKwF,cAAcJ,WAAkB,IAE5EC,CACT,CAEAG,cACE,MAAMH,EAAQ,IAAIC,KAKlB,OAHAD,EAAMrE,IAAI,UAAWhB,KAAKyF,UAAW,KACrCJ,EAAMrE,IAAI,UAAWhB,KAAK0F,UAAW,IAE9BL,CACT,CAEAK,UACE,OAAO9D,EAAA,OAAKJ,UAAU,kCAAkCxB,KAAK2F,eAAeP,UAC9E,CAEAO,eACE,MAAMN,EAAQ,IAAIC,KAElB,GAAItF,KAAK0E,QACPW,EAAMrE,IAAI,UAAWY,EAACgE,IAAgB,WACjC,CACL,MAAMC,EAAS7F,KAAKgD,KAAK5C,QAAQc,GAA2B,OAAnBA,EAAI2C,aACvCiC,EAAQ9F,KAAKgD,KAAK5C,QAAQc,GAA2B,OAAnBA,EAAI2C,aAE5CwB,EAAMrE,IAAI,WAAYhB,KAAK+F,gBAAgBF,GAAS,KAEhDC,EAAMvF,QACR8E,EAAMrE,IAAI,QAAShB,KAAKgG,UAAUF,GAAQ,GAE9C,CAEA,OAAOT,CACT,CAEAE,OACE,OAAOU,IAAAA,UAAAA,MACT,CAEAR,UACE,OACE7D,EAAA,OAAKJ,UAAU,sCACbI,EAAA,UAAKsE,IAAUlG,KAAKmG,eAAef,YAGzC,CAEAe,eACE,OAAOF,IAAAA,UAAAA,cACT,CAEAF,gBAAgBF,GACd,OAAOjE,EAAA,MAAIJ,UAAU,YAAYqE,EAAOO,IAAIpG,KAAKqG,YAAYC,KAAKtG,OACpE,CAEAqG,YAAYnF,GACV,MAAMqF,EAAuBrF,EAAIqF,uBAC3BC,EAAWjD,EAASrC,EAAIsF,YAAc,IAE5C,OACE5E,EAAA,MAAIJ,UAAWC,IAAU,UAAW,CAAEgF,QAASvF,EAAIS,SAAW2B,IAAkBpC,EAAIS,UAAWD,MAAO,CAAE,WAAYR,EAAIS,UACtHC,EAACS,IAAI,CAACb,UAAU,eAAec,KAAM5B,IAAI6B,MAAMrB,IAAIA,IAChDA,EAAII,QAAUL,EAAQC,EAAK,CAAC,EAAG,CAAEK,UAAU,IAC5CK,EAAA,MAAIJ,UAAU,gBAAgBN,EAAIuB,QAClCb,EAAA,KAAGJ,UAAU,uBAAuBN,EAAIgB,iBACrCsE,GACD5E,EAAA,OAAKJ,UAAU,oBAAoBgF,EAASJ,KAAKjE,GAAU,CAACP,EAACS,IAAI,CAACC,KAAM5B,IAAI6B,MAAMrB,IAAIiB,IAASA,EAAMM,QAAgB,SAGxH8D,EACC3E,EAACS,IAAI,CAACb,UAAU,+BAA+Bc,KAAM5B,IAAI6B,MAAMmE,WAAWH,EAAsBA,EAAqBI,mBACnH/E,EAAA,QAAMJ,UAAU,sCAAsC+E,EAAqB/D,SAC1EoE,IAAUL,EAAqBM,iBAGlCjF,EAAA,QAAMJ,UAAU,iCAIxB,CAEAwE,UAAUF,GACR,OAAOlE,EAAA,OAAKJ,UAAU,YAAYsE,EAAMM,KAAKlF,GAAQ,CAACgC,EAAShC,EAAK,CAAEiC,MAAM,IAAS,OACvF,EClIa,SAAS,KAGtB2D,EAAAA,EAAAA,QAAOb,IAAAA,UAAqB,YAAY,SAAUZ,GAShD,GARAA,EAAMrE,IACJ,OACAY,EAACE,IAAU,CAACR,KAAK,kBAAkBgB,KAAM5B,IAAAA,MAAU,SAChDA,IAAAA,WAAAA,MAAqB,uCAEvB,IAGCA,IAAAA,QAAAA,QAAoByD,GAAW,OAEnCkB,EAAMrE,IAAI,YAAaY,EAACmF,IAAS,OAAM,IAEvC,MAAMhE,EAASrC,IAAAA,OAAAA,eACTsC,EAAOtC,IAAAA,MAAAA,IAAc,QACrBsG,EAAahH,KAAKgH,aAElBC,EAAU/F,IACd,IAAIgG,EAASF,IAAe9F,GAEvBgG,GAAUF,IACbE,EAASF,EAAW/C,WAAa/C,GAQnCmE,EAAMrE,IACJ,MAAQE,EAAIiG,KACZvF,EAACC,EAAa,CAACI,MAAOf,EAAK6B,OAAQA,EAAQmE,OAAQA,GAC7C,MAAHhG,OAAG,EAAHA,EAAKuB,SAEP,GACF,EAGHc,EAASP,GACN5C,QACEc,GAA2B,OAAnBA,EAAI2C,cAAyB3C,EAAIkB,WAAc4E,IAAe9F,EAAI+C,WAAa+C,GAAc9F,EAAI+C,WAAa+C,EAAW/C,aAEnIlD,QAAQkG,GAEX,MAAMG,EAAOpE,EAAK5C,QAAQc,GAA2B,OAAnBA,EAAI2C,aAAqBJ,MAAK,CAACC,EAAGC,IAAMA,EAAEI,kBAAoBL,EAAEK,oBAElGqD,EAAKC,OAAO,EAAG,GAAGtG,QAAQkG,GAEtBG,EAAK7G,QACP8E,EAAMrE,IAAI,WAAYY,EAACE,IAAU,CAACQ,KAAM5B,IAAAA,MAAU,SAAUA,IAAAA,WAAAA,MAAqB,uCAAqD,GAE1I,GACF,CCjEA,MAAM,EAA+BzC,OAAOC,KAAKC,OAAO,oC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,kC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,oB,aCKzC,MAAMmJ,UAAgBC,KACnCxF,OACE,MAAMb,EAAMlB,KAAKmB,MAAMc,MACjBN,EAAQT,EAAIS,QAElB,OACEC,EAAA,UACEJ,UAAWC,IAAU,OAAQ,UAAW,CAAE,mBAAoBE,EAAO,CAAC2B,IAAkB3B,IAASA,IACjGD,MAAOC,EAAQ,CAAE,YAAaA,QAAUzC,GAExC0C,EAAA,OAAKJ,UAAU,aACbI,EAAA,OAAKJ,UAAU,mBACbI,EAAA,MAAIJ,UAAU,cACXN,EAAII,QAAUL,EAAQC,EAAK,CAAC,EAAG,CAAEK,UAAU,IAAS,IAAEL,EAAIuB,QAE7Db,EAAA,OAAKJ,UAAU,iBAAiBN,EAAIgB,iBAK9C,ECZF,MAAMsF,EAAWvE,GAAiBvC,IAAAA,MAAAA,IAAmB,QAAQ+G,MAAMvG,GAA+E,IAAvEA,EAAI+B,OAAOyE,cAAczE,OAAM/D,EAAW,CAAEyI,YAAa,WAErH,SAAS,IACtB1B,IAAAA,UAAAA,WAAiC,WAC/B,GAAIjG,KAAK4H,iBACP,OAAO5H,KAAK4H,iBAGd,MAAM3E,EAAOvC,IAAAA,OAAAA,SAAoBsC,KACjC,IAAI9B,EAAM,KAMV,GAJI+B,IACF/B,EAAMsG,EAAQvE,IAGXA,IAAS/B,GAASA,IAAQA,EAAIkB,YAAclB,EAAIsF,WAAa,CAChE,GAAIxG,KAAK6H,kBACP,OAGF7H,KAAK6H,mBAAoB,EAMzBnH,IAAAA,MAAAA,KACQ,OAAQuC,EAAM,CAAE5C,QAAS,0CAC9BQ,MAAK,KACJb,KAAK4H,iBAAmBJ,EAAQvE,GAEhCrB,EAAEmD,QAAQ,IAEX+C,SAAQ,KACP9H,KAAK6H,mBAAoB,CAAK,GAEpC,CAEA,OAAI3G,GACFlB,KAAK4H,iBAAmB1G,EACjBlB,KAAK4H,uBAFd,CAMF,GAGAG,EAAAA,EAAAA,UAAS9B,IAAAA,UAAqB,QAAQ,SAAU+B,GAC9C,MAAM9G,EAAMlB,KAAKgH,aAEjB,OAAI9F,EAAYU,EAAC0F,EAAO,CAACrF,MAAOf,IAEzB8G,GACT,KAEAlB,EAAAA,EAAAA,QAAOb,IAAAA,UAAqB,QAAQ,SAAUgC,GAC5C,MAAM/G,EAAMlB,KAAKgH,aAEb9F,IAAK+G,EAAK9G,MAAMK,WAAa,kBAAoBN,EAAIiG,KAC3D,KAEAL,EAAAA,EAAAA,QAAOb,IAAAA,UAAqB,YAAY,WACtC,MAAM/E,EAAMlB,KAAKgH,aAEb9F,GACFR,IAAAA,SAAaQ,EAAIuB,OAErB,KAIAqE,EAAAA,EAAAA,QAAOb,IAAAA,UAAqB,gBAAgB,SAAUZ,GACpD,MAAMnE,EAAMlB,KAAKgH,aAEjB,GAAI9F,EAAK,CACP,MAAMS,EAAQT,EAAIS,QACZuG,EAAqBhH,EAAIgH,uBAAyBxH,IAAAA,QAAAA,KAClDyH,EAAgB9C,EAAM+C,IAAI,iBAE5BzG,IACFwG,EAAchH,MAAMK,UAAYC,IAAU,CAAC0G,EAAchH,MAAMK,UAAW,qBAAsB8B,IAAkB3B,KAClHwG,EAAchH,MAAMO,MAAQ,CAAE,UAAWC,IAG3CwG,EAAchH,MAAMkH,UAAYH,EAChCC,EAAc3B,SAAW9F,IAAAA,WAAAA,MACvBwH,EAAqB,2CAA6C,kDAEtE,CACF,KAIApB,EAAAA,EAAAA,QAAOwB,IAAAA,UAA6B,UAAU,SAAUvF,GACtDA,EAAOC,KAAOpB,EAAEW,MAAMgG,MAAM,OAC9B,KAGAzB,EAAAA,EAAAA,QAAO0B,IAAAA,UAA+B,iBAAiB,SAAqCzF,GAGnF,IAAA0F,EAIP,GAN8B,iBAAnB1F,EAAO1C,QAChB0C,EAAO1C,QAAU,CAAC0C,EAAO1C,SAEX,OAAdoI,EAAA1F,EAAO1C,UAAPoI,EAAgBlE,KAAK,OAAQ,eAG3BvE,KAAK+C,OAAOC,KAAM,KAAA0F,EACpB,MAAMtI,EAAsB,OAAhBsI,EAAG3F,EAAO3C,QAAMsI,EAAI,CAAC,EACjCtI,EAAOc,IAAMlB,KAAK+C,OAAOC,KAEzB,MAAM2F,EAAIvI,EAAOuI,EACbA,IACFvI,EAAOuI,EAAI,GAAHC,OAAMD,EAAC,SAAAC,OAAQ5I,KAAK+C,OAAOC,OAErCD,EAAO3C,OAASA,CAClB,CACF,GACF,CCjIA,MAAM,EAA+BnC,OAAOC,KAAKC,OAAO,uC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,mC,cCKzC,SAAS0K,GAAU7F,EAAM7B,QAAK,IAALA,IAAAA,EAAQ,CAAC,GAC/C,MAAMqF,EAAW,IACX,KAAErD,KAAS2F,GAAe3H,EAchC,OAZA2H,EAAWtH,UAAYC,IAAU,YAAaqH,EAAWtH,WAErDwB,EACFO,EAASP,GAAMjC,SAASG,KAClBA,GAAuB,IAAhB8B,EAAKzC,SACdiG,EAASjC,KAAKrB,EAAShC,EAAK,CAAEiC,SAChC,IAGFqD,EAASjC,KAAKrB,KAGTtB,EAAA,OAAUkH,EAAatC,EAChC,CCbe,SAAS,MAEtBM,EAAAA,EAAAA,QAAOiC,IAAAA,UAA8B,aAAa,SAAU1D,GAC1D,MAAMrC,EAAOhD,KAAKmB,MAAMuF,WAAW1D,OAE/BA,GAAQA,EAAKzC,QACf8E,EAAMrE,IAAI,OAAQ6H,GAAU7F,GAAO,GAEvC,KAGA8D,EAAAA,EAAAA,QAAOkC,KAAAA,UAA0B,QAAQ,SAAUjH,GACjD,MAAMiB,EAAOO,EAASvD,KAAKmB,MAAMuF,WAAW1D,QAE5C,GAAIA,GAAQA,EAAKzC,OAAQ,CACvB,MAAMoB,EAAQqB,EAAK,GAAGrB,QAClBA,IACFI,EAAKZ,MAAMO,MAAQ,CAAE,YAAaC,GAClCI,EAAKZ,MAAMK,UAAYC,IAAUM,EAAKZ,MAAMK,UAAW,0BAA2B8B,IAAkB3B,IAExG,CACF,KAIAmF,EAAAA,EAAAA,QAAOkC,KAAAA,UAA0B,SAAS,SAAU3D,GAClD,MAAMrC,EAAOhD,KAAKmB,MAAMuF,WAAW1D,OAE/BA,GAAQA,EAAKzC,QACf8E,EAAMrE,IAAI,OAAQ6H,GAAU7F,EAAM,CAAEG,MAAM,IAAS,EAEvD,GACF,CCzCA,MAAM,GAA+BlF,OAAOC,KAAKC,OAAO,kC,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,4B,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,mC,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,4B,eCAzC,SAAS8K,GAAkBvC,GACxC,IAAI1D,EAAOtC,IAAImE,MAAMC,IAAI,QAQzB,OALE9B,EADE0D,EACK1D,EAAK5C,QAAQc,GAAQA,EAAIgI,uBAA4D,IAApCxC,EAAW1D,OAAOmG,QAAQjI,KAE3E8B,EAAK5C,QAAQc,GAAQA,EAAIgH,uBAG3BlF,CACT,CCVA,MAAM,GAA+B/E,OAAOC,KAAKC,OAAO,4B,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,oC,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,2B,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,uB,eCOzC,MAAMiL,WAAqB7B,KACxCxF,KAAKC,GACH,MAAM,UAAER,EAAS,UAAE6H,KAAclI,GAAUnB,KAAKmB,MAC1CG,EAAO+H,EAAY,sBAAwB,gBAEjD,OACEzH,EAAC0H,KAAM9J,OAAA+J,OAAA,GAAKpI,EAAK,CAAEG,KAAMA,EAAME,UAAWC,IAAU,CAACD,EAAW6H,GAAa,sBAC1ErH,EAAMwE,SAGb,EC8Ca,MAAMgD,WAGXC,MAAgCjL,cAAA,SAAAkL,WAAAhL,EAAA,gBACpB,GAAIA,EAAA,oBAAAA,EAAA,gBAEI,IAAEA,EAAA,mBACE,GAAKA,EAAA,cAElBiL,KAAO,KAAGjL,EAAA,gBACT,GAAKA,EAAA,iBACH,IAAIkL,OAAqBlL,EAAA,wBAG/CkE,iBAAiBzB,GAAgC,IAAA0I,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC/CjI,MAAMC,UAAU3B,GAGhBA,EAAMqB,QAANrB,EAAMqB,MAAUuI,KAAYrK,IAAAA,WAAAA,MAAqB,+CACjDS,EAAM6J,YAAN7J,EAAM6J,UAAc,KAAM,GACN,MAApB7J,EAAM8J,iBAAN9J,EAAM8J,gBAAmB,GACzB9J,EAAM+J,OAAS,CACbC,IAAK,CACHC,MAA+B,OAA1BvB,EAAc,OAAdC,EAAE3I,EAAM+J,SAAW,OAALnB,EAAZD,EAAcqB,UAAF,EAAZpB,EAAmBqB,OAAKvB,GAAI,IACnCwB,QAAmC,OAA5BrB,EAAc,OAAdC,EAAE9I,EAAM+J,SAAW,OAALhB,EAAZD,EAAckB,UAAF,EAAZjB,EAAmBmB,SAAOrB,GAAI,IACvCsB,UAAuC,OAA9BnB,EAAc,OAAdC,EAAEjJ,EAAM+J,SAAW,OAALb,EAAZD,EAAce,UAAF,EAAZd,EAAmBiB,WAASnB,GAAI,KAE7CoB,IAAK,CACHH,MAA+B,OAA1Bd,EAAc,OAAdC,EAAEpJ,EAAM+J,SAAW,OAALV,EAAZD,EAAcgB,UAAF,EAAZf,EAAmBY,OAAKd,EAAIkB,IACnCH,QAAmC,OAA5BZ,EAAc,OAAdC,EAAEvJ,EAAM+J,SAAW,OAALP,EAAZD,EAAca,UAAF,EAAZZ,EAAmBU,SAAOZ,EAAIe,IACvCF,UAAuC,OAA9BV,EAAc,OAAdC,EAAE1J,EAAM+J,SAAW,OAALJ,EAAZD,EAAcU,UAAF,EAAZT,EAAmBQ,WAASV,EAAIY,MAiXnD,SAA4BN,GAC1B,GAAIA,EAAOC,IAAKE,QAAWH,EAAOK,IAAKF,QACrC,MAAM,IAAII,MAAM,8GAGlB,GAAIP,EAAOC,IAAKG,UAAaJ,EAAOK,IAAKD,UACvC,MAAM,IAAIG,MAAM,kHAGlB,GAAIP,EAAOC,IAAKC,MAASF,EAAOK,IAAKF,QAAWH,EAAOK,IAAKD,UAC1D,MAAM,IAAIG,MAAM,6HAGlB,GAAIP,EAAOK,IAAKH,MAASF,EAAOC,IAAKE,QAAWH,EAAOC,IAAKG,UAC1D,MAAM,IAAIG,MAAM,6HAGlB,GAAIP,EAAOC,IAAKC,MAASF,EAAOK,IAAKH,MACnC,MAAM,IAAIK,MAAM,6FAEpB,CAhYIC,CAAmBvK,EAAM+J,OAC3B,CAEA7G,OAAOrC,GACLa,MAAMwB,OAAOrC,GAEbhC,KAAK2L,UACFC,MAAK,IAAM5L,KAAK6L,SAAS7L,KAAK8L,yBAA2B,GAAG,KAC5DC,QAAO,IAAM/L,KAAK6L,SAAS7L,KAAK8L,yBAA2B,GAAG,KAC9DE,SAAShM,KAAKiM,OAAO3F,KAAKtG,OAC1BkM,UAAS,IAAMlM,KAAKmM,SAAS9E,OAAOrH,KAAKmM,SAAS5L,OAAS,EAAG,KAEjEG,IAAAA,QAAAA,KAAiB,CAAC,WAAWG,MAAMmC,IACjChD,KAAK0E,SAAU,EAEX1E,KAAKmB,MAAMiL,iBACbpJ,EAAOhD,KAAKmB,MAAMiL,eAAepJ,IAGnChD,KAAKgD,KAAOO,EAASP,GAEjBhD,KAAKmB,MAAMkL,cACbrM,KAAKmB,MAAMkL,aAAajG,IAAIpG,KAAKiH,OAAOX,KAAKtG,OAG/CA,KAAKsM,SAAWtJ,EAAK,GAErBpB,EAAEmD,QAAQ,GAEd,CAEAvD,YACE,OAAOC,IAAU,oBAAqBzB,KAAKmB,MAAMK,UACnD,CAEAgB,QACE,OAAOxC,KAAKmB,MAAMqB,KACpB,CAEAkD,UACE,GAAI1F,KAAK0E,UAAY1E,KAAKgD,KACxB,OAAOpB,EAACgE,IAAgB,MAG1B,MAAMxF,EAASJ,KAAKI,SAASmM,cACvBC,EAAexM,KAAKwM,eACpBC,EAAiBzM,KAAKyM,iBACtBzJ,EAAOhD,KAAK0M,kBAEZC,EAAaC,KAAKrB,IAAIR,KAAY/K,KAAK6M,eAAeL,EAAcC,IAAiBlM,OAAQP,KAAKI,SAASG,QAEjH,MAAO,CACLqB,EAAA,OAAKJ,UAAU,cACbI,EAAA,OAAKJ,UAAU,0BACbI,EAAA,OAAKJ,UAAU,gCACbI,EAAA,OAAKJ,UAAW,0BAA4BxB,KAAK8M,QAAU,QAAU,IAAKC,QAASA,IAAM/M,KAAKgN,EAAE,oBAAoBC,SAClHrL,EAAA,QAAMJ,UAAU,sBACbxB,KAAKmM,SAAS/F,KAAKlF,GAClBU,EAAA,QACEJ,UAAU,gBACVuL,QAASA,KACP/M,KAAKkN,UAAUhM,GACflB,KAAKmN,SAAS,GAGfjK,EAAShC,OAIhBU,EAAA,SACEJ,UAAU,cACV4L,YAAarC,KAAY/K,KAAK6M,eAAeL,EAAcC,IAC3DY,KAAMrN,KAAKI,OACXsB,MAAO,CAAE4L,MAAOX,EAAa,MAC7BY,UAAWvN,KAAK2L,UAAU6B,SAASlH,KAAKtG,KAAK2L,WAC7C8B,QAASA,IAAOzN,KAAK8M,SAAU,EAC/BY,OAAQA,IAAO1N,KAAK8M,SAAU,MAIpClL,EAAA,OAAKJ,UAAU,oDACbI,EAAC0H,KAAM,CACLqE,KAAK,SACLnM,UAAU,yBACV6G,UAAWrI,KAAK4N,kBAAkBpB,EAAcC,GAChDnL,KAAK,gBAEJZ,IAAAA,WAAAA,MAAqB,yDAM9BkB,EAAA,OAAKJ,UAAU,gBACbI,EAAA,MAAIJ,UAAU,wCACXwB,EAAKoD,KAAKlF,GACTU,EAAA,MACE,aAAYV,EAAIiG,KAChB3F,UAAWC,IAAU,CACnBoE,OAA2B,OAAnB3E,EAAI2C,WACZ1B,QAASjB,EAAI+C,SACbwC,UAAWvF,EAAIS,QACfwK,SAAUnM,KAAKmM,SAASpM,SAASmB,GACjCgG,OAAQlH,KAAKsM,WAAapL,IAE5BQ,MAAO,CAAEC,MAAOT,EAAIS,SACpBkM,YAAaA,IAAO7N,KAAKsM,SAAWpL,EACpC6L,QAAS/M,KAAK8N,UAAUxH,KAAKtG,KAAMkB,IAElCD,EAAQC,GACTU,EAAA,QAAMJ,UAAU,0BAA0BuM,KAAU7M,EAAIuB,OAAQrC,IAC/Dc,EAAIgB,cAAgBN,EAAA,QAAMJ,UAAU,iCAAiCN,EAAIgB,eAAwB,OAIvGlC,KAAKmB,MAAM+J,OAAQ8C,gBAClBpM,EAAA,OAAKJ,UAAU,8BACbI,EAACwH,GAAY,CAAC5H,UAAU,SAASuL,QAASA,IAAO/M,KAAKiO,YAAcjO,KAAKiO,WAAa5E,UAAWrJ,KAAKiO,YACnGvN,IAAAA,WAAAA,MAAqB,8DAMlC,CAKQgM,kBACN,MAAMtM,EAASJ,KAAKI,SAASmM,cACvBC,EAAexM,KAAKwM,eACpBC,EAAiBzM,KAAKyM,iBAC5B,IAAIzJ,EAAOhD,KAAKgD,KAoChB,OAlCIhD,KAAKmB,MAAM+M,mBAGblL,EAAOA,EAAK5C,QAAQc,IAClB,MAAM+C,EAAS/C,EAAI+C,SACnB,OAAkB,OAAXA,KAA+B,IAAXA,GAAoBjE,KAAKmM,SAASpM,SAASkE,GAAQ,KAI7EjE,KAAKiO,aAEJjO,KAAKmM,SAAS5L,QAAUP,KAAKmB,MAAM+J,OAAQK,IAAKH,MAClDpI,EAAOA,EAAK5C,QAAQc,GAAQlB,KAAKmM,SAASpM,SAASmB,MAK/CsL,GAAgBxM,KAAKmB,MAAM+J,OAAQK,IAAKF,UAC1CrI,EAAOA,EAAK5C,QAAQc,IAASA,EAAIiN,aAAenO,KAAKmM,SAASpM,SAASmB,MAErEuL,GAAkBzM,KAAKmB,MAAM+J,OAAQK,IAAKD,YAC5CtI,EAAOA,EAAK5C,QAAQc,GAAQA,EAAIiN,aAAenO,KAAKmM,SAASpM,SAASmB,QAOxEd,IACF4C,EAAOA,EAAK5C,QAAQc,GAAQA,EAAIuB,OAAO8J,cAAcxM,SAASK,MAG3DJ,KAAKsM,UAAatJ,EAAKjD,SAASC,KAAKsM,YAAWtM,KAAKsM,SAAWtJ,EAAK,IAEnEA,CACT,CAKUwJ,eACR,OAAOxM,KAAKmM,SAAS/L,QAAQc,GAAQA,EAAIiN,cAAa5N,MACxD,CAKUkM,iBACR,OAAOzM,KAAKmM,SAAS/L,QAAQc,IAASA,EAAIiN,cAAa5N,MACzD,CAKUqN,kBAAkBpB,EAAsBC,GAChD,SAAIzM,KAAKiO,YAAejO,KAAKmB,MAAM8J,gBAA2C,IAAzBjL,KAAKmM,SAAS5L,WAI/DP,KAAKmM,SAAS5L,OAASP,KAAKmB,MAAM+J,OAAQC,IAAKC,QAI5CoB,GAAgBxM,KAAKmB,MAAM+J,OAAQC,IAAKE,SAAYoB,GAAkBzM,KAAKmB,MAAM+J,OAAQC,IAAKG,SACvG,CAKUrE,OAAO/F,GACf,GAAKA,GAAQlB,KAAKmB,MAAM6J,UAAU9J,GAAlC,CAQA,GANIlB,KAAKmB,MAAM6K,UACbhM,KAAKmB,MAAM6K,SAAS9K,EAAKlB,KAAKmM,UAK5BnM,KAAKmB,MAAM+M,iBAAkB,CAC/B,MAAMjK,EAAS/C,EAAI+C,SACfA,IAAWjE,KAAKmM,SAASpM,SAASkE,IACpCjE,KAAKmM,SAAS5H,KAAKN,EAEvB,CAEKjE,KAAKmM,SAASpM,SAASmB,IAC1BlB,KAAKmM,SAAS5H,KAAKrD,EAhByB,CAkBhD,CAKUgM,UAAUhM,GAClB,MAAMkN,EAAQpO,KAAKmM,SAAShD,QAAQjI,IAErB,IAAXkN,IACFpO,KAAKmM,SAAS9E,OAAO+G,EAAO,GAIxBpO,KAAKmB,MAAM+M,kBACblO,KAAKmM,SAAS/L,QAAQiO,GAAMA,EAAEpK,WAAa/C,IAAKH,QAAQf,KAAKkN,UAAU5G,KAAKtG,OAG1EA,KAAKmB,MAAMmN,YACbtO,KAAKmB,MAAMmN,WAAWpN,EAAKlB,KAAKmM,UAGtC,CAEU2B,UAAU5M,GAEblB,KAAKgD,OAENhD,KAAKmM,SAASpM,SAASmB,GACzBlB,KAAKkN,UAAUhM,GAEflB,KAAKiH,OAAO/F,GAGVlB,KAAKI,WACPJ,KAAKI,OAAO,IACZJ,KAAKsM,SAAWtM,KAAKgD,KAAK,IAG5BhD,KAAKmN,UACP,CAKUN,eAAeL,EAAsBC,GAC7C,GAAIzM,KAAKiO,WACP,MAAO,GAGT,GAAIzB,EAAexM,KAAKmB,MAAM+J,OAAQC,IAAKE,QAAU,CACnD,MAAMkD,EAAYvO,KAAKmB,MAAM+J,OAAQC,IAAKE,QAAWmB,EACrD,OAAOzB,KAAYrK,IAAAA,WAAAA,MAAqB,iEAAkE,CAAE8N,MAAOD,IACrH,CAAO,GAAI9B,EAAiBzM,KAAKmB,MAAM+J,OAAQC,IAAKG,UAAY,CAC9D,MAAMiD,EAAYvO,KAAKmB,MAAM+J,OAAQC,IAAKG,UAAamB,EACvD,OAAO1B,KAAYrK,IAAAA,WAAAA,MAAqB,mEAAoE,CAAE8N,MAAOD,IACvH,CAAO,GAAIvO,KAAKmM,SAAS5L,OAASP,KAAKmB,MAAM+J,OAAQC,IAAKC,MAAQ,CAChE,MAAMmD,EAAYvO,KAAKmB,MAAM+J,OAAQC,IAAKC,MAASpL,KAAKmM,SAAS5L,OACjE,OAAOwK,KAAYrK,IAAAA,WAAAA,MAAqB,8DAA+D,CAAE8N,MAAOD,IAClH,CAEA,MAAO,EACT,CAKAE,SAASC,GACPA,EAAEC,iBAEE3O,KAAKmB,MAAMsN,UAAUzO,KAAKmB,MAAMsN,SAASzO,KAAKmM,UAElDnM,KAAK4O,MACP,CAEU3C,OAAOyC,GAEXA,EAAEG,SAAWH,EAAEI,SAAY9O,KAAKsM,UAAYtM,KAAKmM,SAASpM,SAASC,KAAKsM,UACtEtM,KAAKmM,SAAS5L,QAGhBP,KAAKgN,EAAE,yBAAyB+B,QAEzB/O,KAAKsM,UACdtM,KAAKgP,QAAQhP,KAAKsM,UAAU,GAAG2C,cAAc,IAAIC,MAAM,SAE3D,CAEUC,kBACR,OAAOnP,KAAKgN,EAAE,+BAChB,CAEUlB,yBACR,OAAK9L,KAAKsM,SAEHtM,KAAKmP,kBAAkBf,MAAMpO,KAAKgP,QAAQhP,KAAKsM,YAF1B,CAG9B,CAEU0C,QAAQI,GAChB,OAAOpP,KAAKmP,kBAAkB/O,OAAO,gBAADwI,OAAiBwG,EAAYjI,KAAI,MACvE,CAEU0E,SAASuC,EAAeiB,GAChC,MAAMC,EAAStP,KAAKmP,kBACdI,EAAYD,EAAOrL,SAErBmK,EAAQ,EACVA,EAAQkB,EAAO/O,OAAS,EACf6N,GAASkB,EAAO/O,SACzB6N,EAAQ,GAGV,MAAMoB,EAAQF,EAAOG,GAAGrB,GAMxB,GAJApO,KAAKsM,SAAW5L,IAAAA,MAAAA,QAAkB,OAAQ8O,EAAME,KAAK,eAErD9N,EAAEmD,SAEEsK,GAAgBrP,KAAKsM,SAAU,CACjC,MAAMqD,EAAiBJ,EAAUK,YAC3BC,EAAcN,EAAUO,SAAUC,IAClCC,EAAiBH,EAAcN,EAAUU,cACzCC,EAAUV,EAAMM,SAAUC,IAC1BI,EAAaD,EAAUV,EAAMS,cAEnC,IAAIL,EACAM,EAAUL,EACZD,EAAYD,EAAiBE,EAAcK,EAAUE,SAASb,EAAUc,IAAI,eAAgB,IACnFF,EAAaH,IACtBJ,EAAYD,EAAiBK,EAAiBG,EAAaC,SAASb,EAAUc,IAAI,kBAAmB,UAG9E,IAAdT,GACTL,EAAUe,MAAK,GAAMC,QAAQ,CAAEX,aAAa,IAEhD,CACF,ECzba,MAAMY,WAA2BhH,GAC9C5G,iBAAiBzB,GAAgC,IAAAsP,EAC/C5N,MAAMC,UAAU3B,GAEhB,MAAMqB,EAAQrB,EAAMuF,WAChBhG,IAAAA,WAAAA,MAAqB,2CAA4C,CAAE8B,MAAOZ,EAAA,UAAKT,EAAMuF,WAAWlE,WAChG9B,IAAAA,WAAAA,MAAqB,uCAEzBS,EAAMK,UAAYC,IAAUN,EAAMK,UAAW,sBAC7CL,EAAMqB,MAAQuI,KAAYvI,GAC1BrB,EAAM8J,iBAAmBvK,IAAAA,MAAAA,UAAoB,sBAC7CS,EAAM+J,OAAS,CACb8C,eAAgB7M,EAAM8J,eACtBM,IAAK,CACHF,QAAS3K,IAAAA,MAAAA,UAA4B,kBACrC4K,UAAW5K,IAAAA,MAAAA,UAA4B,qBAEzCyK,IAAK,CACHE,QAAS3K,IAAAA,MAAAA,UAA4B,kBACrC4K,UAAW5K,IAAAA,MAAAA,UAA4B,sBAG3CS,EAAM+M,kBAAmB,EACzB/M,EAAMiL,eAAiB,IAAMnD,GAAkB9H,EAAMuF,YACnC,MAAlBvF,EAAMkL,eAANlL,EAAMkL,cAAkC,OAAjBoE,EAACtP,EAAMuF,iBAAU,EAAhB+J,EAAkBzN,SAAoB,IAC9D7B,EAAM6J,UAAa9J,GAAQA,EAAIgH,qBAE/B,MAAMwI,EAAmBvP,EAAMsN,UAAY,KAG3CtN,EAAMsN,SAAW,SAAUzL,GACzB,MAAM0D,EAAavF,EAAMuF,WAErBA,GACFA,EAAWiK,KAAK,CAAEC,cAAe,CAAE5N,UAAUnC,MAAK,KAC5CH,IAAAA,QAAAA,QAAoBmQ,OACtBnQ,IAAAA,QAAAA,IAAgB,UAAUoQ,SAG5BlP,EAAEmD,QAAQ,IAIV2L,GAAkBA,EAAiB1N,EACzC,CACF,ECtDa,SAAS,MAEtB8D,EAAAA,EAAAA,QAAOiK,KAAoB,sBAAsB,SAAU1L,EAAOqB,GAC5DA,EAAWsK,UACb3L,EAAMrE,IACJ,OACAY,EAAC0H,KAAM,CAAChI,KAAK,aAAayL,QAASA,IAAMrM,IAAIuQ,MAAMC,KAAKV,GAAoB,CAAE9J,gBAC3EhG,IAAIgC,WAAWC,MAAM,2DAI9B,GACF,CClBA,MAAM,GAA+B1E,OAAOC,KAAKC,OAAO,uC,eCSzC,SAAS,MACtB2I,EAAAA,EAAAA,QAAOb,IAAAA,UAAqB,uBAAuB,SAAUkL,GAE3D,MAAMjQ,EAAMlB,KAAKgH,aAEjB,GAAI9F,EAAK,CACP,MAAM+C,EAAS/C,EAAI+C,SACbjB,EAAOiB,EAAS,CAACA,EAAQ/C,GAAO,CAACA,GACvCiQ,EAAQtQ,MAAMuQ,GAAcA,EAASC,OAAOrO,KAAOA,GACrD,MACEtC,IAAI0Q,SAASC,OAAOrO,KAAO,EAE/B,KAEA8D,EAAAA,EAAAA,QAAOwK,KAAAA,UAA8B,UAAU,WAC7C5Q,IAAIiE,QAAQC,KAAK,CAAC,WAAW/D,MAAK,IAAMe,EAAEmD,UAC5C,IAGAuM,KAAAA,UAAAA,WAA0C,WACjBrI,KAEH1I,QAEpBG,IAAIuQ,MAAMC,KAAKV,GAAoB,CACjCnE,cAAerM,KAAKoR,SAASC,OAAOrO,MAAQ,IAAIQ,MAAM,GACtDiL,SAAWzL,IACThD,KAAKoR,SAASC,OAAOrO,KAAOA,EAC5BhD,KAAKgN,EAAE,YAAYC,OAAO,GAGhC,GAIAnG,EAAAA,EAAAA,QAAOwK,KAAAA,UAA8B,eAAe,SAAUjM,GAC5D,MAAMrC,EAAOhD,KAAKoR,SAASC,OAAOrO,MAAQ,GACpCoJ,EAAiBnD,KAEvB5D,EAAMrE,IACJ,OACAY,EAAA,KAAGJ,UAAWC,IAAU,CAAC,iCAAkC2K,EAAe7L,QAAU,aAAcwM,QAAS/M,KAAKuR,WAAWjL,KAAKtG,OAC7HgD,EAAKzC,OACJsI,GAAU7F,GAEVpB,EAAA,QAAMJ,UAAU,qBAAqBd,IAAIgC,WAAWC,MAAM,4DAG9D,GAEJ,KAEAoF,EAAAA,EAAAA,UAASuJ,KAAAA,UAA8B,YAAY,SAAUtJ,GAC3D,MAAMwJ,EAAaxR,KAAKoR,SAASC,OAAOrO,MAAQ,GAC1CyO,EAAoBD,EAAWpR,QAAQc,GAA2B,OAAnBA,EAAI2C,aAAwB3C,EAAIkB,YAC/EsP,EAAsBF,EAAWpR,QAAQc,GAA2B,OAAnBA,EAAI2C,aACrDuI,EAAiBnD,KAEjB0I,EAAiBvB,SAAS1P,IAAIkR,MAAMC,UAAU,mBAC9CC,EAAmB1B,SAAS1P,IAAIkR,MAAMC,UAAU,qBAChDE,EAAiB3B,SAAS1P,IAAIkR,MAAMC,UAAU,mBAC9CG,EAAmB5B,SAAS1P,IAAIkR,MAAMC,UAAU,uBAGjDL,EAAWjR,QAA6B,IAAnBwR,GAA6C,IAArBC,GAC9CP,EAAkBlR,OAASoR,GAC3BD,EAAoBnR,OAASuR,IAC/B1F,EAAe7L,OAEfG,IAAIuQ,MAAMC,KAAKV,GAAoB,CACjCnE,aAAcmF,EACd/C,SAAWzL,IACThD,KAAKoR,SAASC,OAAOrO,KAAOA,EAC5BgF,GAAU,IAIdA,GAEJ,KAGAlB,EAAAA,EAAAA,QAAOwK,KAAAA,UAA8B,QAAQ,SAAUW,GACrDA,EAAKrB,cAAgBqB,EAAKrB,eAAiB,CAAC,EAC5CqB,EAAKrB,cAAc5N,KAAOhD,KAAKoR,SAASC,OAAOrO,IACjD,GACF,CC/FA,MAAM,GAA+B/E,OAAOC,KAAKC,OAAO,oB,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,4B,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,8B,eCGzC,MAAM+T,WAA6BC,MAChDvP,iBAAiBzB,GACf0B,MAAMC,UAAU3B,GAEhB,MAAMiR,EAAUjR,EAAMkR,KAAK3M,UAAU,GAC/B4M,EAAUnR,EAAMkR,KAAK3M,UAAU,GAErC,SAAS6M,EAASC,EAAOC,GACvB,OAAOD,EAAMpS,QAAQc,IAAgC,IAAxBuR,EAAMtJ,QAAQjI,KAAakF,KAAKe,GAAOzG,IAAImE,MAAM6N,QAAQ,OAAQvL,IAChG,CAEAhG,EAAMwR,UAAYJ,EAASD,EAASF,GACpCjR,EAAMyR,YAAcL,EAASH,EAASE,EACxC,CAEAhR,OACE,MAAO,YACT,CAEAuR,iBACE,OAAI7S,KAAKmB,MAAMwR,UAAUpS,OACnBP,KAAKmB,MAAMyR,YAAYrS,OAClB,4DAGF,gDAGF,iDACT,CAEAuS,kBACE,MAAMb,EAAO,CAAC,EAgBd,OAdIjS,KAAKmB,MAAMwR,UAAUpS,SACvB0R,EAAKU,UAAYjS,IAAIgC,WAAWC,MAAM,0CAA2C,CAC/EK,KAAM6F,GAAU7I,KAAKmB,MAAMwR,UAAW,CAAExP,MAAM,IAC9CqL,MAAOxO,KAAKmB,MAAMwR,UAAUpS,UAI5BP,KAAKmB,MAAMyR,YAAYrS,SACzB0R,EAAKW,YAAclS,IAAIgC,WAAWC,MAAM,0CAA2C,CACjFK,KAAM6F,GAAU7I,KAAKmB,MAAMyR,YAAa,CAAEzP,MAAM,IAChDqL,MAAOxO,KAAKmB,MAAMyR,YAAYrS,UAI3B0R,CACT,ECpDF,MAAM,GAA+BhU,OAAOC,KAAKC,OAAO,yB,eCAxD,MAAM,GAA+BF,OAAOC,KAAKC,OAAO,gB,eCIzC,MAAM4U,WAAYC,MAC/BvQ,OACE,OAAOuQ,KAAAA,UAAwB,QAAQ5T,KAAKY,KAC9C,CACAiD,OACE,OAAO+P,KAAAA,UAAwB,QAAQ5T,KAAKY,KAC9C,CACAkC,cACE,OAAO8Q,KAAAA,UAA+B,eAAe5T,KAAKY,KAC5D,CAEA2B,QACE,OAAOqR,KAAAA,UAA+B,SAAS5T,KAAKY,KACtD,CACAiT,gBACE,OAAOD,KAAAA,UAA+B,iBAAiB5T,KAAKY,KAC9D,CACAkT,iBACE,OAAOF,KAAAA,UAA+B,kBAAkB5T,KAAKY,KAC/D,CACAsB,OACE,OAAO0R,KAAAA,UAA+B,QAAQ5T,KAAKY,KACrD,CAEA6D,WACE,OAAOmP,KAAAA,UAA+B,YAAY5T,KAAKY,KACzD,CACAiE,SACE,OAAO+O,KAAAA,OAAyB,UAAU5T,KAAKY,KACjD,CACAwG,WACE,OAAOwM,KAAAA,QAAmB,YAAY5T,KAAKY,KAC7C,CACAmT,cACE,OAAOH,KAAAA,UAA+B,eAAe5T,KAAKY,KAC5D,CACAoC,UACE,OAAO4Q,KAAAA,UAAyB,WAAW5T,KAAKY,KAClD,CACAoT,WACE,OAAOJ,KAAAA,UAAyB,YAAY5T,KAAKY,KACnD,CAEA+D,kBACE,OAAOiP,KAAAA,UAAwB,mBAAmB5T,KAAKY,KACzD,CACA6G,eACE,OAAOmM,KAAAA,UAAgB,eAAgBA,KAAAA,eAAqB5T,KAAKY,KACnE,CACAuG,uBACE,OAAOyM,KAAAA,OAAgC,wBAAwB5T,KAAKY,KACtE,CAEAqT,eACE,OAAOL,KAAAA,UAAyB,gBAAgB5T,KAAKY,KACvD,CACAkI,qBACE,OAAO8K,KAAAA,UAAyB,sBAAsB5T,KAAKY,KAC7D,CACAkJ,qBACE,OAAO8J,KAAAA,UAAyB,sBAAsB5T,KAAKY,KAC7D,CAEAmO,YACE,OAAOmF,KAAwB,WAAY,UAAU,CAACzP,EAAUI,IAAwB,OAAbJ,IAAgC,IAAXI,IAAkB7E,KAAKY,KACzH,EClEF,MCOA,KDNE,IAAIuT,KAAAA,QACDvS,IAAI,OAAQ+R,KCQf,IAAIQ,KAAAA,SACDvS,IAAI,OAAQ,QAASmD,GACrBnD,IAAI,MAAO,WAAYiF,KACvBuN,OAAO,OAAQtS,GAAQR,IAAAA,MAAU,MAAO,CAAEsC,KAAM9B,EAAI+B,YAEvD,IAAIsQ,KAAAA,YACDvS,IAAI,mBAAoBkR,IAE3B,IAAIqB,KAAAA,OAAaE,MACdC,QAAa,QACb7B,UAAmB,WCfxB,IACE,sBAAuBtO,EACvB,kBAAmBwP,GACnB,yBAA0BlK,GAC1B,uBAAwB5H,EACxB,wBAAyBiC,EACzB,oCAAqCsG,GACrC,2BAA4B3J,GCD9B,GAAeL,OAAO+J,OAAOpL,GAAQ,CACnC,oBAAqBwV,EACrB,qBAAsBC,GACtB,0BAA2BtM,EAC3B,qCAAsCkJ,GACtC,2BAA4BrM,EAC5B,uCAAwC+N,GACxC,gCAAiCrQ,EACjC,kBAAmBgS,EACnB,oBAAqBC,GACrB,sBAAuBC,GACvB,+BAAgC9K,KCzB5B,GAA+BhL,OAAOC,KCY5CwC,IAAAA,aAAAA,IAAqB,eAAe,WAClCA,IAAAA,QAAc,IAAIb,EAElBgU,IACAF,IACAG,KACAF,KACAG,IACF,IAMAvU,OAAO+J,OAAOpL,GAAAA,OAAQ6V,G,GCzBlBC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBjV,IAAjBkV,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUG,EAAQA,EAAOD,QAASH,GAG/CI,EAAOD,OACf,CCrBAH,EAAoBM,EAAKF,IACxB,IAAIG,EAASH,GAAUA,EAAOI,WAC7B,IAAOJ,EAAiB,QACxB,IAAM,EAEP,OADAJ,EAAoBS,EAAEF,EAAQ,CAAE/Q,EAAG+Q,IAC5BA,CAAM,ECLdP,EAAoBS,EAAI,CAACN,EAASO,KACjC,IAAI,IAAIjW,KAAOiW,EACXV,EAAoBW,EAAED,EAAYjW,KAASuV,EAAoBW,EAAER,EAAS1V,IAC5Ea,OAAOC,eAAe4U,EAAS1V,EAAK,CAAEe,YAAY,EAAM0I,IAAKwM,EAAWjW,IAE1E,ECNDuV,EAAoBW,EAAI,CAACxW,EAAKyW,IAAUtV,OAAOf,UAAUsW,eAAe3V,KAAKf,EAAKyW,GCClFZ,EAAoBc,EAAKX,IACH,oBAAX/V,QAA0BA,OAAO2W,aAC1CzV,OAAOC,eAAe4U,EAAS/V,OAAO2W,YAAa,CAAErW,MAAO,WAE7DY,OAAOC,eAAe4U,EAAS,aAAc,CAAEzV,OAAO,GAAO,E","sources":["webpack://@flarum/tags/external root \"flarum.core.compat['forum/app']\"","webpack://@flarum/tags/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@flarum/tags/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@flarum/tags/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@flarum/tags/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/app']\"","webpack://@flarum/tags/./src/common/states/TagListState.ts","webpack://@flarum/tags/external root \"flarum.core.compat['common/extend']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Link']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@flarum/tags/./src/common/helpers/tagIcon.js","webpack://@flarum/tags/./src/forum/components/TagLinkButton.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Page']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/helpers/textContrastClass']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/extract']\"","webpack://@flarum/tags/./src/common/helpers/tagLabel.js","webpack://@flarum/tags/./src/common/utils/sortTags.tsx","webpack://@flarum/tags/./src/forum/components/TagsPage.js","webpack://@flarum/tags/./src/forum/addTagList.js","webpack://@flarum/tags/external root \"flarum.core.compat['forum/states/DiscussionListState']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/states/GlobalSearchState']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/Component']\"","webpack://@flarum/tags/./src/forum/components/TagHero.js","webpack://@flarum/tags/./src/forum/addTagFilter.tsx","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionHero']\"","webpack://@flarum/tags/./src/common/helpers/tagsLabel.js","webpack://@flarum/tags/./src/forum/addTagLabels.js","webpack://@flarum/tags/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Button']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@flarum/tags/./src/forum/utils/getSelectableTags.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/KeyboardNavigatable']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@flarum/tags/./src/forum/components/ToggleButton.js","webpack://@flarum/tags/./src/common/components/TagSelectionModal.tsx","webpack://@flarum/tags/./src/forum/components/TagDiscussionModal.tsx","webpack://@flarum/tags/./src/forum/addTagControl.js","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@flarum/tags/./src/forum/addTagComposer.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/extenders']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/EventPost']\"","webpack://@flarum/tags/./src/forum/components/DiscussionTaggedPost.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/Model']\"","webpack://@flarum/tags/./src/common/models/Tag.ts","webpack://@flarum/tags/./src/common/extend.ts","webpack://@flarum/tags/./src/forum/extend.ts","webpack://@flarum/tags/./src/common/compat.js","webpack://@flarum/tags/./src/forum/compat.js","webpack://@flarum/tags/external assign \"flarum.core\"","webpack://@flarum/tags/./src/forum/index.ts","webpack://@flarum/tags/webpack/bootstrap","webpack://@flarum/tags/webpack/runtime/compat get default export","webpack://@flarum/tags/webpack/runtime/define property getters","webpack://@flarum/tags/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/tags/webpack/runtime/make namespace object"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\nimport type Tag from '../../common/models/Tag';\n\nexport default class TagListState {\n  loadedIncludes?: Set<string>;\n\n  async load(includes: string[] = []): Promise<Tag[]> {\n    if (!this.loadedIncludes) {\n      return this.query(includes);\n    }\n\n    const unloadedIncludes = includes.filter((include) => !this.loadedIncludes!.has(include));\n\n    if (unloadedIncludes.length === 0) {\n      return Promise.resolve(app.store.all<Tag>('tags'));\n    }\n\n    return this.query(unloadedIncludes);\n  }\n\n  async query(includes: string[] = []): Promise<Tag[]> {\n    this.loadedIncludes ??= new Set();\n\n    return app.store.find<Tag[]>('tags', { include: includes.join(',') }).then((val) => {\n      includes.forEach((include) => this.loadedIncludes!.add(include));\n      return val;\n    });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","import classList from 'flarum/common/utils/classList';\n\nexport default function tagIcon(tag, attrs = {}, settings = {}) {\n  const hasIcon = tag && tag.icon();\n  const { useColor = true } = settings;\n\n  attrs.className = classList([attrs.className, 'icon', hasIcon ? tag.icon() : 'TagIcon']);\n\n  if (tag && useColor) {\n    attrs.style = attrs.style || {};\n    attrs.style['--color'] = tag.color();\n\n    if (hasIcon) {\n      attrs.style.color = tag.color();\n    }\n  } else if (!tag) {\n    attrs.className += ' untagged';\n  }\n\n  return hasIcon ? <i {...attrs} /> : <span {...attrs} />;\n}\n","import Link from 'flarum/common/components/Link';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport classList from 'flarum/common/utils/classList';\nimport tagIcon from '../../common/helpers/tagIcon';\n\nexport default class TagLinkButton extends LinkButton {\n  view(vnode) {\n    const tag = this.attrs.model;\n    const description = tag && tag.description();\n    const className = classList('TagLinkButton hasIcon', { child: tag.isChild() }, this.attrs.className);\n\n    return (\n      <Link className={className} href={this.attrs.route} style={tag ? { '--color': tag.color() } : undefined} title={description || undefined}>\n        {tagIcon(tag, { className: 'Button-icon' })}\n        <span className=\"Button-label\">{tag ? tag.name() : app.translator.trans('flarum-tags.forum.index.untagged_link')}</span>\n      </Link>\n    );\n  }\n\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    const tag = attrs.model;\n\n    attrs.params.tags = tag ? tag.slug() : 'untagged';\n    attrs.route = app.route('tag', attrs.params);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/textContrastClass'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extract'];","import extract from 'flarum/common/utils/extract';\nimport Link from 'flarum/common/components/Link';\nimport classList from 'flarum/common/utils/classList';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport tagIcon from './tagIcon';\n\nexport default function tagLabel(tag, attrs = {}) {\n  attrs.style = attrs.style || {};\n  attrs.className = 'TagLabel ' + (attrs.className || '');\n\n  const link = extract(attrs, 'link');\n  const tagText = tag ? tag.name() : app.translator.trans('flarum-tags.lib.deleted_tag_text');\n\n  if (tag) {\n    const color = tag.color();\n    if (color) {\n      attrs.style['--tag-bg'] = color;\n      attrs.className = classList(attrs.className, 'colored', textContrastClass(color));\n    }\n\n    if (link) {\n      attrs.title = tag.description() || '';\n      attrs.href = app.route('tag', { tags: tag.slug() });\n    }\n\n    if (tag.isChild()) {\n      attrs.className += ' TagLabel--child';\n    }\n  } else {\n    attrs.className += ' untagged';\n  }\n\n  return m(\n    link ? Link : 'span',\n    attrs,\n    <span className=\"TagLabel-text\">\n      {tag && tag.icon() && tagIcon(tag, { className: 'TagLabel-icon' }, { useColor: false })}\n      <span className=\"TagLabel-name\">{tagText}</span>\n    </span>\n  );\n}\n","import Tag from '../models/Tag';\n\nexport default function sortTags(tags: Tag[]) {\n  return tags.slice(0).sort((a, b) => {\n    const aPos = a.position();\n    const bPos = b.position();\n\n    // If they're both secondary tags, sort them by their discussions count,\n    // descending.\n    if (aPos === null && bPos === null) return b.discussionCount() - a.discussionCount();\n\n    // If just one is a secondary tag, then the primary tag should\n    // come first.\n    if (bPos === null) return -1;\n    if (aPos === null) return 1;\n\n    // If we've made it this far, we know they're both primary tags. So we'll\n    // need to see if they have parents.\n    const aParent = a.parent();\n    const bParent = b.parent();\n\n    // If they both have the same parent, then their positions are local,\n    // so we can compare them directly.\n    if (aParent === bParent) return aPos - bPos;\n    // If they are both child tags, then we will compare the positions of their\n    // parents.\n    else if (aParent && bParent) return aParent.position()! - bParent.position()!;\n    // If we are comparing a child tag with its parent, then we let the parent\n    // come first. If we are comparing an unrelated parent/child, then we\n    // compare both of the parents.\n    else if (aParent) return aParent === b ? 1 : aParent.position()! - bPos;\n    else if (bParent) return bParent === a ? -1 : aPos - bParent.position()!;\n\n    return 0;\n  });\n}\n","import Page from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Link from 'flarum/common/components/Link';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport listItems from 'flarum/common/helpers/listItems';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport humanTime from 'flarum/common/helpers/humanTime';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport classList from 'flarum/common/utils/classList';\n\nimport tagIcon from '../../common/helpers/tagIcon';\nimport tagLabel from '../../common/helpers/tagLabel';\nimport sortTags from '../../common/utils/sortTags';\n\nexport default class TagsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.history.push('tags', app.translator.trans('flarum-tags.forum.header.back_to_tags_tooltip'));\n\n    this.tags = [];\n\n    const preloaded = app.preloadedApiDocument();\n\n    if (preloaded) {\n      this.tags = sortTags(preloaded.filter((tag) => !tag.isChild()));\n      return;\n    }\n\n    this.loading = true;\n\n    app.tagList.load(['children', 'lastPostedDiscussion', 'parent']).then(() => {\n      this.tags = sortTags(app.store.all('tags').filter((tag) => !tag.isChild()));\n\n      this.loading = false;\n\n      m.redraw();\n    });\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    app.setTitle(app.translator.trans('flarum-tags.forum.all_tags.meta_title_text'));\n    app.setTitleCount(0);\n  }\n\n  view() {\n    return <div className=\"TagsPage\">{this.pageContent().toArray()}</div>;\n  }\n\n  pageContent() {\n    const items = new ItemList();\n\n    items.add('hero', this.hero(), 100);\n    items.add('main', <div className=\"container\">{this.mainContent().toArray()}</div>, 10);\n\n    return items;\n  }\n\n  mainContent() {\n    const items = new ItemList();\n\n    items.add('sidebar', this.sidebar(), 100);\n    items.add('content', this.content(), 10);\n\n    return items;\n  }\n\n  content() {\n    return <div className=\"TagsPage-content sideNavOffset\">{this.contentItems().toArray()}</div>;\n  }\n\n  contentItems() {\n    const items = new ItemList();\n\n    if (this.loading) {\n      items.add('loading', <LoadingIndicator />);\n    } else {\n      const pinned = this.tags.filter((tag) => tag.position() !== null);\n      const cloud = this.tags.filter((tag) => tag.position() === null);\n\n      items.add('tagTiles', this.tagTileListView(pinned), 100);\n\n      if (cloud.length) {\n        items.add('cloud', this.cloudView(cloud), 10);\n      }\n    }\n\n    return items;\n  }\n\n  hero() {\n    return IndexPage.prototype.hero();\n  }\n\n  sidebar() {\n    return (\n      <nav className=\"TagsPage-nav IndexPage-nav sideNav\">\n        <ul>{listItems(this.sidebarItems().toArray())}</ul>\n      </nav>\n    );\n  }\n\n  sidebarItems() {\n    return IndexPage.prototype.sidebarItems();\n  }\n\n  tagTileListView(pinned) {\n    return <ul className=\"TagTiles\">{pinned.map(this.tagTileView.bind(this))}</ul>;\n  }\n\n  tagTileView(tag) {\n    const lastPostedDiscussion = tag.lastPostedDiscussion();\n    const children = sortTags(tag.children() || []);\n\n    return (\n      <li className={classList('TagTile', { colored: tag.color() }, textContrastClass(tag.color()))} style={{ '--tag-bg': tag.color() }}>\n        <Link className=\"TagTile-info\" href={app.route.tag(tag)}>\n          {tag.icon() && tagIcon(tag, {}, { useColor: false })}\n          <h3 className=\"TagTile-name\">{tag.name()}</h3>\n          <p className=\"TagTile-description\">{tag.description()}</p>\n          {!!children && (\n            <div className=\"TagTile-children\">{children.map((child) => [<Link href={app.route.tag(child)}>{child.name()}</Link>, ' '])}</div>\n          )}\n        </Link>\n        {lastPostedDiscussion ? (\n          <Link className=\"TagTile-lastPostedDiscussion\" href={app.route.discussion(lastPostedDiscussion, lastPostedDiscussion.lastPostNumber())}>\n            <span className=\"TagTile-lastPostedDiscussion-title\">{lastPostedDiscussion.title()}</span>\n            {humanTime(lastPostedDiscussion.lastPostedAt())}\n          </Link>\n        ) : (\n          <span className=\"TagTile-lastPostedDiscussion\" />\n        )}\n      </li>\n    );\n  }\n\n  cloudView(cloud) {\n    return <div className=\"TagCloud\">{cloud.map((tag) => [tagLabel(tag, { link: true }), ' '])}</div>;\n  }\n}\n","import { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Separator from 'flarum/common/components/Separator';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nimport TagLinkButton from './components/TagLinkButton';\nimport TagsPage from './components/TagsPage';\nimport app from 'flarum/forum/app';\nimport sortTags from '../common/utils/sortTags';\n\nexport default function () {\n  // Add a link to the tags page, as well as a list of all the tags,\n  // to the index page's sidebar.\n  extend(IndexPage.prototype, 'navItems', function (items) {\n    items.add(\n      'tags',\n      <LinkButton icon=\"fas fa-th-large\" href={app.route('tags')}>\n        {app.translator.trans('flarum-tags.forum.index.tags_link')}\n      </LinkButton>,\n      -10\n    );\n\n    if (app.current.matches(TagsPage)) return;\n\n    items.add('separator', <Separator />, -12);\n\n    const params = app.search.stickyParams();\n    const tags = app.store.all('tags');\n    const currentTag = this.currentTag();\n\n    const addTag = (tag) => {\n      let active = currentTag === tag;\n\n      if (!active && currentTag) {\n        active = currentTag.parent() === tag;\n      }\n\n      // tag.name() is passed here as children even though it isn't used directly\n      // because when we need to get the active child in SelectDropdown, we need to\n      // use its children to populate the dropdown. The problem here is that `view`\n      // on TagLinkButton is only called AFTER SelectDropdown, so no children are available\n      // for SelectDropdown to use at the time.\n      items.add(\n        'tag' + tag.id(),\n        <TagLinkButton model={tag} params={params} active={active}>\n          {tag?.name()}\n        </TagLinkButton>,\n        -14\n      );\n    };\n\n    sortTags(tags)\n      .filter(\n        (tag) => tag.position() !== null && (!tag.isChild() || (currentTag && (tag.parent() === currentTag || tag.parent() === currentTag.parent())))\n      )\n      .forEach(addTag);\n\n    const more = tags.filter((tag) => tag.position() === null).sort((a, b) => b.discussionCount() - a.discussionCount());\n\n    more.splice(0, 3).forEach(addTag);\n\n    if (more.length) {\n      items.add('moreTags', <LinkButton href={app.route('tags')}>{app.translator.trans('flarum-tags.forum.index.more_link')}</LinkButton>, -16);\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/DiscussionListState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/GlobalSearchState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Component from 'flarum/common/Component';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport tagIcon from '../../common/helpers/tagIcon';\nimport classList from 'flarum/common/utils/classList';\n\nexport default class TagHero extends Component {\n  view() {\n    const tag = this.attrs.model;\n    const color = tag.color();\n\n    return (\n      <header\n        className={classList('Hero', 'TagHero', { 'TagHero--colored': color, [textContrastClass(color)]: color })}\n        style={color ? { '--hero-bg': color } : undefined}\n      >\n        <div className=\"container\">\n          <div className=\"containerNarrow\">\n            <h1 className=\"Hero-title\">\n              {tag.icon() && tagIcon(tag, {}, { useColor: false })} {tag.name()}\n            </h1>\n            <div className=\"Hero-subtitle\">{tag.description()}</div>\n          </div>\n        </div>\n      </header>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport type Mithril from 'mithril';\nimport { extend, override } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\nimport GlobalSearchState from 'flarum/forum/states/GlobalSearchState';\nimport classList from 'flarum/common/utils/classList';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\n\nimport TagHero from './components/TagHero';\nimport Tag from '../common/models/Tag';\nimport { ComponentAttrs } from 'flarum/common/Component';\n\nconst findTag = (slug: string) => app.store.all<Tag>('tags').find((tag) => tag.slug().localeCompare(slug, undefined, { sensitivity: 'base' }) === 0);\n\nexport default function () {\n  IndexPage.prototype.currentTag = function () {\n    if (this.currentActiveTag) {\n      return this.currentActiveTag;\n    }\n\n    const slug = app.search.params().tags;\n    let tag = null;\n\n    if (slug) {\n      tag = findTag(slug);\n    }\n\n    if ((slug && !tag) || (tag && !tag.isChild() && !tag.children())) {\n      if (this.currentTagLoading) {\n        return;\n      }\n\n      this.currentTagLoading = true;\n\n      // Unlike the backend, no need to fetch parent.children because if we're on\n      // a child tag page, then either:\n      //    - We loaded in that child tag (and its siblings) in the API document\n      //    - We first navigated to the current tag's parent, which would have loaded in the current tag's siblings.\n      app.store\n        .find('tags', slug, { include: 'children,children.parent,parent,state' })\n        .then(() => {\n          this.currentActiveTag = findTag(slug);\n\n          m.redraw();\n        })\n        .finally(() => {\n          this.currentTagLoading = false;\n        });\n    }\n\n    if (tag) {\n      this.currentActiveTag = tag;\n      return this.currentActiveTag;\n    }\n\n    return;\n  };\n\n  // If currently viewing a tag, insert a tag hero at the top of the view.\n  override(IndexPage.prototype, 'hero', function (original) {\n    const tag = this.currentTag();\n\n    if (tag) return <TagHero model={tag} />;\n\n    return original();\n  });\n\n  extend(IndexPage.prototype, 'view', function (vdom: Mithril.Vnode<ComponentAttrs, {}>) {\n    const tag = this.currentTag();\n\n    if (tag) vdom.attrs.className += ' IndexPage--tag' + tag.id();\n  });\n\n  extend(IndexPage.prototype, 'setTitle', function () {\n    const tag = this.currentTag();\n\n    if (tag) {\n      app.setTitle(tag.name());\n    }\n  });\n\n  // If currently viewing a tag, restyle the 'new discussion' button to use\n  // the tag's color, and disable if the user isn't allowed to edit.\n  extend(IndexPage.prototype, 'sidebarItems', function (items) {\n    const tag = this.currentTag();\n\n    if (tag) {\n      const color = tag.color();\n      const canStartDiscussion = tag.canStartDiscussion() || !app.session.user;\n      const newDiscussion = items.get('newDiscussion') as Mithril.Vnode<ComponentAttrs, {}>;\n\n      if (color) {\n        newDiscussion.attrs.className = classList([newDiscussion.attrs.className, 'Button--tagColored', textContrastClass(color)]);\n        newDiscussion.attrs.style = { '--color': color };\n      }\n\n      newDiscussion.attrs.disabled = !canStartDiscussion;\n      newDiscussion.children = app.translator.trans(\n        canStartDiscussion ? 'core.forum.index.start_discussion_button' : 'core.forum.index.cannot_start_discussion_button'\n      );\n    }\n  });\n\n  // Add a parameter for the global search state to pass on to the\n  // DiscussionListState that will let us filter discussions by tag.\n  extend(GlobalSearchState.prototype, 'params', function (params) {\n    params.tags = m.route.param('tags');\n  });\n\n  // Translate that parameter into a gambit appended to the search query.\n  extend(DiscussionListState.prototype, 'requestParams', function (this: DiscussionListState, params) {\n    if (typeof params.include === 'string') {\n      params.include = [params.include];\n    } else {\n      params.include?.push('tags', 'tags.parent');\n    }\n\n    if (this.params.tags) {\n      const filter = params.filter ?? {};\n      filter.tag = this.params.tags;\n      // TODO: replace this with a more robust system.\n      const q = filter.q;\n      if (q) {\n        filter.q = `${q} tag:${this.params.tags}`;\n      }\n      params.filter = filter;\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionListItem'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionHero'];","import extract from 'flarum/common/utils/extract';\nimport tagLabel from './tagLabel';\nimport sortTags from '../utils/sortTags';\nimport classList from 'flarum/common/utils/classList';\n\nexport default function tagsLabel(tags, attrs = {}) {\n  const children = [];\n  const { link, ...otherAttrs } = attrs;\n\n  otherAttrs.className = classList('TagsLabel', otherAttrs.className);\n\n  if (tags) {\n    sortTags(tags).forEach((tag) => {\n      if (tag || tags.length === 1) {\n        children.push(tagLabel(tag, { link }));\n      }\n    });\n  } else {\n    children.push(tagLabel());\n  }\n\n  return <span {...otherAttrs}>{children}</span>;\n}\n","import { extend } from 'flarum/common/extend';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport DiscussionHero from 'flarum/forum/components/DiscussionHero';\nimport textContrastClass from 'flarum/common/helpers/textContrastClass';\nimport classList from 'flarum/common/utils/classList';\n\nimport tagsLabel from '../common/helpers/tagsLabel';\nimport sortTags from '../common/utils/sortTags';\n\nexport default function () {\n  // Add tag labels to each discussion in the discussion list.\n  extend(DiscussionListItem.prototype, 'infoItems', function (items) {\n    const tags = this.attrs.discussion.tags();\n\n    if (tags && tags.length) {\n      items.add('tags', tagsLabel(tags), 10);\n    }\n  });\n\n  // Restyle a discussion's hero to use its first tag's color.\n  extend(DiscussionHero.prototype, 'view', function (view) {\n    const tags = sortTags(this.attrs.discussion.tags());\n\n    if (tags && tags.length) {\n      const color = tags[0].color();\n      if (color) {\n        view.attrs.style = { '--hero-bg': color };\n        view.attrs.className = classList(view.attrs.className, 'DiscussionHero--colored', textContrastClass(color));\n      }\n    }\n  });\n\n  // Add a list of a discussion's tags to the discussion hero, displayed\n  // before the title. Put the title on its own line.\n  extend(DiscussionHero.prototype, 'items', function (items) {\n    const tags = this.attrs.discussion.tags();\n\n    if (tags && tags.length) {\n      items.add('tags', tagsLabel(tags, { link: true }), 5);\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","export default function getSelectableTags(discussion) {\n  let tags = app.store.all('tags');\n\n  if (discussion) {\n    tags = tags.filter((tag) => tag.canAddToDiscussion() || discussion.tags().indexOf(tag) !== -1);\n  } else {\n    tags = tags.filter((tag) => tag.canStartDiscussion());\n  }\n\n  return tags;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/highlight'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/KeyboardNavigatable'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport classList from 'flarum/common/utils/classList';\n\n/**\n * @TODO move to core\n */\nexport default class ToggleButton extends Component {\n  view(vnode) {\n    const { className, isToggled, ...attrs } = this.attrs;\n    const icon = isToggled ? 'far fa-check-circle' : 'far fa-circle';\n\n    return (\n      <Button {...attrs} icon={icon} className={classList([className, isToggled && 'Button--toggled'])}>\n        {vnode.children}\n      </Button>\n    );\n  }\n}\n","import app from 'flarum/common/app';\nimport Button from 'flarum/common/components/Button';\nimport classList from 'flarum/common/utils/classList';\nimport extractText from 'flarum/common/utils/extractText';\nimport highlight from 'flarum/common/helpers/highlight';\nimport KeyboardNavigatable from 'flarum/common/utils/KeyboardNavigatable';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Modal from 'flarum/common/components/Modal';\nimport Stream from 'flarum/common/utils/Stream';\n\nimport sortTags from '../utils/sortTags';\nimport tagLabel from '../helpers/tagLabel';\nimport tagIcon from '../helpers/tagIcon';\nimport ToggleButton from '../../forum/components/ToggleButton';\n\nimport type Tag from '../models/Tag';\nimport type { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport type Mithril from 'mithril';\n\nexport interface ITagSelectionModalLimits {\n  /** Whether to allow bypassing the limits set here. This will show a toggle button to bypass limits. */\n  allowBypassing?: boolean;\n  /** Maximum number of primary/secondary tags allowed. */\n  max?: {\n    total?: number;\n    primary?: number;\n    secondary?: number;\n  };\n  /** Minimum number of primary/secondary tags to be selected. */\n  min?: {\n    total?: number;\n    primary?: number;\n    secondary?: number;\n  };\n}\n\nexport interface ITagSelectionModalAttrs extends IInternalModalAttrs {\n  /** Custom modal className to use. */\n  className?: string;\n  /** Modal title, defaults to 'Choose Tags'. */\n  title?: string;\n  /** Initial tag selection value. */\n  selectedTags?: Tag[];\n  /** Limits set based on minimum and maximum number of primary/secondary tags that can be selected. */\n  limits?: ITagSelectionModalLimits;\n  /** Whether to allow resetting the value. Defaults to true. */\n  allowResetting?: boolean;\n  /** Whether to require the parent tag of a selected tag to be selected as well. */\n  requireParentTag?: boolean;\n  /** Filter tags that can be selected. */\n  selectableTags?: (tags: Tag[]) => Tag[];\n  /** Whether a tag can be selected. */\n  canSelect: (tag: Tag) => boolean;\n  /** Callback for when a tag is selected. */\n  onSelect?: (tag: Tag, selected: Tag[]) => void;\n  /** Callback for when a tag is deselected. */\n  onDeselect?: (tag: Tag, selected: Tag[]) => void;\n  /** Callback for when the selection is submitted. */\n  onsubmit?: (selected: Tag[]) => void;\n}\n\nexport type ITagSelectionModalState = undefined;\n\nexport default class TagSelectionModal<\n  CustomAttrs extends ITagSelectionModalAttrs = ITagSelectionModalAttrs,\n  CustomState extends ITagSelectionModalState = ITagSelectionModalState\n> extends Modal<CustomAttrs, CustomState> {\n  protected loading = true;\n  protected tags!: Tag[];\n  protected selected: Tag[] = [];\n  protected bypassReqs: boolean = false;\n\n  protected filter = Stream('');\n  protected focused = false;\n  protected navigator = new KeyboardNavigatable();\n  protected indexTag?: Tag;\n\n  static initAttrs(attrs: ITagSelectionModalAttrs) {\n    super.initAttrs(attrs);\n\n    // Default values for optional attributes.\n    attrs.title ||= extractText(app.translator.trans('flarum-tags.lib.tag_selection_modal.title'));\n    attrs.canSelect ||= () => true;\n    attrs.allowResetting ??= true;\n    attrs.limits = {\n      min: {\n        total: attrs.limits?.min?.total ?? -Infinity,\n        primary: attrs.limits?.min?.primary ?? -Infinity,\n        secondary: attrs.limits?.min?.secondary ?? -Infinity,\n      },\n      max: {\n        total: attrs.limits?.max?.total ?? Infinity,\n        primary: attrs.limits?.max?.primary ?? Infinity,\n        secondary: attrs.limits?.max?.secondary ?? Infinity,\n      },\n    };\n\n    // Prevent illogical limits from being provided.\n    catchInvalidLimits(attrs.limits);\n  }\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.navigator\n      .onUp(() => this.setIndex(this.getCurrentNumericIndex() - 1, true))\n      .onDown(() => this.setIndex(this.getCurrentNumericIndex() + 1, true))\n      .onSelect(this.select.bind(this))\n      .onRemove(() => this.selected.splice(this.selected.length - 1, 1));\n\n    app.tagList.load(['parent']).then((tags) => {\n      this.loading = false;\n\n      if (this.attrs.selectableTags) {\n        tags = this.attrs.selectableTags(tags);\n      }\n\n      this.tags = sortTags(tags);\n\n      if (this.attrs.selectedTags) {\n        this.attrs.selectedTags.map(this.addTag.bind(this));\n      }\n\n      this.indexTag = tags[0];\n\n      m.redraw();\n    });\n  }\n\n  className() {\n    return classList('TagSelectionModal', this.attrs.className);\n  }\n\n  title() {\n    return this.attrs.title;\n  }\n\n  content() {\n    if (this.loading || !this.tags) {\n      return <LoadingIndicator />;\n    }\n\n    const filter = this.filter().toLowerCase();\n    const primaryCount = this.primaryCount();\n    const secondaryCount = this.secondaryCount();\n    const tags = this.getFilteredTags();\n\n    const inputWidth = Math.max(extractText(this.getInstruction(primaryCount, secondaryCount)).length, this.filter().length);\n\n    return [\n      <div className=\"Modal-body\">\n        <div className=\"TagSelectionModal-form\">\n          <div className=\"TagSelectionModal-form-input\">\n            <div className={'TagsInput FormControl ' + (this.focused ? 'focus' : '')} onclick={() => this.$('.TagsInput input').focus()}>\n              <span className=\"TagsInput-selected\">\n                {this.selected.map((tag) => (\n                  <span\n                    className=\"TagsInput-tag\"\n                    onclick={() => {\n                      this.removeTag(tag);\n                      this.onready();\n                    }}\n                  >\n                    {tagLabel(tag)}\n                  </span>\n                ))}\n              </span>\n              <input\n                className=\"FormControl\"\n                placeholder={extractText(this.getInstruction(primaryCount, secondaryCount))}\n                bidi={this.filter}\n                style={{ width: inputWidth + 'ch' }}\n                onkeydown={this.navigator.navigate.bind(this.navigator)}\n                onfocus={() => (this.focused = true)}\n                onblur={() => (this.focused = false)}\n              />\n            </div>\n          </div>\n          <div className=\"TagSelectionModal-form-submit App-primaryControl\">\n            <Button\n              type=\"submit\"\n              className=\"Button Button--primary\"\n              disabled={!this.meetsRequirements(primaryCount, secondaryCount)}\n              icon=\"fas fa-check\"\n            >\n              {app.translator.trans('flarum-tags.lib.tag_selection_modal.submit_button')}\n            </Button>\n          </div>\n        </div>\n      </div>,\n\n      <div className=\"Modal-footer\">\n        <ul className=\"TagSelectionModal-list SelectTagList\">\n          {tags.map((tag) => (\n            <li\n              data-index={tag.id()}\n              className={classList({\n                pinned: tag.position() !== null,\n                child: !!tag.parent(),\n                colored: !!tag.color(),\n                selected: this.selected.includes(tag),\n                active: this.indexTag === tag,\n              })}\n              style={{ color: tag.color() }}\n              onmouseover={() => (this.indexTag = tag)}\n              onclick={this.toggleTag.bind(this, tag)}\n            >\n              {tagIcon(tag)}\n              <span className=\"SelectTagListItem-name\">{highlight(tag.name(), filter)}</span>\n              {tag.description() ? <span className=\"SelectTagListItem-description\">{tag.description()}</span> : ''}\n            </li>\n          ))}\n        </ul>\n        {this.attrs.limits!.allowBypassing && (\n          <div className=\"TagSelectionModal-controls\">\n            <ToggleButton className=\"Button\" onclick={() => (this.bypassReqs = !this.bypassReqs)} isToggled={this.bypassReqs}>\n              {app.translator.trans('flarum-tags.lib.tag_selection_modal.bypass_requirements')}\n            </ToggleButton>\n          </div>\n        )}\n      </div>,\n    ];\n  }\n\n  /**\n   * Filters the available tags on every state change.\n   */\n  private getFilteredTags(): Tag[] {\n    const filter = this.filter().toLowerCase();\n    const primaryCount = this.primaryCount();\n    const secondaryCount = this.secondaryCount();\n    let tags = this.tags;\n\n    if (this.attrs.requireParentTag) {\n      // Filter out all child tags whose parents have not been selected. This\n      // makes it impossible to select a child if its parent hasn't been selected.\n      tags = tags.filter((tag) => {\n        const parent = tag.parent();\n        return parent !== null && (parent === false || this.selected.includes(parent));\n      });\n    }\n\n    if (!this.bypassReqs) {\n      // If we reached the total maximum number of tags, we can't select anymore.\n      if (this.selected.length >= this.attrs.limits!.max!.total!) {\n        tags = tags.filter((tag) => this.selected.includes(tag));\n      }\n      // If the number of selected primary/secondary tags is at the maximum, then\n      // we'll filter out all other tags of that type.\n      else {\n        if (primaryCount >= this.attrs.limits!.max!.primary!) {\n          tags = tags.filter((tag) => !tag.isPrimary() || this.selected.includes(tag));\n        }\n        if (secondaryCount >= this.attrs.limits!.max!.secondary!) {\n          tags = tags.filter((tag) => tag.isPrimary() || this.selected.includes(tag));\n        }\n      }\n    }\n\n    // If the user has entered text in the filter input, then filter by tags\n    // whose name matches what they've entered.\n    if (filter) {\n      tags = tags.filter((tag) => tag.name().toLowerCase().includes(filter));\n    }\n\n    if (!this.indexTag || !tags.includes(this.indexTag)) this.indexTag = tags[0];\n\n    return tags;\n  }\n\n  /**\n   * Counts the number of selected primary tags.\n   */\n  protected primaryCount(): number {\n    return this.selected.filter((tag) => tag.isPrimary()).length;\n  }\n\n  /**\n   * Counts the number of selected secondary tags.\n   */\n  protected secondaryCount(): number {\n    return this.selected.filter((tag) => !tag.isPrimary()).length;\n  }\n\n  /**\n   * Validates the number of selected primary/secondary tags against the set min max limits.\n   */\n  protected meetsRequirements(primaryCount: number, secondaryCount: number) {\n    if (this.bypassReqs || (this.attrs.allowResetting && this.selected.length === 0)) {\n      return true;\n    }\n\n    if (this.selected.length < this.attrs.limits!.min!.total!) {\n      return false;\n    }\n\n    return primaryCount >= this.attrs.limits!.min!.primary! && secondaryCount >= this.attrs.limits!.min!.secondary!;\n  }\n\n  /**\n   * Add the given tag to the list of selected tags.\n   */\n  protected addTag(tag: Tag | undefined) {\n    if (!tag || !this.attrs.canSelect(tag)) return;\n\n    if (this.attrs.onSelect) {\n      this.attrs.onSelect(tag, this.selected);\n    }\n\n    // If this tag has a parent, we'll also need to add the parent tag to the\n    // selected list if it's not already in there.\n    if (this.attrs.requireParentTag) {\n      const parent = tag.parent();\n      if (parent && !this.selected.includes(parent)) {\n        this.selected.push(parent);\n      }\n    }\n\n    if (!this.selected.includes(tag)) {\n      this.selected.push(tag);\n    }\n  }\n\n  /**\n   * Remove the given tag from the list of selected tags.\n   */\n  protected removeTag(tag: Tag) {\n    const index = this.selected.indexOf(tag);\n\n    if (index !== -1) {\n      this.selected.splice(index, 1);\n\n      // Look through the list of selected tags for any tags which have the tag\n      // we just removed as their parent. We'll need to remove them too.\n      if (this.attrs.requireParentTag) {\n        this.selected.filter((t) => t.parent() === tag).forEach(this.removeTag.bind(this));\n      }\n\n      if (this.attrs.onDeselect) {\n        this.attrs.onDeselect(tag, this.selected);\n      }\n    }\n  }\n\n  protected toggleTag(tag: Tag) {\n    // Won't happen, needed for type safety.\n    if (!this.tags) return;\n\n    if (this.selected.includes(tag)) {\n      this.removeTag(tag);\n    } else {\n      this.addTag(tag);\n    }\n\n    if (this.filter()) {\n      this.filter('');\n      this.indexTag = this.tags[0];\n    }\n\n    this.onready();\n  }\n\n  /**\n   * Gives human text instructions based on the current number of selected tags and set limits.\n   */\n  protected getInstruction(primaryCount: number, secondaryCount: number) {\n    if (this.bypassReqs) {\n      return '';\n    }\n\n    if (primaryCount < this.attrs.limits!.min!.primary!) {\n      const remaining = this.attrs.limits!.min!.primary! - primaryCount;\n      return extractText(app.translator.trans('flarum-tags.lib.tag_selection_modal.choose_primary_placeholder', { count: remaining }));\n    } else if (secondaryCount < this.attrs.limits!.min!.secondary!) {\n      const remaining = this.attrs.limits!.min!.secondary! - secondaryCount;\n      return extractText(app.translator.trans('flarum-tags.lib.tag_selection_modal.choose_secondary_placeholder', { count: remaining }));\n    } else if (this.selected.length < this.attrs.limits!.min!.total!) {\n      const remaining = this.attrs.limits!.min!.total! - this.selected.length;\n      return extractText(app.translator.trans('flarum-tags.lib.tag_selection_modal.choose_tags_placeholder', { count: remaining }));\n    }\n\n    return '';\n  }\n\n  /**\n   * Submit tag selection.\n   */\n  onsubmit(e: SubmitEvent) {\n    e.preventDefault();\n\n    if (this.attrs.onsubmit) this.attrs.onsubmit(this.selected);\n\n    this.hide();\n  }\n\n  protected select(e: KeyboardEvent) {\n    // Ctrl + Enter submits the selection, just Enter completes the current entry\n    if (e.metaKey || e.ctrlKey || (this.indexTag && this.selected.includes(this.indexTag))) {\n      if (this.selected.length) {\n        // The DOM submit method doesn't emit a `submit event, so we\n        // simulate a manual submission so our `onsubmit` logic is run.\n        this.$('button[type=\"submit\"]').click();\n      }\n    } else if (this.indexTag) {\n      this.getItem(this.indexTag)[0].dispatchEvent(new Event('click'));\n    }\n  }\n\n  protected selectableItems() {\n    return this.$('.TagSelectionModal-list > li');\n  }\n\n  protected getCurrentNumericIndex() {\n    if (!this.indexTag) return -1;\n\n    return this.selectableItems().index(this.getItem(this.indexTag));\n  }\n\n  protected getItem(selectedTag: Tag) {\n    return this.selectableItems().filter(`[data-index=\"${selectedTag.id()}\"]`);\n  }\n\n  protected setIndex(index: number, scrollToItem: boolean) {\n    const $items = this.selectableItems();\n    const $dropdown = $items.parent();\n\n    if (index < 0) {\n      index = $items.length - 1;\n    } else if (index >= $items.length) {\n      index = 0;\n    }\n\n    const $item = $items.eq(index);\n\n    this.indexTag = app.store.getById('tags', $item.attr('data-index')!);\n\n    m.redraw();\n\n    if (scrollToItem && this.indexTag) {\n      const dropdownScroll = $dropdown.scrollTop()!;\n      const dropdownTop = $dropdown.offset()!.top;\n      const dropdownBottom = dropdownTop + $dropdown.outerHeight()!;\n      const itemTop = $item.offset()!.top;\n      const itemBottom = itemTop + $item.outerHeight()!;\n\n      let scrollTop;\n      if (itemTop < dropdownTop) {\n        scrollTop = dropdownScroll - dropdownTop + itemTop - parseInt($dropdown.css('padding-top'), 10);\n      } else if (itemBottom > dropdownBottom) {\n        scrollTop = dropdownScroll - dropdownBottom + itemBottom + parseInt($dropdown.css('padding-bottom'), 10);\n      }\n\n      if (typeof scrollTop !== 'undefined') {\n        $dropdown.stop(true).animate({ scrollTop }, 100);\n      }\n    }\n  }\n}\n\n/**\n * Catch invalid limits provided to the tag selection modal.\n */\nfunction catchInvalidLimits(limits: ITagSelectionModalLimits) {\n  if (limits.min!.primary! > limits.max!.primary!) {\n    throw new Error('The minimum number of primary tags allowed cannot be more than the maximum number of primary tags allowed.');\n  }\n\n  if (limits.min!.secondary! > limits.max!.secondary!) {\n    throw new Error('The minimum number of secondary tags allowed cannot be more than the maximum number of secondary tags allowed.');\n  }\n\n  if (limits.min!.total! > limits.max!.primary! + limits.max!.secondary!) {\n    throw new Error('The minimum number of tags allowed cannot be more than the maximum number of primary and secondary tags allowed together.');\n  }\n\n  if (limits.max!.total! < limits.min!.primary! + limits.min!.secondary!) {\n    throw new Error('The maximum number of tags allowed cannot be less than the minimum number of primary and secondary tags allowed together.');\n  }\n\n  if (limits.min!.total! > limits.max!.total!) {\n    throw new Error('The minimum number of tags allowed cannot be more than the maximum number of tags allowed.');\n  }\n}\n","import app from 'flarum/forum/app';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport classList from 'flarum/common/utils/classList';\nimport extractText from 'flarum/common/utils/extractText';\n\nimport getSelectableTags from '../utils/getSelectableTags';\nimport TagSelectionModal, { ITagSelectionModalAttrs } from '../../common/components/TagSelectionModal';\n\nimport type Discussion from 'flarum/common/models/Discussion';\nimport type Tag from '../../common/models/Tag';\n\nexport interface TagDiscussionModalAttrs extends ITagSelectionModalAttrs {\n  discussion?: Discussion;\n}\n\nexport default class TagDiscussionModal extends TagSelectionModal<TagDiscussionModalAttrs> {\n  static initAttrs(attrs: TagDiscussionModalAttrs) {\n    super.initAttrs(attrs);\n\n    const title = attrs.discussion\n      ? app.translator.trans('flarum-tags.forum.choose_tags.edit_title', { title: <em>{attrs.discussion.title()}</em> })\n      : app.translator.trans('flarum-tags.forum.choose_tags.title');\n\n    attrs.className = classList(attrs.className, 'TagDiscussionModal');\n    attrs.title = extractText(title);\n    attrs.allowResetting = !!app.forum.attribute('canBypassTagCounts');\n    attrs.limits = {\n      allowBypassing: attrs.allowResetting,\n      max: {\n        primary: app.forum.attribute<number>('maxPrimaryTags'),\n        secondary: app.forum.attribute<number>('maxSecondaryTags'),\n      },\n      min: {\n        primary: app.forum.attribute<number>('minPrimaryTags'),\n        secondary: app.forum.attribute<number>('minSecondaryTags'),\n      },\n    };\n    attrs.requireParentTag = true;\n    attrs.selectableTags = () => getSelectableTags(attrs.discussion);\n    attrs.selectedTags ??= (attrs.discussion?.tags() as Tag[]) || [];\n    attrs.canSelect = (tag) => tag.canStartDiscussion();\n\n    const suppliedOnsubmit = attrs.onsubmit || null;\n\n    // Save changes.\n    attrs.onsubmit = function (tags) {\n      const discussion = attrs.discussion;\n\n      if (discussion) {\n        discussion.save({ relationships: { tags } }).then(() => {\n          if (app.current.matches(DiscussionPage)) {\n            app.current.get('stream').update();\n          }\n\n          m.redraw();\n        });\n      }\n\n      if (suppliedOnsubmit) suppliedOnsubmit(tags);\n    };\n  }\n}\n","import { extend } from 'flarum/common/extend';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport Button from 'flarum/common/components/Button';\n\nimport TagDiscussionModal from './components/TagDiscussionModal';\n\nexport default function () {\n  // Add a control allowing the discussion to be moved to another category.\n  extend(DiscussionControls, 'moderationControls', function (items, discussion) {\n    if (discussion.canTag()) {\n      items.add(\n        'tags',\n        <Button icon=\"fas fa-tag\" onclick={() => app.modal.show(TagDiscussionModal, { discussion })}>\n          {app.translator.trans('flarum-tags.forum.discussion_controls.edit_tags_button')}\n        </Button>\n      );\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionComposer'];","import { extend, override } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\nimport classList from 'flarum/common/utils/classList';\n\nimport TagDiscussionModal from './components/TagDiscussionModal';\nimport tagsLabel from '../common/helpers/tagsLabel';\nimport getSelectableTags from './utils/getSelectableTags';\n\nexport default function () {\n  extend(IndexPage.prototype, 'newDiscussionAction', function (promise) {\n    // From `addTagFilter\n    const tag = this.currentTag();\n\n    if (tag) {\n      const parent = tag.parent();\n      const tags = parent ? [parent, tag] : [tag];\n      promise.then((composer) => (composer.fields.tags = tags));\n    } else {\n      app.composer.fields.tags = [];\n    }\n  });\n\n  extend(DiscussionComposer.prototype, 'oninit', function () {\n    app.tagList.load(['parent']).then(() => m.redraw());\n  });\n\n  // Add tag-selection abilities to the discussion composer.\n  DiscussionComposer.prototype.chooseTags = function () {\n    const selectableTags = getSelectableTags();\n\n    if (!selectableTags.length) return;\n\n    app.modal.show(TagDiscussionModal, {\n      selectedTags: (this.composer.fields.tags || []).slice(0),\n      onsubmit: (tags) => {\n        this.composer.fields.tags = tags;\n        this.$('textarea').focus();\n      },\n    });\n  };\n\n  // Add a tag-selection menu to the discussion composer's header, after the\n  // title.\n  extend(DiscussionComposer.prototype, 'headerItems', function (items) {\n    const tags = this.composer.fields.tags || [];\n    const selectableTags = getSelectableTags();\n\n    items.add(\n      'tags',\n      <a className={classList(['DiscussionComposer-changeTags', !selectableTags.length && 'disabled'])} onclick={this.chooseTags.bind(this)}>\n        {tags.length ? (\n          tagsLabel(tags)\n        ) : (\n          <span className=\"TagLabel untagged\">{app.translator.trans('flarum-tags.forum.composer_discussion.choose_tags_link')}</span>\n        )}\n      </a>,\n      10\n    );\n  });\n\n  override(DiscussionComposer.prototype, 'onsubmit', function (original) {\n    const chosenTags = this.composer.fields.tags || [];\n    const chosenPrimaryTags = chosenTags.filter((tag) => tag.position() !== null && !tag.isChild());\n    const chosenSecondaryTags = chosenTags.filter((tag) => tag.position() === null);\n    const selectableTags = getSelectableTags();\n\n    const minPrimaryTags = parseInt(app.forum.attribute('minPrimaryTags'));\n    const minSecondaryTags = parseInt(app.forum.attribute('minSecondaryTags'));\n    const maxPrimaryTags = parseInt(app.forum.attribute('maxPrimaryTags'));\n    const maxSecondaryTags = parseInt(app.forum.attribute('maxSecondaryTags'));\n\n    if (\n      ((!chosenTags.length && maxPrimaryTags !== 0 && maxSecondaryTags !== 0) ||\n        chosenPrimaryTags.length < minPrimaryTags ||\n        chosenSecondaryTags.length < minSecondaryTags) &&\n      selectableTags.length\n    ) {\n      app.modal.show(TagDiscussionModal, {\n        selectedTags: chosenTags,\n        onsubmit: (tags) => {\n          this.composer.fields.tags = tags;\n          original();\n        },\n      });\n    } else {\n      original();\n    }\n  });\n\n  // Add the selected tags as data to submit to the server.\n  extend(DiscussionComposer.prototype, 'data', function (data) {\n    data.relationships = data.relationships || {};\n    data.relationships.tags = this.composer.fields.tags;\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/EventPost'];","import EventPost from 'flarum/forum/components/EventPost';\nimport tagsLabel from '../../common/helpers/tagsLabel';\n\nexport default class DiscussionTaggedPost extends EventPost {\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    const oldTags = attrs.post.content()[0];\n    const newTags = attrs.post.content()[1];\n\n    function diffTags(tags1, tags2) {\n      return tags1.filter((tag) => tags2.indexOf(tag) === -1).map((id) => app.store.getById('tags', id));\n    }\n\n    attrs.tagsAdded = diffTags(newTags, oldTags);\n    attrs.tagsRemoved = diffTags(oldTags, newTags);\n  }\n\n  icon() {\n    return 'fas fa-tag';\n  }\n\n  descriptionKey() {\n    if (this.attrs.tagsAdded.length) {\n      if (this.attrs.tagsRemoved.length) {\n        return 'flarum-tags.forum.post_stream.added_and_removed_tags_text';\n      }\n\n      return 'flarum-tags.forum.post_stream.added_tags_text';\n    }\n\n    return 'flarum-tags.forum.post_stream.removed_tags_text';\n  }\n\n  descriptionData() {\n    const data = {};\n\n    if (this.attrs.tagsAdded.length) {\n      data.tagsAdded = app.translator.trans('flarum-tags.forum.post_stream.tags_text', {\n        tags: tagsLabel(this.attrs.tagsAdded, { link: true }),\n        count: this.attrs.tagsAdded.length,\n      });\n    }\n\n    if (this.attrs.tagsRemoved.length) {\n      data.tagsRemoved = app.translator.trans('flarum-tags.forum.post_stream.tags_text', {\n        tags: tagsLabel(this.attrs.tagsRemoved, { link: true }),\n        count: this.attrs.tagsRemoved.length,\n      });\n    }\n\n    return data;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/computed'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import computed from 'flarum/common/utils/computed';\nimport Model from 'flarum/common/Model';\nimport type Discussion from 'flarum/common/models/Discussion';\n\nexport default class Tag extends Model {\n  name() {\n    return Model.attribute<string>('name').call(this);\n  }\n  slug() {\n    return Model.attribute<string>('slug').call(this);\n  }\n  description() {\n    return Model.attribute<string | null>('description').call(this);\n  }\n\n  color() {\n    return Model.attribute<string | null>('color').call(this);\n  }\n  backgroundUrl() {\n    return Model.attribute<string | null>('backgroundUrl').call(this);\n  }\n  backgroundMode() {\n    return Model.attribute<string | null>('backgroundMode').call(this);\n  }\n  icon() {\n    return Model.attribute<string | null>('icon').call(this);\n  }\n\n  position() {\n    return Model.attribute<number | null>('position').call(this);\n  }\n  parent() {\n    return Model.hasOne<Tag | null>('parent').call(this);\n  }\n  children() {\n    return Model.hasMany<Tag>('children').call(this);\n  }\n  defaultSort() {\n    return Model.attribute<string | null>('defaultSort').call(this);\n  }\n  isChild() {\n    return Model.attribute<boolean>('isChild').call(this);\n  }\n  isHidden() {\n    return Model.attribute<boolean>('isHidden').call(this);\n  }\n\n  discussionCount() {\n    return Model.attribute<number>('discussionCount').call(this);\n  }\n  lastPostedAt() {\n    return Model.attribute('lastPostedAt', Model.transformDate).call(this);\n  }\n  lastPostedDiscussion() {\n    return Model.hasOne<Discussion | null>('lastPostedDiscussion').call(this);\n  }\n\n  isRestricted() {\n    return Model.attribute<boolean>('isRestricted').call(this);\n  }\n  canStartDiscussion() {\n    return Model.attribute<boolean>('canStartDiscussion').call(this);\n  }\n  canAddToDiscussion() {\n    return Model.attribute<boolean>('canAddToDiscussion').call(this);\n  }\n\n  isPrimary() {\n    return computed<boolean, this>('position', 'parent', (position, parent) => position !== null && parent === false).call(this);\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport Tag from './models/Tag';\n\nexport default [\n  new Extend.Store() //\n    .add('tags', Tag),\n];\n","import app from 'flarum/forum/app';\nimport Extend from 'flarum/common/extenders';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Discussion from 'flarum/common/models/Discussion';\nimport DiscussionTaggedPost from './components/DiscussionTaggedPost';\nimport TagsPage from './components/TagsPage';\nimport Tag from '../common/models/Tag';\n\nimport commonExtend from '../common/extend';\n\nexport default [\n  ...commonExtend,\n\n  new Extend.Routes() //\n    .add('tags', '/tags', TagsPage) //\n    .add('tag', '/t/:tags', IndexPage) //\n    .helper('tag', (tag) => app.route('tag', { tags: tag.slug() })),\n\n  new Extend.PostTypes() //\n    .add('discussionTagged', DiscussionTaggedPost),\n\n  new Extend.Model(Discussion) //\n    .hasMany<Tag>('tags') //\n    .attribute<boolean>('canTag'),\n];\n","import sortTags from './utils/sortTags';\nimport Tag from './models/Tag';\nimport tagsLabel from './helpers/tagsLabel';\nimport tagIcon from './helpers/tagIcon';\nimport tagLabel from './helpers/tagLabel';\nimport TagSelectionModal from './components/TagSelectionModal';\nimport TagListState from './states/TagListState';\n\nexport default {\n  'tags/utils/sortTags': sortTags,\n  'tags/models/Tag': Tag,\n  'tags/helpers/tagsLabel': tagsLabel,\n  'tags/helpers/tagIcon': tagIcon,\n  'tags/helpers/tagLabel': tagLabel,\n  'tags/components/TagSelectionModal': TagSelectionModal,\n  'tags/states/TagListState': TagListState,\n};\n","import compat from '../common/compat';\n\nimport addTagFilter from './addTagFilter';\nimport addTagControl from './addTagControl';\nimport TagHero from './components/TagHero';\nimport TagDiscussionModal from './components/TagDiscussionModal';\nimport TagsPage from './components/TagsPage';\nimport DiscussionTaggedPost from './components/DiscussionTaggedPost';\nimport TagLinkButton from './components/TagLinkButton';\nimport addTagList from './addTagList';\nimport addTagLabels from './addTagLabels';\nimport addTagComposer from './addTagComposer';\nimport getSelectableTags from './utils/getSelectableTags';\n\nexport default Object.assign(compat, {\n  'tags/addTagFilter': addTagFilter,\n  'tags/addTagControl': addTagControl,\n  'tags/components/TagHero': TagHero,\n  'tags/components/TagDiscussionModal': TagDiscussionModal,\n  'tags/components/TagsPage': TagsPage,\n  'tags/components/DiscussionTaggedPost': DiscussionTaggedPost,\n  'tags/components/TagLinkButton': TagLinkButton,\n  'tags/addTagList': addTagList,\n  'tags/addTagLabels': addTagLabels,\n  'tags/addTagComposer': addTagComposer,\n  'tags/utils/getSelectableTags': getSelectableTags,\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core;","import app from 'flarum/forum/app';\n\nimport TagListState from '../common/states/TagListState';\n\nimport addTagList from './addTagList';\nimport addTagFilter from './addTagFilter';\nimport addTagLabels from './addTagLabels';\nimport addTagControl from './addTagControl';\nimport addTagComposer from './addTagComposer';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('flarum-tags', function () {\n  app.tagList = new TagListState();\n\n  addTagList();\n  addTagFilter();\n  addTagLabels();\n  addTagControl();\n  addTagComposer();\n});\n\n// Expose compat API\nimport tagsCompat from './compat';\nimport { compat } from '@flarum/core/forum';\n\nObject.assign(compat, tagsCompat);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["flarum","core","compat","_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","value","arg","input","hint","prim","toPrimitive","undefined","res","call","TypeError","String","toPropertyKey","Object","defineProperty","enumerable","configurable","writable","TagListState","async","includes","this","loadedIncludes","query","unloadedIncludes","filter","include","has","length","Promise","resolve","app","Set","join","then","val","forEach","add","tagIcon","tag","attrs","settings","hasIcon","icon","useColor","className","classList","style","color","m","TagLinkButton","LinkButton","view","vnode","model","description","child","isChild","Link","href","route","title","name","translator","trans","static","super","initAttrs","params","tags","slug","tagLabel","link","extract","tagText","textContrastClass","sortTags","slice","sort","a","b","aPos","position","bPos","discussionCount","aParent","parent","bParent","TagsPage","Page","oninit","history","push","preloaded","preloadedApiDocument","loading","tagList","load","store","all","redraw","oncreate","setTitle","setTitleCount","pageContent","toArray","items","ItemList","hero","mainContent","sidebar","content","contentItems","LoadingIndicator","pinned","cloud","tagTileListView","cloudView","IndexPage","listItems","sidebarItems","map","tagTileView","bind","lastPostedDiscussion","children","colored","discussion","lastPostNumber","humanTime","lastPostedAt","extend","Separator","currentTag","addTag","active","id","more","splice","TagHero","Component","findTag","find","localeCompare","sensitivity","currentActiveTag","currentTagLoading","finally","override","original","vdom","canStartDiscussion","newDiscussion","get","disabled","GlobalSearchState","param","DiscussionListState","_params$include","_params$filter","q","concat","tagsLabel","otherAttrs","DiscussionListItem","DiscussionHero","getSelectableTags","canAddToDiscussion","indexOf","ToggleButton","isToggled","Button","assign","TagSelectionModal","Modal","arguments","Stream","KeyboardNavigatable","_attrs$limits$min$tot","_attrs$limits","_attrs$limits$min","_attrs$limits$min$pri","_attrs$limits2","_attrs$limits2$min","_attrs$limits$min$sec","_attrs$limits3","_attrs$limits3$min","_attrs$limits$max$tot","_attrs$limits4","_attrs$limits4$max","_attrs$limits$max$pri","_attrs$limits5","_attrs$limits5$max","_attrs$limits$max$sec","_attrs$limits6","_attrs$limits6$max","extractText","canSelect","allowResetting","limits","min","total","primary","secondary","max","Infinity","Error","catchInvalidLimits","navigator","onUp","setIndex","getCurrentNumericIndex","onDown","onSelect","select","onRemove","selected","selectableTags","selectedTags","indexTag","toLowerCase","primaryCount","secondaryCount","getFilteredTags","inputWidth","Math","getInstruction","focused","onclick","$","focus","removeTag","onready","placeholder","bidi","width","onkeydown","navigate","onfocus","onblur","type","meetsRequirements","onmouseover","toggleTag","highlight","allowBypassing","bypassReqs","requireParentTag","isPrimary","index","t","onDeselect","remaining","count","onsubmit","e","preventDefault","hide","metaKey","ctrlKey","click","getItem","dispatchEvent","Event","selectableItems","selectedTag","scrollToItem","$items","$dropdown","$item","eq","attr","dropdownScroll","scrollTop","dropdownTop","offset","top","dropdownBottom","outerHeight","itemTop","itemBottom","parseInt","css","stop","animate","TagDiscussionModal","_attrs$discussion","suppliedOnsubmit","save","relationships","DiscussionPage","update","DiscussionControls","canTag","modal","show","promise","composer","fields","DiscussionComposer","chooseTags","chosenTags","chosenPrimaryTags","chosenSecondaryTags","minPrimaryTags","forum","attribute","minSecondaryTags","maxPrimaryTags","maxSecondaryTags","data","DiscussionTaggedPost","EventPost","oldTags","post","newTags","diffTags","tags1","tags2","getById","tagsAdded","tagsRemoved","descriptionKey","descriptionData","Tag","Model","backgroundUrl","backgroundMode","defaultSort","isHidden","isRestricted","computed","Extend","helper","Discussion","hasMany","addTagFilter","addTagControl","addTagList","addTagLabels","addTagComposer","tagsCompat","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","n","getter","__esModule","d","definition","o","prop","hasOwnProperty","r","toStringTag"],"sourceRoot":""}