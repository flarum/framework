{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@flarum/tags/external root \"flarum.core.compat['forum/app']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/Model']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@flarum/tags/../../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@flarum/tags/../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@flarum/tags/./src/common/models/Tag.ts","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Page']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Link']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@flarum/tags/./src/common/helpers/tagIcon.js","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/extract']\"","webpack://@flarum/tags/./src/common/helpers/tagLabel.js","webpack://@flarum/tags/./src/common/utils/sortTags.tsx","webpack://@flarum/tags/./src/forum/components/TagsPage.js","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/EventPost']\"","webpack://@flarum/tags/./src/common/helpers/tagsLabel.js","webpack://@flarum/tags/./src/forum/components/DiscussionTaggedPost.js","webpack://@flarum/tags/../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@flarum/tags/./src/forum/states/TagListState.ts","webpack://@flarum/tags/external root \"flarum.core.compat['common/extend']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Separator']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@flarum/tags/./src/forum/components/TagLinkButton.js","webpack://@flarum/tags/./src/forum/addTagList.js","webpack://@flarum/tags/external root \"flarum.core.compat['forum/states/DiscussionListState']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/states/GlobalSearchState']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/Component']\"","webpack://@flarum/tags/./src/forum/components/TagHero.js","webpack://@flarum/tags/./src/forum/addTagFilter.tsx","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionHero']\"","webpack://@flarum/tags/./src/forum/addTagLabels.js","webpack://@flarum/tags/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Button']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@flarum/tags/external root \"flarum.core.compat['forum/utils/KeyboardNavigatable']\"","webpack://@flarum/tags/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@flarum/tags/./src/forum/utils/getSelectableTags.js","webpack://@flarum/tags/./src/forum/components/ToggleButton.js","webpack://@flarum/tags/../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://@flarum/tags/./src/forum/components/TagDiscussionModal.tsx","webpack://@flarum/tags/./src/forum/addTagControl.js","webpack://@flarum/tags/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@flarum/tags/./src/forum/addTagComposer.js","webpack://@flarum/tags/./src/common/compat.js","webpack://@flarum/tags/./src/forum/compat.js","webpack://@flarum/tags/external assign \"flarum.core\"","webpack://@flarum/tags/./src/forum/index.ts","webpack://@flarum/tags/../../../node_modules/@babel/runtime/regenerator/index.js","webpack://@flarum/tags/../../../node_modules/regenerator-runtime/runtime.js","webpack://@flarum/tags/webpack/bootstrap","webpack://@flarum/tags/webpack/runtime/compat get default export","webpack://@flarum/tags/webpack/runtime/define property getters","webpack://@flarum/tags/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/tags/webpack/runtime/make namespace object"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/computed'];","import computed from 'flarum/common/utils/computed';\nimport Model from 'flarum/common/Model';\nimport type Discussion from 'flarum/common/models/Discussion';\n\nexport default class Tag extends Model {\n  name() {\n    return Model.attribute<string>('name').call(this);\n  }\n  slug() {\n    return Model.attribute<string>('slug').call(this);\n  }\n  description() {\n    return Model.attribute<string | null>('description').call(this);\n  }\n\n  color() {\n    return Model.attribute<string | null>('color').call(this);\n  }\n  backgroundUrl() {\n    return Model.attribute<string | null>('backgroundUrl').call(this);\n  }\n  backgroundMode() {\n    return Model.attribute<string | null>('backgroundMode').call(this);\n  }\n  icon() {\n    return Model.attribute<string | null>('icon').call(this);\n  }\n\n  position() {\n    return Model.attribute<number | null>('position').call(this);\n  }\n  parent() {\n    return Model.hasOne<Tag | null>('parent').call(this);\n  }\n  children() {\n    return Model.hasMany<Tag>('children').call(this);\n  }\n  defaultSort() {\n    return Model.attribute<string | null>('defaultSort').call(this);\n  }\n  isChild() {\n    return Model.attribute<boolean>('isChild').call(this);\n  }\n  isHidden() {\n    return Model.attribute<boolean>('isHidden').call(this);\n  }\n\n  discussionCount() {\n    return Model.attribute<number>('discussionCount').call(this);\n  }\n  lastPostedAt() {\n    return Model.attribute('lastPostedAt', Model.transformDate).call(this);\n  }\n  lastPostedDiscussion() {\n    return Model.hasOne<Discussion | null>('lastPostedDiscussion').call(this);\n  }\n\n  isRestricted() {\n    return Model.attribute<boolean>('isRestricted').call(this);\n  }\n  canStartDiscussion() {\n    return Model.attribute<boolean>('canStartDiscussion').call(this);\n  }\n  canAddToDiscussion() {\n    return Model.attribute<boolean>('canAddToDiscussion').call(this);\n  }\n\n  isPrimary() {\n    return computed<boolean, this>('position', 'parent', (position, parent) => position !== null && parent === false).call(this);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/listItems'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","import classList from 'flarum/common/utils/classList';\n\nexport default function tagIcon(tag, attrs = {}, settings = {}) {\n  const hasIcon = tag && tag.icon();\n  const { useColor = true } = settings;\n\n  attrs.className = classList([attrs.className, 'icon', hasIcon ? tag.icon() : 'TagIcon']);\n\n  if (tag && useColor) {\n    attrs.style = attrs.style || {};\n    attrs.style['--color'] = tag.color();\n\n    if (hasIcon) {\n      attrs.style.color = tag.color();\n    }\n  } else if (!tag) {\n    attrs.className += ' untagged';\n  }\n\n  return hasIcon ? <i {...attrs} /> : <span {...attrs} />;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extract'];","import extract from 'flarum/common/utils/extract';\nimport Link from 'flarum/common/components/Link';\nimport tagIcon from './tagIcon';\n\nexport default function tagLabel(tag, attrs = {}) {\n  attrs.style = attrs.style || {};\n  attrs.className = 'TagLabel ' + (attrs.className || '');\n\n  const link = extract(attrs, 'link');\n  const tagText = tag ? tag.name() : app.translator.trans('flarum-tags.lib.deleted_tag_text');\n\n  if (tag) {\n    const color = tag.color();\n    if (color) {\n      attrs.style['--tag-bg'] = color;\n      attrs.className += ' colored';\n    }\n\n    if (link) {\n      attrs.title = tag.description() || '';\n      attrs.href = app.route('tag', { tags: tag.slug() });\n    }\n\n    if (tag.isChild()) {\n      attrs.className += ' TagLabel--child';\n    }\n  } else {\n    attrs.className += ' untagged';\n  }\n\n  return m(\n    link ? Link : 'span',\n    attrs,\n    <span className=\"TagLabel-text\">\n      {tag && tag.icon() && tagIcon(tag, {}, { useColor: false })} {tagText}\n    </span>\n  );\n}\n","import Tag from '../models/Tag';\n\nexport default function sortTags(tags: Tag[]) {\n  return tags.slice(0).sort((a, b) => {\n    const aPos = a.position();\n    const bPos = b.position();\n\n    // If they're both secondary tags, sort them by their discussions count,\n    // descending.\n    if (aPos === null && bPos === null) return b.discussionCount() - a.discussionCount();\n\n    // If just one is a secondary tag, then the primary tag should\n    // come first.\n    if (bPos === null) return -1;\n    if (aPos === null) return 1;\n\n    // If we've made it this far, we know they're both primary tags. So we'll\n    // need to see if they have parents.\n    const aParent = a.parent();\n    const bParent = b.parent();\n\n    // If they both have the same parent, then their positions are local,\n    // so we can compare them directly.\n    if (aParent === bParent) return aPos - bPos;\n    // If they are both child tags, then we will compare the positions of their\n    // parents.\n    else if (aParent && bParent) return aParent.position()! - bParent.position()!;\n    // If we are comparing a child tag with its parent, then we let the parent\n    // come first. If we are comparing an unrelated parent/child, then we\n    // compare both of the parents.\n    else if (aParent) return aParent === b ? 1 : aParent.position()! - bPos;\n    else if (bParent) return bParent === a ? -1 : aPos - bParent.position()!;\n\n    return 0;\n  });\n}\n","import Page from 'flarum/common/components/Page';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Link from 'flarum/common/components/Link';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport listItems from 'flarum/common/helpers/listItems';\nimport humanTime from 'flarum/common/helpers/humanTime';\n\nimport tagIcon from '../../common/helpers/tagIcon';\nimport tagLabel from '../../common/helpers/tagLabel';\nimport sortTags from '../../common/utils/sortTags';\n\nexport default class TagsPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    app.history.push('tags', app.translator.trans('flarum-tags.forum.header.back_to_tags_tooltip'));\n\n    this.tags = [];\n\n    const preloaded = app.preloadedApiDocument();\n\n    if (preloaded) {\n      this.tags = sortTags(preloaded.filter((tag) => !tag.isChild()));\n      return;\n    }\n\n    this.loading = true;\n\n    app.tagList.load(['children', 'lastPostedDiscussion', 'parent']).then(() => {\n      this.tags = sortTags(app.store.all('tags').filter((tag) => !tag.isChild()));\n\n      this.loading = false;\n\n      m.redraw();\n    });\n  }\n\n  view() {\n    if (this.loading) {\n      return <LoadingIndicator />;\n    }\n\n    const pinned = this.tags.filter((tag) => tag.position() !== null);\n    const cloud = this.tags.filter((tag) => tag.position() === null);\n\n    return (\n      <div className=\"TagsPage\">\n        {IndexPage.prototype.hero()}\n        <div className=\"container\">\n          <nav className=\"TagsPage-nav IndexPage-nav sideNav\">\n            <ul>{listItems(IndexPage.prototype.sidebarItems().toArray())}</ul>\n          </nav>\n\n          <div className=\"TagsPage-content sideNavOffset\">\n            <ul className=\"TagTiles\">\n              {pinned.map((tag) => {\n                const lastPostedDiscussion = tag.lastPostedDiscussion();\n                const children = sortTags(tag.children() || []);\n\n                return (\n                  <li className={'TagTile ' + (tag.color() ? 'colored' : '')} style={{ '--tag-bg': tag.color() }}>\n                    <Link className=\"TagTile-info\" href={app.route.tag(tag)}>\n                      {tag.icon() && tagIcon(tag, {}, { useColor: false })}\n                      <h3 className=\"TagTile-name\">{tag.name()}</h3>\n                      <p className=\"TagTile-description\">{tag.description()}</p>\n                      {children ? (\n                        <div className=\"TagTile-children\">\n                          {children.map((child) => [<Link href={app.route.tag(child)}>{child.name()}</Link>, ' '])}\n                        </div>\n                      ) : (\n                        ''\n                      )}\n                    </Link>\n                    {lastPostedDiscussion ? (\n                      <Link\n                        className=\"TagTile-lastPostedDiscussion\"\n                        href={app.route.discussion(lastPostedDiscussion, lastPostedDiscussion.lastPostNumber())}\n                      >\n                        <span className=\"TagTile-lastPostedDiscussion-title\">{lastPostedDiscussion.title()}</span>\n                        {humanTime(lastPostedDiscussion.lastPostedAt())}\n                      </Link>\n                    ) : (\n                      <span className=\"TagTile-lastPostedDiscussion\" />\n                    )}\n                  </li>\n                );\n              })}\n            </ul>\n\n            {cloud.length ? <div className=\"TagCloud\">{cloud.map((tag) => [tagLabel(tag, { link: true }), ' '])}</div> : ''}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  oncreate(vnode) {\n    super.oncreate(vnode);\n\n    app.setTitle(app.translator.trans('flarum-tags.forum.all_tags.meta_title_text'));\n    app.setTitleCount(0);\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/EventPost'];","import extract from 'flarum/common/utils/extract';\nimport tagLabel from './tagLabel';\nimport sortTags from '../utils/sortTags';\n\nexport default function tagsLabel(tags, attrs = {}) {\n  const children = [];\n  const link = extract(attrs, 'link');\n\n  attrs.className = 'TagsLabel ' + (attrs.className || '');\n\n  if (tags) {\n    sortTags(tags).forEach((tag) => {\n      if (tag || tags.length === 1) {\n        children.push(tagLabel(tag, { link }));\n      }\n    });\n  } else {\n    children.push(tagLabel());\n  }\n\n  return <span {...attrs}>{children}</span>;\n}\n","import EventPost from 'flarum/forum/components/EventPost';\nimport tagsLabel from '../../common/helpers/tagsLabel';\n\nexport default class DiscussionTaggedPost extends EventPost {\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    const oldTags = attrs.post.content()[0];\n    const newTags = attrs.post.content()[1];\n\n    function diffTags(tags1, tags2) {\n      return tags1.filter((tag) => tags2.indexOf(tag) === -1).map((id) => app.store.getById('tags', id));\n    }\n\n    attrs.tagsAdded = diffTags(newTags, oldTags);\n    attrs.tagsRemoved = diffTags(oldTags, newTags);\n  }\n\n  icon() {\n    return 'fas fa-tag';\n  }\n\n  descriptionKey() {\n    if (this.attrs.tagsAdded.length) {\n      if (this.attrs.tagsRemoved.length) {\n        return 'flarum-tags.forum.post_stream.added_and_removed_tags_text';\n      }\n\n      return 'flarum-tags.forum.post_stream.added_tags_text';\n    }\n\n    return 'flarum-tags.forum.post_stream.removed_tags_text';\n  }\n\n  descriptionData() {\n    const data = {};\n\n    if (this.attrs.tagsAdded.length) {\n      data.tagsAdded = app.translator.trans('flarum-tags.forum.post_stream.tags_text', {\n        tags: tagsLabel(this.attrs.tagsAdded, { link: true }),\n        count: this.attrs.tagsAdded.length,\n      });\n    }\n\n    if (this.attrs.tagsRemoved.length) {\n      data.tagsRemoved = app.translator.trans('flarum-tags.forum.post_stream.tags_text', {\n        tags: tagsLabel(this.attrs.tagsRemoved, { link: true }),\n        count: this.attrs.tagsRemoved.length,\n      });\n    }\n\n    return data;\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import app from 'flarum/forum/app';\nimport type Tag from '../../common/models/Tag';\n\nexport default class TagListState {\n  loadedIncludes = new Set();\n\n  async load(includes: string[] = []): Promise<Tag[]> {\n    const unloadedIncludes = includes.filter((include) => !this.loadedIncludes.has(include));\n\n    if (unloadedIncludes.length === 0) {\n      return Promise.resolve(app.store.all<Tag>('tags'));\n    }\n\n    return app.store.find<Tag[]>('tags', { include: unloadedIncludes.join(',') }).then((val) => {\n      unloadedIncludes.forEach((include) => this.loadedIncludes.add(include));\n      return val;\n    });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Separator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","import Link from 'flarum/common/components/Link';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport classList from 'flarum/common/utils/classList';\nimport tagIcon from '../../common/helpers/tagIcon';\n\nexport default class TagLinkButton extends LinkButton {\n  view(vnode) {\n    const tag = this.attrs.model;\n    const active = this.constructor.isActive(this.attrs);\n    const description = tag && tag.description();\n    const className = classList(['TagLinkButton', 'hasIcon', this.attrs.className, tag.isChild() && 'child']);\n\n    return (\n      <Link className={className} href={this.attrs.route} style={tag ? { '--color': tag.color() } : ''} title={description || ''}>\n        {tagIcon(tag, { className: 'Button-icon' })}\n        <span className=\"Button-label\">{tag ? tag.name() : app.translator.trans('flarum-tags.forum.index.untagged_link')}</span>\n      </Link>\n    );\n  }\n\n  static initAttrs(attrs) {\n    super.initAttrs(attrs);\n\n    const tag = attrs.model;\n\n    attrs.params.tags = tag ? tag.slug() : 'untagged';\n    attrs.route = app.route('tag', attrs.params);\n  }\n}\n","import { extend } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Separator from 'flarum/common/components/Separator';\nimport LinkButton from 'flarum/common/components/LinkButton';\n\nimport TagLinkButton from './components/TagLinkButton';\nimport TagsPage from './components/TagsPage';\nimport sortTags from '../common/utils/sortTags';\n\nexport default function () {\n  // Add a link to the tags page, as well as a list of all the tags,\n  // to the index page's sidebar.\n  extend(IndexPage.prototype, 'navItems', function (items) {\n    items.add(\n      'tags',\n      <LinkButton icon=\"fas fa-th-large\" href={app.route('tags')}>\n        {app.translator.trans('flarum-tags.forum.index.tags_link')}\n      </LinkButton>,\n      -10\n    );\n\n    if (app.current.matches(TagsPage)) return;\n\n    items.add('separator', Separator.component(), -12);\n\n    const params = app.search.stickyParams();\n    const tags = app.store.all('tags');\n    const currentTag = this.currentTag();\n\n    const addTag = (tag) => {\n      let active = currentTag === tag;\n\n      if (!active && currentTag) {\n        active = currentTag.parent() === tag;\n      }\n\n      // tag.name() is passed here as children even though it isn't used directly\n      // because when we need to get the active child in SelectDropdown, we need to\n      // use its children to populate the dropdown. The problem here is that `view`\n      // on TagLinkButton is only called AFTER SelectDropdown, so no children are available\n      // for SelectDropdown to use at the time.\n      items.add('tag' + tag.id(), TagLinkButton.component({ model: tag, params, active }, tag?.name()), -14);\n    };\n\n    sortTags(tags)\n      .filter(\n        (tag) => tag.position() !== null && (!tag.isChild() || (currentTag && (tag.parent() === currentTag || tag.parent() === currentTag.parent())))\n      )\n      .forEach(addTag);\n\n    const more = tags.filter((tag) => tag.position() === null).sort((a, b) => b.discussionCount() - a.discussionCount());\n\n    more.splice(0, 3).forEach(addTag);\n\n    if (more.length) {\n      items.add('moreTags', <LinkButton href={app.route('tags')}>{app.translator.trans('flarum-tags.forum.index.more_link')}</LinkButton>, -16);\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/DiscussionListState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/GlobalSearchState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Component from 'flarum/common/Component';\nimport tagIcon from '../../common/helpers/tagIcon';\n\nexport default class TagHero extends Component {\n  view() {\n    const tag = this.attrs.model;\n    const color = tag.color();\n\n    return (\n      <header className={'Hero TagHero' + (color ? ' TagHero--colored' : '')} style={color ? { '--hero-bg': color } : ''}>\n        <div className=\"container\">\n          <div className=\"containerNarrow\">\n            <h2 className=\"Hero-title\">\n              {tag.icon() && tagIcon(tag, {}, { useColor: false })} {tag.name()}\n            </h2>\n            <div className=\"Hero-subtitle\">{tag.description()}</div>\n          </div>\n        </div>\n      </header>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport type Mithril from 'mithril';\nimport { extend, override } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\nimport GlobalSearchState from 'flarum/forum/states/GlobalSearchState';\nimport classList from 'flarum/common/utils/classList';\n\nimport TagHero from './components/TagHero';\nimport Tag from '../common/models/Tag';\nimport { ComponentAttrs } from 'flarum/common/Component';\n\nconst findTag = (slug: string) => app.store.all<Tag>('tags').find((tag) => tag.slug().localeCompare(slug, undefined, { sensitivity: 'base' }) === 0);\n\nexport default function () {\n  IndexPage.prototype.currentTag = function () {\n    if (this.currentActiveTag) {\n      return this.currentActiveTag;\n    }\n\n    const slug = app.search.params().tags;\n    let tag = null;\n\n    if (slug) {\n      tag = findTag(slug);\n    }\n\n    if ((slug && !tag) || (tag && !tag.isChild() && !tag.children())) {\n      if (this.currentTagLoading) {\n        return;\n      }\n\n      this.currentTagLoading = true;\n\n      // Unlike the backend, no need to fetch parent.children because if we're on\n      // a child tag page, then either:\n      //    - We loaded in that child tag (and its siblings) in the API document\n      //    - We first navigated to the current tag's parent, which would have loaded in the current tag's siblings.\n      app.store\n        .find('tags', slug, { include: 'children,children.parent,parent,state' })\n        .then(() => {\n          this.currentActiveTag = findTag(slug);\n\n          m.redraw();\n        })\n        .finally(() => {\n          this.currentTagLoading = false;\n        });\n    }\n\n    if (tag) {\n      this.currentActiveTag = tag;\n      return this.currentActiveTag;\n    }\n\n    return;\n  };\n\n  // If currently viewing a tag, insert a tag hero at the top of the view.\n  override(IndexPage.prototype, 'hero', function (original) {\n    const tag = this.currentTag();\n\n    if (tag) return <TagHero model={tag} />;\n\n    return original();\n  });\n\n  extend(IndexPage.prototype, 'view', function (vdom: Mithril.Vnode<ComponentAttrs, {}>) {\n    const tag = this.currentTag();\n\n    if (tag) vdom.attrs.className += ' IndexPage--tag' + tag.id();\n  });\n\n  extend(IndexPage.prototype, 'setTitle', function () {\n    const tag = this.currentTag();\n\n    if (tag) {\n      app.setTitle(tag.name());\n    }\n  });\n\n  // If currently viewing a tag, restyle the 'new discussion' button to use\n  // the tag's color, and disable if the user isn't allowed to edit.\n  extend(IndexPage.prototype, 'sidebarItems', function (items) {\n    const tag = this.currentTag();\n\n    if (tag) {\n      const color = tag.color();\n      const canStartDiscussion = tag.canStartDiscussion() || !app.session.user;\n      const newDiscussion = items.get('newDiscussion') as Mithril.Vnode<ComponentAttrs, {}>;\n\n      if (color) {\n        newDiscussion.attrs.className = classList([newDiscussion.attrs.className, 'Button--tagColored']);\n        newDiscussion.attrs.style = { '--color': color };\n      }\n\n      newDiscussion.attrs.disabled = !canStartDiscussion;\n      newDiscussion.children = app.translator.trans(\n        canStartDiscussion ? 'core.forum.index.start_discussion_button' : 'core.forum.index.cannot_start_discussion_button'\n      );\n    }\n  });\n\n  // Add a parameter for the global search state to pass on to the\n  // DiscussionListState that will let us filter discussions by tag.\n  extend(GlobalSearchState.prototype, 'params', function (params) {\n    params.tags = m.route.param('tags');\n  });\n\n  // Translate that parameter into a gambit appended to the search query.\n  extend(DiscussionListState.prototype, 'requestParams', function (this: DiscussionListState, params) {\n    if (typeof params.include === 'string') {\n      params.include = [params.include];\n    } else {\n      params.include?.push('tags', 'tags.parent');\n    }\n\n    if (this.params.tags) {\n      const filter = params.filter ?? {};\n      filter.tag = this.params.tags;\n      // TODO: replace this with a more robust system.\n      const q = filter.q;\n      if (q) {\n        filter.q = `${q} tag:${this.params.tags}`;\n      }\n      params.filter = filter;\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionListItem'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionHero'];","import { extend } from 'flarum/common/extend';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport DiscussionHero from 'flarum/forum/components/DiscussionHero';\n\nimport tagsLabel from '../common/helpers/tagsLabel';\nimport sortTags from '../common/utils/sortTags';\n\nexport default function () {\n  // Add tag labels to each discussion in the discussion list.\n  extend(DiscussionListItem.prototype, 'infoItems', function (items) {\n    const tags = this.attrs.discussion.tags();\n\n    if (tags && tags.length) {\n      items.add('tags', tagsLabel(tags), 10);\n    }\n  });\n\n  // Restyle a discussion's hero to use its first tag's color.\n  extend(DiscussionHero.prototype, 'view', function (view) {\n    const tags = sortTags(this.attrs.discussion.tags());\n\n    if (tags && tags.length) {\n      const color = tags[0].color();\n      if (color) {\n        view.attrs.style = { '--hero-bg': color };\n        view.attrs.className += ' DiscussionHero--colored';\n      }\n    }\n  });\n\n  // Add a list of a discussion's tags to the discussion hero, displayed\n  // before the title. Put the title on its own line.\n  extend(DiscussionHero.prototype, 'items', function (items) {\n    const tags = this.attrs.discussion.tags();\n\n    if (tags && tags.length) {\n      items.add('tags', tagsLabel(tags, { link: true }), 5);\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/highlight'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/KeyboardNavigatable'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","export default function getSelectableTags(discussion) {\n  let tags = app.store.all('tags');\n\n  if (discussion) {\n    tags = tags.filter((tag) => tag.canAddToDiscussion() || discussion.tags().indexOf(tag) !== -1);\n  } else {\n    tags = tags.filter((tag) => tag.canStartDiscussion());\n  }\n\n  return tags;\n}\n","import Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport classList from 'flarum/common/utils/classList';\n\n/**\n * @TODO move to core\n */\nexport default class ToggleButton extends Component {\n  view(vnode) {\n    const { className, isToggled, ...attrs } = this.attrs;\n    const icon = isToggled ? 'far fa-check-circle' : 'far fa-circle';\n\n    return (\n      <Button {...attrs} icon={icon} className={classList([className, isToggled && 'Button--toggled'])}>\n        {vnode.children}\n      </Button>\n    );\n  }\n}\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import app from 'flarum/forum/app';\nimport type Mithril from 'mithril';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport highlight from 'flarum/common/helpers/highlight';\nimport classList from 'flarum/common/utils/classList';\nimport extractText from 'flarum/common/utils/extractText';\nimport KeyboardNavigatable from 'flarum/forum/utils/KeyboardNavigatable';\nimport Stream from 'flarum/common/utils/Stream';\nimport Discussion from 'flarum/common/models/Discussion';\n\nimport tagLabel from '../../common/helpers/tagLabel';\nimport tagIcon from '../../common/helpers/tagIcon';\nimport sortTags from '../../common/utils/sortTags';\nimport getSelectableTags from '../utils/getSelectableTags';\nimport ToggleButton from './ToggleButton';\nimport Tag from '../../common/models/Tag';\n\nexport interface TagDiscussionModalAttrs extends IInternalModalAttrs {\n  discussion?: Discussion;\n  selectedTags?: Tag[];\n  onsubmit?: (tags: Tag[]) => {};\n}\n\nexport default class TagDiscussionModal extends Modal<TagDiscussionModalAttrs> {\n  tagsLoading = true;\n\n  selected: Tag[] = [];\n  filter = Stream('');\n  focused = false;\n\n  minPrimary = app.forum.attribute<number>('minPrimaryTags');\n  maxPrimary = app.forum.attribute<number>('maxPrimaryTags');\n  minSecondary = app.forum.attribute<number>('minSecondaryTags');\n  maxSecondary = app.forum.attribute<number>('maxSecondaryTags');\n\n  bypassReqs = false;\n\n  navigator = new KeyboardNavigatable();\n\n  tags?: Tag[];\n\n  selectedTag?: Tag;\n  oninit(vnode: Mithril.Vnode<TagDiscussionModalAttrs, this>) {\n    super.oninit(vnode);\n\n    this.navigator\n      .onUp(() => this.setIndex(this.getCurrentNumericIndex() - 1, true))\n      .onDown(() => this.setIndex(this.getCurrentNumericIndex() + 1, true))\n      .onSelect(this.select.bind(this))\n      .onRemove(() => this.selected.splice(this.selected.length - 1, 1));\n\n    app.tagList.load(['parent']).then(() => {\n      this.tagsLoading = false;\n\n      const tags = sortTags(getSelectableTags(this.attrs.discussion));\n      this.tags = tags;\n\n      const discussionTags = this.attrs.discussion?.tags();\n      if (this.attrs.selectedTags) {\n        this.attrs.selectedTags.map(this.addTag.bind(this));\n      } else if (discussionTags) {\n        discussionTags.forEach((tag) => tag && this.addTag(tag));\n      }\n\n      this.selectedTag = tags[0];\n\n      m.redraw();\n    });\n  }\n\n  primaryCount() {\n    return this.selected.filter((tag) => tag.isPrimary()).length;\n  }\n\n  secondaryCount() {\n    return this.selected.filter((tag) => !tag.isPrimary()).length;\n  }\n\n  /**\n   * Add the given tag to the list of selected tags.\n   */\n  addTag(tag: Tag) {\n    if (!tag.canStartDiscussion()) return;\n\n    // If this tag has a parent, we'll also need to add the parent tag to the\n    // selected list if it's not already in there.\n    const parent = tag.parent();\n    if (parent && !this.selected.includes(parent)) {\n      this.selected.push(parent);\n    }\n\n    if (!this.selected.includes(tag)) {\n      this.selected.push(tag);\n    }\n  }\n\n  /**\n   * Remove the given tag from the list of selected tags.\n   */\n  removeTag(tag: Tag) {\n    const index = this.selected.indexOf(tag);\n    if (index !== -1) {\n      this.selected.splice(index, 1);\n\n      // Look through the list of selected tags for any tags which have the tag\n      // we just removed as their parent. We'll need to remove them too.\n      this.selected.filter((selected) => selected.parent() === tag).forEach(this.removeTag.bind(this));\n    }\n  }\n\n  className() {\n    return 'TagDiscussionModal';\n  }\n\n  title() {\n    return this.attrs.discussion\n      ? app.translator.trans('flarum-tags.forum.choose_tags.edit_title', { title: <em>{this.attrs.discussion.title()}</em> })\n      : app.translator.trans('flarum-tags.forum.choose_tags.title');\n  }\n\n  getInstruction(primaryCount: number, secondaryCount: number) {\n    if (this.bypassReqs) {\n      return '';\n    }\n\n    if (primaryCount < this.minPrimary) {\n      const remaining = this.minPrimary - primaryCount;\n      return app.translator.trans('flarum-tags.forum.choose_tags.choose_primary_placeholder', { count: remaining });\n    } else if (secondaryCount < this.minSecondary) {\n      const remaining = this.minSecondary - secondaryCount;\n      return app.translator.trans('flarum-tags.forum.choose_tags.choose_secondary_placeholder', { count: remaining });\n    }\n\n    return '';\n  }\n\n  content() {\n    if (this.tagsLoading || !this.tags) {\n      return <LoadingIndicator />;\n    }\n\n    let tags = this.tags;\n    const filter = this.filter().toLowerCase();\n    const primaryCount = this.primaryCount();\n    const secondaryCount = this.secondaryCount();\n\n    // Filter out all child tags whose parents have not been selected. This\n    // makes it impossible to select a child if its parent hasn't been selected.\n    tags = tags.filter((tag) => {\n      const parent = tag.parent();\n      return parent !== null && (parent === false || this.selected.includes(parent));\n    });\n\n    // If the number of selected primary/secondary tags is at the maximum, then\n    // we'll filter out all other tags of that type.\n    if (primaryCount >= this.maxPrimary && !this.bypassReqs) {\n      tags = tags.filter((tag) => !tag.isPrimary() || this.selected.includes(tag));\n    }\n\n    if (secondaryCount >= this.maxSecondary && !this.bypassReqs) {\n      tags = tags.filter((tag) => tag.isPrimary() || this.selected.includes(tag));\n    }\n\n    // If the user has entered text in the filter input, then filter by tags\n    // whose name matches what they've entered.\n    if (filter) {\n      tags = tags.filter((tag) => tag.name().substr(0, filter.length).toLowerCase() === filter);\n    }\n\n    if (!this.selectedTag || !tags.includes(this.selectedTag)) this.selectedTag = tags[0];\n\n    const inputWidth = Math.max(extractText(this.getInstruction(primaryCount, secondaryCount)).length, this.filter().length);\n\n    return [\n      <div className=\"Modal-body\">\n        <div className=\"TagDiscussionModal-form\">\n          <div className=\"TagDiscussionModal-form-input\">\n            <div className={'TagsInput FormControl ' + (this.focused ? 'focus' : '')} onclick={() => this.$('.TagsInput input').focus()}>\n              <span className=\"TagsInput-selected\">\n                {this.selected.map((tag) => (\n                  <span\n                    className=\"TagsInput-tag\"\n                    onclick={() => {\n                      this.removeTag(tag);\n                      this.onready();\n                    }}\n                  >\n                    {tagLabel(tag)}\n                  </span>\n                ))}\n              </span>\n              <input\n                className=\"FormControl\"\n                placeholder={extractText(this.getInstruction(primaryCount, secondaryCount))}\n                bidi={this.filter}\n                style={{ width: inputWidth + 'ch' }}\n                onkeydown={this.navigator.navigate.bind(this.navigator)}\n                onfocus={() => (this.focused = true)}\n                onblur={() => (this.focused = false)}\n              />\n            </div>\n          </div>\n          <div className=\"TagDiscussionModal-form-submit App-primaryControl\">\n            <Button\n              type=\"submit\"\n              className=\"Button Button--primary\"\n              disabled={!this.meetsRequirements(primaryCount, secondaryCount)}\n              icon=\"fas fa-check\"\n            >\n              {app.translator.trans('flarum-tags.forum.choose_tags.submit_button')}\n            </Button>\n          </div>\n        </div>\n      </div>,\n\n      <div className=\"Modal-footer\">\n        <ul className=\"TagDiscussionModal-list SelectTagList\">\n          {tags\n            .filter((tag) => filter || !tag.parent() || this.selected.includes(tag.parent() as Tag))\n            .map((tag) => (\n              <li\n                data-index={tag.id()}\n                className={classList({\n                  pinned: tag.position() !== null,\n                  child: !!tag.parent(),\n                  colored: !!tag.color(),\n                  selected: this.selected.includes(tag),\n                  active: this.selectedTag === tag,\n                })}\n                style={{ color: tag.color() }}\n                onmouseover={() => (this.selectedTag = tag)}\n                onclick={this.toggleTag.bind(this, tag)}\n              >\n                {tagIcon(tag)}\n                <span className=\"SelectTagListItem-name\">{highlight(tag.name(), filter)}</span>\n                {tag.description() ? <span className=\"SelectTagListItem-description\">{tag.description()}</span> : ''}\n              </li>\n            ))}\n        </ul>\n        {!!app.forum.attribute('canBypassTagCounts') && (\n          <div className=\"TagDiscussionModal-controls\">\n            <ToggleButton className=\"Button\" onclick={() => (this.bypassReqs = !this.bypassReqs)} isToggled={this.bypassReqs}>\n              {app.translator.trans('flarum-tags.forum.choose_tags.bypass_requirements')}\n            </ToggleButton>\n          </div>\n        )}\n      </div>,\n    ];\n  }\n\n  meetsRequirements(primaryCount: number, secondaryCount: number) {\n    if (this.bypassReqs) {\n      return true;\n    }\n\n    return primaryCount >= this.minPrimary && secondaryCount >= this.minSecondary;\n  }\n\n  toggleTag(tag: Tag) {\n    // Won't happen, needed for type safety.\n    if (!this.tags) return;\n\n    if (this.selected.includes(tag)) {\n      this.removeTag(tag);\n    } else {\n      this.addTag(tag);\n    }\n\n    if (this.filter()) {\n      this.filter('');\n      this.selectedTag = this.tags[0];\n    }\n\n    this.onready();\n  }\n\n  select(e: KeyboardEvent) {\n    // Ctrl + Enter submits the selection, just Enter completes the current entry\n    if (e.metaKey || e.ctrlKey || (this.selectedTag && this.selected.includes(this.selectedTag))) {\n      if (this.selected.length) {\n        // The DOM submit method doesn't emit a `submit event, so we\n        // simulate a manual submission so our `onsubmit` logic is run.\n        this.$('button[type=\"submit\"]').click();\n      }\n    } else if (this.selectedTag) {\n      this.getItem(this.selectedTag)[0].dispatchEvent(new Event('click'));\n    }\n  }\n\n  selectableItems() {\n    return this.$('.TagDiscussionModal-list > li');\n  }\n\n  getCurrentNumericIndex() {\n    if (!this.selectedTag) return -1;\n\n    return this.selectableItems().index(this.getItem(this.selectedTag));\n  }\n\n  getItem(selectedTag: Tag) {\n    return this.selectableItems().filter(`[data-index=\"${selectedTag.id()}\"]`);\n  }\n\n  setIndex(index: number, scrollToItem: boolean) {\n    const $items = this.selectableItems();\n    const $dropdown = $items.parent();\n\n    if (index < 0) {\n      index = $items.length - 1;\n    } else if (index >= $items.length) {\n      index = 0;\n    }\n\n    const $item = $items.eq(index);\n\n    this.selectedTag = app.store.getById('tags', $item.attr('data-index')!);\n\n    m.redraw();\n\n    if (scrollToItem && this.selectedTag) {\n      const dropdownScroll = $dropdown.scrollTop()!;\n      const dropdownTop = $dropdown.offset()!.top;\n      const dropdownBottom = dropdownTop + $dropdown.outerHeight()!;\n      const itemTop = $item.offset()!.top;\n      const itemBottom = itemTop + $item.outerHeight()!;\n\n      let scrollTop;\n      if (itemTop < dropdownTop) {\n        scrollTop = dropdownScroll - dropdownTop + itemTop - parseInt($dropdown.css('padding-top'), 10);\n      } else if (itemBottom > dropdownBottom) {\n        scrollTop = dropdownScroll - dropdownBottom + itemBottom + parseInt($dropdown.css('padding-bottom'), 10);\n      }\n\n      if (typeof scrollTop !== 'undefined') {\n        $dropdown.stop(true).animate({ scrollTop }, 100);\n      }\n    }\n  }\n\n  onsubmit(e: SubmitEvent) {\n    e.preventDefault();\n\n    const discussion = this.attrs.discussion;\n    const tags = this.selected;\n\n    if (discussion) {\n      discussion.save({ relationships: { tags } }).then(() => {\n        if (app.current.matches(DiscussionPage)) {\n          app.current.get('stream').update();\n        }\n        m.redraw();\n      });\n    }\n\n    if (this.attrs.onsubmit) this.attrs.onsubmit(tags);\n\n    this.hide();\n  }\n}\n","import { extend } from 'flarum/common/extend';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport Button from 'flarum/common/components/Button';\n\nimport TagDiscussionModal from './components/TagDiscussionModal';\n\nexport default function () {\n  // Add a control allowing the discussion to be moved to another category.\n  extend(DiscussionControls, 'moderationControls', function (items, discussion) {\n    if (discussion.canTag()) {\n      items.add(\n        'tags',\n        <Button icon=\"fas fa-tag\" onclick={() => app.modal.show(TagDiscussionModal, { discussion })}>\n          {app.translator.trans('flarum-tags.forum.discussion_controls.edit_tags_button')}\n        </Button>\n      );\n    }\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionComposer'];","import { extend, override } from 'flarum/common/extend';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\nimport classList from 'flarum/common/utils/classList';\n\nimport TagDiscussionModal from './components/TagDiscussionModal';\nimport tagsLabel from '../common/helpers/tagsLabel';\nimport getSelectableTags from './utils/getSelectableTags';\n\nexport default function () {\n  extend(IndexPage.prototype, 'newDiscussionAction', function (promise) {\n    // From `addTagFilter\n    const tag = this.currentTag();\n\n    if (tag) {\n      const parent = tag.parent();\n      const tags = parent ? [parent, tag] : [tag];\n      promise.then((composer) => (composer.fields.tags = tags));\n    } else {\n      app.composer.fields.tags = [];\n    }\n  });\n\n  extend(DiscussionComposer.prototype, 'oninit', function () {\n    app.tagList.load(['parent']).then(() => m.redraw());\n  });\n\n  // Add tag-selection abilities to the discussion composer.\n  DiscussionComposer.prototype.chooseTags = function () {\n    const selectableTags = getSelectableTags();\n\n    if (!selectableTags.length) return;\n\n    app.modal.show(TagDiscussionModal, {\n      selectedTags: (this.composer.fields.tags || []).slice(0),\n      onsubmit: (tags) => {\n        this.composer.fields.tags = tags;\n        this.$('textarea').focus();\n      },\n    });\n  };\n\n  // Add a tag-selection menu to the discussion composer's header, after the\n  // title.\n  extend(DiscussionComposer.prototype, 'headerItems', function (items) {\n    const tags = this.composer.fields.tags || [];\n    const selectableTags = getSelectableTags();\n\n    items.add(\n      'tags',\n      <a className={classList(['DiscussionComposer-changeTags', !selectableTags.length && 'disabled'])} onclick={this.chooseTags.bind(this)}>\n        {tags.length ? (\n          tagsLabel(tags)\n        ) : (\n          <span className=\"TagLabel untagged\">{app.translator.trans('flarum-tags.forum.composer_discussion.choose_tags_link')}</span>\n        )}\n      </a>,\n      10\n    );\n  });\n\n  override(DiscussionComposer.prototype, 'onsubmit', function (original) {\n    const chosenTags = this.composer.fields.tags || [];\n    const chosenPrimaryTags = chosenTags.filter((tag) => tag.position() !== null && !tag.isChild());\n    const chosenSecondaryTags = chosenTags.filter((tag) => tag.position() === null);\n    const selectableTags = getSelectableTags();\n\n    const minPrimaryTags = parseInt(app.forum.attribute('minPrimaryTags'));\n    const minSecondaryTags = parseInt(app.forum.attribute('minSecondaryTags'));\n    const maxPrimaryTags = parseInt(app.forum.attribute('maxPrimaryTags'));\n    const maxSecondaryTags = parseInt(app.forum.attribute('maxSecondaryTags'));\n\n    if (\n      ((!chosenTags.length && maxPrimaryTags !== 0 && maxSecondaryTags !== 0) ||\n        chosenPrimaryTags.length < minPrimaryTags ||\n        chosenSecondaryTags.length < minSecondaryTags) &&\n      selectableTags.length\n    ) {\n      app.modal.show(TagDiscussionModal, {\n        selectedTags: chosenTags,\n        onsubmit: (tags) => {\n          this.composer.fields.tags = tags;\n          original();\n        },\n      });\n    } else {\n      original();\n    }\n  });\n\n  // Add the selected tags as data to submit to the server.\n  extend(DiscussionComposer.prototype, 'data', function (data) {\n    data.relationships = data.relationships || {};\n    data.relationships.tags = this.composer.fields.tags;\n  });\n}\n","import sortTags from './utils/sortTags';\nimport Tag from './models/Tag';\nimport tagsLabel from './helpers/tagsLabel';\nimport tagIcon from './helpers/tagIcon';\nimport tagLabel from './helpers/tagLabel';\n\nexport default {\n  'tags/utils/sortTags': sortTags,\n  'tags/models/Tag': Tag,\n  'tags/helpers/tagsLabel': tagsLabel,\n  'tags/helpers/tagIcon': tagIcon,\n  'tags/helpers/tagLabel': tagLabel,\n};\n","import compat from '../common/compat';\n\nimport addTagFilter from './addTagFilter';\nimport addTagControl from './addTagControl';\nimport TagHero from './components/TagHero';\nimport TagDiscussionModal from './components/TagDiscussionModal';\nimport TagsPage from './components/TagsPage';\nimport DiscussionTaggedPost from './components/DiscussionTaggedPost';\nimport TagLinkButton from './components/TagLinkButton';\nimport addTagList from './addTagList';\nimport addTagLabels from './addTagLabels';\nimport addTagComposer from './addTagComposer';\nimport getSelectableTags from './utils/getSelectableTags';\n\nexport default Object.assign(compat, {\n  'tags/addTagFilter': addTagFilter,\n  'tags/addTagControl': addTagControl,\n  'tags/components/TagHero': TagHero,\n  'tags/components/TagDiscussionModal': TagDiscussionModal,\n  'tags/components/TagsPage': TagsPage,\n  'tags/components/DiscussionTaggedPost': DiscussionTaggedPost,\n  'tags/components/TagLinkButton': TagLinkButton,\n  'tags/addTagList': addTagList,\n  'tags/addTagLabels': addTagLabels,\n  'tags/addTagComposer': addTagComposer,\n  'tags/utils/getSelectableTags': getSelectableTags,\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core;","import app from 'flarum/forum/app';\nimport Model from 'flarum/common/Model';\nimport Discussion from 'flarum/common/models/Discussion';\nimport IndexPage from 'flarum/forum/components/IndexPage';\n\nimport Tag from '../common/models/Tag';\nimport TagsPage from './components/TagsPage';\nimport DiscussionTaggedPost from './components/DiscussionTaggedPost';\n\nimport TagListState from './states/TagListState';\n\nimport addTagList from './addTagList';\nimport addTagFilter from './addTagFilter';\nimport addTagLabels from './addTagLabels';\nimport addTagControl from './addTagControl';\nimport addTagComposer from './addTagComposer';\n\napp.initializers.add('flarum-tags', function () {\n  app.routes.tags = { path: '/tags', component: TagsPage };\n  app.routes.tag = { path: '/t/:tags', component: IndexPage };\n\n  app.route.tag = (tag: Tag) => app.route('tag', { tags: tag.slug() });\n\n  app.postComponents.discussionTagged = DiscussionTaggedPost;\n\n  app.store.models.tags = Tag;\n\n  app.tagList = new TagListState();\n\n  Discussion.prototype.tags = Model.hasMany<Tag>('tags');\n  Discussion.prototype.canTag = Model.attribute<boolean>('canTag');\n\n  addTagList();\n  addTagFilter();\n  addTagLabels();\n  addTagControl();\n  addTagComposer();\n});\n\n// Expose compat API\nimport tagsCompat from './compat';\nimport { compat } from '@flarum/core/forum';\n\nObject.assign(compat, tagsCompat);\n","module.exports = require(\"regenerator-runtime\");\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["flarum","core","compat","_setPrototypeOf","o","p","Object","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","prototype","create","constructor","Tag","name","Model","call","this","slug","description","color","backgroundUrl","backgroundMode","icon","position","parent","children","defaultSort","isChild","isHidden","discussionCount","lastPostedAt","lastPostedDiscussion","isRestricted","canStartDiscussion","canAddToDiscussion","isPrimary","computed","tagIcon","tag","attrs","settings","hasIcon","useColor","className","classList","style","tagLabel","link","extract","tagText","app","translator","trans","title","href","route","tags","m","Link","sortTags","slice","sort","a","b","aPos","bPos","aParent","bParent","TagsPage","oninit","vnode","history","push","preloaded","preloadedApiDocument","filter","loading","tagList","load","then","store","all","redraw","view","pinned","cloud","IndexPage","listItems","toArray","map","child","discussion","lastPostNumber","humanTime","length","oncreate","setTitle","setTitleCount","Page","tagsLabel","forEach","DiscussionTaggedPost","initAttrs","oldTags","post","content","newTags","diffTags","tags1","tags2","indexOf","id","getById","tagsAdded","tagsRemoved","descriptionKey","descriptionData","data","count","EventPost","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","TagListState","loadedIncludes","Set","fn","includes","unloadedIncludes","include","has","join","val","add","self","args","arguments","apply","err","undefined","TagLinkButton","model","isActive","params","LinkButton","extend","items","current","matches","Separator","search","stickyParams","currentTag","addTag","active","component","more","splice","TagHero","Component","findTag","find","localeCompare","sensitivity","currentActiveTag","currentTagLoading","override","original","vdom","newDiscussion","get","disabled","GlobalSearchState","param","DiscussionListState","q","DiscussionListItem","DiscussionHero","getSelectableTags","ToggleButton","isToggled","source","excluded","i","target","sourceKeys","keys","TagDiscussionModal","tagsLoading","selected","Stream","focused","minPrimary","maxPrimary","minSecondary","maxSecondary","bypassReqs","navigator","KeyboardNavigatable","selectedTag","onUp","setIndex","getCurrentNumericIndex","onDown","onSelect","select","bind","onRemove","discussionTags","selectedTags","primaryCount","secondaryCount","removeTag","index","getInstruction","remaining","toLowerCase","substr","inputWidth","Math","max","extractText","onclick","$","focus","onready","placeholder","bidi","width","onkeydown","navigate","onfocus","onblur","type","meetsRequirements","colored","onmouseover","toggleTag","highlight","e","metaKey","ctrlKey","click","getItem","dispatchEvent","Event","selectableItems","scrollToItem","$items","$dropdown","$item","eq","attr","scrollTop","dropdownScroll","dropdownTop","offset","top","dropdownBottom","outerHeight","itemTop","itemBottom","parseInt","css","stop","animate","onsubmit","preventDefault","save","relationships","DiscussionPage","update","hide","Modal","DiscussionControls","canTag","modal","show","promise","composer","fields","DiscussionComposer","selectableTags","chooseTags","chosenTags","chosenPrimaryTags","chosenSecondaryTags","minPrimaryTags","forum","attribute","minSecondaryTags","maxPrimaryTags","maxSecondaryTags","assign","addTagFilter","addTagControl","addTagList","addTagLabels","addTagComposer","path","Discussion","tagsCompat","module","exports","runtime","Op","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","GenStateSuspendedStart","method","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","TypeError","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","object","reverse","pop","skipTempReset","prev","charAt","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","definition","prop","r"],"sourceRoot":""}