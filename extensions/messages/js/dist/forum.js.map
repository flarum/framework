{"version":3,"file":"forum.js","mappings":"UAAIA,EACAC,E,wBCDJC,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,mB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,6B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,6B,sBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,+B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,qC,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,0B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,4B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,uC,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,0B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,0B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,mC,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,wB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,8B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,sB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,Y,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,gC,qBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAU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","sources":["webpack://@flarum/messages/webpack/runtime/load script","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Avatar')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Dropdown')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Icon')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/InfoTile')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Link')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/LinkButton')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Modal')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Page')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Tooltip')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/UserSelectionModal')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/fullTime')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/humanTime')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/listItems')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/username')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/states/PaginatedListState')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/ScrollListener')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/Stream')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/classList')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/extractText')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/AbstractPost')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/Comment')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/ComposerBody')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/HeaderList')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/IndexSidebar')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/PageStructure')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/PostMeta')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/PostUser')\"","webpack://@flarum/messages/../../../node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@flarum/messages/../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@flarum/messages/../../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@flarum/messages/../../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@flarum/messages/webpack/bootstrap","webpack://@flarum/messages/webpack/runtime/compat get default export","webpack://@flarum/messages/webpack/runtime/define property getters","webpack://@flarum/messages/webpack/runtime/ensure chunk","webpack://@flarum/messages/webpack/runtime/get javascript chunk filename","webpack://@flarum/messages/webpack/runtime/global","webpack://@flarum/messages/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/messages/webpack/runtime/make namespace object","webpack://@flarum/messages/webpack/runtime/publicPath","webpack://@flarum/messages/webpack/runtime/compat","webpack://@flarum/messages/webpack/runtime/jsonp chunk loading","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/HeaderSecondary')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/utils/UserControls')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/HeaderDropdown')\"","webpack://@flarum/messages/./src/forum/components/DialogsDropdown.tsx","webpack://@flarum/messages/./src/forum/states/DialogListState.ts","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/computed')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/string')\"","webpack://@flarum/messages/./src/common/models/DialogMessage.ts","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/app')\"","webpack://@flarum/messages/./src/common/models/Dialog.ts","webpack://@flarum/messages/./src/common/extend.ts","webpack://@flarum/messages/./src/forum/extend.ts","webpack://@flarum/messages/./src/forum/index.tsx"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"module.exports:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","module.exports = flarum.reg.get('core', 'common/Component');","module.exports = flarum.reg.get('core', 'common/components/Avatar');","module.exports = flarum.reg.get('core', 'common/components/Button');","module.exports = flarum.reg.get('core', 'common/components/Dropdown');","module.exports = flarum.reg.get('core', 'common/components/Icon');","module.exports = flarum.reg.get('core', 'common/components/InfoTile');","module.exports = flarum.reg.get('core', 'common/components/Link');","module.exports = flarum.reg.get('core', 'common/components/LinkButton');","module.exports = flarum.reg.get('core', 'common/components/LoadingIndicator');","module.exports = flarum.reg.get('core', 'common/components/Modal');","module.exports = flarum.reg.get('core', 'common/components/Page');","module.exports = flarum.reg.get('core', 'common/components/Tooltip');","module.exports = flarum.reg.get('core', 'common/components/UserSelectionModal');","module.exports = flarum.reg.get('core', 'common/helpers/fullTime');","module.exports = flarum.reg.get('core', 'common/helpers/humanTime');","module.exports = flarum.reg.get('core', 'common/helpers/listItems');","module.exports = flarum.reg.get('core', 'common/helpers/username');","module.exports = flarum.reg.get('core', 'common/states/PaginatedListState');","module.exports = flarum.reg.get('core', 'common/utils/ItemList');","module.exports = flarum.reg.get('core', 'common/utils/ScrollListener');","module.exports = flarum.reg.get('core', 'common/utils/Stream');","module.exports = flarum.reg.get('core', 'common/utils/classList');","module.exports = flarum.reg.get('core', 'common/utils/extractText');","module.exports = flarum.reg.get('core', 'forum/app');","module.exports = flarum.reg.get('core', 'forum/components/AbstractPost');","module.exports = flarum.reg.get('core', 'forum/components/Comment');","module.exports = flarum.reg.get('core', 'forum/components/ComposerBody');","module.exports = flarum.reg.get('core', 'forum/components/HeaderList');","module.exports = flarum.reg.get('core', 'forum/components/IndexSidebar');","module.exports = flarum.reg.get('core', 'forum/components/PageStructure');","module.exports = flarum.reg.get('core', 'forum/components/PostMeta');","module.exports = flarum.reg.get('core', 'forum/components/PostUser');","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + {\"301\":\"forum/components/MessagesPage\",\"451\":\"forum/components/MessageComposer\",\"619\":\"forum/components/DialogDropdownList\"}[chunkId] + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.f.compat = (chunkId, promises) => {\n\n\tconst originalLoadChunk = __webpack_require__.l;\n\t__webpack_require__.l = flarum.reg.loadChunk.bind(flarum.reg, originalLoadChunk);\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t170: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmodule_exports\"] = self[\"webpackChunkmodule_exports\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/HeaderSecondary');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/UserControls');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/HeaderDropdown');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/forum/app';\nimport HeaderDropdown from 'flarum/forum/components/HeaderDropdown';\nimport classList from 'flarum/common/utils/classList';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nexport default class DialogsDropdown extends HeaderDropdown {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"DialogDropdownList\", null);\n  }\n  static initAttrs(attrs) {\n    attrs.className = classList('DialogsDropdown', attrs.className);\n    attrs.label = attrs.label || app.translator.trans('flarum-messages.forum.header.dropdown_tooltip');\n    attrs.icon = attrs.icon || 'fas fa-envelope';\n    super.initAttrs(attrs);\n  }\n  getContent() {\n    if (!this.DialogDropdownList) {\n      import(/* webpackChunkName: 'forum/components/DialogDropdownList', webpackMode: 'lazy-once' */ './DialogDropdownList').then(DialogDropdownList => {\n        this.DialogDropdownList = DialogDropdownList.default;\n      });\n      return m(LoadingIndicator, null);\n    }\n    return m(this.DialogDropdownList, {\n      state: this.attrs.state\n    });\n  }\n  goToRoute() {\n    m.route.set(app.route('dialogs'));\n  }\n  getUnreadCount() {\n    return app.session.user.attribute('messageCount');\n  }\n  getNewCount() {\n    return app.session.user.attribute('messageCount');\n  }\n}\nflarum.reg.add('flarum-messages', 'forum/components/DialogsDropdown', DialogsDropdown);flarum.reg.addChunkModule('619', '331', 'flarum-messages', 'forum/components/DialogDropdownList');\nflarum.reg.addChunkModule('619', '331', 'flarum-messages', 'forum/components/DialogList');\nflarum.reg.addChunkModule('619', '331', 'flarum-messages', 'forum/components/DialogListItem');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/forum/app';\nimport PaginatedListState from 'flarum/common/states/PaginatedListState';\nexport default class DialogListState extends PaginatedListState {\n  constructor(params, page, perPage) {\n    if (page === void 0) {\n      page = 1;\n    }\n    if (perPage === void 0) {\n      perPage = null;\n    }\n    super(params, page, perPage);\n    _defineProperty(this, \"lastCount\", 0);\n  }\n  get type() {\n    return 'dialogs';\n  }\n  getAllItems() {\n    return super.getAllItems();\n  }\n  requestParams() {\n    const params = {\n      include: ['lastMessage', 'users.groups'],\n      filter: this.params.filter || {},\n      sort: this.currentSort() || this.sortValue(Object.values(this.sortMap())[0])\n    };\n    return params;\n  }\n  sortMap() {\n    const map = {};\n    map.latest = '-lastMessageAt';\n    map.newest = '-createdAt';\n    map.oldest = 'createdAt';\n    return map;\n  }\n  load() {\n    var _app$session$user;\n    if (((_app$session$user = app.session.user) == null ? void 0 : _app$session$user.attribute('messageCount')) !== this.lastCount) {\n      var _app$session$user2;\n      this.pages = [];\n      this.location = {\n        page: 1\n      };\n      this.lastCount = ((_app$session$user2 = app.session.user) == null ? void 0 : _app$session$user2.attribute('messageCount')) || 0;\n    }\n    if (this.pages.length > 0) {\n      return Promise.resolve();\n    }\n    return super.loadNext();\n  }\n  markAllAsRead() {\n    return app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/dialogs/read'\n    }).then(() => {\n      app.dialogs.getAllItems().forEach(dialog => {\n        dialog.pushAttributes({\n          unreadCount: 0\n        });\n      });\n      app.session.user.pushAttributes({\n        messageCount: 0\n      });\n      app.dropdownDialogs.clear();\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('flarum-messages', 'forum/states/DialogListState', DialogListState);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/computed');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/string');","import Model from 'flarum/common/Model';\nimport computed from 'flarum/common/utils/computed';\nimport { getPlainContent } from 'flarum/common/utils/string';\nexport default class DialogMessage extends Model {\n  content() {\n    return Model.attribute('content').call(this);\n  }\n  contentHtml() {\n    return Model.attribute('contentHtml').call(this);\n  }\n  renderFailed() {\n    return Model.attribute('renderFailed').call(this);\n  }\n  contentPlain() {\n    return computed('contentHtml', content => {\n      if (typeof content === 'string') {\n        return getPlainContent(content);\n      }\n      return content;\n    }).call(this);\n  }\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n  dialog() {\n    return Model.hasOne('dialog').call(this);\n  }\n  user() {\n    return Model.hasOne('user').call(this);\n  }\n}\nflarum.reg.add('flarum-messages', 'common/models/DialogMessage', DialogMessage);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/app');","import Model from 'flarum/common/Model';\nimport app from 'flarum/common/app';\nexport default class Dialog extends Model {\n  title() {\n    return Model.attribute('title').call(this);\n  }\n  type() {\n    return Model.attribute('type').call(this);\n  }\n  lastMessageAt() {\n    return Model.attribute('lastMessageAt', Model.transformDate).call(this);\n  }\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n  users() {\n    return Model.hasMany('users').call(this);\n  }\n  firstMessage() {\n    return Model.hasOne('firstMessage').call(this);\n  }\n  lastMessage() {\n    return Model.hasOne('lastMessage').call(this);\n  }\n  unreadCount() {\n    return Model.attribute('unreadCount').call(this);\n  }\n  lastReadMessageId() {\n    return Model.attribute('lastReadMessageId').call(this);\n  }\n  lastReadAt() {\n    return Model.attribute('lastReadAt', Model.transformDate).call(this);\n  }\n  recipient() {\n    let users = this.users();\n    return !users ? null : users.find(user => user && user.id() !== app.session.user.id());\n  }\n}\nflarum.reg.add('flarum-messages', 'common/models/Dialog', Dialog);","import DialogMessage from './models/DialogMessage';\nimport Dialog from './models/Dialog';\nimport Extend from 'flarum/common/extenders';\nexport default [new Extend.Store().add('dialogs', Dialog) //\n.add('dialog-messages', DialogMessage) //\n];","import app from 'flarum/forum/app';\nimport Extend from 'flarum/common/extenders';\nimport commonExtend from '../common/extend';\nexport default [...commonExtend, new Extend.Routes() //\n.add('messages', '/messages', () => import(/* webpackChunkName: 'forum/components/MessagesPage', webpackMode: 'lazy-once' */ './components/MessagesPage')).add('dialog', '/messages/dialog/:id', () => import(/* webpackChunkName: 'forum/components/MessagesPage', webpackMode: 'lazy-once' */ './components/MessagesPage')).helper('dialog', dialog => app.route('dialog', {\n  id: dialog.id()\n}))];flarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/MessagesPage');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/MessagesSidebar');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/DialogSection');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/MessageStream');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/states/MessageStreamState');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/DetailsModal');\nflarum.reg.addChunkModule('301', '654', 'flarum-messages', 'forum/components/Message');","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexSidebar from 'flarum/forum/components/IndexSidebar';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport UserControls from 'flarum/forum/utils/UserControls';\nimport Button from 'flarum/common/components/Button';\nimport DialogsDropdown from './components/DialogsDropdown';\nimport DialogListState from './states/DialogListState';\nexport { default as extend } from './extend';\napp.initializers.add('flarum-messages', () => {\n  app.dialogs = new DialogListState({}, 1);\n  app.dropdownDialogs = new DialogListState({\n    filter: {\n      unread: true\n    }\n  }, 1, 5);\n  app.composer.composingMessageTo = function (dialog) {\n    const MessageComposer = flarum.reg.checkModule('flarum-messages', 'forum/components/MessageComposer');\n    if (!MessageComposer) return false;\n    return this.isVisible() && this.bodyMatches(MessageComposer, {\n      dialog\n    });\n  };\n  extend(IndexSidebar.prototype, 'navItems', function (items) {\n    if (app.session.user) {\n      items.add('messages', m(LinkButton, {\n        href: app.route('messages'),\n        icon: \"far fa-envelope\",\n        active: app.current.data.routeName && ['messages', 'dialog'].includes(app.current.data.routeName)\n      }, app.translator.trans('flarum-messages.forum.index.messages_link')), 95);\n    }\n  });\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    var _app$session$user;\n    if ((_app$session$user = app.session.user) != null && _app$session$user.attribute('canSendAnyMessage')) {\n      items.add('messages', m(DialogsDropdown, {\n        state: app.dropdownDialogs\n      }), 15);\n    }\n  });\n\n  // @ts-ignore\n  extend(UserControls, 'userControls', (items, user) => {\n    var _app$session$user2;\n    if ((_app$session$user2 = app.session.user) != null && _app$session$user2.attribute('canSendAnyMessage')) {\n      items.add('sendMessage', m(Button, {\n        icon: \"fas fa-envelope\",\n        onclick: () => {\n          flarum.reg.asyncModuleImport('flarum/forum/components/ComposerBody').then(() => {\n            app.composer.load(() => import(/* webpackChunkName: 'forum/components/MessageComposer', webpackMode: 'lazy-once' */ './components/MessageComposer'), {\n              user: app.session.user,\n              recipients: [user]\n            }).then(() => app.composer.show());\n          });\n        }\n      }, app.translator.trans('flarum-messages.forum.user_controls.send_message_button')));\n    }\n  });\n  extend('flarum/forum/components/NotificationGrid', 'notificationTypes', function (items) {\n    items.add('messageReceived', {\n      name: 'messageReceived',\n      icon: 'fas fa-envelope',\n      label: app.translator.trans('flarum-messages.forum.settings.notify_message_received_label')\n    });\n  });\n});flarum.reg.addChunkModule('451', '761', 'flarum-messages', 'forum/components/MessageComposer');"],"names":["inProgress","dataWebpackPrefix","module","exports","flarum","reg","get","_typeof","o","Symbol","iterator","constructor","prototype","_defineProperty","obj","key","value","i","t","r","e","toPrimitive","call","TypeError","String","Object","defineProperty","enumerable","configurable","writable","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","m","n","getter","__esModule","d","a","definition","f","chunkId","Promise","all","keys","reduce","promises","u","g","globalThis","this","Function","window","prop","hasOwnProperty","l","url","done","push","script","needAttach","scripts","document","getElementsByTagName","length","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","forEach","fn","setTimeout","bind","type","target","head","appendChild","toStringTag","scriptUrl","importScripts","location","currentScript","test","Error","replace","p","compat","originalLoadChunk","loadChunk","installedChunks","j","installedChunkData","promise","resolve","reject","error","errorType","realSrc","message","name","request","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","some","id","chunkLoadingGlobal","self","DialogsDropdown","super","arguments","initAttrs","attrs","className","label","trans","icon","getContent","DialogDropdownList","state","then","default","goToRoute","route","set","getUnreadCount","user","attribute","getNewCount","add","addChunkModule","DialogListState","params","page","perPage","getAllItems","requestParams","include","filter","sort","currentSort","sortValue","values","sortMap","map","load","_app$session$user","_app$session$user2","lastCount","pages","loadNext","markAllAsRead","method","dialog","pushAttributes","unreadCount","messageCount","clear","redraw","DialogMessage","content","contentHtml","renderFailed","contentPlain","getPlainContent","createdAt","Dialog","title","lastMessageAt","users","firstMessage","lastMessage","lastReadMessageId","lastReadAt","recipient","find","helper","unread","composingMessageTo","MessageComposer","checkModule","isVisible","bodyMatches","extend","items","href","active","routeName","includes","onclick","asyncModuleImport","recipients","show"],"sourceRoot":""}