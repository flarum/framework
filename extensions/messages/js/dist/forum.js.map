{"version":3,"file":"forum.js","mappings":"UAAIA,EACAC,E,wBCDJC,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,mB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,6B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,6B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,qBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,+B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,qC,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,0B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,4B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,uC,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,0B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,0B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,mC,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,wB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,8B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,sB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,yB,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,Y,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,gC,uBCAxCJ,EAAOC,QAAUC,OAAOC,IAAIC,IAAI,OAAQ,2B,uBCAxCJ,EAAOC,QAAU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","sources":["webpack://@flarum/messages/webpack/runtime/load script","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Avatar')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Dropdown')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Icon')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/InfoTile')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Link')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/LinkButton')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Modal')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Page')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/Tooltip')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/components/UserSelectionModal')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/fullTime')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/humanTime')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/listItems')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/helpers/username')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/states/PaginatedListState')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/ScrollListener')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/Stream')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/classList')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/extractText')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/AbstractPost')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/Comment')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/ComposerBody')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/HeaderList')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/IndexSidebar')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/PageStructure')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/PostMeta')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/PostUser')\"","webpack://@flarum/messages/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@flarum/messages/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@flarum/messages/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@flarum/messages/../../../js-packages/webpack-config/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@flarum/messages/webpack/bootstrap","webpack://@flarum/messages/webpack/runtime/compat get default export","webpack://@flarum/messages/webpack/runtime/define property getters","webpack://@flarum/messages/webpack/runtime/ensure chunk","webpack://@flarum/messages/webpack/runtime/get javascript chunk filename","webpack://@flarum/messages/webpack/runtime/global","webpack://@flarum/messages/webpack/runtime/hasOwnProperty shorthand","webpack://@flarum/messages/webpack/runtime/make namespace object","webpack://@flarum/messages/webpack/runtime/publicPath","webpack://@flarum/messages/webpack/runtime/compat","webpack://@flarum/messages/webpack/runtime/jsonp chunk loading","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/HeaderSecondary')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/utils/UserControls')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'forum/components/HeaderDropdown')\"","webpack://@flarum/messages/./src/forum/components/DialogsDropdown.tsx","webpack://@flarum/messages/./src/forum/states/DialogListState.ts","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/computed')\"","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/utils/string')\"","webpack://@flarum/messages/./src/common/models/DialogMessage.ts","webpack://@flarum/messages/external root \"flarum.reg.get('core', 'common/app')\"","webpack://@flarum/messages/./src/common/models/Dialog.ts","webpack://@flarum/messages/./src/common/extend.ts","webpack://@flarum/messages/./src/forum/extend.ts","webpack://@flarum/messages/./src/forum/index.tsx"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"module.exports:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","module.exports = flarum.reg.get('core', 'common/Component');","module.exports = flarum.reg.get('core', 'common/components/Avatar');","module.exports = flarum.reg.get('core', 'common/components/Button');","module.exports = flarum.reg.get('core', 'common/components/Dropdown');","module.exports = flarum.reg.get('core', 'common/components/Icon');","module.exports = flarum.reg.get('core', 'common/components/InfoTile');","module.exports = flarum.reg.get('core', 'common/components/Link');","module.exports = flarum.reg.get('core', 'common/components/LinkButton');","module.exports = flarum.reg.get('core', 'common/components/LoadingIndicator');","module.exports = flarum.reg.get('core', 'common/components/Modal');","module.exports = flarum.reg.get('core', 'common/components/Page');","module.exports = flarum.reg.get('core', 'common/components/Tooltip');","module.exports = flarum.reg.get('core', 'common/components/UserSelectionModal');","module.exports = flarum.reg.get('core', 'common/helpers/fullTime');","module.exports = flarum.reg.get('core', 'common/helpers/humanTime');","module.exports = flarum.reg.get('core', 'common/helpers/listItems');","module.exports = flarum.reg.get('core', 'common/helpers/username');","module.exports = flarum.reg.get('core', 'common/states/PaginatedListState');","module.exports = flarum.reg.get('core', 'common/utils/ItemList');","module.exports = flarum.reg.get('core', 'common/utils/ScrollListener');","module.exports = flarum.reg.get('core', 'common/utils/Stream');","module.exports = flarum.reg.get('core', 'common/utils/classList');","module.exports = flarum.reg.get('core', 'common/utils/extractText');","module.exports = flarum.reg.get('core', 'forum/app');","module.exports = flarum.reg.get('core', 'forum/components/AbstractPost');","module.exports = flarum.reg.get('core', 'forum/components/Comment');","module.exports = flarum.reg.get('core', 'forum/components/ComposerBody');","module.exports = flarum.reg.get('core', 'forum/components/HeaderList');","module.exports = flarum.reg.get('core', 'forum/components/IndexSidebar');","module.exports = flarum.reg.get('core', 'forum/components/PageStructure');","module.exports = flarum.reg.get('core', 'forum/components/PostMeta');","module.exports = flarum.reg.get('core', 'forum/components/PostUser');","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + {\"2\":\"forum/components/MessagesPage\",\"172\":\"forum/components/DialogDropdownList\",\"514\":\"forum/components/MessageComposer\"}[chunkId] + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.f.compat = (chunkId, promises) => {\n\n\tconst originalLoadChunk = __webpack_require__.l;\n\t__webpack_require__.l = flarum.reg.loadChunk.bind(flarum.reg, originalLoadChunk);\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t315: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmodule_exports\"] = self[\"webpackChunkmodule_exports\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/HeaderSecondary');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/UserControls');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/components/HeaderDropdown');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/forum/app';\nimport HeaderDropdown from 'flarum/forum/components/HeaderDropdown';\nimport classList from 'flarum/common/utils/classList';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nexport default class DialogsDropdown extends HeaderDropdown {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"DialogDropdownList\", null);\n  }\n  static initAttrs(attrs) {\n    attrs.className = classList('DialogsDropdown', attrs.className);\n    attrs.label = attrs.label || app.translator.trans('flarum-messages.forum.header.dropdown_tooltip');\n    attrs.icon = attrs.icon || 'fas fa-envelope';\n    super.initAttrs(attrs);\n  }\n  getContent() {\n    if (!this.DialogDropdownList) {\n      import(/* webpackChunkName: 'forum/components/DialogDropdownList', webpackMode: 'lazy-once' */ './DialogDropdownList').then(DialogDropdownList => {\n        this.DialogDropdownList = DialogDropdownList.default;\n      });\n      return m(LoadingIndicator, null);\n    }\n    return m(this.DialogDropdownList, {\n      state: this.attrs.state\n    });\n  }\n  goToRoute() {\n    m.route.set(app.route('dialogs'));\n  }\n  getUnreadCount() {\n    return app.session.user.attribute('messageCount');\n  }\n  getNewCount() {\n    return app.session.user.attribute('messageCount');\n  }\n}\nflarum.reg.add('flarum-messages', 'forum/components/DialogsDropdown', DialogsDropdown);flarum.reg.addChunkModule('172', '790', 'flarum-messages', 'forum/components/DialogDropdownList');\nflarum.reg.addChunkModule('172', '790', 'flarum-messages', 'forum/components/DialogList');\nflarum.reg.addChunkModule('172', '790', 'flarum-messages', 'forum/components/DialogListItem');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/forum/app';\nimport PaginatedListState from 'flarum/common/states/PaginatedListState';\nexport default class DialogListState extends PaginatedListState {\n  constructor(params, page, perPage) {\n    if (page === void 0) {\n      page = 1;\n    }\n    if (perPage === void 0) {\n      perPage = null;\n    }\n    super(params, page, perPage);\n    _defineProperty(this, \"lastCount\", 0);\n  }\n  get type() {\n    return 'dialogs';\n  }\n  getAllItems() {\n    return super.getAllItems();\n  }\n  requestParams() {\n    const params = {\n      include: ['lastMessage', 'users.groups'],\n      filter: this.params.filter || {},\n      sort: this.currentSort() || this.sortValue(Object.values(this.sortMap())[0])\n    };\n    return params;\n  }\n  sortMap() {\n    const map = {};\n    map.latest = '-lastMessageAt';\n    map.newest = '-createdAt';\n    map.oldest = 'createdAt';\n    return map;\n  }\n  load() {\n    var _app$session$user;\n    if (((_app$session$user = app.session.user) == null ? void 0 : _app$session$user.attribute('messageCount')) !== this.lastCount) {\n      var _app$session$user2;\n      this.pages = [];\n      this.location = {\n        page: 1\n      };\n      this.lastCount = ((_app$session$user2 = app.session.user) == null ? void 0 : _app$session$user2.attribute('messageCount')) || 0;\n    }\n    if (this.pages.length > 0) {\n      return Promise.resolve();\n    }\n    return super.loadNext();\n  }\n  markAllAsRead() {\n    return app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/dialogs/read'\n    }).then(() => {\n      app.dialogs.getAllItems().forEach(dialog => {\n        dialog.pushAttributes({\n          unreadCount: 0\n        });\n      });\n      app.session.user.pushAttributes({\n        messageCount: 0\n      });\n      app.dropdownDialogs.clear();\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('flarum-messages', 'forum/states/DialogListState', DialogListState);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/computed');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/string');","import Model from 'flarum/common/Model';\nimport computed from 'flarum/common/utils/computed';\nimport { getPlainContent } from 'flarum/common/utils/string';\nexport default class DialogMessage extends Model {\n  content() {\n    return Model.attribute('content').call(this);\n  }\n  contentHtml() {\n    return Model.attribute('contentHtml').call(this);\n  }\n  renderFailed() {\n    return Model.attribute('renderFailed').call(this);\n  }\n  contentPlain() {\n    return computed('contentHtml', content => {\n      if (typeof content === 'string') {\n        return getPlainContent(content);\n      }\n      return content;\n    }).call(this);\n  }\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n  dialog() {\n    return Model.hasOne('dialog').call(this);\n  }\n  user() {\n    return Model.hasOne('user').call(this);\n  }\n}\nflarum.reg.add('flarum-messages', 'common/models/DialogMessage', DialogMessage);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/app');","import Model from 'flarum/common/Model';\nimport app from 'flarum/common/app';\nexport default class Dialog extends Model {\n  title() {\n    return Model.attribute('title').call(this);\n  }\n  type() {\n    return Model.attribute('type').call(this);\n  }\n  lastMessageAt() {\n    return Model.attribute('lastMessageAt', Model.transformDate).call(this);\n  }\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n  users() {\n    return Model.hasMany('users').call(this);\n  }\n  firstMessage() {\n    return Model.hasOne('firstMessage').call(this);\n  }\n  lastMessage() {\n    return Model.hasOne('lastMessage').call(this);\n  }\n  unreadCount() {\n    return Model.attribute('unreadCount').call(this);\n  }\n  lastReadMessageId() {\n    return Model.attribute('lastReadMessageId').call(this);\n  }\n  lastReadAt() {\n    return Model.attribute('lastReadAt', Model.transformDate).call(this);\n  }\n  recipient() {\n    let users = this.users();\n    return !users ? null : users.find(user => user && user.id() !== app.session.user.id());\n  }\n}\nflarum.reg.add('flarum-messages', 'common/models/Dialog', Dialog);","import DialogMessage from './models/DialogMessage';\nimport Dialog from './models/Dialog';\nimport Extend from 'flarum/common/extenders';\nexport default [new Extend.Store().add('dialogs', Dialog) //\n.add('dialog-messages', DialogMessage) //\n];","import app from 'flarum/forum/app';\nimport Extend from 'flarum/common/extenders';\nimport commonExtend from '../common/extend';\nexport default [...commonExtend, new Extend.Routes() //\n.add('messages', '/messages', () => import(/* webpackChunkName: 'forum/components/MessagesPage', webpackMode: 'lazy-once' */ './components/MessagesPage')).add('dialog', '/messages/dialog/:id', () => import(/* webpackChunkName: 'forum/components/MessagesPage', webpackMode: 'lazy-once' */ './components/MessagesPage')).helper('dialog', dialog => app.route('dialog', {\n  id: dialog.id()\n}))];flarum.reg.addChunkModule('2', '799', 'flarum-messages', 'forum/components/MessagesPage');\nflarum.reg.addChunkModule('2', '799', 'flarum-messages', 'forum/components/MessagesSidebar');\nflarum.reg.addChunkModule('2', '799', 'flarum-messages', 'forum/components/DialogSection');\nflarum.reg.addChunkModule('2', '799', 'flarum-messages', 'forum/components/MessageStream');\nflarum.reg.addChunkModule('2', '799', 'flarum-messages', 'forum/states/MessageStreamState');\nflarum.reg.addChunkModule('2', '799', 'flarum-messages', 'forum/components/DetailsModal');\nflarum.reg.addChunkModule('2', '799', 'flarum-messages', 'forum/components/Message');","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport IndexSidebar from 'flarum/forum/components/IndexSidebar';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\nimport UserControls from 'flarum/forum/utils/UserControls';\nimport Button from 'flarum/common/components/Button';\nimport DialogsDropdown from './components/DialogsDropdown';\nimport DialogListState from './states/DialogListState';\nexport { default as extend } from './extend';\napp.initializers.add('flarum-messages', () => {\n  app.dialogs = new DialogListState({}, 1);\n  app.dropdownDialogs = new DialogListState({\n    filter: {\n      unread: true\n    }\n  }, 1, 5);\n  app.composer.composingMessageTo = function (dialog) {\n    const MessageComposer = flarum.reg.checkModule('flarum-messages', 'forum/components/MessageComposer');\n    if (!MessageComposer) return false;\n    return this.isVisible() && this.bodyMatches(MessageComposer, {\n      dialog\n    });\n  };\n  extend(IndexSidebar.prototype, 'navItems', function (items) {\n    if (app.session.user) {\n      items.add('messages', m(LinkButton, {\n        href: app.route('messages'),\n        icon: \"far fa-envelope\",\n        active: app.current.data.routeName && ['messages', 'dialog'].includes(app.current.data.routeName)\n      }, app.translator.trans('flarum-messages.forum.index.messages_link')), 95);\n    }\n  });\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    var _app$session$user;\n    if ((_app$session$user = app.session.user) != null && _app$session$user.attribute('canSendAnyMessage')) {\n      items.add('messages', m(DialogsDropdown, {\n        state: app.dropdownDialogs\n      }), 15);\n    }\n  });\n\n  // @ts-ignore\n  extend(UserControls, 'userControls', (items, user) => {\n    var _app$session$user2;\n    if ((_app$session$user2 = app.session.user) != null && _app$session$user2.attribute('canSendAnyMessage')) {\n      items.add('sendMessage', m(Button, {\n        icon: \"fas fa-envelope\",\n        onclick: () => {\n          flarum.reg.asyncModuleImport('flarum/forum/components/ComposerBody').then(() => {\n            app.composer.load(() => import(/* webpackChunkName: 'forum/components/MessageComposer', webpackMode: 'lazy-once' */ './components/MessageComposer'), {\n              user: app.session.user,\n              recipients: [user]\n            }).then(() => app.composer.show());\n          });\n        }\n      }, app.translator.trans('flarum-messages.forum.user_controls.send_message_button')));\n    }\n  });\n  extend('flarum/forum/components/NotificationGrid', 'notificationTypes', function (items) {\n    items.add('messageReceived', {\n      name: 'messageReceived',\n      icon: 'fas fa-envelope',\n      label: app.translator.trans('flarum-messages.forum.settings.notify_message_received_label')\n    });\n  });\n});"],"names":["inProgress","dataWebpackPrefix","module","exports","flarum","reg","get","_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","value","arg","input","hint","prim","toPrimitive","undefined","res","call","TypeError","String","toPropertyKey","Object","defineProperty","enumerable","configurable","writable","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","n","getter","__esModule","d","a","definition","o","f","e","chunkId","Promise","all","keys","reduce","promises","u","g","globalThis","this","Function","window","prop","hasOwnProperty","l","url","done","push","script","needAttach","scripts","document","getElementsByTagName","i","length","s","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","prev","event","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","forEach","fn","setTimeout","bind","type","target","head","appendChild","r","toStringTag","scriptUrl","importScripts","location","currentScript","Error","replace","p","compat","originalLoadChunk","loadChunk","installedChunks","j","installedChunkData","promise","resolve","reject","error","errorType","realSrc","message","name","request","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","some","id","chunkLoadingGlobal","self","DialogsDropdown","super","arguments","static","attrs","className","label","icon","initAttrs","getContent","DialogDropdownList","state","then","default","goToRoute","route","set","getUnreadCount","getNewCount","add","addChunkModule","DialogListState","params","page","perPage","getAllItems","requestParams","include","filter","sort","currentSort","sortValue","values","sortMap","map","load","_app$session$user","_app$session$user2","attribute","lastCount","pages","loadNext","markAllAsRead","method","dialog","pushAttributes","unreadCount","messageCount","redraw","DialogMessage","content","contentHtml","renderFailed","contentPlain","getPlainContent","createdAt","user","Dialog","title","lastMessageAt","users","firstMessage","lastMessage","lastReadMessageId","lastReadAt","recipient","find","helper","unread","MessageComposer","checkModule","isVisible","bodyMatches","extend","items","href","active","includes","onclick","asyncModuleImport","recipients"],"sourceRoot":""}