{"version":3,"sources":["webpack://@flarum/core/webpack/bootstrap","webpack://@flarum/core/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/core/./src/common/Model.js","webpack://@flarum/core/./src/common/components/Button.js","webpack://@flarum/core/./src/common/Component.js","webpack://@flarum/core/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@flarum/core/./src/common/utils/ItemList.js","webpack://@flarum/core/./src/common/helpers/icon.js","webpack://@flarum/core/./src/common/helpers/listItems.js","webpack://@flarum/core/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@flarum/core/./src/common/utils/extractText.js","webpack://@flarum/core/./src/common/utils/extract.js","webpack://@flarum/core/./src/common/models/Group.js","webpack://@flarum/core/./src/common/components/Modal.js","webpack://@flarum/core/./src/common/components/Dropdown.js","webpack://@flarum/core/./node_modules/spin.js/spin.js","webpack://@flarum/core/./src/common/components/LoadingIndicator.js","webpack://@flarum/core/./src/common/helpers/avatar.js","webpack://@flarum/core/./src/common/components/Alert.js","webpack://@flarum/core/./src/common/helpers/username.js","webpack://@flarum/core/./src/common/utils/computed.js","webpack://@flarum/core/./src/common/components/LinkButton.js","webpack://@flarum/core/./src/common/components/Separator.js","webpack://@flarum/core/(webpack)/buildin/global.js","webpack://@flarum/core/./src/common/utils/humanTime.js","webpack://@flarum/core/./src/common/components/Badge.js","webpack://@flarum/core/./src/common/components/FieldSet.js","webpack://@flarum/core/./src/common/utils/classList.js","webpack://@flarum/core/./src/common/utils/string.js","webpack://@flarum/core/./src/common/components/SelectDropdown.js","webpack://@flarum/core/./src/common/components/GroupBadge.js","webpack://@flarum/core/./src/common/helpers/highlight.js","webpack://@flarum/core/./src/common/utils/ScrollListener.js","webpack://@flarum/core/./src/common/extend.js","webpack://@flarum/core/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@flarum/core/./src/common/components/Switch.js","webpack://@flarum/core/./src/common/models/User.js","webpack://@flarum/core/./src/common/utils/SubtreeRetainer.js","webpack://@flarum/core/./src/common/models/Discussion.js","webpack://@flarum/core/./src/common/helpers/humanTime.js","webpack://@flarum/core/./src/common/components/Checkbox.js","webpack://@flarum/core/./src/common/utils/RequestError.js","webpack://@flarum/core/./src/common/components/Navigation.js","webpack://@flarum/core/./src/common/components/Select.js","webpack://@flarum/core/./src/common/utils/patchMithril.js","webpack://@flarum/core/./src/common/components/Placeholder.js","webpack://@flarum/core/./src/common/components/AlertManager.js","webpack://@flarum/core/./src/common/components/RequestErrorModal.js","webpack://@flarum/core/./src/common/Translator.js","webpack://@flarum/core/./src/common/utils/stringToColor.js","webpack://@flarum/core/./src/common/Store.js","webpack://@flarum/core/./src/common/Session.js","webpack://@flarum/core/./src/common/utils/Drawer.js","webpack://@flarum/core/./src/common/utils/mapRoutes.js","webpack://@flarum/core/./src/common/models/Forum.js","webpack://@flarum/core/./src/common/models/Post.js","webpack://@flarum/core/./src/common/models/Notification.js","webpack://@flarum/core/./node_modules/lodash-es/_arrayPush.js","webpack://@flarum/core/./node_modules/lodash-es/_root.js","webpack://@flarum/core/./node_modules/lodash-es/_Symbol.js","webpack://@flarum/core/./node_modules/lodash-es/_getRawTag.js","webpack://@flarum/core/./node_modules/lodash-es/_objectToString.js","webpack://@flarum/core/./node_modules/lodash-es/_baseGetTag.js","webpack://@flarum/core/./node_modules/lodash-es/isObjectLike.js","webpack://@flarum/core/./node_modules/lodash-es/_baseIsArguments.js","webpack://@flarum/core/./node_modules/lodash-es/isArguments.js","webpack://@flarum/core/./node_modules/lodash-es/isArray.js","webpack://@flarum/core/./node_modules/lodash-es/_isFlattenable.js","webpack://@flarum/core/./node_modules/lodash-es/_baseFlatten.js","webpack://@flarum/core/./node_modules/lodash-es/flattenDeep.js","webpack://@flarum/core/./src/common/Application.js","webpack://@flarum/core/./node_modules/micromodal/dist/micromodal.es.js","webpack://@flarum/core/./src/common/components/ModalManager.js","webpack://@flarum/core/./src/common/utils/formatNumber.js","webpack://@flarum/core/./src/common/utils/anchorScroll.js","webpack://@flarum/core/./src/common/utils/evented.js","webpack://@flarum/core/./src/common/components/SplitDropdown.js","webpack://@flarum/core/./src/common/helpers/userOnline.js","webpack://@flarum/core/./src/common/helpers/fullTime.js","webpack://@flarum/core/./src/common/utils/abbreviateNumber.js","webpack://@flarum/core/./node_modules/mithril/mithril.js","webpack://@flarum/core/./node_modules/jump.js/dist/jump.module.js","webpack://@flarum/core/./node_modules/tooltip.js/dist/esm/tooltip.js","webpack://@flarum/core/./src/common/utils/patchZepto.js","webpack://@flarum/core/./src/common/extend/Model.js","webpack://@flarum/core/./src/common/extend/PostTypes.js","webpack://@flarum/core/./src/common/extend/Routes.js","webpack://@flarum/core/./src/common/index.js","webpack://@flarum/core/./node_modules/popper.js/dist/esm/popper.js","webpack://@flarum/core/./node_modules/dayjs/plugin/relativeTime.js","webpack://@flarum/core/./node_modules/dayjs/plugin/localizedFormat.js","webpack://@flarum/core/./node_modules/lodash-es/_freeGlobal.js","webpack://@flarum/core/./src/common/utils/liveHumanTimes.js","webpack://@flarum/core/./src/common/compat.js","webpack://@flarum/core/./src/common/utils/mixin.js","webpack://@flarum/core/./src/common/helpers/punctuateSeries.js","webpack://@flarum/core/(webpack)/buildin/module.js","webpack://@flarum/core/./node_modules/zepto/dist/zepto.js-exposed","webpack://@flarum/core/./node_modules/zepto/dist/zepto.js","webpack://@flarum/core/./node_modules/dayjs/dayjs.min.js-exposed?952c","webpack://@flarum/core/./node_modules/dayjs/dayjs.min.js-exposed","webpack://@flarum/core/./node_modules/dayjs/dayjs.min.js","webpack://@flarum/core/./node_modules/mithril/mithril.js-exposed","webpack://@flarum/core/./node_modules/m.attrs.bidi/bidi.js-exposed","webpack://@flarum/core/./node_modules/m.attrs.bidi/bidi.js","webpack://@flarum/core/./node_modules/mousetrap/mousetrap.js-exposed","webpack://@flarum/core/./node_modules/mousetrap/mousetrap.js","webpack://@flarum/core/./node_modules/zepto/src/selector.js","webpack://@flarum/core/./node_modules/zepto/src/data.js","webpack://@flarum/core/./node_modules/zepto/src/fx.js","webpack://@flarum/core/./node_modules/zepto/src/fx_methods.js","webpack://@flarum/core/./node_modules/hc-sticky/dist/hc-sticky.js","webpack://@flarum/core/./node_modules/bootstrap/js/dropdown.js","webpack://@flarum/core/./node_modules/bootstrap/js/transition.js","webpack://@flarum/core/./src/admin/components/HeaderPrimary.js","webpack://@flarum/core/./src/admin/components/SessionDropdown.js","webpack://@flarum/core/./src/admin/components/HeaderSecondary.js","webpack://@flarum/core/./src/admin/components/Page.js","webpack://@flarum/core/./src/admin/components/DashboardWidget.js","webpack://@flarum/core/./src/admin/components/LoadingModal.js","webpack://@flarum/core/./src/admin/components/StatusWidget.js","webpack://@flarum/core/./src/admin/components/DashboardPage.js","webpack://@flarum/core/./src/admin/utils/saveSettings.js","webpack://@flarum/core/./src/admin/components/BasicsPage.js","webpack://@flarum/core/./src/admin/components/EditGroupModal.js","webpack://@flarum/core/./src/admin/components/PermissionDropdown.js","webpack://@flarum/core/./src/admin/components/SettingDropdown.js","webpack://@flarum/core/./src/admin/components/PermissionGrid.js","webpack://@flarum/core/./src/admin/components/PermissionsPage.js","webpack://@flarum/core/./src/admin/components/SettingsModal.js","webpack://@flarum/core/./src/admin/components/EditCustomCssModal.js","webpack://@flarum/core/./src/admin/components/EditCustomHeaderModal.js","webpack://@flarum/core/./src/admin/components/EditCustomFooterModal.js","webpack://@flarum/core/./src/admin/components/UploadImageButton.js","webpack://@flarum/core/./src/admin/components/AppearancePage.js","webpack://@flarum/core/./src/admin/components/AddExtensionModal.js","webpack://@flarum/core/./src/admin/components/ExtensionsPage.js","webpack://@flarum/core/./src/admin/components/MailPage.js","webpack://@flarum/core/./src/admin/routes.js","webpack://@flarum/core/./src/admin/components/AdminLinkButton.js","webpack://@flarum/core/./src/admin/components/AdminNav.js","webpack://@flarum/core/./src/admin/AdminApplication.js","webpack://@flarum/core/./src/admin/components/Widget.js","webpack://@flarum/core/./src/admin/compat.js","webpack://@flarum/core/./src/admin/index.js","webpack://@flarum/core/./admin.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_inheritsLoose","subClass","superClass","constructor","__proto__","Model","data","store","this","freshness","Date","exists","id","attribute","attributes","pushData","innerKey","getIdentifier","pushAttributes","save","options","type","relationships","model","Array","map","oldData","copyData","request","meta","app","method","url","forum","apiEndpoint","then","payload","pushPayload","response","lazyRedraw","delete","remove","deferred","resolve","promise","JSON","parse","stringify","transform","hasOne","relationship","getById","hasMany","transformDate","Button","view","attrs","props","children","className","title","extractText","extract","loading","disabled","onclick","getButtonContent","iconName","icon","LoadingIndicator","component","size","Component","initProps","element","retain","init","onunload","render","vdom","subtree","originalConfig","config","args","apply","slice","$","selector","$element","find","Error","componentProps","$original","output","controller","undefined","_extends","assign","target","arguments","length","source","Item","content","priority","ItemList","items","isEmpty","has","add","replace","merge","toArray","itemName","push","sort","a","b","item","fontClass","isSeparator","Separator","listItems","prevItem","newItems","forEach","withoutUnnecessarySeparators","isListItem","active","isActive","itemClassName","classList","_defineProperty","obj","configurable","writable","join","Group","nameSingular","namePlural","color","ADMINISTRATOR_ID","GUEST_ID","MEMBER_ID","Modal","alert","dismissible","isDismissible","hide","onsubmit","onready","first","focus","select","onhide","modal","close","loaded","redraw","onerror","error","status","errors","pointer","Dropdown","buttonClassName","menuClassName","label","caretIcon","showing","getButton","getMenu","isInitialized","dropdown","addEventListener","onshow","$menu","isRight","hasClass","removeClass","toggleClass","offset","top","height","window","scrollTop","left","width","scrollLeft","data-toggle","__assign","defaults","lines","radius","scale","corners","fadeColor","animation","rotate","direction","speed","zIndex","shadow","position","Spinner","opts","spin","stop","el","document","createElement","setAttribute","css","insertBefore","firstChild","borderRadius","Math","round","shadows","boxShadow","regex","_i","_a","split","matches","match","x","y","xUnits","yUnits","prefix","end","parseBoxShadow","degrees","backgroundLine","background","getColor","transformOrigin","delay","line","normalizeShadow","appendChild","drawLines","requestAnimationFrame","cancelAnimationFrame","animateId","clearTimeout","parentNode","removeChild","prop","style","idx","normalized","shadows_1","xy","convertOffset","radians","PI","sin","cos","trust","avatar","user","hasTitle","username","displayName","avatarUrl","src","charAt","toUpperCase","Alert","controls","ondismiss","dismissControl","concat","translator","trans","computed","dependentKeys","computedValue","keys","compute","dependentValues","recompute","LinkButton","route","tag","href","g","Function","e","humanTime","time","dayjs","now","isAfter","diff","year","format","fromNow","Badge","tooltip","container","FieldSet","classes","classNames","filter","truncate","string","start","substring","slug","toLowerCase","getPlainContent","html","dom","removeSelectors","text","trim","ucfirst","substr","SelectDropdown","activeChild","child","defaultLabel","GroupBadge","group","backgroundColor","highlight","phrase","regexp","RegExp","highlighted","max","search","later","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","ScrollListener","ticking","loop","update","pageYOffset","removeEventListener","extend","original","override","newMethod","_assertThisInitialized","self","ReferenceError","Switch","getDisplay","Checkbox","User","email","isEmailConfirmed","password","preferences","groups","joinTime","lastSeenAt","markedAllAsReadAt","unreadNotificationCount","newNotificationCount","discussionCount","commentCount","canEdit","canDelete","avatarColor","calculateAvatarColor","stringToColor","isOnline","subtract","toDate","badges","image","Image","onload","colorThief","ColorThief","crossOrigin","savePreferences","newPreferences","SubtreeRetainer","callbacks","needsRebuild","result","check","invalidate","Discussion","createdAt","firstPost","lastPostedAt","lastPostedUser","lastPost","lastPostNumber","replyCount","posts","mostRelevantPost","lastReadAt","lastReadPostNumber","isUnread","unreadCount","isRead","session","hiddenAt","hiddenUser","isHidden","canReply","canRename","canHide","removePost","some","splice","postIds","link","mo","datetime","full","ago","humanTimeUtil","pubdate","data-humantime","state","checked","onchange","withAttr","RequestError","responseText","xhr","Navigation","history","pane","onmouseenter","show","onmouseleave","canGoBack","getBackButton","getPaneButton","getDrawerButton","context","previous","getPrevious","backUrl","shiftKey","ctrlKey","metaKey","which","preventDefault","back","pinned","togglePinned","drawer","stopPropagation","Select","patchMithril","global","comp","isArray","node","bidi","startComputation","endComputation","Placeholder","AlertManager","components","dismiss","index","indexOf","clear","RequestErrorModal","statusText","Translator","translations","locale","addTranslations","parameters","translation","transChoice","number","parseInt","pluralize","input","hydrated","open","part","shift","unshift","sPluralRegex","cPluralRegex","iPluralRegex","standardRules","explicitRules","test","rule","leftNumber","convertNumber","rightNumber","pluralPosition","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","num","charCodeAt","rgb","h","v","floor","f","q","hsvToRgb","toString","Store","models","included","pushObject","createRecord","query","getBy","all","records","Session","csrfToken","login","logout","location","Drawer","click","isOpen","$backdrop","addClass","appendTo","mapRoutes","routes","basePath","routeName","path","Forum","Post","discussion","contentType","contentHtml","contentPlain","editedAt","editedUser","isEdited","Notification","fromUser","subject","array","values","freeSelf","objectProto","nativeObjectToString","symToStringTag","isOwn","unmasked","propertyIsEnumerable","spreadableSymbol","isConcatSpreadable","baseFlatten","depth","predicate","isStrict","Application","forums","users","discussions","notifications","load","boot","initializers","initializer","resources","userId","mount","bootExtensions","extensions","extension","flattenDeep","getElementById","ModalManager","alerts","$app","preloadedApiDocument","apiDocument","results","setTitle","updateTitle","setTitleCount","count","titleCount","originalOptions","setRequestHeader","deserialize","errorHandler","getResponseHeader","requestError","detail","reduce","isDebug","showDebug","reject","params","queryString","buildQueryString","FOCUSABLE_ELEMENTS","targetModal","triggers","onShow","onClose","openTrigger","closeTrigger","disableScroll","disableFocus","awaitCloseAnimation","awaitOpenAnimation","debugMode","registerTriggers","onClick","onKeydown","Boolean","trigger","event","showModal","activeElement","scrollBehaviour","addEventListeners","handler","setFocusToFirstNode","removeEventListeners","closeModal","toggle","body","querySelector","overflow","hasAttribute","keyCode","maintainFocus","nodes","querySelectorAll","focusableNodes","getFocusableNodes","contains","focusedItemIndex","activeModal","validateModalPresence","console","warn","validateArgs","triggerMap","validateTriggerPresence","triggerAttr","generateTriggerMap","closeModalById","hideTimeout","current","MicroModal","fadeOut","formatNumber","anchorScroll","$window","$el","relativeScroll","handlers","getHandlers","on","one","wrapper","off","SplitDropdown","getFirstChild","buttonProps","userOnline","fullTime","abbreviateNumber","factory","version","hasOwn","isFunction","isObject","isString","noop","$document","$location","$requestAnimationFrame","$cancelAnimationFrame","voidElements","AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR","parseTagAttrs","cell","parser","exec","attrValue","getVirtualChildren","hasAttrs","assignAttrs","classAttr","attrName","pairs","parameterize","list","forKeys","insertNode","parentElement","childNodes","deps","mock","initialize","diffKeys","cached","existing","keysDiffer","cachedCell","action","from","actions","changes","sortChanges","newCached","change","dummy","changeElement","maybeChanged","handleKeysDiffer","maybeRecreateObject","dataAttrKeys","strategy","configContext","isDifferentEnough","controllers","pendingRequests","reattachNodes","editable","parentTag","$trusted","injectHTML","innerHTML","nodeType","nodeValue","createTextNode","injectTextNode","handleTextNode","shouldReattach","valueOf","intact","nodeName","handleNonexistentNodes","getSubArrayCount","buildArray","namespace","configs","flatten","subArrayCount","shouldMaintainIdentities","guid","buildArrayKeys","cacheCount","len","build","_","diffArray","reconstructCached","views","$old","unloadCachedControllers","unloaders","forcing","checkView","cachedControllers","controllerIndex","getController","u","updateLists","buildObject","markViews","hasKeys","isNew","xmlns","getObjectNamespace","setAttributes","constructAttrs","is","createElementNS","constructNode","contenteditable","constructChildren","buildUpdatedNode","scheduleConfigsToBeCalled","parentCache","parentIndex","dataToString","makeCache","shouldUseSetAttribute","form","setSingleAttr","dataAttr","cachedAttr","endFirstComputation","copyStyleAttrs","setAttributeNS","isContentEditable","trySetAttr","cachedAttrs","message","dataAttrs","unload","appendTextFragment","createRange","createContextualFragment","insertAdjacentHTML","replaceScriptNodes","tagName","replaceChild","scriptEl","buildExecutableNode","nextSibling","isElement","placeholder","documentNode","documentElement","nodeCache","cellCache","getCellCacheKey","root","forceRecreation","isDocumentRoot","reset","String","Promise","propify","toJSON","gettersetter","topComponent","currentRoute","previousRoute","roots","lastRedrawId","lastRedrawCallTime","computePreRedrawHook","computePostRedrawHook","ctrl","currentArgs","removeRootElement","isPrevented","unloader","currentComponent","checkPrevented","redrawing","force","withAttrCallback","callbackThis","currentTarget","_this","getAttribute","routeParams","modes","pathname","hash","redirect","isDefaultRoute","normalizeRoute","routeByValue","router","queryStart","parseQueryString","matcher","decodeURIComponent","routeUnobtrusive","returnValue","srcElement","setScroll","scrollTo","duplicates","str","encodeURIComponent","pair","cacheKey","initialValue","arg1","arg2","listener","attachEvent","base","detachEvent","queryIndex","currentPath","querystring","replaceHistory","pushState","err","param","Deferred","onSuccess","onFailure","promiseValue","next","finish","thennable","success","failure","notThennable","fire","TypeError","identity","sync","outstanding","synchronizer","pos","resolved","arg","serialize","dataType","jsonp","token","parameterizeUrl","bindData","ev","unwrapSuccess","res","unwrapError","callbackKey","callbackName","getTime","random","script","resp","handleJsonp","XMLHttpRequest","onreadystatechange","readyState","headers","header","maybeXhr","FormData","send","createXhr","ajax","easeInOutQuad","_typeof","iterator","easing","a11y","distance","duration","timeStart","timeElapsed","scrollY","getBoundingClientRect","timeCurrent","done","jumper","createClass","defineProperties","descriptor","Constructor","protoProps","staticProps","DEFAULT_OPTIONS","placement","template","arrowSelector","innerSelector","Tooltip","reference","instance","classCallCheck","_initialiseProps","jquery","events","_isOpen","_popperOptions","_setEventListeners","allowHtml","tooltipGenerator","tooltipNode","titleNode","_addTitleContent","functionToCheck","titleText","textContent","_isOpening","_tooltipNode","visibility","popperInstance","_create","_findContainer","_append","popperOptions","modifiers","arrow","boundariesElement","preventOverflow","_events","_ref","func","_hide","destroy","removeOnDestroy","_this2","directEvents","oppositeEvents","evt","usedByTooltip","_scheduleShow","_scheduleHide","closeOnClickOutside","popper","_this3","computedDelay","_showTimeout","_show","_this4","_setTooltipNodeEvent","_clearTitleContent","lastTitle","_this5","dispose","_dispose","updateTitleContent","_updateTitleContent","relatedreference","toElement","relatedTarget","evt2","relatedreference2","fn","option","each","$this","attr","removeAttr","includes","dimension","Dimension","margin","elem","side","expr","hover","leave","animatedScrollTop","to","fx","speeds","_default","jump","special","bindBeforeSpecialEvents","eventName","specialEvent","_init","originalHandler","handle","$target","setup","Routes","hasOnes","hasManys","PostTypes","postComponents","relativeTime","localizedFormat","isBrowser","longerTimeoutBrowsers","timeoutDuration","navigator","userAgent","debounce","called","scheduled","getStyleComputedProperty","ownerDocument","defaultView","getComputedStyle","getParentNode","host","getScrollParent","_getStyleComputedProp","overflowX","overflowY","isIE11","MSInputMethodContext","documentMode","isIE10","isIE","getOffsetParent","noOffsetParent","offsetParent","nextElementSibling","getRoot","findCommonOffsetParent","element1","element2","order","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","range","setStart","setEnd","commonAncestorContainer","firstElementChild","element1root","getScroll","upperSide","scrollingElement","includeScroll","rect","modifier","bottom","right","getBordersSize","styles","axis","sideA","sideB","parseFloat","getSize","computedStyle","getWindowSizes","getClientRect","offsets","sizes","clientWidth","clientHeight","horizScrollbar","offsetWidth","vertScrollbar","offsetHeight","getOffsetRectRelativeToArbitraryNode","parent","fixedPosition","isHTML","childrenRect","parentRect","scrollParent","borderTopWidth","borderLeftWidth","marginTop","marginLeft","getViewportOffsetRectRelativeToArtbitraryNode","excludeScroll","relativeOffset","innerWidth","innerHeight","isFixed","getFixedPositionOffsetParent","getBoundaries","padding","boundaries","boundariesNode","_getWindowSizes","isPaddingNumber","getArea","computeAutoPlacement","refRect","rects","sortedAreas","area","filteredAreas","_ref2","computedPlacement","variation","getReferenceOffsets","commonOffsetParent","getOuterSizes","marginBottom","marginRight","getOppositePlacement","matched","getPopperOffsets","referenceOffsets","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","arr","runModifiers","ends","findIndex","cur","enabled","isDestroyed","arrowStyles","flipped","positionFixed","flip","originalPlacement","isCreated","onUpdate","onCreate","isModifierEnabled","modifierName","getSupportedPropertyName","prefixes","upperProp","toCheck","removeAttribute","willChange","disableEventListeners","getWindow","setupEventListeners","updateBound","passive","scrollElement","attachToScrollParents","scrollParents","isBody","eventsEnabled","enableEventListeners","scheduleUpdate","isNumeric","isNaN","isFinite","setStyles","unit","isFirefox","isModifierRequired","requestingName","requestedName","requesting","isRequired","_requesting","requested","placements","validPlacements","clockwise","counter","reverse","BEHAVIORS","parseOffset","basePlacement","useHeight","fragments","frag","divider","splitRegex","ops","op","mergeWithPrevious","toValue","index2","Defaults","shiftvariation","_data$offsets","isVertical","shiftOffsets","transformProp","popperStyles","primary","escapeWithReference","secondary","min","keepTogether","opSide","_data$offsets$arrow","arrowElement","sideCapitalized","altSide","arrowElementSize","center","popperMarginSide","popperBorderSide","sideValue","placementOpposite","flipOrder","behavior","step","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariationByRef","flipVariations","flippedVariationByContent","flipVariationsByContent","flippedVariation","getOppositeVariation","inner","subtractLength","bound","computeStyle","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","shouldRound","noRound","referenceWidth","popperWidth","isVariation","horizontalToInteger","verticalToInteger","getRoundedOffsets","devicePixelRatio","prefixedProperty","invertTop","invertLeft","applyStyle","onLoad","modifierOptions","Popper","Utils","PopperUtils","en","future","past","mm","hh","dd","M","MM","yy","$locale","abs","$u","utc","toNow","LTS","LT","L","LL","LLL","LLLL","formats","freeGlobal","updateHumanTimes","evented","setInterval","Parent","Mixed","mixins","humanTimeHelper","second","third","webpackPolyfill","deprecate","paths","Zepto","camelize","uniq","emptyArray","elementDisplay","classCache","cssNumber","fragmentRE","singleTagRE","tagExpanderRE","rootNodeRE","capitalRE","methodAttributes","table","tableRow","containers","readyRE","simpleSelectorRE","class2type","zepto","tempParent","propMap","isWindow","isDocument","DOCUMENT_NODE","isPlainObject","getPrototypeOf","likeArray","dasherize","classRE","maybeAddPx","Z","deep","filtered","funcArg","klass","svg","baseVal","deserializeValue","parseJSON","traverseNode","fun","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","temp","qsa","chr","fragment","properties","$1","isZ","ready","found","maybeID","maybeClass","nameOnly","isSimple","getElementsByClassName","getElementsByTagName","isEmptyObject","val","inArray","camelCase","uuid","support","elements","grep","every","not","excludes","eq","last","closest","collection","parents","ancestors","pluck","contents","contentDocument","siblings","empty","display","getPropertyValue","replaceWith","newContent","before","wrap","structure","clone","wrapAll","cloneNode","append","wrapInner","unwrap","setting","prev","originHtml","newText","removeProp","multiple","selected","coordinates","coords","parentOffset","pageXOffset","removeProperty","cssText","cls","when","hasScrollTop","scrollX","hasScrollLeft","detach","dimensionProperty","operator","operatorIndex","inside","argType","copyByClone","parentInDocument","_zid","specialEvents","focusinSupported","blur","mouseenter","mouseleave","zid","findHandlers","sel","parts","eventCapture","captureSetting","del","realEvent","delegator","capture","set","related","proxy","compatible","isImmediatePropagationStopped","_args","mousedown","mouseup","mousemove","proxyFn","unbind","returnTrue","returnFalse","ignoreProperties","eventMethods","stopImmediatePropagation","isDefaultPrevented","sourceMethod","timeStamp","defaultPrevented","getPreventDefault","createProxy","originalEvent","delegate","undelegate","live","die","autoRemove","liveFired","Event","dispatchEvent","triggerHandler","createEvent","bubbles","initEvent","jsonpID","rscript","scriptTypeRE","xmlTypeRE","blankRE","originAnchor","triggerGlobal","settings","triggerAndReturn","ajaxBeforeSend","beforeSend","ajaxSuccess","resolveWith","ajaxComplete","ajaxError","rejectWith","complete","ajaxStop","appendQuery","parseArguments","ajaxJSONP","responseData","abortTimeout","_callbackName","jsonpCallback","originalCallback","abort","errorType","head","timeout","ajaxSettings","accepts","json","xml","crossDomain","processData","cache","dataFilter","urlAnchor","hashIndex","ajaxStart","protocol","traditional","serializeData","hasPlaceholder","mime","setHeader","nativeSetHeader","mimeType","overrideMimeType","mimeToDataType","responseType","ajaxDataFilter","eval","responseXML","async","xhrFields","post","getJSON","escape","scope","serializeArray","field","elm","submit","nativeGetComputedStyle","pseudoElement","z","utcOffset","month","ceil","w","ms","Q","weekdays","months","pl","date","D","$L","$d","NaN","UTC","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","isSame","startOf","endOf","isBefore","$g","day","hour","minute","millisecond","unix","weekStart","$set","daysInMonth","meridiem","YY","YYYY","MMM","monthsShort","MMMM","DD","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","A","ss","SSS","getTimezoneOffset","toISOString","toUTCString","isDayjs","Ls","multi","selectedOptions","oninput","_REVERSE_MAP","_MAP","8","9","13","16","17","18","20","27","32","33","34","35","36","37","38","39","40","45","46","91","93","224","_KEYCODE_MAP","106","107","109","110","111","186","187","188","189","190","191","192","219","220","221","222","_SHIFT_MAP","_SPECIAL_ALIASES","platform","Mousetrap","_bindMultiple","_directMap","_callbacks","stopCallback","_belongsTo","ancestor","composedPath","initialEventTarget","handleKey","_handleKey","addKeycodes","documentMousetrap","_addEvent","_characterFromEvent","character","fromCharCode","_isModifier","_pickBestAction","_getReverseMap","_getKeyInfo","combination","_keysFromString","targetElement","_resetTimer","_sequenceLevels","_ignoreNextKeyup","_ignoreNextKeypress","_nextExpectedAction","_resetSequences","doNotReset","activeSequences","_getMatches","sequenceName","level","modifiers1","modifiers2","seq","deleteCombo","combo","deleteSequence","_fireCallback","sequence","_preventDefault","cancelBubble","_stopPropagation","_handleKeyEvent","altKey","_eventModifiers","_bindSequence","_increaseSequence","nextAction","_callbackAndReset","wrappedCallback","_bindSingle","info","maxLevel","processedSequenceCallback","ignoreThisKeypress","combinations","oldQsa","oldMatches","visible","filters","hidden","filterRe","childRe","classTag","process","taggedParent","exp","expando","setData","attributeData","camelName","getData","hasData","removeData","names","methodName","origFn","eventPrefix","transitionProperty","transitionDuration","transitionTiming","transitionDelay","animationName","animationDuration","animationTiming","animationDelay","testEl","supportedTransforms","cssReset","normalizeEvent","Webkit","Moz","O","vendor","fast","slow","cssPrefix","transitionEnd","animationEnd","animate","ease","anim","cssProperties","cssValues","transforms","that","endEvent","fired","clientLeft","origShow","origHide","origToggle","opacity","fadeTo","fadeIn","fadeToggle","U","Y","bottomEnd","innerTop","innerSticker","stickyClass","stickTo","followScroll","responsive","mobileFirst","onStart","onStop","onBeforeResize","onResize","resizeDebounce","disable","queries","queryFlow","log","X","Helpers","getStyle","stick","isAttached","attach","offsetLeft","release","positionLeft","S","k","E","T","j","C","N","R","B","I","getCascadedStyle","verticalAlign","boxSizing","paddingLeft","paddingRight","float","cssFloat","MozBoxSizing","HTMLDocument","Document","scrollHeight","offsetTop","F","P","W","V","refresh","triggerMethod","reinit","jQuery","hcSticky","handleEvent","currentStyle","getParent","$parent","clearMenus","VERSION","insertAfter","keydown","$items","old","noConflict","emulateTransitionEnd","transition","transEndEventNames","WebkitTransition","MozTransition","OTransition","bsTransitionEnd","bindType","delegateType","handleObj","HeaderPrimary","SessionDropdown","HeaderSecondary","Page","bodyClass","Widget","LoadingModal","StatusWidget","handleClearCache","phpVersion","mysqlVersion","reload","DashboardWidget","DashboardPage","availableWidgets","saveSettings","oldSettings","catch","BasicsPage","fields","localeOptions","locales","show_language_selector","forum_title","forum_description","default_locale","homePageItems","default_route","welcome_title","welcome_message","changed","successAlert","EditGroupModal","tabindex","deleteGroup","submitData","confirm","badgeForId","filterByRequiredPermissions","groupIds","permission","getRequiredPermissions","required","restrictToGroupIds","permissions","PermissionDropdown","everyone","members","adminGroup","allowGuest","isGroupDisabled","groupId","SettingDropdown","PermissionGrid","permissionItems","scopes","scopeItems","permissionCells","onremove","scopeControlItems","section","viewItems","startItems","replyItems","moderateItems","minutes","allow_renaming","allow_post_editing","PermissionsPage","SettingsModal","submitButton","fallback","dirty","onsaved","EditCustomCssModal","rows","EditCustomHeaderModal","EditCustomFooterModal","UploadImageButton","alt","upload","files","resourceUrl","raw","AppearancePage","primaryColor","theme_primary_color","secondaryColor","theme_secondary_color","darkMode","theme_dark_mode","coloredHeader","theme_colored_header","hex","AddExtensionModal","ExtensionsPage","controlItems","isEnabled","extra","description","extensionSettings","extensions_enabled","localStorage","setItem","MailPage","saving","driverFields","sending","driver","mail_driver","fieldKeys","mail_from","memo","renderField","AdminLinkButton","AdminNav","AdminApplication","getItem","removeItem","compat"],"mappings":"wBACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,I,+BClFtC,SAASC,EAAeC,EAAUC,GAC/CD,EAASL,UAAYlB,OAAOY,OAAOY,EAAWN,WAC9CK,EAASL,UAAUO,YAAcF,EACjCA,EAASG,UAAYF,EAHvB,mC,0ECMqBG,E,WAMnB,WAAYC,EAAWC,QAAc,IAAzBD,MAAO,SAAkB,IAAdC,MAAQ,MAO7BC,KAAKF,KAAOA,EAUZE,KAAKC,UAAY,IAAIC,KAQrBF,KAAKG,QAAS,EAQdH,KAAKD,MAAQA,E,2BAUfK,GAAA,WACE,OAAOJ,KAAKF,KAAKM,I,EAWnBC,UAAA,SAAUA,GACR,OAAOL,KAAKF,KAAKQ,WAAWD,I,EAS9BE,SAAA,SAAST,GAIP,IAAK,IAAMf,KAAOe,EAChB,GAAyB,iBAAdA,EAAKf,GAMd,IAAK,IAAMyB,KALXR,KAAKF,KAAKf,GAAOiB,KAAKF,KAAKf,IAAQ,GAKZe,EAAKf,GACtBe,EAAKf,GAAKyB,aAAqBX,IACjCC,EAAKf,GAAKyB,GAAY,CAACV,KAAMD,EAAMY,cAAcX,EAAKf,GAAKyB,MAE7DR,KAAKF,KAAKf,GAAKyB,GAAYV,EAAKf,GAAKyB,QAGvCR,KAAKF,KAAKf,GAAOe,EAAKf,GAM1BiB,KAAKC,UAAY,IAAIC,M,EASvBQ,eAAA,SAAeJ,GACbN,KAAKO,SAAS,CAACD,gB,EAYjBK,KAAA,SAAKL,EAAYM,GAAc,oBAAdA,MAAU,IACzB,IAAMd,EAAO,CACXe,KAAMb,KAAKF,KAAKe,KAChBT,GAAIJ,KAAKF,KAAKM,GACdE,cAMF,GAAIA,EAAWQ,cAAe,CAG5B,IAAK,IAAM/B,KAFXe,EAAKgB,cAAgB,GAEHR,EAAWQ,cAAe,CAC1C,IAAMC,EAAQT,EAAWQ,cAAc/B,GAEvCe,EAAKgB,cAAc/B,GAAO,CACxBe,KAAMiB,aAAiBC,MACnBD,EAAME,IAAIpB,EAAMY,eAChBZ,EAAMY,cAAcM,WAIrBT,EAAWQ,cAMpB,IAAMI,EAAUlB,KAAKmB,WAErBnB,KAAKO,SAAST,GAEd,IAAMsB,EAAU,CAACtB,QAGjB,OAFIc,EAAQS,OAAMD,EAAQC,KAAOT,EAAQS,MAElCC,IAAIF,QAAQlD,OAAA,IAAAA,CAAc,CAC/BqD,OAAQvB,KAAKG,OAAS,QAAU,OAChCqB,IAAKF,IAAIG,MAAMpB,UAAU,UAAYL,KAAK0B,cAC1C5B,KAAMsB,GACLR,IAAUe,MAIX,SAAAC,GAGE,OAFA,EAAK7B,MAAMD,KAAK8B,EAAQ9B,KAAKe,MAAQ,EAAKd,MAAMD,KAAK8B,EAAQ9B,KAAKe,OAAS,GAC3E,EAAKd,MAAMD,KAAK8B,EAAQ9B,KAAKe,MAAMe,EAAQ9B,KAAKM,IAAM,EAC/C,EAAKL,MAAM8B,YAAYD,MAKhC,SAAAE,GAGE,MAFA,EAAKvB,SAASW,GACdtD,EAAEmE,aACID,M,EAaZE,OAAA,SAAOlC,EAAMc,GAAc,WACzB,YADyB,IAAdA,MAAU,IAChBZ,KAAKG,OAEHmB,IAAIF,QAAQlD,OAAA,IAAAA,CAAc,CAC/BqD,OAAQ,SACRC,IAAKF,IAAIG,MAAMpB,UAAU,UAAYL,KAAK0B,cAC1C5B,QACCc,IAAUe,MAAK,WAChB,EAAKxB,QAAS,EACd,EAAKJ,MAAMkC,OAAO,MARKrE,EAAEsE,WAAWC,UAAUC,S,EAkBlDV,YAAA,WACE,MAAO,IAAM1B,KAAKF,KAAKe,MAAQb,KAAKG,OAAS,IAAMH,KAAKF,KAAKM,GAAK,K,EAGpEe,SAAA,WACE,OAAOkB,KAAKC,MAAMD,KAAKE,UAAUvC,KAAKF,Q,EAWjCO,UAAP,SAAiBtC,EAAMyE,GACrB,OAAO,WACL,IAAM/D,EAAQuB,KAAKF,KAAKQ,YAAcN,KAAKF,KAAKQ,WAAWvC,GAE3D,OAAOyE,EAAYA,EAAU/D,GAASA,I,EAcnCgE,OAAP,SAAc1E,GACZ,OAAO,WACL,GAAIiC,KAAKF,KAAKgB,cAAe,CAC3B,IAAM4B,EAAe1C,KAAKF,KAAKgB,cAAc/C,GAE7C,GAAI2E,EACF,OAAOpB,IAAIvB,MAAM4C,QAAQD,EAAa5C,KAAKe,KAAM6B,EAAa5C,KAAKM,IAIvE,OAAO,I,EAcJwC,QAAP,SAAe7E,GACb,OAAO,WACL,GAAIiC,KAAKF,KAAKgB,cAAe,CAC3B,IAAM4B,EAAe1C,KAAKF,KAAKgB,cAAc/C,GAE7C,GAAI2E,EACF,OAAOA,EAAa5C,KAAKmB,KAAI,SAAAnB,GAAI,OAAIwB,IAAIvB,MAAM4C,QAAQ7C,EAAKe,KAAMf,EAAKM,OAI3E,OAAO,I,EAWJyC,cAAP,SAAqBpE,GACnB,OAAOA,EAAQ,IAAIyB,KAAKzB,GAAS,M,EAU5BgC,cAAP,SAAqBM,GACnB,MAAO,CACLF,KAAME,EAAMjB,KAAKe,KACjBT,GAAIW,EAAMjB,KAAKM,K,4HCzRA0C,E,0GACnBC,KAAA,WACE,IAAMC,EAAQ9E,OAAA,IAAAA,CAAc,GAAI8B,KAAKiD,cAE9BD,EAAME,SAEbF,EAAMG,UAAYH,EAAMG,WAAa,GACrCH,EAAMnC,KAAOmC,EAAMnC,MAAQ,SAIvBmC,EAAMI,QAAUpD,KAAKiD,MAAMC,WAC7BF,EAAM,cAAgBA,EAAMI,QAIzBJ,EAAMI,OAASpD,KAAKiD,MAAMC,WAC7BF,EAAMI,MAAQC,YAAYrD,KAAKiD,MAAMC,WAGtBI,YAAQN,EAAO,UAClBA,EAAMG,WAAa,YAEjC,IAAMI,EAAUD,YAAQN,EAAO,WAM/B,OALIA,EAAMQ,UAAYD,KACpBP,EAAMG,WAAa,aAAeI,EAAU,WAAa,WAClDP,EAAMS,SAGR,WAAYT,EAAQhD,KAAK0D,qB,EASlCA,iBAAA,WACE,IAAMC,EAAW3D,KAAKiD,MAAMW,KAE5B,MAAO,CACLD,IAAyB,IAAbA,EAAoBC,YAAKD,EAAU,CAACR,UAAW,gBAAkB,GAC7EnD,KAAKiD,MAAMC,SAAW,UAAMC,UAAU,gBAAgBnD,KAAKiD,MAAMC,UAAmB,GACpFlD,KAAKiD,MAAMM,QAAUM,IAAiBC,UAAU,CAACC,KAAM,OAAQZ,UAAW,6BAA+B,K,GA5C3Ea,M,0ECQfA,E,WAMnB,WAAYf,EAAYC,QAAiB,IAA7BD,MAAQ,SAAqB,IAAjBC,MAAW,MAC7BA,IAAUD,EAAMC,SAAWA,GAE/BlD,KAAKL,YAAYsE,UAAUhB,GAO3BjD,KAAKiD,MAAQA,EAQbjD,KAAKkE,QAAU,KAQflE,KAAKmE,QAAS,EAEdnE,KAAKoE,O,2BAQPA,KAAA,a,EAWAC,SAAA,a,EAiBAC,OAAA,WAAS,WACDC,EAAOvE,KAAKmE,OAAS,CAACK,QAAS,UAAYxE,KAAK+C,OAKtDwB,EAAKvB,MAAQuB,EAAKvB,OAAS,GAE3B,IAAMyB,EAAiBF,EAAKvB,MAAM0B,OAQlC,OANAH,EAAKvB,MAAM0B,OAAS,WAAa,2BAATC,EAAS,yBAATA,EAAS,gBAC/B,EAAKT,QAAUS,EAAK,GACpB,EAAKD,OAAOE,MAAM,EAAMD,EAAKE,MAAM,IAC/BJ,GAAgBA,EAAeG,MAAM,EAAMD,IAG1CJ,G,EAiBTO,E,+GAAA,SAAEC,GACA,IAAMC,EAAWF,EAAE9E,KAAKkE,SAExB,OAAOa,EAAWC,EAASC,KAAKF,GAAYC,K,EAc9CN,OAAA,a,EASA3B,KAAA,WACE,MAAM,IAAImC,MAAM,mD,EAgBXpB,UAAP,SAAiBb,EAAYC,QAAiB,IAA7BD,MAAQ,SAAqB,IAAjBC,MAAW,MACtC,IAAMiC,EAAiBjH,OAAA,IAAAA,CAAc,GAAI+E,GAErCC,IAAUiC,EAAejC,SAAWA,GAExClD,KAAKiE,UAAUkB,GAKf,IAAMpC,EAAO,SAACe,GAEZ,OADAA,EAAUb,MAAQkC,EACXrB,EAAUQ,UAKnBvB,EAAKqC,UAAYpF,KAAKZ,UAAU2D,KAMhC,IAAMsC,EAAS,CACbC,WAAYtF,KAAKhB,UAAKuG,EAAWJ,GACjCpC,KAAMA,EACNE,MAAOkC,EACPrB,UAAW9D,MAUb,OAJImF,EAAepG,MACjBsG,EAAOrC,MAAQ,CAACjE,IAAKoG,EAAepG,MAG/BsG,G,EASFpB,UAAP,SAAiBhB,K,mCC9NJ,SAASuC,IAetB,OAdAA,EAAWtH,OAAOuH,QAAU,SAAUC,GACpC,IAAK,IAAIlI,EAAI,EAAGA,EAAImI,UAAUC,OAAQpI,IAAK,CACzC,IAAIqI,EAASF,UAAUnI,GAEvB,IAAK,IAAIuB,KAAO8G,EACV3H,OAAOkB,UAAUC,eAAe1B,KAAKkI,EAAQ9G,KAC/C2G,EAAO3G,GAAO8G,EAAO9G,IAK3B,OAAO2G,IAGOd,MAAM5E,KAAM2F,WAf9B,mC,mECAMG,EACJ,SAAYC,EAASC,GACnBhG,KAAK+F,QAAUA,EACf/F,KAAKgG,SAAWA,GAQCC,E,WACnB,aAOEjG,KAAKkG,MAAQ,G,2BASfC,QAAA,WACE,IAAK,IAAM3I,KAAKwC,KAAKkG,MACnB,GAAGlG,KAAKkG,MAAM7G,eAAe7B,GAC3B,OAAO,EAIX,OAAO,G,EAST4I,IAAA,SAAIrH,GACF,QAASiB,KAAKkG,MAAMnH,I,EAUtBV,IAAA,SAAIU,GACF,OAAOiB,KAAKkG,MAAMnH,GAAKgH,S,EAazBM,IAAA,SAAItH,EAAKgH,EAASC,GAGhB,YAH8B,IAAdA,MAAW,GAC3BhG,KAAKkG,MAAMnH,GAAO,IAAI+G,EAAKC,EAASC,GAE7BhG,M,EAYTsG,QAAA,SAAQvH,EAAKgH,EAAgBC,GAW3B,YAX4C,IAAjCD,MAAU,WAAuB,IAAjBC,MAAW,MAClChG,KAAKkG,MAAMnH,KACG,OAAZgH,IACF/F,KAAKkG,MAAMnH,GAAKgH,QAAUA,GAGX,OAAbC,IACFhG,KAAKkG,MAAMnH,GAAKiH,SAAWA,IAIxBhG,M,EAUTiC,OAAA,SAAOlD,GAGL,cAFOiB,KAAKkG,MAAMnH,GAEXiB,M,EAUTuG,MAAA,SAAML,GACJ,IAAK,IAAM1I,KAAK0I,EAAMA,MAChBA,EAAMA,MAAM7G,eAAe7B,IAAM0I,EAAMA,MAAM1I,aAAcsI,IAC7D9F,KAAKkG,MAAM1I,GAAK0I,EAAMA,MAAM1I,IAIhC,OAAOwC,M,EAWTwG,QAAA,WACE,IAAMN,EAAQ,GAEd,IAAK,IAAM1I,KAAKwC,KAAKkG,MACflG,KAAKkG,MAAM7G,eAAe7B,IAAMwC,KAAKkG,MAAM1I,aAAcsI,IAC3D9F,KAAKkG,MAAM1I,GAAGuI,QAAU7H,OAAO8B,KAAKkG,MAAM1I,GAAGuI,SAE7C/F,KAAKkG,MAAM1I,GAAGuI,QAAQU,SAAWjJ,EACjC0I,EAAMQ,KAAK1G,KAAKkG,MAAM1I,IACtBwC,KAAKkG,MAAM1I,GAAGuB,IAAMmH,EAAMN,QAI9B,OAAOM,EAAMS,MAAK,SAACC,EAAGC,GACpB,OAAID,EAAEZ,WAAaa,EAAEb,SACZY,EAAE7H,IAAM8H,EAAE9H,IACR6H,EAAEZ,SAAWa,EAAEb,UAChB,EAEH,KACN/E,KAAI,SAAA6F,GAAI,OAAIA,EAAKf,Y,mCCrJT,SAASnC,EAAKmD,EAAW/D,GAGtC,YAHkD,IAAZA,MAAQ,IAC9CA,EAAMG,UAAY,QAAU4D,EAAY,KAAO/D,EAAMG,WAAa,IAE3D,MAAOH,GAVhB,mC,6BCAA,sDAGA,SAASgE,EAAYF,GACnB,OAAOA,GAAQA,EAAKhD,YAAcmD,IAwBrB,SAASC,EAAUhB,GAGhC,OAFMA,aAAiBlF,QAAQkF,EAAQ,CAACA,IAtB1C,SAAsCA,GACpC,IACIiB,EADEC,EAAW,GAUjB,OAPAlB,EAAMmB,SAAQ,SAACP,EAAMtJ,KACdwJ,EAAYF,IAAUK,IAAaH,EAAYG,IAAa3J,IAAM0I,EAAMN,OAAS,KACpFuB,EAAWL,EACXM,EAASV,KAAKI,OAIXM,EAaAE,CAA6BpB,GAAOjF,KAAI,SAAA6F,GAC7C,IAAMS,EAAaT,EAAKhD,WAAagD,EAAKhD,UAAUyD,WAC9CC,EAASV,EAAKhD,WAAagD,EAAKhD,UAAU2D,UAAYX,EAAKhD,UAAU2D,SAASX,EAAK7D,OACnFE,EAAY2D,EAAK7D,MAAQ6D,EAAK7D,MAAMyE,cAAgBZ,EAAKY,cAO/D,OALIH,IACFT,EAAK9D,MAAQ8D,EAAK9D,OAAS,GAC3B8D,EAAK9D,MAAMjE,IAAM+H,EAAK9D,MAAMjE,KAAO+H,EAAKL,UAGnCc,EACHT,EACA,QAAI3D,UAAWwE,YAAU,CACtBb,EAAKL,SAAW,QAAUK,EAAKL,SAAW,GAC3CtD,EACCqE,EAAS,SAAW,KAErBzI,IAAK+H,EAAKL,UACTK,Q,6BCjDI,SAASc,EAAgBC,EAAK9I,EAAKN,GAYhD,OAXIM,KAAO8I,EACT3J,OAAOC,eAAe0J,EAAK9I,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZ0J,cAAc,EACdC,UAAU,IAGZF,EAAI9I,GAAON,EAGNoJ,EAZT,mC,6BCMe,SAASxE,EAAYkB,GAClC,OAAIA,aAAgBvD,MACXuD,EAAKtD,KAAI,SAAAiD,GAAO,OAAIb,EAAYa,MAAU8D,KAAK,IAC7B,iBAATzD,GAA8B,OAATA,EAC9BlB,EAAYkB,EAAKrB,UAEjBqB,EAZX,mC,6BCQe,SAASjB,EAAQpE,EAAQC,GACtC,IAAMV,EAAQS,EAAOC,GAIrB,cAFOD,EAAOC,GAEPV,EAbT,mC,sDCEMwJ,E,yFAAcpI,KAEpB3B,OAAA,IAAAA,CAAc+J,EAAM7I,UAAW,CAC7B8I,aAAcrI,IAAMQ,UAAU,gBAC9B8H,WAAYtI,IAAMQ,UAAU,cAC5B+H,MAAOvI,IAAMQ,UAAU,SACvBuD,KAAM/D,IAAMQ,UAAU,UAGxB4H,EAAMI,iBAAmB,IACzBJ,EAAMK,SAAW,IACjBL,EAAMM,UAAY,IAEHN,O,gGCLMO,E,0GACnBpE,KAAA,WAMEpE,KAAKyI,MAAQ,M,EAGf1F,KAAA,WAKE,OAJI/C,KAAKyI,QACPzI,KAAKyI,MAAMxF,MAAMyF,aAAc,GAI/B,SAAKvF,UAAW,sBAAwBnD,KAAKmD,aAC3C,SAAKA,UAAU,iBACZnD,KAAK2I,gBACJ,SAAKxF,UAAU,+BACZL,IAAOgB,UAAU,CAChBF,KAAM,eACNH,QAASzD,KAAK4I,KAAK5J,KAAKgB,MACxBmD,UAAW,sCAGb,GAEJ,UAAM0F,SAAU7I,KAAK6I,SAAS7J,KAAKgB,OACjC,SAAKmD,UAAU,gBACb,QAAIA,UAAU,2CAA2CnD,KAAKoD,UAG/DqF,MAAQ,SAAKtF,UAAU,eAAenD,KAAKyI,OAAe,GAE1DzI,KAAK+F,c,EAYhB4C,cAAA,WACE,OAAO,G,EASTxF,UAAA,a,EASAC,MAAA,a,EASA2C,QAAA,a,EAQA8C,SAAA,a,EAMAC,QAAA,WACE9I,KAAK8E,EAAE,QAAQG,KAAK,2BAA2B8D,QAAQC,QAAQC,U,EAGjEC,OAAA,a,EAMAN,KAAA,WACEtH,IAAI6H,MAAMC,S,EAMZC,OAAA,WACErJ,KAAKuD,SAAU,EACf3F,EAAE0L,U,EASJC,QAAA,SAAQC,GACNxJ,KAAKyI,MAAQe,EAAMf,MAEnB7K,EAAE0L,SAEmB,MAAjBE,EAAMC,QAAkBD,EAAM1H,SAAS4H,OACzC1J,KAAK8E,EAAE,eAAiB0E,EAAM1H,SAAS4H,OAAO,GAAG7D,OAAO8D,QAAQrD,QAAQ,oBAAqB,IAAM,MAAM2C,SAEzGjJ,KAAK8I,W,GA7HwB9E,M,+FCUd4F,E,iFACZ3F,UAAP,SAAiBhB,GACf,EAAMgB,UAAN,UAAgBhB,GAEhBA,EAAME,UAAYF,EAAME,WAAa,GACrCF,EAAM4G,gBAAkB5G,EAAM4G,iBAAmB,GACjD5G,EAAM6G,cAAgB7G,EAAM6G,eAAiB,GAC7C7G,EAAM8G,MAAQ9G,EAAM8G,OAAS,GAC7B9G,EAAM+G,eAAuC,IAApB/G,EAAM+G,UAA4B/G,EAAM+G,UAAY,qB,2BAG/E5F,KAAA,WACEpE,KAAKiK,SAAU,G,EAGjBlH,KAAA,WACE,IAAMmD,EAAQlG,KAAKiD,MAAMC,SAAWgE,YAAUlH,KAAKiD,MAAMC,UAAY,GAErE,OACE,SAAKC,UAAW,iCAAmCnD,KAAKiD,MAAME,UAAY,aAAe+C,EAAMN,QAAU5F,KAAKiK,QAAU,QAAU,KAC/HjK,KAAKkK,YACLlK,KAAKmK,QAAQjE,K,EAKpBxB,OAAA,SAAO0F,GAAe,WAChBA,IAEJpK,KAAK8E,EAAE,sBAAsBuF,WAK7BrK,KAAKkE,QAAQoG,iBAAiB,qBAAqB,WACjD,EAAKL,SAAU,EAEX,EAAKhH,MAAMsH,QACb,EAAKtH,MAAMsH,SAGb3M,EAAE0L,SAEF,IAAMkB,EAAQ,EAAK1F,EAAE,kBACf2F,EAAUD,EAAME,SAAS,wBAE/BF,EAAMG,YAAY,2CAElBH,EAAMI,YACJ,qBACAJ,EAAMK,SAASC,IAAMN,EAAMO,SAAWjG,EAAEkG,QAAQC,YAAcnG,EAAEkG,QAAQD,UAGtEP,EAAMK,SAASC,IAAM,GACvBN,EAAMG,YAAY,sBAGpBH,EAAMI,YACJ,uBACAH,GAAWD,EAAMK,SAASK,KAAOV,EAAMW,QAAUrG,EAAEkG,QAAQI,aAAetG,EAAEkG,QAAQG,YAIxFnL,KAAKkE,QAAQoG,iBAAiB,sBAAsB,WAClD,EAAKL,SAAU,EAEX,EAAKhH,MAAMiG,QACb,EAAKjG,MAAMiG,SAGbtL,EAAE0L,c,EAUNY,UAAA,WACE,OACE,YACE/G,UAAW,mBAAqBnD,KAAKiD,MAAM4G,gBAC3CwB,cAAY,WACZ5H,QAASzD,KAAKiD,MAAMQ,SACnBzD,KAAK0D,qB,EAWZA,iBAAA,WACE,MAAO,CACL1D,KAAKiD,MAAMW,KAAOA,YAAK5D,KAAKiD,MAAMW,KAAM,CAACT,UAAW,gBAAkB,GACtE,UAAMA,UAAU,gBAAgBnD,KAAKiD,MAAM8G,OAC3C/J,KAAKiD,MAAM+G,UAAYpG,YAAK5D,KAAKiD,MAAM+G,UAAW,CAAC7G,UAAW,iBAAmB,K,EAIrFgH,QAAA,SAAQjE,GACN,OACE,QAAI/C,UAAW,+BAAiCnD,KAAKiD,MAAM6G,eACxD5D,I,GA5G6BlC,M,sDCpBlCsH,EAAsCpN,OAAOuH,QAAU,SAAS/G,GAChE,IAAK,IAAIa,EAAG/B,EAAI,EAAGyB,EAAI0G,UAAUC,OAAQpI,EAAIyB,EAAGzB,IAE5C,IAAK,IAAI8B,KADTC,EAAIoG,UAAUnI,GACOU,OAAOkB,UAAUC,eAAe1B,KAAK4B,EAAGD,KACzDZ,EAAEY,GAAKC,EAAED,IAEjB,OAAOZ,GAEP6M,EAAW,CACXC,MAAO,GACP5F,OAAQ,EACRuF,MAAO,EACPM,OAAQ,GACRC,MAAO,EACPC,QAAS,EACTvD,MAAO,OACPwD,UAAW,cACXC,UAAW,4BACXC,OAAQ,EACRC,UAAW,EACXC,MAAO,EACPC,OAAQ,IACR9I,UAAW,UACX2H,IAAK,MACLI,KAAM,MACNgB,OAAQ,sBACRC,SAAU,YAEVC,EAAyB,WACzB,SAASA,EAAQC,QACA,IAATA,IAAmBA,EAAO,IAC9BrM,KAAKqM,KAAOf,EAAS,GAAIC,EAAUc,GA6CvC,OAtCAD,EAAQhN,UAAUkN,KAAO,SAAU5G,GAiB/B,OAhBA1F,KAAKuM,OACLvM,KAAKwM,GAAKC,SAASC,cAAc,OACjC1M,KAAKwM,GAAGrJ,UAAYnD,KAAKqM,KAAKlJ,UAC9BnD,KAAKwM,GAAGG,aAAa,OAAQ,eAC7BC,EAAI5M,KAAKwM,GAAI,CACTL,SAAUnM,KAAKqM,KAAKF,SACpBhB,MAAO,EACPc,OAAQjM,KAAKqM,KAAKJ,OAClBf,KAAMlL,KAAKqM,KAAKnB,KAChBJ,IAAK9K,KAAKqM,KAAKvB,IACftI,UAAW,SAAWxC,KAAKqM,KAAKX,MAAQ,MAExChG,GACAA,EAAOmH,aAAa7M,KAAKwM,GAAI9G,EAAOoH,YAAc,MA6C9D,SAAmBN,EAAIH,GACnB,IAAIU,EAAgBC,KAAKC,MAAMZ,EAAKV,QAAUU,EAAKlB,MAAQ,KAAO,IAAQ,KACtEe,EAAS,QACO,IAAhBG,EAAKH,OACLA,EAAS,iBAEmB,iBAAhBG,EAAKH,SACjBA,EAASG,EAAKH,QAGlB,IADA,IAAIgB,EA2BR,SAAwBC,GAGpB,IAFA,IAAIC,EAAQ,kFACRF,EAAU,GACLG,EAAK,EAAGC,EAAKH,EAAUI,MAAM,KAAMF,EAAKC,EAAG1H,OAAQyH,IAAM,CAC9D,IACIG,EADSF,EAAGD,GACKI,MAAML,GAC3B,GAAgB,OAAZI,EAAJ,CAGA,IAAIE,GAAKF,EAAQ,GACbG,GAAKH,EAAQ,GACbI,EAASJ,EAAQ,GACjBK,EAASL,EAAQ,GACX,IAANE,GAAYE,IACZA,EAASC,GAEH,IAANF,GAAYE,IACZA,EAASD,GAETA,IAAWC,GAGfX,EAAQxG,KAAK,CACToH,OAAQN,EAAQ,IAAM,GACtBE,EAAGA,EACHC,EAAGA,EACHC,OAAQA,EACRC,OAAQA,EACRE,IAAKP,EAAQ,MAGrB,OAAON,EA1DOc,CAAe9B,GACpB1O,EAAI,EAAGA,EAAI6O,EAAKb,MAAOhO,IAAK,CACjC,IAAIyQ,KAAa,IAAM5B,EAAKb,MAAQhO,EAAI6O,EAAKP,QACzCoC,EAAiBtB,EAAIH,SAASC,cAAc,OAAQ,CACpDP,SAAU,WACVrB,KAAMuB,EAAKlB,MAAQ,EAAI,KACvBA,MAAQkB,EAAKzG,OAASyG,EAAKlB,MAAS,KACpCJ,OAAQsB,EAAKlB,MAAQ,KACrBgD,WAAYC,EAAS/B,EAAKT,UAAWpO,GACrCuP,aAAcA,EACdsB,gBAAiB,OACjB7L,UAAW,UAAYyL,EAAU,mBAAqB5B,EAAKZ,OAAS,QAEpE6C,EAAQ9Q,EAAI6O,EAAKN,UAAYM,EAAKb,MAAQa,EAAKL,MACnDsC,GAAS,EAAIjC,EAAKL,MAClB,IAAIuC,EAAO3B,EAAIH,SAASC,cAAc,OAAQ,CAC1CvB,MAAO,OACPJ,OAAQ,OACRoD,WAAYC,EAAS/B,EAAKjE,MAAO5K,GACjCuP,aAAcA,EACdI,UAAWqB,EAAgBtB,EAASe,GACpCpC,UAAW,EAAIQ,EAAKL,MAAQ,YAAcsC,EAAQ,cAAgBjC,EAAKR,YAE3EqC,EAAeO,YAAYF,GAC3B/B,EAAGiC,YAAYP,IA5EfQ,CAAU1O,KAAKwM,GAAIxM,KAAKqM,MACjBrM,MAMXoM,EAAQhN,UAAUmN,KAAO,WAarB,OAZIvM,KAAKwM,KACgC,oBAA1BmC,sBACPC,qBAAqB5O,KAAK6O,WAG1BC,aAAa9O,KAAK6O,WAElB7O,KAAKwM,GAAGuC,YACR/O,KAAKwM,GAAGuC,WAAWC,YAAYhP,KAAKwM,IAExCxM,KAAKwM,QAAKjH,GAEPvF,MAEJoM,EAhDiB,GAsD5B,SAASQ,EAAIJ,EAAIvJ,GACb,IAAK,IAAIgM,KAAQhM,EACbuJ,EAAG0C,MAAMD,GAAQhM,EAAMgM,GAE3B,OAAOzC,EAKX,SAAS4B,EAAShG,EAAO+G,GACrB,MAAuB,iBAAT/G,EAAoBA,EAAQA,EAAM+G,EAAM/G,EAAMxC,QA6EhE,SAAS4I,EAAgBtB,EAASe,GAE9B,IADA,IAAImB,EAAa,GACR/B,EAAK,EAAGgC,EAAYnC,EAASG,EAAKgC,EAAUzJ,OAAQyH,IAAM,CAC/D,IAAInB,EAASmD,EAAUhC,GACnBiC,EAAKC,EAAcrD,EAAOwB,EAAGxB,EAAOyB,EAAGM,GAC3CmB,EAAW1I,KAAKwF,EAAO4B,OAASwB,EAAG,GAAKpD,EAAO0B,OAAS,IAAM0B,EAAG,GAAKpD,EAAO2B,OAAS3B,EAAO6B,KAEjG,OAAOqB,EAAWpH,KAAK,MAE3B,SAASuH,EAAc7B,EAAGC,EAAGM,GACzB,IAAIuB,EAAUvB,EAAUjB,KAAKyC,GAAK,IAC9BC,EAAM1C,KAAK0C,IAAIF,GACfG,EAAM3C,KAAK2C,IAAIH,GACnB,MAAO,CACHxC,KAAKC,MAA4B,KAArBS,EAAIiC,EAAMhC,EAAI+B,IAAe,IACzC1C,KAAKC,MAA6B,MAArBS,EAAIgC,EAAM/B,EAAIgC,IAAe,K,sCC7K7B9L,E,0GACnBd,KAAA,WACE,IAAMC,EAAQ9E,OAAA,IAAAA,CAAc,GAAI8B,KAAKiD,OAKrC,OAHAD,EAAMG,UAAY,qBAAuBH,EAAMG,WAAa,WACrDH,EAAMe,KAEN,QAASf,EAAQpF,EAAEgS,MAAM,Y,EAGlClL,OAAA,SAAO0F,GACL,IAAIA,EAAJ,CAEA,IAAMxJ,EAAU,CAAEqL,OAAQ,OAAQ7D,MAAOpI,KAAK8E,IAAI8H,IAAI,UAEtD,OAAQ5M,KAAKiD,MAAMc,MACjB,IAAK,QACH7F,OAAA,IAAAA,CAAc0C,EAAS,CAAE4K,MAAO,GAAI5F,OAAQ,EAAGuF,MAAO,EAAGM,OAAQ,IACjE,MAEF,IAAK,OACHvN,OAAA,IAAAA,CAAc0C,EAAS,CAAE4K,MAAO,EAAG5F,OAAQ,EAAGuF,MAAO,EAAGM,OAAQ,IAChE,MAEF,QACEvN,OAAA,IAAAA,CAAc0C,EAAS,CAAE4K,MAAO,EAAG5F,OAAQ,EAAGuF,MAAO,EAAGM,OAAQ,IAGpE,IAAIW,EAAQxL,GAAS0L,KAAKtM,KAAKkE,W,GA5BWF,M,0ECJ/B,SAAS6L,EAAOC,EAAM9M,QAAY,IAAZA,MAAQ,IAC3CA,EAAMG,UAAY,WAAaH,EAAMG,WAAa,IAClD,IAAI4C,EAAU,GAKRgK,EAA2B,cAAhB/M,EAAMI,OAAyBJ,EAAMI,MAMtD,GALK2M,UAAiB/M,EAAMI,MAKxB0M,EAAM,CACR,IAAME,EAAWF,EAAKG,eAAiB,IACjCC,EAAYJ,EAAKI,YAIvB,GAFIH,IAAU/M,EAAMI,MAAQJ,EAAMI,OAAS4M,GAEvCE,EACF,OAAO,uBAASlN,EAAT,CAAgBmN,IAAKD,KAG9BnK,EAAUiK,EAASI,OAAO,GAAGC,cAC7BrN,EAAMkM,MAAQ,CAACf,WAAY2B,EAAK1H,SAGlC,OAAO,SAAUpF,EAAQ+C,K,8GCfNuK,E,kGACnBvN,KAAA,WACE,IAAMC,EAAQ9E,OAAA,IAAAA,CAAc,GAAI8B,KAAKiD,OAE/BpC,EAAOyC,YAAQN,EAAO,QAC5BA,EAAMG,UAAY,gBAAkBtC,EAAO,KAAOmC,EAAMG,WAAa,IAErE,IAAMD,EAAWI,YAAQN,EAAO,YAC1BuN,EAAWjN,YAAQN,EAAO,aAAe,GAKzC0F,EAAcpF,YAAQN,EAAO,eAC7BwN,EAAYlN,YAAQN,EAAO,aAC3ByN,EAAiB,GAWvB,OATI/H,QAA+BnD,IAAhBmD,IACjB+H,EAAe/J,KACb,EAAC,IAAD,CACE9C,KAAK,eACLT,UAAU,iDACVM,QAAS+M,KAKb,QAASxN,EACP,UAAMG,UAAU,cACbD,GAEH,QAAIC,UAAU,kBACX+D,YAAUqJ,EAASG,OAAOD,O,GAhCFzM,M,6BCZpB,SAASgM,EAASF,GAC/B,IAAM/R,EAAQ+R,GAAQA,EAAKG,eAAkB3O,IAAIqP,WAAWC,MAAM,kCAElE,OAAO,UAAMzN,UAAU,YAAYpF,GAVrC,mC,6BCSe,SAAS8S,IAA2B,2BAAfC,EAAe,yBAAfA,EAAe,gBACjD,IAIIC,EAJEC,EAAOF,EAAcjM,MAAM,GAAI,GAC/BoM,EAAUH,EAAcjM,OAAO,GAAG,GAElCqM,EAAkB,GAGxB,OAAO,WAAW,WACZC,GAAY,EAiBhB,OAbAH,EAAK3J,SAAQ,SAAAtI,GACX,IAAMN,EAA6B,mBAAd,EAAKM,GAAsB,EAAKA,KAAS,EAAKA,GAE/DmS,EAAgBnS,KAASN,IAC3B0S,GAAY,EACZD,EAAgBnS,GAAON,MAIvB0S,IACFJ,EAAgBE,EAAQrM,MAAM5E,KAAMgR,EAAK/P,KAAI,SAAAlC,GAAG,OAAImS,EAAgBnS,QAG/DgS,GAlCX,mC,0ECcqBK,E,wFACZnN,UAAP,SAAiBhB,GACfA,EAAMuE,OAASxH,KAAKyH,SAASxE,GAC7BA,EAAMyB,OAASzB,EAAMyB,QAAU9G,EAAEyT,O,YAGnCtO,KAAA,WACE,IAAMwB,EAAO,EAAH,UAASxB,KAAT,WAIV,OAFAwB,EAAK+M,IAAM,IAEJ/M,G,EASFkD,SAAP,SAAgBxE,GACd,YAA+B,IAAjBA,EAAMuE,OAChBvE,EAAMuE,OACN5J,EAAEyT,UAAYpO,EAAMsO,M,QAvBYzO,I,wCCTlCmE,E,kGACJlE,KAAA,WACE,OAAO,QAAII,UAAU,wB,QAFDa,GAMxBiD,EAAUM,YAAa,EAERN,O,cCbf,IAAIuK,EAGJA,EAAI,WACH,OAAOxR,KADJ,GAIJ,IAECwR,EAAIA,GAAK,IAAIC,SAAS,cAAb,GACR,MAAOC,GAEc,iBAAX1G,SAAqBwG,EAAIxG,QAOrCzN,EAAOD,QAAUkU,G,6BCZF,SAASG,EAAUC,GAChC,IAAIhU,EAAIiU,MAAMD,GACRE,EAAMD,QAKRjU,EAAEmU,QAAQD,KACZlU,EAAIkU,GAmBN,OAfalU,EAAEoU,KAAKH,UAKT,OACLjU,EAAEqU,SAAWJ,QAAQI,OACjBrU,EAAEsU,OAAO,SAETtU,EAAEsU,OAAO,WAGXtU,EAAEuU,UA/BZ,mC,uGCiBqBC,E,0GACnBrP,KAAA,WACE,IAAMC,EAAQ9E,OAAA,IAAAA,CAAc,GAAI8B,KAAKiD,OAC/BpC,EAAOyC,YAAQN,EAAO,QACtBW,EAAWL,YAAQN,EAAO,QAKhC,OAHAA,EAAMG,UAAY,UAAYtC,EAAO,UAAYA,EAAO,IAAM,KAAOmC,EAAMG,WAAa,IACxFH,EAAMI,MAAQE,YAAQN,EAAO,UAAY,GAGvC,SAAUA,EACPW,EAAWC,YAAKD,EAAU,CAACR,UAAW,eAAiBvF,EAAEgS,MAAM,Y,EAKtElL,OAAA,SAAO0F,GACDA,GAEApK,KAAKiD,MAAM8G,OAAO/J,KAAK8E,IAAIuN,QAAQ,CAACC,UAAW,U,GAnBpBtO,M,wFCLduO,E,kGACnBxP,KAAA,WACE,OACE,cAAUI,UAAWnD,KAAKiD,MAAME,WAC9B,gBAASnD,KAAKiD,MAAM8G,OACpB,YAAK7C,YAAUlH,KAAKiD,MAAMC,a,GALIc,M,6BCDvB,SAAS2D,EAAU6K,GAChC,IAAIC,EAEJ,GAAID,aAAmBxR,MACrByR,EAAaD,EAAQE,QAAO,SAAA3U,GAAI,OAAIA,UAIpC,IAAK,IAAMP,KAFXiV,EAAa,GAEGD,EACVA,EAAQhV,IAAIiV,EAAW/L,KAAKlJ,GAIpC,OAAOiV,EAAWzK,KAAK,KAxBzB,mC,6BCQO,SAAS2K,EAASC,EAAQhN,EAAQiN,GACvC,YADkD,IAAXA,MAAQ,IACvCA,EAAQ,EAAI,MAAQ,IAC1BD,EAAOE,UAAUD,EAAOA,EAAQjN,IAC/BgN,EAAOhN,OAASiN,EAAQjN,EAAS,MAAQ,IAcvC,SAASmN,EAAKH,GACnB,OAAOA,EAAOI,cACX1M,QAAQ,cAAe,KACvBA,QAAQ,MAAO,KACfA,QAAQ,SAAU,IAUhB,SAAS2M,EAAgBL,GAC9B,IAAMM,EAAON,EACVtM,QAAQ,gBAAiB,aACzBA,QAAQ,iBAAkB,KAEvB6M,EAAMrO,EAAE,UAAUoO,KAAKA,GAI7B,OAFAC,EAAIlO,KAAKgO,EAAgBG,gBAAgBpL,KAAK,MAAM/F,SAE7CkR,EAAIE,OAAO/M,QAAQ,OAAQ,KAAKgN,OAgBlC,SAASC,EAAQX,GACtB,OAAOA,EAAOY,OAAO,EAAG,GAAGnD,cAAgBuC,EAAOY,OAAO,GAjE3D,6KAwDAP,EAAgBG,gBAAkB,CAAC,aAAc,W,yFC3C5BK,E,wFACZxP,UAAP,SAAiBhB,GACfA,EAAM+G,eAAuC,IAApB/G,EAAM+G,UAA4B/G,EAAM+G,UAAY,cAE7E,EAAM/F,UAAN,UAAgBhB,GAEhBA,EAAME,WAAa,qB,YAGrBO,iBAAA,WACE,IAAMgQ,EAAc1T,KAAKiD,MAAMC,SAASwP,QAAO,SAAAiB,GAAK,OAAIA,EAAM1Q,MAAMuE,UAAQ,GACxEuC,EAAQ2J,GAAeA,EAAYzQ,MAAMC,UAAYlD,KAAKiD,MAAM2Q,aAIpE,OAFI7J,aAAiB/I,QAAO+I,EAAQA,EAAM,IAEnC,CACL,UAAM5G,UAAU,gBAAgB4G,GAChCnG,YAAK5D,KAAKiD,MAAM+G,UAAW,CAAC7G,UAAW,mB,GAjBDyG,M,0ECXvBiK,E,wFACZ5P,UAAP,SAAiBhB,GACf,EAAMgB,UAAN,UAAgBhB,GAEZA,EAAM6Q,QACR7Q,EAAMW,KAAOX,EAAM6Q,MAAMlQ,OACzBX,EAAMiM,MAAQ,CAAC6E,gBAAiB9Q,EAAM6Q,MAAM1L,SAC5CnF,EAAM8G,WAA+B,IAAhB9G,EAAM8G,MAAwB9G,EAAM6Q,MAAM5L,eAAiBjF,EAAM8G,MACtF9G,EAAMpC,KAAO,UAAYoC,EAAM6Q,MAAM1T,YAE9B6C,EAAM6Q,Q,SAVqB1B,I,6BCFxC,8CAYe,SAAS4B,EAAUpB,EAAQqB,EAAQrO,GAChD,IAAKqO,IAAWrO,EAAQ,OAAOgN,EAI/B,IAAMsB,EAASD,aAAkBE,OAASF,EAAS,IAAIE,OAAOF,EAAQ,MAElEG,EAAcxB,EACdC,EAAQ,EAeZ,OAZIjN,IACEqO,IAAQpB,EAAQ7F,KAAKqH,IAAI,EAAGzB,EAAO0B,OAAOJ,GAAUtO,EAAS,IAEjEwO,EAAczB,mBAASyB,EAAaxO,EAAQiN,IAK9CuB,EAActP,EAAE,UAAUuO,KAAKe,GAAalB,OAExCe,IAAQG,EAAcA,EAAY9N,QAAQ4N,EAAQ,oBAE/CtW,EAAEgS,MAAMwE,K,6BCnCjB,sCAAMG,EAAQvJ,OAAO2D,uBACnB3D,OAAOwJ,6BACPxJ,OAAOyJ,0BACPzJ,OAAO0J,yBACP1J,OAAO2J,wBACN,SAAAC,GAAQ,OAAI5J,OAAO6J,WAAWD,EAAU,IAAO,KAM7BE,E,WAMnB,WAAYF,GACV5U,KAAK4U,SAAWA,EAChB5U,KAAK+U,SAAU,E,2BASjBC,KAAA,WAAO,WAGDhV,KAAK+U,UAITR,GAAM,WACJ,EAAKU,SACL,EAAKF,SAAU,KAGjB/U,KAAK+U,SAAU,I,EAQjBE,OAAA,WACEjV,KAAK4U,SAAS5J,OAAOkK,c,EAQvBrC,MAAA,WACO7S,KAAKwH,QACRwD,OAAOV,iBACL,SACAtK,KAAKwH,OAASxH,KAAKgV,KAAKhW,KAAKgB,Q,EAUnCuM,KAAA,WACEvB,OAAOmK,oBAAoB,SAAUnV,KAAKwH,QAE1CxH,KAAKwH,OAAS,M,qICtDX,SAAS4N,EAAOlW,EAAQqC,EAAQqT,GACrC,IAAMS,EAAWnW,EAAOqC,GAExBrC,EAAOqC,GAAU,WAAkB,2BAANoD,EAAM,yBAANA,EAAM,gBACjC,IAAMlG,EAAQ4W,EAAWA,EAASzQ,MAAM5E,KAAM2E,QAAQY,EAItD,OAFAqP,EAAShQ,MAAM5E,KAAM,CAACvB,GAAOiS,OAAO/L,IAE7BlG,GAGTP,OAAA,IAAAA,CAAcgB,EAAOqC,GAAS8T,GAyBzB,SAASC,EAASpW,EAAQqC,EAAQgU,GACvC,IAAMF,EAAWnW,EAAOqC,GAExBrC,EAAOqC,GAAU,WAAkB,2BAANoD,EAAM,yBAANA,EAAM,gBACjC,OAAO4Q,EAAU3Q,MAAM5E,KAAM,CAACqV,EAASrW,KAAKgB,OAAO0Q,OAAO/L,KAG5DzG,OAAA,IAAAA,CAAcgB,EAAOqC,GAAS8T,K,6BC/DjB,SAASG,EAAuBC,GAC7C,QAAa,IAATA,EACF,MAAM,IAAIC,eAAe,6DAG3B,OAAOD,EALT,mC,0ECMqBE,E,wFACZ1R,UAAP,SAAiBhB,GACf,EAAMgB,UAAN,UAAgBhB,GAEhBA,EAAME,WAAaF,EAAME,WAAa,IAAM,qB,YAG9CyS,WAAA,WACE,OAAO5V,KAAKuD,QAAL,YAAqBqS,WAArB,KAAA5V,MAAoC,I,SARX6V,I,uHCEfC,E,yFAAajW,KAElC3B,OAAA,IAAAA,CAAc4X,EAAK1W,UAAW,CAC5B4Q,SAAUnQ,IAAMQ,UAAU,YAC1B4P,YAAapQ,IAAMQ,UAAU,eAC7B0V,MAAOlW,IAAMQ,UAAU,SACvB2V,iBAAkBnW,IAAMQ,UAAU,oBAClC4V,SAAUpW,IAAMQ,UAAU,YAE1B6P,UAAWrQ,IAAMQ,UAAU,aAC3B6V,YAAarW,IAAMQ,UAAU,eAC7B8V,OAAQtW,IAAM+C,QAAQ,UAEtBwT,SAAUvW,IAAMQ,UAAU,WAAYR,IAAMgD,eAC5CwT,WAAYxW,IAAMQ,UAAU,aAAcR,IAAMgD,eAChDyT,kBAAmBzW,IAAMQ,UAAU,oBAAqBR,IAAMgD,eAC9D0T,wBAAyB1W,IAAMQ,UAAU,2BACzCmW,qBAAsB3W,IAAMQ,UAAU,wBAEtCoW,gBAAiB5W,IAAMQ,UAAU,mBACjCqW,aAAc7W,IAAMQ,UAAU,gBAE9BsW,QAAS9W,IAAMQ,UAAU,WACzBuW,UAAW/W,IAAMQ,UAAU,aAE3BwW,YAAa,KACbzO,MAAOyI,YAAS,WAAY,YAAa,eAAe,SAASb,EAAUE,EAAW2G,GAKpF,OAAIA,EACK,OAASA,EAAY7O,KAAK,MAAQ,IAChCkI,GACTlQ,KAAK8W,uBACE,IAGF,IAAMC,YAAc/G,MAS7BgH,SA7C4B,WA8C1B,OAAOhX,KAAKqW,aAAexE,QAAQoF,SAAS,EAAG,WAAWC,UAQ5DC,OAtD4B,WAuD1B,IAAMjR,EAAQ,IAAID,IACZkQ,EAASnW,KAAKmW,SAQpB,OANIA,GACFA,EAAO9O,SAAQ,SAAAyM,GACb5N,EAAMG,IAAI,QAAUyN,EAAM1T,KAAMyT,IAAW/P,UAAU,CAACgQ,cAInD5N,GAST4Q,qBAzE4B,WA0E1B,IAAMM,EAAQ,IAAIC,MACZvH,EAAO9P,KAEboX,EAAME,OAAS,WACb,IAAMC,EAAa,IAAIC,WACvB1H,EAAK+G,YAAcU,EAAWnJ,SAASpO,MACvC8P,EAAK7P,UAAY,IAAIC,KACrBtC,EAAE0L,UAEJ8N,EAAMK,YAAc,YACpBL,EAAMjH,IAAMnQ,KAAKkQ,aASnBwH,gBA7F4B,SA6FZC,GACd,IAAMzB,EAAclW,KAAKkW,cAIzB,OAFAhY,OAAA,IAAAA,CAAcgY,EAAayB,GAEpB3X,KAAKW,KAAK,CAACuV,oB,6BC5GtB,kC,IAkBqB0B,E,WAInB,aAA0B,2BAAXC,EAAW,yBAAXA,EAAW,gBACxB7X,KAAK6X,UAAYA,EACjB7X,KAAKF,KAAO,G,2BAUdqE,OAAA,WAAS,WACH2T,GAAe,EAWnB,OATA9X,KAAK6X,UAAUxQ,SAAQ,SAACuN,EAAUpX,GAChC,IAAMua,EAASnD,IAEXmD,IAAW,EAAKjY,KAAKtC,KACvB,EAAKsC,KAAKtC,GAAKua,EACfD,GAAe,OAIZA,GAAuB,CAACtT,QAAS,W,EAS1CwT,MAAA,WAAoB,2BAAXH,EAAW,yBAAXA,EAAW,gBAClB7X,KAAK6X,UAAY7X,KAAK6X,UAAUnH,OAAOmH,I,EAQzCI,WAAA,WACEjY,KAAKF,KAAO,I,qHC5DKoY,E,yFAAmBrY,KAExC3B,OAAA,IAAAA,CAAcga,EAAW9Y,UAAW,CAClCgE,MAAOvD,IAAMQ,UAAU,SACvB0S,KAAMlT,IAAMQ,UAAU,QAEtB8X,UAAWtY,IAAMQ,UAAU,YAAaR,IAAMgD,eAC9CiN,KAAMjQ,IAAM4C,OAAO,QACnB2V,UAAWvY,IAAM4C,OAAO,aAExB4V,aAAcxY,IAAMQ,UAAU,eAAgBR,IAAMgD,eACpDyV,eAAgBzY,IAAM4C,OAAO,kBAC7B8V,SAAU1Y,IAAM4C,OAAO,YACvB+V,eAAgB3Y,IAAMQ,UAAU,kBAEhCqW,aAAc7W,IAAMQ,UAAU,gBAC9BoY,WAAY5H,YAAS,gBAAgB,SAAA6F,GAAY,OAAI1J,KAAKqH,IAAI,EAAGqC,EAAe,MAChFgC,MAAO7Y,IAAM+C,QAAQ,SACrB+V,iBAAkB9Y,IAAM4C,OAAO,oBAE/BmW,WAAY/Y,IAAMQ,UAAU,aAAcR,IAAMgD,eAChDgW,mBAAoBhZ,IAAMQ,UAAU,sBACpCyY,SAAUjI,YAAS,eAAe,SAAAkI,GAAW,QAAMA,KACnDC,OAAQnI,YAAS,eAAe,SAAAkI,GAAW,OAAIzX,IAAI2X,QAAQnJ,OAASiJ,KAEpEG,SAAUrZ,IAAMQ,UAAU,WAAYR,IAAMgD,eAC5CsW,WAAYtZ,IAAM4C,OAAO,cACzB2W,SAAUvI,YAAS,YAAY,SAAAqI,GAAQ,QAAMA,KAE7CG,SAAUxZ,IAAMQ,UAAU,YAC1BiZ,UAAWzZ,IAAMQ,UAAU,aAC3BkZ,QAAS1Z,IAAMQ,UAAU,WACzBuW,UAAW/W,IAAMQ,UAAU,aAQ3BmZ,WAtCkC,SAsCvBpZ,GACT,IAAMU,EAAgBd,KAAKF,KAAKgB,cAC1B4X,EAAQ5X,GAAiBA,EAAc4X,MAEzCA,GACFA,EAAM5Y,KAAK2Z,MAAK,SAAC3Z,EAAMtC,GACrB,GAAI4C,IAAON,EAAKM,GAEd,OADAsY,EAAM5Y,KAAK4Z,OAAOlc,EAAG,IACd,MAafub,YA3DkC,WA4DhC,IAAMjJ,EAAOxO,IAAI2X,QAAQnJ,KAEzB,OAAIA,GAAQA,EAAKwG,oBAAsBtW,KAAKqY,eACnCrL,KAAKqH,IAAI,EAAGrU,KAAKwY,kBAAoBxY,KAAK6Y,sBAAwB,IAGpE,GAST1B,OA3EkC,WA4EhC,IAAMjR,EAAQ,IAAID,IAMlB,OAJIjG,KAAKoZ,YACPlT,EAAMG,IAAI,SAAU,EAAC,IAAD,CAAOxF,KAAK,SAAS+C,KAAK,eAAemG,MAAOzI,IAAIqP,WAAWC,MAAM,oCAGpF1K,GASTyT,QA3FkC,WA4FhC,IAAMjB,EAAQ1Y,KAAKF,KAAKgB,cAAc4X,MAEtC,OAAOA,EAAQA,EAAM5Y,KAAKmB,KAAI,SAAA2Y,GAAI,OAAIA,EAAKxZ,MAAM,O,6BCrGrD,8CAUe,SAASuR,EAAUC,GAChC,IAAMiI,EAAKhI,MAAMD,GAEXkI,EAAWD,EAAG3H,SACd6H,EAAOF,EAAG3H,OAAO,QACjB8H,EAAMC,YAAcrI,GAE1B,OAAO,UAAMsI,SAAO,EAACJ,SAAUA,EAAU1W,MAAO2W,EAAMI,kBAAA,GAAgBH,K,gGCFnDnE,E,0GACnBzR,KAAA,WAOEpE,KAAKuD,SAAU,G,EAGjBR,KAAA,WACE,IAAII,EAAY,aAAenD,KAAKiD,MAAMmX,MAAQ,KAAO,OAAS,KAAOpa,KAAKiD,MAAME,WAAa,IAIjG,OAHInD,KAAKuD,UAASJ,GAAa,YAC3BnD,KAAKiD,MAAMO,WAAUL,GAAa,aAGpC,WAAOA,UAAWA,GAChB,WAAOtC,KAAK,WACVwZ,QAASra,KAAKiD,MAAMmX,MACpB5W,SAAUxD,KAAKiD,MAAMO,SACrB8W,SAAU1c,EAAE2c,SAAS,UAAWva,KAAKsa,SAAStb,KAAKgB,SACrD,SAAKmD,UAAU,oBACZnD,KAAK4V,cAEP5V,KAAKiD,MAAMC,W,EAWlB0S,WAAA,WACE,OAAO5V,KAAKuD,QACRM,IAAiBC,UAAU,CAACC,KAAM,SAClCH,YAAK5D,KAAKiD,MAAMmX,MAAQ,eAAiB,iB,EAS/CE,SAAA,SAASD,GACHra,KAAKiD,MAAMqX,UAAUta,KAAKiD,MAAMqX,SAASD,EAASra,O,GAjDpBgE,M,mECfjBwW,EACnB,SAAY/Q,EAAQgR,EAAc7Z,EAAS8Z,GACzC1a,KAAKyJ,OAASA,EACdzJ,KAAKya,aAAeA,EACpBza,KAAKY,QAAUA,EACfZ,KAAK0a,IAAMA,EAEX,IACE1a,KAAK8B,SAAWO,KAAKC,MAAMmY,GAC3B,MAAO/I,GACP1R,KAAK8B,SAAW,KAGlB9B,KAAKyI,MAAQ,O,gGCMIkS,E,0GACnB5X,KAAA,WAAO,MACmBzB,IAAjBsZ,EADF,EACEA,QAASC,EADX,EACWA,KAEhB,OACE,SAAK1X,UAAW,2BAA6BnD,KAAKiD,MAAME,WAAa,IACnE2X,aAAcD,GAAQA,EAAKE,KAAK/b,KAAK6b,GACrCG,aAAcH,GAAQA,EAAKG,aAAahc,KAAK6b,IAC5CD,EAAQK,YACL,CAACjb,KAAKkb,gBAAiBlb,KAAKmb,iBAC5Bnb,KAAKob,oB,EAKf1W,OAAA,SAAO0F,EAAeiR,GAIpBA,EAAQlX,QAAS,G,EASnB+W,cAAA,WAAgB,IACPN,EAAWtZ,IAAXsZ,QACDU,EAAWV,EAAQW,eAAiB,GAE1C,OAAOnK,IAAWtN,UAAU,CAC1BX,UAAW,sCACXoO,KAAMqJ,EAAQY,UACd5X,KAAM,sBACNR,MAAOkY,EAASlY,MAChBsB,OAAQ,aACRjB,QAAS,SAAAiO,GACHA,EAAE+J,UAAY/J,EAAEgK,SAAWhK,EAAEiK,SAAuB,IAAZjK,EAAEkK,QAC9ClK,EAAEmK,iBACFjB,EAAQkB,Y,EAWdX,cAAA,WAAgB,IACPN,EAAQvZ,IAARuZ,KAEP,OAAKA,GAASA,EAAKrT,OAEZ1E,IAAOgB,UAAU,CACtBX,UAAW,sCAAwC0X,EAAKkB,OAAS,UAAY,IAC7EtY,QAASoX,EAAKmB,aAAahd,KAAK6b,GAChCjX,KAAM,qBAL0B,I,EAepCwX,gBAAA,WACE,IAAKpb,KAAKiD,MAAMgZ,OAAQ,MAAO,GADf,IAGTA,EAAU3a,IAAV2a,OACDnM,EAAOxO,IAAI2X,QAAQnJ,KAEzB,OAAOhN,IAAOgB,UAAU,CACtBX,UAAW,yCACR2M,GAAQA,EAAK0G,uBAAyB,OAAS,IAClD/S,QAAS,SAAAiO,GACPA,EAAEwK,kBACFD,EAAOlB,QAETnX,KAAM,iB,GAnF4BI,M,wFCPnBmY,E,kGACnBpZ,KAAA,WAAO,MACwC/C,KAAKiD,MAA3CrC,EADF,EACEA,QAAS0Z,EADX,EACWA,SAAU7b,EADrB,EACqBA,MAAO+E,EAD5B,EAC4BA,SAEjC,OACE,UAAML,UAAU,UACd,YAAQA,UAAU,2BAA2BmX,SAAUA,EAAW1c,EAAE2c,SAAS,QAASD,EAAStb,KAAKgB,YAASuF,EAAW9G,MAAOA,EAAO+E,SAAUA,GAC7ItF,OAAO8S,KAAKpQ,GAASK,KAAI,SAAAlC,GAAG,OAAI,YAAQN,MAAOM,GAAM6B,EAAQ7B,QAE/D6E,YAAK,cAAe,CAACT,UAAW,mB,GATLa,M,6BCZpC,6CAEe,SAASoY,EAAaC,GACnC,IAAMxC,EAAKwC,EAAOze,EAEZA,EAAI,SAAJA,EAAa0e,GAAe,2BAAN3X,EAAM,iCAANA,EAAM,kBAChC,GAAI2X,EAAKld,WAAakd,EAAKld,qBAAqB4E,IAAW,CACzD,IAAId,EAAWyB,EAAKE,MAAM,GAK1B,OAJwB,IAApB3B,EAAS0C,QAAgB5E,MAAMub,QAAQrZ,EAAS,MAClDA,EAAWA,EAAS,IAGfoZ,EAAKxY,UAAUa,EAAK,GAAIzB,GAGjC,IAAMsZ,EAAO3C,EAAGjV,MAAM5E,KAAM2F,WAa5B,OAXI6W,EAAKxZ,MAAMyZ,MACb7e,EAAE6e,KAAKD,EAAMA,EAAKxZ,MAAMyZ,MAGtBD,EAAKxZ,MAAMqO,QACbmL,EAAKxZ,MAAMuO,KAAOiL,EAAKxZ,MAAMqO,MAC7BmL,EAAKxZ,MAAM0B,OAAS9G,EAAEyT,aAEfmL,EAAKxZ,MAAMqO,OAGbmL,GAGTte,OAAO8S,KAAK6I,GAAIxS,SAAQ,SAAAtI,GAAG,OAAInB,EAAEmB,GAAO8a,EAAG9a,MAO3CnB,EAAEmE,WAAa,WACbnE,EAAE8e,mBACF9e,EAAE+e,kBAGJN,EAAOze,EAAIA,I,0ECjCQgf,E,kGACnB7Z,KAAA,WACE,OACE,SAAKI,UAAU,eACb,WAAInD,KAAKiD,MAAMoQ,Q,QAJkBrP,I,yFCHpB6Y,E,0GACnBzY,KAAA,WAOEpE,KAAK8c,WAAa,I,EAGpB/Z,KAAA,WACE,OACE,SAAKI,UAAU,gBACZnD,KAAK8c,WAAW7b,KAAI,SAAA6C,GAAS,OAAI,SAAKX,UAAU,sBAAsBW,Q,EAK7EY,OAAA,SAAO0F,EAAeiR,GAIpBA,EAAQlX,QAAS,G,EASnB4W,KAAA,SAAKjX,GACH,KAAMA,aAAqBwM,KACzB,MAAM,IAAIpL,MAAM,6DAGlBpB,EAAUb,MAAMuN,UAAYxQ,KAAK+c,QAAQ/d,KAAKgB,KAAM8D,GAEpD9D,KAAK8c,WAAWpW,KAAK5C,GACrBlG,EAAE0L,U,EASJyT,QAAA,SAAQjZ,GACN,IAAMkZ,EAAQhd,KAAK8c,WAAWG,QAAQnZ,IAEvB,IAAXkZ,IACFhd,KAAK8c,WAAWpD,OAAOsD,EAAO,GAC9Bpf,EAAE0L,W,EASN4T,MAAA,WACEld,KAAK8c,WAAa,GAClBlf,EAAE0L,U,GAjEoCtF,M,0ECLrBmZ,E,0GACnBha,UAAA,WACE,MAAO,kC,EAGTC,MAAA,WACE,OAAOpD,KAAKiD,MAAMuG,MAAMkR,IACpB1a,KAAKiD,MAAMuG,MAAMkR,IAAIjR,OAAO,IAAIzJ,KAAKiD,MAAMuG,MAAMkR,IAAI0C,WACrD,I,EAGNrX,QAAA,WACE,IAAI0U,EAEJ,IACEA,EAAepY,KAAKE,UAAUF,KAAKC,MAAMtC,KAAKiD,MAAMuG,MAAMiR,cAAe,KAAM,GAC/E,MAAO/I,GACP+I,EAAeza,KAAKiD,MAAMuG,MAAMiR,aAGlC,OAAO,SAAKtX,UAAU,cACpB,aACGnD,KAAKiD,MAAMuG,MAAM5I,QAAQW,OAD5B,IACqCvB,KAAKiD,MAAMuG,MAAM5I,QAAQY,IAAI,aAAK,aACpEiZ,K,SAvBsCjS,I,kGCS1B6U,E,WACnB,aAOErd,KAAKsd,aAAe,GAEpBtd,KAAKud,OAAS,K,2BAGhBC,gBAAA,SAAgBF,GACdpf,OAAA,IAAAA,CAAc8B,KAAKsd,aAAcA,I,EAGnC1M,MAAA,SAAMxQ,EAAIqd,GACR,IAAMC,EAAc1d,KAAKsd,aAAald,GAEtC,OAAIsd,EACK1d,KAAK4E,MAAM8Y,EAAaD,GAAc,IAGxCrd,G,EAGTud,YAAA,SAAYvd,EAAIwd,EAAQH,GACtB,IAAIC,EAAc1d,KAAKsd,aAAald,GAEpC,OAAIsd,GACFE,EAASC,SAASD,EAAQ,IAE1BF,EAAc1d,KAAK8d,UAAUJ,EAAaE,GAEnC5d,KAAK4E,MAAM8Y,EAAaD,GAAc,KAGxCrd,G,EAGTwE,MAAA,SAAM8Y,EAAaK,GAMjB,GAAI,SAAUA,EAAO,CACnB,IAAMjO,EAAOxM,YAAQya,EAAO,QAEvBA,EAAM/N,WAAU+N,EAAM/N,SAAWA,YAASF,IAGjD4N,EAAcA,EAAYnQ,MAAM,IAAI4G,OAAO,gCAAiC,OAE5E,IAAM6J,EAAW,GACXC,EAAO,CAACD,GAsBd,OApBAN,EAAYrW,SAAQ,SAAA6W,GAClB,IAAMzQ,EAAQyQ,EAAKzQ,MAAM,IAAI0G,OAAO,oCAAqC,MAEzE,GAAI1G,GACF,GAAIA,EAAM,GACRwQ,EAAK,GAAGvX,KAAKqX,EAAMtQ,EAAM,UACpB,GAAIA,EAAM,GACf,GAAIA,EAAM,GACRwQ,EAAKE,YACA,CACL,IAAI7M,EAAMyM,EAAMtQ,EAAM,KAAO,CAAC6D,IAAK7D,EAAM,GAAIvK,SAAU,IACvD+a,EAAK,GAAGvX,KAAK4K,GACb2M,EAAKG,QAAQ9M,EAAIpO,UAAYoO,SAIjC2M,EAAK,GAAGvX,KAAKwX,MAIVF,EAAStL,QAAO,SAAAwL,GAAI,OAAIA,M,EAGjCJ,UAAA,SAAUJ,EAAaE,GAAQ,WACvBS,EAAe,IAAIlK,OAAO,iBAC9BmK,EAAe,IAAInK,OAAO,iHAC1BoK,EAAe,IAAIpK,OAAO,sGAC1BqK,EAAgB,GAChBC,EAAgB,GAsClB,OApCAf,EAAYnQ,MAAM,KAAKlG,SAAQ,SAAA6W,GAC7B,GAAII,EAAaI,KAAKR,GAAO,CAC3B,IAAM1Q,EAAU0Q,EAAKzQ,MAAM6Q,GAC3BG,EAAcjR,EAAQ,IAAMA,EAAQA,EAAQ5H,OAAS,QAChD,GAAIyY,EAAaK,KAAKR,GAAO,CAClC,IAAM1Q,EAAU0Q,EAAKzQ,MAAM4Q,GAC3BG,EAAc9X,KAAK8G,EAAQ,SAE3BgR,EAAc9X,KAAKwX,MAIvBO,EAAcpX,SAAQ,SAACsX,EAAMjN,GAC3B,GAAI6M,EAAaG,KAAKhN,GAAI,CACxB,IAAMlE,EAAUkE,EAAEjE,MAAM8Q,GAExB,GAAI/Q,EAAQ,GAAI,CACd,IAAM3O,EAAK2O,EAAQ,GAAGD,MAAM,KAE5B,IAAK,IAAItO,KAAKJ,EACZ,GAAI+e,GAAU/e,EAAGI,GACf,OAAOwf,EAAc/M,OAGpB,CACL,IAAIkN,EAAc,EAAKC,cAAcrR,EAAQ,IACzCsR,EAAc,EAAKD,cAAcrR,EAAQ,IAE7C,IAAK,MAAQA,EAAQ,GAAKoQ,GAAUgB,EAAahB,EAASgB,KACvD,MAAQpR,EAAQ,GAAKoQ,GAAUkB,EAAclB,EAASkB,GACvD,OAAOL,EAAc/M,QAMtB8M,EAAcxe,KAAK+e,eAAenB,EAAQ5d,KAAKud,UAAYiB,EAAc,SAAMjZ,G,EAGxFsZ,cAAA,SAAcjB,GACZ,MAAI,SAAWA,EACNoB,OAAOC,kBACL,SAAWrB,GAAU,QAAUA,EACjCoB,OAAOE,kBAGTrB,SAASD,EAAQ,K,EAG1BmB,eAAA,SAAenB,EAAQL,GASrB,OARI,UAAYA,IACdA,EAAS,OAGPA,EAAO3X,OAAS,IAClB2X,EAASA,EAAOhQ,MAAM,KAAK,IAGrBgQ,GACN,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACH,OAAO,EAET,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,MACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,MACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,MACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACH,OAAkB,GAAVK,EAAe,EAAI,EAE7B,IAAK,KACL,IAAK,KACL,IAAK,MACL,IAAK,KACL,IAAK,MACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,MACL,IAAK,MACL,IAAK,KACL,IAAK,KACH,OAAoB,IAAXA,GAA4B,GAAVA,EAAgB,EAAI,EAEjD,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACL,IAAK,KACH,OAASA,EAAS,IAAM,GAAOA,EAAS,KAAO,GAAO,EAAOA,EAAS,IAAM,GAAOA,EAAS,IAAM,IAAQA,EAAS,IAAM,IAAQA,EAAS,KAAO,IAAQ,EAAI,EAE/J,IAAK,KACL,IAAK,KACH,OAAkB,GAAVA,EAAe,EAAOA,GAAU,GAAOA,GAAU,EAAM,EAAI,EAErE,IAAK,KACH,OAAkB,GAAVA,EAAe,EAAgB,GAAVA,EAAe,EAAI,EAElD,IAAK,KACH,OAASA,EAAS,IAAM,GAAOA,EAAS,KAAO,GAAO,EAAOA,EAAS,IAAM,IAAQA,EAAS,IAAM,IAAQA,EAAS,KAAO,IAAQ,EAAI,EAEzI,IAAK,KACH,OAAQA,EAAS,KAAO,EAAK,EAAMA,EAAS,KAAO,EAAK,EAAOA,EAAS,KAAO,GAAOA,EAAS,KAAO,EAAM,EAAI,EAElH,IAAK,KACH,OAAQA,EAAS,IAAM,EAAK,EAAI,EAElC,IAAK,KACH,OAAkB,GAAVA,EAAe,EAAkB,IAAXA,GAAmBA,EAAS,IAAM,GAAOA,EAAS,IAAM,GAAQ,EAAOA,EAAS,IAAM,IAAQA,EAAS,IAAM,GAAO,EAAI,EAExJ,IAAK,KACH,OAAmB,IAAXA,EAAgB,EAAOA,EAAS,IAAM,GAAOA,EAAS,KAAO,GAAO,EAAI,EAElF,IAAK,KACH,OAAkB,GAAVA,EAAe,EAAOA,EAAS,IAAM,GAAOA,EAAS,IAAM,IAAQA,EAAS,IAAM,IAAQA,EAAS,IAAM,IAAQ,EAAI,EAE/H,IAAK,KACH,OAAkB,GAAVA,EAAe,EAAgB,GAAVA,EAAe,EAAiB,GAAVA,GAA2B,IAAVA,EAAiB,EAAI,EAE3F,IAAK,KACH,OAAkB,GAAVA,EAAe,EAAkB,IAAXA,GAAmBA,EAAS,IAAM,GAAOA,EAAS,IAAM,GAAQ,EAAI,EAEpG,IAAK,KACH,OAAmB,IAAXA,EAAgB,EAAgB,GAAVA,EAAe,EAAgB,GAAVA,EAAe,EAAOA,GAAU,GAAOA,GAAU,GAAO,EAAOA,GAAU,IAAQA,GAAU,GAAO,EAAI,EAE3J,QACE,OAAO,I,mCC3PA,SAAS7G,EAAcnE,GAKpC,IAJA,IAAIuM,EAAM,EAID3hB,EAAI,EAAGA,EAAIoV,EAAOhN,OAAQpI,IACjC2hB,GAAOvM,EAAOwM,WAAW5hB,GAK3B,IACM6hB,EA7CR,SAAkBC,EAAG/f,EAAGggB,GACtB,IAAIjhB,EACAkT,EACA3K,EAEErJ,EAAIwP,KAAKwS,MAAU,EAAJF,GACfG,EAAQ,EAAJH,EAAQ9hB,EACZ8B,EAAIigB,GAAK,EAAIhgB,GACbmgB,EAAIH,GAAK,EAAIE,EAAIlgB,GACjBb,EAAI6gB,GAAK,GAAK,EAAIE,GAAKlgB,GAE7B,OAAQ/B,EAAI,GACV,KAAK,EAAGc,EAAIihB,EAAG/N,EAAI9S,EAAGmI,EAAIvH,EAAG,MAC7B,KAAK,EAAGhB,EAAIohB,EAAGlO,EAAI+N,EAAG1Y,EAAIvH,EAAG,MAC7B,KAAK,EAAGhB,EAAIgB,EAAGkS,EAAI+N,EAAG1Y,EAAInI,EAAG,MAC7B,KAAK,EAAGJ,EAAIgB,EAAGkS,EAAIkO,EAAG7Y,EAAI0Y,EAAG,MAC7B,KAAK,EAAGjhB,EAAII,EAAG8S,EAAIlS,EAAGuH,EAAI0Y,EAAG,MAC7B,KAAK,EAAGjhB,EAAIihB,EAAG/N,EAAIlS,EAAGuH,EAAI6Y,EAG5B,MAAO,CACLphB,EAAG0O,KAAKwS,MAAU,IAAJlhB,GACdkT,EAAGxE,KAAKwS,MAAU,IAAJhO,GACd3K,EAAGmG,KAAKwS,MAAU,IAAJ3Y,IAsBJ8Y,CADAR,EAAM,IACS,IAAK,GAAK,IAErC,MAAO,GAAKE,EAAI/gB,EAAEshB,SAAS,IAAMP,EAAI7N,EAAEoO,SAAS,IAAMP,EAAIxY,EAAE+Y,SAAS,IA/CvE,mC,0ECIqBC,E,WACnB,WAAYC,GAQV9f,KAAKF,KAAO,GASZE,KAAK8f,OAASA,E,2BAWhBje,YAAA,SAAYD,GACNA,EAAQme,UAAUne,EAAQme,SAAS9e,IAAIjB,KAAKggB,WAAWhhB,KAAKgB,OAEhE,IAAM+X,EAASnW,EAAQ9B,gBAAgBkB,MACnCY,EAAQ9B,KAAKmB,IAAIjB,KAAKggB,WAAWhhB,KAAKgB,OACtCA,KAAKggB,WAAWpe,EAAQ9B,MAO5B,OAFAiY,EAAOnW,QAAUA,EAEVmW,G,EAYTiI,WAAA,SAAWlgB,GACT,IAAKE,KAAK8f,OAAOhgB,EAAKe,MAAO,OAAO,KAEpC,IAAMA,EAAOb,KAAKF,KAAKA,EAAKe,MAAQb,KAAKF,KAAKA,EAAKe,OAAS,GAU5D,OARIA,EAAKf,EAAKM,IACZS,EAAKf,EAAKM,IAAIG,SAAST,GAEvBe,EAAKf,EAAKM,IAAMJ,KAAKigB,aAAangB,EAAKe,KAAMf,GAG/Ce,EAAKf,EAAKM,IAAID,QAAS,EAEhBU,EAAKf,EAAKM,K,EAenB6E,KAAA,SAAKpE,EAAMT,EAAI8f,EAAYtf,QAAc,IAA1Bsf,MAAQ,SAAkB,IAAdtf,MAAU,IACnC,IAAId,EAAOogB,EACP1e,EAAMF,IAAIG,MAAMpB,UAAU,UAAY,IAAMQ,EAUhD,OARIT,aAAcY,MAChBQ,GAAO,eAAiBpB,EAAG4H,KAAK,KACT,iBAAP5H,EAChBN,EAAOM,EACEA,IACToB,GAAO,IAAMpB,GAGRkB,IAAIF,QAAQlD,OAAA,IAAAA,CAAc,CAC/BqD,OAAQ,MACRC,MACA1B,QACCc,IAAUe,KAAK3B,KAAK6B,YAAY7C,KAAKgB,Q,EAW1C2C,QAAA,SAAQ9B,EAAMT,GACZ,OAAOJ,KAAKF,KAAKe,IAASb,KAAKF,KAAKe,GAAMT,I,EAY5C+f,MAAA,SAAMtf,EAAM9B,EAAKN,GACf,OAAOuB,KAAKogB,IAAIvf,GAAM6R,QAAO,SAAA3R,GAAK,OAAIA,EAAMhC,OAAWN,KAAO,I,EAUhE2hB,IAAA,SAAIvf,GACF,IAAMwf,EAAUrgB,KAAKF,KAAKe,GAE1B,OAAOwf,EAAUniB,OAAO8S,KAAKqP,GAASpf,KAAI,SAAAb,GAAE,OAAIigB,EAAQjgB,MAAO,I,EAQjE6B,OAAA,SAAOlB,UACEf,KAAKF,KAAKiB,EAAMjB,KAAKe,MAAME,EAAMX,O,EAW1C6f,aAAA,SAAapf,EAAMf,GAGjB,YAH4B,IAAXA,MAAO,IACxBA,EAAKe,KAAOf,EAAKe,MAAQA,EAElB,IAAKb,KAAK8f,OAAOjf,GAAOf,EAAME,O,gFC9JpBsgB,E,WACnB,WAAYxQ,EAAMyQ,GAOhBvgB,KAAK8P,KAAOA,EAQZ9P,KAAKugB,UAAYA,E,2BAYnBC,MAAA,SAAM1gB,EAAMc,GACV,YADwB,IAAdA,MAAU,IACbU,IAAIF,QAAQlD,OAAA,IAAAA,CAAc,CAC/BqD,OAAQ,OACRC,IAAKF,IAAIG,MAAMpB,UAAU,WAAa,SACtCP,QACCc,K,EAQL6f,OAAA,WACEzV,OAAO0V,SAAWpf,IAAIG,MAAMpB,UAAU,WAAa,iBAAmBL,KAAKugB,W,mCC9C/E,kC,IAKqBI,E,WACnB,aAAc,WAGZ7b,EAAE,YAAY8b,OAAM,SAAAlP,GACd,EAAKmP,WACPnP,EAAEmK,iBACF,EAAKjT,W,2BAWXiY,OAAA,WACE,OAAO/b,EAAE,QAAQ4F,SAAS,e,EAQ5B9B,KAAA,WACE9D,EAAE,QAAQ6F,YAAY,cAElB3K,KAAK8gB,WAAW9gB,KAAK8gB,UAAU7e,U,EAQrC8Y,KAAA,WAAO,WACLjW,EAAE,QAAQic,SAAS,cAEnB/gB,KAAK8gB,UAAYhc,EAAE,UAChBic,SAAS,wBACTC,SAAS,QACTJ,OAAM,kBAAM,EAAKhY,UAEpBiM,YAAW,kBAAM,EAAKiM,UAAUC,SAAS,U,mCC1C9B,SAASE,EAAUC,EAAQC,QAAe,IAAfA,MAAW,IACnD,IAAMlgB,EAAM,GAEZ,IAAK,IAAMlC,KAAOmiB,EAAQ,CACxB,IAAM7P,EAAQ6P,EAAOniB,GAEjBsS,EAAMvN,YAAWuN,EAAMvN,UAAUb,MAAMme,UAAYriB,GAEvDkC,EAAIkgB,EAAW9P,EAAMgQ,MAAQhQ,EAAMvN,UAGrC,OAAO7C,EApBT,mC,0ECEqBqgB,E,kGACnB5f,YAAA,WACE,MAAO,K,QAFwB7B,I,wGCEd0hB,E,yFAAa1hB,KAElC3B,OAAA,IAAAA,CAAcqjB,EAAKniB,UAAW,CAC5Bwe,OAAQ/d,IAAMQ,UAAU,UACxBmhB,WAAY3hB,IAAM4C,OAAO,cAEzB0V,UAAWtY,IAAMQ,UAAU,YAAaR,IAAMgD,eAC9CiN,KAAMjQ,IAAM4C,OAAO,QACnBgf,YAAa5hB,IAAMQ,UAAU,eAC7B0F,QAASlG,IAAMQ,UAAU,WACzBqhB,YAAa7hB,IAAMQ,UAAU,eAC7BshB,aAAc9Q,YAAS,cAAeoC,mBAEtC2O,SAAU/hB,IAAMQ,UAAU,WAAYR,IAAMgD,eAC5Cgf,WAAYhiB,IAAM4C,OAAO,cACzBqf,SAAUjR,YAAS,YAAY,SAAA+Q,GAAQ,QAAMA,KAE7C1I,SAAUrZ,IAAMQ,UAAU,WAAYR,IAAMgD,eAC5CsW,WAAYtZ,IAAM4C,OAAO,cACzB2W,SAAUvI,YAAS,YAAY,SAAAqI,GAAQ,QAAMA,KAE7CvC,QAAS9W,IAAMQ,UAAU,WACzBkZ,QAAS1Z,IAAMQ,UAAU,WACzBuW,UAAW/W,IAAMQ,UAAU,gB,wFCzBR0hB,E,yFAAqBliB,KAE1C3B,OAAA,IAAAA,CAAc6jB,EAAa3iB,UAAW,CACpCqiB,YAAa5hB,IAAMQ,UAAU,eAC7B0F,QAASlG,IAAMQ,UAAU,WACzB8X,UAAWtY,IAAMQ,UAAU,YAAaR,IAAMgD,eAE9CmW,OAAQnZ,IAAMQ,UAAU,UAExByP,KAAMjQ,IAAM4C,OAAO,QACnBuf,SAAUniB,IAAM4C,OAAO,YACvBwf,QAASpiB,IAAM4C,OAAO,c,qNCMT,MAXf,SAAmByf,EAAOC,GAKxB,IAJA,IAAInF,GAAS,EACTpX,EAASuc,EAAOvc,OAChBiF,EAASqX,EAAMtc,SAEVoX,EAAQpX,GACfsc,EAAMrX,EAASmS,GAASmF,EAAOnF,GAEjC,OAAOkF,G,QCbLE,EAA0B,iBAAR3M,MAAoBA,MAAQA,KAAKvX,SAAWA,QAAUuX,KCE7D,GDCJ,KAAc2M,GAAY3Q,SAAS,cAATA,ICHnBlT,OCAd8jB,EAAcnkB,OAAOkB,UAGrB,EAAiBijB,EAAYhjB,eAO7BijB,EAAuBD,EAAYzC,SAGnC2C,EAAiB,EAAS,EAAO/jB,iBAAc+G,EA6BpC,MApBf,SAAmB9G,GACjB,IAAI+jB,EAAQ,EAAe7kB,KAAKc,EAAO8jB,GACnCjR,EAAM7S,EAAM8jB,GAEhB,IACE9jB,EAAM8jB,QAAkBhd,EACxB,IAAIkd,GAAW,EACf,MAAO/Q,IAET,IAAIqG,EAASuK,EAAqB3kB,KAAKc,GAQvC,OAPIgkB,IACED,EACF/jB,EAAM8jB,GAAkBjR,SAEjB7S,EAAM8jB,IAGVxK,GClCL,EAPc7Z,OAAOkB,UAOcwgB,SAaxB,MAJf,SAAwBnhB,GACtB,OAAO,EAAqBd,KAAKc,ICT/B,EAAiB,EAAS,EAAOD,iBAAc+G,EAkBpC,MATf,SAAoB9G,GAClB,OAAa,MAATA,OACe8G,IAAV9G,EAdQ,qBADL,gBAiBJ,GAAkB,KAAkBP,OAAOO,GAC/C,EAAUA,GACV,EAAeA,ICIN,MAJf,SAAsBA,GACpB,OAAgB,MAATA,GAAiC,iBAATA,GCRlB,MAJf,SAAyBA,GACvB,OAAO,EAAaA,IAVR,sBAUkB,EAAWA,ICVvC,EAAcP,OAAOkB,UAGrB,EAAiB,EAAYC,eAG7BqjB,EAAuB,EAAYA,qBAyBxB,EALG,EAAgB,WAAa,OAAO/c,UAApB,IAAsC,EAAkB,SAASlH,GACjG,OAAO,EAAaA,IAAU,EAAed,KAAKc,EAAO,YACtDikB,EAAqB/kB,KAAKc,EAAO,WCPvB,EAFDuC,MAAMub,QClBhBoG,EAAmB,EAAS,EAAOC,wBAAqBrd,EAc7C,MALf,SAAuB9G,GACrB,OAAO,EAAQA,IAAU,EAAYA,OAChCkkB,GAAoBlkB,GAASA,EAAMkkB,KCqB3B,MAvBf,SAASE,EAAYX,EAAOY,EAAOC,EAAWC,EAAUjL,GACtD,IAAIiF,GAAS,EACTpX,EAASsc,EAAMtc,OAKnB,IAHAmd,IAAcA,EAAY,GAC1BhL,IAAWA,EAAS,MAEXiF,EAAQpX,GAAQ,CACvB,IAAInH,EAAQyjB,EAAMlF,GACd8F,EAAQ,GAAKC,EAAUtkB,GACrBqkB,EAAQ,EAEVD,EAAYpkB,EAAOqkB,EAAQ,EAAGC,EAAWC,EAAUjL,GAEnD,EAAUA,EAAQtZ,GAEVukB,IACVjL,EAAOA,EAAOnS,QAAUnH,GAG5B,OAAOsZ,GCVM,MALf,SAAqBmK,GAEnB,OADsB,MAATA,EAAgB,EAAIA,EAAMtc,QACvB,EAAYsc,EAlBf,KAkBkC,I,sCCO5Be,E,iDAOX,M,0BAeC,I,gCAQM,IAAIhd,K,2BAQT,M,8BAQG,IAAIoX,K,yBAQT,IAAIwC,IAAM,CAChBqD,OAAQ5B,IACR6B,MAAOrN,IACPsN,YAAalL,IACbQ,MAAO6I,IACPpL,OAAQlO,IACRob,cAAetB,O,yBAUT,I,2BAQC,G,gCASM,M,yDAIP,I,8BACK,G,2BAEbuB,KAAA,SAAK1hB,GACH5B,KAAKF,KAAO8B,EACZ5B,KAAK2Q,WAAW4M,OAAS3b,EAAQ2b,Q,EAGnCgG,KAAA,WAAO,WACLvjB,KAAKwjB,aAAahd,UAAUa,SAAQ,SAAAoc,GAAW,OAAIA,EAAY,MAE/DzjB,KAAKD,MAAM8B,YAAY,CAAC/B,KAAME,KAAKF,KAAK4jB,YAExC1jB,KAAKyB,MAAQzB,KAAKD,MAAM4C,QAAQ,SAAU,GAE1C3C,KAAKiZ,QAAU,IAAIqH,IACftgB,KAAKD,MAAM4C,QAAQ,QAAS3C,KAAKF,KAAKmZ,QAAQ0K,QAC9C3jB,KAAKF,KAAKmZ,QAAQsH,WAGtBvgB,KAAK4jB,S,EAGPC,eAAA,SAAeC,GAAY,WACzB5lB,OAAO8S,KAAK8S,GAAYzc,SAAQ,SAAAtJ,GAC9B,IAAMgmB,EAAYD,EAAW/lB,GAI7B,EAFkBimB,EAAYD,EAAU3O,QAExC,wDAAkC,uFACvBA,OAAO,EAAM,CAAErX,OAAMT,QAASymB,S,EAK7CH,MAAA,SAAMzC,QAAe,IAAfA,MAAW,IACfnhB,KAAKmJ,MAAQvL,EAAEgmB,MAAMnX,SAASwX,eAAe,SAAU,EAACC,EAAA,EAAD,OACvDlkB,KAAKmkB,OAASvmB,EAAEgmB,MAAMnX,SAASwX,eAAe,UAAW,EAACpH,EAAA,EAAD,OAEzD7c,KAAKic,OAAS,IAAI0E,IAElB/iB,EAAEyT,MACA5E,SAASwX,eAAe,WACxB9C,EAAW,IACXF,YAAUjhB,KAAKkhB,OAAQC,IAKzB,IAAIrM,KAAe,SAAAhK,GACjB,IAAMsZ,EAAOtf,EAAE,QACT+F,EAASuZ,EAAKvZ,SAASC,IAE7BsZ,EACGxZ,YAAY,QAASE,GAAOD,GAC5BD,YAAY,WAAYE,EAAMD,MAChCgI,QAEH/N,GAAE,WACAA,EAAE,QAAQic,SAAS,iBAAkB/V,OAAS,QAAU,gB,EAU5DqZ,qBAAA,WACE,GAAIrkB,KAAKF,KAAKwkB,YAAa,CACzB,IAAMC,EAAUvkB,KAAKD,MAAM8B,YAAY7B,KAAKF,KAAKwkB,aAIjD,OAFAtkB,KAAKF,KAAKwkB,YAAc,KAEjBC,EAGT,OAAO,M,EASTC,SAAA,SAASphB,GACPpD,KAAKoD,MAAQA,EACbpD,KAAKykB,e,EAQPC,cAAA,SAAcC,GACZ3kB,KAAK4kB,WAAaD,EAClB3kB,KAAKykB,e,EAGPA,YAAA,WACEhY,SAASrJ,OAASpD,KAAK4kB,WAAL,IAAsB5kB,KAAK4kB,WAA3B,KAA4C,KAC3D5kB,KAAKoD,MAAQpD,KAAKoD,MAAQ,MAAQ,IACnCpD,KAAKyB,MAAMpB,UAAU,U,EAWzBe,QAAA,SAAQyjB,GAAiB,WACjBjkB,EAAU1C,OAAA,IAAAA,CAAc,GAAI2mB,GAalC,GAPAjkB,EAAQuN,WAAavN,EAAQuN,aAAc,EAE3CiH,iBAAOxU,EAAS,UAAU,SAACmX,EAAQ2C,GAAT,OAAiBA,EAAIoK,iBAAiB,eAAgB,EAAK7L,QAAQsH,cAKtE,QAAnB3f,EAAQW,QAAuC,SAAnBX,EAAQW,OAAmB,CACzD,IAAMA,EAASX,EAAQW,OACvB6T,iBAAOxU,EAAS,UAAU,SAACmX,EAAQ2C,GAAT,OAAiBA,EAAIoK,iBAAiB,yBAA0BvjB,MAC1FX,EAAQW,OAAS,OAMnBX,EAAQmkB,YAAcnkB,EAAQmkB,aAAgB,SAAAtK,GAAY,OAAIA,GAE9D7Z,EAAQokB,aAAepkB,EAAQokB,cAAiB,SAAAxb,GAC9C,MAAMA,GAMR,IAAM6L,EAAWzU,EAAQ0C,QACzB1C,EAAQ0C,QAAU,SAAAoX,GAChB,IAAID,EAGFA,EADEpF,EACaA,EAASqF,EAAID,cAEbC,EAAID,cAAgB,KAGrC,IAAMhR,EAASiR,EAAIjR,OAEnB,GAAIA,EAAS,KAAOA,EAAS,IAC3B,MAAM,IAAI+Q,IAAa/Q,EAAQgR,EAAc7Z,EAAS8Z,GAGxD,GAAIA,EAAIuK,kBAAmB,CACzB,IAAM1E,EAAY7F,EAAIuK,kBAAkB,gBACpC1E,IAAWjf,IAAI2X,QAAQsH,UAAYA,GAGzC,IACE,OAAOle,KAAKC,MAAMmY,GAClB,MAAO/I,GACP,MAAM,IAAI8I,IAAa,IAAKC,EAAc7Z,EAAS8Z,KAInD1a,KAAKklB,cAAcllB,KAAKmkB,OAAOpH,QAAQ/c,KAAKklB,aAAazc,OAI7D,IAAMvG,EAAWtE,EAAEsE,WAoDnB,OAlDAtE,EAAEwD,QAAQR,GAASe,MAAK,SAAAG,GAAQ,OAAII,EAASC,QAAQL,MAAW,SAAA0H,GAG9D,IAAItG,EAEJ,OAJA,EAAKgiB,aAAe1b,EAIZA,EAAMC,QACZ,KAAK,IACHvG,EAAWsG,EAAM1H,SAAS4H,OACvBzI,KAAI,SAAAuI,GAAK,MAAI,CAACA,EAAM2b,OAAQ,iBAC5BC,QAAO,SAACxe,EAAGC,GAAJ,OAAUD,EAAE8J,OAAO7J,KAAI,IAC9BhC,MAAM,GAAI,GACb,MAEF,KAAK,IACL,KAAK,IACH3B,EAAW5B,IAAIqP,WAAWC,MAAM,4CAChC,MAEF,KAAK,IACL,KAAK,IACH1N,EAAW5B,IAAIqP,WAAWC,MAAM,oCAChC,MAEF,KAAK,IACH1N,EAAW5B,IAAIqP,WAAWC,MAAM,8CAChC,MAEF,QACE1N,EAAW5B,IAAIqP,WAAWC,MAAM,kCAGpC,IAAMyU,EAAU/jB,IAAIG,MAAMpB,UAAU,SAEpCmJ,EAAMf,MAAQ,IAAI6H,IAAM,CACtBzP,KAAM,QACNqC,WACAqN,SAAU8U,GAAW,CACnB,EAACviB,EAAA,EAAD,CAAQK,UAAU,sBAAsBM,QAAS,EAAK6hB,UAAUtmB,KAAK,EAAMwK,IAA3E,YAIJ,IACE5I,EAAQokB,aAAaxb,GACrB,MAAOA,GACP,EAAK2a,OAAOpJ,KAAKvR,EAAMf,OAGzBvG,EAASqjB,OAAO/b,MAGXtH,EAASE,S,EAOlBkjB,UAAA,SAAU9b,GACRxJ,KAAKmkB,OAAOpH,QAAQ/c,KAAKklB,aAAazc,OAEtCzI,KAAKmJ,MAAM4R,KAAK,IAAIoC,IAAkB,CAAC3T,Y,EAWzC6H,MAAA,SAAMtT,EAAMynB,QAAa,IAAbA,MAAS,IACnB,IAAMhkB,EAAMxB,KAAKkhB,OAAOnjB,GAAMsjB,KAAK/a,QAAQ,cAAc,SAAC1I,EAAGmB,GAAJ,OAAYuE,YAAQkiB,EAAQzmB,MAC/E0mB,EAAc7nB,EAAEyT,MAAMqU,iBAAiBF,GAG7C,OAFgC,aAAjB5nB,EAAEyT,MAAM1S,KAAsB2C,IAAIG,MAAMpB,UAAU,YAAc,IAE/DmB,GAAOikB,EAAc,IAAMA,EAAc,K,8CChE9C,MAzTI,MAEjB,MAAME,EAAqB,CAAC,UAAW,aAAc,gEAAiE,4CAA6C,8CAA+C,4CAA6C,SAAU,SAAU,QAAS,oBAAqB,mCAEjT,MAAMnd,EACJ,aAAY,YACVod,EAAW,SACXC,EAAW,GAAE,OACbC,EAAS,SAAQ,QACjBC,EAAU,SAAQ,YAClBC,EAAc,0BAAyB,aACvCC,EAAe,wBAAuB,cACtCC,GAAgB,EAAK,aACrBC,GAAe,EAAK,oBACpBC,GAAsB,EAAK,mBAC3BC,GAAqB,EAAK,UAC1BC,GAAY,IAGZtmB,KAAKmJ,MAAQsD,SAASwX,eAAe2B,GAErC5lB,KAAK0E,OAAS,CACZ4hB,YACAJ,gBACAF,cACAC,eACAH,SACAC,UACAK,sBACAC,qBACAF,gBAGEN,EAASjgB,OAAS,GAAG5F,KAAKumB,oBAAoBV,GAElD7lB,KAAKwmB,QAAUxmB,KAAKwmB,QAAQxnB,KAAKgB,MACjCA,KAAKymB,UAAYzmB,KAAKymB,UAAUznB,KAAKgB,MASvC,oBAAoB6lB,GAClBA,EAASnT,OAAOgU,SAASrf,QAAQsf,IAC/BA,EAAQrc,iBAAiB,QAASsc,GAAS5mB,KAAK6mB,UAAUD,MAI9D,YAOE,GANA5mB,KAAK8mB,cAAgBra,SAASqa,cAC9B9mB,KAAKmJ,MAAMwD,aAAa,cAAe,SACvC3M,KAAKmJ,MAAMxB,UAAUtB,IAAI,WACzBrG,KAAK+mB,gBAAgB,WACrB/mB,KAAKgnB,oBAEDhnB,KAAK0E,OAAO2hB,mBAAoB,CAClC,MAAMY,EAAU,KACdjnB,KAAKmJ,MAAMgM,oBAAoB,eAAgB8R,GAAS,GACxDjnB,KAAKknB,uBAGPlnB,KAAKmJ,MAAMmB,iBAAiB,eAAgB2c,GAAS,QAErDjnB,KAAKknB,sBAGPlnB,KAAK0E,OAAOohB,OAAO9lB,KAAKmJ,MAAOnJ,KAAK8mB,eAGtC,aACE,MAAM3d,EAAQnJ,KAAKmJ,MACnBnJ,KAAKmJ,MAAMwD,aAAa,cAAe,QACvC3M,KAAKmnB,uBACLnnB,KAAK+mB,gBAAgB,UAEjB/mB,KAAK8mB,eACP9mB,KAAK8mB,cAAc9d,QAGrBhJ,KAAK0E,OAAOqhB,QAAQ/lB,KAAKmJ,OAErBnJ,KAAK0E,OAAO0hB,oBACdpmB,KAAKmJ,MAAMmB,iBAAiB,gBAAgB,SAAS2c,IACnD9d,EAAMxB,UAAU1F,OAAO,WACvBkH,EAAMgM,oBAAoB,eAAgB8R,GAAS,MAClD,GAEH9d,EAAMxB,UAAU1F,OAAO,WAI3B,eAAe2jB,GACb5lB,KAAKmJ,MAAQsD,SAASwX,eAAe2B,GACjC5lB,KAAKmJ,OAAOnJ,KAAKonB,aAGvB,gBAAgBC,GACd,IAAKrnB,KAAK0E,OAAOwhB,cAAe,OAChC,MAAMoB,EAAO7a,SAAS8a,cAAc,QAEpC,OAAQF,GACN,IAAK,SACHnpB,OAAOuH,OAAO6hB,EAAKpY,MAAO,CACxBsY,SAAU,GACVzc,OAAQ,KAEV,MAEF,IAAK,UACH7M,OAAOuH,OAAO6hB,EAAKpY,MAAO,CACxBsY,SAAU,SACVzc,OAAQ,WAQhB,oBACE/K,KAAKmJ,MAAMmB,iBAAiB,aAActK,KAAKwmB,SAC/CxmB,KAAKmJ,MAAMmB,iBAAiB,QAAStK,KAAKwmB,SAC1C/Z,SAASnC,iBAAiB,UAAWtK,KAAKymB,WAG5C,uBACEzmB,KAAKmJ,MAAMgM,oBAAoB,aAAcnV,KAAKwmB,SAClDxmB,KAAKmJ,MAAMgM,oBAAoB,QAASnV,KAAKwmB,SAC7C/Z,SAAS0I,oBAAoB,UAAWnV,KAAKymB,WAG/C,QAAQG,GACFA,EAAMlhB,OAAO+hB,aAAaznB,KAAK0E,OAAOuhB,gBACxCjmB,KAAKonB,aACLR,EAAM/K,kBAIV,UAAU+K,GACc,KAAlBA,EAAMc,SAAgB1nB,KAAKonB,WAAWR,GACpB,IAAlBA,EAAMc,SAAe1nB,KAAK2nB,cAAcf,GAG9C,oBACE,MAAMgB,EAAQ5nB,KAAKmJ,MAAM0e,iBAAiBlC,GAC1C,OAAO3kB,SAAS4mB,GAGlB,sBACE,GAAI5nB,KAAK0E,OAAOyhB,aAAc,OAC9B,MAAM2B,EAAiB9nB,KAAK+nB,oBACxBD,EAAeliB,QAAQkiB,EAAe,GAAG9e,QAG/C,cAAc4d,GACZ,MAAMkB,EAAiB9nB,KAAK+nB,oBAE5B,GAAK/nB,KAAKmJ,MAAM6e,SAASvb,SAASqa,eAE3B,CACL,MAAMmB,EAAmBH,EAAe7K,QAAQxQ,SAASqa,eAErDF,EAAMnL,UAAiC,IAArBwM,IACpBH,EAAeA,EAAeliB,OAAS,GAAGoD,QAC1C4d,EAAM/K,kBAGH+K,EAAMnL,UAAYwM,IAAqBH,EAAeliB,OAAS,IAClEkiB,EAAe,GAAG9e,QAClB4d,EAAM/K,uBAXRiM,EAAe,GAAG9e,SAyBxB,IAAIkf,EAAc,KASlB,MAiBMC,EAAwB/nB,IAC5B,IAAKqM,SAASwX,eAAe7jB,GAG3B,OAFAgoB,QAAQC,KAAK,8CAAmDjoB,KAAO,8DAA+D,iEACtIgoB,QAAQC,KAAK,aAAc,8DAA+D,0BAA0BjoB,cAC7G,GA2BLkoB,EAAe,CAACzC,EAAU0C,KAE9B,GAlB8B1C,KAC9B,GAAIA,EAASjgB,QAAU,EACrBwiB,QAAQC,KAAK,kEAAwE,8DAA+D,mBACpJD,QAAQC,KAAK,aAAc,8DAA+D,wDAc5FG,CAAwB3C,IACnB0C,EAAY,OAAO,EAExB,IAAK,IAAInoB,KAAMmoB,EAAYJ,EAAsB/nB,GAEjD,OAAO,GAyDT,MAAO,CACLgE,KAjDWM,IAEX,MAAM9D,EAAU1C,OAAOuH,OAAO,GAAI,CAChCugB,YAAa,2BACZthB,GAEGmhB,EAAW,IAAIpZ,SAASob,iBAAiB,IAAIjnB,EAAQolB,iBAErDuC,EAvEmB,EAAC1C,EAAU4C,KACpC,MAAMF,EAAa,GAMnB,OALA1C,EAASxe,QAAQsf,IACf,MAAMf,EAAce,EAAQrmB,WAAWmoB,GAAahqB,WACpB8G,IAA5BgjB,EAAW3C,KAA4B2C,EAAW3C,GAAe,IACrE2C,EAAW3C,GAAalf,KAAKigB,KAExB4B,GAgEYG,CAAmB7C,EAAUjlB,EAAQolB,aAExD,IAA0B,IAAtBplB,EAAQ0lB,YAA6D,IAAvCgC,EAAazC,EAAU0C,GAEzD,IAAK,IAAIxpB,KAAOwpB,EAAY,CAC1B,IAAI9pB,EAAQ8pB,EAAWxpB,GACvB6B,EAAQglB,YAAc7mB,EACtB6B,EAAQilB,SAAW,IAAIpnB,GACvBypB,EAAc,IAAI1f,EAAM5H,KAkC1Bma,KAvBW,CAAC6K,EAAalhB,KACzB,MAAM9D,EAAU8D,GAAU,GAC1B9D,EAAQglB,YAAcA,GAEI,IAAtBhlB,EAAQ0lB,YAA6D,IAAvC6B,EAAsBvC,KAExDsC,EAAc,IAAI1f,EAAM5H,GAExBsnB,EAAYrB,cAgBZzd,MAPYwc,IACZA,EAAcsC,EAAYS,eAAe/C,GAAesC,EAAYd,gBA/SrD,G,qDCUElD,E,0GACnB9f,KAAA,WACEpE,KAAKiK,SAAU,EACfjK,KAAK8D,UAAY,M,EAGnBf,KAAA,WACE,OACE,SAAKI,UAAU,qBAAqB/C,GAAG,QAAQqD,QAASzD,KAAKyD,QAAQzE,KAAKgB,OACvEA,KAAK8D,WAAa9D,KAAK8D,UAAUQ,W,EAKxCI,OAAA,SAAO0F,EAAeiR,GAChBjR,IAKJiR,EAAQlX,QAAS,I,EASnB4W,KAAA,SAAKjX,GAAW,WACd,KAAMA,aAAqB0E,KACzB,MAAM,IAAItD,MAAM,6DAGlB4J,aAAa9O,KAAK4oB,aAElB5oB,KAAKiK,SAAU,EACfjK,KAAK8D,UAAYA,EAEbxC,IAAIunB,UAASvnB,IAAIunB,QAAQ1kB,QAAS,GAEtCvG,EAAE0L,QAAO,GAEJxE,EAAE,mBAAmBc,QACxBd,EAAE,WAAWic,SAAS,kBACnBC,SAAS,QAGd8H,EAAW/N,KAAK,QAAS,CACvBqL,qBAAqB,EACrBL,QAAS,WACPjhB,EAAE,mBAAmBikB,QAAQ,KAAK,WAChC/oB,KAAKiC,YAGP,EAAKgI,SAAU,KAInBjK,KAAK8I,W,EAGPrF,QAAA,SAAQiO,GACFA,EAAEhM,SAAW1F,KAAKkE,SACpBlE,KAAKoJ,S,EASTA,MAAA,WACOpJ,KAAKiK,UAOVjK,KAAK4oB,YAAc/T,YAAW,kBAAMiU,EAAW1f,MAAM,c,EAQvD8T,MAAA,WACMld,KAAK8D,WACP9D,KAAK8D,UAAUoF,SAGjBlJ,KAAK8D,UAAY,KAEjBxC,IAAIunB,QAAQ1kB,QAAS,EAErBvG,EAAEmE,c,EAQJ+G,QAAA,WACM9I,KAAK8D,WAAa9D,KAAK8D,UAAUgF,SACnC9I,KAAK8D,UAAUgF,QAAQ9I,KAAK8E,M,GA5GQd,M,6BCC3B,SAASglB,EAAapL,GACnC,OAAOA,EAAOgC,WAAWtZ,QAAQ,wBAAyB,KAZ5D,mC,6BCae,SAAS2iB,EAAa/kB,EAAS0Q,GAC5C,IAAMsU,EAAUpkB,EAAEkG,QACZme,EAAMrkB,EAAEZ,GAEd,IAAKA,IAAYilB,EAAIvjB,OACnB,OAAOgP,IAGT,IAAMwU,EAAiBD,EAAIte,SAASC,IAAMoe,EAAQje,YAElD2J,IAEAsU,EAAQje,UAAUke,EAAIte,SAASC,IAAMse,GAzBvC,mC,6BCIe,KAObC,SAAU,KASVC,YAhBa,SAgBD1C,GAKV,OAJA5mB,KAAKqpB,SAAWrpB,KAAKqpB,UAAY,GAEjCrpB,KAAKqpB,SAASzC,GAAS5mB,KAAKqpB,SAASzC,IAAU,GAExC5mB,KAAKqpB,SAASzC,IAUvBD,QA/Ba,SA+BLC,GAAgB,kCAANjiB,EAAM,iCAANA,EAAM,kBACtB3E,KAAKspB,YAAY1C,GAAOvf,SAAQ,SAAA4f,GAAO,OAAIA,EAAQriB,MAAM,EAAMD,OASjE4kB,GAzCa,SAyCV3C,EAAOK,GACRjnB,KAAKspB,YAAY1C,GAAOlgB,KAAKugB,IAU/BuC,IApDa,SAoDT5C,EAAOK,GAOTjnB,KAAKspB,YAAY1C,GAAOlgB,MANR,SAAV+iB,IACJxC,EAAQriB,MAAM5E,KAAM2F,WAEpB3F,KAAK0pB,IAAI9C,EAAO6C,OAYpBC,IApEa,SAoET9C,EAAOK,GACT,IAAMoC,EAAWrpB,KAAKspB,YAAY1C,GAC5B5J,EAAQqM,EAASpM,QAAQgK,IAEhB,IAAXjK,GACFqM,EAAS3P,OAAOsD,EAAO,M,uGCrER2M,E,iFACZ1lB,UAAP,SAAiBhB,GACf,EAAMgB,UAAN,UAAgBhB,GAEhBA,EAAME,WAAa,mBACnBF,EAAM6G,eAAiB,yB,2BAGzBI,UAAA,WAIE,IAAM4C,EAAa9M,KAAK4pB,gBAClBC,EAAc3rB,OAAA,IAAAA,CAAc,GAAI4O,EAAW7J,OAGjD,OAFA4mB,EAAY1mB,WAAa0mB,EAAY1mB,WAAa,IAAM,gCAAkCnD,KAAKiD,MAAM4G,gBAE9F,CACL/G,IAAOgB,UAAU+lB,GACjB,YACE1mB,UAAW,uCAAyCnD,KAAKiD,MAAM4G,gBAC/DwB,cAAY,YACXzH,YAAK5D,KAAKiD,MAAMW,KAAM,CAACT,UAAW,gBAClCS,YAAK,oBAAqB,CAACT,UAAW,oB,EAY7CymB,cAAA,WAGE,IAFA,IAAI9c,EAAa9M,KAAKiD,MAAMC,SAErB4J,aAAsB9L,OAAO8L,EAAaA,EAAW,GAE5D,OAAOA,G,GAvCgClD,M,6BCR3C,6CAQe,SAASkgB,EAAWha,GAC/B,GAAIA,EAAKuG,cAAgBvG,EAAKkH,WAC1B,OAAO,UAAM7T,UAAU,cAAcS,YAAK,oB,6BCHnC,SAASmmB,EAASnY,GAC/B,IAAMiI,EAAKhI,MAAMD,GAEXkI,EAAWD,EAAG3H,SACd6H,EAAOF,EAAG3H,OAAO,QAEvB,OAAO,UAAMgI,SAAO,EAACJ,SAAUA,GAAWC,GAb5C,mC,6BCUe,SAASiQ,EAAiBpM,GAEvC,OAAIA,GAAU,IACL5Q,KAAKwS,MAAM5B,EAAS,KAAWtc,IAAIqP,WAAWC,MAAM,oCAClDgN,GAAU,IACZ5Q,KAAKwS,MAAM5B,EAAS,KAAQtc,IAAIqP,WAAWC,MAAM,oCAEjDgN,EAAOgC,WAjBlB,mC,iBCAA,mBAEC,SAAWvD,EAAQ4N,GACnB,aAEA,IAAIrsB,EAkB6C,SAASqsB,EAAQ5N,EAAQ9W,GAG1E3H,EAAEssB,QAAU,WACX,MAAO,UAGR,IAAIC,EAAS,GAAG9qB,eACZwB,EAAO,GAAG+e,SAEd,SAASwK,EAAWlrB,GACnB,MAAyB,mBAAXA,EAGf,SAASmrB,EAASnrB,GACjB,MAA6B,oBAAtB2B,EAAKlD,KAAKuB,GAGlB,SAASorB,EAASprB,GACjB,MAA6B,oBAAtB2B,EAAKlD,KAAKuB,GAGlB,IAAIqd,EAAUvb,MAAMub,SAAW,SAAUrd,GACxC,MAA6B,mBAAtB2B,EAAKlD,KAAKuB,IAGlB,SAASqrB,KAET,IAoBIC,EAAWC,EAAWC,EAAwBC,EApB9CC,EAAe,CAClBC,KAAM,EACNC,KAAM,EACNC,GAAI,EACJC,IAAK,EACLC,QAAS,EACTC,MAAO,EACPC,GAAI,EACJC,IAAK,EACLC,MAAO,EACPC,OAAQ,EACRC,KAAM,EACNC,KAAM,EACNC,MAAO,EACPC,OAAQ,EACRC,MAAO,EACPC,IAAK,GA8BN,SAASC,EAAcC,EAAMxa,GAO5B,IANA,IAII7D,EAJA+E,EAAU,GAEVuZ,EAAS,+EAILte,EAAQse,EAAOC,KAAK1a,IAC3B,GAAiB,KAAb7D,EAAM,IAAaA,EAAM,GAC5Bqe,EAAKxa,IAAM7D,EAAM,QACX,GAAiB,MAAbA,EAAM,GAChBqe,EAAK9oB,MAAM5C,GAAKqN,EAAM,QAChB,GAAiB,MAAbA,EAAM,GAChB+E,EAAQ9L,KAAK+G,EAAM,SACb,GAA2B,MAAvBA,EAAM,GAAG2C,OAAO,GAAY,CACtC,IAAI6b,EAAYxe,EAAM,GAClBwe,IAAWA,EAAYA,EAAU3lB,QAAQ,YAAa,OACzC,UAAbmH,EAAM,GAAgB+E,EAAQ9L,KAAKulB,GAClCH,EAAK9oB,MAAMyK,EAAM,IAAMwe,IAAa,EAI3C,OAAOzZ,EAGR,SAAS0Z,EAAmBvnB,EAAMwnB,GACjC,IAAIjpB,EAAWipB,EAAWxnB,EAAKE,MAAM,GAAKF,EAE1C,OAAwB,IAApBzB,EAAS0C,QAAgB2W,EAAQrZ,EAAS,IACtCA,EAAS,GAETA,EAIT,SAASkpB,EAAY1mB,EAAQ1C,EAAOwP,GACnC,IAAI6Z,EAAY,UAAWrpB,EAAQ,QAAU,YAE7C,IAAK,IAAIspB,KAAYtpB,EAChBmnB,EAAOxsB,KAAKqF,EAAOspB,KAClBA,IAAaD,GACI,MAAnBrpB,EAAMspB,IACc,KAApBtpB,EAAMspB,IACP9Z,EAAQ9L,KAAK1D,EAAMspB,IAEnB5mB,EAAO4mB,GAAY,IAEnB5mB,EAAO4mB,GAAYtpB,EAAMspB,IAKxB9Z,EAAQ5M,SAAQF,EAAO2mB,GAAa7Z,EAAQxK,KAAK,MAUtD,SAASpK,EAAE0T,EAAKib,GAGf,IAFA,IAAI5nB,EAAO,GAEFnH,EAAI,EAAGoI,EAASD,UAAUC,OAAQpI,EAAIoI,EAAQpI,IACtDmH,EAAKnH,EAAI,GAAKmI,UAAUnI,GAGzB,GAAI8T,GAAO8Y,EAAW9Y,EAAIvO,MAAO,OAAOypB,GAAalb,EAAK3M,GAE1D,IAAK2lB,EAAShZ,GACb,MAAM,IAAIpM,MAAM,+DAIjB,IAAIinB,EAAoB,MAATI,GAAiBlC,EAASkC,MACtC,QAASA,GAAS,SAAUA,GAAS,YAAaA,GAEjDvpB,EAAQmpB,EAAWI,EAAQ,GAC3BT,EAAO,CACVxa,IAAK,MACLtO,MAAO,GACPE,SAAUgpB,EAAmBvnB,EAAMwnB,IAIpC,OADAC,EAAYN,EAAK9oB,MAAOA,EAAO6oB,EAAcC,EAAMxa,IAC5Cwa,EAGR,SAASzkB,EAAQolB,EAAMhN,GACtB,IAAK,IAAIjiB,EAAI,EAAGA,EAAIivB,EAAK7mB,SAAW6Z,EAAEgN,EAAKjvB,GAAIA,QAKhD,SAASkvB,EAAQD,EAAMhN,GACtBpY,EAAQolB,GAAM,SAAUzpB,EAAOxF,GAC9B,OAAQwF,EAAQA,GAASA,EAAMA,QACjB,MAAbA,EAAMjE,KACN0gB,EAAEzc,EAAOxF,MA0CZ,SAASmvB,EAAWC,EAAepQ,EAAMQ,GACxC4P,EAAc/f,aAAa2P,EAC1BoQ,EAAcC,WAAW7P,IAAU,MA/JrCpf,EAAEkvB,KAAO,SAAUC,GAElB,OAVD,SAAoBA,GACnBvC,EAAYuC,EAAKtgB,SACjBge,EAAYsC,EAAKrM,SACjBiK,EAAwBoC,EAAKne,sBAAwBme,EAAKje,aAC1D4b,EAAyBqC,EAAKpe,uBAAyBoe,EAAKlY,WAK5DmY,CAAW3Q,EAAS0Q,GAAQ/hB,QACrBqR,GAGRze,EAAEkvB,KAAK7C,QAAUrsB,EAAEqsB,QAAUA,EAE7BrsB,EAAEkvB,KAAKzQ,GAsNP,SAAS4Q,EAASntB,EAAMotB,EAAQC,EAAUP,GACzC,IAAIQ,EAAattB,EAAK8F,SAAWsnB,EAAOtnB,OAWxC,OATKwnB,GACJV,EAAQ5sB,GAAM,SAAUkD,EAAOxF,GAC9B,IAAI6vB,EAAaH,EAAO1vB,GACxB,OAAO4vB,EAAaC,GACnBA,EAAWrqB,OACXqqB,EAAWrqB,MAAMjE,MAAQiE,EAAMjE,OAI9BquB,EAnEL,SAA0BttB,EAAMqtB,EAAUD,EAAQN,GACjDF,EAAQ5sB,GAAM,SAAUf,EAAKvB,GAC5B2vB,EAASpuB,EAAMA,EAAIA,KAAOouB,EAASpuB,GAAO,CACzCuuB,OALQ,EAMRtQ,MAAOxf,EACP+vB,KAAMJ,EAASpuB,GAAKie,MACpB9Y,QAASgpB,EAAOtF,MAAMuF,EAASpuB,GAAKie,QACnCwN,EAAU9d,cAAc,QACtB,CAAC4gB,OAXS,EAWUtQ,MAAOxf,MAGhC,IAAIgwB,EAAU,GACd,IAAK,IAAIve,KAAQke,EACZhD,EAAOxsB,KAAKwvB,EAAUle,IACzBue,EAAQ9mB,KAAKymB,EAASle,IAIxB,IAAIwe,EAAUD,EAAQ7mB,KAAK+mB,GACvBC,EAAY,IAAI3sB,MAAMksB,EAAOtnB,QAiCjC,OA/BA+nB,EAAU/F,MAAQsF,EAAOtF,MAAM/iB,QAE/BwC,EAAQomB,GAAS,SAAUG,GAC1B,IAAI5Q,EAAQ4Q,EAAO5Q,MAKnB,GAjCa,IA6BT4Q,EAAON,SACVpQ,EAAMgQ,EAAOlQ,GAAO4K,MAAOsF,EAAOlQ,IAClC2Q,EAAUjU,OAAOsD,EAAO,IA9BX,IAgCV4Q,EAAON,OAAsB,CAChC,IAAIO,EAAQrD,EAAU9d,cAAc,OACpCmhB,EAAM9uB,IAAMe,EAAKkd,GAAOha,MAAMjE,IAC9B4tB,EAAWC,EAAeiB,EAAO7Q,GACjC2Q,EAAUjU,OAAOsD,EAAO,EAAG,CAC1Bha,MAAO,CAACjE,IAAKe,EAAKkd,GAAOha,MAAMjE,KAC/B6oB,MAAO,CAACiG,KAETF,EAAU/F,MAAM5K,GAAS6Q,EAG1B,GA1CS,IA0CLD,EAAON,OAAiB,CAC3B,IAAIQ,EAAgBF,EAAO1pB,QACvB6pB,EAAenB,EAAcC,WAAW7P,GACxC+Q,IAAiBD,GAAmC,OAAlBA,GACrClB,EAAc/f,aAAaihB,EAC1BC,GAAgB,MAElBJ,EAAU3Q,GAASkQ,EAAOU,EAAOL,MACjCI,EAAU/F,MAAM5K,GAAS8Q,MAIpBH,EAgBCK,CAAiBluB,EAAMqtB,EAAUD,EAAQN,GAEzCM,EAgET,SAASe,EAAoBnuB,EAAMotB,EAAQgB,IA3B3C,SAA2BpuB,EAAMotB,EAAQgB,GACxC,OAAIpuB,EAAKwR,MAAQ4b,EAAO5b,MAEpB4c,EAAavnB,OAAOqB,SACtB9J,OAAO8S,KAAKkc,EAAOlqB,OAAO2D,OAAOqB,SAI/BlI,EAAKkD,MAAM5C,KAAO8sB,EAAOlqB,MAAM5C,KAI/BN,EAAKkD,MAAMjE,MAAQmuB,EAAOlqB,MAAMjE,MAIR,QAAxBnB,EAAE0L,OAAO6kB,YACJjB,EAAOkB,gBAAiD,IAAhClB,EAAOkB,cAAcjqB,OAG1B,SAAxBvG,EAAE0L,OAAO6kB,aACLjB,EAAOkB,gBAAiD,IAAhClB,EAAOkB,cAAcjqB,aAQjDkqB,CAAkBvuB,EAAMotB,EAAQgB,KAC/BhB,EAAOtF,MAAMhiB,QAAQsX,EAAMgQ,EAAOtF,OAElCsF,EAAOkB,eACThE,EAAW8C,EAAOkB,cAAc/pB,WACjC6oB,EAAOkB,cAAc/pB,WAGlB6oB,EAAOoB,aACVjnB,EAAQ6lB,EAAOoB,aAAa,SAAUhpB,GACjCA,EAAWjB,UACdiB,EAAWjB,SAAS,CAACwX,eAAgB0O,QAc1C,IAAIgE,EAAkB,EA4GtB,SAASC,EACR1uB,EACAotB,EACAN,EACA6B,EACAzR,EACA0R,GAEA,IAAI9G,EAAQsF,EAAOtF,MA4BnB,OA3BK6G,GAAYA,IAAajE,EAAU1D,eACtChnB,IAASotB,IACNptB,EAAK6uB,UACRzR,EAAM0K,EAAOsF,GACbtF,EAAQgH,EAAWhC,EAAe5P,EAAOld,IACjB,aAAd4uB,EAEV9B,EAAcnuB,MAAQqB,EACZ2uB,GAEVA,EAASI,UAAY/uB,EACrB8nB,EAAQ,GAAG/iB,MAAMlH,KAAK8wB,EAAS5B,eAGL,IAAtBjF,EAAM,GAAGkH,UAAkBlH,EAAMhiB,OAAS,GAC3CgiB,EAAM,GAAGmH,UAAUzb,OAClBsU,EAAM,GAAGmH,UAAUzb,UACtB4J,EAAMgQ,EAAOtF,MAAOsF,GACpBtF,EAAQ,CAAC4C,EAAUwE,eAAelvB,KAxUtC,SAAwB8sB,EAAe7jB,EAAOiU,EAAOld,GACpD,IACC6sB,EAAWC,EAAe7jB,EAAOiU,GACjCjU,EAAMgmB,UAAYjvB,EACjB,MAAO4R,KAuUPud,CAAerC,EAAehF,EAAM,GAAI5K,EAAOld,MAGjDotB,EAAS,IAAIptB,EAAKH,YAAYG,IACvB8nB,MAAQA,EACfsF,EAAOyB,SAAW7uB,EAAK6uB,SAChBzB,EAGR,SAASgC,EACRhC,EACAptB,EACAkd,EACA4P,EACAuC,EACAV,EACAC,GAEA,OAAKxB,EAAOtF,MAAMhiB,OAEPsnB,EAAOkC,YAActvB,EAAKsvB,WAAaD,EAC1CX,EAAc1uB,EAAMotB,EAAQN,EAAe6B,EAAUzR,EAC3D0R,IAEOxB,EAAOtF,MAAMyH,QAAS,EAAMnC,GA/EtC,SAAgCptB,EAAM8sB,EAAe5P,GACpD,IAAI4K,EAUAsF,EAWJ,OApBIptB,EAAK6uB,SACR/G,EAAQgH,EAAWhC,EAAe5P,EAAOld,IAEzC8nB,EAAQ,CAAC4C,EAAUwE,eAAelvB,IAC5B8sB,EAAc0C,YAAY1E,GAC/B+B,EAAWC,EAAehF,EAAM,GAAI5K,KASrCkQ,EAHmB,iBAATptB,GACO,iBAATA,GACS,kBAATA,EACC,IAAIA,EAAKH,YAAYG,GAErBA,GAGH8nB,MAAQA,EACRsF,EAoDCqC,CAAuBzvB,EAAM8sB,EAAe5P,GASrD,SAASwS,EAAiB1oB,GACzB,OAAIA,EAAK6nB,SAGD7nB,EAAK8gB,MAAMhiB,OACR2W,EAAQzV,GACXA,EAAKlB,OAEN,EAGR,SAAS6pB,EACR3vB,EACAotB,EACAN,EACA5P,EACA0R,EACAS,EACAV,EACAiB,EACAC,GAEA7vB,EAnXD,SAAiB2sB,GAEhB,IAAK,IAAIjvB,EAAI,EAAGA,EAAIivB,EAAK7mB,OAAQpI,IAC5B+e,EAAQkQ,EAAKjvB,MAChBivB,EAAOA,EAAK/b,OAAO9L,MAAM,GAAI6nB,GAG7BjvB,KAGF,OAAOivB,EAyWAmD,CAAQ9vB,GACf,IACIuvB,EAASnC,EAAOtnB,SAAW9F,EAAK8F,OAChCiqB,EAAgB,EAWhB1C,EAAW,GACX2C,GAA2B,EAE/BpD,EAAQQ,GAAQ,SAAUlqB,EAAOxF,GAChCsyB,GAA2B,EAC3B3C,EAASD,EAAO1vB,GAAGwF,MAAMjE,KAAO,CAACuuB,OApXpB,EAoXsCtQ,MAAOxf,MAjR5D,SAAwBsC,GACvB,IAAIiwB,EAAO,EACXrD,EAAQ5sB,GAAM,WAMb,OALAuH,EAAQvH,GAAM,SAAUkD,IAClBA,EAAQA,GAASA,EAAMA,QAAuB,MAAbA,EAAMjE,MAC3CiE,EAAMjE,IAAM,cAAgBgxB,QAGvB,KA4QRC,CAAelwB,GACXgwB,IACH5C,EAASD,EAASntB,EAAMotB,EAAQC,EAAUP,IAM3C,IAFA,IAAIqD,EAAa,EAERzyB,EAAI,EAAG0yB,EAAMpwB,EAAK8F,OAAQpI,EAAI0yB,EAAK1yB,IAAK,CAEhD,IAAIsJ,EAAOqpB,EACVvD,EACA8B,EACAxB,EACAlQ,EACAld,EAAKtC,GACL0vB,EAAO+C,GACPd,EACAnS,EAAQ6S,GAAiBA,EACzBpB,EACAiB,EACAC,GAEG7oB,IAASvB,IACZ8pB,EAASA,GAAUvoB,EAAK8gB,MAAMyH,OAC9BQ,GAAiBL,EAAiB1oB,GAClComB,EAAO+C,KAAgBnpB,GAKzB,OADKuoB,GAvUN,SAAmBvvB,EAAMotB,EAAQtF,GAIhCvgB,EAAQvH,GAAM,SAAUswB,EAAG5yB,GACT,MAAb0vB,EAAO1vB,IAAYoqB,EAAMlhB,KAAK9B,MAAMgjB,EAAOsF,EAAO1vB,GAAGoqB,UAM1DvgB,EAAQ6lB,EAAOtF,OAAO,SAAUpL,EAAMhf,GACd,MAAnBgf,EAAKzN,YAAsB6Y,EAAM3K,QAAQT,GAAQ,GACpDU,EAAM,CAACV,GAAO,CAAC0Q,EAAO1vB,QAIpBsC,EAAK8F,OAASsnB,EAAOtnB,SAAQsnB,EAAOtnB,OAAS9F,EAAK8F,QACtDsnB,EAAOtF,MAAQA,EAqTFyI,CAAUvwB,EAAMotB,EAnDjB,IAoDLA,EA2ER,SAASoD,EACRxwB,EACAkD,EACAE,EACAsZ,EACAkT,EACAa,EACAjC,GAEA,IAAIpB,EAAS,CACZ5b,IAAKxR,EAAKwR,IACVtO,MAAOA,EACPE,SAAUA,EACV0kB,MAAO,CAACpL,IAST,OAvUD,SAAiC0Q,EAAQqD,EAAOjC,GAC3CA,EAAY1oB,SACfsnB,EAAOqD,MAAQA,EACfrD,EAAOoB,YAAcA,EACrBjnB,EAAQinB,GAAa,SAAUhpB,GAK9B,GAJIA,EAAWjB,UAAYiB,EAAWjB,SAASmsB,OAC9ClrB,EAAWjB,SAAWiB,EAAWjB,SAASmsB,MAGvCjC,GAAmBjpB,EAAWjB,SAAU,CAC3C,IAAIA,EAAWiB,EAAWjB,SAC1BiB,EAAWjB,SAAW,aACtBiB,EAAWjB,SAASmsB,KAAOnsB,OAqT9BosB,CAAwBvD,EAAQqD,EAAOjC,GAEnCpB,EAAOhqB,WAAagqB,EAAOhqB,SAAS0kB,QACvCsF,EAAOhqB,SAAS0kB,MAAQ,IAGlBsF,EAjVRtvB,EAAE8e,iBAAmB,WAAc6R,KACnC3wB,EAAE+e,eAAiB,WACd4R,EAAkB,EACrBA,KAEAA,EAAkB,EAClB3wB,EAAE0L,WAgWJ,IAAIonB,EAAY,GAgBhB,IAAIC,GAAU,EACd,SAASC,EACR9wB,EACAiD,EACAmqB,EACA2D,EACAvC,EACAiC,GAEA,IAAIjrB,EA3CL,SAAuBirB,EAAOxtB,EAAM8tB,EAAmBvrB,GACtD,IAAIwrB,EAQJ,OALCA,EAD2B,SAAxBlzB,EAAE0L,OAAO6kB,YAAyBoC,EACnBA,EAAMtT,QAAQla,IAEb,IAGG,EACf8tB,EAAkBC,GACf1G,EAAW9kB,GACd,IAAIA,EAEJ,GA6BSyrB,CAChB7D,EAAOqD,MACPxtB,EACA8tB,EACA/wB,EAAKwF,YAEFvG,EAAMe,GAAQA,EAAKkD,OAASlD,EAAKkD,MAAMjE,IAW3C,MAAqB,YALpBe,EAJuB,IAApByuB,GACFoC,GACAE,GACCA,EAAkB5T,QAAQ3X,IAAe,EACpCxF,EAAKiD,KAAKuC,GAEV,CAACgM,IAAK,gBAGL9M,UACT1E,EAAKkD,MAAQlD,EAAKkD,OAAS,GAC3BlD,EAAKkD,MAAMjE,IAAMA,EA1ClB,SAAqBwxB,EAAOjC,EAAavrB,EAAMuC,GACnB,MAAvBA,EAAWjB,UACbqsB,EAAUzvB,KAAI,SAAU+vB,GAAK,OAAOA,EAAE/J,WACpChK,QAAQ3X,EAAWjB,UAAY,GAClCqsB,EAAUhqB,KAAK,CACdpB,WAAYA,EACZ2hB,QAAS3hB,EAAWjB,WAItBksB,EAAM7pB,KAAK3D,GACXurB,EAAY5nB,KAAKpB,GAgCjB2rB,CAAYV,EAAOjC,EAAavrB,EAAMuC,IAHAxF,EAuBvC,SAASoxB,EACRpxB,EACAotB,EACAuB,EACA7B,EACA5P,EACAmS,EACAO,EACAC,GAEA,IAAIY,EAAQ,GACRjC,EAAc,GAIlB,GAAqB,YAFrBxuB,EA7BD,SAAmBA,EAAMotB,EAAQqD,EAAOjC,GAGvC,IAFA,IAAIuC,EAAoB3D,GAAUA,EAAOoB,YAErB,MAAbxuB,EAAKiD,MACXjD,EAAO8wB,EACN9wB,EACAA,EAAKiD,KAAKqC,WAAatF,EAAKiD,KAC5BmqB,EACA2D,EACAvC,EACAiC,GAGF,OAAOzwB,EAgBAqxB,CAAUrxB,EAAMotB,EAAQqD,EAAOjC,IAE7B9pB,QAAsB,OAAO0oB,EAEtC,IAAKptB,EAAKwR,KAAOgd,EAAY1oB,OAC5B,MAAM,IAAIV,MAAM,gFAIjBpF,EAAKkD,MAAQlD,EAAKkD,OAAS,GAC3BkqB,EAAOlqB,MAAQkqB,EAAOlqB,OAAS,GAE/B,IAAIkrB,EAAehwB,OAAO8S,KAAKlR,EAAKkD,OAChCouB,EAAUlD,EAAatoB,QAAU,QAAS9F,EAAKkD,MAAQ,EAAI,GAI/D,GAFAirB,EAAoBnuB,EAAMotB,EAAQgB,GAE7B5D,EAASxqB,EAAKwR,KAAnB,CAEA,IAIIkL,EAJA6U,EAAgC,IAAxBnE,EAAOtF,MAAMhiB,OAKzB,GAHA8pB,EAjdD,SAA4B5vB,EAAM4vB,GACjC,OAAI5vB,EAAKkD,MAAMsuB,MAAcxxB,EAAKkD,MAAMsuB,MACvB,QAAbxxB,EAAKwR,IAAsB,6BACd,SAAbxR,EAAKwR,IAAuB,qCACzBoe,EA6cK6B,CAAmBzxB,EAAM4vB,GAGjC2B,EAAO,CAGV,IAAIruB,EAtLN,SAAwBlD,EAAM0c,EAAMkT,EAAW0B,GAC9C,OAAIA,EACII,EAAchV,EAAM1c,EAAKwR,IAAKxR,EAAKkD,MAAO,GAAI0sB,GAE9C5vB,EAAKkD,MAkLAyuB,CAAe3xB,EAF3B0c,EAnMF,SAAuB1c,EAAM4vB,GAC5B,OAAI5vB,EAAKkD,MAAM0uB,GACG,MAAbhC,EACIlF,EAAU9d,cAAc5M,EAAKwR,IAAKxR,EAAKkD,MAAM0uB,IAE7ClH,EAAUmH,gBAAgBjC,EAAW5vB,EAAKwR,IAChDxR,EAAKkD,MAAM0uB,IAEU,MAAbhC,EACHlF,EAAU9d,cAAc5M,EAAKwR,KAE7BkZ,EAAUmH,gBAAgBjC,EAAW5vB,EAAKwR,KAwL1CsgB,CAAc9xB,EAAM4vB,GAEYA,EAAW0B,GAGlDzE,EAAWC,EAAepQ,EAAMQ,GAKhCkQ,EAASoD,EACRxwB,EACAkD,EAxLH,SACClD,EACA0c,EACA0Q,EACAuB,EACAiB,EACAC,GAEA,OAAqB,MAAjB7vB,EAAKoD,UAAoBpD,EAAKoD,SAAS0C,OAAS,EAC5CuqB,EACN3T,EACA1c,EAAKwR,IACL/L,EACAA,EACAzF,EAAKoD,SACLgqB,EAAOhqB,UACP,EACA,EACApD,EAAKkD,MAAM6uB,gBAAkBrV,EAAOiS,EACpCiB,EACAC,GAEM7vB,EAAKoD,SA6JG4uB,CAAkBhyB,EAAM0c,EAAM0Q,EAAQuB,EACpDiB,EAAWC,GAMXnT,EACAkT,EACAa,EACAjC,QAED9R,EAtbF,SACC0Q,EACAptB,EACA2uB,EACA2C,EACA1B,EACAa,EACAZ,EACArB,GAEA,IAAI9R,EAAO0Q,EAAOtF,MAAM,GA2BxB,OAzBIwJ,GACHI,EAAchV,EAAM1c,EAAKwR,IAAKxR,EAAKkD,MAAOkqB,EAAOlqB,MAAO0sB,GAGzDxC,EAAOhqB,SAAWitB,EACjB3T,EACA1c,EAAKwR,IACL/L,EACAA,EACAzF,EAAKoD,SACLgqB,EAAOhqB,UACP,EACA,EACApD,EAAKkD,MAAM6uB,gBAAkBrV,EAAOiS,EACpCiB,EACAC,GAGDzC,EAAOtF,MAAMyH,QAAS,EAElBf,EAAY1oB,SACfsnB,EAAOqD,MAAQA,EACfrD,EAAOoB,YAAcA,GAGf9R,EAiZCuV,CACN7E,EACAptB,EACA2uB,EACA2C,EACA1B,EACAa,EACAZ,EACArB,GAiBF,MAZiB,WAAbxuB,EAAKwR,KAAoB,UAAWxR,EAAKkD,OAC5CwuB,EAAchV,EAAM1c,EAAKwR,IAAK,CAAC7S,MAAOqB,EAAKkD,MAAMvE,OAAQ,GACxDixB,GAGG2B,IAA4B,IAAnBlC,GAAmC,MAAR3S,GACxCmQ,EAAWC,EAAepQ,EAAMQ,GAvdlC,SAAmC2S,EAAS7vB,EAAM0c,EAAM6U,EAAOnE,GAG9D,GAAI9C,EAAWtqB,EAAKkD,MAAM0B,QAAS,CAClC,IAAI2W,EAAU6R,EAAOkB,cAAgBlB,EAAOkB,eAAiB,GAG7DuB,EAAQjpB,MAAK,WACZ,OAAO5G,EAAKkD,MAAM0B,OAAO/G,KAAKmC,EAAM0c,GAAO6U,EAAOhW,EACjD6R,OAkdH8E,CAA0BrC,EAAS7vB,EAAM0c,EAAM6U,EAAOnE,GAE/CA,GAGR,SAASiD,EACRvD,EACA8B,EACAuD,EACAC,EACApyB,EACAotB,EACAiC,EACAnS,EACAyR,EACAiB,EACAC,GAuDA,MAAqB,YADrB7vB,EA9wBD,SAAsBA,GAIrB,IACC,GAAoB,kBAATA,GACD,MAARA,GACmB,MAAnBA,EAAK8f,WAAoB,OAAO9f,EACjC,MAAO4R,IAGT,MAAO,GAmwBAygB,CAAaryB,IACX0E,QAA6B0oB,GACtCA,EA5UD,SAAmBptB,EAAMotB,EAAQlQ,EAAOkV,EAAaD,GACpD,GAAc,MAAV/E,EAAgB,CACnB,GAAIrsB,EAAKlD,KAAKuvB,KAAYrsB,EAAKlD,KAAKmC,GAAO,OAAOotB,EAElD,GAAI+E,GAAeA,EAAYrK,MAAO,CACrC,IAAI/c,EAASmS,EAAQkV,EACjBnkB,EAAMlD,GAAU0R,EAAQzc,GAAQA,EAAOotB,EAAOtF,OAAOhiB,OACzDsX,EACC+U,EAAYrK,MAAM/iB,MAAMgG,EAAQkD,GAChCkkB,EAAYptB,MAAMgG,EAAQkD,SACjBmf,EAAOtF,OACjB1K,EAAMgQ,EAAOtF,MAAOsF,GAStB,OALAA,EAAS,IAAIptB,EAAKH,aAGP2R,MAAK4b,EAAS,IACzBA,EAAOtF,MAAQ,GACRsF,EAwTEkF,CAAUtyB,EAAMotB,EAAQlQ,EAAOkV,EAAaD,GAEjD1V,EAAQzc,GACJ2vB,EACN3vB,EACAotB,EACAN,EACA5P,EACA0R,EACAS,EACAV,EACAiB,EACAC,GACiB,MAAR7vB,GAAgBuqB,EAASvqB,GAC5BoxB,EACNpxB,EACAotB,EACAuB,EACA7B,EACA5P,EACAmS,EACAO,EACAC,GACUvF,EAAWtqB,GAUfotB,EATAgC,EACNhC,EACAptB,EACAkd,EACA4P,EACAuC,EACAV,EACAC,IAMH,SAAShB,EAAY9mB,EAAGC,GACvB,OAAOD,EAAE0mB,OAASzmB,EAAEymB,QAAU1mB,EAAEoW,MAAQnW,EAAEmW,MAuB3C,IAsPI9J,EAtPAmf,EAAwB,CAC3B5F,KAAM,EACNvd,MAAO,EACPojB,KAAM,EACNzxB,KAAM,EACNsK,MAAO,EACPJ,OAAQ,GAGT,SAASwnB,EACR/V,EACA8P,EACAkG,EACAC,EACAnhB,EACAoe,GAEA,GAAiB,WAAbpD,GAAsC,QAAbA,EAE5B,OAAO,EACD,GAAIlC,EAAWoI,IAAsC,OAAzBlG,EAASznB,MAAM,EAAG,GAEpD2X,EAAK8P,IAmNa1X,EAnNU4d,EAmNAtzB,EAnNUsd,EAoNhC,SAAU9K,GAChBA,EAAIA,GAAKkV,MACThpB,EAAE0L,OAAO6kB,SAAS,QAClBvwB,EAAE8e,mBACF,IACC,OAAO9H,EAASjX,KAAKuB,EAAQwS,GAC5B,QACDghB,aA1NK,GAAiB,UAAbpG,GAAoC,MAAZkG,GACjCnI,EAASmI,IA5CZ,SAAwBhW,EAAMgW,EAAUC,GAKvC,IAAK,IAAI9T,KAJL8T,IAAeD,IAClBhW,EAAKtN,MAAQ,GACbujB,EAAa,IAEGD,EACZrI,EAAOxsB,KAAK60B,EAAU7T,KACP,MAAd8T,GAAsBA,EAAW9T,KAAU6T,EAAS7T,KACvDnC,EAAKtN,MAAMyP,GAAQ6T,EAAS7T,KAK/B,IAAKA,KAAQ8T,EACRtI,EAAOxsB,KAAK80B,EAAY9T,KACtBwL,EAAOxsB,KAAK60B,EAAU7T,KAAOnC,EAAKtN,MAAMyP,GAAQ,KA+BtDgU,CAAenW,EAAMgW,EAAUC,QACzB,GAAiB,MAAb/C,EAEO,SAAbpD,EACH9P,EAAKoW,eAAe,+BACnB,OAAQJ,GAEThW,EAAK7P,aACS,cAAb2f,EAA2B,QAAUA,EACrCkG,QAEI,GAAIlG,KAAY9P,IAAS6V,EAAsB/F,GAarD,KAEU,UAARhb,IAAoBkL,EAAKqW,mBACzBrW,EAAK8P,IAAakG,KAElBhW,EAAK8P,GAAYkG,GAEjB,MAAO9gB,GACR8K,EAAK7P,aAAa2f,EAAUkG,QAG7B,IACChW,EAAK7P,aAAa2f,EAAUkG,GAC3B,MAAO9gB,IA0KX,IAAoBkD,EAAU1V,EAlK9B,SAAS4zB,EACRtW,EACA8P,EACAkG,EACAC,EACAM,EACAzhB,EACAoe,GAEA,GAAMpD,KAAYyG,GACfN,IAAeD,GACI,iBAAbA,GACNhI,EAAU1D,gBAAkBtK,EAeP,UAAb8P,GAAgC,UAARhb,GAE7BkL,EAAK/d,OAAS+zB,IAInBhW,EAAK/d,MAAQ+zB,OArBwB,CACrCO,EAAYzG,GAAYkG,EACxB,IACC,OAAOD,EACN/V,EACA8P,EACAkG,EACAC,EACAnhB,EACAoe,GACA,MAAOhe,GAGR,GAAIA,EAAEshB,QAAQ/V,QAAQ,oBAAsB,EAAG,MAAMvL,IAYxD,SAAS8f,EAAchV,EAAMlL,EAAK2hB,EAAWF,EAAarD,GACzD,IAAK,IAAIpD,KAAY2G,GAChB9I,EAAOxsB,KAAKs1B,EAAW3G,IACtBwG,EACFtW,EACA8P,EACA2G,EAAU3G,GACVyG,EAAYzG,GACZyG,EACAzhB,EACAoe,GAKJ,OAAOqD,EAGR,SAAS7V,EAAM0K,EAAOsF,GACrB,IAAK,IAAI1vB,EAAIoqB,EAAMhiB,OAAS,EAAGpI,GAAK,EAAGA,IACtC,GAAIoqB,EAAMpqB,IAAMoqB,EAAMpqB,GAAGuR,WAAY,CACpC,IACC6Y,EAAMpqB,GAAGuR,WAAWC,YAAY4Y,EAAMpqB,IACrC,MAAOkU,KAMTwb,EAAS,GAAGxc,OAAOwc,IACR1vB,IAAI01B,EAAOhG,EAAO1vB,IAK3BoqB,EAAMhiB,SACTgiB,EAAMhiB,OAAS,GAIjB,SAASstB,EAAOhG,GACXA,EAAOkB,eAAiBhE,EAAW8C,EAAOkB,cAAc/pB,YAC3D6oB,EAAOkB,cAAc/pB,WACrB6oB,EAAOkB,cAAc/pB,SAAW,MAE7B6oB,EAAOoB,aACVjnB,EAAQ6lB,EAAOoB,aAAa,SAAUhpB,GACjC8kB,EAAW9kB,EAAWjB,WACzBiB,EAAWjB,SAAS,CAACwX,eAAgB0O,OAIpC2C,EAAOhqB,WACNqZ,EAAQ2Q,EAAOhqB,UAAWmE,EAAQ6lB,EAAOhqB,SAAUgwB,GAC9ChG,EAAOhqB,SAASoO,KAAK4hB,EAAOhG,EAAOhqB,WAI9C,SAASiwB,EAAmBvG,EAAe9sB,GAC1C,IACC8sB,EAAcne,YACb+b,EAAU4I,cAAcC,yBAAyBvzB,IACjD,MAAO4R,GACRkb,EAAc0G,mBAAmB,YAAaxzB,GAQhD,SAASyzB,EAAmB/W,GAC3B,GAAqB,WAAjBA,EAAKgX,QACRhX,EAAKzN,WAAW0kB,aAclB,SAA6BjX,GAI5B,IAHA,IAAIkX,EAAWjnB,SAASC,cAAc,UAClC1J,EAAQwZ,EAAKlc,WAER9C,EAAI,EAAGA,EAAIwF,EAAM4C,OAAQpI,IACjCk2B,EAAS/mB,aAAa3J,EAAMxF,GAAGO,KAAMiF,EAAMxF,GAAGiB,OAI/C,OADAi1B,EAASrgB,KAAOmJ,EAAKqS,UACd6E,EAvBuBC,CAAoBnX,GAAOA,OAClD,CACN,IAAItZ,EAAWsZ,EAAKqQ,WACpB,GAAI3pB,GAAYA,EAAS0C,OACxB,IAAK,IAAIpI,EAAI,EAAGA,EAAI0F,EAAS0C,OAAQpI,IACpC+1B,EAAmBrwB,EAAS1F,IAK/B,OAAOgf,EAnBN+W,CAAmB3G,IAmCrB,SAASgC,EAAWhC,EAAe5P,EAAOld,GACzC,IAAI8zB,EAAchH,EAAcC,WAAW7P,GAC3C,GAAI4W,EAAa,CAChB,IAAIC,EAAqC,IAAzBD,EAAY9E,SACxBgF,EAActJ,EAAU9d,cAAc,QACtCmnB,GACHjH,EAAc/f,aAAainB,EAAaF,GAAe,MACvDE,EAAYR,mBAAmB,cAAexzB,GAC9C8sB,EAAc5d,YAAY8kB,IAE1BF,EAAYN,mBAAmB,cAAexzB,QAG/CqzB,EAAmBvG,EAAe9sB,GAKnC,IAFA,IAAI8nB,EAAQ,GAELgF,EAAcC,WAAW7P,KAAW4W,GAC1ChM,EAAMlhB,KAAKkmB,EAAcC,WAAW7P,IACpCA,IAGD,OAAO4K,EAiBR,IAAImM,EAAe,CAClBtlB,YAAa,SAAU+N,GAClBtJ,IAAS3N,IAAW2N,EAAOsX,EAAU9d,cAAc,SACnD8d,EAAUwJ,iBACZxJ,EAAUwJ,kBAAoBxX,EAC/BgO,EAAUiJ,aAAajX,EAAMgO,EAAUwJ,iBAEvCxJ,EAAU/b,YAAY+N,GAGvBxc,KAAK6sB,WAAarC,EAAUqC,YAG7BhgB,aAAc,SAAU2P,GACvBxc,KAAKyO,YAAY+N,IAGlBqQ,WAAY,IAGToH,EAAY,GACZC,EAAY,GAyChB,SAASC,EAAgBjwB,GACxB,IAAI8Y,EAAQiX,EAAUhX,QAAQ/Y,GAC9B,OAAO8Y,EAAQ,EAAIiX,EAAUvtB,KAAKxC,GAAW,EAAI8Y,EAzClDpf,EAAE0G,OAAS,SAAU8vB,EAAMtI,EAAMuI,GAChC,IAAKD,EACJ,MAAM,IAAIlvB,MAAM,qFAGjB,IAGIsX,EAHAmT,EAAU,GACVvvB,EAAK+zB,EAAgBC,GACrBE,EAAiBF,IAAS5J,EAI7BhO,EADG8X,GAAkBF,IAAS5J,EAAUwJ,gBACjCD,EAEAK,EAGJE,GAA+B,SAAbxI,EAAKxa,MAC1Bwa,EAAO,CAACxa,IAAK,OAAQtO,MAAO,GAAIE,SAAU4oB,IAGvCoI,EAAU9zB,KAAQmF,GAAW2X,EAAMV,EAAKqQ,aACpB,IAApBwH,GAA0BE,GAAMH,GAEpCF,EAAU9zB,GAAM+vB,EACf3T,EACA,KACAjX,EACAA,EACAumB,EACAoI,EAAU9zB,IACV,EACA,EACA,KACAmF,EACAoqB,GAEDtoB,EAAQsoB,GAAS,SAAUjrB,GAAUA,QAQtC9G,EAAEgS,MAAQ,SAAUnR,GAGnB,OAFAA,EAAQ,IAAI+1B,OAAO/1B,IACbkwB,UAAW,EACVlwB,GAiBRb,EAAEqR,KAAO,SAAUlP,GAClB,OAAc,MAATA,IAAkBsqB,EAAStqB,IAAUqqB,EAAWrqB,KAC7B,oBAAZ00B,SACP10B,aAAiB00B,UACpBrK,EAAWrqB,EAAM4B,MACX+yB,GAAQ30B,GAnBjB,SAAsBA,GACrB,SAASkP,IAER,OADItJ,UAAUC,SAAQ7F,EAAQ4F,UAAU,IACjC5F,EAQR,OALAkP,EAAK0lB,OAAS,WACb,OAAI50B,GAASqqB,EAAWrqB,EAAM40B,QAAgB50B,EAAM40B,SAC7C50B,GAGDkP,EAWA2lB,CAAa70B,IAGrB,IAOI80B,EAuCAC,EAAcC,EA9CdC,EAAQ,GACRlY,EAAa,GACbwR,GAAc,GACd2G,GAAe,KACfC,GAAqB,EACrBC,GAAuB,KACvBC,GAAwB,KAI5B,SAAS5I,GAAa1oB,EAAWa,GAChC,SAASW,IAER,OAAQxB,EAAUwB,YAAcilB,GAAM3lB,MAAM5E,KAAM2E,IAAS3E,KAQ5D,SAAS+C,EAAKsyB,GAEb,IADA,IAAIC,EAAc,CAACD,GAAM3kB,OAAO/L,GACvBnH,EAAI,EAAGA,EAAImI,UAAUC,OAAQpI,IACrC83B,EAAY5uB,KAAKf,UAAUnI,IAG5B,OAAOsG,EAAUf,KAAK6B,MAAMd,EAAWwxB,GAVpCxxB,EAAUwB,aACbA,EAAWlG,UAAY0E,EAAUwB,WAAWlG,WAY7C2D,EAAKqC,UAAYtB,EAAUf,KAC3B,IAAIsC,EAAS,CAACC,WAAYA,EAAYvC,KAAMA,GAE5C,OADI4B,EAAK,IAAqB,MAAfA,EAAK,GAAG5F,MAAasG,EAAOrC,MAAQ,CAACjE,IAAK4F,EAAK,GAAG5F,MAC1DsG,EA2FR,SAASkwB,GAAkBnB,EAAMpX,GAChCgY,EAAMtb,OAAOsD,EAAO,GACpBsR,GAAY5U,OAAOsD,EAAO,GAC1BF,EAAWpD,OAAOsD,EAAO,GACzBuX,GAAMH,GACNH,EAAUva,OAAOya,EAAgBC,GAAO,GACxC1D,EAAY,GA9Fb9yB,EAAEkG,UAAY,SAAUA,GAGvB,IAFA,IAAIa,EAAO,IAAI3D,MAAM2E,UAAUC,OAAS,GAE/BpI,EAAI,EAAGA,EAAImI,UAAUC,OAAQpI,IACrCmH,EAAKnH,EAAI,GAAKmI,UAAUnI,GAGzB,OAAOgvB,GAAa1oB,EAAWa,IA4ChC/G,EAAEgmB,MAAQhmB,EAAEL,OAAS,SAAU62B,EAAMtwB,GACpC,IAAKswB,EACJ,MAAM,IAAIlvB,MAAM,qFAIjB,IAAI8X,EAAQgY,EAAM/X,QAAQmX,GACtBpX,EAAQ,IAAGA,EAAQgY,EAAMpvB,QAE7B,IAAI4vB,GAAc,EACd5O,EAAQ,CACX/K,eAAgB,WACf2Z,GAAc,EACdL,GAAuBC,GAAwB,OAqBjD,OAjBA/tB,EAAQqpB,GAAW,SAAU+E,GAC5BA,EAASxO,QAAQtpB,KAAK83B,EAASnwB,WAAYshB,GAC3C6O,EAASnwB,WAAWjB,SAAW,QAG5BmxB,EACHnuB,EAAQqpB,GAAW,SAAU+E,GAC5BA,EAASnwB,WAAWjB,SAAWoxB,EAASxO,WAGzCyJ,EAAY,GAGTpC,GAAYtR,IAAUoN,EAAWkE,GAAYtR,GAAO3Y,WACvDiqB,GAAYtR,GAAO3Y,SAASuiB,GAtE9B,SAAwB9iB,EAAWswB,EAAMpX,EAAOwY,GAC/C,IAAKA,EAAa,CAIjB,IAAIE,EAHJ93B,EAAE0L,OAAO6kB,SAAS,OAClBvwB,EAAE8e,mBACFsY,EAAMhY,GAASoX,EAIdsB,EAAmBb,EADhB/wB,IAG+BA,EAAY,CAACwB,WAAYilB,IAG5D,IAAIjlB,EAAa,IAAKxB,EAAUwB,YAAcilB,GAc9C,OARImL,IAAqBb,IACxBvG,GAAYtR,GAAS1X,EACrBwX,EAAWE,GAASlZ,GAErB4uB,KACkB,OAAd5uB,GACHyxB,GAAkBnB,EAAMpX,GAElBsR,GAAYtR,GAEF,MAAblZ,GACHyxB,GAAkBnB,EAAMpX,GAGrB+X,IACHD,EAAeC,GAuCVY,CAAe7xB,EAAWswB,EAAMpX,EAAOwY,IAY/C,IAAII,IAAY,EAiChB,SAAStsB,KACJ6rB,KACHA,KACAA,GAAuB,MAExB9tB,EAAQ2tB,GAAO,SAAUZ,EAAM52B,GAC9B,IAAIsG,EAAYgZ,EAAWtf,GAC3B,GAAI8wB,GAAY9wB,GAAI,CACnB,IAAImH,EAAO,CAAC2pB,GAAY9wB,IACxBI,EAAE0G,OAAO8vB,EACRtwB,EAAUf,KAAOe,EAAUf,KAAKurB,GAAY9wB,GAAImH,GAAQ,QAKvDywB,KACHA,KACAA,GAAwB,MAEzBH,GAAe,KACfC,GAAqB,IAAIh1B,KACzBtC,EAAE0L,OAAO6kB,SAAS,QAGnB,SAASuE,KACoB,SAAxB90B,EAAE0L,OAAO6kB,YACZI,IACA3wB,EAAE0L,OAAO6kB,SAAS,SAElBvwB,EAAE+e,iBA7DJ/e,EAAE0L,OAAS,SAAUusB,GACpB,IAAID,GAAJ,CACAA,IAAY,EACRC,IAAOlF,GAAU,GAErB,IAKKsE,KAAiBY,GAKhBnL,IAA2BrO,EAAO1N,uBACpC,IAAIzO,KAASg1B,GA9IC,MA+IXD,GAAe,GAAGtK,EAAsBsK,IAC5CA,GAAevK,EAAuBphB,GAhJvB,MAmJhBA,KACA2rB,GAAevK,GAAuB,WACrCuK,GAAe,OArJA,KAwJhB,QACDW,GAAYjF,GAAU,KAIxB/yB,EAAE0L,OAAO6kB,SAAWvwB,EAAEqR,OAkCtBrR,EAAE2c,SAAW,SAAUtL,EAAM6mB,EAAkBC,GAC9C,OAAO,SAAUrkB,GAGhB,IAAIskB,GAFJtkB,EAAIA,GAAK1G,OAAO4b,OAEMoP,eAAiBh2B,KACnCi2B,EAAQF,GAAgB/1B,KAExB0F,EAASuJ,KAAQ+mB,EACpBA,EAAc/mB,GACd+mB,EAAcE,aAAajnB,GAC5B6mB,EAAiBn4B,KAAKs4B,EAAOvwB,KAK/B,IAGIywB,GAHAC,GAAQ,CAACC,SAAU,GAAIC,KAAM,IAAKhiB,OAAQ,KAC1CiiB,GAAWhM,EACXiM,IAAiB,EAoIrB,SAASC,GAAeplB,GACvB,OAAOA,EAAMxM,MAAMuxB,GAAMx4B,EAAEyT,MAAM1S,MAAMiH,QAGxC,SAAS8wB,GAAatC,EAAMuC,EAAQtV,GACnC8U,GAAc,GAEd,IAAIS,EAAavV,EAAKpE,QAAQ,MACV,IAAhB2Z,IACHT,GAAcU,GACbxV,EAAK7N,OAAOojB,EAAa,EAAGvV,EAAKzb,SAClCyb,EAAOA,EAAK7N,OAAO,EAAGojB,IAKvB,IAAI5lB,EAAO9S,OAAO8S,KAAK2lB,GACnB3Z,EAAQhM,EAAKiM,QAAQoE,GAEzB,IAAe,IAAXrE,EAEH,OADApf,EAAEgmB,MAAMwQ,EAAMuC,EAAO3lB,EAAMgM,MACpB,EAGR,IAAK,IAAI3L,KAASslB,EACjB,GAAIxM,EAAOxsB,KAAKg5B,EAAQtlB,GAAQ,CAC/B,GAAIA,IAAUgQ,EAEb,OADAzjB,EAAEgmB,MAAMwQ,EAAMuC,EAAOtlB,KACd,EAGR,IAAIylB,EAAU,IAAI3iB,OAAO,IAAM9C,EAC7B/K,QAAQ,iBAAkB,SAC1BA,QAAQ,WAAY,aAAe,OAErC,GAAIwwB,EAAQpY,KAAK2C,GAYhB,OAVAA,EAAK/a,QAAQwwB,GAAS,WACrB,IAAI9lB,EAAOK,EAAM5D,MAAM,aAAe,GAClC0U,EAAS,GAAGtd,MAAMlH,KAAKgI,UAAW,GAAI,GAC1C0B,EAAQ2J,GAAM,SAAUjS,EAAKvB,GAC5B24B,GAAYp3B,EAAIuH,QAAQ,QAAS,KAChCywB,mBAAmB5U,EAAO3kB,OAE5BI,EAAEgmB,MAAMwQ,EAAMuC,EAAOtlB,QAGf,GAMX,SAAS2lB,GAAiBtlB,GAEzB,MADAA,EAAIA,GAAKkV,OACHlL,SAAWhK,EAAEiK,SAAWjK,EAAE+J,UAAwB,IAAZ/J,EAAEkK,OAA9C,CAEIlK,EAAEmK,eACLnK,EAAEmK,iBAEFnK,EAAEulB,aAAc,EAGjB,IACItyB,EADAqxB,EAAgBtkB,EAAEskB,eAAiBtkB,EAAEwlB,WASzC,IALCvyB,EADoB,aAAjB/G,EAAEyT,MAAM1S,MAAuBq3B,EAAc1hB,OACzCuiB,GAAiBb,EAAc1hB,OAAOzP,MAAM,IAE5C,GAGDmxB,IAAkB,KAAKtX,KAAKsX,EAAc1G,WAChD0G,EAAgBA,EAAcjnB,WAI/Bwf,EAAkB,EAClB3wB,EAAEyT,MAAM2kB,EAAcp4B,EAAEyT,MAAM1S,MAC5BkG,MAAMuxB,GAAMx4B,EAAEyT,MAAM1S,MAAMiH,QAASjB,IAGtC,SAASwyB,KACa,SAAjBv5B,EAAEyT,MAAM1S,MAAmB8rB,EAAU6L,KACxC7L,EAAU6L,KAAO7L,EAAU6L,KAE3Bja,EAAO+a,SAAS,EAAG,GAIrB,SAAS1R,GAAiBxmB,EAAQ4O,GACjC,IAAIupB,EAAa,GACbC,EAAM,GAEV,IAAK,IAAIroB,KAAQ/P,EAChB,GAAIirB,EAAOxsB,KAAKuB,EAAQ+P,GAAO,CAC9B,IAAIlQ,EAAM+O,EAASA,EAAS,IAAMmB,EAAO,IAAMA,EAC3CxQ,EAAQS,EAAO+P,GAEnB,GAAc,OAAVxQ,EACH64B,EAAI5wB,KAAK6wB,mBAAmBx4B,SACtB,GAAIsrB,EAAS5rB,GACnB64B,EAAI5wB,KAAKgf,GAAiBjnB,EAAOM,SAC3B,GAAIwd,EAAQ9d,GAAQ,CAC1B,IAAIuS,EAAO,GACXqmB,EAAWt4B,GAAOs4B,EAAWt4B,IAAQ,GAErCsI,EAAQ5I,GAAO,SAAUqI,GAEnBuwB,EAAWt4B,GAAK+H,KACpBuwB,EAAWt4B,GAAK+H,IAAQ,EACxBkK,EAAKtK,KAAK6wB,mBAAmBx4B,GAAO,IACnCw4B,mBAAmBzwB,QAGtBwwB,EAAI5wB,KAAKsK,EAAKhJ,KAAK,WACTvJ,IAAU8G,GACpB+xB,EAAI5wB,KAAK6wB,mBAAmBx4B,GAAO,IAClCw4B,mBAAmB94B,IAKvB,OAAO64B,EAAItvB,KAAK,KAGjB,SAAS6uB,GAAiBS,GACzB,GAAY,KAARA,GAAqB,MAAPA,EAAa,MAAO,GAChB,MAAlBA,EAAIlnB,OAAO,KAAYknB,EAAMA,EAAIzyB,MAAM,IAE3C,IAAI0nB,EAAQ+K,EAAI/pB,MAAM,KAClBiY,EAAS,GAYb,OAVAne,EAAQklB,GAAO,SAAU3Z,GACxB,IAAI4kB,EAAO5kB,EAAOrF,MAAM,KACpBxO,EAAMg4B,mBAAmBS,EAAK,IAC9B/4B,EAAwB,IAAhB+4B,EAAK5xB,OAAemxB,mBAAmBS,EAAK,IAAM,KAC3C,MAAfhS,EAAOzmB,IACLwd,EAAQiJ,EAAOzmB,MAAOymB,EAAOzmB,GAAO,CAACymB,EAAOzmB,KACjDymB,EAAOzmB,GAAK2H,KAAKjI,IACX+mB,EAAOzmB,GAAON,KAGf+mB,EAMR,SAAS+O,GAAMH,GACd,IAAIqD,EAAWtD,EAAgBC,GAC/BlX,EAAMkX,EAAKvH,WAAYqH,EAAUuD,IACjCvD,EAAUuD,GAAYlyB,EASvB,SAASmvB,GAAQtyB,EAASs1B,GACzB,IAAIzoB,EAAOrR,EAAEqR,KAAKyoB,GAOlB,OANAt1B,EAAQT,KAAKsN,GACbA,EAAKtN,KAAO,SAAUQ,EAASojB,GAC9B,OAAOmP,GAAQtyB,EAAQT,KAAKQ,EAASojB,GAASmS,IAG/CzoB,EAAY,MAAIA,EAAKtN,KAAK3C,KAAK,KAAM,MAC9BiQ,EA1SRrR,EAAEyT,MAAQ,SAAU+iB,EAAMuD,EAAMC,EAAMrzB,GAErC,GAAyB,IAArBoB,UAAUC,OAAc,OAAOkvB,EAEnC,GAAyB,IAArBnvB,UAAUC,QAAgB0kB,EAASqN,GAAO,CAC7CpB,GAAW,SAAU1wB,GACpB,IAAIwb,EAAOyT,EAAe2B,GAAe5wB,GACzC,IAAK6wB,GAAatC,EAAMwD,EAAMvW,GAAO,CACpC,GAAImV,GACH,MAAM,IAAItxB,MAAM,yEAIjBsxB,IAAiB,EACjB54B,EAAEyT,MAAMsmB,GAAM,GACdnB,IAAiB,IAInB,IAAIqB,EAA4B,SAAjBj6B,EAAEyT,MAAM1S,KACtB,eACA,aAWD,OATA0d,EAAOwb,GAAY,WAClB,IAAIxW,EAAOoJ,EAAU7sB,EAAEyT,MAAM1S,MACR,aAAjBf,EAAEyT,MAAM1S,OAAqB0iB,GAAQoJ,EAAUnW,QAC/CwgB,IAAiB2B,GAAepV,IAAOkV,GAASlV,IAGrD8T,GAAuBgC,QACvB9a,EAAOwb,KAMR,GAAIzD,EAAK9pB,kBAAoB8pB,EAAK0D,YAAa,CAC9C,IAAIC,EAAwB,aAAjBn6B,EAAEyT,MAAM1S,KAAsB8rB,EAAU4L,SAAW,GAU9D,OATAjC,EAAK7iB,KAAOwmB,EAAO3B,GAAMx4B,EAAEyT,MAAM1S,MAAQ4F,EAAKvB,MAAMuO,UAChD6iB,EAAK9pB,kBACR8pB,EAAKjf,oBAAoB,QAAS6hB,IAClC5C,EAAK9pB,iBAAiB,QAAS0sB,MAE/B5C,EAAK4D,YAAY,UAAWhB,IAC5B5C,EAAK0D,YAAY,UAAWd,MAM9B,GAAI1M,EAAS8J,GAAO,CACnBW,EAAgBD,EAGhB,IAEItP,EAFA7gB,EAAOgzB,GAAQ,GACfM,GAHJnD,EAAeV,GAGenX,QAAQ,KAStC,IAAK,IAAIzf,KALRgoB,EADGyS,GAAc,EACRpB,GAAiB/B,EAAajwB,MAAMozB,EAAa,IAEjD,GAGItzB,EACTwlB,EAAOxsB,KAAKgH,EAAMnH,KACrBgoB,EAAOhoB,GAAKmH,EAAKnH,IAInB,IACI06B,EADAC,EAAczS,GAAiBF,GAIlC0S,EADGD,GAAc,EACHnD,EAAajwB,MAAM,EAAGozB,GAEtBnD,EAGXqD,IACHrD,EAAeoD,IACiB,IAA9BA,EAAYjb,QAAQ,KAAc,IAAM,KACzCkb,GAGF,IAAIC,GACwC,KAArB,IAArBzyB,UAAUC,OAAegyB,EAAOD,IACjC5C,IAAkBD,EAEnB,GAAIzY,EAAOzB,QAAQyd,UAAW,CAC7B,IAAI92B,EAAS62B,EAAiB,eAAiB,YAC/CjD,GAAuBgC,GACvB/B,GAAwB,WACvB,IACC/Y,EAAOzB,QAAQrZ,GAAQ,KAAMipB,EAAUpnB,MACtCgzB,GAAMx4B,EAAEyT,MAAM1S,MAAQm2B,GACtB,MAAOwD,GAKR7N,EAAU7sB,EAAEyT,MAAM1S,MAAQm2B,IAG5ByB,GAASH,GAAMx4B,EAAEyT,MAAM1S,MAAQm2B,QAE/BrK,EAAU7sB,EAAEyT,MAAM1S,MAAQm2B,EAC1ByB,GAASH,GAAMx4B,EAAEyT,MAAM1S,MAAQm2B,GAGhCC,EAAgB,OAIlBn3B,EAAEyT,MAAMknB,MAAQ,SAAUx5B,GACzB,IAAKo3B,GACJ,MAAM,IAAIjxB,MAAM,uFAIjB,OAAKnG,EAIEo3B,GAAYp3B,GAHXo3B,IAMTv4B,EAAEyT,MAAM1S,KAAO,SAoJff,EAAEyT,MAAMqU,iBAAmBA,GAC3B9nB,EAAEyT,MAAMwlB,iBAAmBA,GAQ3Bj5B,EAAEsE,SAAW,WACZ,IAAIA,EAAW,IAAIs2B,GAEnB,OADAt2B,EAASE,QAAUsyB,GAAQxyB,EAASE,SAC7BF,GA8BR,SAASs2B,GAASC,EAAWC,GAC5B,IAAIjjB,EAAOzV,KACPoa,EAAQ,EACRue,EAAe,EACfC,EAAO,GAwCX,SAASC,EAAOh4B,GACfuZ,EAAQvZ,GA/CK,EAgDb+3B,EAAK33B,KAAI,SAAUiB,GAjDN,IAkDRkY,EACHlY,EAASC,QAAQw2B,GAEjBz2B,EAASqjB,OAAOoT,MAKnB,SAASG,EAAUn3B,EAAMo3B,EAASC,EAASC,GAC1C,IAAsB,MAAhBN,GAAwBtO,EAASsO,IACrCvO,EAAWuO,KAAkBvO,EAAWzoB,GACzC,IAEC,IAAIgjB,EAAQ,EACZhjB,EAAKhE,KAAKg7B,GAAc,SAAUl6B,GAC7BkmB,MACJgU,EAAel6B,EACfs6B,QACE,SAAUt6B,GACRkmB,MACJgU,EAAel6B,EACfu6B,QAEA,MAAOtnB,GACR9T,EAAEsE,SAASqH,QAAQmI,GACnBinB,EAAejnB,EACfsnB,SAGDC,IAIF,SAASC,IAER,IAAIv3B,EACJ,IACCA,EAAOg3B,GAAgBA,EAAah3B,KACnC,MAAO+P,GAIR,OAHA9T,EAAEsE,SAASqH,QAAQmI,GACnBinB,EAAejnB,EACf0I,EA5Fa,EA6FN8e,IA7FM,IAgGV9e,GACHxc,EAAEsE,SAASqH,QAAQovB,GAGpBG,EAAUn3B,GAAM,WACfyY,EAtGa,EAuGb8e,OACE,WACF9e,EAxGa,EAyGb8e,OACE,WACF,IA5Ga,IA6GR9e,GAAuBgQ,EAAWqO,GACrCE,EAAeF,EAAUE,GA7Gd,IA8GDve,GAAuBgQ,EAAWsO,KAC5CC,EAAeD,EAAUC,GACzBve,EAjHW,GAmHX,MAAO1I,GAGR,OAFA9T,EAAEsE,SAASqH,QAAQmI,GACnBinB,EAAejnB,EACRmnB,IAGJF,IAAiBljB,GACpBkjB,EAAeQ,YACfN,KAEAC,EAAUn3B,GAAM,WACfk3B,EA5HU,KA6HRA,GAAQ,WACVA,EAhIW,IAgIJze,GA9HG,SASd3E,EAAKrT,QAAU,GAEfqT,EAAKtT,QAAU,SAAU1D,GAQxB,OAPK2b,IACJue,EAAel6B,EACf2b,EAhBa,EAkBb8e,KAGMzjB,GAGRA,EAAK8P,OAAS,SAAU9mB,GAQvB,OAPK2b,IACJue,EAAel6B,EACf2b,EA1Ba,EA4Bb8e,KAGMzjB,GAGRA,EAAKrT,QAAQT,KAAO,SAAU82B,EAAWC,GACxC,IAAIx2B,EAAW,IAAIs2B,GAASC,EAAWC,GAUvC,OA5Ca,IAoCTte,EACHlY,EAASC,QAAQw2B,GApCL,IAqCFve,EACVlY,EAASqjB,OAAOoT,GAEhBC,EAAKlyB,KAAKxE,GAGJA,EAASE,SA8HlB,SAASg3B,GAAS36B,GAAS,OAAOA,EAsMlC,OA3OAb,EAAEsE,SAASqH,QAAU,SAAUmI,GAC9B,GAAqB,mBAAjB7Q,EAAKlD,KAAK+T,KACX,SAASgN,KAAKhN,EAAE/R,YAAYigB,YAE9B,MADA2O,EAAkB,EACZ7c,GAIR9T,EAAEy7B,KAAO,SAAU10B,GAClB,IAAIzC,EAAWtE,EAAEsE,WACbo3B,EAAc30B,EAAKiB,OACnB2e,EAAU,GACVhjB,EAAS,UAEb,SAASg4B,EAAaC,EAAKC,GAC1B,OAAO,SAAUh7B,GAOhB,OANA8lB,EAAQiV,GAAO/6B,EACVg7B,IAAUl4B,EAAS,UACF,KAAhB+3B,IACLp3B,EAASE,QAAQmiB,GACjBriB,EAASX,GAAQgjB,IAEX9lB,GAYT,OARIkG,EAAKiB,OAAS,EACjByB,EAAQ1C,GAAM,SAAU+0B,EAAKl8B,GAC5Bk8B,EAAI/3B,KAAK43B,EAAa/7B,GAAG,GAAO+7B,EAAa/7B,GAAG,OAGjD0E,EAASC,QAAQ,IAGXD,EAASE,SAqIjBxE,EAAEwD,QAAU,SAAUR,IACM,IAAvBA,EAAQuN,YAAqBvQ,EAAE8e,mBACnC,IAIIid,EAAW5U,EAAazhB,EAJxBpB,EAAW,IAAIs2B,GA+DnB,OA9Dc53B,EAAQg5B,UACc,UAAnCh5B,EAAQg5B,SAAS5mB,eAKjB2mB,EAAY/4B,EAAQ+4B,UACpB5U,EAAcnkB,EAAQmkB,YAAcqU,GAEpC91B,EAAU,SAAUu2B,GAAS,OAAOA,EAAMpf,gBAE1Ckf,EAAY/4B,EAAQ+4B,UAAY/4B,EAAQ+4B,WAAat3B,KAAKE,UAE1DwiB,EAAcnkB,EAAQmkB,YACrBnkB,EAAQmkB,aAAe1iB,KAAKC,MAC7BgB,EAAU1C,EAAQ0C,SAAW,SAAUoX,GACtC,OAAIA,EAAID,aAAa7U,QAAUmf,IAAgB1iB,KAAKC,MAC5CoY,EAAID,aAEJ,OAKV7Z,EAAQW,QAAUX,EAAQW,QAAU,OAAO8O,cAC3CzP,EAAQY,IAxCT,SAAyBA,EAAK1B,GACzBA,IACH0B,EAAMA,EAAI8E,QAAQ,eAAe,SAAUwzB,GAC1C,IAAI/6B,EAAM+6B,EAAMj1B,MAAM,GAClBpG,EAAQqB,EAAKf,IAAQ+6B,EAEzB,cADOh6B,EAAKf,GACLN,MAGT,OAAO+C,EA+BOu4B,CAAgBn5B,EAAQY,IAAKZ,EAAQd,MAlDpD,SAAkBc,EAASd,EAAM65B,GAChC,GAAuB,QAAnB/4B,EAAQW,QAAyC,UAArBX,EAAQg5B,SAAsB,CAC7D,IAAI9rB,EAASlN,EAAQY,IAAIyb,QAAQ,KAAO,EAAI,IAAM,IAC9Ckb,EAAczS,GAAiB5lB,GACnCc,EAAQY,KAAQ22B,EAAcrqB,EAASqqB,EAAc,QAErDv3B,EAAQd,KAAO65B,EAAU75B,GA6C1Bk6B,CAASp5B,EAASA,EAAQd,KAAM65B,GAChC/4B,EAAQ0W,OAAS1W,EAAQ2I,QAAU,SAAU0wB,GAC5C,IACCA,EAAKA,GAAMrT,MACX,IAAI9kB,EAAWijB,EAAYzhB,EAAQ22B,EAAGv0B,OAAQ9E,IAC9B,SAAZq5B,EAAGp5B,MACFD,EAAQs5B,gBACXp4B,EAAWlB,EAAQs5B,cAAcp4B,EAAUm4B,EAAGv0B,SAG3C6W,EAAQza,IAAalB,EAAQC,KAChCwG,EAAQvF,GAAU,SAAUq4B,EAAK38B,GAChCsE,EAAStE,GAAK,IAAIoD,EAAQC,KAAKs5B,MAEtBv5B,EAAQC,OAClBiB,EAAW,IAAIlB,EAAQC,KAAKiB,IAG7BI,EAASC,QAAQL,KAEblB,EAAQw5B,cACXt4B,EAAWlB,EAAQw5B,YAAYt4B,EAAUm4B,EAAGv0B,SAG7CxD,EAASqjB,OAAOzjB,IAEhB,MAAO4P,GACRxP,EAASqjB,OAAO7T,GAChB9T,EAAEsE,SAASqH,QAAQmI,GAClB,SAC0B,IAAvB9Q,EAAQuN,YAAqBvQ,EAAE+e,mBAzFtC,SAAc/b,GACTA,EAAQg5B,UAA+C,UAAnCh5B,EAAQg5B,SAAS5mB,cAnG1C,SAAqBpS,GACpB,IAAIy5B,EAAcz5B,EAAQ05B,cAAgB,qBACzC,IAAIp6B,MAAOq6B,UAAY,IACtBvtB,KAAKC,MAAsB,KAAhBD,KAAKwtB,UAAkB5a,SAAS,IAEzC6a,EAASjQ,EAAU9d,cAAc,UAErC2P,EAAOge,GAAe,SAAUK,GAC/BD,EAAO1rB,WAAWC,YAAYyrB,GAC9B75B,EAAQ0W,OAAO,CACdzW,KAAM,OACN6E,OAAQ,CACP+U,aAAcigB,KAGhBre,EAAOge,GAAe90B,GAGvBk1B,EAAOlxB,QAAU,WAchB,OAbAkxB,EAAO1rB,WAAWC,YAAYyrB,GAE9B75B,EAAQ2I,QAAQ,CACf1I,KAAM,QACN6E,OAAQ,CACP+D,OAAQ,IACRgR,aAAcpY,KAAKE,UAAU,CAC5BiH,MAAO,kCAIV6S,EAAOge,GAAe90B,GAEf,GAGRk1B,EAAOnjB,OAAS,WACf,OAAO,GAGRmjB,EAAOtqB,IAAMvP,EAAQY,KACnBZ,EAAQY,IAAIyb,QAAQ,KAAO,EAAI,IAAM,MACrCrc,EAAQy5B,YAAcz5B,EAAQy5B,YAAc,YAC7C,IAAMA,EACN,IAAM3U,GAAiB9kB,EAAQd,MAAQ,IAExC0qB,EAAUlD,KAAK7Y,YAAYgsB,GAuDnBE,CAAY/5B,GApDrB,SAAmBA,GAClB,IAAI8Z,EAAM,IAAI2B,EAAOue,eACrBlgB,EAAIuD,KAAKrd,EAAQW,OAAQX,EAAQY,KAAK,EAAMZ,EAAQkP,KACnDlP,EAAQqV,UAETyE,EAAImgB,mBAAqB,WACD,IAAnBngB,EAAIogB,aACHpgB,EAAIjR,QAAU,KAAOiR,EAAIjR,OAAS,IACrC7I,EAAQ0W,OAAO,CAACzW,KAAM,OAAQ6E,OAAQgV,IAEtC9Z,EAAQ2I,QAAQ,CAAC1I,KAAM,QAAS6E,OAAQgV,MAKvC9Z,EAAQ+4B,YAAct3B,KAAKE,WAC7B3B,EAAQd,MACW,QAAnBc,EAAQW,QACTmZ,EAAIoK,iBAAiB,eACpB,mCAGElkB,EAAQmkB,cAAgB1iB,KAAKC,OAChCoY,EAAIoK,iBAAiB,SAAU,4BAGhC,GAAIuF,EAASzpB,EAAQm6B,SACpB,IAAK,IAAIC,KAAUp6B,EAAQm6B,QACtB5Q,EAAOxsB,KAAKiD,EAAQm6B,QAASC,IAChCtgB,EAAIoK,iBAAiBkW,EAAQp6B,EAAQm6B,QAAQC,IAKhD,GAAI5Q,EAAWxpB,EAAQ8D,QAAS,CAC/B,IAAIu2B,EAAWr6B,EAAQ8D,OAAOgW,EAAK9Z,GACnB,MAAZq6B,IAAkBvgB,EAAMugB,GAG7B,IAAIn7B,EAA0B,QAAnBc,EAAQW,QAAqBX,EAAQd,KAAYc,EAAQd,KAAb,GAEvD,GAAIA,IAASwqB,EAASxqB,IAASA,EAAKH,cAAgB0c,EAAO6e,SAC1D,MAAM,IAAIh2B,MAAM,sGAIjBwV,EAAIygB,KAAKr7B,GAQDs7B,CAAUx6B,GAyFlBy6B,CAAKz6B,GACLsB,EAASE,QAAUsyB,GAAQxyB,EAASE,QAASxB,EAAQ82B,cAC9Cx1B,EAASE,SAGVxE,EA/uECqsB,CAAQ5N,GAEK,oBAAXrR,QACTpN,EAAEkvB,KAAK,CACNrgB,SAA8B,oBAAbA,SAA2BA,SAAW,GACvDiU,SAA8B,oBAAbA,SAA2BA,SAAW,GACvD5R,aAAcA,aACd+F,WAAYA,aAG8B,MAAVtX,GAAkBA,EAAOD,QAC1DC,EAAOD,QAAUM,OAEc,KAA/B,aAAqB,OAAOA,GAAG,8BAhBhC,CAqBoB,oBAAXoN,OAAyBA,OAAShL,Q,mPClBxCs7B,EAAgB,SAAuB58B,EAAGmI,EAAGhJ,EAAGC,GAElD,OADAY,GAAKZ,EAAI,GACD,EAAUD,EAAI,EAAIa,EAAIA,EAAImI,GAE1BhJ,EAAI,KADZa,GACsBA,EAAI,GAAK,GAAKmI,GAGlC00B,EAA4B,mBAAXh9B,QAAoD,iBAApBA,OAAOi9B,SAAwB,SAAU3zB,GAC5F,cAAcA,GACZ,SAAUA,GACZ,OAAOA,GAAyB,mBAAXtJ,QAAyBsJ,EAAIlI,cAAgBpB,QAAUsJ,IAAQtJ,OAAOa,UAAY,gBAAkByI,GAuJ5G,EApJF,WAIX,IAAI3D,OAAU,EAEV2O,OAAQ,EACRtG,OAAO,EAEP1B,OAAS,EACT4wB,OAAS,EACTC,OAAO,EAEPC,OAAW,EACXC,OAAW,EAEXC,OAAY,EACZC,OAAc,EAEdlD,OAAO,EAEPhkB,OAAW,EAIf,SAAS8L,IACP,OAAO1V,OAAO+wB,SAAW/wB,OAAOkK,YAKlC,SAASpK,EAAI5G,GACX,OAAOA,EAAQ83B,wBAAwBlxB,IAAM+H,EAK/C,SAASmC,EAAKinB,GAEPJ,IACHA,EAAYI,GAOdrD,EAAO6C,EAHPK,EAAcG,EAAcJ,EAGDhpB,EAAO8oB,EAAUC,GAG5C5wB,OAAOosB,SAAS,EAAGwB,GAGnBkD,EAAcF,EAAW5wB,OAAO2D,sBAAsBqG,GAMxD,WAEEhK,OAAOosB,SAAS,EAAGvkB,EAAQ8oB,GAGvBz3B,GAAWw3B,IAEbx3B,EAAQyI,aAAa,WAAY,MAGjCzI,EAAQ8E,SAIc,mBAAb4L,GACTA,IAIFinB,GAAY,EAxBVK,GAuFJ,OA1DA,SAAcx2B,GACZ,IAAI9E,EAAU+E,UAAUC,OAAS,QAAsBL,IAAjBI,UAAU,GAAmBA,UAAU,GAAK,GAalF,OAVAi2B,EAAWh7B,EAAQg7B,UAAY,IAC/B/wB,EAASjK,EAAQiK,QAAU,EAC3B+J,EAAWhU,EAAQgU,SACnB6mB,EAAS76B,EAAQ66B,QAAUH,EAC3BI,EAAO96B,EAAQ86B,OAAQ,EAGvB7oB,EAAQ6N,SAGkB,IAAXhb,EAAyB,YAAc61B,EAAQ71B,IAE5D,IAAK,SACHxB,OAAUqB,EACVm2B,GAAO,EACPnvB,EAAOsG,EAAQnN,EACf,MAIF,IAAK,SAEH6G,EAAOzB,EADP5G,EAAUwB,GAEV,MAIF,IAAK,SACHxB,EAAUuI,SAAS8a,cAAc7hB,GACjC6G,EAAOzB,EAAI5G,GAQf,OAHAy3B,EAAWpvB,EAAOsG,EAAQhI,EAGlB0wB,EAAQ36B,EAAQg7B,WAEtB,IAAK,SACHA,EAAWh7B,EAAQg7B,SACnB,MAGF,IAAK,WACHA,EAAWh7B,EAAQg7B,SAASD,GAKhC3wB,OAAO2D,sBAAsBqG,IASjBmnB,G,QC9HhB,IAMIC,EAAc,WAChB,SAASC,EAAiB32B,EAAQzC,GAChC,IAAK,IAAIzF,EAAI,EAAGA,EAAIyF,EAAM2C,OAAQpI,IAAK,CACrC,IAAI8+B,EAAar5B,EAAMzF,GACvB8+B,EAAWl+B,WAAak+B,EAAWl+B,aAAc,EACjDk+B,EAAWx0B,cAAe,EACtB,UAAWw0B,IAAYA,EAAWv0B,UAAW,GACjD7J,OAAOC,eAAeuH,EAAQ42B,EAAWv9B,IAAKu9B,IAIlD,OAAO,SAAUC,EAAaC,EAAYC,GAGxC,OAFID,GAAYH,EAAiBE,EAAYn9B,UAAWo9B,GACpDC,GAAaJ,EAAiBE,EAAaE,GACxCF,GAdO,GAwBd/2B,EAAWtH,OAAOuH,QAAU,SAAUC,GACxC,IAAK,IAAIlI,EAAI,EAAGA,EAAImI,UAAUC,OAAQpI,IAAK,CACzC,IAAIqI,EAASF,UAAUnI,GAEvB,IAAK,IAAIuB,KAAO8G,EACV3H,OAAOkB,UAAUC,eAAe1B,KAAKkI,EAAQ9G,KAC/C2G,EAAO3G,GAAO8G,EAAO9G,IAK3B,OAAO2G,GAGLg3B,EAAkB,CACpBpqB,WAAW,EACXhE,MAAO,EACP4E,MAAM,EACNypB,UAAW,MACXv5B,MAAO,GACPw5B,SAAU,+GACVjW,QAAS,cACT9b,OAAQ,EACRgyB,cAAe,kCACfC,cAAe,mCAGb,EAAU,WAoCZ,SAASC,EAAQC,EAAWp8B,IA7FT,SAAUq8B,EAAUV,GACvC,KAAMU,aAAoBV,GACxB,MAAM,IAAIpD,UAAU,qCA4FpB+D,CAAel9B,KAAM+8B,GAErBI,EAAiBx/B,KAAKqC,MAGtBY,EAAU4E,EAAS,GAAIk3B,EAAiB97B,GAExCo8B,EAAUI,SAAWJ,EAAYA,EAAU,IAG3Ch9B,KAAKg9B,UAAYA,EACjBh9B,KAAKY,QAAUA,EAGf,IAAIy8B,EAAoC,iBAApBz8B,EAAQ+lB,QAAuB/lB,EAAQ+lB,QAAQpZ,MAAM,KAAKmF,QAAO,SAAUiU,GAC7F,OAAyD,IAAlD,CAAC,QAAS,QAAS,SAAS1J,QAAQ0J,MACxC,GAGL3mB,KAAKs9B,SAAU,EACft9B,KAAKu9B,eAAiB,GAGtBv9B,KAAKw9B,mBAAmBR,EAAWK,EAAQz8B,GAuW7C,OAvTAw7B,EAAYW,EAAS,CAAC,CACpBh+B,IAAK,UAaLN,MAAO,SAAiBu+B,EAAWJ,EAAUx5B,EAAOq6B,GAElD,IAAIC,EAAmB1yB,OAAOyB,SAASC,cAAc,OACrDgxB,EAAiB7O,UAAY+N,EAAStpB,OACtC,IAAIqqB,EAAcD,EAAiB7Q,WAAW,GAG9C8Q,EAAYv9B,GAAK,WAAa4M,KAAKwtB,SAAS5a,SAAS,IAAIpM,OAAO,EAAG,IAGnEmqB,EAAYhxB,aAAa,cAAe,SAGxC,IAAIixB,EAAYF,EAAiBnW,cAAcvnB,KAAKY,QAAQk8B,eAI5D,OAHA98B,KAAK69B,iBAAiBb,EAAW55B,EAAOq6B,EAAWG,GAG5CD,IAER,CACD5+B,IAAK,mBACLN,MAAO,SAA0Bu+B,EAAW55B,EAAOq6B,EAAWG,GAC5D,GAAuB,IAAnBx6B,EAAM0rB,UAAqC,KAAnB1rB,EAAM0rB,SAEhC2O,GAAaG,EAAUnvB,YAAYrL,QAC9B,IAjNO06B,EAiNQ16B,IA/M2C,sBADvD,GACoBwc,SAASjiB,KAAKmgC,GA+Md,CAE5B,IAAIC,EAAY36B,EAAMzF,KAAKq/B,GAC3BS,EAAYG,EAAU/O,UAAYkP,EAAYH,EAAUI,YAAcD,OAGtEN,EAAYG,EAAU/O,UAAYzrB,EAAQw6B,EAAUI,YAAc56B;;;;;;;;;;;;;;;;;;;;;;;;;AAvN1E,IAAoB06B,IA0Nf,CACD/+B,IAAK,QACLN,MAAO,SAAeu+B,EAAWp8B,GAG/B,GAAIZ,KAAKs9B,UAAYt9B,KAAKi+B,WACxB,OAAOj+B,KAKT,GAHAA,KAAKs9B,SAAU,EAGXt9B,KAAKk+B,aAIP,OAHAl+B,KAAKk+B,aAAahvB,MAAMivB,WAAa,UACrCn+B,KAAKk+B,aAAavxB,aAAa,cAAe,SAC9C3M,KAAKo+B,eAAenpB,SACbjV,KAIT,IAAIoD,EAAQ45B,EAAU9G,aAAa,UAAYt1B,EAAQwC,MAGvD,IAAKA,EACH,OAAOpD,KAIT,IAAI29B,EAAc39B,KAAKq+B,QAAQrB,EAAWp8B,EAAQg8B,SAAUx5B,EAAOxC,EAAQsS,MAG3E8pB,EAAUrwB,aAAa,mBAAoBgxB,EAAYv9B,IAGvD,IAAIkS,EAAYtS,KAAKs+B,eAAe19B,EAAQ0R,UAAW0qB,GA2BvD,OAzBAh9B,KAAKu+B,QAAQZ,EAAarrB,GAE1BtS,KAAKu9B,eAAiB/3B,EAAS,GAAI5E,EAAQ49B,cAAe,CACxD7B,UAAW/7B,EAAQ+7B,YAGrB38B,KAAKu9B,eAAekB,UAAYj5B,EAAS,GAAIxF,KAAKu9B,eAAekB,UAAW,CAC1EC,MAAOl5B,EAAS,GAAIxF,KAAKu9B,eAAekB,WAAaz+B,KAAKu9B,eAAekB,UAAUC,MAAO,CACxFx6B,QAAStD,EAAQi8B,gBAEnBhyB,OAAQrF,EAAS,GAAIxF,KAAKu9B,eAAekB,WAAaz+B,KAAKu9B,eAAekB,UAAU5zB,OAAQ,CAC1FA,OAAQjK,EAAQiK,WAIhBjK,EAAQ+9B,oBACV3+B,KAAKu9B,eAAekB,UAAUG,gBAAkB,CAC9CD,kBAAmB/9B,EAAQ+9B,oBAI/B3+B,KAAKo+B,eAAiB,IAAI,IAAOpB,EAAWW,EAAa39B,KAAKu9B,gBAE9Dv9B,KAAKk+B,aAAeP,EAEb39B,OAER,CACDjB,IAAK,QACLN,MAAO,WAEL,OAAKuB,KAAKs9B,SAIVt9B,KAAKs9B,SAAU,EAGft9B,KAAKk+B,aAAahvB,MAAMivB,WAAa,SACrCn+B,KAAKk+B,aAAavxB,aAAa,cAAe,QAEvC3M,MATEA,OAWV,CACDjB,IAAK,WACLN,MAAO,WACL,IAAIw3B,EAAQj2B,KAuBZ,OApBAA,KAAK6+B,QAAQx3B,SAAQ,SAAUy3B,GAC7B,IAAIC,EAAOD,EAAKC,KACZnY,EAAQkY,EAAKlY,MAEjBqP,EAAM+G,UAAU7nB,oBAAoByR,EAAOmY,MAE7C/+B,KAAK6+B,QAAU,GAEX7+B,KAAKk+B,eACPl+B,KAAKg/B,QAGLh/B,KAAKo+B,eAAea,UAGfj/B,KAAKo+B,eAAex9B,QAAQs+B,kBAC/Bl/B,KAAKk+B,aAAanvB,WAAWC,YAAYhP,KAAKk+B,cAC9Cl+B,KAAKk+B,aAAe,OAGjBl+B,OAER,CACDjB,IAAK,iBACLN,MAAO,SAAwB6T,EAAW0qB,GAQxC,MANyB,iBAAd1qB,EACTA,EAAYtH,OAAOyB,SAAS8a,cAAcjV,IACnB,IAAdA,IAETA,EAAY0qB,EAAUjuB,YAEjBuD,IAWR,CACDvT,IAAK,UACLN,MAAO,SAAiBk/B,EAAarrB,GACnCA,EAAU7D,YAAYkvB,KAEvB,CACD5+B,IAAK,qBACLN,MAAO,SAA4Bu+B,EAAWK,EAAQz8B,GACpD,IAAIu+B,EAASn/B,KAETo/B,EAAe,GACfC,EAAiB,GAErBhC,EAAOh2B,SAAQ,SAAUuf,GACvB,OAAQA,GACN,IAAK,QACHwY,EAAa14B,KAAK,cAClB24B,EAAe34B,KAAK,cACpB,MACF,IAAK,QACH04B,EAAa14B,KAAK,SAClB24B,EAAe34B,KAAK,QACpB,MACF,IAAK,QACH04B,EAAa14B,KAAK,SAClB24B,EAAe34B,KAAK,aAM1B04B,EAAa/3B,SAAQ,SAAUuf,GAC7B,IAAImY,EAAO,SAAcO,IACG,IAAtBH,EAAOlB,aAGXqB,EAAIC,eAAgB,EACpBJ,EAAOK,cAAcxC,EAAWp8B,EAAQ0N,MAAO1N,EAAS0+B,KAE1DH,EAAON,QAAQn4B,KAAK,CAAEkgB,MAAOA,EAAOmY,KAAMA,IAC1C/B,EAAU1yB,iBAAiBsc,EAAOmY,MAIpCM,EAAeh4B,SAAQ,SAAUuf,GAC/B,IAAImY,EAAO,SAAcO,IACG,IAAtBA,EAAIC,eAGRJ,EAAOM,cAAczC,EAAWp8B,EAAQ0N,MAAO1N,EAAS0+B,IAE1DH,EAAON,QAAQn4B,KAAK,CAAEkgB,MAAOA,EAAOmY,KAAMA,IAC1C/B,EAAU1yB,iBAAiBsc,EAAOmY,GACpB,UAAVnY,GAAqBhmB,EAAQ8+B,qBAC/BjzB,SAASnC,iBAAiB,aAAa,SAAUoH,GAC/C,GAAKytB,EAAOlB,WAAZ,CAGA,IAAI0B,EAASR,EAAOf,eAAeuB,OAC/B3C,EAAUhV,SAAStW,EAAEhM,SAAWi6B,EAAO3X,SAAStW,EAAEhM,SAGtDq5B,EAAKrtB,OACJ,QAIR,CACD3S,IAAK,gBACLN,MAAO,SAAuBu+B,EAAW1uB,EAAO1N,GAC9C,IAAIg/B,EAAS5/B,KAEbA,KAAKi+B,YAAa,EAElB,IAAI4B,EAAgBvxB,GAASA,EAAMyM,MAAQzM,GAAS,EACpDtO,KAAK8/B,aAAe90B,OAAO6J,YAAW,WACpC,OAAO+qB,EAAOG,MAAM/C,EAAWp8B,KAC9Bi/B,KAEJ,CACD9gC,IAAK,gBACLN,MAAO,SAAuBu+B,EAAW1uB,EAAO1N,EAAS0+B,GACvD,IAAIU,EAAShgC,KAEbA,KAAKi+B,YAAa,EAElB,IAAI4B,EAAgBvxB,GAASA,EAAM1F,MAAQ0F,GAAS,EACpDtD,OAAO8D,aAAa9O,KAAK8/B,cACzB90B,OAAO6J,YAAW,WAChB,IAAuB,IAAnBmrB,EAAO1C,SAGN7wB,SAAS6a,KAAKU,SAASgY,EAAO9B,cAAnC,CAMA,GAAiB,eAAboB,EAAIz+B,KAKN,GAJYm/B,EAAOC,qBAAqBX,EAAKtC,EAAW1uB,EAAO1N,GAK7D,OAIJo/B,EAAOhB,MAAMhC,EAAWp8B,MACvBi/B,KAEJ,CACD9gC,IAAK,sBACLN,MAAO,SAA6B2E,GAClC,QAAiC,IAAtBpD,KAAKk+B,aAAhB,CAMA,IAAIN,EAAY59B,KAAKk+B,aAAa3W,cAAcvnB,KAAKY,QAAQk8B,eAC7D98B,KAAKkgC,mBAAmBtC,EAAW59B,KAAKY,QAAQsS,KAAMlT,KAAKg9B,UAAU9G,aAAa,UAAYl2B,KAAKY,QAAQwC,OAC3GpD,KAAK69B,iBAAiB79B,KAAKg9B,UAAW55B,EAAOpD,KAAKY,QAAQsS,KAAM0qB,GAChE59B,KAAKY,QAAQwC,MAAQA,EACrBpD,KAAKo+B,eAAenpB,mBATgB,IAAvBjV,KAAKY,QAAQwC,QACtBpD,KAAKY,QAAQwC,MAAQA,KAU1B,CACDrE,IAAK,qBACLN,MAAO,SAA4Bm/B,EAAWH,EAAW0C,GAC5B,IAAvBA,EAAUrR,UAAyC,KAAvBqR,EAAUrR,SACxC2O,GAAaG,EAAU5uB,YAAYmxB,GAEnC1C,EAAYG,EAAU/O,UAAY,GAAK+O,EAAUI,YAAc,OAI9DjB,EAnaK,GA8aVI,EAAmB,WACrB,IAAIiD,EAASpgC,KAEbA,KAAK+a,KAAO,WACV,OAAOqlB,EAAOL,MAAMK,EAAOpD,UAAWoD,EAAOx/B,UAG/CZ,KAAK4I,KAAO,WACV,OAAOw3B,EAAOpB,SAGhBh/B,KAAKqgC,QAAU,WACb,OAAOD,EAAOE,YAGhBtgC,KAAKqnB,OAAS,WACZ,OAAI+Y,EAAO9C,QACF8C,EAAOx3B,OAEPw3B,EAAOrlB,QAIlB/a,KAAKugC,mBAAqB,SAAUn9B,GAClC,OAAOg9B,EAAOI,oBAAoBp9B,IAGpCpD,KAAK6+B,QAAU,GAEf7+B,KAAKigC,qBAAuB,SAAUX,EAAKtC,EAAW1uB,EAAO1N,GAC3D,IAAI6/B,EAAmBnB,EAAImB,kBAAoBnB,EAAIoB,WAAapB,EAAIqB,cAepE,QAAIP,EAAOlC,aAAalW,SAASyY,KAE/BL,EAAOlC,aAAa5zB,iBAAiBg1B,EAAIz+B,MAf5B,SAAS+T,EAASgsB,GAC/B,IAAIC,EAAoBD,EAAKH,kBAAoBG,EAAKF,WAAaE,EAAKD,cAGxEP,EAAOlC,aAAa/oB,oBAAoBmqB,EAAIz+B,KAAM+T,GAG7CooB,EAAUhV,SAAS6Y,IAEtBT,EAAOX,cAAczC,EAAWp8B,EAAQ0N,MAAO1N,EAASggC,OAOnD,KAOE,IChkBf97B,EAAEg8B,GAAGzuB,QAAU,SAAU0uB,GACvB,OAAO/gC,KAAKghC,MAAK,WACf,IAAMC,EAAQn8B,EAAE9E,MACZF,EAAOmhC,EAAMnhC,KAAK,cAChBc,EAA4B,iBAAXmgC,GAAuBA,GAAU,GAEpDE,EAAMC,KAAK,WACbtgC,EAAQwC,MAAQ69B,EAAMC,KAAK,SAC3BD,EAAME,WAAW,SACjBF,EAAMC,KAAK,sBAAuBtgC,EAAQwC,QAG7B,YAAX29B,IAAsBA,EAAS,YAE9BjhC,GAAQ,CAAC,UAAW,QAAQshC,SAASL,KAErCjhC,GAAMmhC,EAAMnhC,KAAK,aAAeA,EAAO,IAAIi9B,EAAQ/8B,KAAMY,IACxC,iBAAXmgC,GAAuBjhC,EAAKihC,IAASjhC,EAAKihC,UAKzD,CAAC,QAAS,UAAU15B,SAAQ,SAASg6B,GACnC,IAAMC,EAAYD,EAAU/6B,QAAQ,KAAK,SAAU1I,GACjD,OAAOA,EAAE,GAAGyS,iBAGdvL,EAAEg8B,GAAF,QAAaQ,GAAe,SAASC,GACnC,IAAMC,EAAOxhC,KAEb,GAAIwhC,EAAM,CACR,IACIz9B,EAAOy9B,EAAKH,KAMhB,MAPc,CAAC,MAAS,CAAC,OAAQ,SAAU,OAAU,CAAC,MAAO,WAGvDA,GAAWh6B,SAAQ,SAASo6B,GAC5BF,IAAQx9B,GAAQ8Z,SAAS2jB,EAAK50B,IAAI,UAAY60B,GAAO,QAGpD19B,EAEP,OAAO,SAMbe,EAAE48B,KAAK,KAAP,MAAuB,WACrB,GAAK,aAAc1hC,MAAS,CAAC,QAAS,SAAU,WAAY,UAAUohC,SAASphC,KAAKwzB,SAAU,OAAOxzB,MAIvG8E,EAAEg8B,GAAGa,MAAQ,SAASA,EAAOC,GAC3B,OAAO5hC,KACJupB,GAAG,aAAcoY,GACjBpY,GAAG,aAAcqY,GAASD,IAI/B78B,EAAEg8B,GAAGe,kBAAoB,SAAUC,EAAIlG,EAAiChnB,GAQtE,YARgF,IAA3CgnB,MAAW92B,EAAEi9B,GAAGC,OAAOC,UAC1C,iBAAPH,IAAiBA,GAAO92B,OAAO+wB,SAAW/wB,OAAOkK,aAE5DgtB,EAAKJ,EAAI,CACPlG,SAAU92B,EAAEi9B,GAAGC,OAAOpG,IAAaA,EACnChnB,aAGK5U,MAKT8E,EAAEg8B,GAAG1rB,OAAStQ,EAAEsQ,OAAOpW,KAAK8F;;;;;AAM5BA,EAAE8hB,MAAMub,QAAUr9B,EAAE8hB,MAAMub,SAAW,GAErC,IAAMC,EAA0Bt9B,EAAEg8B,GAAG9hC,KAErC8F,EAAEg8B,GAAG9hC,KAAO,SAASqjC,EAAWviC,EAAM8U,GACpC,IAAMpI,EAAKxM,KA8CX,OA5CK4U,IACHA,EAAW9U,EACXA,EAAO,MAGTgF,EAAEk8B,KAAKqB,EAAU90B,MAAM,OAAO,SAAS/P,EAAG6kC,GAGxC,IAFAA,EAAYA,EAAU90B,MAAM,MAAM,MAElBzI,EAAE8hB,MAAMub,QAAQ,CAC9B,IAAIG,EAAex9B,EAAE8hB,MAAMub,QAAQE,GAG/BC,EAAaC,QACfD,EAAaC,OAAQ,EAGrBD,EAAaE,gBAAkBF,EAAarb,QAC5Cqb,EAAarb,QAAU,WAGrB,IAAMtiB,EAAO3D,MAAM5B,UAAUyF,MAAMlH,KAAKgI,WAExChB,EAAK,GAAKG,EAAEsQ,OAAO,GAAGzQ,EAAK,IAG3BG,EAAE8hB,MAAM6b,OAAS,WAGf,IAAM99B,EAAO3D,MAAM5B,UAAUyF,MAAMlH,KAAKgI,WAClCihB,EAAQjiB,EAAK,GACb+9B,EAAU59B,EAAE8hB,EAAMlhB,QAExBg9B,EAAQ/b,QAAQ/hB,MAAO89B,EAAS/8B,YAGlC28B,EAAaE,gBAAgB59B,MAAM5E,KAAK2E,KAK5C29B,EAAaK,MAAM/9B,MAAM4H,EAAI,CAAC1M,QAI3BsiC,EAAwBx9B,MAAM5E,KAAM,CAACqiC,EAAWztB,K,uECpIpCguB,E,WAMnB,WAAY/hC,EAAME,QAAc,IAAdA,MAAQ,MAAM,8DAJnB,IAImB,2BAHtB,IAGsB,4BAFrB,IAGTf,KAAKa,KAAOA,EACZb,KAAKe,MAAQA,E,2BAGfV,UAAA,SAAUtC,GAGR,OAFAiC,KAAKM,WAAWoG,KAAK3I,GAEdiC,M,EAGTyC,OAAA,SAAO5B,GAGL,OAFAb,KAAK6iC,QAAQn8B,KAAK7F,GAEXb,M,EAGT4C,QAAA,SAAQ/B,GAGN,OAFAb,KAAK8iC,SAASp8B,KAAK7F,GAEZb,M,EAGToV,OAAA,SAAO9T,EAAKyiB,GACN/jB,KAAKe,QACPO,EAAIvB,MAAM+f,OAAO9f,KAAKa,MAAQb,KAAKe,OAGrC,IAAMA,EAAQO,EAAIvB,MAAM+f,OAAO9f,KAAKa,MAEpCb,KAAKM,WAAW+G,SAAQ,SAAAtJ,GAAI,OAAIgD,EAAM3B,UAAUrB,GAAQgD,EAAMV,UAAUtC,MACxEiC,KAAK6iC,QAAQx7B,SAAQ,SAAAtJ,GAAI,OAAIgD,EAAM3B,UAAUrB,GAAQgD,EAAM0B,OAAO1E,MAClEiC,KAAK8iC,SAASz7B,SAAQ,SAAAtJ,GAAI,OAAIgD,EAAM3B,UAAUrB,GAAQgD,EAAM6B,QAAQ7E,O,YCtCnDglC,E,0DACF,I,2BAEjB18B,IAAA,SAAItI,EAAM+F,GAGR,OAFA9D,KAAKgjC,eAAejlC,GAAQ+F,EAErB9D,M,EAGToV,OAAA,SAAO9T,EAAKyiB,GACV7lB,OAAA,IAAAA,CAAcoD,EAAI0hC,eAAgBhjC,KAAKgjC,iB,KCVtBJ,E,kDACV,I,2BAETv8B,IAAA,SAAItI,EAAMsjB,EAAMvd,GAGd,OAFA9D,KAAKkhB,OAAOnjB,GAAQ,CAAEsjB,OAAMvd,aAErB9D,M,EAGToV,OAAA,SAAO9T,EAAKyiB,GACV7lB,OAAA,IAAAA,CAAcoD,EAAI4f,OAAQlhB,KAAKkhB,S,KCVnC,kCAoBArP,MAAMuD,OAAO6tB,KACbpxB,MAAMuD,OAAO8tB,KAIb9mB,YAAapR,S,8BCzBb,YA4BA;;;;;;;;;;;;;;;;;;;;;;;;;AAJA,IAAIm4B,EAA8B,oBAAXn4B,QAA8C,oBAAbyB,SAEpD22B,EAAwB,CAAC,OAAQ,UAAW,WAC5CC,EAAkB,EACb7lC,EAAI,EAAGA,EAAI4lC,EAAsBx9B,OAAQpI,GAAK,EACrD,GAAI2lC,GAAaG,UAAUC,UAAUtmB,QAAQmmB,EAAsB5lC,KAAO,EAAG,CAC3E6lC,EAAkB,EAClB,MA+BJ,IAWIG,EAXqBL,GAAan4B,OAAOypB,QA3B7C,SAA2BqM,GACzB,IAAI2C,GAAS,EACb,OAAO,WACDA,IAGJA,GAAS,EACTz4B,OAAOypB,QAAQtyB,UAAUR,MAAK,WAC5B8hC,GAAS,EACT3C,UAKN,SAAsBA,GACpB,IAAI4C,GAAY,EAChB,OAAO,WACAA,IACHA,GAAY,EACZ7uB,YAAW,WACT6uB,GAAY,EACZ5C,MACCuC,MAyBT,SAASjZ,EAAW0T,GAElB,OAAOA,GAA8D,sBADvD,GACoBle,SAASjiB,KAAKmgC,GAUlD,SAAS6F,EAAyBz/B,EAAS/E,GACzC,GAAyB,IAArB+E,EAAQ4qB,SACV,MAAO,GAGT,IACIliB,EADS1I,EAAQ0/B,cAAcC,YAClBC,iBAAiB5/B,EAAS,MAC3C,OAAO/E,EAAWyN,EAAIzN,GAAYyN,EAUpC,SAASm3B,EAAc7/B,GACrB,MAAyB,SAArBA,EAAQorB,SACHprB,EAEFA,EAAQ6K,YAAc7K,EAAQ8/B,KAUvC,SAASC,EAAgB//B,GAEvB,IAAKA,EACH,OAAOuI,SAAS6a,KAGlB,OAAQpjB,EAAQorB,UACd,IAAK,OACL,IAAK,OACH,OAAOprB,EAAQ0/B,cAActc,KAC/B,IAAK,YACH,OAAOpjB,EAAQojB,KAKnB,IAAI4c,EAAwBP,EAAyBz/B,GACjDsjB,EAAW0c,EAAsB1c,SACjC2c,EAAYD,EAAsBC,UAClCC,EAAYF,EAAsBE,UAEtC,MAAI,wBAAwB1lB,KAAK8I,EAAW4c,EAAYD,GAC/CjgC,EAGF+/B,EAAgBF,EAAc7/B,IAGvC,IAAImgC,EAASlB,MAAgBn4B,OAAOs5B,uBAAwB73B,SAAS83B,cACjEC,EAASrB,GAAa,UAAUzkB,KAAK4kB,UAAUC,WASnD,SAASkB,EAAKva,GACZ,OAAgB,KAAZA,EACKma,EAEO,KAAZna,EACKsa,EAEFH,GAAUG,EAUnB,SAASE,EAAgBxgC,GACvB,IAAKA,EACH,OAAOuI,SAASunB,gBAQlB,IALA,IAAI2Q,EAAiBF,EAAK,IAAMh4B,SAAS6a,KAAO,KAG5Csd,EAAe1gC,EAAQ0gC,cAAgB,KAEpCA,IAAiBD,GAAkBzgC,EAAQ2gC,oBAChDD,GAAgB1gC,EAAUA,EAAQ2gC,oBAAoBD,aAGxD,IAAItV,EAAWsV,GAAgBA,EAAatV,SAE5C,OAAKA,GAAyB,SAAbA,GAAoC,SAAbA,GAMsB,IAA1D,CAAC,KAAM,KAAM,SAASrS,QAAQ2nB,EAAatV,WAA2E,WAAvDqU,EAAyBiB,EAAc,YACjGF,EAAgBE,GAGlBA,EATE1gC,EAAUA,EAAQ0/B,cAAc5P,gBAAkBvnB,SAASunB,gBA4BtE,SAAS8Q,EAAQtoB,GACf,OAAwB,OAApBA,EAAKzN,WACA+1B,EAAQtoB,EAAKzN,YAGfyN,EAWT,SAASuoB,EAAuBC,EAAUC,GAExC,KAAKD,GAAaA,EAASlW,UAAamW,GAAaA,EAASnW,UAC5D,OAAOriB,SAASunB,gBAIlB,IAAIkR,EAAQF,EAASG,wBAAwBF,GAAYG,KAAKC,4BAC1DxyB,EAAQqyB,EAAQF,EAAWC,EAC3Bl3B,EAAMm3B,EAAQD,EAAWD,EAGzBM,EAAQ74B,SAAS2mB,cACrBkS,EAAMC,SAAS1yB,EAAO,GACtByyB,EAAME,OAAOz3B,EAAK,GAClB,IA/CyB7J,EACrBorB,EA8CAmW,EAA0BH,EAAMG,wBAIpC,GAAIT,IAAaS,GAA2BR,IAAaQ,GAA2B5yB,EAAMmV,SAASja,GACjG,MAjDe,UAFbuhB,GADqBprB,EAoDDuhC,GAnDDnW,WAKH,SAAbA,GAAuBoV,EAAgBxgC,EAAQwhC,qBAAuBxhC,EAkDpEwgC,EAAgBe,GAHdA,EAOX,IAAIE,EAAeb,EAAQE,GAC3B,OAAIW,EAAa3B,KACRe,EAAuBY,EAAa3B,KAAMiB,GAE1CF,EAAuBC,EAAUF,EAAQG,GAAUjB,MAY9D,SAAS4B,EAAU1hC,GACjB,IAAIu9B,EAAO97B,UAAUC,OAAS,QAAsBL,IAAjBI,UAAU,GAAmBA,UAAU,GAAK,MAE3EkgC,EAAqB,QAATpE,EAAiB,YAAc,aAC3CnS,EAAWprB,EAAQorB,SAEvB,GAAiB,SAAbA,GAAoC,SAAbA,EAAqB,CAC9C,IAAIpc,EAAOhP,EAAQ0/B,cAAc5P,gBAC7B8R,EAAmB5hC,EAAQ0/B,cAAckC,kBAAoB5yB,EACjE,OAAO4yB,EAAiBD,GAG1B,OAAO3hC,EAAQ2hC,GAYjB,SAASE,EAAcC,EAAM9hC,GAC3B,IAAI+S,EAAWtR,UAAUC,OAAS,QAAsBL,IAAjBI,UAAU,IAAmBA,UAAU,GAE1EsF,EAAY26B,EAAU1hC,EAAS,OAC/BkH,EAAaw6B,EAAU1hC,EAAS,QAChC+hC,EAAWhvB,GAAY,EAAI,EAK/B,OAJA+uB,EAAKl7B,KAAOG,EAAYg7B,EACxBD,EAAKE,QAAUj7B,EAAYg7B,EAC3BD,EAAK96B,MAAQE,EAAa66B,EAC1BD,EAAKG,OAAS/6B,EAAa66B,EACpBD,EAaT,SAASI,EAAeC,EAAQC,GAC9B,IAAIC,EAAiB,MAATD,EAAe,OAAS,MAChCE,EAAkB,SAAVD,EAAmB,QAAU,SAEzC,OAAOE,WAAWJ,EAAO,SAAWE,EAAQ,SAAU,IAAME,WAAWJ,EAAO,SAAWG,EAAQ,SAAU,IAG7G,SAASE,EAAQJ,EAAMhf,EAAMpU,EAAMyzB,GACjC,OAAO35B,KAAKqH,IAAIiT,EAAK,SAAWgf,GAAOhf,EAAK,SAAWgf,GAAOpzB,EAAK,SAAWozB,GAAOpzB,EAAK,SAAWozB,GAAOpzB,EAAK,SAAWozB,GAAO7B,EAAK,IAAM5mB,SAAS3K,EAAK,SAAWozB,IAASzoB,SAAS8oB,EAAc,UAAqB,WAATL,EAAoB,MAAQ,UAAYzoB,SAAS8oB,EAAc,UAAqB,WAATL,EAAoB,SAAW,WAAa,GAG5U,SAASM,EAAen6B,GACtB,IAAI6a,EAAO7a,EAAS6a,KAChBpU,EAAOzG,EAASunB,gBAChB2S,EAAgBlC,EAAK,KAAOX,iBAAiB5wB,GAEjD,MAAO,CACLnI,OAAQ27B,EAAQ,SAAUpf,EAAMpU,EAAMyzB,GACtCx7B,MAAOu7B,EAAQ,QAASpf,EAAMpU,EAAMyzB,IAIxC,IAAIzJ,EAAiB,SAAUD,EAAUV,GACvC,KAAMU,aAAoBV,GACxB,MAAM,IAAIpD,UAAU,sCAIpBiD,EAAc,WAChB,SAASC,EAAiB32B,EAAQzC,GAChC,IAAK,IAAIzF,EAAI,EAAGA,EAAIyF,EAAM2C,OAAQpI,IAAK,CACrC,IAAI8+B,EAAar5B,EAAMzF,GACvB8+B,EAAWl+B,WAAak+B,EAAWl+B,aAAc,EACjDk+B,EAAWx0B,cAAe,EACtB,UAAWw0B,IAAYA,EAAWv0B,UAAW,GACjD7J,OAAOC,eAAeuH,EAAQ42B,EAAWv9B,IAAKu9B,IAIlD,OAAO,SAAUC,EAAaC,EAAYC,GAGxC,OAFID,GAAYH,EAAiBE,EAAYn9B,UAAWo9B,GACpDC,GAAaJ,EAAiBE,EAAaE,GACxCF,GAdO,GAsBdp+B,EAAiB,SAAU0J,EAAK9I,EAAKN,GAYvC,OAXIM,KAAO8I,EACT3J,OAAOC,eAAe0J,EAAK9I,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZ0J,cAAc,EACdC,UAAU,IAGZF,EAAI9I,GAAON,EAGNoJ,GAGLrC,EAAWtH,OAAOuH,QAAU,SAAUC,GACxC,IAAK,IAAIlI,EAAI,EAAGA,EAAImI,UAAUC,OAAQpI,IAAK,CACzC,IAAIqI,EAASF,UAAUnI,GAEvB,IAAK,IAAIuB,KAAO8G,EACV3H,OAAOkB,UAAUC,eAAe1B,KAAKkI,EAAQ9G,KAC/C2G,EAAO3G,GAAO8G,EAAO9G,IAK3B,OAAO2G,GAUT,SAASmhC,EAAcC,GACrB,OAAOthC,EAAS,GAAIshC,EAAS,CAC3BX,MAAOW,EAAQ57B,KAAO47B,EAAQ37B,MAC9B+6B,OAAQY,EAAQh8B,IAAMg8B,EAAQ/7B,SAWlC,SAASixB,EAAsB93B,GAC7B,IAAI8hC,EAAO,GAKX,IACE,GAAIvB,EAAK,IAAK,CACZuB,EAAO9hC,EAAQ83B,wBACf,IAAI/wB,EAAY26B,EAAU1hC,EAAS,OAC/BkH,EAAaw6B,EAAU1hC,EAAS,QACpC8hC,EAAKl7B,KAAOG,EACZ+6B,EAAK96B,MAAQE,EACb46B,EAAKE,QAAUj7B,EACf+6B,EAAKG,OAAS/6B,OAEd46B,EAAO9hC,EAAQ83B,wBAEjB,MAAOtqB,IAET,IAAIqG,EAAS,CACX7M,KAAM86B,EAAK96B,KACXJ,IAAKk7B,EAAKl7B,IACVK,MAAO66B,EAAKG,MAAQH,EAAK96B,KACzBH,OAAQi7B,EAAKE,OAASF,EAAKl7B,KAIzBi8B,EAA6B,SAArB7iC,EAAQorB,SAAsBsX,EAAe1iC,EAAQ0/B,eAAiB,GAC9Ez4B,EAAQ47B,EAAM57B,OAASjH,EAAQ8iC,aAAejvB,EAAOouB,MAAQpuB,EAAO7M,KACpEH,EAASg8B,EAAMh8B,QAAU7G,EAAQ+iC,cAAgBlvB,EAAOmuB,OAASnuB,EAAOjN,IAExEo8B,EAAiBhjC,EAAQijC,YAAch8B,EACvCi8B,EAAgBljC,EAAQmjC,aAAet8B,EAI3C,GAAIm8B,GAAkBE,EAAe,CACnC,IAAIf,EAAS1C,EAAyBz/B,GACtCgjC,GAAkBd,EAAeC,EAAQ,KACzCe,GAAiBhB,EAAeC,EAAQ,KAExCtuB,EAAO5M,OAAS+7B,EAChBnvB,EAAOhN,QAAUq8B,EAGnB,OAAOP,EAAc9uB,GAGvB,SAASuvB,EAAqCpkC,EAAUqkC,GACtD,IAAIC,EAAgB7hC,UAAUC,OAAS,QAAsBL,IAAjBI,UAAU,IAAmBA,UAAU,GAE/E6+B,EAASC,EAAK,IACdgD,EAA6B,SAApBF,EAAOjY,SAChBoY,EAAe1L,EAAsB94B,GACrCykC,EAAa3L,EAAsBuL,GACnCK,EAAe3D,EAAgB/gC,GAE/BmjC,EAAS1C,EAAyB4D,GAClCM,EAAiBpB,WAAWJ,EAAOwB,eAAgB,IACnDC,EAAkBrB,WAAWJ,EAAOyB,gBAAiB,IAGrDN,GAAiBC,IACnBE,EAAW78B,IAAMkC,KAAKqH,IAAIszB,EAAW78B,IAAK,GAC1C68B,EAAWz8B,KAAO8B,KAAKqH,IAAIszB,EAAWz8B,KAAM,IAE9C,IAAI47B,EAAUD,EAAc,CAC1B/7B,IAAK48B,EAAa58B,IAAM68B,EAAW78B,IAAM+8B,EACzC38B,KAAMw8B,EAAax8B,KAAOy8B,EAAWz8B,KAAO48B,EAC5C38B,MAAOu8B,EAAav8B,MACpBJ,OAAQ28B,EAAa38B,SASvB,GAPA+7B,EAAQiB,UAAY,EACpBjB,EAAQkB,WAAa,GAMhBxD,GAAUiD,EAAQ,CACrB,IAAIM,EAAYtB,WAAWJ,EAAO0B,UAAW,IACzCC,EAAavB,WAAWJ,EAAO2B,WAAY,IAE/ClB,EAAQh8B,KAAO+8B,EAAiBE,EAChCjB,EAAQZ,QAAU2B,EAAiBE,EACnCjB,EAAQ57B,MAAQ48B,EAAkBE,EAClClB,EAAQX,OAAS2B,EAAkBE,EAGnClB,EAAQiB,UAAYA,EACpBjB,EAAQkB,WAAaA,EAOvB,OAJIxD,IAAWgD,EAAgBD,EAAOvf,SAAS4f,GAAgBL,IAAWK,GAA0C,SAA1BA,EAAatY,YACrGwX,EAAUf,EAAce,EAASS,IAG5BT,EAGT,SAASmB,EAA8C/jC,GACrD,IAAIgkC,EAAgBviC,UAAUC,OAAS,QAAsBL,IAAjBI,UAAU,IAAmBA,UAAU,GAE/EuN,EAAOhP,EAAQ0/B,cAAc5P,gBAC7BmU,EAAiBb,EAAqCpjC,EAASgP,GAC/D/H,EAAQ6B,KAAKqH,IAAInB,EAAK8zB,YAAah8B,OAAOo9B,YAAc,GACxDr9B,EAASiC,KAAKqH,IAAInB,EAAK+zB,aAAcj8B,OAAOq9B,aAAe,GAE3Dp9B,EAAai9B,EAAkC,EAAlBtC,EAAU1yB,GACvC9H,EAAc88B,EAA0C,EAA1BtC,EAAU1yB,EAAM,QAE9CrI,EAAS,CACXC,IAAKG,EAAYk9B,EAAer9B,IAAMq9B,EAAeJ,UACrD78B,KAAME,EAAa+8B,EAAej9B,KAAOi9B,EAAeH,WACxD78B,MAAOA,EACPJ,OAAQA,GAGV,OAAO87B,EAAch8B,GAWvB,SAASy9B,EAAQpkC,GACf,IAAIorB,EAAWprB,EAAQorB,SACvB,GAAiB,SAAbA,GAAoC,SAAbA,EACzB,OAAO,EAET,GAAsD,UAAlDqU,EAAyBz/B,EAAS,YACpC,OAAO,EAET,IAAI6K,EAAag1B,EAAc7/B,GAC/B,QAAK6K,GAGEu5B,EAAQv5B,GAWjB,SAASw5B,EAA6BrkC,GAEpC,IAAKA,IAAYA,EAAQ0oB,eAAiB6X,IACxC,OAAOh4B,SAASunB,gBAGlB,IADA,IAAIxnB,EAAKtI,EAAQ0oB,cACVpgB,GAAoD,SAA9Cm3B,EAAyBn3B,EAAI,cACxCA,EAAKA,EAAGogB,cAEV,OAAOpgB,GAAMC,SAASunB,gBAcxB,SAASwU,EAAc7I,EAAQ3C,EAAWyL,EAAS9J,GACjD,IAAI6I,EAAgB7hC,UAAUC,OAAS,QAAsBL,IAAjBI,UAAU,IAAmBA,UAAU,GAI/E+iC,EAAa,CAAE59B,IAAK,EAAGI,KAAM,GAC7B05B,EAAe4C,EAAgBe,EAA6B5I,GAAUoF,EAAuBpF,EAAQ3C,GAGzG,GAA0B,aAAtB2B,EACF+J,EAAaT,EAA8CrD,EAAc4C,OACpE,CAEL,IAAImB,OAAiB,EACK,iBAAtBhK,EAE8B,UADhCgK,EAAiB1E,EAAgBF,EAAc/G,KAC5B1N,WACjBqZ,EAAiBhJ,EAAOiE,cAAc5P,iBAGxC2U,EAD+B,WAAtBhK,EACQgB,EAAOiE,cAAc5P,gBAErB2K,EAGnB,IAAImI,EAAUQ,EAAqCqB,EAAgB/D,EAAc4C,GAGjF,GAAgC,SAA5BmB,EAAerZ,UAAwBgZ,EAAQ1D,GAWjD8D,EAAa5B,MAXmD,CAChE,IAAI8B,EAAkBhC,EAAejH,EAAOiE,eACxC74B,EAAS69B,EAAgB79B,OACzBI,EAAQy9B,EAAgBz9B,MAE5Bu9B,EAAW59B,KAAOg8B,EAAQh8B,IAAMg8B,EAAQiB,UACxCW,EAAWxC,OAASn7B,EAAS+7B,EAAQh8B,IACrC49B,EAAWx9B,MAAQ47B,EAAQ57B,KAAO47B,EAAQkB,WAC1CU,EAAWvC,MAAQh7B,EAAQ27B,EAAQ57B,MASvC,IAAI29B,EAAqC,iBADzCJ,EAAUA,GAAW,GAOrB,OALAC,EAAWx9B,MAAQ29B,EAAkBJ,EAAUA,EAAQv9B,MAAQ,EAC/Dw9B,EAAW59B,KAAO+9B,EAAkBJ,EAAUA,EAAQ39B,KAAO,EAC7D49B,EAAWvC,OAAS0C,EAAkBJ,EAAUA,EAAQtC,OAAS,EACjEuC,EAAWxC,QAAU2C,EAAkBJ,EAAUA,EAAQvC,QAAU,EAE5DwC,EAGT,SAASI,EAAQhK,GAIf,OAHYA,EAAK3zB,MACJ2zB,EAAK/zB,OAcpB,SAASg+B,EAAqBpM,EAAWqM,EAASrJ,EAAQ3C,EAAW2B,GACnE,IAAI8J,EAAU9iC,UAAUC,OAAS,QAAsBL,IAAjBI,UAAU,GAAmBA,UAAU,GAAK,EAElF,IAAmC,IAA/Bg3B,EAAU1f,QAAQ,QACpB,OAAO0f,EAGT,IAAI+L,EAAaF,EAAc7I,EAAQ3C,EAAWyL,EAAS9J,GAEvDsK,EAAQ,CACVn+B,IAAK,CACHK,MAAOu9B,EAAWv9B,MAClBJ,OAAQi+B,EAAQl+B,IAAM49B,EAAW59B,KAEnCq7B,MAAO,CACLh7B,MAAOu9B,EAAWvC,MAAQ6C,EAAQ7C,MAClCp7B,OAAQ29B,EAAW39B,QAErBm7B,OAAQ,CACN/6B,MAAOu9B,EAAWv9B,MAClBJ,OAAQ29B,EAAWxC,OAAS8C,EAAQ9C,QAEtCh7B,KAAM,CACJC,MAAO69B,EAAQ99B,KAAOw9B,EAAWx9B,KACjCH,OAAQ29B,EAAW39B,SAInBm+B,EAAchrC,OAAO8S,KAAKi4B,GAAOhoC,KAAI,SAAUlC,GACjD,OAAOyG,EAAS,CACdzG,IAAKA,GACJkqC,EAAMlqC,GAAM,CACboqC,KAAML,EAAQG,EAAMlqC,SAErB4H,MAAK,SAAUC,EAAGC,GACnB,OAAOA,EAAEsiC,KAAOviC,EAAEuiC,QAGhBC,EAAgBF,EAAYx2B,QAAO,SAAU22B,GAC/C,IAAIl+B,EAAQk+B,EAAMl+B,MACdJ,EAASs+B,EAAMt+B,OACnB,OAAOI,GAASw0B,EAAOqH,aAAej8B,GAAU40B,EAAOsH,gBAGrDqC,EAAoBF,EAAcxjC,OAAS,EAAIwjC,EAAc,GAAGrqC,IAAMmqC,EAAY,GAAGnqC,IAErFwqC,EAAY5M,EAAUpvB,MAAM,KAAK,GAErC,OAAO+7B,GAAqBC,EAAY,IAAMA,EAAY,IAa5D,SAASC,EAAoBpvB,EAAOulB,EAAQ3C,GAC1C,IAAIwK,EAAgB7hC,UAAUC,OAAS,QAAsBL,IAAjBI,UAAU,GAAmBA,UAAU,GAAK,KAEpF8jC,EAAqBjC,EAAgBe,EAA6B5I,GAAUoF,EAAuBpF,EAAQ3C,GAC/G,OAAOsK,EAAqCtK,EAAWyM,EAAoBjC,GAU7E,SAASkC,EAAcxlC,GACrB,IACImiC,EADSniC,EAAQ0/B,cAAcC,YACfC,iBAAiB5/B,GACjCwJ,EAAI+4B,WAAWJ,EAAO0B,WAAa,GAAKtB,WAAWJ,EAAOsD,cAAgB,GAC1Eh8B,EAAI84B,WAAWJ,EAAO2B,YAAc,GAAKvB,WAAWJ,EAAOuD,aAAe,GAK9E,MAJa,CACXz+B,MAAOjH,EAAQijC,YAAcx5B,EAC7B5C,OAAQ7G,EAAQmjC,aAAe35B,GAYnC,SAASm8B,EAAqBlN,GAC5B,IAAIrG,EAAO,CAAEprB,KAAM,QAASi7B,MAAO,OAAQD,OAAQ,MAAOp7B,IAAK,UAC/D,OAAO6xB,EAAUr2B,QAAQ,0BAA0B,SAAUwjC,GAC3D,OAAOxT,EAAKwT,MAchB,SAASC,EAAiBpK,EAAQqK,EAAkBrN,GAClDA,EAAYA,EAAUpvB,MAAM,KAAK,GAGjC,IAAI08B,EAAaP,EAAc/J,GAG3BuK,EAAgB,CAClB/+B,MAAO8+B,EAAW9+B,MAClBJ,OAAQk/B,EAAWl/B,QAIjBo/B,GAAoD,IAA1C,CAAC,QAAS,QAAQltB,QAAQ0f,GACpCyN,EAAWD,EAAU,MAAQ,OAC7BE,EAAgBF,EAAU,OAAS,MACnCG,EAAcH,EAAU,SAAW,QACnCI,EAAwBJ,EAAqB,QAAX,SAStC,OAPAD,EAAcE,GAAYJ,EAAiBI,GAAYJ,EAAiBM,GAAe,EAAIL,EAAWK,GAAe,EAEnHJ,EAAcG,GADZ1N,IAAc0N,EACeL,EAAiBK,GAAiBJ,EAAWM,GAE7CP,EAAiBH,EAAqBQ,IAGhEH,EAYT,SAASjlC,EAAKulC,EAAKxyB,GAEjB,OAAIhX,MAAM5B,UAAU6F,KACXulC,EAAIvlC,KAAK+S,GAIXwyB,EAAI93B,OAAOsF,GAAO,GAqC3B,SAASyyB,EAAahM,EAAW3+B,EAAM4qC,GAoBrC,YAnB8BnlC,IAATmlC,EAAqBjM,EAAYA,EAAU55B,MAAM,EA1BxE,SAAmB2lC,EAAKv7B,EAAMxQ,GAE5B,GAAIuC,MAAM5B,UAAUurC,UAClB,OAAOH,EAAIG,WAAU,SAAUC,GAC7B,OAAOA,EAAI37B,KAAUxQ,KAKzB,IAAIgP,EAAQxI,EAAKulC,GAAK,SAAU3iC,GAC9B,OAAOA,EAAIoH,KAAUxQ,KAEvB,OAAO+rC,EAAIvtB,QAAQxP,GAcsDk9B,CAAUlM,EAAW,OAAQiM,KAEvFrjC,SAAQ,SAAU4+B,GAC3BA,EAAmB,UAErB7d,QAAQC,KAAK,yDAEf,IAAIyY,EAAKmF,EAAmB,UAAKA,EAASnF,GACtCmF,EAAS4E,SAAWzgB,EAAW0W,KAIjChhC,EAAKgnC,QAAQnH,OAASkH,EAAc/mC,EAAKgnC,QAAQnH,QACjD7/B,EAAKgnC,QAAQ9J,UAAY6J,EAAc/mC,EAAKgnC,QAAQ9J,WAEpDl9B,EAAOghC,EAAGhhC,EAAMmmC,OAIbnmC,EAUT,SAASmV,IAEP,IAAIjV,KAAKoa,MAAM0wB,YAAf,CAIA,IAAIhrC,EAAO,CACTm9B,SAAUj9B,KACVqmC,OAAQ,GACR0E,YAAa,GACbzqC,WAAY,GACZ0qC,SAAS,EACTlE,QAAS,IAIXhnC,EAAKgnC,QAAQ9J,UAAYwM,EAAoBxpC,KAAKoa,MAAOpa,KAAK2/B,OAAQ3/B,KAAKg9B,UAAWh9B,KAAKY,QAAQqqC,eAKnGnrC,EAAK68B,UAAYoM,EAAqB/oC,KAAKY,QAAQ+7B,UAAW78B,EAAKgnC,QAAQ9J,UAAWh9B,KAAK2/B,OAAQ3/B,KAAKg9B,UAAWh9B,KAAKY,QAAQ69B,UAAUyM,KAAKvM,kBAAmB3+B,KAAKY,QAAQ69B,UAAUyM,KAAKzC,SAG9L3oC,EAAKqrC,kBAAoBrrC,EAAK68B,UAE9B78B,EAAKmrC,cAAgBjrC,KAAKY,QAAQqqC,cAGlCnrC,EAAKgnC,QAAQnH,OAASoK,EAAiB/pC,KAAK2/B,OAAQ7/B,EAAKgnC,QAAQ9J,UAAWl9B,EAAK68B,WAEjF78B,EAAKgnC,QAAQnH,OAAOxzB,SAAWnM,KAAKY,QAAQqqC,cAAgB,QAAU,WAGtEnrC,EAAO2qC,EAAazqC,KAAKy+B,UAAW3+B,GAI/BE,KAAKoa,MAAMgxB,UAIdprC,KAAKY,QAAQyqC,SAASvrC,IAHtBE,KAAKoa,MAAMgxB,WAAY,EACvBprC,KAAKY,QAAQ0qC,SAASxrC,KAY1B,SAASyrC,EAAkB9M,EAAW+M,GACpC,OAAO/M,EAAUhlB,MAAK,SAAUqlB,GAC9B,IAAI/gC,EAAO+gC,EAAK/gC,KAEhB,OADc+gC,EAAK+L,SACD9sC,IAASytC,KAW/B,SAASC,EAAyBtsC,GAIhC,IAHA,IAAIusC,EAAW,EAAC,EAAO,KAAM,SAAU,MAAO,KAC1CC,EAAYxsC,EAASiR,OAAO,GAAGC,cAAgBlR,EAAS0F,MAAM,GAEzDrH,EAAI,EAAGA,EAAIkuC,EAAS9lC,OAAQpI,IAAK,CACxC,IAAIsQ,EAAS49B,EAASluC,GAClBouC,EAAU99B,EAAS,GAAKA,EAAS69B,EAAYxsC,EACjD,QAA4C,IAAjCsN,SAAS6a,KAAKpY,MAAM08B,GAC7B,OAAOA,EAGX,OAAO,KAQT,SAAS3M,IAsBP,OArBAj/B,KAAKoa,MAAM0wB,aAAc,EAGrBS,EAAkBvrC,KAAKy+B,UAAW,gBACpCz+B,KAAK2/B,OAAOkM,gBAAgB,eAC5B7rC,KAAK2/B,OAAOzwB,MAAM/C,SAAW,GAC7BnM,KAAK2/B,OAAOzwB,MAAMpE,IAAM,GACxB9K,KAAK2/B,OAAOzwB,MAAMhE,KAAO,GACzBlL,KAAK2/B,OAAOzwB,MAAMi3B,MAAQ,GAC1BnmC,KAAK2/B,OAAOzwB,MAAMg3B,OAAS,GAC3BlmC,KAAK2/B,OAAOzwB,MAAM48B,WAAa,GAC/B9rC,KAAK2/B,OAAOzwB,MAAMu8B,EAAyB,cAAgB,IAG7DzrC,KAAK+rC,wBAID/rC,KAAKY,QAAQs+B,iBACfl/B,KAAK2/B,OAAO5wB,WAAWC,YAAYhP,KAAK2/B,QAEnC3/B,KAQT,SAASgsC,EAAU9nC,GACjB,IAAI0/B,EAAgB1/B,EAAQ0/B,cAC5B,OAAOA,EAAgBA,EAAcC,YAAc74B,OAoBrD,SAASihC,EAAoBjP,EAAWp8B,EAASwZ,EAAO8xB,GAEtD9xB,EAAM8xB,YAAcA,EACpBF,EAAUhP,GAAW1yB,iBAAiB,SAAU8P,EAAM8xB,YAAa,CAAEC,SAAS,IAG9E,IAAIC,EAAgBnI,EAAgBjH,GAKpC,OA5BF,SAASqP,EAAsBzE,EAAchhB,EAAOhS,EAAU03B,GAC5D,IAAIC,EAAmC,SAA1B3E,EAAatY,SACtB5pB,EAAS6mC,EAAS3E,EAAahE,cAAcC,YAAc+D,EAC/DliC,EAAO4E,iBAAiBsc,EAAOhS,EAAU,CAAEu3B,SAAS,IAE/CI,GACHF,EAAsBpI,EAAgBv+B,EAAOqJ,YAAa6X,EAAOhS,EAAU03B,GAE7EA,EAAc5lC,KAAKhB,GAgBnB2mC,CAAsBD,EAAe,SAAUhyB,EAAM8xB,YAAa9xB,EAAMkyB,eACxElyB,EAAMgyB,cAAgBA,EACtBhyB,EAAMoyB,eAAgB,EAEfpyB,EAST,SAASqyB,IACFzsC,KAAKoa,MAAMoyB,gBACdxsC,KAAKoa,MAAQ6xB,EAAoBjsC,KAAKg9B,UAAWh9B,KAAKY,QAASZ,KAAKoa,MAAOpa,KAAK0sC,iBAkCpF,SAASX,IAxBT,IAA8B/O,EAAW5iB,EAyBnCpa,KAAKoa,MAAMoyB,gBACb59B,qBAAqB5O,KAAK0sC,gBAC1B1sC,KAAKoa,OA3BqB4iB,EA2BQh9B,KAAKg9B,UA3BF5iB,EA2Bapa,KAAKoa,MAzBzD4xB,EAAUhP,GAAW7nB,oBAAoB,SAAUiF,EAAM8xB,aAGzD9xB,EAAMkyB,cAAcjlC,SAAQ,SAAU3B,GACpCA,EAAOyP,oBAAoB,SAAUiF,EAAM8xB,gBAI7C9xB,EAAM8xB,YAAc,KACpB9xB,EAAMkyB,cAAgB,GACtBlyB,EAAMgyB,cAAgB,KACtBhyB,EAAMoyB,eAAgB,EACfpyB,IAwBT,SAASuyB,EAAU1tC,GACjB,MAAa,KAANA,IAAa2tC,MAAMnG,WAAWxnC,KAAO4tC,SAAS5tC,GAWvD,SAAS6tC,EAAU5oC,EAASmiC,GAC1BnoC,OAAO8S,KAAKq1B,GAAQh/B,SAAQ,SAAU4H,GACpC,IAAI89B,EAAO,IAEkE,IAAzE,CAAC,QAAS,SAAU,MAAO,QAAS,SAAU,QAAQ9vB,QAAQhO,IAAgB09B,EAAUtG,EAAOp3B,MACjG89B,EAAO,MAET7oC,EAAQgL,MAAMD,GAAQo3B,EAAOp3B,GAAQ89B,KAgIzC,IAAIC,EAAY7J,GAAa,WAAWzkB,KAAK4kB,UAAUC,WA8GvD,SAAS0J,EAAmBxO,EAAWyO,EAAgBC,GACrD,IAAIC,EAAanoC,EAAKw5B,GAAW,SAAUK,GAEzC,OADWA,EAAK/gC,OACAmvC,KAGdG,IAAeD,GAAc3O,EAAUhlB,MAAK,SAAUwsB,GACxD,OAAOA,EAASloC,OAASovC,GAAiBlH,EAAS4E,SAAW5E,EAASf,MAAQkI,EAAWlI,SAG5F,IAAKmI,EAAY,CACf,IAAIC,EAAc,IAAMJ,EAAiB,IACrCK,EAAY,IAAMJ,EAAgB,IACtC/kB,QAAQC,KAAKklB,EAAY,4BAA8BD,EAAc,4DAA8DA,EAAc,KAEnJ,OAAOD,EAoIT,IAAIG,EAAa,CAAC,aAAc,OAAQ,WAAY,YAAa,MAAO,UAAW,cAAe,QAAS,YAAa,aAAc,SAAU,eAAgB,WAAY,OAAQ,cAGhLC,GAAkBD,EAAW3oC,MAAM,GAYvC,SAAS6oC,GAAU/Q,GACjB,IAAIgR,EAAUhoC,UAAUC,OAAS,QAAsBL,IAAjBI,UAAU,IAAmBA,UAAU,GAEzEqX,EAAQywB,GAAgBxwB,QAAQ0f,GAChC6N,EAAMiD,GAAgB5oC,MAAMmY,EAAQ,GAAGtM,OAAO+8B,GAAgB5oC,MAAM,EAAGmY,IAC3E,OAAO2wB,EAAUnD,EAAIoD,UAAYpD,EAGnC,IAAIqD,GACI,OADJA,GAES,YAFTA,GAGgB,mBAiMpB,SAASC,GAAYjjC,EAAQq/B,EAAeF,EAAkB+D,GAC5D,IAAIjH,EAAU,CAAC,EAAG,GAKdkH,GAA0D,IAA9C,CAAC,QAAS,QAAQ/wB,QAAQ8wB,GAItCE,EAAYpjC,EAAO0C,MAAM,WAAWtM,KAAI,SAAUitC,GACpD,OAAOA,EAAK56B,UAKV66B,EAAUF,EAAUhxB,QAAQhY,EAAKgpC,GAAW,SAAUC,GACxD,OAAgC,IAAzBA,EAAK55B,OAAO,YAGjB25B,EAAUE,KAAiD,IAArCF,EAAUE,GAASlxB,QAAQ,MACnDmL,QAAQC,KAAK,gFAKf,IAAI+lB,EAAa,cACbC,GAAmB,IAAbF,EAAiB,CAACF,EAAUppC,MAAM,EAAGspC,GAASz9B,OAAO,CAACu9B,EAAUE,GAAS5gC,MAAM6gC,GAAY,KAAM,CAACH,EAAUE,GAAS5gC,MAAM6gC,GAAY,IAAI19B,OAAOu9B,EAAUppC,MAAMspC,EAAU,KAAO,CAACF,GAqC9L,OAlCAI,EAAMA,EAAIptC,KAAI,SAAUqtC,EAAItxB,GAE1B,IAAIstB,GAAyB,IAAVttB,GAAegxB,EAAYA,GAAa,SAAW,QAClEO,GAAoB,EACxB,OAAOD,EAGNlpB,QAAO,SAAUxe,EAAGC,GACnB,MAAwB,KAApBD,EAAEA,EAAEhB,OAAS,KAAwC,IAA3B,CAAC,IAAK,KAAKqX,QAAQpW,IAC/CD,EAAEA,EAAEhB,OAAS,GAAKiB,EAClB0nC,GAAoB,EACb3nC,GACE2nC,GACT3nC,EAAEA,EAAEhB,OAAS,IAAMiB,EACnB0nC,GAAoB,EACb3nC,GAEAA,EAAE8J,OAAO7J,KAEjB,IAEF5F,KAAI,SAAUq2B,GACb,OAxGN,SAAiBA,EAAKgT,EAAaJ,EAAeF,GAEhD,IAAIz8B,EAAQ+pB,EAAI7pB,MAAM,6BAClBhP,GAAS8O,EAAM,GACfw/B,EAAOx/B,EAAM,GAGjB,IAAK9O,EACH,OAAO64B,EAGT,GAA0B,IAAtByV,EAAK9vB,QAAQ,KAAY,CAC3B,IAAI/Y,OAAU,EACd,OAAQ6oC,GACN,IAAK,KACH7oC,EAAUgmC,EACV,MACF,IAAK,IACL,IAAK,KACL,QACEhmC,EAAU8lC,EAId,OADWnD,EAAc3iC,GACbomC,GAAe,IAAM7rC,EAC5B,GAAa,OAATsuC,GAA0B,OAATA,EAAe,CAQzC,OALa,OAATA,EACK//B,KAAKqH,IAAI5H,SAASunB,gBAAgBiT,aAAcj8B,OAAOq9B,aAAe,GAEtEr7B,KAAKqH,IAAI5H,SAASunB,gBAAgBgT,YAAah8B,OAAOo9B,YAAc,IAE/D,IAAM3pC,EAIpB,OAAOA,EAmEE+vC,CAAQlX,EAAKgT,EAAaJ,EAAeF,UAKhD3iC,SAAQ,SAAUinC,EAAItxB,GACxBsxB,EAAGjnC,SAAQ,SAAU6mC,EAAMO,GACrB9B,EAAUuB,KACZpH,EAAQ9pB,IAAUkxB,GAA2B,MAAnBI,EAAGG,EAAS,IAAc,EAAI,UAIvD3H,EA2OT,IAkWI4H,GAAW,CAKb/R,UAAW,SAMXsO,eAAe,EAMfuB,eAAe,EAOftN,iBAAiB,EAQjBoM,SAAU,aAUVD,SAAU,aAOV5M,UAnZc,CASdtgB,MAAO,CAEL+mB,MAAO,IAEP2F,SAAS,EAET/J,GA9HJ,SAAehhC,GACb,IAAI68B,EAAY78B,EAAK68B,UACjBoR,EAAgBpR,EAAUpvB,MAAM,KAAK,GACrCohC,EAAiBhS,EAAUpvB,MAAM,KAAK,GAG1C,GAAIohC,EAAgB,CAClB,IAAIC,EAAgB9uC,EAAKgnC,QACrB9J,EAAY4R,EAAc5R,UAC1B2C,EAASiP,EAAcjP,OAEvBkP,GAA2D,IAA9C,CAAC,SAAU,OAAO5xB,QAAQ8wB,GACvCtM,EAAOoN,EAAa,OAAS,MAC7BvE,EAAcuE,EAAa,QAAU,SAErCC,EAAe,CACjBj8B,MAAO1U,EAAe,GAAIsjC,EAAMzE,EAAUyE,IAC1C1zB,IAAK5P,EAAe,GAAIsjC,EAAMzE,EAAUyE,GAAQzE,EAAUsN,GAAe3K,EAAO2K,KAGlFxqC,EAAKgnC,QAAQnH,OAASn6B,EAAS,GAAIm6B,EAAQmP,EAAaH,IAG1D,OAAO7uC,IAgJP+K,OAAQ,CAENq6B,MAAO,IAEP2F,SAAS,EAET/J,GA7RJ,SAAgBhhC,EAAMg/B,GACpB,IAAIj0B,EAASi0B,EAAKj0B,OACd8xB,EAAY78B,EAAK68B,UACjBiS,EAAgB9uC,EAAKgnC,QACrBnH,EAASiP,EAAcjP,OACvB3C,EAAY4R,EAAc5R,UAE1B+Q,EAAgBpR,EAAUpvB,MAAM,KAAK,GAErCu5B,OAAU,EAsBd,OApBEA,EADE6F,GAAW9hC,GACH,EAAEA,EAAQ,GAEVijC,GAAYjjC,EAAQ80B,EAAQ3C,EAAW+Q,GAG7B,SAAlBA,GACFpO,EAAO70B,KAAOg8B,EAAQ,GACtBnH,EAAOz0B,MAAQ47B,EAAQ,IACI,UAAlBiH,GACTpO,EAAO70B,KAAOg8B,EAAQ,GACtBnH,EAAOz0B,MAAQ47B,EAAQ,IACI,QAAlBiH,GACTpO,EAAOz0B,MAAQ47B,EAAQ,GACvBnH,EAAO70B,KAAOg8B,EAAQ,IACK,WAAlBiH,IACTpO,EAAOz0B,MAAQ47B,EAAQ,GACvBnH,EAAO70B,KAAOg8B,EAAQ,IAGxBhnC,EAAK6/B,OAASA,EACP7/B,GAkQL+K,OAAQ,GAoBV+zB,gBAAiB,CAEfsG,MAAO,IAEP2F,SAAS,EAET/J,GAlRJ,SAAyBhhC,EAAMc,GAC7B,IAAI+9B,EAAoB/9B,EAAQ+9B,mBAAqB+F,EAAgB5kC,EAAKm9B,SAAS0C,QAK/E7/B,EAAKm9B,SAASD,YAAc2B,IAC9BA,EAAoB+F,EAAgB/F,IAMtC,IAAIoQ,EAAgBtD,EAAyB,aACzCuD,EAAelvC,EAAKm9B,SAAS0C,OAAOzwB,MACpCpE,EAAMkkC,EAAalkC,IACnBI,EAAO8jC,EAAa9jC,KACpB1I,EAAYwsC,EAAaD,GAE7BC,EAAalkC,IAAM,GACnBkkC,EAAa9jC,KAAO,GACpB8jC,EAAaD,GAAiB,GAE9B,IAAIrG,EAAaF,EAAc1oC,EAAKm9B,SAAS0C,OAAQ7/B,EAAKm9B,SAASD,UAAWp8B,EAAQ6nC,QAAS9J,EAAmB7+B,EAAKmrC,eAIvH+D,EAAalkC,IAAMA,EACnBkkC,EAAa9jC,KAAOA,EACpB8jC,EAAaD,GAAiBvsC,EAE9B5B,EAAQ8nC,WAAaA,EAErB,IAAIxD,EAAQtkC,EAAQoF,SAChB25B,EAAS7/B,EAAKgnC,QAAQnH,OAEtB3nB,EAAQ,CACVi3B,QAAS,SAAiBtS,GACxB,IAAIl+B,EAAQkhC,EAAOhD,GAInB,OAHIgD,EAAOhD,GAAa+L,EAAW/L,KAAe/7B,EAAQsuC,sBACxDzwC,EAAQuO,KAAKqH,IAAIsrB,EAAOhD,GAAY+L,EAAW/L,KAE1Cx+B,EAAe,GAAIw+B,EAAWl+B,IAEvC0wC,UAAW,SAAmBxS,GAC5B,IAAIyN,EAAyB,UAAdzN,EAAwB,OAAS,MAC5Cl+B,EAAQkhC,EAAOyK,GAInB,OAHIzK,EAAOhD,GAAa+L,EAAW/L,KAAe/7B,EAAQsuC,sBACxDzwC,EAAQuO,KAAKoiC,IAAIzP,EAAOyK,GAAW1B,EAAW/L,IAA4B,UAAdA,EAAwBgD,EAAOx0B,MAAQw0B,EAAO50B,UAErG5M,EAAe,GAAIisC,EAAU3rC,KAWxC,OAPAymC,EAAM79B,SAAQ,SAAUs1B,GACtB,IAAI8E,GAA+C,IAAxC,CAAC,OAAQ,OAAOxkB,QAAQ0f,GAAoB,UAAY,YACnEgD,EAASn6B,EAAS,GAAIm6B,EAAQ3nB,EAAMypB,GAAM9E,OAG5C78B,EAAKgnC,QAAQnH,OAASA,EAEf7/B,GA2NLkG,SAAU,CAAC,OAAQ,QAAS,MAAO,UAOnCyiC,QAAS,EAMT9J,kBAAmB,gBAYrB0Q,aAAc,CAEZnK,MAAO,IAEP2F,SAAS,EAET/J,GAlgBJ,SAAsBhhC,GACpB,IAAI8uC,EAAgB9uC,EAAKgnC,QACrBnH,EAASiP,EAAcjP,OACvB3C,EAAY4R,EAAc5R,UAE1BL,EAAY78B,EAAK68B,UAAUpvB,MAAM,KAAK,GACtCiS,EAAQxS,KAAKwS,MACbqvB,GAAuD,IAA1C,CAAC,MAAO,UAAU5xB,QAAQ0f,GACvC8E,EAAOoN,EAAa,QAAU,SAC9BS,EAAST,EAAa,OAAS,MAC/BvE,EAAcuE,EAAa,QAAU,SASzC,OAPIlP,EAAO8B,GAAQjiB,EAAMwd,EAAUsS,MACjCxvC,EAAKgnC,QAAQnH,OAAO2P,GAAU9vB,EAAMwd,EAAUsS,IAAW3P,EAAO2K,IAE9D3K,EAAO2P,GAAU9vB,EAAMwd,EAAUyE,MACnC3hC,EAAKgnC,QAAQnH,OAAO2P,GAAU9vB,EAAMwd,EAAUyE,KAGzC3hC,IA4fP4+B,MAAO,CAELwG,MAAO,IAEP2F,SAAS,EAET/J,GApxBJ,SAAehhC,EAAMc,GACnB,IAAI2uC,EAGJ,IAAKtC,EAAmBntC,EAAKm9B,SAASwB,UAAW,QAAS,gBACxD,OAAO3+B,EAGT,IAAI0vC,EAAe5uC,EAAQsD,QAG3B,GAA4B,iBAAjBsrC,GAIT,KAHAA,EAAe1vC,EAAKm9B,SAAS0C,OAAOpY,cAAcioB,IAIhD,OAAO1vC,OAKT,IAAKA,EAAKm9B,SAAS0C,OAAO3X,SAASwnB,GAEjC,OADApnB,QAAQC,KAAK,iEACNvoB,EAIX,IAAI68B,EAAY78B,EAAK68B,UAAUpvB,MAAM,KAAK,GACtCqhC,EAAgB9uC,EAAKgnC,QACrBnH,EAASiP,EAAcjP,OACvB3C,EAAY4R,EAAc5R,UAE1B6R,GAAuD,IAA1C,CAAC,OAAQ,SAAS5xB,QAAQ0f,GAEvCzM,EAAM2e,EAAa,SAAW,QAC9BY,EAAkBZ,EAAa,MAAQ,OACvCpN,EAAOgO,EAAgBz8B,cACvB08B,EAAUb,EAAa,OAAS,MAChCS,EAAST,EAAa,SAAW,QACjCc,EAAmBjG,EAAc8F,GAActf,GAQ/C8M,EAAUsS,GAAUK,EAAmBhQ,EAAO8B,KAChD3hC,EAAKgnC,QAAQnH,OAAO8B,IAAS9B,EAAO8B,IAASzE,EAAUsS,GAAUK,IAG/D3S,EAAUyE,GAAQkO,EAAmBhQ,EAAO2P,KAC9CxvC,EAAKgnC,QAAQnH,OAAO8B,IAASzE,EAAUyE,GAAQkO,EAAmBhQ,EAAO2P,IAE3ExvC,EAAKgnC,QAAQnH,OAASkH,EAAc/mC,EAAKgnC,QAAQnH,QAGjD,IAAIiQ,EAAS5S,EAAUyE,GAAQzE,EAAU9M,GAAO,EAAIyf,EAAmB,EAInE/iC,EAAM+2B,EAAyB7jC,EAAKm9B,SAAS0C,QAC7CkQ,EAAmBpJ,WAAW75B,EAAI,SAAW6iC,GAAkB,IAC/DK,EAAmBrJ,WAAW75B,EAAI,SAAW6iC,EAAkB,SAAU,IACzEM,EAAYH,EAAS9vC,EAAKgnC,QAAQnH,OAAO8B,GAAQoO,EAAmBC,EAQxE,OALAC,EAAY/iC,KAAKqH,IAAIrH,KAAKoiC,IAAIzP,EAAOzP,GAAOyf,EAAkBI,GAAY,GAE1EjwC,EAAK0vC,aAAeA,EACpB1vC,EAAKgnC,QAAQpI,OAAmCvgC,EAA1BoxC,EAAsB,GAAwC9N,EAAMz0B,KAAKC,MAAM8iC,IAAa5xC,EAAeoxC,EAAqBG,EAAS,IAAKH,GAE7JzvC,GA8sBLoE,QAAS,aAcXgnC,KAAM,CAEJhG,MAAO,IAEP2F,SAAS,EAET/J,GA5oBJ,SAAchhC,EAAMc,GAElB,GAAI2qC,EAAkBzrC,EAAKm9B,SAASwB,UAAW,SAC7C,OAAO3+B,EAGT,GAAIA,EAAKkrC,SAAWlrC,EAAK68B,YAAc78B,EAAKqrC,kBAE1C,OAAOrrC,EAGT,IAAI4oC,EAAaF,EAAc1oC,EAAKm9B,SAAS0C,OAAQ7/B,EAAKm9B,SAASD,UAAWp8B,EAAQ6nC,QAAS7nC,EAAQ+9B,kBAAmB7+B,EAAKmrC,eAE3HtO,EAAY78B,EAAK68B,UAAUpvB,MAAM,KAAK,GACtCyiC,EAAoBnG,EAAqBlN,GACzC4M,EAAYzpC,EAAK68B,UAAUpvB,MAAM,KAAK,IAAM,GAE5C0iC,EAAY,GAEhB,OAAQrvC,EAAQsvC,UACd,KAAKrC,GACHoC,EAAY,CAACtT,EAAWqT,GACxB,MACF,KAAKnC,GACHoC,EAAYvC,GAAU/Q,GACtB,MACF,KAAKkR,GACHoC,EAAYvC,GAAU/Q,GAAW,GACjC,MACF,QACEsT,EAAYrvC,EAAQsvC,SAyDxB,OAtDAD,EAAU5oC,SAAQ,SAAU8oC,EAAMnzB,GAChC,GAAI2f,IAAcwT,GAAQF,EAAUrqC,SAAWoX,EAAQ,EACrD,OAAOld,EAGT68B,EAAY78B,EAAK68B,UAAUpvB,MAAM,KAAK,GACtCyiC,EAAoBnG,EAAqBlN,GAEzC,IAAIuN,EAAgBpqC,EAAKgnC,QAAQnH,OAC7ByQ,EAAatwC,EAAKgnC,QAAQ9J,UAG1Bxd,EAAQxS,KAAKwS,MACb6wB,EAA4B,SAAd1T,GAAwBnd,EAAM0qB,EAAc/D,OAAS3mB,EAAM4wB,EAAWllC,OAAuB,UAAdyxB,GAAyBnd,EAAM0qB,EAAch/B,MAAQsU,EAAM4wB,EAAWjK,QAAwB,QAAdxJ,GAAuBnd,EAAM0qB,EAAchE,QAAU1mB,EAAM4wB,EAAWtlC,MAAsB,WAAd6xB,GAA0Bnd,EAAM0qB,EAAcp/B,KAAO0U,EAAM4wB,EAAWlK,QAEjUoK,EAAgB9wB,EAAM0qB,EAAch/B,MAAQsU,EAAMkpB,EAAWx9B,MAC7DqlC,EAAiB/wB,EAAM0qB,EAAc/D,OAAS3mB,EAAMkpB,EAAWvC,OAC/DqK,EAAehxB,EAAM0qB,EAAcp/B,KAAO0U,EAAMkpB,EAAW59B,KAC3D2lC,EAAkBjxB,EAAM0qB,EAAchE,QAAU1mB,EAAMkpB,EAAWxC,QAEjEwK,EAAoC,SAAd/T,GAAwB2T,GAA+B,UAAd3T,GAAyB4T,GAAgC,QAAd5T,GAAuB6T,GAA8B,WAAd7T,GAA0B8T,EAG3K5B,GAAuD,IAA1C,CAAC,MAAO,UAAU5xB,QAAQ0f,GAGvCgU,IAA0B/vC,EAAQgwC,iBAAmB/B,GAA4B,UAAdtF,GAAyB+G,GAAiBzB,GAA4B,QAAdtF,GAAuBgH,IAAmB1B,GAA4B,UAAdtF,GAAyBiH,IAAiB3B,GAA4B,QAAdtF,GAAuBkH,GAGlQI,IAA8BjwC,EAAQkwC,0BAA4BjC,GAA4B,UAAdtF,GAAyBgH,GAAkB1B,GAA4B,QAAdtF,GAAuB+G,IAAkBzB,GAA4B,UAAdtF,GAAyBkH,IAAoB5B,GAA4B,QAAdtF,GAAuBiH,GAElRO,EAAmBJ,GAAyBE,GAE5CR,GAAeK,GAAuBK,KAExCjxC,EAAKkrC,SAAU,GAEXqF,GAAeK,KACjB/T,EAAYsT,EAAUjzB,EAAQ,IAG5B+zB,IACFxH,EAvJR,SAA8BA,GAC5B,MAAkB,QAAdA,EACK,QACgB,UAAdA,EACF,MAEFA,EAiJWyH,CAAqBzH,IAGnCzpC,EAAK68B,UAAYA,GAAa4M,EAAY,IAAMA,EAAY,IAI5DzpC,EAAKgnC,QAAQnH,OAASn6B,EAAS,GAAI1F,EAAKgnC,QAAQnH,OAAQoK,EAAiBjqC,EAAKm9B,SAAS0C,OAAQ7/B,EAAKgnC,QAAQ9J,UAAWl9B,EAAK68B,YAE5H78B,EAAO2qC,EAAa3qC,EAAKm9B,SAASwB,UAAW3+B,EAAM,YAGhDA,GA4jBLowC,SAAU,OAKVzH,QAAS,EAOT9J,kBAAmB,WAQnBiS,gBAAgB,EAQhBE,yBAAyB,GAU3BG,MAAO,CAEL/L,MAAO,IAEP2F,SAAS,EAET/J,GArQJ,SAAehhC,GACb,IAAI68B,EAAY78B,EAAK68B,UACjBoR,EAAgBpR,EAAUpvB,MAAM,KAAK,GACrCqhC,EAAgB9uC,EAAKgnC,QACrBnH,EAASiP,EAAcjP,OACvB3C,EAAY4R,EAAc5R,UAE1BmN,GAAwD,IAA9C,CAAC,OAAQ,SAASltB,QAAQ8wB,GAEpCmD,GAA6D,IAA5C,CAAC,MAAO,QAAQj0B,QAAQ8wB,GAO7C,OALApO,EAAOwK,EAAU,OAAS,OAASnN,EAAU+Q,IAAkBmD,EAAiBvR,EAAOwK,EAAU,QAAU,UAAY,GAEvHrqC,EAAK68B,UAAYkN,EAAqBlN,GACtC78B,EAAKgnC,QAAQnH,OAASkH,EAAclH,GAE7B7/B,IAkQP8I,KAAM,CAEJs8B,MAAO,IAEP2F,SAAS,EAET/J,GA9TJ,SAAchhC,GACZ,IAAKmtC,EAAmBntC,EAAKm9B,SAASwB,UAAW,OAAQ,mBACvD,OAAO3+B,EAGT,IAAIkpC,EAAUlpC,EAAKgnC,QAAQ9J,UACvBmU,EAAQlsC,EAAKnF,EAAKm9B,SAASwB,WAAW,SAAUwH,GAClD,MAAyB,oBAAlBA,EAASloC,QACf2qC,WAEH,GAAIM,EAAQ9C,OAASiL,EAAMrmC,KAAOk+B,EAAQ99B,KAAOimC,EAAMhL,OAAS6C,EAAQl+B,IAAMqmC,EAAMjL,QAAU8C,EAAQ7C,MAAQgL,EAAMjmC,KAAM,CAExH,IAAkB,IAAdpL,EAAK8I,KACP,OAAO9I,EAGTA,EAAK8I,MAAO,EACZ9I,EAAKQ,WAAW,uBAAyB,OACpC,CAEL,IAAkB,IAAdR,EAAK8I,KACP,OAAO9I,EAGTA,EAAK8I,MAAO,EACZ9I,EAAKQ,WAAW,wBAAyB,EAG3C,OAAOR,IAoTPsxC,aAAc,CAEZlM,MAAO,IAEP2F,SAAS,EAET/J,GAtgCJ,SAAsBhhC,EAAMc,GAC1B,IAAI8M,EAAI9M,EAAQ8M,EACZC,EAAI/M,EAAQ+M,EACZgyB,EAAS7/B,EAAKgnC,QAAQnH,OAItB0R,EAA8BpsC,EAAKnF,EAAKm9B,SAASwB,WAAW,SAAUwH,GACxE,MAAyB,eAAlBA,EAASloC,QACfuzC,qBACiC/rC,IAAhC8rC,GACFjpB,QAAQC,KAAK,iIAEf,IAAIipB,OAAkD/rC,IAAhC8rC,EAA4CA,EAA8BzwC,EAAQ0wC,gBAEpG1M,EAAeF,EAAgB5kC,EAAKm9B,SAAS0C,QAC7C4R,EAAmBvV,EAAsB4I,GAGzCyB,EAAS,CACXl6B,SAAUwzB,EAAOxzB,UAGf26B,EA9DN,SAA2BhnC,EAAM0xC,GAC/B,IAAI5C,EAAgB9uC,EAAKgnC,QACrBnH,EAASiP,EAAcjP,OACvB3C,EAAY4R,EAAc5R,UAC1B/vB,EAAQD,KAAKC,MACbuS,EAAQxS,KAAKwS,MAEbiyB,EAAU,SAAiBlyB,GAC7B,OAAOA,GAGLmyB,EAAiBzkC,EAAM+vB,EAAU7xB,OACjCwmC,EAAc1kC,EAAM0yB,EAAOx0B,OAE3B0jC,GAA4D,IAA/C,CAAC,OAAQ,SAAS5xB,QAAQnd,EAAK68B,WAC5CiV,GAA+C,IAAjC9xC,EAAK68B,UAAU1f,QAAQ,KAIrC40B,EAAuBL,EAAwB3C,GAAc+C,GAH3CF,EAAiB,GAAMC,EAAc,EAGuC1kC,EAAQuS,EAAjEiyB,EACrCK,EAAqBN,EAAwBvkC,EAAVwkC,EAEvC,MAAO,CACLvmC,KAAM2mC,EANWH,EAAiB,GAAM,GAAKC,EAAc,GAAM,IAMtBC,GAAeJ,EAAc7R,EAAOz0B,KAAO,EAAIy0B,EAAOz0B,MACjGJ,IAAKgnC,EAAkBnS,EAAO70B,KAC9Bo7B,OAAQ4L,EAAkBnS,EAAOuG,QACjCC,MAAO0L,EAAoBlS,EAAOwG,QAoCtB4L,CAAkBjyC,EAAMkL,OAAOgnC,iBAAmB,IAAMhF,GAElEzG,EAAc,WAAN74B,EAAiB,MAAQ,SACjC84B,EAAc,UAAN74B,EAAgB,OAAS,QAKjCskC,EAAmBxG,EAAyB,aAW5CvgC,OAAO,EACPJ,OAAM,EAqBV,GAhBIA,EAJU,WAAVy7B,EAG4B,SAA1B3B,EAAatV,UACRsV,EAAaqC,aAAeH,EAAQZ,QAEpCqL,EAAiBxmC,OAAS+7B,EAAQZ,OAGrCY,EAAQh8B,IAIZI,EAFU,UAAVs7B,EAC4B,SAA1B5B,EAAatV,UACPsV,EAAaoC,YAAcF,EAAQX,OAEnCoL,EAAiBpmC,MAAQ27B,EAAQX,MAGpCW,EAAQ57B,KAEbomC,GAAmBW,EACrB5L,EAAO4L,GAAoB,eAAiB/mC,EAAO,OAASJ,EAAM,SAClEu7B,EAAOE,GAAS,EAChBF,EAAOG,GAAS,EAChBH,EAAOyF,WAAa,gBACf,CAEL,IAAIoG,EAAsB,WAAV3L,GAAsB,EAAI,EACtC4L,EAAuB,UAAV3L,GAAqB,EAAI,EAC1CH,EAAOE,GAASz7B,EAAMonC,EACtB7L,EAAOG,GAASt7B,EAAOinC,EACvB9L,EAAOyF,WAAavF,EAAQ,KAAOC,EAIrC,IAAIlmC,EAAa,CACf,cAAeR,EAAK68B,WAQtB,OAJA78B,EAAKQ,WAAakF,EAAS,GAAIlF,EAAYR,EAAKQ,YAChDR,EAAKumC,OAAS7gC,EAAS,GAAI6gC,EAAQvmC,EAAKumC,QACxCvmC,EAAKirC,YAAcvlC,EAAS,GAAI1F,EAAKgnC,QAAQpI,MAAO5+B,EAAKirC,aAElDjrC,GAo7BLwxC,iBAAiB,EAMjB5jC,EAAG,SAMHC,EAAG,SAkBLykC,WAAY,CAEVlN,MAAO,IAEP2F,SAAS,EAET/J,GAzpCJ,SAAoBhhC,GApBpB,IAAuBoE,EAAS5D,EAoC9B,OAXAwsC,EAAUhtC,EAAKm9B,SAAS0C,OAAQ7/B,EAAKumC,QAzBhBniC,EA6BPpE,EAAKm9B,SAAS0C,OA7BEr/B,EA6BMR,EAAKQ,WA5BzCpC,OAAO8S,KAAK1Q,GAAY+G,SAAQ,SAAU4H,IAE1B,IADF3O,EAAW2O,GAErB/K,EAAQyI,aAAasC,EAAM3O,EAAW2O,IAEtC/K,EAAQ2nC,gBAAgB58B,MA0BxBnP,EAAK0vC,cAAgBtxC,OAAO8S,KAAKlR,EAAKirC,aAAanlC,QACrDknC,EAAUhtC,EAAK0vC,aAAc1vC,EAAKirC,aAG7BjrC,GA2oCLuyC,OA9nCJ,SAA0BrV,EAAW2C,EAAQ/+B,EAAS0xC,EAAiBl4B,GAErE,IAAI4vB,EAAmBR,EAAoBpvB,EAAOulB,EAAQ3C,EAAWp8B,EAAQqqC,eAKzEtO,EAAYoM,EAAqBnoC,EAAQ+7B,UAAWqN,EAAkBrK,EAAQ3C,EAAWp8B,EAAQ69B,UAAUyM,KAAKvM,kBAAmB/9B,EAAQ69B,UAAUyM,KAAKzC,SAQ9J,OANA9I,EAAOhzB,aAAa,cAAegwB,GAInCmQ,EAAUnN,EAAQ,CAAExzB,SAAUvL,EAAQqqC,cAAgB,QAAU,aAEzDrqC,GAsnCL0wC,qBAAiB/rC,KAuGjBgtC,GAAS,WASX,SAASA,EAAOvV,EAAW2C,GACzB,IAAI1J,EAAQj2B,KAERY,EAAU+E,UAAUC,OAAS,QAAsBL,IAAjBI,UAAU,GAAmBA,UAAU,GAAK,GAClFu3B,EAAel9B,KAAMuyC,GAErBvyC,KAAK0sC,eAAiB,WACpB,OAAO/9B,sBAAsBsnB,EAAMhhB,SAIrCjV,KAAKiV,OAASuuB,EAASxjC,KAAKiV,OAAOjW,KAAKgB,OAGxCA,KAAKY,QAAU4E,EAAS,GAAI+sC,EAAO7D,SAAU9tC,GAG7CZ,KAAKoa,MAAQ,CACX0wB,aAAa,EACbM,WAAW,EACXkB,cAAe,IAIjBtsC,KAAKg9B,UAAYA,GAAaA,EAAUI,OAASJ,EAAU,GAAKA,EAChEh9B,KAAK2/B,OAASA,GAAUA,EAAOvC,OAASuC,EAAO,GAAKA,EAGpD3/B,KAAKY,QAAQ69B,UAAY,GACzBvgC,OAAO8S,KAAKxL,EAAS,GAAI+sC,EAAO7D,SAASjQ,UAAW79B,EAAQ69B,YAAYp3B,SAAQ,SAAUtJ,GACxFk4B,EAAMr1B,QAAQ69B,UAAU1gC,GAAQyH,EAAS,GAAI+sC,EAAO7D,SAASjQ,UAAU1gC,IAAS,GAAI6C,EAAQ69B,UAAY79B,EAAQ69B,UAAU1gC,GAAQ,OAIpIiC,KAAKy+B,UAAYvgC,OAAO8S,KAAKhR,KAAKY,QAAQ69B,WAAWx9B,KAAI,SAAUlD,GACjE,OAAOyH,EAAS,CACdzH,KAAMA,GACLk4B,EAAMr1B,QAAQ69B,UAAU1gC,OAG5B4I,MAAK,SAAUC,EAAGC,GACjB,OAAOD,EAAEs+B,MAAQr+B,EAAEq+B,SAOrBllC,KAAKy+B,UAAUp3B,SAAQ,SAAUirC,GAC3BA,EAAgBzH,SAAWzgB,EAAWkoB,EAAgBD,SACxDC,EAAgBD,OAAOpc,EAAM+G,UAAW/G,EAAM0J,OAAQ1J,EAAMr1B,QAAS0xC,EAAiBrc,EAAM7b,UAKhGpa,KAAKiV,SAEL,IAAIu3B,EAAgBxsC,KAAKY,QAAQ4rC,cAC7BA,GAEFxsC,KAAKysC,uBAGPzsC,KAAKoa,MAAMoyB,cAAgBA,EAqD7B,OA9CApQ,EAAYmW,EAAQ,CAAC,CACnBxzC,IAAK,SACLN,MAAO,WACL,OAAOwW,EAAOtX,KAAKqC,QAEpB,CACDjB,IAAK,UACLN,MAAO,WACL,OAAOwgC,EAAQthC,KAAKqC,QAErB,CACDjB,IAAK,uBACLN,MAAO,WACL,OAAOguC,EAAqB9uC,KAAKqC,QAElC,CACDjB,IAAK,wBACLN,MAAO,WACL,OAAOstC,EAAsBpuC,KAAKqC,UA4B/BuyC,EA7HI,GAqJbA,GAAOC,OAA2B,oBAAXxnC,OAAyBA,OAASqR,GAAQo2B,YACjEF,GAAO/E,WAAaA,EACpB+E,GAAO7D,SAAWA,GAEH,S,kCC1iFqDnxC,EAAOD,QAAkG,WAAW,aAAa,OAAO,SAASgB,EAAEI,EAAEgT,GAAG,IAAIzS,EAAEP,EAAEU,UAAUsS,EAAEghC,GAAGzP,aAAa,CAAC0P,OAAO,QAAQC,KAAK,SAASrzC,EAAE,gBAAgB3B,EAAE,WAAWi1C,GAAG,aAAavzB,EAAE,UAAUwzB,GAAG,WAAWh1C,EAAE,QAAQi1C,GAAG,UAAUC,EAAE,UAAUC,GAAG,YAAYtlC,EAAE,SAASulC,GAAG,YAAY,IAAIj1C,EAAE,SAASK,EAAEI,EAAEO,EAAEhB,GAAG,IAAI,IAAIH,EAAEN,EAAEwzB,EAAE/xB,EAAEk0C,UAAUlQ,aAAar8B,EAAE,CAAC,CAACnJ,EAAE,IAAIa,EAAE,GAAGR,EAAE,UAAU,CAACL,EAAE,IAAIa,EAAE,IAAI,CAACb,EAAE,KAAKa,EAAE,GAAGR,EAAE,UAAU,CAACL,EAAE,IAAIa,EAAE,IAAI,CAACb,EAAE,KAAKa,EAAE,GAAGR,EAAE,QAAQ,CAACL,EAAE,IAAIa,EAAE,IAAI,CAACb,EAAE,KAAKa,EAAE,GAAGR,EAAE,OAAO,CAACL,EAAE,IAAIa,EAAE,IAAI,CAACb,EAAE,KAAKa,EAAE,GAAGR,EAAE,SAAS,CAACL,EAAE,IAAIa,EAAE,IAAI,CAACb,EAAE,KAAKK,EAAE,SAAS2hB,EAAE7Y,EAAEhB,OAAOrG,EAAE,EAAEA,EAAEkgB,EAAElgB,GAAG,EAAE,CAAC,IAAI9B,EAAEmJ,EAAErH,GAAG9B,EAAEK,IAAIA,EAAEG,EAAEyT,EAAEpT,GAAG0T,KAAK/S,EAAExB,EAAEK,GAAE,GAAImB,EAAE+S,KAAK1T,EAAEb,EAAEK,GAAE,IAAK,IAAIwhB,EAAEtS,KAAKC,MAAMD,KAAKomC,IAAIt1C,IAAI,GAAGwhB,GAAG7hB,EAAEa,IAAIb,EAAEa,EAAE,CAAC,IAAIghB,GAAG/f,EAAE,IAAI9B,EAAEmJ,EAAErH,EAAE,IAAI/B,EAAEwzB,EAAEvzB,EAAEA,GAAG6I,QAAQ,KAAKgZ,GAAG,OAAO,OAAO5gB,EAAElB,GAAGM,EAAE,EAAEkzB,EAAE2hB,OAAO3hB,EAAE4hB,MAAMtsC,QAAQ,KAAK9I,IAAIyB,EAAE6iC,GAAG,SAASxjC,EAAEI,GAAG,OAAOT,EAAEK,EAAEI,EAAEsB,MAAK,IAAKf,EAAEsuB,KAAK,SAASjvB,EAAEI,GAAG,OAAOT,EAAEK,EAAEI,EAAEsB,OAAO,IAAIlC,EAAE,SAASQ,GAAG,OAAOA,EAAE+0C,GAAG3hC,EAAE4hC,MAAM5hC,KAAKzS,EAAEs0C,MAAM,SAASj1C,GAAG,OAAO0B,KAAK8hC,GAAGhkC,EAAEkC,MAAM1B,IAAIW,EAAEkT,QAAQ,SAAS7T,GAAG,OAAO0B,KAAKutB,KAAKzvB,EAAEkC,MAAM1B,KAApjCI,I,gBCAfnB,EAAOD,QAAqG,WAAW,aAAa,OAAO,SAASoU,EAAEhT,EAAET,GAAG,IAAIgB,EAAEP,EAAEU,UAAUd,EAAEW,EAAEiT,OAAO8gC,EAAE,CAACQ,IAAI,YAAYC,GAAG,SAASC,EAAE,aAAaC,GAAG,eAAeC,IAAI,sBAAsBC,KAAK,6BAA6B51C,EAAEy0C,GAAGoB,QAAQd,EAAE/zC,EAAEiT,OAAO,SAASR,QAAG,IAASA,IAAIA,EAAE,wBAAwB,IAAIhT,EAAEsB,KAAKmzC,UAAUW,QAAQ71C,OAAE,IAASS,EAAE,GAAGA,EAAEO,EAAEyS,EAAEpL,QAAQ,qCAAoC,SAASoL,EAAEhT,EAAEO,GAAG,IAAIX,EAAEW,GAAGA,EAAEoR,cAAc,OAAO3R,GAAGT,EAAEgB,IAAI+zC,EAAE/zC,IAAIhB,EAAEK,GAAGgI,QAAQ,kCAAiC,SAASoL,EAAEhT,EAAET,GAAG,OAAOS,GAAGT,EAAE4G,MAAM,SAAO,OAAOvG,EAAEX,KAAKqC,KAAKf,KAAxnBP,I,8BCAnF,YACA,IAAIq1C,EAA8B,iBAAV13B,GAAsBA,GAAUA,EAAOne,SAAWA,QAAUme,EAErE,Q,2FCDf,SAAS23B,IACPlvC,EAAE,oBAAoBk8B,MAAK,WACzB,IAAMC,EAAQn8B,EAAE9E,MACVga,EAAMC,YAAcgnB,EAAMC,KAAK,aAErCD,EAAM/tB,KAAK8G,M,+cCwDA,KACb,OAAU5E,EACV,QAAWkL,IACX,MAAST,IACT,gBAAiBo0B,IACjB,uBDrDa,WACbC,YAAYF,EAAkB,MCqD9B,iBAAkB/tC,IAClB,cC3Da,SAAekuC,GAAmB,QACzCC,EADyC,yFAC3BD,GAD2B,mBAARE,EAAQ,iCAARA,EAAQ,kBAO/C,OAJAA,EAAOhtC,SAAQ,SAAAnI,GACbhB,OAAA,IAAAA,CAAck2C,EAAMh1C,UAAWF,MAG1Bk1C,GDqDP,kBAAmBziC,IACnB,iBAAkBd,IAClB,eAAgB8P,IAChB,qBAAsBsI,IACtB,qBAAsBzO,IACtB,yBAA0BwP,IAC1B,eAAgBpX,EAChB,wBAAyBgF,IACzB,gBAAiBtU,IACjB,uBAAwBwR,IACxB,sBAAuBiC,IACvB,qBAAsBqF,IACtB,kBAAmBzU,IACnB,oBAAqBtE,IACrB,qBAAsB2lB,IACtB,kBAAmB/H,IACnB,sBAAuBc,IACvB,cAAejM,IACf,cAAeyL,IACf,oBAAqBrJ,IACrB,eAAgBjQ,IAChB,eAAgBqZ,IAChB,UAAatd,IACb,WAAcqZ,IACd,0BAA2BR,IAC3B,oBAAqBlH,IACrB,mBAAoBvD,IACpB,8BAA+BvO,IAC/B,yBAA0B+Y,IAC1B,uBAAwB3V,IACxB,sBAAuB2C,IACvB,2BAA4B+f,IAC5B,+BAAgCxM,IAChC,sBAAuB5K,IACvB,oBAAqB4J,IACrB,wBAAyBxB,IACzB,mBAAoBrK,IACpB,wBAAyBc,IACzB,sBAAuByE,IACvB,4BAA6BpC,IAC7B,0BAA2ByQ,IAC3B,oBAAqBphB,IACrB,mBAAoB0F,KACpB,wBAAyBqL,KACzB,MAAShU,KACT,YAAeojB,KACf,mBAAoB8G,KACpB,iBAAkBla,KAClB,eAAgBjM,KAChB,oBAAqB0wC,KACrB,0BE9Ga,SAAyBpuC,GACtC,GAAqB,IAAjBA,EAAMN,OACR,OAAOtE,IAAIqP,WAAWC,MAAM,2BAA4B,CACtD7H,MAAO7C,EAAM,GACbquC,OAAQruC,EAAM,KAEX,GAAIA,EAAMN,QAAU,EAAG,CAI5B,IAAM2uC,EAASruC,EACZrB,MAAM,EAAGqB,EAAMN,OAAS,GACxBwf,QAAO,SAACqH,EAAM3lB,GAAP,OAAgB2lB,EAAK/b,OAAO,CAAC5J,EAAMxF,IAAIqP,WAAWC,MAAM,iCAAgC,IAC/F/L,MAAM,GAAI,GAEb,OAAOvD,IAAIqP,WAAWC,MAAM,6BAA8B,CACxD7H,MAAO7C,EAAM,GACbquC,SACAC,MAAOtuC,EAAMA,EAAMN,OAAS,KAIhC,OAAOM,GFyFP,oBAAqB8N,KACrB,mBAAoBhE,KACpB,qBAAsB8Z,KACtB,oBAAqB5iB,O,cG7HvB3J,EAAOD,QAAU,SAASC,GAoBzB,OAnBKA,EAAOk3C,kBACXl3C,EAAOm3C,UAAY,aACnBn3C,EAAOo3C,MAAQ,GAEVp3C,EAAO2F,WAAU3F,EAAO2F,SAAW,IACxChF,OAAOC,eAAeZ,EAAQ,SAAU,CACvCa,YAAY,EACZC,IAAK,WACJ,OAAOd,EAAOE,KAGhBS,OAAOC,eAAeZ,EAAQ,KAAM,CACnCa,YAAY,EACZC,IAAK,WACJ,OAAOd,EAAOC,KAGhBD,EAAOk3C,gBAAkB,GAEnBl3C,I,iBCpBR,YAAAA,EAAA,iBAAoC,EAAQ,M,kCCA5C,OACC,WAGA,IAAS8e,IAKRrc,UAH8C,KAA5C,aAAoB,OAGhB,SAASgL,GACf,IAAI4pC,EAAQ,WACZ,IAAe71C,EAAK+F,EAAG6C,EA2BrBktC,EAAUC,EA3BsBC,EAAa,GAAIrkC,EAASqkC,EAAWrkC,OAAQgC,EAASqiC,EAAWriC,OAAQ7N,EAAQkwC,EAAWlwC,MAC5H4H,EAAWzB,EAAOyB,SAClBuoC,EAAiB,GAAIC,EAAa,GAClCC,EAAY,CAAE,eAAgB,EAAG,QAAW,EAAG,cAAe,EAAG,cAAe,EAAE,QAAW,EAAG,UAAW,EAAG,KAAQ,GACtHC,EAAa,qBACbC,EAAc,6BACdC,EAAgB,0EAChBC,EAAa,mBACbC,EAAY,WAGZC,EAAmB,CAAC,MAAO,MAAO,OAAQ,OAAQ,OAAQ,QAAS,SAAU,UAG7EC,EAAQhpC,EAASC,cAAc,SAC/BgpC,EAAWjpC,EAASC,cAAc,MAClCipC,EAAa,CACX,GAAMlpC,EAASC,cAAc,SAC7B,MAAS+oC,EAAO,MAASA,EAAO,MAASA,EACzC,GAAMC,EAAU,GAAMA,EACtB,IAAKjpC,EAASC,cAAc,QAE9BkpC,EAAU,8BACVC,EAAmB,WACnBC,EAAa,GACbl2B,EAAWk2B,EAAWl2B,SACtBm2B,EAAQ,GAERC,EAAavpC,EAASC,cAAc,OACpCupC,EAAU,CACR,SAAY,WACZ,SAAY,WACZ,IAAO,UACP,MAAS,YACT,UAAa,YACb,YAAe,cACf,YAAe,cACf,QAAW,UACX,QAAW,UACX,OAAU,SACV,YAAe,cACf,gBAAmB,mBAErB15B,EAAUvb,MAAMub,SACd,SAASrd,GAAS,OAAOA,aAAkB8B,OAgB/C,SAASH,EAAKgH,GACZ,OAAc,MAAPA,EAAc2sB,OAAO3sB,GAC1BiuC,EAAWl2B,EAASjiB,KAAKkK,KAAS,SAGtC,SAASuiB,EAAW3rB,GAAS,MAAsB,YAAfoC,EAAKpC,GACzC,SAASy3C,EAASruC,GAAW,OAAc,MAAPA,GAAeA,GAAOA,EAAImD,OAC9D,SAASmrC,EAAWtuC,GAAS,OAAc,MAAPA,GAAeA,EAAIinB,UAAYjnB,EAAIuuC,cACvE,SAAS/rB,EAASxiB,GAAW,MAAoB,UAAbhH,EAAKgH,GACzC,SAASwuC,EAAcxuC,GACrB,OAAOwiB,EAASxiB,KAASquC,EAASruC,IAAQ3J,OAAOo4C,eAAezuC,IAAQ3J,OAAOkB,UAGjF,SAASm3C,EAAU1uC,GACjB,IAAIjC,IAAWiC,GAAO,WAAYA,GAAOA,EAAIjC,OAC3C/E,EAAOiE,EAAEjE,KAAKgH,GAEhB,MAAO,YAAchH,IAASq1C,EAASruC,KACrC,SAAWhH,GAAmB,IAAX+E,GACC,iBAAVA,GAAsBA,EAAS,GAAMA,EAAS,KAAMiC,GAOlE,SAAS2uC,EAAUlf,GACjB,OAAOA,EAAIhxB,QAAQ,MAAO,KAClBA,QAAQ,wBAAyB,SACjCA,QAAQ,oBAAqB,SAC7BA,QAAQ,KAAM,KACd0M,cAIV,SAASyjC,EAAQ14C,GACf,OAAOA,KAAQk3C,EACbA,EAAWl3C,GAASk3C,EAAWl3C,GAAQ,IAAIoW,OAAO,UAAYpW,EAAO,WAGzE,SAAS24C,EAAW34C,EAAMU,GACxB,MAAwB,iBAATA,GAAsBy2C,EAAUsB,EAAUz4C,IAAyBU,EAAfA,EAAQ,KAgB7E,SAASyE,EAASgB,GAChB,MAAO,aAAcA,EACnBW,EAAMlH,KAAKuG,EAAQhB,UACnB4B,EAAE7D,IAAIiD,EAAQ2oB,YAAY,SAASrQ,GAAO,GAAqB,GAAjBA,EAAKsS,SAAe,OAAOtS,KAG7E,SAASm6B,EAAExjC,EAAKpO,GACd,IAAIvH,EAAG0yB,EAAM/c,EAAMA,EAAIvN,OAAS,EAChC,IAAKpI,EAAI,EAAGA,EAAI0yB,EAAK1yB,IAAKwC,KAAKxC,GAAK2V,EAAI3V,GACxCwC,KAAK4F,OAASsqB,EACdlwB,KAAK+E,SAAWA,GAAY,GAuG9B,SAASqQ,EAAO1P,EAAQG,EAAQ+wC,GAC9B,IAAK73C,KAAO8G,EACN+wC,IAASP,EAAcxwC,EAAO9G,KAASwd,EAAQ1W,EAAO9G,MACpDs3C,EAAcxwC,EAAO9G,MAAUs3C,EAAc3wC,EAAO3G,MACtD2G,EAAO3G,GAAO,IACZwd,EAAQ1W,EAAO9G,MAAUwd,EAAQ7W,EAAO3G,MAC1C2G,EAAO3G,GAAO,IAChBqW,EAAO1P,EAAO3G,GAAM8G,EAAO9G,GAAM63C,SA7OnCrxC,IA+OSM,EAAO9G,KAAoB2G,EAAO3G,GAAO8G,EAAO9G,IAmC7D,SAAS83C,EAASjvB,EAAO7iB,GACvB,OAAmB,MAAZA,EAAmBD,EAAE8iB,GAAS9iB,EAAE8iB,GAAOlV,OAAO3N,GAavD,SAAS+xC,EAAQz7B,EAASqe,EAAKvqB,EAAKvN,GAClC,OAAOwoB,EAAWsP,GAAOA,EAAI/7B,KAAK0d,EAASlM,EAAKvN,GAAW83B,EAG7D,SAAS/sB,EAAa6P,EAAMze,EAAMU,GACvB,MAATA,EAAgB+d,EAAKqvB,gBAAgB9tC,GAAQye,EAAK7P,aAAa5O,EAAMU,GAIvE,SAAS0E,EAAUqZ,EAAM/d,GACvB,IAAIs4C,EAAQv6B,EAAKrZ,WAAa,GAC1B6zC,EAAQD,QA3SVxxC,IA2SmBwxC,EAAME,QAE3B,QA7SE1xC,IA6SE9G,EAAqB,OAAOu4C,EAAMD,EAAME,QAAUF,EACtDC,EAAOD,EAAME,QAAUx4C,EAAU+d,EAAKrZ,UAAY1E,EAWpD,SAASy4C,EAAiBz4C,GACxB,IACE,OAAOA,EACI,QAATA,GACW,SAATA,IACS,QAATA,EAAkB,MACjBA,EAAQ,IAAMA,GAASA,EACxB,UAAUigB,KAAKjgB,GAASqG,EAAEqyC,UAAU14C,GACpCA,GACAA,EACJ,MAAMiT,GACN,OAAOjT,GAmhBX,SAAS24C,EAAa56B,EAAM66B,GAC1BA,EAAI76B,GACJ,IAAK,IAAIhf,EAAI,EAAG0yB,EAAM1T,EAAKqQ,WAAWjnB,OAAQpI,EAAI0yB,EAAK1yB,IACrD45C,EAAa56B,EAAKqQ,WAAWrvB,GAAI65C,GAuErC,OAn3BAtB,EAAMvoC,QAAU,SAAStJ,EAASa,GAChC,IAAKA,IAAab,GAAgC,IAArBA,EAAQ4qB,SAAgB,OAAO,EAC5D,IAAIwoB,EAAkBpzC,EAAQsJ,SAAWtJ,EAAQqzC,uBAC3BrzC,EAAQszC,oBAAsBtzC,EAAQuzC,kBACtCvzC,EAAQozC,gBAC9B,GAAIA,EAAiB,OAAOA,EAAgB35C,KAAKuG,EAASa,GAE1D,IAAI0I,EAAO85B,EAASrjC,EAAQ6K,WAAY2oC,GAAQnQ,EAIhD,OAHImQ,IAAOnQ,EAASyO,GAAYvnC,YAAYvK,GAC5CuJ,GAASsoC,EAAM4B,IAAIpQ,EAAQxiC,GAAUkY,QAAQ/Y,GAC7CwzC,GAAQ1B,EAAWhnC,YAAY9K,GACxBuJ,GA4BTonC,EAAW,SAASvd,GAAM,OAAOA,EAAIhxB,QAAQ,WAAW,SAASmH,EAAOmqC,GAAM,OAAOA,EAAMA,EAAIvnC,cAAgB,OAQ/GykC,EAAO,SAAS5yB,GAAQ,OAAOxP,EAAO/U,KAAKukB,GAAO,SAASpb,EAAMqI,GAAM,OAAO+S,EAAMjF,QAAQnW,IAASqI,MA0CrG4mC,EAAM8B,SAAW,SAAS3kC,EAAMnV,EAAM+5C,GACpC,IAAI3kC,EAAKyU,EAAOtV,EAyBhB,OAtBI8iC,EAAY12B,KAAKxL,KAAOC,EAAMrO,EAAE2H,EAASC,cAAcyH,OAAO4jC,MAE7D5kC,IACCD,EAAK5M,UAAS4M,EAAOA,EAAK5M,QAAQ+uC,EAAe,mBA9IrD9vC,IA+IIxH,IAAoBA,EAAOo3C,EAAWz2B,KAAKxL,IAASiB,OAAO4jC,IACzDh6C,KAAQ43C,IAAa53C,EAAO,MAElCuU,EAAYqjC,EAAW53C,IACb8wB,UAAY,GAAK3b,EAC3BC,EAAMrO,EAAEk8B,KAAKn8B,EAAMlH,KAAK2U,EAAUua,aAAa,WAC7Cva,EAAUtD,YAAYhP,UAItBq2C,EAAcyB,KAChBlwB,EAAQ9iB,EAAEqO,GACVrO,EAAEk8B,KAAK8W,GAAY,SAAS/4C,EAAKN,GAC3B+2C,EAAiBv4B,QAAQle,IAAQ,EAAG6oB,EAAM7oB,GAAKN,GAC9CmpB,EAAMsZ,KAAKniC,EAAKN,OAIlB0U,GAMT4iC,EAAMY,EAAI,SAASxjC,EAAKpO,GACtB,OAAO,IAAI4xC,EAAExjC,EAAKpO,IAKpBgxC,EAAMiC,IAAM,SAAS94C,GACnB,OAAOA,aAAkB62C,EAAMY,GAOjCZ,EAAM3xC,KAAO,SAASW,EAAUsW,GAC9B,IAAIlI,EAnGW+O,EAqGf,IAAKnd,EAAU,OAAOgxC,EAAMY,IAEvB,GAAuB,iBAAZ5xC,EAKd,GAAmB,MAJnBA,EAAWA,EAASuO,QAIP,IAAa6hC,EAAWz2B,KAAK3Z,GACxCoO,EAAM4iC,EAAM8B,SAAS9yC,EAAUoP,OAAO4jC,GAAI18B,GAAUtW,EAAW,SAG5D,SAnMLQ,IAmMS8V,EAAuB,OAAOvW,EAAEuW,GAASpW,KAAKF,GAElDoO,EAAM4iC,EAAM4B,IAAIlrC,EAAU1H,OAG5B,IAAIqlB,EAAWrlB,GAAW,OAAOD,EAAE2H,GAAUwrC,MAAMlzC,GAEnD,GAAIgxC,EAAMiC,IAAIjzC,GAAW,OAAOA,EAGnC,GAAIwX,EAAQxX,GA1HCmd,EA0HwBnd,EAAdoO,EA1HMT,EAAO/U,KAAKukB,GAAO,SAASpb,GAAO,OAAe,MAARA,UA4HlE,GAAIujB,EAAStlB,GAChBoO,EAAM,CAACpO,GAAWA,EAAW,UAE1B,GAAIowC,EAAWz2B,KAAK3Z,GACvBoO,EAAM4iC,EAAM8B,SAAS9yC,EAASuO,OAAQa,OAAO4jC,GAAI18B,GAAUtW,EAAW,SAGnE,SAtNLQ,IAsNS8V,EAAuB,OAAOvW,EAAEuW,GAASpW,KAAKF,GAElDoO,EAAM4iC,EAAM4B,IAAIlrC,EAAU1H,IAGjC,OAAOgxC,EAAMY,EAAExjC,EAAKpO,KAOtBD,EAAI,SAASC,EAAUsW,GACrB,OAAO06B,EAAM3xC,KAAKW,EAAUsW,KAiB5BjG,OAAS,SAAS1P,GAClB,IAAIkxC,EAAMjyC,EAAOE,EAAMlH,KAAKgI,UAAW,GAMvC,MALqB,kBAAVD,IACTkxC,EAAOlxC,EACPA,EAASf,EAAKwZ,SAEhBxZ,EAAK0C,SAAQ,SAASqyB,GAAMtkB,EAAO1P,EAAQg0B,EAAKkd,MACzClxC,GAMTqwC,EAAM4B,IAAM,SAASzzC,EAASa,GAC5B,IAAImzC,EACAC,EAAyB,KAAfpzC,EAAS,GACnBqzC,GAAcD,GAA0B,KAAfpzC,EAAS,GAClCszC,EAAWF,GAAWC,EAAarzC,EAASF,MAAM,GAAKE,EACvDuzC,EAAWzC,EAAiBn3B,KAAK25B,GACrC,OAAQn0C,EAAQ+f,gBAAkBq0B,GAAYH,GACzCD,EAAQh0C,EAAQ+f,eAAeo0B,IAAa,CAACH,GAAS,GACnC,IAArBh0C,EAAQ4qB,UAAuC,IAArB5qB,EAAQ4qB,UAAuC,KAArB5qB,EAAQ4qB,SAAmB,GAChFjqB,EAAMlH,KACJ26C,IAAaH,GAAWj0C,EAAQq0C,uBAC9BH,EAAal0C,EAAQq0C,uBAAuBF,GAC5Cn0C,EAAQs0C,qBAAqBzzC,GAC7Bb,EAAQ2jB,iBAAiB9iB,KAQjCD,EAAEkjB,SAAWvb,EAASunB,gBAAgBhM,SACpC,SAASuf,EAAQ/qB,GACf,OAAO+qB,IAAW/qB,GAAQ+qB,EAAOvf,SAASxL,IAE5C,SAAS+qB,EAAQ/qB,GACf,KAAOA,IAASA,EAAOA,EAAKzN,aAC1B,GAAIyN,IAAS+qB,EAAQ,OAAO,EAC9B,OAAO,GA2CXziC,EAAEjE,KAAOA,EACTiE,EAAEslB,WAAaA,EACftlB,EAAEoxC,SAAWA,EACbpxC,EAAEyX,QAAUA,EACZzX,EAAEuxC,cAAgBA,EAElBvxC,EAAE2zC,cAAgB,SAAS5wC,GACzB,IAAI9J,EACJ,IAAKA,KAAQ8J,EAAK,OAAO,EACzB,OAAO,GAGT/C,EAAE6nC,UAAY,SAAS+L,GACrB,IAAIv5B,EAAMH,OAAO05B,GAAM73C,SAAc63C,EACrC,OAAc,MAAPA,GAAuB,WAAR73C,IACX,UAARA,GAAoB63C,EAAI9yC,UACxBgnC,MAAMztB,IAAQ0tB,SAAS1tB,KAAQ,GAGpCra,EAAE6zC,QAAU,SAASnX,EAAMtf,EAAO1kB,GAChC,OAAOu3C,EAAW93B,QAAQtf,KAAKukB,EAAOsf,EAAMhkC,IAG9CsH,EAAE8zC,UAAY/D,EACd/vC,EAAEwO,KAAO,SAASgkB,GAChB,OAAc,MAAPA,EAAc,GAAK9C,OAAOp1B,UAAUkU,KAAK3V,KAAK25B,IAIvDxyB,EAAE+zC,KAAO,EACT/zC,EAAEg0C,QAAU,GACZh0C,EAAE48B,KAAO,GACT58B,EAAEylB,KAAO,aAETzlB,EAAE7D,IAAM,SAAS83C,EAAUnkC,GACzB,IAAInW,EAAoBjB,EAAGuB,EAvRZmjB,EAuRJC,EAAS,GACpB,GAAIo0B,EAAUwC,GACZ,IAAKv7C,EAAI,EAAGA,EAAIu7C,EAASnzC,OAAQpI,IAElB,OADbiB,EAAQmW,EAASmkC,EAASv7C,GAAIA,KACX2kB,EAAOzb,KAAKjI,QAGjC,IAAKM,KAAOg6C,EAEG,OADbt6C,EAAQmW,EAASmkC,EAASh6C,GAAMA,KACbojB,EAAOzb,KAAKjI,GAEnC,OAlSeyjB,EAkSAC,GAlSsBvc,OAAS,EAAId,EAAEg8B,GAAGpwB,OAAO9L,MAAM,GAAIsd,GAASA,GAqSnFpd,EAAEk8B,KAAO,SAAS+X,EAAUnkC,GAC1B,IAAIpX,EAAGuB,EACP,GAAIw3C,EAAUwC,IACZ,IAAKv7C,EAAI,EAAGA,EAAIu7C,EAASnzC,OAAQpI,IAC/B,IAAmD,IAA/CoX,EAASjX,KAAKo7C,EAASv7C,GAAIA,EAAGu7C,EAASv7C,IAAe,OAAOu7C,OAEnE,IAAKh6C,KAAOg6C,EACV,IAAyD,IAArDnkC,EAASjX,KAAKo7C,EAASh6C,GAAMA,EAAKg6C,EAASh6C,IAAiB,OAAOg6C,EAG3E,OAAOA,GAGTj0C,EAAEk0C,KAAO,SAASD,EAAUnkC,GAC1B,OAAOlC,EAAO/U,KAAKo7C,EAAUnkC,IAG3B5J,EAAO3I,OAAMyC,EAAEqyC,UAAY90C,KAAKC,OAGpCwC,EAAEk8B,KAAK,gEAAgEzzB,MAAM,MAAM,SAAS/P,EAAGO,GAC7F+3C,EAAY,WAAa/3C,EAAO,KAAQA,EAAKiV,iBAK/ClO,EAAEg8B,GAAK,CACLnhC,YAAao2C,EAAMY,EACnB/wC,OAAQ,EAIRyB,QAAS0tC,EAAW1tC,QACpB+d,OAAQ2vB,EAAW3vB,OACnB1e,KAAMquC,EAAWruC,KACjBC,KAAMouC,EAAWpuC,KACjB+S,OAAQq7B,EAAWr7B,OACnBuD,QAAS83B,EAAW93B,QACpBvM,OAAQ,WACN,IAAIlT,EAAGiB,EAAOkG,EAAO,GACrB,IAAKnH,EAAI,EAAGA,EAAImI,UAAUC,OAAQpI,IAChCiB,EAAQkH,UAAUnI,GAClBmH,EAAKnH,GAAKu4C,EAAMiC,IAAIv5C,GAASA,EAAM+H,UAAY/H,EAEjD,OAAOiS,EAAO9L,MAAMmxC,EAAMiC,IAAIh4C,MAAQA,KAAKwG,UAAYxG,KAAM2E,IAK/D1D,IAAK,SAAS6/B,GACZ,OAAOh8B,EAAEA,EAAE7D,IAAIjB,MAAM,SAASwM,EAAIhP,GAAI,OAAOsjC,EAAGnjC,KAAK6O,EAAIhP,EAAGgP,QAE9D3H,MAAO,WACL,OAAOC,EAAED,EAAMD,MAAM5E,KAAM2F,aAG7BsyC,MAAO,SAASrjC,GAKd,OAFIghC,EAAQl3B,KAAKjS,EAASquB,aAAeruB,EAAS6a,KAAM1S,EAAS9P,GAC5D2H,EAASnC,iBAAiB,oBAAoB,WAAYsK,EAAS9P,MAAM,GACvE9E,MAET3B,IAAK,SAAS8Q,GACZ,YAzbA5J,IAybO4J,EAAoBtK,EAAMlH,KAAKqC,MAAQA,KAAKmP,GAAO,EAAIA,EAAMA,EAAMnP,KAAK4F,SAEjFY,QAAS,WAAY,OAAOxG,KAAK3B,OACjC0F,KAAM,WACJ,OAAO/D,KAAK4F,QAEd3D,OAAQ,WACN,OAAOjC,KAAKghC,MAAK,WACQ,MAAnBhhC,KAAK+O,YACP/O,KAAK+O,WAAWC,YAAYhP,UAGlCghC,KAAM,SAASpsB,GAIb,OAHAmgC,EAAWkE,MAAMt7C,KAAKqC,MAAM,SAASwM,EAAI2C,GACvC,OAAsC,IAA/ByF,EAASjX,KAAK6O,EAAI2C,EAAK3C,MAEzBxM,MAET0S,OAAQ,SAAS3N,GACf,OAAIqlB,EAAWrlB,GAAkB/E,KAAKk5C,IAAIl5C,KAAKk5C,IAAIn0C,IAC5CD,EAAE4N,EAAO/U,KAAKqC,MAAM,SAASkE,GAClC,OAAO6xC,EAAMvoC,QAAQtJ,EAASa,QAGlCsB,IAAK,SAAStB,EAASsW,GACrB,OAAOvW,EAAEgwC,EAAK90C,KAAK0Q,OAAO5L,EAAEC,EAASsW,OAEvCqW,GAAI,SAAS3sB,GACX,OAAO/E,KAAK4F,OAAS,GAAKmwC,EAAMvoC,QAAQxN,KAAK,GAAI+E,IAEnDm0C,IAAK,SAASn0C,GACZ,IAAI6iB,EAAM,GACV,GAAIwC,EAAWrlB,SAzdfQ,IAyd4BR,EAASpH,KACnCqC,KAAKghC,MAAK,SAAS7xB,GACZpK,EAASpH,KAAKqC,KAAKmP,IAAMyY,EAAMlhB,KAAK1G,aAExC,CACH,IAAIm5C,EAA8B,iBAAZp0C,EAAuB/E,KAAK0S,OAAO3N,GACtDwxC,EAAUxxC,IAAaqlB,EAAWrlB,EAAS+B,MAASjC,EAAMlH,KAAKoH,GAAYD,EAAEC,GAChF/E,KAAKqH,SAAQ,SAASmF,GAChB2sC,EAASl8B,QAAQzQ,GAAM,GAAGob,EAAMlhB,KAAK8F,MAG7C,OAAO1H,EAAE8iB,IAEXxhB,IAAK,SAASrB,GACZ,OAAO/E,KAAK0S,QAAO,WACjB,OAAO2X,EAAStlB,GACdD,EAAEkjB,SAAShoB,KAAM+E,GACjBD,EAAE9E,MAAMiF,KAAKF,GAAUhB,WAG7Bq1C,GAAI,SAASjqC,GACX,OAAgB,IAATA,EAAanP,KAAK6E,MAAMsK,GAAOnP,KAAK6E,MAAMsK,GAAOA,EAAM,IAEhEpG,MAAO,WACL,IAAIyD,EAAKxM,KAAK,GACd,OAAOwM,IAAO6d,EAAS7d,GAAMA,EAAK1H,EAAE0H,IAEtC6sC,KAAM,WACJ,IAAI7sC,EAAKxM,KAAKA,KAAK4F,OAAS,GAC5B,OAAO4G,IAAO6d,EAAS7d,GAAMA,EAAK1H,EAAE0H,IAEtCvH,KAAM,SAASF,GACb,IAAYk8B,EAAQjhC,KAWpB,OAVK+E,EACuB,iBAAZA,EACLD,EAAEC,GAAU2N,QAAO,WAC1B,IAAI8J,EAAOxc,KACX,OAAO+0C,EAAWt7B,KAAK9b,KAAKsjC,GAAO,SAASsG,GAC1C,OAAOziC,EAAEkjB,SAASuf,EAAQ/qB,SAGR,GAAfxc,KAAK4F,OAAsBd,EAAEixC,EAAM4B,IAAI33C,KAAK,GAAI+E,IAC3C/E,KAAKiB,KAAI,WAAY,OAAO80C,EAAM4B,IAAI33C,KAAM+E,MATlCD,KAY1Bw0C,QAAS,SAASv0C,EAAUsW,GAC1B,IAAIuM,EAAQ,GAAI2xB,EAAgC,iBAAZx0C,GAAwBD,EAAEC,GAM9D,OALA/E,KAAKghC,MAAK,SAAS5Q,EAAG5T,GACpB,KAAOA,KAAU+8B,EAAaA,EAAWt8B,QAAQT,IAAS,EAAIu5B,EAAMvoC,QAAQgP,EAAMzX,KAChFyX,EAAOA,IAASnB,IAAY86B,EAAW35B,IAASA,EAAKzN,WACnDyN,GAAQoL,EAAM3K,QAAQT,GAAQ,GAAGoL,EAAMlhB,KAAK8V,MAE3C1X,EAAE8iB,IAEX4xB,QAAS,SAASz0C,GAEhB,IADA,IAAI00C,EAAY,GAAI7xB,EAAQ5nB,KACrB4nB,EAAMhiB,OAAS,GACpBgiB,EAAQ9iB,EAAE7D,IAAI2mB,GAAO,SAASpL,GAC5B,IAAKA,EAAOA,EAAKzN,cAAgBonC,EAAW35B,IAASi9B,EAAUx8B,QAAQT,GAAQ,EAE7E,OADAi9B,EAAU/yC,KAAK8V,GACRA,KAGb,OAAOq6B,EAAS4C,EAAW10C,IAE7BwiC,OAAQ,SAASxiC,GACf,OAAO8xC,EAAS/B,EAAK90C,KAAK05C,MAAM,eAAgB30C,IAElD7B,SAAU,SAAS6B,GACjB,OAAO8xC,EAAS72C,KAAKiB,KAAI,WAAY,OAAOiC,EAASlD,SAAU+E,IAEjE40C,SAAU,WACR,OAAO35C,KAAKiB,KAAI,WAAa,OAAOjB,KAAK45C,iBAAmB/0C,EAAMlH,KAAKqC,KAAK6sB,gBAE9EgtB,SAAU,SAAS90C,GACjB,OAAO8xC,EAAS72C,KAAKiB,KAAI,SAASzD,EAAGgP,GACnC,OAAOkG,EAAO/U,KAAKuF,EAASsJ,EAAGuC,aAAa,SAAS4E,GAAQ,OAAOA,IAAQnH,QAC1EzH,IAEN+0C,MAAO,WACL,OAAO95C,KAAKghC,MAAK,WAAYhhC,KAAK6uB,UAAY,OAGhD6qB,MAAO,SAASv6C,GACd,OAAO2F,EAAE7D,IAAIjB,MAAM,SAASwM,GAAK,OAAOA,EAAGrN,OAE7C4b,KAAM,WACJ,OAAO/a,KAAKghC,MAAK,WAxcrB,IAAwB1R,EAClBprB,EAAS61C,EAwca,QAAtB/5C,KAAKkP,MAAM6qC,UAAsB/5C,KAAKkP,MAAM6qC,QAAU,IACQ,QAA1DjW,iBAAiB9jC,KAAM,IAAIg6C,iBAAiB,aAC9Ch6C,KAAKkP,MAAM6qC,SA3cKzqB,EA2coBtvB,KAAKsvB,SAzc1C0lB,EAAe1lB,KAClBprB,EAAUuI,EAASC,cAAc4iB,GACjC7iB,EAAS6a,KAAK7Y,YAAYvK,GAC1B61C,EAAUjW,iBAAiB5/B,EAAS,IAAI81C,iBAAiB,WACzD91C,EAAQ6K,WAAWC,YAAY9K,GACpB,QAAX61C,IAAsBA,EAAU,SAChC/E,EAAe1lB,GAAYyqB,GAEtB/E,EAAe1lB,SAoctB2qB,YAAa,SAASC,GACpB,OAAOl6C,KAAKm6C,OAAOD,GAAYj4C,UAEjCm4C,KAAM,SAASC,GACb,IAAItb,EAAO3U,EAAWiwB,GACtB,GAAIr6C,KAAK,KAAO++B,EACd,IAAI5rB,EAAQrO,EAAEu1C,GAAWh8C,IAAI,GACzBi8C,EAAQnnC,EAAIpE,YAAc/O,KAAK4F,OAAS,EAE9C,OAAO5F,KAAKghC,MAAK,SAAShkB,GACxBlY,EAAE9E,MAAMu6C,QACNxb,EAAOsb,EAAU18C,KAAKqC,KAAMgd,GAC1Bs9B,EAAQnnC,EAAIqnC,WAAU,GAAQrnC,OAItConC,QAAS,SAASF,GAChB,GAAIr6C,KAAK,GAAI,CAEX,IAAIkD,EAEJ,IAHA4B,EAAE9E,KAAK,IAAIm6C,OAAOE,EAAYv1C,EAAEu1C,KAGxBn3C,EAAWm3C,EAAUn3C,YAAY0C,QAAQy0C,EAAYn3C,EAAS6F,QACtEjE,EAAEu1C,GAAWI,OAAOz6C,MAEtB,OAAOA,MAET06C,UAAW,SAASL,GAClB,IAAItb,EAAO3U,EAAWiwB,GACtB,OAAOr6C,KAAKghC,MAAK,SAAShkB,GACxB,IAAIvH,EAAO3Q,EAAE9E,MAAO25C,EAAWlkC,EAAKkkC,WAChCxmC,EAAO4rB,EAAOsb,EAAU18C,KAAKqC,KAAMgd,GAASq9B,EAChDV,EAAS/zC,OAAS+zC,EAASY,QAAQpnC,GAAOsC,EAAKglC,OAAOtnC,OAG1DwnC,OAAQ,WAIN,OAHA36C,KAAKunC,SAASvG,MAAK,WACjBl8B,EAAE9E,MAAMi6C,YAAYn1C,EAAE9E,MAAMkD,eAEvBlD,MAETs6C,MAAO,WACL,OAAOt6C,KAAKiB,KAAI,WAAY,OAAOjB,KAAKw6C,WAAU,OAEpD5xC,KAAM,WACJ,OAAO5I,KAAK4M,IAAI,UAAW,SAE7Bya,OAAQ,SAASuzB,GACf,OAAO56C,KAAKghC,MAAK,WACf,IAAIx0B,EAAK1H,EAAE9E,YAtmBbuF,IAumBIq1C,EAA6C,QAArBpuC,EAAGI,IAAI,WAAuBguC,GAAWpuC,EAAGuO,OAASvO,EAAG5D,WAGtFiyC,KAAM,SAAS91C,GAAW,OAAOD,EAAE9E,KAAK05C,MAAM,2BAA2BhnC,OAAO3N,GAAY,MAC5F6zB,KAAM,SAAS7zB,GAAW,OAAOD,EAAE9E,KAAK05C,MAAM,uBAAuBhnC,OAAO3N,GAAY,MACxFmO,KAAM,SAASA,GACb,OAAO,KAAKvN,UACV3F,KAAKghC,MAAK,SAAS7xB,GACjB,IAAI2rC,EAAa96C,KAAK6uB,UACtB/pB,EAAE9E,MAAM85C,QAAQW,OAAQ3D,EAAQ92C,KAAMkT,EAAM/D,EAAK2rC,OAElD,KAAK96C,KAAOA,KAAK,GAAG6uB,UAAY,MAErCxb,KAAM,SAASA,GACb,OAAO,KAAK1N,UACV3F,KAAKghC,MAAK,SAAS7xB,GACjB,IAAI4rC,EAAUjE,EAAQ92C,KAAMqT,EAAMlE,EAAKnP,KAAKg+B,aAC5Ch+B,KAAKg+B,YAAyB,MAAX+c,EAAkB,GAAK,GAAGA,KAE9C,KAAK/6C,KAAOA,KAAK05C,MAAM,eAAe1xC,KAAK,IAAM,MAEtDk5B,KAAM,SAASnjC,EAAMU,GACnB,IAAIsZ,EACJ,MAAuB,iBAARha,GAAsB,KAAK4H,UAExC3F,KAAKghC,MAAK,SAAS7xB,GACjB,GAAsB,IAAlBnP,KAAK8uB,SACT,GAAIzE,EAAStsB,GAAO,IAAKgB,KAAOhB,EAAM4O,EAAa3M,KAAMjB,EAAKhB,EAAKgB,SAC9D4N,EAAa3M,KAAMjC,EAAM+4C,EAAQ92C,KAAMvB,EAAO0Q,EAAKnP,KAAKk2B,aAAan4B,QAJ3E,KAAKiC,MAA4B,GAApBA,KAAK,GAAG8uB,UAA0D,OAAxC/W,EAAS/X,KAAK,GAAGk2B,aAAan4B,IAAiBga,OA/nBzFxS,GAsoBF47B,WAAY,SAASpjC,GACnB,OAAOiC,KAAKghC,MAAK,WAA8B,IAAlBhhC,KAAK8uB,UAAkB/wB,EAAKwP,MAAM,KAAKlG,SAAQ,SAAShH,GACnFsM,EAAa3M,KAAMK,KAClBL,UAELiP,KAAM,SAASlR,EAAMU,GAEnB,OADAV,EAAOk4C,EAAQl4C,IAASA,EAChB,KAAK4H,UACX3F,KAAKghC,MAAK,SAAS7xB,GACjBnP,KAAKjC,GAAQ+4C,EAAQ92C,KAAMvB,EAAO0Q,EAAKnP,KAAKjC,OAE7CiC,KAAK,IAAMA,KAAK,GAAGjC,IAExBi9C,WAAY,SAASj9C,GAEnB,OADAA,EAAOk4C,EAAQl4C,IAASA,EACjBiC,KAAKghC,MAAK,kBAAmBhhC,KAAKjC,OAE3C+B,KAAM,SAAS/B,EAAMU,GACnB,IAAI6tB,EAAW,QAAUvuB,EAAKuI,QAAQivC,EAAW,OAAOviC,cAEpDlT,EAAQ,KAAK6F,UACf3F,KAAKkhC,KAAK5U,EAAU7tB,GACpBuB,KAAKkhC,KAAK5U,GAEZ,OAAgB,OAATxsB,EAAgBo3C,EAAiBp3C,QA9pBxCyF,GAgqBFmzC,IAAK,SAASj6C,GACZ,OAAI,KAAKkH,WACM,MAATlH,IAAeA,EAAQ,IACpBuB,KAAKghC,MAAK,SAAS7xB,GACxBnP,KAAKvB,MAAQq4C,EAAQ92C,KAAMvB,EAAO0Q,EAAKnP,KAAKvB,WAGvCuB,KAAK,KAAOA,KAAK,GAAGi7C,SACxBn2C,EAAE9E,KAAK,IAAIiF,KAAK,UAAUyN,QAAO,WAAY,OAAO1S,KAAKk7C,YAAYxB,MAAM,SAC3E15C,KAAK,GAAGvB,QAGfoM,OAAQ,SAASswC,GACf,GAAIA,EAAa,OAAOn7C,KAAKghC,MAAK,SAAShkB,GACzC,IAAIikB,EAAQn8B,EAAE9E,MACVo7C,EAAStE,EAAQ92C,KAAMm7C,EAAan+B,EAAOikB,EAAMp2B,UACjDwwC,EAAepa,EAAM2D,eAAe/5B,SACpC5H,EAAQ,CACN6H,IAAMswC,EAAOtwC,IAAOuwC,EAAavwC,IACjCI,KAAMkwC,EAAOlwC,KAAOmwC,EAAanwC,MAGV,UAAzB+1B,EAAMr0B,IAAI,cAAyB3J,EAAgB,SAAI,YAC3Dg+B,EAAMr0B,IAAI3J,MAEZ,IAAKjD,KAAK4F,OAAQ,OAAO,KACzB,GAAI6G,EAASunB,kBAAoBh0B,KAAK,KAAO8E,EAAEkjB,SAASvb,EAASunB,gBAAiBh0B,KAAK,IACrF,MAAO,CAAC8K,IAAK,EAAGI,KAAM,GACxB,IAAIrD,EAAM7H,KAAK,GAAGg8B,wBAClB,MAAO,CACL9wB,KAAMrD,EAAIqD,KAAOF,EAAOswC,YACxBxwC,IAAKjD,EAAIiD,IAAME,EAAOkK,YACtB/J,MAAO6B,KAAKC,MAAMpF,EAAIsD,OACtBJ,OAAQiC,KAAKC,MAAMpF,EAAIkD,UAG3B6B,IAAK,SAASzN,EAAUV,GACtB,GAAIkH,UAAUC,OAAS,EAAG,CACxB,IAAI1B,EAAUlE,KAAK,GACnB,GAAuB,iBAAZb,EAAsB,CAC/B,IAAK+E,EAAS,OACd,OAAOA,EAAQgL,MAAM2lC,EAAS11C,KAAc2kC,iBAAiB5/B,EAAS,IAAI81C,iBAAiB76C,GACtF,GAAIod,EAAQpd,GAAW,CAC5B,IAAK+E,EAAS,OACd,IAAIjB,EAAQ,GACR0jC,EAAgB7C,iBAAiB5/B,EAAS,IAI9C,OAHAY,EAAEk8B,KAAK7hC,GAAU,SAASixB,EAAGnhB,GAC3BhM,EAAMgM,GAAS/K,EAAQgL,MAAM2lC,EAAS5lC,KAAU03B,EAAcqT,iBAAiB/qC,MAE1EhM,GAIX,IAAI2J,EAAM,GACV,GAAsB,UAAlB/L,EAAK1B,GACFV,GAAmB,IAAVA,EAGZmO,EAAM4pC,EAAUr3C,GAAY,IAAMu3C,EAAWv3C,EAAUV,GAFvDuB,KAAKghC,MAAK,WAAYhhC,KAAKkP,MAAMqsC,eAAe/E,EAAUr3C,YAI5D,IAAKJ,KAAOI,EACLA,EAASJ,IAA0B,IAAlBI,EAASJ,GAG7B6N,GAAO4pC,EAAUz3C,GAAO,IAAM23C,EAAW33C,EAAKI,EAASJ,IAAQ,IAF/DiB,KAAKghC,MAAK,WAAYhhC,KAAKkP,MAAMqsC,eAAe/E,EAAUz3C,OAKhE,OAAOiB,KAAKghC,MAAK,WAAYhhC,KAAKkP,MAAMssC,SAAW,IAAM5uC,MAE3DoQ,MAAO,SAAS9Y,GACd,OAAOA,EAAUlE,KAAKid,QAAQnY,EAAEZ,GAAS,IAAMlE,KAAKunC,SAASrkC,WAAW+Z,QAAQjd,KAAK,KAEvF0K,SAAU,SAAS3M,GACjB,QAAKA,GACEg3C,EAAWt7B,KAAK9b,KAAKqC,MAAM,SAASwM,GACzC,OAAOxM,KAAK0e,KAAKvb,EAAUqJ,MAC1BiqC,EAAQ14C,KAEbgjB,SAAU,SAAShjB,GACjB,OAAKA,EACEiC,KAAKghC,MAAK,SAAS7xB,GACxB,GAAM,cAAenP,KAArB,CACA2H,EAAY,GACZ,IAAI8zC,EAAMt4C,EAAUnD,MAAiB82C,EAAQ92C,KAAMjC,EAAMoR,EAAKssC,GACtDluC,MAAM,QAAQlG,SAAQ,SAAS0vC,GAChCjyC,EAAE9E,MAAM0K,SAASqsC,IAAQpvC,EAAUjB,KAAKqwC,KAC5C/2C,MACH2H,EAAU/B,QAAUzC,EAAUnD,KAAMy7C,GAAOA,EAAM,IAAM,IAAM9zC,EAAUK,KAAK,UAR5DhI,MAWpB2K,YAAa,SAAS5M,GACpB,OAAOiC,KAAKghC,MAAK,SAAS7xB,GACxB,GAAM,cAAenP,KAArB,CACA,QA7vBFuF,IA6vBMxH,EAAoB,OAAOoF,EAAUnD,KAAM,IAC/C2H,EAAYxE,EAAUnD,MACtB82C,EAAQ92C,KAAMjC,EAAMoR,EAAKxH,GAAW4F,MAAM,QAAQlG,SAAQ,SAAS0vC,GACjEpvC,EAAYA,EAAUrB,QAAQmwC,EAAQM,GAAQ,QAEhD5zC,EAAUnD,KAAM2H,EAAU2L,aAG9B1I,YAAa,SAAS7M,EAAM29C,GAC1B,OAAK39C,EACEiC,KAAKghC,MAAK,SAAS7xB,GACxB,IAAI8xB,EAAQn8B,EAAE9E,MAAe82C,EAAQ92C,KAAMjC,EAAMoR,EAAKhM,EAAUnD,OAC1DuN,MAAM,QAAQlG,SAAQ,SAAS0vC,SAzwBvCxxC,IA0wBKm2C,GAAsBza,EAAMv2B,SAASqsC,GAAS2E,GAC7Cza,EAAMlgB,SAASg2B,GAAS9V,EAAMt2B,YAAYosC,SAL9B/2C,MASpBiL,UAAW,SAASxM,GAClB,GAAKuB,KAAK4F,OAAV,CACA,IAAI+1C,EAAe,cAAe37C,KAAK,GACvC,YAlxBAuF,IAkxBI9G,EAA4Bk9C,EAAe37C,KAAK,GAAGiL,UAAYjL,KAAK,GAAGkV,YACpElV,KAAKghC,KAAK2a,EACf,WAAY37C,KAAKiL,UAAYxM,GAC7B,WAAYuB,KAAKo3B,SAASp3B,KAAK47C,QAASn9C,OAE5C2M,WAAY,SAAS3M,GACnB,GAAKuB,KAAK4F,OAAV,CACA,IAAIi2C,EAAgB,eAAgB77C,KAAK,GACzC,YA1xBAuF,IA0xBI9G,EAA4Bo9C,EAAgB77C,KAAK,GAAGoL,WAAapL,KAAK,GAAGs7C,YACtEt7C,KAAKghC,KAAK6a,EACf,WAAY77C,KAAKoL,WAAa3M,GAC9B,WAAYuB,KAAKo3B,SAAS34B,EAAOuB,KAAK+7B,aAE1C5vB,SAAU,WACR,GAAKnM,KAAK4F,OAAV,CAEA,IAAI47B,EAAOxhC,KAAK,GAEd4kC,EAAe5kC,KAAK4kC,eAEpB/5B,EAAe7K,KAAK6K,SACpBwwC,EAAe/F,EAAW52B,KAAKkmB,EAAa,GAAGtV,UAAY,CAAExkB,IAAK,EAAGI,KAAM,GAAM05B,EAAa/5B,SAahG,OARAA,EAAOC,KAAQ27B,WAAY3hC,EAAE08B,GAAM50B,IAAI,gBAAmB,EAC1D/B,EAAOK,MAAQu7B,WAAY3hC,EAAE08B,GAAM50B,IAAI,iBAAoB,EAG3DyuC,EAAavwC,KAAQ27B,WAAY3hC,EAAE8/B,EAAa,IAAIh4B,IAAI,sBAAyB,EACjFyuC,EAAanwC,MAAQu7B,WAAY3hC,EAAE8/B,EAAa,IAAIh4B,IAAI,uBAA0B,EAG3E,CACL9B,IAAMD,EAAOC,IAAOuwC,EAAavwC,IACjCI,KAAML,EAAOK,KAAOmwC,EAAanwC,QAGrC05B,aAAc,WACZ,OAAO5kC,KAAKiB,KAAI,WAEd,IADA,IAAIsmC,EAASvnC,KAAK4kC,cAAgBn4B,EAAS6a,KACpCigB,IAAW+N,EAAW52B,KAAK6oB,EAAOjY,WAA0C,UAA7BxqB,EAAEyiC,GAAQ36B,IAAI,aAClE26B,EAASA,EAAO3C,aAClB,OAAO2C,OAMbziC,EAAEg8B,GAAGgb,OAASh3C,EAAEg8B,GAAG7+B,OAGlB,CAAC,QAAS,UAAUoF,SAAQ,SAASg6B,GACpC,IAAI0a,EACF1a,EAAU/6B,QAAQ,KAAK,SAAS1I,GAAI,OAAOA,EAAE,GAAGyS,iBAElDvL,EAAEg8B,GAAGO,GAAa,SAAS5iC,GACzB,IAAIoM,EAAQ2B,EAAKxM,KAAK,GACtB,YA70BAuF,IA60BI9G,EAA4By3C,EAAS1pC,GAAMA,EAAG,QAAUuvC,GAC1D5F,EAAW3pC,GAAMA,EAAGwnB,gBAAgB,SAAW+nB,IAC9ClxC,EAAS7K,KAAK6K,WAAaA,EAAOw2B,GACzBrhC,KAAKghC,MAAK,SAAS7xB,IAC7B3C,EAAK1H,EAAE9E,OACJ4M,IAAIy0B,EAAWyV,EAAQ92C,KAAMvB,EAAO0Q,EAAK3C,EAAG60B,cAr0B9B,CAAE,QAAS,UAAW,SAAU,UAk1BpCh6B,SAAQ,SAAS20C,EAAUC,GAC5C,IAAIC,EAASD,EAAgB,EAE7Bn3C,EAAEg8B,GAAGkb,GAAY,WAEf,IAAIG,EAcA5U,EAdS3f,EAAQ9iB,EAAE7D,IAAI0E,WAAW,SAAS+zB,GACzC,IAAI8Q,EAAM,GAEV,MAAe,UADf2R,EAAUt7C,EAAK64B,KAEbA,EAAIryB,SAAQ,SAASmF,GACnB,YAz2BVjH,IAy2BciH,EAAGsiB,SAA+B0b,EAAI9jC,KAAK8F,GACtC1H,EAAEixC,MAAMiC,IAAIxrC,GAAYg+B,EAAMA,EAAI95B,OAAOlE,EAAGnO,YACrDmsC,EAAMA,EAAI95B,OAAOqlC,EAAM8B,SAASrrC,QAE3Bg+B,GAES,UAAX2R,GAA8B,MAAPziB,EAC5BA,EAAMqc,EAAM8B,SAASne,MAEjB0iB,EAAcp8C,KAAK4F,OAAS,EACxC,OAAIgiB,EAAMhiB,OAAS,EAAU5F,KAEtBA,KAAKghC,MAAK,SAAS5Q,EAAG1qB,GAC3B6hC,EAAS2U,EAASx2C,EAASA,EAAOqJ,WAGlCrJ,EAA0B,GAAjBu2C,EAAqBv2C,EAAOkuB,YACX,GAAjBqoB,EAAqBv2C,EAAOoH,WACX,GAAjBmvC,EAAqBv2C,EACrB,KAET,IAAI22C,EAAmBv3C,EAAEkjB,SAASvb,EAASunB,gBAAiBuT,GAE5D3f,EAAMvgB,SAAQ,SAASmV,GACrB,GAAI4/B,EAAa5/B,EAAOA,EAAKg+B,WAAU,QAClC,IAAKjT,EAAQ,OAAOziC,EAAE0X,GAAMva,SAEjCslC,EAAO16B,aAAa2P,EAAM9W,GACtB22C,GAAkBjF,EAAa56B,GAAM,SAAShQ,GAChD,KAAmB,MAAfA,EAAG8iB,UAAkD,WAA9B9iB,EAAG8iB,SAASjf,eAClC7D,EAAG3L,MAAoB,oBAAZ2L,EAAG3L,MAAgC2L,EAAG2D,KAAI,CACxD,IAAIzK,EAAS8G,EAAGo3B,cAAgBp3B,EAAGo3B,cAAcC,YAAc74B,EAC/DtF,EAAa,KAAE/H,KAAK+H,EAAQ8G,EAAGqiB,sBAWzC/pB,EAAEg8B,GAAGob,EAASF,EAAS,KAAO,UAAUC,EAAgB,SAAW,UAAY,SAAS/oC,GAEtF,OADApO,EAAEoO,GAAM8oC,GAAUh8C,MACXA,SAIX+1C,EAAMY,EAAEv3C,UAAYu3C,EAAEv3C,UAAY0F,EAAEg8B,GAGpCiV,EAAMjB,KAAOA,EACbiB,EAAMmB,iBAAmBA,EACzBpyC,EAAEixC,MAAQA,EAEHjxC,EAl6BK,GAymDZ,OApsBFkG,EAAO4pC,MAAQA,OACFrvC,IAAbyF,EAAOlG,IAAoBkG,EAAOlG,EAAI8vC,GAErC,SAAU9vC,GACT,IAAIw3C,EAAO,EACPz3C,EAAQ7D,MAAM5B,UAAUyF,MACxBulB,EAAatlB,EAAEslB,WACfE,EAAW,SAASziB,GAAM,MAAqB,iBAAPA,GACxCwhB,EAAW,GACXkzB,EAAc,GACdC,EAAmB,cAAexxC,EAClChC,EAAQ,CAAEA,MAAO,UAAWyzC,KAAM,YAClC9a,EAAQ,CAAE+a,WAAY,YAAaC,WAAY,YAInD,SAASC,EAAI14C,GACX,OAAOA,EAAQo4C,OAASp4C,EAAQo4C,KAAOA,KAEzC,SAASO,EAAa34C,EAAS0iB,EAAOka,EAAI/7B,GAExC,IADA6hB,EAAQtkB,EAAMskB,IACJ/nB,GAAI,IAAIi4B,GAaAj4B,EAbqB+nB,EAAM/nB,GActC,IAAIsV,OAAO,UAAYtV,EAAGyH,QAAQ,IAAK,SAAW,YAD3D,IAAoBzH,EAZlB,OAAQwqB,EAASuzB,EAAI14C,KAAa,IAAIwO,QAAO,SAASuU,GACpD,OAAOA,KACAL,EAAMlV,GAAMuV,EAAQvV,GAAKkV,EAAMlV,MAC/BkV,EAAM/nB,IAAMi4B,EAAQpY,KAAKuI,EAAQpoB,QACjCiiC,GAAY8b,EAAI31B,EAAQ6Z,MAAQ8b,EAAI9b,OACpC/7B,GAAYkiB,EAAQ61B,KAAO/3C,MAGtC,SAASzC,EAAMskB,GACb,IAAIm2B,GAAS,GAAKn2B,GAAOrZ,MAAM,KAC/B,MAAO,CAACmE,EAAGqrC,EAAM,GAAIl+C,GAAIk+C,EAAMl4C,MAAM,GAAG8B,OAAOqB,KAAK,MAMtD,SAASg1C,EAAa/1B,EAASg2B,GAC7B,OAAOh2B,EAAQi2B,MACXV,GAAqBv1B,EAAQvV,KAAK1I,KAClCi0C,EAGN,SAASE,EAAUt8C,GACjB,OAAO8gC,EAAM9gC,IAAU27C,GAAoBxzC,EAAMnI,IAAUA,EAG7D,SAASwF,EAAInC,EAASm5B,EAAQyD,EAAIhhC,EAAMiF,EAAUq4C,EAAWC,GAC3D,IAAIj9C,EAAKw8C,EAAI14C,GAAUo5C,EAAOj0B,EAASjpB,KAAQipB,EAASjpB,GAAM,IAC9Di9B,EAAO9vB,MAAM,MAAMlG,SAAQ,SAASuf,GAClC,GAAa,SAATA,EAAkB,OAAO9hB,EAAE2H,UAAUwrC,MAAMnX,GAC/C,IAAI7Z,EAAY3kB,EAAMskB,GACtBK,EAAQ6Z,GAAQA,EAChB7Z,EAAQ61B,IAAQ/3C,EAEZkiB,EAAQvV,KAAKiwB,IAAOb,EAAK,SAASpvB,GACpC,IAAI6rC,EAAU7rC,EAAEivB,cAChB,IAAK4c,GAAYA,IAAYv9C,OAAS8E,EAAEkjB,SAAShoB,KAAMu9C,GACrD,OAAOt2B,EAAQ6Z,GAAGl8B,MAAM5E,KAAM2F,aAElCshB,EAAQi2B,IAAQE,EAChB,IAAIxoC,EAAYwoC,GAAatc,EAC7B7Z,EAAQu2B,MAAQ,SAAS9rC,GAEvB,KADAA,EAAI+rC,EAAW/rC,IACTgsC,gCAAN,CACAhsC,EAAE5R,KAAOA,EACT,IAAIiY,EAASnD,EAAShQ,MAAMV,EA/DpBqB,MA+D6BmM,EAAEisC,MAAqB,CAACjsC,GAAK,CAACA,GAAGhB,OAAOgB,EAAEisC,QAE/E,OADe,IAAX5lC,IAAkBrG,EAAEmK,iBAAkBnK,EAAEwK,mBACrCnE,IAETkP,EAAQzpB,EAAI8/C,EAAI13C,OAChB03C,EAAI52C,KAAKugB,GACL,qBAAsB/iB,GACxBA,EAAQoG,iBAAiB6yC,EAAUl2B,EAAQvV,GAAIuV,EAAQu2B,MAAOR,EAAa/1B,EAASo2B,OAG1F,SAASp7C,EAAOiC,EAASm5B,EAAQyD,EAAI/7B,EAAUs4C,GAC7C,IAAIj9C,EAAKw8C,EAAI14C,IACXm5B,GAAU,IAAI9vB,MAAM,MAAMlG,SAAQ,SAASuf,GAC3Ci2B,EAAa34C,EAAS0iB,EAAOka,EAAI/7B,GAAUsC,SAAQ,SAAS4f,UACnDoC,EAASjpB,GAAI6mB,EAAQzpB,GAC1B,wBAAyB0G,GAC3BA,EAAQiR,oBAAoBgoC,EAAUl2B,EAAQvV,GAAIuV,EAAQu2B,MAAOR,EAAa/1B,EAASo2B,UArE7Fd,EAAc37B,MAAQ27B,EAAcqB,UAAYrB,EAAcsB,QAAUtB,EAAcuB,UAAY,cA0ElGh5C,EAAE8hB,MAAQ,CAAEvgB,IAAKA,EAAKpE,OAAQA,GAE9B6C,EAAE04C,MAAQ,SAAS1c,EAAIzlB,GACrB,IAAI1W,EAAQ,KAAKgB,WAAcd,EAAMlH,KAAKgI,UAAW,GACrD,GAAIykB,EAAW0W,GAAK,CAClB,IAAIid,EAAU,WAAY,OAAOjd,EAAGl8B,MAAMyW,EAAS1W,EAAOA,EAAK+L,OAAO7L,EAAMlH,KAAKgI,YAAcA,YAE/F,OADAo4C,EAAQzB,KAAOM,EAAI9b,GACZid,EACF,GAAIzzB,EAASjP,GAClB,OAAI1W,GACFA,EAAKyZ,QAAQ0iB,EAAGzlB,GAAUylB,GACnBh8B,EAAE04C,MAAM54C,MAAM,KAAMD,IAEpBG,EAAE04C,MAAM1c,EAAGzlB,GAAUylB,GAG9B,MAAM,IAAI3H,UAAU,sBAIxBr0B,EAAEg8B,GAAG9hC,KAAO,SAAS4nB,EAAO9mB,EAAM8U,GAChC,OAAO5U,KAAKupB,GAAG3C,EAAO9mB,EAAM8U,IAE9B9P,EAAEg8B,GAAGkd,OAAS,SAASp3B,EAAOhS,GAC5B,OAAO5U,KAAK0pB,IAAI9C,EAAOhS,IAEzB9P,EAAEg8B,GAAGtX,IAAM,SAAS5C,EAAO7hB,EAAUjF,EAAM8U,GACzC,OAAO5U,KAAKupB,GAAG3C,EAAO7hB,EAAUjF,EAAM8U,EAAU,IAGlD,IAAIqpC,EAAa,WAAW,OAAO,GAC/BC,EAAc,WAAW,OAAO,GAChCC,EAAmB,uDACnBC,EAAe,CACbviC,eAAgB,qBAChBwiC,yBAA0B,gCAC1BniC,gBAAiB,wBAGvB,SAASuhC,EAAW72B,EAAO/gB,GAoBzB,OAnBIA,GAAW+gB,EAAM03B,qBACnBz4C,IAAWA,EAAS+gB,GAEpB9hB,EAAEk8B,KAAKod,GAAc,SAASrgD,EAAMglB,GAClC,IAAIw7B,EAAe14C,EAAO9H,GAC1B6oB,EAAM7oB,GAAQ,WAEZ,OADAiC,KAAK+iB,GAAak7B,EACXM,GAAgBA,EAAa35C,MAAMiB,EAAQF,YAEpDihB,EAAM7D,GAAam7B,KAGrBt3B,EAAM43B,YAAc53B,EAAM43B,UAAYt+C,KAAK4R,aAxIjCvM,IA0INM,EAAO44C,iBAAiC54C,EAAO44C,iBAC/C,gBAAiB54C,GAAgC,IAAvBA,EAAOoxB,YACjCpxB,EAAO64C,mBAAqB74C,EAAO64C,uBACrC93B,EAAM03B,mBAAqBL,IAExBr3B,EAGT,SAAS+3B,EAAY/3B,GACnB,IAAI7nB,EAAKy+C,EAAQ,CAAEoB,cAAeh4B,GAClC,IAAK7nB,KAAO6nB,EACLu3B,EAAiBz/B,KAAK3f,SArJjBwG,IAqJyBqhB,EAAM7nB,KAAoBy+C,EAAMz+C,GAAO6nB,EAAM7nB,IAElF,OAAO0+C,EAAWD,EAAO52B,GAG3B9hB,EAAEg8B,GAAG+d,SAAW,SAAS95C,EAAU6hB,EAAOhS,GACxC,OAAO5U,KAAKupB,GAAG3C,EAAO7hB,EAAU6P,IAElC9P,EAAEg8B,GAAGge,WAAa,SAAS/5C,EAAU6hB,EAAOhS,GAC1C,OAAO5U,KAAK0pB,IAAI9C,EAAO7hB,EAAU6P,IAGnC9P,EAAEg8B,GAAGie,KAAO,SAASn4B,EAAOhS,GAE1B,OADA9P,EAAE2H,SAAS6a,MAAMu3B,SAAS7+C,KAAK+E,SAAU6hB,EAAOhS,GACzC5U,MAET8E,EAAEg8B,GAAGke,IAAM,SAASp4B,EAAOhS,GAEzB,OADA9P,EAAE2H,SAAS6a,MAAMw3B,WAAW9+C,KAAK+E,SAAU6hB,EAAOhS,GAC3C5U,MAGT8E,EAAEg8B,GAAGvX,GAAK,SAAS3C,EAAO7hB,EAAUjF,EAAM8U,EAAU4U,GAClD,IAAIy1B,EAAY7B,EAAWnc,EAAQjhC,KACnC,OAAI4mB,IAAU0D,EAAS1D,IACrB9hB,EAAEk8B,KAAKpa,GAAO,SAAS/lB,EAAMigC,GAC3BG,EAAM1X,GAAG1oB,EAAMkE,EAAUjF,EAAMghC,EAAItX,MAE9ByX,IAGJ3W,EAASvlB,IAAcqlB,EAAWxV,KAA0B,IAAbA,IAClDA,EAAW9U,EAAMA,EAAOiF,EAAUA,OApLxBQ,YAqLRqP,IAAmC,IAAT9U,IAC5B8U,EAAW9U,EAAMA,OAtLPyF,IAwLK,IAAbqP,IAAoBA,EAAWspC,GAE5Bjd,EAAMD,MAAK,SAAS5Q,EAAGlsB,GACxBslB,IAAKy1B,EAAa,SAASvtC,GAE7B,OADAzP,EAAOiC,EAASwN,EAAE7Q,KAAM+T,GACjBA,EAAShQ,MAAM5E,KAAM2F,aAG1BZ,IAAUq4C,EAAY,SAAS1rC,GACjC,IAAI4tB,EAAK7xB,EAAQ3I,EAAE4M,EAAEhM,QAAQ4zC,QAAQv0C,EAAUb,GAAS7F,IAAI,GAC5D,GAAIoP,GAASA,IAAUvJ,EAErB,OADAo7B,EAAMx6B,EAAEsQ,OAAOupC,EAAYjtC,GAAI,CAACskB,cAAevoB,EAAOyxC,UAAWh7C,KACzD+6C,GAAcrqC,GAAUhQ,MAAM6I,EAAO,CAAC6xB,GAAK5uB,OAAO7L,EAAMlH,KAAKgI,UAAW,OAIpFU,EAAInC,EAAS0iB,EAAOhS,EAAU9U,EAAMiF,EAAUq4C,GAAa6B,QAG/Dn6C,EAAEg8B,GAAGpX,IAAM,SAAS9C,EAAO7hB,EAAU6P,GACnC,IAAIqsB,EAAQjhC,KACZ,OAAI4mB,IAAU0D,EAAS1D,IACrB9hB,EAAEk8B,KAAKpa,GAAO,SAAS/lB,EAAMigC,GAC3BG,EAAMvX,IAAI7oB,EAAMkE,EAAU+7B,MAErBG,IAGJ3W,EAASvlB,IAAcqlB,EAAWxV,KAA0B,IAAbA,IAClDA,EAAW7P,EAAUA,OArNXQ,IAuNK,IAAbqP,IAAoBA,EAAWspC,GAE5Bjd,EAAMD,MAAK,WAChB/+B,EAAOjC,KAAM4mB,EAAOhS,EAAU7P,QAIlCD,EAAEg8B,GAAGna,QAAU,SAASC,EAAOjiB,GAG7B,OAFAiiB,EAAS0D,EAAS1D,IAAU9hB,EAAEuxC,cAAczvB,GAAU9hB,EAAEq6C,MAAMv4B,GAAS62B,EAAW72B,IAC5E+2B,MAAQh5C,EACP3E,KAAKghC,MAAK,WAEXpa,EAAM/lB,QAAQmI,GAAoC,mBAApBhJ,KAAK4mB,EAAM/lB,MAAqBb,KAAK4mB,EAAM/lB,QAEpE,kBAAmBb,KAAMA,KAAKo/C,cAAcx4B,GAChD9hB,EAAE9E,MAAMq/C,eAAez4B,EAAOjiB,OAMvCG,EAAEg8B,GAAGue,eAAiB,SAASz4B,EAAOjiB,GACpC,IAAI+M,EAAGqG,EAUP,OATA/X,KAAKghC,MAAK,SAASxjC,EAAG0G,IACpBwN,EAAIitC,EAAYr0B,EAAS1D,GAAS9hB,EAAEq6C,MAAMv4B,GAASA,IACjD+2B,MAAQh5C,EACV+M,EAAEhM,OAASxB,EACXY,EAAEk8B,KAAK6b,EAAa34C,EAAS0iB,EAAM/lB,MAAQ+lB,IAAQ,SAASppB,EAAGypB,GAE7D,GADAlP,EAASkP,EAAQu2B,MAAM9rC,GACnBA,EAAEgsC,gCAAiC,OAAO,QAG3C3lC,GAIR,uLAE6CxK,MAAM,KAAKlG,SAAQ,SAASuf,GACxE9hB,EAAEg8B,GAAGla,GAAS,SAAShS,GACrB,OAAQ,KAAKjP,UACX3F,KAAKhB,KAAK4nB,EAAOhS,GACjB5U,KAAK2mB,QAAQC,OAInB9hB,EAAEq6C,MAAQ,SAASt+C,EAAMoC,GAClBqnB,EAASzpB,KAAqBA,GAAdoC,EAAQpC,GAAmBA,MAChD,IAAI+lB,EAAQna,SAAS6yC,YAAY/C,EAAc17C,IAAS,UAAW0+C,GAAU,EAC7E,GAAIt8C,EAAO,IAAK,IAAIlF,KAAQkF,EAAgB,WAARlF,EAAsBwhD,IAAYt8C,EAAMlF,GAAU6oB,EAAM7oB,GAAQkF,EAAMlF,GAE1G,OADA6oB,EAAM44B,UAAU3+C,EAAM0+C,GAAS,GACxB9B,EAAW72B,IA3QrB,CA8QEguB,GAEF,SAAU9vC,GACT,IAEI/F,EACAhB,EAHA0hD,GAAW,IAAIv/C,KACfuM,EAAWzB,EAAOyB,SAGlBizC,EAAU,sDACVC,EAAe,qCACfC,EAAY,8BAGZC,EAAU,QACVC,EAAerzC,EAASC,cAAc,KAY1C,SAASqzC,EAAcC,EAAU3kC,EAASgnB,EAAWviC,GACnD,GAAIkgD,EAAS3jC,OAAQ,OARvB,SAA0BhB,EAASgnB,EAAWviC,GAC5C,IAAI8mB,EAAQ9hB,EAAEq6C,MAAM9c,GAEpB,OADAv9B,EAAEuW,GAASsL,QAAQC,EAAO9mB,IAClB8mB,EAAM03B,qBAKc2B,CAAiB5kC,GAAW5O,EAAU41B,EAAWviC,GAc/E,SAASogD,EAAexlC,EAAKslC,GAC3B,IAAI3kC,EAAU2kC,EAAS3kC,QACvB,IAAyD,IAArD2kC,EAASG,WAAWxiD,KAAK0d,EAASX,EAAKslC,KACiC,IAAxED,EAAcC,EAAU3kC,EAAS,iBAAkB,CAACX,EAAKslC,IAC3D,OAAO,EAETD,EAAcC,EAAU3kC,EAAS,WAAY,CAACX,EAAKslC,IAErD,SAASI,EAAYtgD,EAAM4a,EAAKslC,EAAU99C,GACxC,IAAImZ,EAAU2kC,EAAS3kC,QACvB2kC,EAASjnB,QAAQp7B,KAAK0d,EAASvb,EADU,UACI4a,GACzCxY,GAAUA,EAASm+C,YAAYhlC,EAAS,CAACvb,EAFJ,UAEkB4a,IAC3DqlC,EAAcC,EAAU3kC,EAAS,cAAe,CAACX,EAAKslC,EAAUlgD,IAChEwgD,EAJyC,UAIpB5lC,EAAKslC,GAG5B,SAASO,EAAU/2C,EAAO3I,EAAM6Z,EAAKslC,EAAU99C,GAC7C,IAAImZ,EAAU2kC,EAAS3kC,QACvB2kC,EAASx2C,MAAM7L,KAAK0d,EAASX,EAAK7Z,EAAM2I,GACpCtH,GAAUA,EAASs+C,WAAWnlC,EAAS,CAACX,EAAK7Z,EAAM2I,IACvDu2C,EAAcC,EAAU3kC,EAAS,YAAa,CAACX,EAAKslC,EAAUx2C,GAAS3I,IACvEy/C,EAAaz/C,EAAM6Z,EAAKslC,GAG1B,SAASM,EAAa72C,EAAQiR,EAAKslC,GACjC,IAAI3kC,EAAU2kC,EAAS3kC,QACvB2kC,EAASS,SAAS9iD,KAAK0d,EAASX,EAAKjR,GACrCs2C,EAAcC,EAAU3kC,EAAS,eAAgB,CAACX,EAAKslC,IAhCzD,SAAkBA,GACZA,EAAS3jC,WAAcvX,EAAE0C,QAASu4C,EAAcC,EAAU,KAAM,YAgCpEU,CAASV,GAUX,SAASlG,KAwGT,SAAS6G,EAAYn/C,EAAK0e,GACxB,MAAa,IAATA,EAAoB1e,GAChBA,EAAM,IAAM0e,GAAO5Z,QAAQ,YAAa,KA8HlD,SAASs6C,EAAep/C,EAAK1B,EAAMi5B,EAASa,GAG1C,OAFI90B,EAAEslB,WAAWtqB,KAAO85B,EAAWb,EAASA,EAAUj5B,EAAMA,OAAOyF,GAC9DT,EAAEslB,WAAW2O,KAAUa,EAAWb,EAASA,OAAUxzB,GACnD,CACL/D,IAAKA,EACL1B,KAAMA,EACNi5B,QAASA,EACTa,SAAUA,GA9SdkmB,EAAavuC,KAAOvG,EAAO0V,SAASnP,KAepCzM,EAAE0C,OAAS,EAkDX1C,EAAE+7C,UAAY,SAASjgD,EAASsB,GAC9B,KAAM,SAAUtB,GAAU,OAAOkE,EAAEu2B,KAAKz6B,GAExC,IAKEkgD,EAIwBC,EATtBC,EAAgBpgD,EAAQqgD,cAC1B3mB,GAAgBx1B,EAAEslB,WAAW42B,GAC3BA,IAAkBA,IAAmB,QAAWvB,IAClDhlB,EAAShuB,EAASC,cAAc,UAChCw0C,EAAmBl2C,EAAOsvB,GAE1B6mB,EAAQ,SAASC,GACft8C,EAAE21B,GAAQ4kB,eAAe,QAAS+B,GAAa,UAEjD1mC,EAAM,CAAEymC,MAAOA,GAqBjB,OAnBIj/C,GAAUA,EAASE,QAAQsY,GAE/B5V,EAAE21B,GAAQlR,GAAG,cAAc,SAAS7X,EAAG0vC,GACrCtyC,aAAaiyC,GACbj8C,EAAE21B,GAAQ/Q,MAAMznB,SAEF,SAAVyP,EAAE7Q,MAAoBigD,EAGxBV,EAAYU,EAAa,GAAIpmC,EAAK9Z,EAASsB,GAF3Cq+C,EAAU,KAAMa,GAAa,QAAS1mC,EAAK9Z,EAASsB,GAKtD8I,EAAOsvB,GAAgB4mB,EACnBJ,GAAgBh8C,EAAEslB,WAAW82B,IAC/BA,EAAiBJ,EAAa,IAEhCI,EAAmBJ,OAAev7C,MAGC,IAAjC26C,EAAexlC,EAAK9Z,IACtBugD,EAAM,SACCzmC,IAGT1P,EAAOsvB,GAAgB,WACrBwmB,EAAen7C,WAGjB80B,EAAOtqB,IAAMvP,EAAQY,IAAI8E,QAAQ,YAAa,OAASg0B,GACvD7tB,EAAS40C,KAAK5yC,YAAYgsB,GAEtB75B,EAAQ0gD,QAAU,IAAGP,EAAelsC,YAAW,WACjDssC,EAAM,aACLvgD,EAAQ0gD,UAEJ5mC,IAGT5V,EAAEy8C,aAAe,CAEf1gD,KAAM,MAENs/C,WAAYrG,EAEZ/gB,QAAS+gB,EAETtwC,MAAOswC,EAEP2G,SAAU3G,EAEVz+B,QAAS,KAETgB,QAAQ,EAER3B,IAAK,WACH,OAAO,IAAI1P,EAAO4vB,gBAIpB4mB,QAAS,CACP/mB,OAAQ,oEACRgnB,KAjJW,mBAkJXC,IAAQ,4BACRxuC,KAlJW,YAmJXG,KAAQ,cAGVsuC,aAAa,EAEbL,QAAS,EAETM,aAAa,EAEbC,OAAO,EAIPC,WAAYhI,GAwBdh1C,EAAEu2B,KAAO,SAASz6B,GAChB,IAEImhD,EAAWC,EAFXhC,EAAWl7C,EAAEsQ,OAAO,GAAIxU,GAAW,IACnCsB,EAAW4C,EAAE0zB,UAAY1zB,EAAE0zB,WAE/B,IAAKz5B,KAAO+F,EAAEy8C,kBAAoCh8C,IAAlBy6C,EAASjhD,KAAoBihD,EAASjhD,GAAO+F,EAAEy8C,aAAaxiD,KAvK9F,SAAmBihD,GACbA,EAAS3jC,QAAyB,GAAfvX,EAAE0C,UAAgBu4C,EAAcC,EAAU,KAAM,aAwKvEiC,CAAUjC,GAELA,EAAS2B,eACZI,EAAYt1C,EAASC,cAAc,MACzB6E,KAAOyuC,EAASx+C,IAE1BugD,EAAUxwC,KAAOwwC,EAAUxwC,KAC3ByuC,EAAS2B,YAAe7B,EAAaoC,SAAW,KAAOpC,EAAa9b,MAAW+d,EAAUG,SAAW,KAAOH,EAAU/d,MAGlHgc,EAASx+C,MAAKw+C,EAASx+C,IAAMwJ,EAAO0V,SAASd,aAC7CoiC,EAAYhC,EAASx+C,IAAIyb,QAAQ,OAAS,IAAG+iC,EAASx+C,IAAMw+C,EAASx+C,IAAIqD,MAAM,EAAGm9C,IAxBzF,SAAuBphD,GACjBA,EAAQghD,aAAehhD,EAAQd,MAAgC,UAAxBgF,EAAEjE,KAAKD,EAAQd,QACxDc,EAAQd,KAAOgF,EAAEyzB,MAAM33B,EAAQd,KAAMc,EAAQuhD,eAC3CvhD,EAAQd,MAAUc,EAAQC,MAAsC,OAA9BD,EAAQC,KAAKwP,eAA0B,SAAWzP,EAAQg5B,WAC9Fh5B,EAAQY,IAAMm/C,EAAY//C,EAAQY,IAAKZ,EAAQd,MAAOc,EAAQd,UAAOyF,GAqBvE68C,CAAcpC,GAEd,IAAIpmB,EAAWomB,EAASpmB,SAAUyoB,EAAiB,UAAU3jC,KAAKshC,EAASx+C,KAS3E,GARI6gD,IAAgBzoB,EAAW,UAER,IAAnBomB,EAAS6B,QACNjhD,IAA6B,IAAlBA,EAAQihD,OACpB,UAAYjoB,GAAY,SAAWA,KAEvComB,EAASx+C,IAAMm/C,EAAYX,EAASx+C,IAAK,KAAOtB,KAAK4R,QAEnD,SAAW8nB,EAIb,OAHKyoB,IACHrC,EAASx+C,IAAMm/C,EAAYX,EAASx+C,IAClCw+C,EAASnmB,MAASmmB,EAASnmB,MAAQ,MAA2B,IAAnBmmB,EAASnmB,MAAkB,GAAK,eACxE/0B,EAAE+7C,UAAUb,EAAU99C,GAG/B,IAMI6+C,EANAuB,EAAOtC,EAASwB,QAAQ5nB,GACxBmB,EAAU,GACVwnB,EAAY,SAASxkD,EAAMU,GAASs8B,EAAQh9B,EAAKiV,eAAiB,CAACjV,EAAMU,IACzEyjD,EAAW,iBAAiBxjC,KAAKshC,EAASx+C,KAAO2S,OAAO4jC,GAAK/sC,EAAO0V,SAASwhC,SAC7ExnC,EAAMslC,EAAStlC,MACf8nC,EAAkB9nC,EAAIoK,iBAc1B,GAXI5iB,GAAUA,EAASE,QAAQsY,GAE1BslC,EAAS2B,aAAaY,EAAU,mBAAoB,kBACzDA,EAAU,SAAUD,GAAQ,QACxBA,EAAOtC,EAASyC,UAAYH,KAC1BA,EAAKrlC,QAAQ,MAAQ,IAAGqlC,EAAOA,EAAK/0C,MAAM,IAAK,GAAG,IACtDmN,EAAIgoC,kBAAoBhoC,EAAIgoC,iBAAiBJ,KAE3CtC,EAASv+B,cAAyC,IAAzBu+B,EAASv+B,aAAyBu+B,EAASlgD,MAAuC,OAA/BkgD,EAASn/C,KAAKwP,gBAC5FkyC,EAAU,eAAgBvC,EAASv+B,aAAe,qCAEhDu+B,EAASjlB,QAAS,IAAKh9B,KAAQiiD,EAASjlB,QAASwnB,EAAUxkD,EAAMiiD,EAASjlB,QAAQh9B,IAmCtF,GAlCA2c,EAAIoK,iBAAmBy9B,EAEvB7nC,EAAImgB,mBAAqB,WACvB,GAAsB,GAAlBngB,EAAIogB,WAAiB,CACvBpgB,EAAImgB,mBAAqBif,EACzBhrC,aAAaiyC,GACb,IAAIhpC,EAAQvO,GAAQ,EACpB,GAAKkR,EAAIjR,QAAU,KAAOiR,EAAIjR,OAAS,KAAsB,KAAdiR,EAAIjR,QAAgC,GAAdiR,EAAIjR,QAA2B,SAAZy4C,EAAsB,CAG5G,GAFAtoB,EAAWA,GArFnB,SAAwB0oB,GAEtB,OADIA,IAAMA,EAAOA,EAAK/0C,MAAM,IAAK,GAAG,IAC7B+0C,IArKM,aAqKIA,EAAmB,OAtKvB,oBAuKXA,EAAmB,OACnB3C,EAAajhC,KAAK4jC,GAAQ,SAC1B1C,EAAUlhC,KAAK4jC,IAAS,QAAW,OAgFRK,CAAe3C,EAASyC,UAAY/nC,EAAIuK,kBAAkB,iBAEzD,eAApBvK,EAAIkoC,cAAqD,QAApBloC,EAAIkoC,aAC3C7qC,EAAS2C,EAAI5Y,aACV,CACHiW,EAAS2C,EAAID,aAEb,IAGE1C,EAtMZ,SAAwBjY,EAAMe,EAAMm/C,GAClC,GAAIA,EAAS8B,YAAchI,EAAO,OAAOh6C,EACzC,IAAIub,EAAU2kC,EAAS3kC,QACvB,OAAO2kC,EAAS8B,WAAWnkD,KAAK0d,EAASvb,EAAMe,GAmM5BgiD,CAAe9qC,EAAQ6hB,EAAUomB,GAC1B,UAAZpmB,GAAyB,EAAGkpB,MAAM/qC,GACjB,OAAZ6hB,EAAoB7hB,EAAS2C,EAAIqoC,YACrB,QAAZnpB,IAAoB7hB,EAAS8nC,EAAQnhC,KAAK3G,GAAU,KAAOjT,EAAEqyC,UAAUp/B,IAChF,MAAOrG,GAAKlI,EAAQkI,EAEtB,GAAIlI,EAAO,OAAO+2C,EAAU/2C,EAAO,cAAekR,EAAKslC,EAAU99C,GAGnEk+C,EAAYroC,EAAQ2C,EAAKslC,EAAU99C,QAEnCq+C,EAAU7lC,EAAI0C,YAAc,KAAM1C,EAAIjR,OAAS,QAAU,QAASiR,EAAKslC,EAAU99C,MAKjD,IAAlCg+C,EAAexlC,EAAKslC,GAGtB,OAFAtlC,EAAIymC,QACJZ,EAAU,KAAM,QAAS7lC,EAAKslC,EAAU99C,GACjCwY,EAGT,IAAIsoC,IAAQ,UAAWhD,IAAWA,EAASgD,MAG3C,GAFAtoC,EAAIuD,KAAK+hC,EAASn/C,KAAMm/C,EAASx+C,IAAKwhD,EAAOhD,EAAShwC,SAAUgwC,EAAS/pC,UAErE+pC,EAASiD,UAAW,IAAKllD,KAAQiiD,EAASiD,UAAWvoC,EAAI3c,GAAQiiD,EAASiD,UAAUllD,GAExF,IAAKA,KAAQg9B,EAASynB,EAAgB59C,MAAM8V,EAAKqgB,EAAQh9B,IAUzD,OARIiiD,EAASsB,QAAU,IAAGP,EAAelsC,YAAW,WAChD6F,EAAImgB,mBAAqBif,EACzBp/B,EAAIymC,QACJZ,EAAU,KAAM,UAAW7lC,EAAKslC,EAAU99C,KACzC89C,EAASsB,UAGd5mC,EAAIygB,KAAK6kB,EAASlgD,KAAOkgD,EAASlgD,KAAO,MAClC4a,GAeT5V,EAAEzG,IAAM,WACN,OAAOyG,EAAEu2B,KAAKulB,EAAeh8C,MAAM,KAAMe,aAG3Cb,EAAEo+C,KAAO,WACP,IAAItiD,EAAUggD,EAAeh8C,MAAM,KAAMe,WAEzC,OADA/E,EAAQC,KAAO,OACRiE,EAAEu2B,KAAKz6B,IAGhBkE,EAAEq+C,QAAU,WACV,IAAIviD,EAAUggD,EAAeh8C,MAAM,KAAMe,WAEzC,OADA/E,EAAQg5B,SAAW,OACZ90B,EAAEu2B,KAAKz6B,IAGhBkE,EAAEg8B,GAAGxd,KAAO,SAAS9hB,EAAK1B,EAAMi5B,GAC9B,IAAK/4B,KAAK4F,OAAQ,OAAO5F,KACzB,IAA0C+E,EAAtC0Q,EAAOzV,KAAM+8C,EAAQv7C,EAAI+L,MAAM,MAC/B3M,EAAUggD,EAAep/C,EAAK1B,EAAMi5B,GACpCnkB,EAAWhU,EAAQm4B,QASvB,OARIgkB,EAAMn3C,OAAS,IAAGhF,EAAQY,IAAMu7C,EAAM,GAAIh4C,EAAWg4C,EAAM,IAC/Dn8C,EAAQm4B,QAAU,SAASj3B,GACzB2T,EAAKvC,KAAKnO,EACRD,EAAE,SAASoO,KAAKpR,EAASwE,QAAQo5C,EAAS,KAAKz6C,KAAKF,GAClDjD,GACJ8S,GAAYA,EAAShQ,MAAM6Q,EAAM9P,YAEnCb,EAAEu2B,KAAKz6B,GACAZ,MAGT,IAAIojD,EAAS7rB,mBAiBbzyB,EAAEyzB,MAAQ,SAAS1wB,EAAKs6C,GACtB,IAAI38B,EAAS,GAOb,OANAA,EAAOnf,IAAM,SAAStH,EAAKN,GACrBqG,EAAEslB,WAAW3rB,KAAQA,EAAQA,KACpB,MAATA,IAAeA,EAAQ,IAC3BuB,KAAK0G,KAAK08C,EAAOrkD,GAAO,IAAMqkD,EAAO3kD,KApBzC,SAASk7B,EAAUnU,EAAQ3d,EAAKs6C,EAAakB,GAC3C,IAAIxiD,EAAMqhB,EAAQpd,EAAEyX,QAAQ1U,GAAMyuB,EAAOxxB,EAAEuxC,cAAcxuC,GACzD/C,EAAEk8B,KAAKn5B,GAAK,SAAS9I,EAAKN,GACxBoC,EAAOiE,EAAEjE,KAAKpC,GACV4kD,IAAOtkD,EAAMojD,EAAckB,EAC7BA,EAAQ,KAAO/sB,GAAgB,UAARz1B,GAA4B,SAARA,EAAkB9B,EAAM,IAAM,MAEtEskD,GAASnhC,EAAOsD,EAAOnf,IAAI5H,EAAMV,KAAMU,EAAMA,OAEjC,SAARoC,IAAqBshD,GAAuB,UAARthD,EAC3C84B,EAAUnU,EAAQ/mB,EAAO0jD,EAAapjD,GACnCymB,EAAOnf,IAAItH,EAAKN,MAWvBk7B,CAAUnU,EAAQ3d,EAAKs6C,GAChB38B,EAAOxd,KAAK,KAAK1B,QAAQ,OAAQ,MAxX3C,CA0XEsuC,GAEF,SAAU9vC,GACTA,EAAEg8B,GAAGwiB,eAAiB,WACpB,IAAIvlD,EAAM8C,EAAMkX,EAAS,GACvB1R,EAAM,SAAS5H,GACb,GAAIA,EAAM4I,QAAS,OAAO5I,EAAM4I,QAAQhB,GACxC0R,EAAOrR,KAAK,CAAE3I,KAAMA,EAAMU,MAAOA,KASrC,OAPIuB,KAAK,IAAI8E,EAAEk8B,KAAKhhC,KAAK,GAAG+4C,UAAU,SAAS3oB,EAAGmzB,GAChD1iD,EAAO0iD,EAAM1iD,MAAM9C,EAAOwlD,EAAMxlD,OACY,YAAhCwlD,EAAMj0B,SAAStc,gBACxBuwC,EAAM//C,UAAoB,UAAR3C,GAA4B,SAARA,GAA2B,UAARA,GAA4B,QAARA,IACpE,SAARA,GAA2B,YAARA,GAAuB0iD,EAAMlpC,UAChDhU,EAAIvB,EAAEy+C,GAAO7K,UAEZ3gC,GAGTjT,EAAEg8B,GAAGnH,UAAY,WACf,IAAI5hB,EAAS,GAIb,OAHA/X,KAAKsjD,iBAAiBj8C,SAAQ,SAASm8C,GACrCzrC,EAAOrR,KAAK6wB,mBAAmBisB,EAAIzlD,MAAQ,IAAMw5B,mBAAmBisB,EAAI/kD,WAEnEsZ,EAAO/P,KAAK,MAGrBlD,EAAEg8B,GAAG2iB,OAAS,SAAS7uC,GACrB,GAAI,KAAKjP,UAAW3F,KAAKhB,KAAK,SAAU4V,QACnC,GAAI5U,KAAK4F,OAAQ,CACpB,IAAIghB,EAAQ9hB,EAAEq6C,MAAM,UACpBn/C,KAAKo5C,GAAG,GAAGzyB,QAAQC,GACdA,EAAM03B,sBAAsBt+C,KAAK3B,IAAI,GAAGolD,SAE/C,OAAOzjD,MAhCV,CAmCE40C,GAEF,WAGC,IACE9Q,sBAAiBv+B,GACjB,MAAMmM,GACN,IAAIgyC,EAAyB5f,iBAC7B94B,EAAO84B,iBAAmB,SAAS5/B,EAASy/C,GAC1C,IACE,OAAOD,EAAuBx/C,EAASy/C,GACvC,MAAMjyC,GACN,OAAO,QAXd,GAgBQkjC,EA7mDsB3qB,CAAQ5N,IAAS,gCAgnD9C1e,KAAKqN,S,iBCtnDP,YAAAzN,EAAA,iBAAoC,EAAQ,M,mCCA5C,YAAAA,EAAA,gBAAmC,EAAQ,M,kCCAyBA,EAAOD,QAA8E,WAAW,aAAa,IAAIoB,EAAE,cAAcO,EAAE,SAASyS,EAAE,SAASpT,EAAE,OAAOd,EAAE,MAAM+B,EAAE,OAAOyxB,EAAE,QAAQpqB,EAAE,UAAU3I,EAAE,OAAOqhB,EAAE,uFAAuFG,EAAE,sFAAsF5hB,EAAE,SAASa,EAAEO,EAAEyS,GAAG,IAAIpT,EAAEk2B,OAAO91B,GAAG,OAAOJ,GAAGA,EAAEsH,QAAQ3G,EAAEP,EAAE,GAAGsC,MAAM/B,EAAE,EAAEX,EAAEsH,QAAQoC,KAAK0J,GAAGhT,GAAGZ,EAAE,CAACyB,EAAE1B,EAAE+lD,EAAE,SAASllD,GAAG,IAAIO,GAAGP,EAAEmlD,YAAYnyC,EAAE1E,KAAKomC,IAAIn0C,GAAGX,EAAE0O,KAAKwS,MAAM9N,EAAE,IAAIlU,EAAEkU,EAAE,GAAG,OAAOzS,GAAG,EAAE,IAAI,KAAKpB,EAAES,EAAE,EAAE,KAAK,IAAIT,EAAEL,EAAE,EAAE,MAAMI,EAAE,SAASc,EAAEO,GAAG,IAAIyS,EAAE,IAAIzS,EAAEgT,OAAOvT,EAAEuT,SAAShT,EAAE6kD,QAAQplD,EAAEolD,SAASxlD,EAAEI,EAAE47C,QAAQj0C,IAAIqL,EAAEsf,GAAGxzB,EAAEyB,EAAEX,EAAE,EAAEiB,EAAEb,EAAE47C,QAAQj0C,IAAIqL,GAAGlU,GAAG,EAAE,GAAGwzB,GAAG,OAAOhS,SAAStN,GAAGzS,EAAEX,IAAId,EAAEc,EAAEiB,EAAEA,EAAEjB,KAAK,IAAIsI,EAAE,SAASlI,GAAG,OAAOA,EAAE,EAAEsO,KAAK+2C,KAAKrlD,IAAI,EAAEsO,KAAKwS,MAAM9gB,IAAIY,EAAE,SAASggB,GAAG,MAAM,CAAC0zB,EAAEhiB,EAAErjB,EAAE1P,EAAE+lD,EAAEzkD,EAAEzB,EAAEN,EAAE8hB,EAAEhhB,EAAEV,EAAE8T,EAAEnS,EAAEN,EAAEglD,GAAGvlD,EAAEwlD,EAAEt9C,GAAG0Y,IAAIkV,OAAOlV,GAAG,IAAItM,cAAc1M,QAAQ,KAAK,KAAK0qB,EAAE,SAAStyB,GAAG,YAAO,IAASA,IAAIoG,EAAE,CAAC/G,KAAK,KAAKomD,SAAS,2DAA2D52C,MAAM,KAAK62C,OAAO,wFAAwF72C,MAAM,MAAM9P,EAAE,KAAKG,EAAE,GAAGA,EAAEH,GAAGqH,EAAE,IAAI6I,EAAE,SAASjP,GAAG,OAAOA,aAAa6gB,GAAGyzB,EAAE,SAASt0C,EAAEO,EAAEyS,GAAG,IAAIpT,EAAE,IAAII,EAAE,OAAOjB,EAAE,GAAG,iBAAiBiB,EAAEd,EAAEc,KAAKJ,EAAEI,GAAGO,IAAIrB,EAAEc,GAAGO,EAAEX,EAAEI,OAAO,CAAC,IAAIlB,EAAEkB,EAAEX,KAAKH,EAAEJ,GAAGkB,EAAEJ,EAAEd,EAAE,OAAOkU,IAAIjU,EAAEa,GAAGA,GAAGkT,EAAE,SAAS9S,EAAEO,EAAEyS,GAAG,GAAG/D,EAAEjP,GAAG,OAAOA,EAAE47C,QAAQ,IAAIh8C,EAAEW,EAAE,iBAAiBA,EAAE,CAACiT,OAAOjT,EAAEolD,GAAG3yC,GAAGzS,EAAE,GAAG,OAAOX,EAAEgmD,KAAK5lD,EAAE,IAAI6gB,EAAEjhB,IAAIimD,EAAEzmD,EAAEymD,EAAE9mD,EAAEu1C,EAAEuR,EAAE/mD,EAAEmQ,EAAE42C,EAAEP,EAAE,SAAStlD,EAAEO,GAAG,OAAOuS,EAAE9S,EAAE,CAAC6e,OAAOte,EAAEulD,GAAGlR,IAAIr0C,EAAEo0C,MAAM,IAAI9zB,EAAE,WAAW,SAAS1hB,EAAEa,GAAGsB,KAAKwkD,GAAGxkD,KAAKwkD,IAAIxR,EAAEt0C,EAAE6e,OAAO,MAAK,GAAIvd,KAAKsC,MAAM5D,GAAG,IAAIZ,EAAED,EAAEuB,UAAU,OAAOtB,EAAEwE,MAAM,SAAS5D,GAAGsB,KAAKykD,GAAG,SAAS/lD,GAAG,IAAIO,EAAEP,EAAE4lD,KAAK5yC,EAAEhT,EAAE40C,IAAI,GAAG,OAAOr0C,EAAE,OAAO,IAAIiB,KAAKwkD,KAAK,GAAGH,EAAEvzB,EAAE/xB,GAAG,OAAO,IAAIiB,KAAK,GAAGjB,aAAaiB,KAAK,OAAO,IAAIA,KAAKjB,GAAG,GAAG,iBAAiBA,IAAI,MAAMyf,KAAKzf,GAAG,CAAC,IAAIX,EAAEW,EAAEwO,MAAM6R,GAAG,GAAGhhB,EAAE,OAAOoT,EAAE,IAAIxR,KAAKA,KAAKykD,IAAIrmD,EAAE,GAAGA,EAAE,GAAG,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,IAAI,IAAI4B,KAAK5B,EAAE,GAAGA,EAAE,GAAG,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,GAAG,OAAO,IAAI4B,KAAKjB,GAAhW,CAAoWP,GAAGsB,KAAKoE,QAAQtG,EAAEsG,KAAK,WAAW,IAAI1F,EAAEsB,KAAKykD,GAAGzkD,KAAK4kD,GAAGlmD,EAAEmmD,cAAc7kD,KAAK8kD,GAAGpmD,EAAEqmD,WAAW/kD,KAAKglD,GAAGtmD,EAAEumD,UAAUjlD,KAAKklD,GAAGxmD,EAAEymD,SAASnlD,KAAKolD,GAAG1mD,EAAE2mD,WAAWrlD,KAAKslD,GAAG5mD,EAAE6mD,aAAavlD,KAAKwlD,GAAG9mD,EAAE+mD,aAAazlD,KAAK0lD,IAAIhnD,EAAEinD,mBAAmB7nD,EAAE8nD,OAAO,WAAW,OAAOrB,GAAGzmD,EAAE+nD,QAAQ,WAAW,QAAQ,iBAAiB7lD,KAAKykD,GAAG7kC,aAAa9hB,EAAEgoD,OAAO,SAASpnD,EAAEO,GAAG,IAAIyS,EAAEF,EAAE9S,GAAG,OAAOsB,KAAK+lD,QAAQ9mD,IAAIyS,GAAGA,GAAG1R,KAAKgmD,MAAM/mD,IAAInB,EAAEiU,QAAQ,SAASrT,EAAEO,GAAG,OAAOuS,EAAE9S,GAAGsB,KAAK+lD,QAAQ9mD,IAAInB,EAAEmoD,SAAS,SAASvnD,EAAEO,GAAG,OAAOe,KAAKgmD,MAAM/mD,GAAGuS,EAAE9S,IAAIZ,EAAEooD,GAAG,SAASxnD,EAAEO,EAAEyS,GAAG,OAAO6yC,EAAEvzB,EAAEtyB,GAAGsB,KAAKf,GAAGe,KAAKs9C,IAAI5rC,EAAEhT,IAAIZ,EAAEmU,KAAK,SAASvT,GAAG,OAAOsB,KAAKkmD,GAAGxnD,EAAE,KAAKT,IAAIH,EAAEgmD,MAAM,SAASplD,GAAG,OAAOsB,KAAKkmD,GAAGxnD,EAAE,KAAKsyB,IAAIlzB,EAAEqoD,IAAI,SAASznD,GAAG,OAAOsB,KAAKkmD,GAAGxnD,EAAE,KAAKlB,IAAIM,EAAEwmD,KAAK,SAAS5lD,GAAG,OAAOsB,KAAKkmD,GAAGxnD,EAAE,KAAK,SAASZ,EAAEsoD,KAAK,SAAS1nD,GAAG,OAAOsB,KAAKkmD,GAAGxnD,EAAE,KAAKJ,IAAIR,EAAEuoD,OAAO,SAAS3nD,GAAG,OAAOsB,KAAKkmD,GAAGxnD,EAAE,KAAKgT,IAAI5T,EAAEy2C,OAAO,SAAS71C,GAAG,OAAOsB,KAAKkmD,GAAGxnD,EAAE,KAAKO,IAAInB,EAAEwoD,YAAY,SAASrnD,GAAG,OAAOe,KAAKkmD,GAAGjnD,EAAE,MAAMP,IAAIZ,EAAEyoD,KAAK,WAAW,OAAOv5C,KAAKwS,MAAMxf,KAAKovB,UAAU,MAAMtxB,EAAEsxB,QAAQ,WAAW,OAAOpvB,KAAKykD,GAAGlqB,WAAWz8B,EAAEioD,QAAQ,SAASrnD,EAAEkI,GAAG,IAAI0Y,EAAEtf,KAAKyf,IAAI8kC,EAAEvzB,EAAEpqB,IAAIA,EAAE/I,EAAE0mD,EAAEjlD,EAAEZ,GAAGZ,EAAE,SAASY,EAAEO,GAAG,IAAIyS,EAAE6yC,EAAEP,EAAE1kC,EAAE+zB,GAAGnzC,KAAKykD,IAAIrlC,EAAEslC,GAAG3lD,EAAEP,GAAG,IAAIwB,KAAKof,EAAEslC,GAAG3lD,EAAEP,GAAG4gB,GAAG,OAAOG,EAAE/N,EAAEA,EAAEs0C,MAAMxoD,IAAIsH,EAAE,SAASpG,EAAEO,GAAG,OAAOslD,EAAEP,EAAE1kC,EAAEpI,SAASxY,GAAGkG,MAAM0a,EAAEpI,UAAUuI,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,CAAC,GAAG,GAAG,GAAG,MAAM5a,MAAM5F,IAAIqgB,IAAI7hB,EAAEuC,KAAKklD,GAAGtnD,EAAEoC,KAAK8kD,GAAGn3C,EAAE3N,KAAKglD,GAAGhS,EAAE,OAAOhzC,KAAKqzC,GAAG,MAAM,IAAI,OAAOx1C,GAAG,KAAKI,EAAE,OAAOwhB,EAAE3hB,EAAE,EAAE,GAAGA,EAAE,GAAG,IAAI,KAAKkzB,EAAE,OAAOvR,EAAE3hB,EAAE,EAAEF,GAAGE,EAAE,EAAEF,EAAE,GAAG,KAAK2B,EAAE,IAAIiS,EAAExR,KAAKmzC,UAAUqT,WAAW,EAAEjnC,GAAG9hB,EAAE+T,EAAE/T,EAAE,EAAEA,GAAG+T,EAAE,OAAO1T,EAAE2hB,EAAE9R,EAAE4R,EAAE5R,GAAG,EAAE4R,GAAG3hB,GAAG,KAAKJ,EAAE,IAAI,OAAO,OAAOsH,EAAEkuC,EAAE,QAAQ,GAAG,KAAK10C,EAAE,OAAOwG,EAAEkuC,EAAE,UAAU,GAAG,KAAKthC,EAAE,OAAO5M,EAAEkuC,EAAE,UAAU,GAAG,KAAK/zC,EAAE,OAAO6F,EAAEkuC,EAAE,eAAe,GAAG,QAAQ,OAAOhzC,KAAKs6C,UAAUx8C,EAAEkoD,MAAM,SAAStnD,GAAG,OAAOsB,KAAK+lD,QAAQrnD,GAAE,IAAKZ,EAAE2oD,KAAK,SAASlnD,EAAEqH,GAAG,IAAI0Y,EAAEG,EAAE8kC,EAAEjlD,EAAEC,GAAG1B,EAAE,OAAOmC,KAAKqzC,GAAG,MAAM,IAAIv1C,GAAGwhB,EAAE,GAAGA,EAAG,IAAEzhB,EAAE,OAAOyhB,EAAEglC,KAAKzmD,EAAE,OAAOyhB,EAAE0R,GAAGnzB,EAAE,QAAQyhB,EAAErhB,GAAGJ,EAAE,WAAWyhB,EAAEhhB,GAAGT,EAAE,QAAQyhB,EAAE5N,GAAG7T,EAAE,UAAUyhB,EAAErgB,GAAGpB,EAAE,UAAUyhB,EAAE5gB,GAAGb,EAAE,eAAeyhB,GAAGG,GAAG3a,EAAE2a,IAAIjiB,EAAEwC,KAAKglD,IAAIp+C,EAAE5G,KAAKklD,IAAIt+C,EAAE,GAAG6Y,IAAIuR,GAAGvR,IAAIxhB,EAAE,CAAC,IAAIR,EAAEuC,KAAKs6C,QAAQgD,IAAI,OAAO,GAAG7/C,EAAEgnD,GAAG3mD,GAAGgH,GAAGrH,EAAE2G,OAAOpE,KAAKykD,GAAGhnD,EAAE6/C,IAAI,OAAOtwC,KAAKoiC,IAAIpvC,KAAKglD,GAAGvnD,EAAEipD,gBAAgBxvC,cAAcpZ,GAAGkC,KAAKykD,GAAG3mD,GAAGgH,GAAG,OAAO9E,KAAKoE,OAAOpE,MAAMlC,EAAEw/C,IAAI,SAAS5+C,EAAEO,GAAG,OAAOe,KAAKs6C,QAAQmM,KAAK/nD,EAAEO,IAAInB,EAAEO,IAAI,SAASK,GAAG,OAAOsB,KAAKukD,EAAEjlD,EAAEZ,OAAOZ,EAAEuI,IAAI,SAAS3H,EAAEkI,GAAG,IAAI0Y,EAAEG,EAAEzf,KAAKtB,EAAEsgB,OAAOtgB,GAAG,IAAIb,EAAE0mD,EAAEjlD,EAAEsH,GAAG9I,EAAE,SAASmB,GAAG,IAAIyS,EAAEF,EAAEiO,GAAG,OAAO8kC,EAAEP,EAAEtyC,EAAE4yC,KAAK5yC,EAAE4yC,OAAOt3C,KAAKC,MAAMhO,EAAEP,IAAI+gB,IAAI,GAAG5hB,IAAImzB,EAAE,OAAOhxB,KAAKs9C,IAAItsB,EAAEhxB,KAAK8kD,GAAGpmD,GAAG,GAAGb,IAAII,EAAE,OAAO+B,KAAKs9C,IAAIr/C,EAAE+B,KAAK4kD,GAAGlmD,GAAG,GAAGb,IAAIL,EAAE,OAAOM,EAAE,GAAG,GAAGD,IAAI0B,EAAE,OAAOzB,EAAE,GAAG,IAAIgH,GAAGwa,EAAE,GAAGA,EAAE5N,GAAG,IAAI4N,EAAEhhB,GAAG,KAAKghB,EAAErgB,GAAG,IAAIqgB,GAAGzhB,IAAI,EAAEJ,EAAEuC,KAAKovB,UAAU1wB,EAAEoG,EAAE,OAAOy/C,EAAEP,EAAEvmD,EAAEuC,OAAOlC,EAAEmZ,SAAS,SAASvY,EAAEO,GAAG,OAAOe,KAAKqG,KAAK,EAAE3H,EAAEO,IAAInB,EAAEoU,OAAO,SAASxT,GAAG,IAAIO,EAAEe,KAAK,IAAIA,KAAK6lD,UAAU,MAAM,eAAe,IAAIn0C,EAAEhT,GAAG,uBAAuBJ,EAAEimD,EAAEX,EAAE5jD,MAAMxC,EAAEwC,KAAKmzC,UAAU5zC,EAAES,KAAKolD,GAAGp0B,EAAEhxB,KAAKslD,GAAG1+C,EAAE5G,KAAK8kD,GAAG7mD,EAAET,EAAE2mD,SAAS7kC,EAAE9hB,EAAE4mD,OAAOvmD,EAAE,SAASa,EAAEJ,EAAEd,EAAE+B,GAAG,OAAOb,IAAIA,EAAEJ,IAAII,EAAEO,EAAEyS,KAAKlU,EAAEc,GAAGkV,OAAO,EAAEjU,IAAIzB,EAAE,SAASY,GAAG,OAAO6lD,EAAEhlD,EAAEA,EAAE,IAAI,GAAGb,EAAE,MAAMoG,EAAEtH,EAAEmpD,UAAU,SAASjoD,EAAEO,EAAEyS,GAAG,IAAIpT,EAAEI,EAAE,GAAG,KAAK,KAAK,OAAOgT,EAAEpT,EAAE0U,cAAc1U,GAAGb,EAAE,CAACmpD,GAAGpyB,OAAOx0B,KAAK4kD,IAAI//C,OAAO,GAAGgiD,KAAK7mD,KAAK4kD,GAAG5R,EAAEpsC,EAAE,EAAEqsC,GAAGsR,EAAEhlD,EAAEqH,EAAE,EAAE,EAAE,KAAKkgD,IAAIjpD,EAAEL,EAAEupD,YAAYngD,EAAE0Y,EAAE,GAAG0nC,KAAK1nC,EAAE1Y,IAAI0Y,EAAEtf,KAAK0R,GAAG6yC,EAAEvkD,KAAKglD,GAAGiC,GAAG1C,EAAEhlD,EAAES,KAAKglD,GAAG,EAAE,KAAKlnD,EAAE02B,OAAOx0B,KAAKklD,IAAInS,GAAGl1C,EAAEL,EAAE0pD,YAAYlnD,KAAKklD,GAAGjnD,EAAE,GAAGkpD,IAAItpD,EAAEL,EAAE4pD,cAAcpnD,KAAKklD,GAAGjnD,EAAE,GAAGopD,KAAKppD,EAAE+B,KAAKklD,IAAIoC,EAAE9yB,OAAOj1B,GAAGgoD,GAAGhD,EAAEhlD,EAAEA,EAAE,EAAE,KAAK+f,EAAExhB,EAAE,GAAGg1C,GAAGh1C,EAAE,GAAG8I,EAAE9B,EAAEvF,EAAEyxB,GAAE,GAAIw2B,EAAE1iD,EAAEvF,EAAEyxB,GAAE,GAAIpzB,EAAE42B,OAAOxD,GAAG6hB,GAAG0R,EAAEhlD,EAAEyxB,EAAE,EAAE,KAAKzxB,EAAEi1B,OAAOx0B,KAAKwlD,IAAIiC,GAAGlD,EAAEhlD,EAAES,KAAKwlD,GAAG,EAAE,KAAKkC,IAAInD,EAAEhlD,EAAES,KAAK0lD,IAAI,EAAE,KAAK/O,EAAEr4C,GAAG,OAAOoT,EAAEpL,QAAQmZ,GAAE,SAAS/gB,EAAEO,GAAG,OAAOA,GAAGxB,EAAEiB,IAAIJ,EAAEgI,QAAQ,IAAI,QAAOxI,EAAE+lD,UAAU,WAAW,OAAO,IAAI72C,KAAKC,MAAMjN,KAAKykD,GAAGkD,oBAAoB,KAAK7pD,EAAEkU,KAAK,SAAStT,EAAE4gB,EAAEG,GAAG,IAAI5hB,EAAEC,EAAEymD,EAAEjlD,EAAEggB,GAAGxa,EAAE0M,EAAE9S,GAAGjB,EAAE,KAAKqH,EAAE++C,YAAY7jD,KAAK6jD,aAAajmD,EAAEoC,KAAK8E,EAAE6I,EAAE42C,EAAE3mD,EAAEoC,KAAK8E,GAAG,OAAO6I,GAAG9P,EAAE,GAAGA,EAAEI,GAAG0P,EAAE,GAAG9P,EAAEmzB,GAAGrjB,EAAE9P,EAAE+I,GAAG+G,EAAE,EAAE9P,EAAE0B,IAAI3B,EAAEH,GAAG,OAAOI,EAAG,KAAGD,EAAEH,GAAG,MAAMI,EAAES,GAAGV,EAAE,KAAKC,EAAE6T,GAAG9T,EAAE,IAAIC,EAAEoB,GAAGrB,EAAE,IAAIC,GAAGC,IAAIF,EAAE6hB,EAAE9R,EAAE42C,EAAE39C,EAAE+G,IAAI7P,EAAE4oD,YAAY,WAAW,OAAO1mD,KAAKgmD,MAAMh1B,GAAGg0B,IAAIlnD,EAAEq1C,QAAQ,WAAW,OAAOv1C,EAAEoC,KAAKwkD,KAAK1mD,EAAEyf,OAAO,SAAS7e,EAAEO,GAAG,IAAIP,EAAE,OAAOsB,KAAKwkD,GAAG,IAAI9yC,EAAE1R,KAAKs6C,QAAQ,OAAO5oC,EAAE8yC,GAAGxR,EAAEt0C,EAAEO,GAAE,GAAIyS,GAAG5T,EAAEw8C,MAAM,WAAW,OAAOiK,EAAEP,EAAEhkD,KAAKkX,SAASlX,OAAOlC,EAAEoZ,OAAO,WAAW,OAAO,IAAIhX,KAAKF,KAAKykD,KAAK3mD,EAAE62B,OAAO,WAAW,OAAO30B,KAAK6lD,UAAU7lD,KAAK4nD,cAAc,MAAM9pD,EAAE8pD,YAAY,WAAW,OAAO5nD,KAAKykD,GAAGmD,eAAe9pD,EAAE8hB,SAAS,WAAW,OAAO5f,KAAKykD,GAAGoD,eAAehqD,EAAtoJ,GAA2oJ,OAAO2T,EAAEpS,UAAUmgB,EAAEngB,UAAUoS,EAAE4D,OAAO,SAAS1W,EAAEO,GAAG,OAAOP,EAAEO,EAAEsgB,EAAE/N,GAAGA,GAAGA,EAAE+L,OAAOy1B,EAAExhC,EAAEs2C,QAAQn6C,EAAE6D,EAAE+0C,KAAK,SAAS7nD,GAAG,OAAO8S,EAAE,IAAI9S,IAAI8S,EAAEkhC,GAAG90C,EAAEH,GAAG+T,EAAEu2C,GAAGnqD,EAAE4T,EAA5yMvS,I,iBCAnF,YAAA1B,EAAA,YAA+B,EAAQ,M,mCCAvC,0BACAA,EAAOD,QAAU+e,EAAU,EAAQ,KAAI,EAAQ,M,kCCD/C,cAUG,SAAiBze,GACnB,SAAS6e,EAAMD,EAAMvN,GACpB,IAAIpO,EAAoB,WAAb2b,EAAKlL,IACbkL,EAAKxZ,MAAMglD,MACV,QACA,SACDxrC,EAAKxZ,MAAMnC,KA2Cd,OAvCC2b,EAAKxZ,MAAMsX,SADC,UAATzZ,EACmB,WACrBoO,EAAM,GAAGpK,MAAMlH,KAAMqC,KAAKioD,iBAAiB,SAAUv6C,GACpD,OAAOA,EAAEjP,WAIM,WAAToC,EACc,SAAU6Q,GAC/BzC,EAAMjP,KAAKioD,gBAAiB,GAAIxpD,QAGhB,aAAToC,EACc,SAAU6Q,GAC/BzC,EAAMjP,KAAKqa,UAIUmC,EAAKxZ,MAAMklD,QAAU,SAAUx2C,GACpDzC,EAAMjP,KAAKvB,QAII,WAAb+d,EAAKlL,IACRkL,EAAKtZ,SAASmE,SAAS,SAAU05B,GAC5BA,EAAO/9B,MAAMvE,QAAUwQ,KAAU8xB,EAAO79B,SAAU,KAAQ+L,MAC7D8xB,EAAO/9B,MAAMk4C,UAAW,MAIT,aAATr6C,EACR2b,EAAKxZ,MAAMqX,QAAUpL,IAEJ,UAATpO,EACR2b,EAAKxZ,MAAMqX,QAAUpL,MAAWuN,EAAKxZ,MAAMvE,MAG3C+d,EAAKxZ,MAAMvE,MAAUwQ,IAGfuN,EAWR,OARAC,EAAK1Z,KAAO,SAAUsyB,EAAM7Y,EAAMvN,GAChC,OAAOwN,EAAMD,EAAMA,EAAKxZ,MAAMyZ,OAG5B7e,EAAEoF,QAAQpF,EAAEoF,MAAMyZ,KAAOA,GAE7B7e,EAAE6e,KAAOA,EAEFA,GApEN,EAAQ,CAAE,YAAoB,0BAAP,EAAF,GAAS,gC,iBCFhC,YAAAlf,EAAA,oBAAuC,EAAQ,M,kCCA/C,OAsBA,SAAUyN,EAAQyB,EAAUlH,GAGxB,GAAKyF,EAAL,CA6HA,IAhHA,IA0GIm9C,EA1GAC,EAAO,CACPC,EAAG,YACHC,EAAG,MACHC,GAAI,QACJC,GAAI,QACJC,GAAI,OACJC,GAAI,MACJC,GAAI,WACJC,GAAI,MACJC,GAAI,QACJC,GAAI,SACJC,GAAI,WACJC,GAAI,MACJC,GAAI,OACJC,GAAI,OACJC,GAAI,KACJC,GAAI,QACJC,GAAI,OACJC,GAAI,MACJC,GAAI,MACJC,GAAI,OACJC,GAAI,OACJC,IAAK,QAWLC,EAAe,CACfC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAM,IACNC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,IAAK,KACLC,IAAK,IACLC,IAAK,KAaLC,EAAa,CACb,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,EAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,EAAK,IACL,IAAK,IACL,IAAK,IACL,IAAM,IACN,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,MASLC,EAAmB,CACnB,OAAU,MACV,QAAW,OACX,OAAU,QACV,OAAU,MACV,KAAQ,IACR,IAAO,uBAAuBnsC,KAAK4kB,UAAUwnB,UAAY,OAAS,QAgB7DttD,EAAI,EAAGA,EAAI,KAAMA,EACtB4qD,EAAK,IAAM5qD,GAAK,IAAMA,EAM1B,IAAKA,EAAI,EAAGA,GAAK,IAAKA,EAOlB4qD,EAAK5qD,EAAI,IAAMA,EAAEoiB,WAuuBrBmrC,EAAU3rD,UAAUJ,KAAO,SAASgS,EAAM4D,EAAU0Y,GAIhD,OAFAtc,EAAOA,aAAgBhQ,MAAQgQ,EAAO,CAACA,GAD5BhR,KAENgrD,cAAcrtD,KAFRqC,KAEmBgR,EAAM4D,EAAU0Y,GAFnCttB,MAuBf+qD,EAAU3rD,UAAU4+C,OAAS,SAAShtC,EAAMsc,GAExC,OADWttB,KACChB,KAAKrB,KADNqC,KACiBgR,GAAM,cAAesc,IAUrDy9B,EAAU3rD,UAAUunB,QAAU,SAAS3V,EAAMsc,GAKzC,OAJWttB,KACFirD,WAAWj6C,EAAO,IAAMsc,IADtBttB,KAEFirD,WAAWj6C,EAAO,IAAMsc,GAAQ,GAAItc,GAFlChR,MAcf+qD,EAAU3rD,UAAUm1B,MAAQ,WAIxB,OAHWv0B,KACNkrD,WAAa,GADPlrD,KAENirD,WAAa,GAFPjrD,MAaf+qD,EAAU3rD,UAAU+rD,aAAe,SAASz5C,EAAGxN,GAI3C,IAAK,IAAMA,EAAQf,UAAY,KAAK8Z,QAAQ,gBAAkB,EAC1D,OAAO,EAGX,GA9iBJ,SAASmuC,EAAWlnD,EAASmnD,GACzB,OAAgB,OAAZnnD,GAAoBA,IAAYuI,IAIhCvI,IAAYmnD,GAITD,EAAWlnD,EAAQ6K,WAAYs8C,IAqiBlCD,CAAWlnD,EAPJlE,KAOkB0F,QACzB,OAAO,EASX,GAAI,iBAAkBgM,GAA+B,mBAAnBA,EAAE45C,aAA6B,CAE7D,IAAIC,EAAqB75C,EAAE45C,eAAe,GACtCC,IAAuB75C,EAAEhM,SACzBxB,EAAUqnD,GAKlB,MAA0B,SAAnBrnD,EAAQsvB,SAAyC,UAAnBtvB,EAAQsvB,SAA0C,YAAnBtvB,EAAQsvB,SAAyBtvB,EAAQ2uB,mBAMjHk4B,EAAU3rD,UAAUosD,UAAY,WAC5B,IAAI/1C,EAAOzV,KACX,OAAOyV,EAAKg2C,WAAW7mD,MAAM6Q,EAAM9P,YAMvColD,EAAUW,YAAc,SAASxsD,GAC7B,IAAK,IAAIH,KAAOG,EACRA,EAAOG,eAAeN,KACtBqpD,EAAKrpD,GAAOG,EAAOH,IAG3BopD,EAAe,MASnB4C,EAAU3mD,KAAO,WACb,IAAIunD,EAAoBZ,EAAUt+C,GAClC,IAAK,IAAIlL,KAAUoqD,EACU,MAArBpqD,EAAO6O,OAAO,KACd26C,EAAUxpD,GAAW,SAASA,GAC1B,OAAO,WACH,OAAOoqD,EAAkBpqD,GAAQqD,MAAM+mD,EAAmBhmD,YAF9C,CAIjBpE,KAKfwpD,EAAU3mD,OAGV4G,EAAO+/C,UAAYA,EAGkBxtD,EAAOD,UACxCC,EAAOD,QAAUytD,QAlgCzB,KAugCQ,aACI,OAAOA,GACV,8BAh3BL,SAASa,EAAU1sD,EAAQ2B,EAAM+T,GACzB1V,EAAOoL,iBACPpL,EAAOoL,iBAAiBzJ,EAAM+T,GAAU,GAI5C1V,EAAO44B,YAAY,KAAOj3B,EAAM+T,GASpC,SAASi3C,EAAoBn6C,GAGzB,GAAc,YAAVA,EAAE7Q,KAAoB,CACtB,IAAIirD,EAAYt3B,OAAOu3B,aAAar6C,EAAEkK,OAetC,OAJKlK,EAAE+J,WACHqwC,EAAYA,EAAU94C,eAGnB84C,EAIX,OAAI1D,EAAK12C,EAAEkK,OACAwsC,EAAK12C,EAAEkK,OAGd+tC,EAAaj4C,EAAEkK,OACR+tC,EAAaj4C,EAAEkK,OAQnB4Y,OAAOu3B,aAAar6C,EAAEkK,OAAO5I,cA8ExC,SAASg5C,EAAYjtD,GACjB,MAAc,SAAPA,GAAyB,QAAPA,GAAwB,OAAPA,GAAuB,QAAPA,EAmC9D,SAASktD,EAAgBltD,EAAK0/B,EAAWnR,GAcrC,OAVKA,IACDA,EA/BR,WACI,IAAK66B,EAED,IAAK,IAAIppD,KADTopD,EAAe,GACCC,EAIRrpD,EAAM,IAAMA,EAAM,KAIlBqpD,EAAK/oD,eAAeN,KACpBopD,EAAaC,EAAKrpD,IAAQA,GAItC,OAAOopD,EAeM+D,GAAiBntD,GAAO,UAAY,YAKnC,YAAVuuB,GAAwBmR,EAAU74B,SAClC0nB,EAAS,WAGNA,EAyBX,SAAS6+B,EAAYC,EAAa9+B,GAC9B,IAAItc,EACAjS,EACAvB,EACAihC,EAAY,GAMhB,IAFAztB,EAxBJ,SAAyBo7C,GACrB,MAAoB,MAAhBA,EACO,CAAC,MAGZA,EAAcA,EAAY9lD,QAAQ,SAAU,UACzBiH,MAAM,KAkBlB8+C,CAAgBD,GAElB5uD,EAAI,EAAGA,EAAIwT,EAAKpL,SAAUpI,EAC3BuB,EAAMiS,EAAKxT,GAGPqtD,EAAiB9rD,KACjBA,EAAM8rD,EAAiB9rD,IAMvBuuB,GAAoB,YAAVA,GAAwBs9B,EAAW7rD,KAC7CA,EAAM6rD,EAAW7rD,GACjB0/B,EAAU/3B,KAAK,UAIfslD,EAAYjtD,IACZ0/B,EAAU/3B,KAAK3H,GAQvB,MAAO,CACHA,IAAKA,EACL0/B,UAAWA,EACXnR,OALJA,EAAS2+B,EAAgBltD,EAAK0/B,EAAWnR,IAqB7C,SAASy9B,EAAUuB,GACf,IAAI72C,EAAOzV,KAIX,GAFAssD,EAAgBA,GAAiB7/C,IAE3BgJ,aAAgBs1C,GAClB,OAAO,IAAIA,EAAUuB,GAQzB72C,EAAK/P,OAAS4mD,EAOd72C,EAAKy1C,WAAa,GAOlBz1C,EAAKw1C,WAAa,GAQlB,IAOIsB,EAPAC,EAAkB,GAclBC,GAAmB,EAOnBC,GAAsB,EAQtBC,GAAsB,EAQ1B,SAASC,EAAgBC,GACrBA,EAAaA,GAAc,GAE3B,IACI9tD,EADA+tD,GAAkB,EAGtB,IAAK/tD,KAAOytD,EACJK,EAAW9tD,GACX+tD,GAAkB,EAGtBN,EAAgBztD,GAAO,EAGtB+tD,IACDH,GAAsB,GAgB9B,SAASI,EAAYjB,EAAWrtB,EAAW/sB,EAAGs7C,EAAcZ,EAAaa,GACrE,IAAIzvD,EACAoX,EAhTas4C,EAAYC,EAiTzB3/C,EAAU,GACV8f,EAAS5b,EAAE7Q,KAGf,IAAK4U,EAAKy1C,WAAWY,GACjB,MAAO,GAUX,IANc,SAAVx+B,GAAqB0+B,EAAYF,KACjCrtB,EAAY,CAACqtB,IAKZtuD,EAAI,EAAGA,EAAIiY,EAAKy1C,WAAWY,GAAWlmD,SAAUpI,EAKjD,GAJAoX,EAAWa,EAAKy1C,WAAWY,GAAWtuD,IAIjCwvD,IAAgBp4C,EAASw4C,KAAOZ,EAAgB53C,EAASw4C,MAAQx4C,EAASq4C,QAM3E3/B,GAAU1Y,EAAS0Y,SAWR,YAAVA,IAAyB5b,EAAEiK,UAAYjK,EAAEgK,UAtVjCwxC,EAsV6DzuB,EAtVjD0uB,EAsV4Dv4C,EAAS6pB,UArV/FyuB,EAAWvmD,OAAOqB,KAAK,OAASmlD,EAAWxmD,OAAOqB,KAAK,OAqVoD,CAOtG,IAAIqlD,GAAeL,GAAgBp4C,EAAS04C,OAASlB,EACjDmB,EAAiBP,GAAgBp4C,EAASw4C,KAAOJ,GAAgBp4C,EAASq4C,OAASA,GACnFI,GAAeE,IACf93C,EAAKy1C,WAAWY,GAAWpyC,OAAOlc,EAAG,GAGzCgQ,EAAQ9G,KAAKkO,GAIrB,OAAOpH,EAaX,SAASggD,EAAc54C,EAAUlD,EAAG47C,EAAOG,GAGnCh4C,EAAK01C,aAAaz5C,EAAGA,EAAEhM,QAAUgM,EAAEwlB,WAAYo2B,EAAOG,KAI/B,IAAvB74C,EAASlD,EAAG47C,KArVxB,SAAyB57C,GACjBA,EAAEmK,eACFnK,EAAEmK,iBAINnK,EAAEulB,aAAc,EAgVRy2B,CAAgBh8C,GAvU5B,SAA0BA,GAClBA,EAAEwK,gBACFxK,EAAEwK,kBAINxK,EAAEi8C,cAAe,EAkUTC,CAAiBl8C,IAkGzB,SAASm8C,EAAgBn8C,GAIE,iBAAZA,EAAEkK,QACTlK,EAAEkK,MAAQlK,EAAEgW,SAGhB,IAAIokC,EAAYD,EAAoBn6C,GAG/Bo6C,IAKS,SAAVp6C,EAAE7Q,MAAmB4rD,IAAqBX,EAK9Cr2C,EAAK+1C,UAAUM,EA1evB,SAAyBp6C,GACrB,IAAI+sB,EAAY,GAkBhB,OAhBI/sB,EAAE+J,UACFgjB,EAAU/3B,KAAK,SAGfgL,EAAEo8C,QACFrvB,EAAU/3B,KAAK,OAGfgL,EAAEgK,SACF+iB,EAAU/3B,KAAK,QAGfgL,EAAEiK,SACF8iB,EAAU/3B,KAAK,QAGZ+3B,EAuduBsvB,CAAgBr8C,GAAIA,GAJ1C+6C,GAAmB,GA6B3B,SAASuB,EAAcV,EAAOt8C,EAAM4D,EAAU0Y,GAa1C,SAAS2gC,EAAkBC,GACvB,OAAO,WACHvB,EAAsBuB,IACpB1B,EAAgBc,GA7B1Bx+C,aAAay9C,GACbA,EAAc13C,WAAW+3C,EAAiB,MAwC1C,SAASuB,EAAkBz8C,GACvB87C,EAAc54C,EAAUlD,EAAG47C,GAKZ,UAAXhgC,IACAm/B,EAAmBZ,EAAoBn6C,IAK3CmD,WAAW+3C,EAAiB,IApChCJ,EAAgBc,GAAS,EAgDzB,IAAK,IAAI9vD,EAAI,EAAGA,EAAIwT,EAAKpL,SAAUpI,EAAG,CAClC,IACI4wD,EADU5wD,EAAI,IAAMwT,EAAKpL,OACGuoD,EAAoBF,EAAkB3gC,GAAU6+B,EAAYn7C,EAAKxT,EAAI,IAAI8vB,QACzG+gC,EAAYr9C,EAAKxT,GAAI4wD,EAAiB9gC,EAAQggC,EAAO9vD,IAc7D,SAAS6wD,EAAYjC,EAAax3C,EAAU0Y,EAAQ0/B,EAAcC,GAG9Dx3C,EAAKw1C,WAAWmB,EAAc,IAAM9+B,GAAU1Y,EAK9C,IACI05C,EADAb,GAFJrB,EAAcA,EAAY9lD,QAAQ,OAAQ,MAEfiH,MAAM,KAK7BkgD,EAAS7nD,OAAS,EAClBooD,EAAc5B,EAAaqB,EAAU74C,EAAU0Y,IAInDghC,EAAOnC,EAAYC,EAAa9+B,GAIhC7X,EAAKy1C,WAAWoD,EAAKvvD,KAAO0W,EAAKy1C,WAAWoD,EAAKvvD,MAAQ,GAGzDguD,EAAYuB,EAAKvvD,IAAKuvD,EAAK7vB,UAAW,CAAC59B,KAAMytD,EAAKhhC,QAAS0/B,EAAcZ,EAAaa,GAQtFx3C,EAAKy1C,WAAWoD,EAAKvvD,KAAKiuD,EAAe,UAAY,QAAQ,CACzDp4C,SAAUA,EACV6pB,UAAW6vB,EAAK7vB,UAChBnR,OAAQghC,EAAKhhC,OACb8/B,IAAKJ,EACLC,MAAOA,EACPK,MAAOlB,KAhPf32C,EAAKg2C,WAAa,SAASK,EAAWrtB,EAAW/sB,GAC7C,IACIlU,EADAqa,EAAYk1C,EAAYjB,EAAWrtB,EAAW/sB,GAE9Cm7C,EAAa,GACb0B,EAAW,EACXC,GAA4B,EAGhC,IAAKhxD,EAAI,EAAGA,EAAIqa,EAAUjS,SAAUpI,EAC5Bqa,EAAUra,GAAG4vD,MACbmB,EAAWvhD,KAAKqH,IAAIk6C,EAAU12C,EAAUra,GAAGyvD,QAKnD,IAAKzvD,EAAI,EAAGA,EAAIqa,EAAUjS,SAAUpI,EAOhC,GAAIqa,EAAUra,GAAG4vD,IAAjB,CAUI,GAAIv1C,EAAUra,GAAGyvD,OAASsB,EACtB,SAGJC,GAA4B,EAG5B3B,EAAWh1C,EAAUra,GAAG4vD,KAAO,EAC/BI,EAAc31C,EAAUra,GAAGoX,SAAUlD,EAAGmG,EAAUra,GAAG8vD,MAAOz1C,EAAUra,GAAG4vD,UAMxEoB,GACDhB,EAAc31C,EAAUra,GAAGoX,SAAUlD,EAAGmG,EAAUra,GAAG8vD,OAyB7D,IAAImB,EAA+B,YAAV/8C,EAAE7Q,MAAsB6rD,EAC7Ch7C,EAAE7Q,MAAQ8rD,GAAwBX,EAAYF,IAAe2C,GAC7D7B,EAAgBC,GAGpBH,EAAsB8B,GAAuC,WAAV98C,EAAE7Q,MA+KzD4U,EAAKu1C,cAAgB,SAAS0D,EAAc95C,EAAU0Y,GAClD,IAAK,IAAI9vB,EAAI,EAAGA,EAAIkxD,EAAa9oD,SAAUpI,EACvC6wD,EAAYK,EAAalxD,GAAIoX,EAAU0Y,IAK/Cs+B,EAAUU,EAAe,WAAYuB,GACrCjC,EAAUU,EAAe,UAAWuB,GACpCjC,EAAUU,EAAe,QAASuB,IAp2B1C,CA2gCsB,oBAAX7iD,OAAyBA,OAAS,KAAyB,oBAAXA,OAAyByB,SAAW,O,eC7hC9F,SAAU3H,GACT,IAAIixC,EAAQjxC,EAAEixC,MAAO4Y,EAAS5Y,EAAM4B,IAAKiX,EAAa7Y,EAAMvoC,QAE5D,SAASqhD,EAAQrtB,GAEf,UADAA,EAAO18B,EAAE08B,IACMr2B,UAAWq2B,EAAKz2B,WAAqC,SAAxBy2B,EAAK50B,IAAI,WAcvD,IAAIkiD,EAAUhqD,EAAE48B,KAAK,KAAO,CAC1BmtB,QAAU,WAAY,GAAIA,EAAQ7uD,MAAO,OAAOA,MAChD+uD,OAAU,WAAY,IAAKF,EAAQ7uD,MAAO,OAAOA,MACjDk7C,SAAU,WAAY,GAAIl7C,KAAKk7C,SAAU,OAAOl7C,MAChDqa,QAAU,WAAY,GAAIra,KAAKqa,QAAS,OAAOra,MAC/CunC,OAAU,WAAY,OAAOvnC,KAAK+O,YAClChG,MAAU,SAASoG,GAAM,GAAY,IAARA,EAAW,OAAOnP,MAC/Cq5C,KAAU,SAASlqC,EAAKyY,GAAQ,GAAIzY,IAAQyY,EAAMhiB,OAAS,EAAG,OAAO5F,MACrEo5C,GAAU,SAASjqC,EAAKihB,EAAG3xB,GAAQ,GAAI0Q,IAAQ1Q,EAAO,OAAOuB,MAC7DgoB,SAAU,SAAS7Y,EAAKihB,EAAG/c,GAAO,GAAIvO,EAAE9E,MAAMqT,OAAO4J,QAAQ5J,IAAS,EAAG,OAAOrT,MAChFoG,IAAU,SAAS+I,EAAKihB,EAAG0sB,GAAM,GAAI/G,EAAM4B,IAAI33C,KAAM88C,GAAKl3C,OAAQ,OAAO5F,OAGvEgvD,EAAW,IAAI76C,OAAO,sCACtB86C,EAAW,QACXC,EAAW,UAAY,IAAIhvD,KAE/B,SAASivD,EAAQrS,EAAKhc,GAEpBgc,EAAMA,EAAIx2C,QAAQ,QAAS,SAC3B,IAAIoM,EAAQgnB,EAAKjsB,EAAQuhD,EAAShjC,KAAK8wB,GACvC,GAAIrvC,GAASA,EAAM,KAAMqhD,IACvBp8C,EAASo8C,EAAQrhD,EAAM,IAAKisB,EAAMjsB,EAAM,GACxCqvC,EAAMrvC,EAAM,GACRisB,GAAK,CACP,IAAIva,EAAMH,OAAO0a,GACDA,EAAZkT,MAAMztB,GAAYua,EAAIpzB,QAAQ,eAAgB,IACvC6Y,EAGf,OAAO2hB,EAAGgc,EAAKpqC,EAAQgnB,GAGzBqc,EAAM4B,IAAM,SAASn7B,EAAMzX,GACzB,OAAOoqD,EAAQpqD,GAAU,SAAS+3C,EAAKpqC,EAAQgnB,GAC7C,IACE,IAAI01B,GACCtS,GAAOpqC,EAAQoqC,EAAM,IACjBmS,EAAQvwC,KAAKo+B,KAGpBsS,EAAetqD,EAAE0X,GAAMuE,SAASmuC,GAAWpS,EAAM,IAAIoS,EAAS,IAAIpS,GAEpE,IAAIl1B,EAAQ+mC,EAAOnyC,EAAMsgC,GACzB,MAAMprC,GAEN,MADA0W,QAAQ5e,MAAM,gCAAiCzE,GACzC2M,EACN,QACI09C,GAAcA,EAAazkD,YAAYukD,GAE7C,OAAQx8C,EACNqjC,EAAMjB,KAAKhwC,EAAE7D,IAAI2mB,GAAO,SAAS3oB,EAAGzB,GAAI,OAAOkV,EAAO/U,KAAKsB,EAAGzB,EAAGoqB,EAAO8R,OADzD9R,MAKrBmuB,EAAMvoC,QAAU,SAASgP,EAAMzX,GAC7B,OAAOoqD,EAAQpqD,GAAU,SAAS+3C,EAAKpqC,EAAQgnB,GAC7C,QAASojB,GAAO8R,EAAWpyC,EAAMsgC,OAC7BpqC,GAAUA,EAAO/U,KAAK6e,EAAM,KAAMkd,KAASld,OA7EpD,CAgFEo4B,Q,eC9EF,SAAU9vC,GACT,IAAIhF,EAAO,GAAI0yB,EAAW1tB,EAAEg8B,GAAGhhC,KAAM+0C,EAAW/vC,EAAE8zC,UAChDyW,EAAMvqD,EAAEwqD,QAAU,UAAY,IAAIpvD,KAAS60C,EAAa,GAoB1D,SAASwa,EAAQ/yC,EAAMze,EAAMU,GAC3B,IAAI2B,EAAKoc,EAAK6yC,KAAS7yC,EAAK6yC,KAASvqD,EAAE+zC,MACrC94C,EAAQD,EAAKM,KAAQN,EAAKM,GAM9B,SAAuBoc,GACrB,IAAIzc,EAAQ,GAMZ,OALA+E,EAAEk8B,KAAKxkB,EAAKlc,YAAcy0C,GAAY,SAASv3C,EAAG0jC,GACd,GAA9BA,EAAKnjC,KAAKkf,QAAQ,WACpBld,EAAM80C,EAAS3T,EAAKnjC,KAAKuI,QAAQ,QAAS,MACxCxB,EAAEixC,MAAMmB,iBAAiBhW,EAAKziC,WAE7BsB,EAb2ByvD,CAAchzC,IAEhD,YADajX,IAATxH,IAAoBgC,EAAM80C,EAAS92C,IAASU,GACzCsB,EAcT+E,EAAEg8B,GAAGhhC,KAAO,SAAS/B,EAAMU,GACzB,YAAiB8G,IAAV9G,EAELqG,EAAEuxC,cAAct4C,GACdiC,KAAKghC,MAAK,SAASxjC,EAAGgf,GACpB1X,EAAEk8B,KAAKjjC,GAAM,SAASgB,EAAKN,GAAQ8wD,EAAQ/yC,EAAMzd,EAAKN,SAGvD,KAAKuB,KAxCZ,SAAiBwc,EAAMze,GACrB,IAAIqC,EAAKoc,EAAK6yC,GAAMtvD,EAAQK,GAAMN,EAAKM,GACvC,QAAamF,IAATxH,EAAoB,OAAOgC,GAASwvD,EAAQ/yC,GAE9C,GAAIzc,EAAO,CACT,GAAIhC,KAAQgC,EAAO,OAAOA,EAAMhC,GAChC,IAAI0xD,EAAY5a,EAAS92C,GACzB,GAAI0xD,KAAa1vD,EAAO,OAAOA,EAAM0vD,GAEvC,OAAOj9B,EAAS70B,KAAKmH,EAAE0X,GAAOze,GA+Bf2xD,CAAQ1vD,KAAK,GAAIjC,QAAQwH,EAExCvF,KAAKghC,MAAK,WAAYuuB,EAAQvvD,KAAMjC,EAAMU,OAG9CqG,EAAEhF,KAAO,SAAS0hC,EAAMzjC,EAAMU,GAC5B,OAAOqG,EAAE08B,GAAM1hC,KAAK/B,EAAMU,IAG5BqG,EAAE6qD,QAAU,SAASnuB,GACnB,IAAIphC,EAAKohC,EAAK6tB,GAAMtvD,EAAQK,GAAMN,EAAKM,GACvC,QAAOL,IAAS+E,EAAE2zC,cAAc14C,IAGlC+E,EAAEg8B,GAAG8uB,WAAa,SAASC,GAEzB,MADoB,iBAATA,IAAmBA,EAAQA,EAAMtiD,MAAM,QAC3CvN,KAAKghC,MAAK,WACf,IAAI5gC,EAAKJ,KAAKqvD,GAAMtvD,EAAQK,GAAMN,EAAKM,GACnCL,GAAO+E,EAAEk8B,KAAK6uB,GAAS9vD,GAAO,SAAShB,UAClCgB,EAAM8vD,EAAQhb,EAAS70C,MAAQjB,UAM3C,CAAC,SAAU,SAASsI,SAAQ,SAASyoD,GACpC,IAAIC,EAASjrD,EAAEg8B,GAAGgvB,GAClBhrD,EAAEg8B,GAAGgvB,GAAc,WACjB,IAAI/W,EAAW/4C,KAAKiF,KAAK,KAGzB,MAFmB,WAAf6qD,IAAyB/W,EAAWA,EAAS1yC,IAAIrG,OACrD+4C,EAAS6W,aACFG,EAAOpyD,KAAKqC,UA/ExB,CAkFE40C,Q,eCpFF,SAAU9vC,EAAGS,GACZ,IAAiByqD,EAIfxtD,EACAytD,EAAoBC,EAAoBC,EAAkBC,EAC1DC,EAAeC,EAAmBC,EAAiBC,EANjD1iD,EAAS,GAEX2iD,EAAShkD,SAASC,cAAc,OAChCgkD,EAAsB,8EAItBC,EAAW,GAGb,SAASC,EAAe7yD,GAAQ,OAAOiyD,EAAcA,EAAcjyD,EAAOA,EAAKiV,mBAXhF,IAaKy9C,EAAOvhD,MAAM1M,WAAyBsC,EAAEk8B,KAXhC,CAAE6vB,OAAQ,SAAUC,IAAK,GAAIC,EAAG,MAWc,SAASC,EAAQpqC,GACzE,QAdH,IAcO6pC,EAAOvhD,MAAM8hD,EAAS,sBAGxB,OAFAljD,EAAS,IAAMkjD,EAAOh+C,cAAgB,IACtCg9C,EAAcppC,GACP,KAIXpkB,EAAYsL,EAAS,YACrB6iD,EAASV,EAAqBniD,EAAS,uBACvC6iD,EAAST,EAAqBpiD,EAAS,uBACvC6iD,EAASP,EAAqBtiD,EAAS,oBACvC6iD,EAASR,EAAqBriD,EAAS,8BACvC6iD,EAASN,EAAqBviD,EAAS,kBACvC6iD,EAASL,EAAqBxiD,EAAS,sBACvC6iD,EAASH,EAAqB1iD,EAAS,mBACvC6iD,EAASJ,EAAqBziD,EAAS,6BAA+B,GAEtEhJ,EAAEi9B,GAAK,CACLrY,SAhCH,IAgCSsmC,QAhCT,IAgCsCS,EAAOvhD,MAAM+gD,mBAChDjuB,OAAQ,CAAEC,SAAU,IAAKgvB,KAAM,IAAKC,KAAM,KAC1CC,UAAWrjD,EACXsjD,cAAeR,EAAe,iBAC9BS,aAAcT,EAAe,iBAG/B9rD,EAAEg8B,GAAGwwB,QAAU,SAASxZ,EAAYlc,EAAU21B,EAAM38C,EAAUtG,GAU5D,OATIxJ,EAAEslB,WAAWwR,KACfhnB,EAAWgnB,EAAU21B,OAzC1B,EAyC4C31B,OAzC5C,GA0CO92B,EAAEslB,WAAWmnC,KACf38C,EAAW28C,EAAMA,OA3CtB,GA4COzsD,EAAEuxC,cAAcza,KAClB21B,EAAO31B,EAASH,OAAQ7mB,EAAWgnB,EAAS6kB,SAAUnyC,EAAQstB,EAASttB,MAAOstB,EAAWA,EAASA,UAChGA,IAAUA,GAA+B,iBAAZA,EAAuBA,EACvC92B,EAAEi9B,GAAGC,OAAOpG,IAAa92B,EAAEi9B,GAAGC,OAAOC,UAAa,KAC/D3zB,IAAOA,EAAQm4B,WAAWn4B,GAAS,KAChCtO,KAAKwxD,KAAK1Z,EAAYlc,EAAU21B,EAAM38C,EAAUtG,IAGzDxJ,EAAEg8B,GAAG0wB,KAAO,SAAS1Z,EAAYlc,EAAU21B,EAAM38C,EAAUtG,GACzD,IAAIvP,EAAqB0yD,EACRrD,EADRsD,EAAY,GAAmBC,EAAa,GACjDC,EAAO5xD,KAAuB6xD,EAAW/sD,EAAEi9B,GAAGqvB,cAC9CU,GAAQ,EAMZ,QA7DH,IAyDOl2B,IAAwBA,EAAW92B,EAAEi9B,GAAGC,OAAOC,SAAW,UAzDjE,IA0DO3zB,IAAqBA,EAAQ,GAC7BxJ,EAAEi9B,GAAGrY,MAAKkS,EAAW,GAEA,iBAAdkc,EAET4Z,EAAUrB,GAAiBvY,EAC3B4Z,EAAUpB,GAAqB10B,EAAW,IAC1C81B,EAAUlB,GAAkBliD,EAAQ,IACpCojD,EAAUnB,GAAoBgB,GAAQ,SACtCM,EAAW/sD,EAAEi9B,GAAGsvB,iBACX,CAGL,IAAKtyD,KAFL0yD,EAAgB,GAEJ3Z,EACN4Y,EAAoBhyC,KAAK3f,GAAM4yD,GAAc5yD,EAAM,IAAM+4C,EAAW/4C,GAAO,MAC1E2yD,EAAU3yD,GAAO+4C,EAAW/4C,GAAM0yD,EAAc/qD,KAAe3H,EA/DrCuH,QAAQ,WAAY,OAAO0M,gBAiExD2+C,IAAYD,EAAUlvD,GAAamvD,EAAYF,EAAc/qD,KAAKlE,IAClEo5B,EAAW,GAA2B,iBAAfkc,IACzB4Z,EAAUzB,GAAsBwB,EAAczpD,KAAK,MACnD0pD,EAAUxB,GAAsBt0B,EAAW,IAC3C81B,EAAUtB,GAAmB9hD,EAAQ,IACrCojD,EAAUvB,GAAqBoB,GAAQ,UAkC3C,OA9BAnD,EAAkB,SAASxnC,GACzB,QAAqB,IAAVA,EAAuB,CAChC,GAAIA,EAAMlhB,SAAWkhB,EAAMoP,cAAe,OAC1ClxB,EAAE8hB,EAAMlhB,QAAQs4C,OAAO6T,EAAUzD,QAEjCtpD,EAAE9E,MAAMg+C,OAAO6T,EAAUzD,GAE3B0D,GAAQ,EACRhtD,EAAE9E,MAAM4M,IAAI+jD,GACZ/7C,GAAYA,EAASjX,KAAKqC,OAExB47B,EAAW,IACb57B,KAAKhB,KAAK6yD,EAAUzD,GAGpBv5C,YAAW,WACLi9C,GACJ1D,EAAgBzwD,KAAKi0D,KACE,KAApBh2B,EAAWttB,GAAiB,KAInCtO,KAAK+D,QAAU/D,KAAK3B,IAAI,GAAG0zD,WAE3B/xD,KAAK4M,IAAI8kD,GAEL91B,GAAY,GAAG/mB,YAAW,WAC5B+8C,EAAK5wB,MAAK,WAAYotB,EAAgBzwD,KAAKqC,WAC1C,GAEIA,MAGTywD,EAAS,KArHV,CAsHE7b,Q,eCtHF,SAAU9vC,EAAGS,GACGyF,OAAOyB,SAA6BunB,gBAAnD,IACEg+B,EAAWltD,EAAEg8B,GAAG/lB,KAAMk3C,EAAWntD,EAAEg8B,GAAGl4B,KAAMspD,EAAaptD,EAAEg8B,GAAGzZ,OAEhE,SAASmqC,EAAKhlD,EAAIR,EAAOmmD,EAASzmD,EAAOkJ,GACnB,mBAAT5I,GAAwB4I,IAAUA,EAAW5I,EAAOA,OALlE,GAMG,IAAI/I,EAAQ,CAAEkvD,QAASA,GAKvB,OAJIzmD,IACFzI,EAAMyI,MAAQA,EACdc,EAAGI,IAAI9H,EAAEi9B,GAAGovB,UAAY,mBAAoB,QAEvC3kD,EAAG8kD,QAAQruD,EAAO+I,EAAO,KAAM4I,GAGxC,SAAShM,EAAK4D,EAAIR,EAAON,EAAOkJ,GAC9B,OAAO48C,EAAKhlD,EAAIR,EAAO,EAAGN,GAAO,WAC/BumD,EAASt0D,KAAKmH,EAAE9E,OAChB4U,GAAYA,EAASjX,KAAKqC,SAI9B8E,EAAEg8B,GAAG/lB,KAAO,SAAS/O,EAAO4I,GAI1B,OAHAo9C,EAASr0D,KAAKqC,WAtBjB,IAuBOgM,EAAqBA,EAAQ,EAC5BhM,KAAK4M,IAAI,UAAW,GAClB4kD,EAAKxxD,KAAMgM,EAAO,EAAG,MAAO4I,IAGrC9P,EAAEg8B,GAAGl4B,KAAO,SAASoD,EAAO4I,GAC1B,YA7BH,IA6BO5I,EAA4BimD,EAASt0D,KAAKqC,MAClC4I,EAAK5I,KAAMgM,EAAO,MAAO4I,IAGvC9P,EAAEg8B,GAAGzZ,OAAS,SAASrb,EAAO4I,GAC5B,YAlCH,IAkCO5I,GAAuC,kBAATA,EACzBkmD,EAAWv0D,KAAKqC,KAAMgM,GACnBhM,KAAKghC,MAAK,WACpB,IAAIx0B,EAAK1H,EAAE9E,MACXwM,EAAwB,QAArBA,EAAGI,IAAI,WAAuB,OAAS,QAAQZ,EAAO4I,OAI7D9P,EAAEg8B,GAAGsxB,OAAS,SAASpmD,EAAOmmD,EAASv9C,GACrC,OAAO48C,EAAKxxD,KAAMgM,EAAOmmD,EAAS,KAAMv9C,IAG1C9P,EAAEg8B,GAAGuxB,OAAS,SAASrmD,EAAO4I,GAC5B,IAAIlP,EAAS1F,KAAK4M,IAAI,WAGtB,OAFIlH,EAAS,EAAG1F,KAAK4M,IAAI,UAAW,GAC/BlH,EAAS,EACPssD,EAASr0D,KAAKqC,MAAMoyD,OAAOpmD,EAAOtG,EAAQkP,IAGnD9P,EAAEg8B,GAAG/X,QAAU,SAAS/c,EAAO4I,GAC7B,OAAOhM,EAAK5I,KAAMgM,EAAO,KAAM4I,IAGjC9P,EAAEg8B,GAAGwxB,WAAa,SAAStmD,EAAO4I,GAChC,OAAO5U,KAAKghC,MAAK,WACf,IAAIx0B,EAAK1H,EAAE9E,MACXwM,EACwB,GAArBA,EAAGI,IAAI,YAAwC,QAArBJ,EAAGI,IAAI,WAAwB,SAAW,WACrEZ,EAAO4I,OA9Dd,CAkEEggC,Q,gBCtEH;;;;;;;;;;IAUC,SAASl2C,EAAEgT,GAAG,aAAa,GAA4B,iBAAiBnU,EAAOD,QAAQ,CAAC,IAAIoB,EAAE+N,SAAS,MAAM,IAAIvH,MAAM,wCAAwC3H,EAAOD,QAAQoU,EAAEhT,QAA6C,EAAkB,GAAE,EAACgT,EAAEhT,QAAE,2DAAtP,CAA8P,oBAAoBsM,OAAOA,OAAOhL,MAAK,SAASuyD,GAAG,aAAa,IAAIC,EAAE,CAAC1nD,IAAI,EAAEo7B,OAAO,EAAEusB,UAAU,EAAEC,SAAS,EAAEC,aAAa,KAAKC,YAAY,SAASC,QAAQ,KAAKC,cAAa,EAAGC,WAAW,KAAKC,aAAY,EAAGC,QAAQ,KAAKC,OAAO,KAAKC,eAAe,KAAKC,SAAS,KAAKC,eAAe,IAAIC,SAAQ,EAAGC,QAAQ,KAAKC,UAAU,QAAQ1uD,EAAE,SAASpG,EAAEgT,EAAEzT,GAAGmqB,QAAQqrC,IAAI,oBAAoB/0D,EAAE,MAAMT,EAAE,iDAAiDyT,EAAE,cAAc,aAAa,oBAAoB,eAAe,oBAAoB,iBAAiBwyC,EAAEqO,EAAE9lD,SAASinD,EAAE,SAASz0D,EAAEwgB,GAAG,IAAIxhB,EAAE+B,KAAK,GAAG,iBAAiBf,IAAIA,EAAEilD,EAAE38B,cAActoB,KAAKA,EAAE,OAAM,EAAGwgB,EAAE8zC,SAASzuD,EAAE,UAAU,aAAa,UAAU2a,EAAE+zC,WAAW1uD,EAAE,YAAY,cAAc,UAAU,IAAIxF,EAAE,GAAGxB,EAAE41D,EAAEC,QAAQp0D,EAAEN,EAAE8P,WAAW,WAAWjR,EAAE81D,SAASr0D,EAAE,cAAcA,EAAE2P,MAAM/C,SAAS,YAAY,IAAI6kB,EAAE,WAAW,IAAItyB,EAAE,EAAEiH,UAAUC,aAAQ,IAASD,UAAU,GAAGA,UAAU,GAAG,GAAG7H,EAAE26C,cAAc/5C,KAAKZ,EAAE26C,cAAcn5C,KAAKA,EAAEpB,OAAOuH,OAAO,GAAG+sD,EAAElzD,EAAEZ,KAAKA,EAAE,WAAW,OAAOY,EAAEg0D,SAAS5hD,EAAE,WAAW,IAAIhT,EAAEgT,EAAEpS,EAAEyzD,YAAYzzD,EAAEi0D,QAAQ,GAAG7hD,EAAE,CAAC,IAAIzT,EAAEs0D,EAAEnqB,WAAW,GAAG1pC,EAAE+gB,GAAGngB,EAAEpB,OAAOuH,OAAO,GAAG+sD,EAAE9zD,GAAG,KAAKs0D,YAAY,IAAI,IAAIx1D,KAAKkU,EAAElU,GAAGS,IAAIH,EAAE26C,cAAc/mC,EAAElU,KAAKwzB,EAAEtf,EAAElU,QAAQ,CAAC,IAAIyB,EAAE,GAAG,IAAI,IAAIM,KAAKmS,EAAE,CAAC,IAAIpT,EAAE,GAAGA,EAAEiB,GAAGmS,EAAEnS,GAAGN,EAAEyH,KAAKpI,GAAG,IAAI,IAAIb,EAAEwB,EAAE2G,OAAO,EAAE,GAAGnI,EAAEA,IAAI,CAAC,IAAImJ,EAAE3H,EAAExB,GAAGI,EAAEK,OAAO8S,KAAKpK,GAAG,GAAG3I,GAAGJ,IAAIC,EAAE26C,cAAc7xC,EAAE/I,KAAKmzB,EAAEpqB,EAAE/I,QAAQS,EAAE,CAACsO,IAAI,GAAGT,SAAS,KAAK0nD,MAAM,WAAW,IAAIn1D,EAAE,EAAEiH,UAAUC,aAAQ,IAASD,UAAU,GAAGA,UAAU,GAAG,GAAG7H,EAAE4M,SAASzL,EAAEK,EAAEszD,gBAAe,IAAKn1D,EAAEq2D,YAAYr2D,EAAEs2D,SAASz1D,EAAE6N,SAAS,QAAQlN,EAAEiQ,MAAM/C,SAAS,QAAQlN,EAAEiQ,MAAMhE,KAAKzN,EAAEu2D,WAAW,KAAK/0D,EAAEiQ,MAAM/D,MAAM1N,EAAE0N,WAAM,IAASzM,EAAEwnC,OAAOjnC,EAAEiQ,MAAMg3B,OAAO,OAAOjnC,EAAEiQ,MAAMg3B,OAAOxnC,EAAEwnC,OAAO,UAAK,IAASxnC,EAAEoM,IAAI7L,EAAEiQ,MAAMpE,IAAI,OAAO7L,EAAEiQ,MAAMpE,IAAIpM,EAAEoM,IAAI,KAAK7L,EAAE0I,UAAU1I,EAAE0I,UAAUtB,IAAI/G,EAAEszD,aAAa3zD,EAAEkE,WAAW,IAAI7D,EAAEszD,YAAYtzD,EAAE2zD,SAAS3zD,EAAE2zD,QAAQt1D,KAAKsB,EAAEf,OAAOuH,OAAO,GAAGnG,MAAM20D,QAAQ,WAAW,IAAIv1D,EAAE,EAAEiH,UAAUC,aAAQ,IAASD,UAAU,GAAGA,UAAU,GAAG,GAAG,GAAGjH,EAAE6N,KAAK7N,EAAE6N,OAAM,GAAG,IAAK7N,EAAE6N,MAAM,UAAUjO,EAAE6N,UAAU,OAAO7N,EAAE6N,iBAAY,IAASzN,EAAEoM,UAAK,IAASpM,EAAEwnC,aAAQ,IAASxnC,EAAEoM,MAAM+S,SAAS/f,EAAE81D,SAAS30D,EAAE,SAAS,KAAKP,EAAEoM,UAAK,IAASpM,EAAEwnC,SAASroB,SAAS/f,EAAE81D,SAAS30D,EAAE,YAAY,KAAKP,EAAEwnC,QAAQ,EAAC,IAAKxnC,EAAE6N,MAAK,IAAK9O,EAAEq2D,YAAYr2D,EAAEq+C,UAAS,IAAKr+C,EAAEq2D,YAAYr2D,EAAEs2D,SAAS,IAAIriD,EAAEhT,EAAEyN,UAAU7N,EAAEsO,IAAIT,SAAS7N,EAAE6N,SAASuF,EAAEzS,EAAEiQ,MAAM/C,SAASuF,EAAEzS,EAAEiQ,MAAMhE,MAAK,IAAKxM,EAAE6N,KAAKjO,EAAEsO,IAAI1B,KAAKzN,EAAEy2D,aAAa,KAAKj1D,EAAEiQ,MAAM/D,MAAM,aAAauG,EAAEpT,EAAEsO,IAAIzB,MAAM1N,EAAE0N,WAAM,IAASzM,EAAEwnC,OAAOjnC,EAAEiQ,MAAMg3B,QAAO,IAAKxnC,EAAE6N,KAAK,GAAG,OAAOtN,EAAEiQ,MAAMg3B,OAAOxnC,EAAEwnC,OAAO,UAAK,IAASxnC,EAAEoM,IAAI7L,EAAEiQ,MAAMpE,KAAI,IAAKpM,EAAE6N,KAAK,GAAG,OAAOtN,EAAEiQ,MAAMpE,IAAIpM,EAAEoM,IAAI,KAAK7L,EAAE0I,UAAU1I,EAAE0I,UAAU1F,OAAO3C,EAAEszD,aAAa3zD,EAAEkE,UAAUlE,EAAEkE,UAAUmD,QAAQ,IAAI6N,OAAO,UAAU7U,EAAEszD,YAAYrlD,MAAM,KAAKvF,KAAK,KAAK,UAAU,MAAM,KAAK1I,EAAE4zD,QAAQ5zD,EAAE4zD,OAAOv1D,KAAKsB,EAAEf,OAAOuH,OAAO,GAAGnG,OAAO7B,EAAE,CAAC+O,GAAG03C,EAAEx3C,cAAc,OAAOsnD,WAAW,KAAKE,aAAa,KAAK/oD,MAAM,KAAK2oD,YAAW,EAAG1vD,KAAK,WAAW,IAAI,IAAI1F,KAAKjB,EAAE+O,GAAGrJ,UAAU,gBAAgB7E,EAAEsO,IAAInP,EAAE+O,GAAG0C,MAAMxQ,GAAGJ,EAAEsO,IAAIlO,GAAGjB,EAAE+O,GAAG0C,MAAM,WAAW,KAAK,IAAIwC,EAAE5T,EAAE81D,SAAS30D,GAAGxB,EAAEu2D,WAAWl2D,EAAE+M,OAAO5L,GAAGiM,MAAM2S,SAASnM,EAAEs2B,aAAa,GAAGvqC,EAAEy2D,aAAap2D,EAAEqO,SAASlN,GAAGiM,KAAKzN,EAAE0N,MAAMrN,EAAE81D,SAAS30D,EAAE,UAAU80D,OAAO,WAAWx0D,EAAEsN,aAAapP,EAAE+O,GAAGvN,GAAGxB,EAAEq2D,YAAW,GAAIhY,OAAO,WAAWr+C,EAAE+O,GAAGjN,EAAEyP,YAAYvR,EAAE+O,IAAI/O,EAAEq2D,YAAW,IAAKltD,OAAE,EAAO/I,OAAE,EAAO2T,OAAE,EAAO5T,OAAE,EAAO0hB,OAAE,EAAOC,OAAE,EAAO5R,OAAE,EAAO9G,OAAE,EAAOstD,OAAE,EAAOnQ,OAAE,EAAOoQ,OAAE,EAAOC,OAAE,EAAO3mD,OAAE,EAAOgmC,OAAE,EAAO4gB,OAAE,EAAOC,OAAE,EAAOxD,OAAE,EAAOyD,OAAE,EAAivD5Q,EAAE2O,EAAEr9C,aAAagvC,EAAElwB,gBAAgB/oB,UAAUwpD,EAAE,EAAEnN,OAAE,EAAOoN,EAAE,WAAWJ,EAAEE,IAAI52D,EAAEmzD,IAAIrjD,EAAE4R,EAAE1hB,EAAEiJ,EAAEutD,EAAE1gB,EAAE/lC,EAAE2mD,EAAE,IAAI51D,EAAE6zD,EAAEr9C,aAAagvC,EAAElwB,gBAAgB/oB,UAAUyG,EAAE5T,EAAE+M,OAAO5L,GAAG6L,IAAI7M,EAAEyT,EAAEhT,EAAElB,OAAE,EAAO8pD,EAAE5oD,EAAEklD,EAAE,KAAK,OAAO6Q,EAAE/1D,EAAEklD,EAAEyQ,GAAGzQ,EAAEllD,GAAGgP,EAAE7G,GAAG6sC,EAAEygB,EAAE,IAAI70D,EAAEwzD,cAAcpf,EAAE,EAAE7sC,IAAInI,EAAE41D,EAAEtQ,GAAGr2C,GAAG0mD,EAAErQ,GAAGsQ,EAAEtQ,GAAG1kD,EAAEwzD,cAAc,GAAGt1D,EAAE82D,EAAE3mD,EAAEq2C,GAAGxmD,EAAE,GAAGc,EAAE21D,QAAQ,CAAC9nD,SAAS,WAAW+5B,OAAO3mB,EAAEhgB,EAAE8nC,aAAa35B,EAAE7G,IAAI6sC,GAAGp0C,EAAEwzD,aAAa,SAASxL,EAAErpD,EAAEq2D,EAAEH,GAAGxmD,EAAE,GAAGrP,EAAEu1D,MAAM,CAAC3tB,OAAOiuB,IAAI,UAAU71D,EAAE6N,UAAU7N,EAAE21D,QAAQ,CAAC9nD,SAAS,WAAWrB,IAAI4G,EAAE7K,EAAEwtD,EAAEI,EAAEzQ,IAAIh3C,KAAK+2C,KAAK9lD,EAAE+lD,GAAG,GAAG,UAAU1lD,EAAE6N,SAAS7N,EAAE21D,QAAQ,CAAC9nD,SAAS,WAAWrB,IAAI4G,EAAE7K,EAAEwtD,EAAErQ,EAAEyQ,IAAI/1D,EAAEmI,EAAEm9C,GAAGtyC,GAAGpT,EAAEu1D,MAAM,CAAC/oD,IAAIjE,EAAEm9C,IAAI1lD,EAAEu1D,MAAM,CAAC/oD,IAAIjE,EAAEm9C,IAAI1lD,EAAE21D,QAAQ,CAAC1nD,MAAK,KAAMi7C,GAAE,EAAGmN,GAAE,EAAGC,EAAE,WAAWpN,IAAI1pD,EAAE8oB,MAAMo3B,OAAOuU,EAAE,SAASmC,GAAGlN,GAAE,IAAK9nC,EAAE,WAAW,OAAOzgB,EAAE2lC,cAAc,SAAS9mC,EAAE81D,SAAS30D,EAAE,YAA3+E,WAAW,IAAIP,EAAEgT,EAAEzT,EAAET,EAAEc,EAAEsO,KAAKlO,EAAEO,EAAEyS,EAAE5T,EAAE+2D,iBAAiBn2D,GAAGT,EAAEH,EAAE81D,SAASl1D,GAAGlB,EAAE,CAACuN,OAAOrM,EAAE2oC,aAAa,KAAKn8B,KAAKwG,EAAExG,KAAKi7B,MAAMz0B,EAAEy0B,MAAMr7B,IAAI4G,EAAE5G,IAAIo7B,OAAOx0B,EAAEw0B,OAAO/5B,SAASlO,EAAEkO,SAAS4tC,QAAQ97C,EAAE87C,QAAQ+a,cAAc72D,EAAE62D,cAAcC,UAAU92D,EAAE82D,UAAU/sB,WAAWt2B,EAAEs2B,WAAW4B,YAAYl4B,EAAEk4B,YAAY7B,UAAUr2B,EAAEq2B,UAAU4B,aAAaj4B,EAAEi4B,aAAaqrB,YAAYtjD,EAAEsjD,YAAYC,aAAavjD,EAAEujD,cAAcvjD,EAAEwjD,QAAQ13D,EAAE03D,MAAMxjD,EAAEwjD,OAAO,QAAQxjD,EAAEyjD,WAAW33D,EAAE23D,SAASzjD,EAAEyjD,UAAU,QAAQl3D,EAAEm3D,eAAe53D,EAAE43D,aAAan3D,EAAEm3D,cAAc53D,EAAE2N,MAAM,SAASuG,EAAEvG,MAAMuG,EAAEvG,MAAM,eAAe3N,EAAEu3D,WAAW,eAAev3D,EAAE43D,aAAa12D,EAAEyoC,YAAY,KAAKlpC,EAAEkN,MAAM3N,GAAGC,EAAE2G,OAAOwC,KAAKtH,EAAEuzD,WAAW,aAAavzD,EAAEuzD,SAASvzD,EAAEuzD,QAAQ/jC,UAAU,IAAIxvB,EAAEuzD,QAAQ/jC,UAAU,iBAAiBxvB,EAAEuzD,SAASvzD,EAAEuzD,mBAAmB,oBAAoBwC,aAAaA,aAAaC,YAAYz3D,EAAEyB,EAAEuzD,QAAQjsD,EAAEs9C,EAAE,iBAAiB5kD,EAAEuzD,QAAQ3O,EAAE38B,cAAcjoB,EAAEuzD,SAASvzD,EAAEuzD,QAAQtzD,EAAE+0D,GAAGE,EAAE,WAAW,IAAI91D,EAAEO,EAAEooC,cAAcxpB,SAASvf,EAAEsO,IAAIm7B,YAAY,IAAIlqB,SAASvf,EAAEsO,IAAI+8B,eAAe,GAAGj4B,GAAG4iD,GAAG,GAAG51D,EAAE,OAAO,GAAGgT,GAAGA,GAAG,EAAE4iD,EAAE51D,MAAMd,GAAGmzD,EAAE,WAAW,OAAOnqD,EAAEoG,KAAKqH,IAAI6vC,EAAElwB,gBAAgBiT,aAAaid,EAAE58B,KAAKiuC,aAAarR,EAAElwB,gBAAgBuhC,aAAarR,EAAE58B,KAAK+f,aAAa6c,EAAElwB,gBAAgBqT,cAAcxpC,EAAEwpC,iBAAiB/nB,EAAE1Y,EAAE,EAAE9I,EAAE+M,OAAOhN,GAAGiN,IAAIyU,EAAEjgB,EAAEuzD,QAAQjsD,EAAE,EAAE9I,EAAE+M,OAAOtL,GAAGuL,IAAIwU,EAAE3R,EAAE4kD,EAAElqB,YAAYksB,EAAEt1D,EAAEu2D,WAAW33C,SAASvf,EAAEsO,IAAIm7B,YAAY,GAAGv2B,EAAElS,EAAEqzD,aAAa,iBAAiBrzD,EAAEqzD,aAAazO,EAAE38B,cAAcjoB,EAAEqzD,cAAcrzD,EAAEqzD,aAAa,KAAK9rD,EAAE+lC,MAAMttC,EAAEwL,OAAO,EAAExL,EAAEwL,IAAImS,QAAQ,KAAKwpB,WAAWnnC,EAAEwL,KAAK,IAAI6C,EAAErO,EAAEwL,IAAIqpD,EAAEvnB,MAAMttC,EAAE4mC,UAAU,EAAE5mC,EAAE4mC,OAAOjpB,QAAQ,KAAKwpB,WAAWnnC,EAAE4mC,QAAQ,IAAIv4B,EAAErO,EAAE4mC,OAAO8d,EAAExyC,EAAEA,EAAEgkD,UAAUl2D,EAAEozD,SAASpzD,EAAEozD,SAAS,EAAE0B,EAAExnB,MAAMttC,EAAEmzD,aAAa,EAAEnzD,EAAEmzD,UAAUx1C,QAAQ,KAAKwpB,WAAWnnC,EAAEmzD,WAAW,IAAI9kD,EAAErO,EAAEmzD,UAAU4B,EAAE/0C,EAAEzY,EAAEm9C,EAAEuQ,EAAkxB/2D,GAAII,GAAG02D,EAAEM,KAAKF,IAAIlN,IAAI1pD,EAAE8oB,MAAM5nB,KAAKuzD,EAAE,SAASmC,GAAGlN,GAAE,KAAMoN,KAAKa,EAAE,WAAWx2D,EAAEiQ,MAAM/C,SAAS,GAAGlN,EAAEiQ,MAAMhE,KAAK,GAAGjM,EAAEiQ,MAAMpE,IAAI,GAAG7L,EAAEiQ,MAAMg3B,OAAO,GAAGjnC,EAAEiQ,MAAM/D,MAAM,GAAGlM,EAAE0I,UAAU1I,EAAE0I,UAAU1F,OAAO3C,EAAEszD,aAAa3zD,EAAEkE,UAAUlE,EAAEkE,UAAUmD,QAAQ,IAAI6N,OAAO,UAAU7U,EAAEszD,YAAYrlD,MAAM,KAAKvF,KAAK,KAAK,UAAU,MAAM,KAAK1J,EAAEsO,IAAI,KAAKtO,EAAE6N,SAAS,QAAQ1O,EAAEq2D,YAAYr2D,EAAEq+C,UAAU9I,EAAE,WAAWyiB,IAAI/jD,IAAIhT,IAAIk2D,IAAIl1C,KAAK6kC,EAAE,WAAWjlD,EAAE6zD,gBAAgB7zD,EAAE6zD,eAAex1D,KAAKsB,EAAEf,OAAOuH,OAAO,GAAGnG,IAAI0zC,IAAI1zC,EAAE8zD,UAAU9zD,EAAE8zD,SAASz1D,KAAKsB,EAAEf,OAAOuH,OAAO,GAAGnG,KAAKo2D,EAAEp2D,EAAE+zD,eAAev1D,EAAE0lC,SAAS+gB,EAAEjlD,EAAE+zD,gBAAgB9O,EAAEoR,EAAE,WAAWhB,IAAI72D,EAAE8oB,MAAMo3B,OAAOuU,EAAE,SAASmD,GAAGf,GAAE,GAAIC,KAAKgB,EAAE,WAAWjB,IAAI72D,EAAE8oB,MAAM5nB,KAAKuzD,EAAE,SAASmD,GAAGf,GAAE,GAAIjjD,IAAIhT,IAAIk2D,IAAIl1C,KAAK1f,KAAKY,QAAQ,SAASlC,GAAG,OAAOA,EAAEY,EAAEZ,GAAGR,OAAOuH,OAAO,GAAGnG,IAAIU,KAAK61D,QAAQ7iB,EAAEhzC,KAAKiV,OAAO,SAASvW,GAAGsyB,EAAEtyB,GAAG+gB,EAAEvhB,OAAOuH,OAAO,GAAGga,EAAE/gB,GAAG,IAAIs0C,KAAKhzC,KAAK+zD,OAAO6B,EAAE51D,KAAK87C,OAAO6Z,EAAE31D,KAAKi/B,QAAQ,WAAW02B,IAAIF,KAAKz1D,KAAK81D,cAAc,SAASp3D,EAAEgT,GAAG,mBAAmBzT,EAAES,IAAIT,EAAES,GAAGgT,IAAI1R,KAAK+1D,OAAO,WAAWjxD,EAAE,SAAS,UAAU,UAAUkuC,KAAKhiB,EAAEvR,GAAGm2C,IAAI93D,EAAE8oB,MAAM5nB,KAAKuzD,EAAE,OAAOvf,IAAI,QAAG,IAASuf,EAAEyD,OAAO,CAAC,IAAIx4D,EAAE+0D,EAAEyD,OAAO/2D,EAAE,WAAWzB,EAAEsjC,GAAG1rB,OAAO,CAAC6gD,SAAS,SAASvkD,EAAEzT,GAAG,OAAO+B,KAAK4F,OAAO,YAAY8L,EAAElU,EAAEsC,KAAKE,KAAK3B,IAAI,GAAGY,GAAG2B,UAAUZ,KAAKghC,MAAK,WAAW,IAAItiC,EAAElB,EAAEsC,KAAKE,KAAKf,GAAGP,EAAEA,EAAEo3D,cAAcpkD,EAAEzT,IAAIS,EAAE,IAAIg1D,EAAE1zD,KAAK0R,GAAGlU,EAAEsC,KAAKE,KAAKf,EAAEP,OAAMsB,QAAQ,OAAOuyD,EAAE0D,SAAS1D,EAAE0D,UAAUvC,EAAEA,KAAI,SAAS71D,GAAG,aAAa,IAAIa,EAAEb,EAAEo4D,SAASx2C,EAAE5hB,EAAE4O,SAAS,mBAAmBvO,OAAOuH,QAAQvH,OAAOC,eAAeD,OAAO,SAAS,CAACO,MAAM,SAASC,EAAEgT,GAAG,GAAG,MAAMhT,EAAE,MAAM,IAAIy6B,UAAU,8CAA8C,IAAI,IAAIl7B,EAAEC,OAAOQ,GAAGlB,EAAE,EAAEA,EAAEmI,UAAUC,OAAOpI,IAAI,CAAC,IAAIyB,EAAE0G,UAAUnI,GAAG,GAAG,MAAMyB,EAAE,IAAI,IAAIM,KAAKN,EAAEf,OAAOkB,UAAUC,eAAe1B,KAAKsB,EAAEM,KAAKtB,EAAEsB,GAAGN,EAAEM,IAAI,OAAOtB,GAAG8J,UAAS,EAAGD,cAAa,IAAK9G,MAAM5B,UAAUiI,UAAUrG,MAAM5B,UAAUiI,QAAQ,SAAS3I,GAAG,IAAIgT,EAAEzT,EAAE,GAAG,MAAM+B,KAAK,MAAM,IAAIm5B,UAAU,+BAA+B,IAAI37B,EAAEU,OAAO8B,MAAMf,EAAEzB,EAAEoI,SAAS,EAAE,GAAG,mBAAmBlH,EAAE,MAAM,IAAIy6B,UAAUz6B,EAAE,sBAAsB,IAAI,EAAEiH,UAAUC,SAAS8L,EAAE/L,UAAU,IAAI1H,EAAE,EAAEA,EAAEgB,GAAG,CAAC,IAAIM,EAAEtB,KAAKT,IAAI+B,EAAE/B,EAAES,GAAGS,EAAEf,KAAK+T,EAAEnS,EAAEtB,EAAET,IAAIS,OAAO,IAAIyT,EAAE,WAAW,IAAIhT,EAAE+gB,EAAEuU,gBAAgBtiB,EAAE,aAAa,SAASlU,EAAEkB,GAAG,IAAIgT,EAAE7T,EAAE+oB,MAAM,OAAOlV,EAAEhM,OAAOgM,EAAEhM,QAAQgM,EAAEwlB,YAAYx4B,EAAEgT,EAAEhT,EAAE4L,iBAAiBoH,EAAE,SAAShT,EAAEgT,EAAEzT,GAAGS,EAAE4L,iBAAiBoH,EAAEzT,GAAE,IAAKS,EAAEo5B,cAAcpmB,EAAE,SAASA,EAAEhT,EAAET,GAAGyT,EAAEhT,EAAET,GAAGA,EAAEi4D,YAAY,WAAW,IAAIx3D,EAAElB,EAAEkU,GAAGzT,EAAEi4D,YAAYv4D,KAAKM,EAAES,IAAI,WAAW,IAAIA,EAAElB,EAAEkU,GAAGzT,EAAEN,KAAK+T,EAAEhT,IAAIgT,EAAEomB,YAAY,KAAKp5B,EAAEgT,EAAEhT,EAAET,MAAM,IAAIA,EAAE,aAAa,OAAOS,EAAEyW,oBAAoBlX,EAAE,SAASS,EAAEgT,EAAEzT,GAAGS,EAAEyW,oBAAoBzD,EAAEzT,GAAE,IAAKS,EAAEs5B,cAAc/5B,EAAE,SAASyT,EAAEzT,EAAET,GAAGkU,EAAEsmB,YAAY,KAAK/5B,EAAEyT,EAAEzT,EAAET,IAAI,WAAWkU,EAAEzT,EAAET,GAAG,MAAMkB,GAAGgT,EAAEzT,EAAET,QAAG,KAAU,CAACwB,KAAK0S,EAAEssC,OAAO//C,GAA9jB,GAAokBK,EAAE,SAASI,EAAEgT,GAAG,OAAO7T,EAAEimC,iBAAiBpyB,EAAE+N,EAAEokB,YAAYC,iBAAiBplC,EAAE,MAAMs7C,iBAAiBtoC,GAAG+N,EAAEokB,YAAYC,iBAAiBplC,EAAE,MAAMA,EAAEy3D,aAAazkD,EAAEhT,EAAEy3D,aAAazkD,EAAEpL,QAAQ,QAAO,SAAS5H,GAAG,OAAOA,EAAE2R,cAAc/J,QAAQ,IAAI,QAAO5H,EAAEy3D,kBAAa,GAAQ14D,EAAE,SAASiB,GAAG,IAAIgT,EAAEhT,EAAEs9B,wBAAwB/9B,EAAEJ,EAAEqX,aAAauK,EAAEuU,gBAAgB/oB,UAAUzN,EAAEK,EAAEy9C,aAAa77B,EAAEuU,gBAAgB5oB,WAAW,MAAM,CAACN,IAAI4G,EAAE5G,IAAI7M,EAAEiN,KAAKwG,EAAExG,KAAK1N,IAAIkB,EAAEi1D,QAAQ,CAAClb,cAAc,SAAS/5C,GAAG,IAAI,IAAIgT,KAAKhT,EAAE,OAAM,EAAG,OAAM,GAAI8kC,SAAS,SAAShmC,EAAEyB,EAAEM,GAAG,IAAIjB,OAAE,EAAO,OAAO,WAAW,IAAII,EAAEsB,KAAK0R,EAAE/L,UAAU1H,EAAEsB,IAAIjB,EAAEwQ,aAAaxQ,GAAGA,EAAEuW,YAAW,WAAWvW,EAAE,KAAKiB,GAAG/B,EAAEoH,MAAMlG,EAAEgT,KAAIzS,GAAGhB,GAAGT,EAAEoH,MAAMlG,EAAEgT,KAAKhH,SAAS,SAAShM,EAAEgT,GAAG,OAAOhT,EAAEiJ,UAAUjJ,EAAEiJ,UAAUqgB,SAAStW,GAAG,IAAIyC,OAAO,QAAQzC,EAAE,QAAQ,MAAMgN,KAAKhgB,EAAEyE,YAAY0H,OAAOpN,EAAE0O,SAAS,SAASzN,GAAG,IAAIgT,EAAEhT,EAAEkmC,aAAa3mC,EAAER,EAAEiU,GAAGlU,EAAEC,EAAEiB,GAAGO,EAAEX,EAAEoT,GAAGnS,EAAEjB,EAAEI,GAAG,OAAOT,EAAE6M,KAAK+S,SAAS5e,EAAE4oC,iBAAiB,EAAE5pC,EAAEiN,MAAM2S,SAAS5e,EAAE6oC,kBAAkB,EAAE,CAACh9B,IAAItN,EAAEsN,IAAI7M,EAAE6M,KAAK+S,SAASte,EAAEwoC,YAAY,GAAG78B,KAAK1N,EAAE0N,KAAKjN,EAAEiN,MAAM2S,SAASte,EAAEyoC,aAAa,KAAK4rB,SAASt1D,EAAEu2D,iBAAiB,SAASn2D,GAAG,IAAIgT,EAAEhT,EAAE87C,WAAU,GAAI9oC,EAAExC,MAAM6qC,QAAQ,OAAO/4C,MAAM5B,UAAUyF,MAAMlH,KAAK+T,EAAEmW,iBAAiB,wBAAwBxgB,SAAQ,SAAS3I,GAAGA,EAAEmtC,gBAAgB,WAAUntC,EAAEqQ,WAAWlC,aAAa6E,EAAEhT,EAAEk1B,aAAa,IAAI31B,OAAE,EAAOyT,EAAEykD,aAAal4D,EAAEyT,EAAEykD,aAAat4D,EAAEimC,mBAAmB7lC,EAAEwhB,EAAEokB,YAAYC,iBAAiBpyB,EAAE,OAAO,IAAIlU,EAAE,GAAG,IAAI,IAAIyB,KAAKhB,GAAG2uC,MAAM3tC,IAAI,iBAAiBhB,EAAEgB,IAAI,iBAAiBhB,EAAEgB,KAAKzB,EAAEyB,GAAGhB,EAAEgB,IAAI,GAAGf,OAAO8S,KAAKxT,GAAGoI,OAAO,EAAE,IAAI,IAAIrG,KAAK/B,EAAE,GAAGS,EAAE2uC,MAAMrtC,KAAK/B,EAAES,EAAEsB,GAAG+G,QAAQ,QAAO,SAAS5H,GAAG,OAAOA,EAAE2R,cAAc/J,QAAQ,IAAI,QAAOrI,EAAE+7C,iBAAiB/7C,EAAEsB,KAAK,GAAG/B,EAAE+jC,QAAQ,SAAS/jC,EAAEwqC,WAAWxqC,EAAE+jC,QAAQ/jC,EAAEwqC,aAAaxqC,EAAEosC,aAAapsC,EAAEwqC,aAAaxqC,EAAEuqC,WAAWvqC,EAAEwqC,aAAaxqC,EAAEmsC,eAAensC,EAAE+jC,OAAO/jC,EAAEwqC,YAAYxqC,EAAE+jC,OAAO,QAAQ/jC,EAAE+jC,QAAQ,QAAQ/jC,EAAEwqC,YAAY,QAAQxqC,EAAEosC,YAAY,CAAC,IAAItrC,EAAEI,EAAEs1D,WAAWt1D,EAAEqQ,WAAWilD,WAAWv2D,EAAEa,GAAGuf,SAASrgB,EAAE0N,OAAO,IAAI2S,SAASrgB,EAAE2oC,QAAQ,GAAGv/B,EAAElI,EAAEqQ,WAAWo4B,YAAYzoC,EAAEyoC,YAAY7oC,GAAGuf,SAASrgB,EAAE2oC,QAAQ,IAAItoB,SAASrgB,EAAE0N,OAAO,GAAGzN,EAAE,IAAImJ,GAAG,IAAIA,IAAIpJ,EAAE+jC,OAAO,QAAQ,OAAO7vB,EAAE3C,WAAWC,YAAY0C,GAAGA,EAAE,KAAKlU,GAAGopB,MAAMlV,GAAr6G,CAAy6G1G,S,eCDx1V,SAAUlG,GACT,aAKA,IACIuiB,EAAW,2BACXzd,EAAW,SAAU1F,GACvBY,EAAEZ,GAASqlB,GAAG,oBAAqBvpB,KAAKqnB,SAK1C,SAAS+uC,EAAUn1B,GACjB,IAAIl8B,EAAWk8B,EAAMC,KAAK,eAErBn8B,IAEHA,GADAA,EAAWk8B,EAAMC,KAAK,UACC,YAAYxiB,KAAK3Z,IAAaA,EAASuB,QAAQ,iBAAkB,KAG1F,IAAI+vD,EAAuB,MAAbtxD,EAAmBD,EAAE2H,UAAUxH,KAAKF,GAAY,KAE9D,OAAOsxD,GAAWA,EAAQzwD,OAASywD,EAAUp1B,EAAMsG,SAGrD,SAAS+uB,EAAW5kD,GACdA,GAAiB,IAAZA,EAAEkK,QACX9W,EAvBa,sBAuBD7C,SACZ6C,EAAEuiB,GAAQ2Z,MAAK,WACb,IAAIC,EAAgBn8B,EAAE9E,MAClBq2D,EAAgBD,EAAUn1B,GAC1BN,EAAgB,CAAEA,cAAe3gC,MAEhCq2D,EAAQ3rD,SAAS,UAElBgH,GAAe,SAAVA,EAAE7Q,MAAmB,kBAAkB6d,KAAKhN,EAAEhM,OAAO8tB,UAAY1uB,EAAEkjB,SAASquC,EAAQ,GAAI3kD,EAAEhM,UAEnG2wD,EAAQ1vC,QAAQjV,EAAI5M,EAAEq6C,MAAM,mBAAoBxe,IAE5CjvB,EAAE4sC,uBAENrd,EAAMC,KAAK,gBAAiB,SAC5Bm1B,EAAQ1rD,YAAY,QAAQgc,QAAQ7hB,EAAEq6C,MAAM,qBAAsBxe,WAhCtE/2B,EAAS2sD,QAAU,QAoCnB3sD,EAASxK,UAAUioB,OAAS,SAAU3V,GACpC,IAAIuvB,EAAQn8B,EAAE9E,MAEd,IAAIihC,EAAMvP,GAAG,wBAAb,CAEA,IAAI2kC,EAAWD,EAAUn1B,GACrBx5B,EAAW4uD,EAAQ3rD,SAAS,QAIhC,GAFA4rD,KAEK7uD,EAAU,CACT,iBAAkBgF,SAASunB,kBAAoBqiC,EAAQ/c,QAAQ,eAAe1zC,QAEhFd,EAAE2H,SAASC,cAAc,QACtBqU,SAAS,qBACTy1C,YAAY1xD,EAAE9E,OACdupB,GAAG,QAAS+sC,GAGjB,IAAI31B,EAAgB,CAAEA,cAAe3gC,MAGrC,GAFAq2D,EAAQ1vC,QAAQjV,EAAI5M,EAAEq6C,MAAM,mBAAoBxe,IAE5CjvB,EAAE4sC,qBAAsB,OAE5Brd,EACGta,QAAQ,SACRua,KAAK,gBAAiB,QAEzBm1B,EACGzrD,YAAY,QACZ+b,QAAQ7hB,EAAEq6C,MAAM,oBAAqBxe,IAG1C,OAAO,IAGT/2B,EAASxK,UAAUq3D,QAAU,SAAU/kD,GACrC,GAAK,gBAAgBgN,KAAKhN,EAAEkK,SAAU,kBAAkB8C,KAAKhN,EAAEhM,OAAO8tB,SAAtE,CAEA,IAAIyN,EAAQn8B,EAAE9E,MAKd,GAHA0R,EAAEmK,iBACFnK,EAAEwK,mBAEE+kB,EAAMvP,GAAG,wBAAb,CAEA,IAAI2kC,EAAWD,EAAUn1B,GACrBx5B,EAAW4uD,EAAQ3rD,SAAS,QAEhC,IAAKjD,GAAuB,IAAXiK,EAAEkK,OAAenU,GAAuB,IAAXiK,EAAEkK,MAE9C,OADe,IAAXlK,EAAEkK,OAAay6C,EAAQpxD,KAAKoiB,GAAQV,QAAQ,SACzCsa,EAAMta,QAAQ,SAGvB,IACI+vC,EAASL,EAAQpxD,KAAK,8CAE1B,GAAKyxD,EAAO9wD,OAAZ,CAEA,IAAIoX,EAAQ05C,EAAO15C,MAAMtL,EAAEhM,QAEZ,IAAXgM,EAAEkK,OAAeoB,EAAQ,GAAmBA,IACjC,IAAXtL,EAAEkK,OAAeoB,EAAQ05C,EAAO9wD,OAAS,GAAGoX,KAC1CA,IAA0CA,EAAQ,GAExD05C,EAAOtd,GAAGp8B,GAAO2J,QAAQ,aAiB3B,IAAIgwC,EAAM7xD,EAAEg8B,GAAGz2B,SAEfvF,EAAEg8B,GAAGz2B,SAZL,SAAgB02B,GACd,OAAO/gC,KAAKghC,MAAK,WACf,IAAIC,EAAQn8B,EAAE9E,MACVF,EAAQmhC,EAAMnhC,KAAK,eAElBA,GAAMmhC,EAAMnhC,KAAK,cAAgBA,EAAO,IAAI8J,EAAS5J,OACrC,iBAAV+gC,GAAoBjhC,EAAKihC,GAAQpjC,KAAKsjC,OAOrDn8B,EAAEg8B,GAAGz2B,SAASkyB,YAAc3yB,EAM5B9E,EAAEg8B,GAAGz2B,SAASusD,WAAa,WAEzB,OADA9xD,EAAEg8B,GAAGz2B,SAAWssD,EACT32D,MAOT8E,EAAE2H,UACC8c,GAAG,6BAA8B+sC,GACjC/sC,GAAG,6BAA8B,kBAAkB,SAAU7X,GAAKA,EAAEwK,qBACpEqN,GAAG,6BAA8BlC,EAAQzd,EAASxK,UAAUioB,QAC5DkC,GAAG,+BAAgClC,EAAQzd,EAASxK,UAAUq3D,SAC9DltC,GAAG,+BAAgC,iBAAkB3f,EAASxK,UAAUq3D,SAzJ5E,CA2JCT,S,eC3JD,SAAUlxD,GACT,aAyBAA,EAAEg8B,GAAG+1B,qBAAuB,SAAUj7B,GACpC,IAAI6H,GAAS,EACTta,EAAMnpB,KACV8E,EAAE9E,MAAMwpB,IAAI,mBAAmB,WAAcia,GAAS,KAGtD,OADA5uB,YADe,WAAmB4uB,GAAQ3+B,EAAEqkB,GAAKxC,QAAQ7hB,EAAEg0C,QAAQge,WAAW/oD,OACzD6tB,GACd57B,MAGT8E,GAAE,WACAA,EAAEg0C,QAAQge,WA9BZ,WACE,IAAItqD,EAAKC,SAASC,cAAc,aAE5BqqD,EAAqB,CACvBC,iBAAmB,sBACnBC,cAAmB,gBACnBC,YAAmB,gCACnBJ,WAAmB,iBAGrB,IAAK,IAAI/4D,KAAQg5D,EACf,QAAuBxxD,IAAnBiH,EAAG0C,MAAMnR,GACX,MAAO,CAAEgQ,IAAKgpD,EAAmBh5D,IAIrC,OAAO,EAcgBqzD,GAElBtsD,EAAEg0C,QAAQge,aAEfhyD,EAAE8hB,MAAMub,QAAQg1B,gBAAkB,CAChCC,SAAUtyD,EAAEg0C,QAAQge,WAAW/oD,IAC/BspD,aAAcvyD,EAAEg0C,QAAQge,WAAW/oD,IACnC00B,OAAQ,SAAU/wB,GAChB,GAAI5M,EAAE4M,EAAEhM,QAAQgsB,GAAG1xB,MAAO,OAAO0R,EAAE4lD,UAAUrwC,QAAQriB,MAAM5E,KAAM2F,iBA5CxE,CAiDCqwD,S,iGClDmBuB,E,0GACnBx0D,KAAA,WACE,OACE,QAAII,UAAU,mBACX+D,YAAUlH,KAAKkG,QAAQM,a,EAK9B9B,OAAA,SAAO0F,EAAeiR,GAIpBA,EAAQlX,QAAS,G,EAQnB+B,MAAA,WACE,OAAO,IAAID,K,GAtB4BjC,K,+BCEtBwzD,E,iFACZvzD,UAAP,SAAiBhB,GACf,EAAMgB,UAAN,UAAgBhB,GAEhBA,EAAME,UAAY,kBAClBF,EAAM4G,gBAAkB,mCACxB5G,EAAM6G,cAAgB,wB,2BAGxB/G,KAAA,WAGE,OAFA/C,KAAKiD,MAAMC,SAAWlD,KAAKkG,QAAQM,UAEnC,YAAazD,KAAb,Y,EAGFW,iBAAA,WACE,IAAMoM,EAAOxO,IAAI2X,QAAQnJ,KAEzB,MAAO,CACLD,YAAOC,GAAO,IACd,UAAM3M,UAAU,gBAAgB6M,YAASF,M,EAS7C5J,MAAA,WACE,IAAMA,EAAQ,IAAID,IAWlB,OATAC,EAAMG,IAAI,SACRvD,IAAOgB,UAAU,CACfF,KAAM,sBACNV,SAAU5B,IAAIqP,WAAWC,MAAM,oCAC/BnN,QAASnC,IAAI2X,QAAQwH,OAAOzhB,KAAKsC,IAAI2X,YAEtC,KAGI/S,G,GAzCkC0D,KCFxB6tD,E,0GACnB10D,KAAA,WACE,OACE,QAAII,UAAU,mBACX+D,YAAUlH,KAAKkG,QAAQM,a,EAK9B9B,OAAA,SAAO0F,EAAeiR,GAIpBA,EAAQlX,QAAS,G,EAQnB+B,MAAA,WACE,IAAMA,EAAQ,IAAID,IAIlB,OAFAC,EAAMG,IAAI,UAAWmxD,EAAgB1zD,aAE9BoC,G,GA1BkClC,KCDxB0zD,E,0GACnBtzD,KAAA,WACE9C,IAAIga,SAAWha,IAAIunB,QACnBvnB,IAAIunB,QAAU7oB,KAEdsB,IAAI6H,MAAMC,QAOVpJ,KAAK23D,UAAY,I,EAGnBjzD,OAAA,SAAO0F,EAAeiR,GAAS,WACzBjR,GAEApK,KAAK23D,YACP7yD,EAAE,QAAQic,SAAS/gB,KAAK23D,WAExBt8C,EAAQhX,SAAW,kBAAMS,EAAE,QAAQ6F,YAAY,EAAKgtD,c,GArBxB3zD,KCIb4zD,E,0GACnB70D,KAAA,WACE,OACE,SAAKI,UAAW,UAAUnD,KAAKmD,aAC5BnD,KAAK+F,Y,EAUZ5C,UAAA,WACE,MAAO,I,EAQT4C,QAAA,WACE,MAAO,I,GAxByB/B,K,QCTf6zD,E,0GACnBlvD,cAAA,WACE,OAAO,G,EAGTxF,UAAA,WACE,MAAO,6B,EAGTC,MAAA,WACE,OAAO9B,IAAIqP,WAAWC,MAAM,6B,EAG9B7K,QAAA,WACE,MAAO,I,GAd+ByC,KCcrBsvD,E,0GACnB30D,UAAA,WACE,MAAO,gB,EAGT4C,QAAA,WACE,OACE,YAAKmB,YAAUlH,KAAKkG,QAAQM,a,EAIhCN,MAAA,WACE,IAAMA,EAAQ,IAAID,IAkBlB,OAhBAC,EAAMG,IAAI,QACR,EAACuD,EAAA,EAAD,CACEG,MAAOzI,IAAIqP,WAAWC,MAAM,qCAC5BhN,KAAK,aACLiG,gBAAgB,SAChBC,cAAc,wBACd,EAAChH,EAAA,EAAD,CAAQW,QAASzD,KAAK+3D,iBAAiB/4D,KAAKgB,OACzCsB,IAAIqP,WAAWC,MAAM,8CAK5B1K,EAAMG,IAAI,iBAAkB,CAAC,0BAAyB,aAAO/E,IAAIG,MAAMpB,UAAU,aACjF6F,EAAMG,IAAI,cAAe,CAAC,uBAAsB,aAAO/E,IAAIxB,KAAKk4D,aAChE9xD,EAAMG,IAAI,gBAAiB,CAAC,yBAAwB,aAAO/E,IAAIxB,KAAKm4D,eAE7D/xD,G,EAGT6xD,iBAAA,SAAiBrmD,GACfpQ,IAAI6H,MAAM4R,KAAK,IAAI88C,GAEnBv2D,IAAIF,QAAQ,CACVG,OAAQ,SACRC,IAAKF,IAAIG,MAAMpB,UAAU,UAAY,WACpCsB,MAAK,kBAAMqJ,OAAO0V,SAASw3C,a,GAvCQC,GCbrBC,E,0GACnBr1D,KAAA,WACE,OACE,SAAKI,UAAU,iBACb,SAAKA,UAAU,aACZnD,KAAKq4D,sB,EAMdA,iBAAA,WACE,MAAO,CAAC,EAAC,EAAD,Q,GAZ+BX,G,+BCH5B,SAASY,EAAatY,GACnC,IAAMuY,EAAcl2D,KAAKC,MAAMD,KAAKE,UAAUjB,IAAIxB,KAAKkgD,WAIvD,OAFA9hD,OAAA,IAAAA,CAAcoD,IAAIxB,KAAKkgD,SAAUA,GAE1B1+C,IAAIF,QAAQ,CACjBG,OAAQ,OACRC,IAAKF,IAAIG,MAAMpB,UAAU,UAAY,YACrCP,KAAMkgD,IACLwY,OAAM,SAAAhvD,GAEP,MADAlI,IAAIxB,KAAKkgD,SAAWuY,EACd/uD,K,YCFWivD,E,0GACnBr0D,KAAA,WAAO,WACL,YAAMA,KAAN,WAEApE,KAAKuD,SAAU,EAEfvD,KAAK04D,OAAS,CACZ,cACA,oBACA,iBACA,yBACA,gBACA,gBACA,mBAEF14D,KAAKmiB,OAAS,GAEd,IAAM69B,EAAW1+C,IAAIxB,KAAKkgD,SAC1BhgD,KAAK04D,OAAOrxD,SAAQ,SAAAtI,GAAG,OAAI,EAAKojB,OAAOpjB,GAAOnB,EAAEqR,KAAK+wC,EAASjhD,OAE9DiB,KAAK24D,cAAgB,GACrB,IAAMC,EAAUt3D,IAAIxB,KAAK84D,QACzB,IAAK,IAAMp7D,KAAKo7D,EACd54D,KAAK24D,cAAcn7D,GAAQo7D,EAAQp7D,GAAnC,KAA0CA,EAA1C,IAGkD,iBAAzCwC,KAAKmiB,OAAO02C,0BAAuC74D,KAAKmiB,OAAO02C,uBAAuB,I,EAGnG91D,KAAA,WAAO,WACL,OACE,SAAKI,UAAU,cACb,SAAKA,UAAU,aACb,UAAM0F,SAAU7I,KAAK6I,SAAS7J,KAAKgB,OAChCuS,IAASzO,UAAU,CAClBiG,MAAOzI,IAAIqP,WAAWC,MAAM,yCAC5B1N,SAAU,CACR,WAAOC,UAAU,cAAc1E,MAAOuB,KAAKmiB,OAAO22C,cAAe5Q,QAAStqD,EAAE2c,SAAS,QAASva,KAAKmiB,OAAO22C,kBAI7GvmD,IAASzO,UAAU,CAClBiG,MAAOzI,IAAIqP,WAAWC,MAAM,+CAC5B1N,SAAU,CACR,SAAKC,UAAU,YACZ7B,IAAIqP,WAAWC,MAAM,6CAExB,cAAUzN,UAAU,cAAc1E,MAAOuB,KAAKmiB,OAAO42C,oBAAqB7Q,QAAStqD,EAAE2c,SAAS,QAASva,KAAKmiB,OAAO42C,wBAItH76D,OAAO8S,KAAKhR,KAAK24D,eAAe/yD,OAAS,EACtC2M,IAASzO,UAAU,CACnBiG,MAAOzI,IAAIqP,WAAWC,MAAM,8CAC5B1N,SAAU,CACRiZ,IAAOrY,UAAU,CACflD,QAASZ,KAAK24D,cACdl6D,MAAOuB,KAAKmiB,OAAO62C,iBACnB1+C,SAAUta,KAAKmiB,OAAO62C,iBAExBrjD,IAAO7R,UAAU,CACfsW,MAAOpa,KAAKmiB,OAAO02C,yBACnBv+C,SAAUta,KAAKmiB,OAAO02C,uBACtB31D,SAAU5B,IAAIqP,WAAWC,MAAM,uDAInC,GAEH2B,IAASzO,UAAU,CAClBiG,MAAOzI,IAAIqP,WAAWC,MAAM,uCAC5BzN,UAAW,sBACXD,SAAU,CACR,SAAKC,UAAU,YACZ7B,IAAIqP,WAAWC,MAAM,qCAExB5Q,KAAKi5D,gBAAgBzyD,UAAUvF,KAAI,gBAAEogB,EAAF,EAAEA,KAAMtX,EAAR,EAAQA,MAAR,OACjC,WAAO5G,UAAU,YACf,WAAOtC,KAAK,QAAQ9C,KAAK,WAAWU,MAAO4iB,EAAMhH,QAAS,EAAK8H,OAAO+2C,kBAAoB73C,EAAM5d,QAAS7F,EAAE2c,SAAS,QAAS,EAAK4H,OAAO+2C,iBACxInvD,SAMRwI,IAASzO,UAAU,CAClBiG,MAAOzI,IAAIqP,WAAWC,MAAM,4CAC5BzN,UAAW,2BACXD,SAAU,CACR,SAAKC,UAAU,YACZ7B,IAAIqP,WAAWC,MAAM,0CAExB,SAAKzN,UAAU,kCACb,WAAOA,UAAU,cAAc1E,MAAOuB,KAAKmiB,OAAOg3C,gBAAiBjR,QAAStqD,EAAE2c,SAAS,QAASva,KAAKmiB,OAAOg3C,iBAC5G,cAAUh2D,UAAU,cAAc1E,MAAOuB,KAAKmiB,OAAOi3C,kBAAmBlR,QAAStqD,EAAE2c,SAAS,QAASva,KAAKmiB,OAAOi3C,uBAKtHt2D,IAAOgB,UAAU,CAChBjD,KAAM,SACNsC,UAAW,yBACXD,SAAU5B,IAAIqP,WAAWC,MAAM,mCAC/BrN,QAASvD,KAAKuD,QACdC,UAAWxD,KAAKq5D,gB,EAQ5BA,QAAA,WAAU,WACR,OAAOr5D,KAAK04D,OAAOj/C,MAAK,SAAA1a,GAAG,OAAI,EAAKojB,OAAOpjB,OAAWuC,IAAIxB,KAAKkgD,SAASjhD,O,EAU1Ek6D,cAAA,WACE,IAAM/yD,EAAQ,IAAID,IAOlB,OALAC,EAAMG,IAAI,iBAAkB,CAC1Bgb,KAAM,OACNtX,MAAOzI,IAAIqP,WAAWC,MAAM,6CAGvB1K,G,EAGT2C,SAAA,SAAS6I,GAAG,WAGV,GAFAA,EAAEmK,kBAEE7b,KAAKuD,QAAT,CAEAvD,KAAKuD,SAAU,EACfjC,IAAI6iB,OAAOpH,QAAQ/c,KAAKs5D,cAExB,IAAMtZ,EAAW,GAEjBhgD,KAAK04D,OAAOrxD,SAAQ,SAAAtI,GAAG,OAAIihD,EAASjhD,GAAO,EAAKojB,OAAOpjB,QAEvDu5D,EAAatY,GACVr+C,MAAK,WACJL,IAAI6iB,OAAOpJ,KAAK,EAAKu+C,aAAe,IAAIhpD,IAAM,CAACzP,KAAM,UAAWqC,SAAU5B,IAAIqP,WAAWC,MAAM,yCAEhG4nD,OAAM,eACN72D,MAAK,WACJ,EAAK4B,SAAU,EACf3F,EAAE0L,c,GAzJ8BouD,G,wBCCnB6B,E,0GACnBn1D,KAAA,WACEpE,KAAK8T,MAAQ9T,KAAKiD,MAAM6Q,OAASxS,IAAIvB,MAAMkgB,aAAa,UAExDjgB,KAAKkI,aAAetK,EAAEqR,KAAKjP,KAAK8T,MAAM5L,gBAAkB,IACxDlI,KAAKmI,WAAavK,EAAEqR,KAAKjP,KAAK8T,MAAM3L,cAAgB,IACpDnI,KAAK4D,KAAOhG,EAAEqR,KAAKjP,KAAK8T,MAAMlQ,QAAU,IACxC5D,KAAKoI,MAAQxK,EAAEqR,KAAKjP,KAAK8T,MAAM1L,SAAW,K,EAG5CjF,UAAA,WACE,MAAO,+B,EAGTC,MAAA,WACE,MAAO,CACLpD,KAAKoI,SAAWpI,KAAK4D,OAASwO,IAAMtO,UAAU,CAC5CF,KAAM5D,KAAK4D,OACXsL,MAAO,CAAC6E,gBAAiB/T,KAAKoI,WAC3B,GACL,IACApI,KAAKmI,cAAgB7G,IAAIqP,WAAWC,MAAM,iC,EAI9C7K,QAAA,WACE,OACE,SAAK5C,UAAU,cACb,SAAKA,UAAU,QACZnD,KAAK04D,SAASlyD,a,EAMvBkyD,OAAA,WACE,IAAMxyD,EAAQ,IAAID,IAqClB,OAnCAC,EAAMG,IAAI,OAAQ,SAAKlD,UAAU,cAC/B,eAAQ7B,IAAIqP,WAAWC,MAAM,qCAC7B,SAAKzN,UAAU,6BACb,WAAOA,UAAU,cAAc2wB,YAAaxyB,IAAIqP,WAAWC,MAAM,8CAA+CnS,MAAOuB,KAAKkI,eAAgBggD,QAAStqD,EAAE2c,SAAS,QAASva,KAAKkI,gBAC9K,WAAO/E,UAAU,cAAc2wB,YAAaxyB,IAAIqP,WAAWC,MAAM,4CAA6CnS,MAAOuB,KAAKmI,aAAc+/C,QAAStqD,EAAE2c,SAAS,QAASva,KAAKmI,gBAEtK,IAERjC,EAAMG,IAAI,QAAS,SAAKlD,UAAU,cAChC,eAAQ7B,IAAIqP,WAAWC,MAAM,sCAC7B,WAAOzN,UAAU,cAAc2wB,YAAY,UAAUr1B,MAAOuB,KAAKoI,QAAS8/C,QAAStqD,EAAE2c,SAAS,QAASva,KAAKoI,UACtG,IAERlC,EAAMG,IAAI,OAAQ,SAAKlD,UAAU,cAC/B,eAAQ7B,IAAIqP,WAAWC,MAAM,qCAC7B,SAAKzN,UAAU,YACZ7B,IAAIqP,WAAWC,MAAM,kCAAmC,CAAChK,EAAG,OAAG2K,KAAK,uCAAuCioD,SAAS,UAEvH,WAAOr2D,UAAU,cAAc2wB,YAAY,cAAcr1B,MAAOuB,KAAK4D,OAAQskD,QAAStqD,EAAE2c,SAAS,QAASva,KAAK4D,SACzG,IAERsC,EAAMG,IAAI,SAAU,SAAKlD,UAAU,cAChCL,IAAOgB,UAAU,CAChBjD,KAAM,SACNsC,UAAW,6CACXI,QAASvD,KAAKuD,QACdL,SAAU5B,IAAIqP,WAAWC,MAAM,yCAEhC5Q,KAAK8T,MAAM3T,QAAUH,KAAK8T,MAAM1T,OAAS6H,IAAMI,iBAC9C,YAAQxH,KAAK,SAASsC,UAAU,+BAA+BM,QAASzD,KAAKy5D,YAAYz6D,KAAKgB,OAC3FsB,IAAIqP,WAAWC,MAAM,wCAEtB,KACG,IAEF1K,G,EAGTwzD,WAAA,WACE,MAAO,CACLxxD,aAAclI,KAAKkI,eACnBC,WAAYnI,KAAKmI,aACjBC,MAAOpI,KAAKoI,QACZxE,KAAM5D,KAAK4D,S,EAIfiF,SAAA,SAAS6I,GAAG,WACVA,EAAEmK,iBAEF7b,KAAKuD,SAAU,EAEfvD,KAAK8T,MAAMnT,KAAKX,KAAK05D,aAAc,CAAC10C,aAAchlB,KAAKuJ,QAAQvK,KAAKgB,QACjE2B,KAAK3B,KAAK4I,KAAK5J,KAAKgB,OACpBw4D,OAAM,WACL,EAAKj1D,SAAU,EACf3F,EAAE0L,a,EAIRmwD,YAAA,WACME,QAAQr4D,IAAIqP,WAAWC,MAAM,gDAC/B5Q,KAAK8T,MAAM9R,SAASL,MAAK,kBAAM/D,EAAE0L,YACjCtJ,KAAK4I,S,GArGiCJ,K,eCH5C,SAASoxD,EAAWx5D,GAClB,IAAM0T,EAAQxS,IAAIvB,MAAM4C,QAAQ,SAAUvC,GAE1C,OAAO0T,EAAQD,IAAW/P,UAAU,CAACgQ,QAAO/J,MAAO,OAAS,GAG9D,SAAS8vD,EAA4BC,EAAUC,GAkB7C,OAjBAz4D,IAAI04D,uBAAuBD,GACxB1yD,SAAQ,SAAA4yD,GACP,IAAMC,EAAqB54D,IAAIxB,KAAKq6D,YAAYF,IAAa,IAET,IAAhDC,EAAmBj9C,QAAQhV,IAAMK,YAGnCwxD,GAD0D,IAAjDI,EAAmBj9C,QAAQhV,IAAMM,WAC/BuxD,EAASpnD,QAAO,SAAAtS,GAAE,OAAIA,IAAO6H,IAAMK,aACE,IAAvCwxD,EAAS78C,QAAQhV,IAAMM,WACrB2xD,EAEAA,EAAmBxnD,QAAO,SAAAtS,GAAE,OAA8B,IAA1B05D,EAAS78C,QAAQ7c,OAG9D05D,EAAWD,EAA4BC,EAAUG,MAG9CH,E,IAGYM,E,iFACZn2D,UAAP,SAAiBhB,GACf,EAAMgB,UAAN,UAAgBhB,GAEhBA,EAAME,UAAY,qBAClBF,EAAM4G,gBAAkB,uB,2BAG1B9G,KAAA,WAAO,WACL/C,KAAKiD,MAAMC,SAAW,GAEtB,IAAI42D,EAAWx4D,IAAIxB,KAAKq6D,YAAYn6D,KAAKiD,MAAM82D,aAAe,GAIxDM,GAAiD,KAFvDP,EAAWD,EAA4BC,EAAU95D,KAAKiD,MAAM82D,aAElC98C,QAAQhV,IAAMK,UAClCgyD,GAAiD,IAAvCR,EAAS78C,QAAQhV,IAAMM,WACjCgyD,EAAaj5D,IAAIvB,MAAM4C,QAAQ,SAAUsF,IAAMI,kBA8DrD,OA3DErI,KAAKiD,MAAM8G,MADTswD,EACiBjoD,IAAMtO,UAAU,CAACF,KAAM,iBACjC02D,EACUloD,IAAMtO,UAAU,CAACF,KAAM,gBAEvB,CACjBg2D,EAAW3xD,IAAMI,kBACjByxD,EAAS74D,IAAI24D,IAIb55D,KAAKiK,UACHjK,KAAKiD,MAAMu3D,YACbx6D,KAAKiD,MAAMC,SAASwD,KAClB5D,IAAOgB,UAAU,CACfZ,SAAU,CAACkP,IAAMtO,UAAU,CAACF,KAAM,iBAAkB,IAAKtC,IAAIqP,WAAWC,MAAM,oDAC9EhN,MAAMy2D,GAAW,eACjB52D,QAAS,kBAAM,EAAK9C,KAAK,CAACsH,IAAMK,YAChC9E,SAAUxD,KAAKy6D,gBAAgBxyD,IAAMK,aAK3CtI,KAAKiD,MAAMC,SAASwD,KAClB5D,IAAOgB,UAAU,CACfZ,SAAU,CAACkP,IAAMtO,UAAU,CAACF,KAAM,gBAAiB,IAAKtC,IAAIqP,WAAWC,MAAM,mDAC7EhN,MAAM02D,GAAU,eAChB72D,QAAS,kBAAM,EAAK9C,KAAK,CAACsH,IAAMM,aAChC/E,SAAUxD,KAAKy6D,gBAAgBxyD,IAAMM,aAGvCtB,IAAUnD,YAEVhB,IAAOgB,UAAU,CACfZ,SAAU,CAAC02D,EAAWW,EAAWn6D,MAAO,IAAKm6D,EAAWpyD,cACxDvE,QAAOy2D,IAAaC,IAAU,eAC9B92D,UAAW62D,IAAaC,EACxB72D,QAAS,SAAAiO,GACHA,EAAE+J,UAAU/J,EAAEwK,kBAClB,EAAKvb,KAAK,QAKhB,GAAG+F,KAAK9B,MACN5E,KAAKiD,MAAMC,SACX5B,IAAIvB,MAAMqgB,IAAI,UACX1N,QAAO,SAAAoB,GAAK,OAAuF,IAAnF,CAAC7L,IAAMI,iBAAkBJ,IAAMK,SAAUL,IAAMM,WAAW0U,QAAQnJ,EAAM1T,SACxFa,KAAI,SAAA6S,GAAK,OAAIhR,IAAOgB,UAAU,CAC7BZ,SAAU,CAAC02D,EAAW9lD,EAAM1T,MAAO,IAAK0T,EAAM3L,cAC9CvE,MAAwC,IAAlCk2D,EAAS78C,QAAQnJ,EAAM1T,OAAe,eAC5CqD,QAAS,SAACiO,GACJA,EAAE+J,UAAU/J,EAAEwK,kBAClB,EAAKmL,OAAOvT,EAAM1T,OAEpBoD,SAAU,EAAKi3D,gBAAgB3mD,EAAM1T,OAAS,EAAKq6D,gBAAgBxyD,IAAMM,YAAc,EAAKkyD,gBAAgBxyD,IAAMK,iBAK1H,YAAavF,KAAb,Y,EAGFpC,KAAA,SAAKm5D,GACH,IAAMC,EAAa/5D,KAAKiD,MAAM82D,WAE9Bz4D,IAAIxB,KAAKq6D,YAAYJ,GAAcD,EAEnCx4D,IAAIF,QAAQ,CACVG,OAAQ,OACRC,IAAKF,IAAIG,MAAMpB,UAAU,UAAY,cACrCP,KAAM,CAACi6D,aAAYD,e,EAIvBzyC,OAAA,SAAOqzC,GACL,IAAMX,EAAa/5D,KAAKiD,MAAM82D,WAE1BD,EAAWx4D,IAAIxB,KAAKq6D,YAAYJ,IAAe,GAE7C/8C,EAAQ88C,EAAS78C,QAAQy9C,IAEhB,IAAX19C,EACF88C,EAASpgD,OAAOsD,EAAO,IAEvB88C,EAASpzD,KAAKg0D,GACdZ,EAAWA,EAASpnD,QAAO,SAAAtS,GAAE,OAAuD,IAAnD,CAAC6H,IAAMK,SAAUL,IAAMM,WAAW0U,QAAQ7c,OAG7EJ,KAAKW,KAAKm5D,I,EAGZW,gBAAA,SAAgBr6D,GACd,OAAiF,IAA1Ey5D,EAA4B,CAACz5D,GAAKJ,KAAKiD,MAAM82D,YAAY98C,QAAQ7c,I,GAhH5BwJ,K,QC9B3B+wD,E,wFACZ12D,UAAP,SAAiBhB,GAAO,WACtB,EAAMgB,UAAN,UAAgBhB,GAEhBA,EAAME,UAAY,kBAClBF,EAAM4G,gBAAkB,sBACxB5G,EAAM+G,UAAY,oBAClB/G,EAAM2Q,aAAe,SAErB3Q,EAAMC,SAAWD,EAAMrC,QAAQK,KAAI,YAAoB,MAAlBxC,EAAkB,EAAlBA,MAAOsL,EAAW,EAAXA,MACpCvC,EAASlG,IAAIxB,KAAKkgD,SAAS/8C,EAAMlE,OAASN,EAEhD,OAAOqE,IAAOgB,UAAU,CACtBZ,SAAU6G,EACVnG,MAAM4D,GAAS,eACf/D,QAAS60D,EAAat5D,KAAK,GAAlB,OAA0BiE,EAAMlE,KAAMN,EAAtC,IACT+I,e,GAhBqCiM,KCGxBmnD,E,0GACnBx2D,KAAA,WACEpE,KAAKm6D,YAAcn6D,KAAK66D,kBAAkBr0D,W,EAG5CzD,KAAA,WACE,IAAM+3D,EAAS96D,KAAK+6D,aAAav0D,UAE3Bw0D,EAAkB,SAAAjB,GACtB,OAAOe,EAAO75D,KAAI,SAAAoiD,GAAK,OACrB,YACGA,EAAM/+C,OAAOy1D,QAKpB,OACE,WAAO52D,UAAU,kBACf,eACE,YACE,aACC23D,EAAO75D,KAAI,SAAAoiD,GAAK,OACf,YACGA,EAAMt5C,MAAO,IACbs5C,EAAM4X,SAAWn4D,IAAOgB,UAAU,CAACF,KAAM,eAAgBT,UAAW,iDAAkDM,QAAS4/C,EAAM4X,WAAa,OAGvJ,YAAKj7D,KAAKk7D,oBAAoB10D,aAGjCxG,KAAKm6D,YAAYl5D,KAAI,SAAAk6D,GAAO,OAC3B,eACE,QAAIh4D,UAAU,0BACZ,YAAKg4D,EAAQpxD,OACZixD,EAAgBG,GACjB,cAEDA,EAAQj4D,SAASjC,KAAI,SAAA0S,GAAK,OACzB,QAAIxQ,UAAU,wBACZ,YAAKS,YAAK+P,EAAM/P,MAAO+P,EAAM5J,OAC5BixD,EAAgBrnD,GACjB,uB,EASdknD,gBAAA,WACE,IAAM30D,EAAQ,IAAID,IAsBlB,OApBAC,EAAMG,IAAI,OAAQ,CAChB0D,MAAOzI,IAAIqP,WAAWC,MAAM,uCAC5B1N,SAAUlD,KAAKo7D,YAAY50D,WAC1B,KAEHN,EAAMG,IAAI,QAAS,CACjB0D,MAAOzI,IAAIqP,WAAWC,MAAM,yCAC5B1N,SAAUlD,KAAKq7D,aAAa70D,WAC3B,IAEHN,EAAMG,IAAI,QAAS,CACjB0D,MAAOzI,IAAIqP,WAAWC,MAAM,8CAC5B1N,SAAUlD,KAAKs7D,aAAa90D,WAC3B,IAEHN,EAAMG,IAAI,WAAY,CACpB0D,MAAOzI,IAAIqP,WAAWC,MAAM,2CAC5B1N,SAAUlD,KAAKu7D,gBAAgB/0D,WAC9B,IAEIN,G,EAGTk1D,UAAA,WACE,IAAMl1D,EAAQ,IAAID,IAkClB,OAhCAC,EAAMG,IAAI,kBAAmB,CAC3BzC,KAAM,aACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,iDAC5BmpD,WAAY,kBACZS,YAAY,GACX,KAEHt0D,EAAMG,IAAI,eAAgB,CACxBzC,KAAM,eACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,+CAC5BmpD,WAAY,eACZS,YAAY,GACX,KAEHt0D,EAAMG,IAAI,SAAU,CAClBzC,KAAM,mBACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,wCAC5BgqC,QAAS,kBAAM+f,EAAgB72D,UAAU,CACvC/E,IAAK,gBACL6B,QAAS,CACP,CAACnC,MAAO,IAAKsL,MAAOzI,IAAIqP,WAAWC,MAAM,uDACzC,CAACnS,MAAO,IAAKsL,MAAOzI,IAAIqP,WAAWC,MAAM,8DAG5C,IAEH1K,EAAMG,IAAI,iBAAkB,CAC1BzC,KAAM,eACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,kDAC5BmpD,WAAY,wBAGP7zD,G,EAGTm1D,WAAA,WACE,IAAMn1D,EAAQ,IAAID,IA4BlB,OA1BAC,EAAMG,IAAI,QAAS,CACjBzC,KAAM,cACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,kDAC5BmpD,WAAY,mBACX,KAEH7zD,EAAMG,IAAI,gBAAiB,CACzBzC,KAAM,kBACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,+CAC5BgqC,QAAS,WACP,IAAM4gB,EAAU39C,SAASvc,IAAIxB,KAAKkgD,SAASyb,eAAgB,IAE3D,OAAOd,EAAgB72D,UAAU,CAC/B8P,aAAc4nD,EACVl6D,IAAIqP,WAAWgN,YAAY,4DAA6D69C,EAAS,CAAC72C,MAAO62C,IACzGl6D,IAAIqP,WAAWC,MAAM,6DACzB7R,IAAK,iBACL6B,QAAS,CACP,CAACnC,MAAO,KAAMsL,MAAOzI,IAAIqP,WAAWC,MAAM,8DAC1C,CAACnS,MAAO,KAAMsL,MAAOzI,IAAIqP,WAAWC,MAAM,6DAC1C,CAACnS,MAAO,QAASsL,MAAOzI,IAAIqP,WAAWC,MAAM,kEAIlD,IAEI1K,G,EAGTo1D,WAAA,WACE,IAAMp1D,EAAQ,IAAID,IA4BlB,OA1BAC,EAAMG,IAAI,QAAS,CACjBzC,KAAM,eACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,qDAC5BmpD,WAAY,oBACX,KAEH7zD,EAAMG,IAAI,mBAAoB,CAC5BzC,KAAM,oBACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,mDAC5BgqC,QAAS,WACP,IAAM4gB,EAAU39C,SAASvc,IAAIxB,KAAKkgD,SAAS0b,mBAAoB,IAE/D,OAAOf,EAAgB72D,UAAU,CAC/B8P,aAAc4nD,EACVl6D,IAAIqP,WAAWgN,YAAY,4DAA6D69C,EAAS,CAAC72C,MAAO62C,IACzGl6D,IAAIqP,WAAWC,MAAM,6DACzB7R,IAAK,qBACL6B,QAAS,CACP,CAACnC,MAAO,KAAMsL,MAAOzI,IAAIqP,WAAWC,MAAM,8DAC1C,CAACnS,MAAO,KAAMsL,MAAOzI,IAAIqP,WAAWC,MAAM,6DAC1C,CAACnS,MAAO,QAASsL,MAAOzI,IAAIqP,WAAWC,MAAM,kEAIlD,IAEI1K,G,EAGTq1D,cAAA,WACE,IAAMr1D,EAAQ,IAAID,IAwDlB,OAtDAC,EAAMG,IAAI,eAAgB,CACxBzC,KAAM,kBACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,8CAC5BmpD,WAAY,2BACX,KAEH7zD,EAAMG,IAAI,oBAAqB,CAC7BzC,KAAM,kBACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,mDAC5BmpD,WAAY,qBACX,KAEH7zD,EAAMG,IAAI,kBAAmB,CAC3BzC,KAAM,mBACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,mDAC5BmpD,WAAY,mBACX,IAEH7zD,EAAMG,IAAI,oBAAqB,CAC7BzC,KAAM,eACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,2DAC5BmpD,WAAY,qBACX,IAEH7zD,EAAMG,IAAI,sBAAuB,CAC/BzC,KAAM,iBACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,sDAC5BmpD,WAAY,uBACX,IAEH7zD,EAAMG,IAAI,YAAa,CACrBzC,KAAM,oBACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,2CAC5BmpD,WAAY,wBACX,IAEH7zD,EAAMG,IAAI,YAAa,CACrBzC,KAAM,mBACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,6CAC5BmpD,WAAY,wBACX,IAEH7zD,EAAMG,IAAI,cAAe,CACvBzC,KAAM,eACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,qDAC5BmpD,WAAY,0BACX,IAEH7zD,EAAMG,IAAI,WAAY,CACpBzC,KAAM,kBACNmG,MAAOzI,IAAIqP,WAAWC,MAAM,2CAC5BmpD,WAAY,aACX,IAEI7zD,G,EAGT60D,WAAA,WACE,IAAM70D,EAAQ,IAAID,IAkBlB,OAhBAC,EAAMG,IAAI,SAAU,CAClB0D,MAAOzI,IAAIqP,WAAWC,MAAM,yCAC5BtM,OAAQ,SAAAwC,GACN,OAAIA,EAAK8zC,QACA9zC,EAAK8zC,UACH9zC,EAAKizD,WACPK,EAAmBt2D,UAAU,CAClCi2D,WAAYjzD,EAAKizD,WACjBS,WAAY1zD,EAAK0zD,aAId,KAER,KAEIt0D,G,EAGTg1D,kBAAA,WACE,OAAO,IAAIj1D,K,GArQ6BjC,KCAvB23D,E,kGACnB54D,KAAA,WACE,OACE,SAAKI,UAAU,mBACb,SAAKA,UAAU,0BACb,SAAKA,UAAU,aACZ7B,IAAIvB,MAAMqgB,IAAI,UACZ1N,QAAO,SAAAoB,GAAK,OAA+D,IAA3D,CAAC7L,IAAMK,SAAUL,IAAMM,WAAW0U,QAAQnJ,EAAM1T,SAChEa,KAAI,SAAA6S,GAAK,OACR,YAAQ3Q,UAAU,eAAeM,QAAS,kBAAMnC,IAAI6H,MAAM4R,KAAK,IAAIw+C,EAAe,CAACzlD,aAChFD,IAAW/P,UAAU,CACpBgQ,QACA3Q,UAAW,aACX4G,MAAO,OAET,UAAM5G,UAAU,cAAc2Q,EAAM3L,kBAG1C,YAAQhF,UAAU,0BAA0BM,QAAS,kBAAMnC,IAAI6H,MAAM4R,KAAK,IAAIw+C,KAC3E31D,YAAK,cAAe,CAACT,UAAW,eACjC,UAAMA,UAAU,cAAc7B,IAAIqP,WAAWC,MAAM,+CAKzD,SAAKzN,UAAU,+BACb,SAAKA,UAAU,aACZy3D,EAAe92D,gB,GA3BiB4zD,GCHxBkE,E,0GACnBx3D,KAAA,WACEpE,KAAKggD,SAAW,GAChBhgD,KAAKuD,SAAU,G,EAGjB+uB,KAAA,WACE,MAAO,I,EAGTvsB,QAAA,WACE,OACE,SAAK5C,UAAU,cACb,SAAKA,UAAU,QACZnD,KAAKsyB,OAEN,SAAKnvB,UAAU,cACZnD,KAAK67D,mB,EAOhBA,aAAA,WACE,OACE,EAAC/4D,EAAA,EAAD,CACEjC,KAAK,SACLsC,UAAU,yBACVI,QAASvD,KAAKuD,QACdC,UAAWxD,KAAKq5D,WACf/3D,IAAIqP,WAAWC,MAAM,uC,EAK5BgqC,QAAA,SAAQ77C,EAAK+8D,GAGX,YAH0B,IAAfA,MAAW,IACtB97D,KAAKggD,SAASjhD,GAAOiB,KAAKggD,SAASjhD,IAAQnB,EAAEqR,KAAK3N,IAAIxB,KAAKkgD,SAASjhD,IAAQ+8D,GAErE97D,KAAKggD,SAASjhD,I,EAGvBg9D,MAAA,WAAQ,WACAA,EAAQ,GAUd,OARA79D,OAAO8S,KAAKhR,KAAKggD,UAAU34C,SAAQ,SAAAtI,GACjC,IAAMN,EAAQ,EAAKuhD,SAASjhD,KAExBN,IAAU6C,IAAIxB,KAAKkgD,SAASjhD,KAC9Bg9D,EAAMh9D,GAAON,MAIVs9D,G,EAGT1C,QAAA,WACE,OAAOn7D,OAAO8S,KAAKhR,KAAK+7D,SAASn2D,Q,EAGnCiD,SAAA,SAAS6I,GACPA,EAAEmK,iBAEF7b,KAAKuD,SAAU,EAEf+0D,EAAat4D,KAAK+7D,SAASp6D,KACzB3B,KAAKg8D,QAAQh9D,KAAKgB,MAClBA,KAAKqJ,OAAOrK,KAAKgB,Q,EAIrBg8D,QAAA,WACEh8D,KAAK4I,Q,GAxEkCJ,KCFtByzD,E,0GACnB94D,UAAA,WACE,MAAO,mC,EAGTC,MAAA,WACE,OAAO9B,IAAIqP,WAAWC,MAAM,8B,EAG9B0hB,KAAA,WACE,MAAO,CACL,WAAIhxB,IAAIqP,WAAWC,MAAM,qCAAsC,CAAChK,EAAG,OAAG2K,KAAK,kDAAkD7L,OAAO,cACpI,SAAKvC,UAAU,cACb,cAAUA,UAAU,cAAc+4D,KAAK,KAAKz/C,KAAMzc,KAAK46C,QAAQ,oB,EAKrEohB,QAAA,WACEhxD,OAAO0V,SAASw3C,U,GAnB4B0D,GCA3BO,E,0GACnBh5D,UAAA,WACE,MAAO,sC,EAGTC,MAAA,WACE,OAAO9B,IAAIqP,WAAWC,MAAM,iC,EAG9B0hB,KAAA,WACE,MAAO,CACL,WAAIhxB,IAAIqP,WAAWC,MAAM,0CACzB,SAAKzN,UAAU,cACb,cAAUA,UAAU,cAAc+4D,KAAK,KAAKz/C,KAAMzc,KAAK46C,QAAQ,sB,EAKrEohB,QAAA,WACEhxD,OAAO0V,SAASw3C,U,GAnB+B0D,GCA9BQ,E,0GACnBj5D,UAAA,WACE,MAAO,sC,EAGTC,MAAA,WACE,OAAO9B,IAAIqP,WAAWC,MAAM,iC,EAG9B0hB,KAAA,WACE,MAAO,CACL,WAAIhxB,IAAIqP,WAAWC,MAAM,0CACzB,SAAKzN,UAAU,cACb,cAAUA,UAAU,cAAc+4D,KAAK,KAAKz/C,KAAMzc,KAAK46C,QAAQ,sB,EAKrEohB,QAAA,WACEhxD,OAAO0V,SAASw3C,U,GAnB+B0D,GCA9BS,E,0GACnBj4D,KAAA,WACEpE,KAAKuD,SAAU,G,EAGjBR,KAAA,WAIE,OAHA/C,KAAKiD,MAAMM,QAAUvD,KAAKuD,QAC1BvD,KAAKiD,MAAME,WAAanD,KAAKiD,MAAME,WAAa,IAAM,UAElD7B,IAAIxB,KAAKkgD,SAAShgD,KAAKiD,MAAMlF,KAAO,UACtCiC,KAAKiD,MAAMQ,QAAUzD,KAAKiC,OAAOjD,KAAKgB,MACtCA,KAAKiD,MAAMC,SAAW5B,IAAIqP,WAAWC,MAAM,yCAGzC,aACE,WAAG,SAAKT,IAAK7O,IAAIG,MAAMpB,UAAUL,KAAKiD,MAAMlF,KAAK,OAAQu+D,IAAI,MAC7D,uBAAUv5D,KAAV,eAIJ/C,KAAKiD,MAAMQ,QAAUzD,KAAKu8D,OAAOv9D,KAAKgB,MACtCA,KAAKiD,MAAMC,SAAW5B,IAAIqP,WAAWC,MAAM,yCAG7C,YAAa7N,KAAb,a,EAMFw5D,OAAA,WAAS,WACHv8D,KAAKuD,SAEMuB,EAAE,uBAEVkc,SAAS,QAAQpY,OAAOgY,QAAQ2I,GAAG,UAAU,SAAA7X,GAClD,IAAM5R,EAAO,IAAIo7B,SACjBp7B,EAAK26C,OAAO,EAAKx3C,MAAMlF,KAAM+G,EAAE4M,EAAEhM,QAAQ,GAAG82D,MAAM,IAElD,EAAKj5D,SAAU,EACf3F,EAAE0L,SAEFhI,IAAIF,QAAQ,CACVG,OAAQ,OACRC,IAAK,EAAKi7D,cACV9iC,UAAW,SAAA+iC,GAAG,OAAIA,GAClB58D,SACC6B,KACD,EAAKo3B,QAAQ/5B,KAAK,GAClB,EAAKg6B,QAAQh6B,KAAK,Q,EAQxBiD,OAAA,WACEjC,KAAKuD,SAAU,EACf3F,EAAE0L,SAEFhI,IAAIF,QAAQ,CACVG,OAAQ,SACRC,IAAKxB,KAAKy8D,gBACT96D,KACD3B,KAAK+4B,QAAQ/5B,KAAKgB,MAClBA,KAAKg5B,QAAQh6B,KAAKgB,Q,EAItBy8D,YAAA,WACE,OAAOn7D,IAAIG,MAAMpB,UAAU,UAAY,IAAML,KAAKiD,MAAMlF,M,EAS1Dg7B,QAAA,SAAQj3B,GACNkJ,OAAO0V,SAASw3C,U,EASlBl/B,QAAA,SAAQl3B,GACN9B,KAAKuD,SAAU,EACf3F,EAAE0L,U,GA5FyCxG,KCO1B65D,E,0GACnBv4D,KAAA,WACE,YAAMA,KAAN,WAEApE,KAAK48D,aAAeh/D,EAAEqR,KAAK3N,IAAIxB,KAAKkgD,SAAS6c,qBAC7C78D,KAAK88D,eAAiBl/D,EAAEqR,KAAK3N,IAAIxB,KAAKkgD,SAAS+c,uBAC/C/8D,KAAKg9D,SAAWp/D,EAAEqR,KAA2C,MAAtC3N,IAAIxB,KAAKkgD,SAASid,iBACzCj9D,KAAKk9D,cAAgBt/D,EAAEqR,KAAgD,MAA3C3N,IAAIxB,KAAKkgD,SAASmd,uB,EAGhDp6D,KAAA,WACE,OACE,SAAKI,UAAU,kBACb,SAAKA,UAAU,aACb,UAAM0F,SAAU7I,KAAK6I,SAAS7J,KAAKgB,OACjC,cAAUmD,UAAU,yBAClB,gBAAS7B,IAAIqP,WAAWC,MAAM,yCAC9B,SAAKzN,UAAU,YACZ7B,IAAIqP,WAAWC,MAAM,sCAGxB,SAAKzN,UAAU,+BACb,WAAOA,UAAU,cAActC,KAAK,OAAOizB,YAAY,UAAUr1B,MAAOuB,KAAK48D,eAAgBtiD,SAAU1c,EAAE2c,SAAS,QAASva,KAAK48D,gBAChI,WAAOz5D,UAAU,cAActC,KAAK,OAAOizB,YAAY,UAAUr1B,MAAOuB,KAAK88D,iBAAkBxiD,SAAU1c,EAAE2c,SAAS,QAASva,KAAK88D,mBAGnInnD,IAAO7R,UAAU,CAChBsW,MAAOpa,KAAKg9D,WACZ95D,SAAU5B,IAAIqP,WAAWC,MAAM,yCAC/B0J,SAAUta,KAAKg9D,WAGhBrnD,IAAO7R,UAAU,CAChBsW,MAAOpa,KAAKk9D,gBACZh6D,SAAU5B,IAAIqP,WAAWC,MAAM,8CAC/B0J,SAAUta,KAAKk9D,gBAGhBp6D,IAAOgB,UAAU,CAChBX,UAAW,yBACXtC,KAAM,SACNqC,SAAU5B,IAAIqP,WAAWC,MAAM,uCAC/BrN,QAASvD,KAAKuD,YAKpB,kBACE,gBAASjC,IAAIqP,WAAWC,MAAM,uCAC9B,SAAKzN,UAAU,YACZ7B,IAAIqP,WAAWC,MAAM,oCAExB,EAAC,EAAD,CAAmB7S,KAAK,UAG1B,kBACE,gBAASuD,IAAIqP,WAAWC,MAAM,0CAC9B,SAAKzN,UAAU,YACZ7B,IAAIqP,WAAWC,MAAM,uCAExB,EAAC,EAAD,CAAmB7S,KAAK,aAG1B,kBACE,gBAASuD,IAAIqP,WAAWC,MAAM,gDAC9B,SAAKzN,UAAU,YACZ7B,IAAIqP,WAAWC,MAAM,6CAEvB9N,IAAOgB,UAAU,CAChBX,UAAW,SACXD,SAAU5B,IAAIqP,WAAWC,MAAM,4CAC/BnN,QAAS,kBAAMnC,IAAI6H,MAAM4R,KAAK,IAAIohD,OAItC,kBACE,gBAAS76D,IAAIqP,WAAWC,MAAM,gDAC9B,SAAKzN,UAAU,YACZ7B,IAAIqP,WAAWC,MAAM,6CAEvB9N,IAAOgB,UAAU,CAChBX,UAAW,SACXD,SAAU5B,IAAIqP,WAAWC,MAAM,4CAC/BnN,QAAS,kBAAMnC,IAAI6H,MAAM4R,KAAK,IAAIqhD,OAItC,kBACE,gBAAS96D,IAAIqP,WAAWC,MAAM,gDAC9B,SAAKzN,UAAU,YACZ7B,IAAIqP,WAAWC,MAAM,6CAEvB9N,IAAOgB,UAAU,CAChBX,UAAW,SACXD,SAAU5B,IAAIqP,WAAWC,MAAM,yCAC/BnN,QAAS,kBAAMnC,IAAI6H,MAAM4R,KAAK,IAAIkhD,U,EAQ9CpzD,SAAA,SAAS6I,GACPA,EAAEmK,iBAEF,IAAMuhD,EAAM,gCAEPA,EAAI1+C,KAAK1e,KAAK48D,iBAAoBQ,EAAI1+C,KAAK1e,KAAK88D,mBAKrD98D,KAAKuD,SAAU,EAEf+0D,EAAa,CACXuE,oBAAqB78D,KAAK48D,eAC1BG,sBAAuB/8D,KAAK88D,iBAC5BG,gBAAiBj9D,KAAKg9D,WACtBG,qBAAsBn9D,KAAKk9D,kBAC1Bv7D,MAAK,kBAAMqJ,OAAO0V,SAASw3C,aAX5BzvD,MAAMnH,IAAIqP,WAAWC,MAAM,6C,GA7GW8mD,G,QCEvB2F,E,0GACnBl6D,UAAA,WACE,MAAO,kC,EAGTC,MAAA,WACE,OAAO9B,IAAIqP,WAAWC,MAAM,mC,EAG9B7K,QAAA,WACE,OACE,SAAK5C,UAAU,cACb,WAAI7B,IAAIqP,WAAWC,MAAM,4CACzB,WAAItP,IAAIqP,WAAWC,MAAM,wCAAyC,CAAChK,EAAG,OAAG2K,KAAK,0CAA0C7L,OAAO,cAC/H,WAAIpE,IAAIqP,WAAWC,MAAM,0CAA2C,CAAChK,EAAG,OAAG2K,KAAK,gCAAgC7L,OAAO,gB,GAdhF8C,KCA1B80D,E,0GACnBv6D,KAAA,WAAO,WACL,OACE,SAAKI,UAAU,kBACb,SAAKA,UAAU,yBACb,SAAKA,UAAU,aACZL,IAAOgB,UAAU,CAChBZ,SAAU5B,IAAIqP,WAAWC,MAAM,oCAC/BhN,KAAM,cACNT,UAAW,yBACXM,QAAS,kBAAMnC,IAAI6H,MAAM4R,KAAK,IAAIsiD,QAKxC,SAAKl6D,UAAU,uBACb,SAAKA,UAAU,aACb,QAAIA,UAAU,iBACXjF,OAAO8S,KAAK1P,IAAIxB,KAAKgkB,YACnB7iB,KAAI,SAAAb,GACH,IAAM2jB,EAAYziB,IAAIxB,KAAKgkB,WAAW1jB,GAChCmQ,EAAW,EAAKgtD,aAAax5C,EAAU3jB,IAAIoG,UAEjD,OAAO,QAAIrD,UAAW,sBAAyB,EAAKq6D,UAAUz5C,EAAU3jB,IAAmB,GAAb,aAC5E,SAAK+C,UAAU,6BACb,UAAMA,UAAU,uCAAuC+L,MAAO6U,EAAUngB,MACrEmgB,EAAUngB,KAAOA,YAAKmgB,EAAUngB,KAAK7F,MAAQ,IAE/CwS,EAAS3K,OACR,EAACgE,EAAA,EAAD,CACEzG,UAAU,6BACV0G,gBAAgB,mCAChBC,cAAc,uBACdlG,KAAK,qBACJ2M,GAED,GACJ,SAAKpN,UAAU,0BACb,WAAOA,UAAU,2BACf,WAAOtC,KAAK,WAAWwZ,QAAS,EAAKmjD,UAAUz5C,EAAU3jB,IAAKqD,QAAS,EAAK4jB,OAAOroB,KAAK,EAAM+kB,EAAU3jB,MAD1G,IACkH,IAC7G2jB,EAAU05C,MAAM,oBAAoBr6D,OAEzC,SAAKD,UAAU,6BAA6B4gB,EAAUmG,SACtD,SAAK/mB,UAAU,iCAAiC4gB,EAAU25C,wB,EAYhFH,aAAA,SAAax/D,GACX,IAAMmI,EAAQ,IAAID,IACZ4kC,EAAU7qC,KAAKw9D,UAAUz/D,GAyB/B,OAvBIuD,IAAIq8D,kBAAkB5/D,IACxBmI,EAAMG,IAAI,WAAYvD,IAAOgB,UAAU,CACrCF,KAAM,aACNV,SAAU5B,IAAIqP,WAAWC,MAAM,yCAC/BnN,QAASnC,IAAIq8D,kBAAkB5/D,MAI9B8sC,GACH3kC,EAAMG,IAAI,YAAavD,IAAOgB,UAAU,CACtCF,KAAM,mBACNV,SAAU5B,IAAIqP,WAAWC,MAAM,0CAC/BnN,QAAS,WACPnC,IAAIF,QAAQ,CACVI,IAAKF,IAAIG,MAAMpB,UAAU,UAAY,eAAiBtC,EACtDwD,OAAQ,WACPI,MAAK,kBAAMqJ,OAAO0V,SAASw3C,YAE9B52D,IAAI6H,MAAM4R,KAAK,IAAI88C,OAKlB3xD,G,EAGTs3D,UAAA,SAAUz/D,GAGR,OAAkC,IAFlBsE,KAAKC,MAAMhB,IAAIxB,KAAKkgD,SAAS4d,oBAE9B3gD,QAAQlf,I,EAGzBspB,OAAA,SAAOjnB,GACL,IAAMyqC,EAAU7qC,KAAKw9D,UAAUp9D,GAE/BkB,IAAIF,QAAQ,CACVI,IAAKF,IAAIG,MAAMpB,UAAU,UAAY,eAAiBD,EACtDmB,OAAQ,QACRzB,KAAM,CAAC+qC,SAAUA,KAChBlpC,MAAK,WACDkpC,GAASgzB,aAAaC,QAAQ,mBAAoB19D,GACvD4K,OAAO0V,SAASw3C,YAGlB52D,IAAI6H,MAAM4R,KAAK,IAAI88C,I,GAvGqBH,G,SCHvBqG,G,0GACnB35D,KAAA,WACE,YAAMA,KAAN,WAEApE,KAAKg+D,QAAS,EACdh+D,KAAK61D,W,EAGPA,QAAA,WAAU,WACR71D,KAAKuD,SAAU,EAEfvD,KAAKi+D,aAAe,GACpBj+D,KAAK04D,OAAS,CAAC,cAAe,aAC9B14D,KAAKmiB,OAAS,GACdniB,KAAKyJ,OAAS,CAACy0D,SAAS,EAAOx0D,OAAQ,IAEvC,IAAMs2C,EAAW1+C,IAAIxB,KAAKkgD,SAC1BhgD,KAAK04D,OAAOrxD,SAAQ,SAAAtI,GAAG,OAAI,EAAKojB,OAAOpjB,GAAOnB,EAAEqR,KAAK+wC,EAASjhD,OAE9DuC,IAAIF,QAAQ,CACVG,OAAQ,MACRC,IAAKF,IAAIG,MAAMpB,UAAU,UAAY,mBACpCsB,MAAK,SAAAG,GAKN,IAAK,IAAMq8D,KAJX,EAAKF,aAAen8D,EAAQ,KAAR,kBACpB,EAAK2H,OAAOy0D,QAAUp8D,EAAQ,KAAR,mBACtB,EAAK2H,OAAOC,OAAS5H,EAAQ,KAAR,kBAEA,EAAKm8D,aACxB,IAAK,IAAM1a,KAAS,EAAK0a,aAAaE,GACpC,EAAKzF,OAAOhyD,KAAK68C,GACjB,EAAKphC,OAAOohC,GAAS3lD,EAAEqR,KAAK+wC,EAASuD,IAIzC,EAAKhgD,SAAU,EACf3F,EAAE0L,a,EAINvG,KAAA,WAAO,WACL,GAAI/C,KAAKuD,SAAWvD,KAAKg+D,OACvB,OACE,SAAK76D,UAAU,YACb,SAAKA,UAAU,aACb,EAACU,GAAA,EAAD,QAMR,IAAM60D,EAAS14D,KAAKi+D,aAAaj+D,KAAKmiB,OAAOi8C,eACvCC,EAAYngE,OAAO8S,KAAK0nD,GAE9B,OACE,SAAKv1D,UAAU,YACb,SAAKA,UAAU,aACb,UAAM0F,SAAU7I,KAAK6I,SAAS7J,KAAKgB,OACjC,YAAKsB,IAAIqP,WAAWC,MAAM,6BAC1B,SAAKzN,UAAU,YACZ7B,IAAIqP,WAAWC,MAAM,0BAGvB2B,IAASzO,UAAU,CAClBiG,MAAOzI,IAAIqP,WAAWC,MAAM,sCAC5BzN,UAAW,wBACXD,SAAU,CACR,SAAKC,UAAU,+BACb,eACG7B,IAAIqP,WAAWC,MAAM,+BACtB,WAAOzN,UAAU,cAAc1E,MAAOuB,KAAKmiB,OAAOm8C,aAAe,GAAIpW,QAAStqD,EAAE2c,SAAS,QAASva,KAAKmiB,OAAOm8C,kBAMrH/rD,IAASzO,UAAU,CAClBiG,MAAOzI,IAAIqP,WAAWC,MAAM,mCAC5BzN,UAAW,wBACXD,SAAU,CACR,SAAKC,UAAU,+BACb,eACG7B,IAAIqP,WAAWC,MAAM,iCACtB,EAACuL,EAAA,EAAD,CAAQ1d,MAAOuB,KAAKmiB,OAAOi8C,cAAex9D,QAAS1C,OAAO8S,KAAKhR,KAAKi+D,cAAc74C,QAAO,SAACm5C,EAAM7lB,GAAP,4BAAoB6lB,IAApB,MAA2B7lB,GAAMA,EAAjC,MAAwC,IAAKp+B,SAAUta,KAAKmiB,OAAOi8C,mBAMnKp+D,KAAKyJ,OAAOy0D,SAAW5tD,IAAMxM,UAAU,CACtCZ,SAAU5B,IAAIqP,WAAWC,MAAM,wCAC/BlI,aAAa,IAGd21D,EAAUz4D,OAAS,GAAK2M,IAASzO,UAAU,CAC1CiG,MAAOzI,IAAIqP,WAAWC,MAAf,oBAAyC5Q,KAAKmiB,OAAOi8C,cAArD,YACPj7D,UAAW,wBACXD,SAAU,CACR,SAAKC,UAAU,+BACZk7D,EAAUp9D,KAAI,SAAAsiD,GAAK,MAAI,CACtB,eACGjiD,IAAIqP,WAAWC,MAAf,oBAAyC2yC,EAAzC,UACA,EAAKib,YAAYjb,IAEpB,EAAK95C,OAAOC,OAAO65C,IAAU,OAAGpgD,UAAU,mBAAmB,EAAKsG,OAAOC,OAAO65C,YAMvFzgD,IAAOgB,UAAU,CAChBjD,KAAM,SACNsC,UAAW,yBACXD,SAAU5B,IAAIqP,WAAWC,MAAM,kCAC/BpN,UAAWxD,KAAKq5D,gB,EAQ5BmF,YAAA,SAAYzgE,GACV,IAAMogE,EAASn+D,KAAKmiB,OAAOi8C,cACrB7a,EAAQvjD,KAAKi+D,aAAaE,GAAQpgE,GAClCkR,EAAOjP,KAAKmiB,OAAOpkB,GAEzB,MAAqB,iBAAVwlD,EACF,WAAOpgD,UAAU,cAAc1E,MAAOwQ,KAAU,GAAIi5C,QAAStqD,EAAE2c,SAAS,QAAStL,KAEjF,EAACkN,EAAA,EAAD,CAAQ1d,MAAOwQ,IAAQrO,QAAS2iD,EAAOjpC,SAAUrL,K,EAI5DoqD,QAAA,WAAU,WACR,OAAOr5D,KAAK04D,OAAOj/C,MAAK,SAAA1a,GAAG,OAAI,EAAKojB,OAAOpjB,OAAWuC,IAAIxB,KAAKkgD,SAASjhD,O,EAG1E8J,SAAA,SAAS6I,GAAG,WAGV,GAFAA,EAAEmK,kBAEE7b,KAAKg+D,OAAT,CAEAh+D,KAAKg+D,QAAS,EACd18D,IAAI6iB,OAAOpH,QAAQ/c,KAAKs5D,cAExB,IAAMtZ,EAAW,GAEjBhgD,KAAK04D,OAAOrxD,SAAQ,SAAAtI,GAAG,OAAIihD,EAASjhD,GAAO,EAAKojB,OAAOpjB,QAEvDu5D,EAAatY,GACVr+C,MAAK,WACJL,IAAI6iB,OAAOpJ,KAAK,EAAKu+C,aAAe,IAAIhpD,IAAM,CAACzP,KAAM,UAAWqC,SAAU5B,IAAIqP,WAAWC,MAAM,yCAEhG4nD,OAAM,eACN72D,MAAK,WACJ,EAAKq8D,QAAS,EACd,EAAKnI,e,GA5JyB6B,GCIvB,YAASp2D,GACtBA,EAAI4f,OAAS,CACX,UAAa,CAACG,KAAM,IAAKvd,UAAWs0D,EAAct0D,aAClD,OAAU,CAACud,KAAM,UAAWvd,UAAW20D,EAAW30D,aAClD,YAAe,CAACud,KAAM,eAAgBvd,UAAW63D,EAAgB73D,aACjE,WAAc,CAACud,KAAM,cAAevd,UAAW64D,EAAe74D,aAC9D,WAAc,CAACud,KAAM,cAAevd,UAAWw5D,EAAex5D,aAC9D,KAAQ,CAACud,KAAM,QAASvd,UAAWi6D,GAASj6D,e,kBCR3B26D,G,kGACnB/6D,iBAAA,WACE,IAAMqC,EAAU,EAAH,UAASrC,iBAAT,WAQb,OANAqC,EAAQW,KACN,SAAKvD,UAAU,+BACZnD,KAAKiD,MAAMy6D,cAIT33D,G,GAVkCqL,KCGxBstD,G,0GACnB37D,KAAA,WACE,OACE,EAAC0Q,EAAA,EAAD,CACEtQ,UAAU,4BACV0G,gBAAgB,UACf7J,KAAKkG,QAAQM,Y,EAUpBN,MAAA,WACE,IAAMA,EAAQ,IAAID,IA4ClB,OA1CAC,EAAMG,IAAI,YAAao4D,GAAgB36D,UAAU,CAC/CyN,KAAMjQ,IAAI+P,MAAM,aAChBzN,KAAM,mBACNV,SAAU5B,IAAIqP,WAAWC,MAAM,mCAC/B8sD,YAAap8D,IAAIqP,WAAWC,MAAM,oCAGpC1K,EAAMG,IAAI,SAAUo4D,GAAgB36D,UAAU,CAC5CyN,KAAMjQ,IAAI+P,MAAM,UAChBzN,KAAM,oBACNV,SAAU5B,IAAIqP,WAAWC,MAAM,gCAC/B8sD,YAAap8D,IAAIqP,WAAWC,MAAM,iCAGpC1K,EAAMG,IAAI,OAAQo4D,GAAgB36D,UAAU,CAC1CyN,KAAMjQ,IAAI+P,MAAM,QAChBzN,KAAM,kBACNV,SAAU5B,IAAIqP,WAAWC,MAAM,+BAC/B8sD,YAAap8D,IAAIqP,WAAWC,MAAM,gCAGpC1K,EAAMG,IAAI,cAAeo4D,GAAgB36D,UAAU,CACjDyN,KAAMjQ,IAAI+P,MAAM,eAChBzN,KAAM,aACNV,SAAU5B,IAAIqP,WAAWC,MAAM,qCAC/B8sD,YAAap8D,IAAIqP,WAAWC,MAAM,sCAGpC1K,EAAMG,IAAI,aAAco4D,GAAgB36D,UAAU,CAChDyN,KAAMjQ,IAAI+P,MAAM,cAChBzN,KAAM,qBACNV,SAAU5B,IAAIqP,WAAWC,MAAM,oCAC/B8sD,YAAap8D,IAAIqP,WAAWC,MAAM,qCAGpC1K,EAAMG,IAAI,aAAco4D,GAAgB36D,UAAU,CAChDyN,KAAMjQ,IAAI+P,MAAM,cAChBzN,KAAM,sBACNV,SAAU5B,IAAIqP,WAAWC,MAAM,oCAC/B8sD,YAAap8D,IAAIqP,WAAWC,MAAM,qCAG7B1K,G,GA7D2BlC,KCPjB26D,G,YAYnB,aAAc,aACZ,qBADY,+CAXM,IAWN,qCATJ,CACR1jD,UAAW,kBAAM,GACjBM,YAAa,aACbC,QAAS,kBAAM,EAAK/Z,MAAMpB,UAAU,YACpCyb,KAAM,WACJ9Q,OAAO0V,SAAW1gB,KAAKwb,aAOzB0F,GAAO,gBAHK,E,4CASd0C,MAAA,WACEhmB,EAAEgmB,MAAMnX,SAASwX,eAAe,kBAAmBtJ,KAAW7W,UAAU,CAACX,UAAW,kBAAmB8Y,QAAQ,KAC/Gre,EAAEgmB,MAAMnX,SAASwX,eAAe,qBAAsBtJ,KAAW7W,aACjElG,EAAEgmB,MAAMnX,SAASwX,eAAe,kBAAmBszC,EAAczzD,aACjElG,EAAEgmB,MAAMnX,SAASwX,eAAe,oBAAqBwzC,EAAgB3zD,aACrElG,EAAEgmB,MAAMnX,SAASwX,eAAe,oBAAqBy6C,GAAS56D,aAE9DlG,EAAEyT,MAAM1S,KAAO,OACf,YAAMilB,MAAN,WAIA,IAAMinB,EAAUgzB,aAAae,QAAQ,oBACjC/zB,GAAW7qC,KAAK29D,kBAAkB9yB,KACpC7qC,KAAK29D,kBAAkB9yB,KACvBgzB,aAAagB,WAAW,sB,EAI5B7E,uBAAA,SAAuBD,GACrB,IAAME,EAAW,GAYjB,MAVmB,oBAAfF,GAA0E,IAAtCA,EAAW98C,QAAQ,gBACzDg9C,EAASvzD,KAAK,mBAEG,sBAAfqzD,GACFE,EAASvzD,KAAK,mBAEG,2BAAfqzD,GACFE,EAASvzD,KAAK,wBAGTuzD,G,GArDmCh3C,M,SCIzBk1C,G,0GACnBp1D,KAAA,WACE,OACE,SAAKI,UAAW,mBAAmBnD,KAAKmD,aACrCnD,KAAK+F,Y,EAUZ5C,UAAA,WACE,MAAO,I,EAQT4C,QAAA,WACE,MAAO,I,GAxBkC/B,KCqB9B,GAAA9F,OAAA,KAAc4gE,KAAQ,CACnC,qBAAsBxG,EACtB,6BAA8BqC,EAC9B,mCAAoCyB,EACpC,6BAA8B5E,EAC9B,2BAA4BD,EAC5B,4BAA6BoF,EAC7B,kBAAmBjF,EACnB,0BAA2BI,EAC3B,6BAA8BL,EAC9B,2BAA4BmE,EAC5B,6BAA8BzD,EAC9B,+BAAgCkF,EAChC,4BAA6BC,EAC7B,6BAA8BmB,GAC9B,4BAA6B7D,EAC7B,oBAAqBhD,GACrB,sBAAuBmG,GACvB,+BAAgC1B,EAChC,0BAA2BxE,EAC3B,2BAA4BO,EAC5B,wBAAyBK,EACzB,mCAAoC0D,EACpC,6BAA8BR,EAC9B,gCAAiCvB,EACjC,sBAAuBsE,GACvB,gCAAiCzC,EACjC,4BAA6B1C,EAC7B,OAAUr4C,GACV,iBAAoBy9C,KC3DhBr9D,GAAM,IAAIq9D,GAGhB3zD,OAAO1J,IAAMA,GAUbw9D,GAAOx9D,IAAMA,GCfb","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 95);\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","/**\r\n * The `Model` class represents a local data resource. It provides methods to\r\n * persist changes via the API.\r\n *\r\n * @abstract\r\n */\r\nexport default class Model {\r\n  /**\r\n   * @param {Object} data A resource object from the API.\r\n   * @param {Store} store The data store that this model should be persisted to.\r\n   * @public\r\n   */\r\n  constructor(data = {}, store = null) {\r\n    /**\r\n     * The resource object from the API.\r\n     *\r\n     * @type {Object}\r\n     * @public\r\n     */\r\n    this.data = data;\r\n\r\n    /**\r\n     * The time at which the model's data was last updated. Watching the value\r\n     * of this property is a fast way to retain/cache a subtree if data hasn't\r\n     * changed.\r\n     *\r\n     * @type {Date}\r\n     * @public\r\n     */\r\n    this.freshness = new Date();\r\n\r\n    /**\r\n     * Whether or not the resource exists on the server.\r\n     *\r\n     * @type {Boolean}\r\n     * @public\r\n     */\r\n    this.exists = false;\r\n\r\n    /**\r\n     * The data store that this resource should be persisted to.\r\n     *\r\n     * @type {Store}\r\n     * @protected\r\n     */\r\n    this.store = store;\r\n  }\r\n\r\n  /**\r\n   * Get the model's ID.\r\n   *\r\n   * @return {Integer}\r\n   * @public\r\n   * @final\r\n   */\r\n  id() {\r\n    return this.data.id;\r\n  }\r\n\r\n  /**\r\n   * Get one of the model's attributes.\r\n   *\r\n   * @param {String} attribute\r\n   * @return {*}\r\n   * @public\r\n   * @final\r\n   */\r\n  attribute(attribute) {\r\n    return this.data.attributes[attribute];\r\n  }\r\n\r\n  /**\r\n   * Merge new data into this model locally.\r\n   *\r\n   * @param {Object} data A resource object to merge into this model\r\n   * @public\r\n   */\r\n  pushData(data) {\r\n    // Since most of the top-level items in a resource object are objects\r\n    // (e.g. relationships, attributes), we'll need to check and perform the\r\n    // merge at the second level if that's the case.\r\n    for (const key in data) {\r\n      if (typeof data[key] === 'object') {\r\n        this.data[key] = this.data[key] || {};\r\n\r\n        // For every item in a second-level object, we want to check if we've\r\n        // been handed a Model instance. If so, we will convert it to a\r\n        // relationship data object.\r\n        for (const innerKey in data[key]) {\r\n          if (data[key][innerKey] instanceof Model) {\r\n            data[key][innerKey] = {data: Model.getIdentifier(data[key][innerKey])};\r\n          }\r\n          this.data[key][innerKey] = data[key][innerKey];\r\n        }\r\n      } else {\r\n        this.data[key] = data[key];\r\n      }\r\n    }\r\n\r\n    // Now that we've updated the data, we can say that the model is fresh.\r\n    // This is an easy way to invalidate retained subtrees etc.\r\n    this.freshness = new Date();\r\n  }\r\n\r\n  /**\r\n   * Merge new attributes into this model locally.\r\n   *\r\n   * @param {Object} attributes The attributes to merge.\r\n   * @public\r\n   */\r\n  pushAttributes(attributes) {\r\n    this.pushData({attributes});\r\n  }\r\n\r\n  /**\r\n   * Merge new attributes into this model, both locally and with persistence.\r\n   *\r\n   * @param {Object} attributes The attributes to save. If a 'relationships' key\r\n   *     exists, it will be extracted and relationships will also be saved.\r\n   * @param {Object} [options]\r\n   * @return {Promise}\r\n   * @public\r\n   */\r\n  save(attributes, options = {}) {\r\n    const data = {\r\n      type: this.data.type,\r\n      id: this.data.id,\r\n      attributes\r\n    };\r\n\r\n    // If a 'relationships' key exists, extract it from the attributes hash and\r\n    // set it on the top-level data object instead. We will be sending this data\r\n    // object to the API for persistence.\r\n    if (attributes.relationships) {\r\n      data.relationships = {};\r\n\r\n      for (const key in attributes.relationships) {\r\n        const model = attributes.relationships[key];\r\n\r\n        data.relationships[key] = {\r\n          data: model instanceof Array\r\n            ? model.map(Model.getIdentifier)\r\n            : Model.getIdentifier(model)\r\n        };\r\n      }\r\n\r\n      delete attributes.relationships;\r\n    }\r\n\r\n    // Before we update the model's data, we should make a copy of the model's\r\n    // old data so that we can revert back to it if something goes awry during\r\n    // persistence.\r\n    const oldData = this.copyData();\r\n\r\n    this.pushData(data);\r\n\r\n    const request = {data};\r\n    if (options.meta) request.meta = options.meta;\r\n\r\n    return app.request(Object.assign({\r\n      method: this.exists ? 'PATCH' : 'POST',\r\n      url: app.forum.attribute('apiUrl') + this.apiEndpoint(),\r\n      data: request\r\n    }, options)).then(\r\n      // If everything went well, we'll make sure the store knows that this\r\n      // model exists now (if it didn't already), and we'll push the data that\r\n      // the API returned into the store.\r\n      payload => {\r\n        this.store.data[payload.data.type] = this.store.data[payload.data.type] || {};\r\n        this.store.data[payload.data.type][payload.data.id] = this;\r\n        return this.store.pushPayload(payload);\r\n      },\r\n\r\n      // If something went wrong, though... good thing we backed up our model's\r\n      // old data! We'll revert to that and let others handle the error.\r\n      response => {\r\n        this.pushData(oldData);\r\n        m.lazyRedraw();\r\n        throw response;\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Send a request to delete the resource.\r\n   *\r\n   * @param {Object} data Data to send along with the DELETE request.\r\n   * @param {Object} [options]\r\n   * @return {Promise}\r\n   * @public\r\n   */\r\n  delete(data, options = {}) {\r\n    if (!this.exists) return m.deferred().resolve().promise;\r\n\r\n    return app.request(Object.assign({\r\n      method: 'DELETE',\r\n      url: app.forum.attribute('apiUrl') + this.apiEndpoint(),\r\n      data\r\n    }, options)).then(() => {\r\n      this.exists = false;\r\n      this.store.remove(this);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Construct a path to the API endpoint for this resource.\r\n   *\r\n   * @return {String}\r\n   * @protected\r\n   */\r\n  apiEndpoint() {\r\n    return '/' + this.data.type + (this.exists ? '/' + this.data.id : '');\r\n  }\r\n\r\n  copyData() {\r\n    return JSON.parse(JSON.stringify(this.data));\r\n  }\r\n\r\n  /**\r\n   * Generate a function which returns the value of the given attribute.\r\n   *\r\n   * @param {String} name\r\n   * @param {function} [transform] A function to transform the attribute value\r\n   * @return {*}\r\n   * @public\r\n   */\r\n  static attribute(name, transform) {\r\n    return function() {\r\n      const value = this.data.attributes && this.data.attributes[name];\r\n\r\n      return transform ? transform(value) : value;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Generate a function which returns the value of the given has-one\r\n   * relationship.\r\n   *\r\n   * @param {String} name\r\n   * @return {Model|Boolean|undefined} false if no information about the\r\n   *     relationship exists; undefined if the relationship exists but the model\r\n   *     has not been loaded; or the model if it has been loaded.\r\n   * @public\r\n   */\r\n  static hasOne(name) {\r\n    return function() {\r\n      if (this.data.relationships) {\r\n        const relationship = this.data.relationships[name];\r\n\r\n        if (relationship) {\r\n          return app.store.getById(relationship.data.type, relationship.data.id);\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Generate a function which returns the value of the given has-many\r\n   * relationship.\r\n   *\r\n   * @param {String} name\r\n   * @return {Array|Boolean} false if no information about the relationship\r\n   *     exists; an array if it does, containing models if they have been\r\n   *     loaded, and undefined for those that have not.\r\n   * @public\r\n   */\r\n  static hasMany(name) {\r\n    return function() {\r\n      if (this.data.relationships) {\r\n        const relationship = this.data.relationships[name];\r\n\r\n        if (relationship) {\r\n          return relationship.data.map(data => app.store.getById(data.type, data.id));\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Transform the given value into a Date object.\r\n   *\r\n   * @param {String} value\r\n   * @return {Date|null}\r\n   * @public\r\n   */\r\n  static transformDate(value) {\r\n    return value ? new Date(value) : null;\r\n  }\r\n\r\n  /**\r\n   * Get a resource identifier object for the given model.\r\n   *\r\n   * @param {Model} model\r\n   * @return {Object}\r\n   * @protected\r\n   */\r\n  static getIdentifier(model) {\r\n    return {\r\n      type: model.data.type,\r\n      id: model.data.id\r\n    };\r\n  }\r\n}\r\n","import Component from '../Component';\r\nimport icon from '../helpers/icon';\r\nimport extract from '../utils/extract';\r\nimport extractText from '../utils/extractText';\r\nimport LoadingIndicator from './LoadingIndicator';\r\n\r\n/**\r\n * The `Button` component defines an element which, when clicked, performs an\r\n * action. The button may have the following special props:\r\n *\r\n * - `icon` The name of the icon class. If specified, the button will be given a\r\n *   'has-icon' class name.\r\n * - `disabled` Whether or not the button is disabled. If truthy, the button\r\n *   will be given a 'disabled' class name, and any `onclick` handler will be\r\n *   removed.\r\n * - `loading` Whether or not the button should be in a disabled loading state.\r\n *\r\n * All other props will be assigned as attributes on the button element.\r\n *\r\n * Note that a Button has no default class names. This is because a Button can\r\n * be used to represent any generic clickable control, like a menu item.\r\n */\r\nexport default class Button extends Component {\r\n  view() {\r\n    const attrs = Object.assign({}, this.props);\r\n\r\n    delete attrs.children;\r\n\r\n    attrs.className = attrs.className || '';\r\n    attrs.type = attrs.type || 'button';\r\n\r\n    // If a tooltip was provided for buttons without additional content, we also\r\n    // use this tooltip as text for screen readers\r\n    if (attrs.title && !this.props.children) {\r\n      attrs['aria-label'] = attrs.title;\r\n    }\r\n\r\n    // If nothing else is provided, we use the textual button content as tooltip\r\n    if (!attrs.title && this.props.children) {\r\n      attrs.title = extractText(this.props.children);\r\n    }\r\n\r\n    const iconName = extract(attrs, 'icon');\r\n    if (iconName) attrs.className += ' hasIcon';\r\n\r\n    const loading = extract(attrs, 'loading');\r\n    if (attrs.disabled || loading) {\r\n      attrs.className += ' disabled' + (loading ? ' loading' : '');\r\n      delete attrs.onclick;\r\n    }\r\n\r\n    return <button {...attrs}>{this.getButtonContent()}</button>;\r\n  }\r\n\r\n  /**\r\n   * Get the template for the button's content.\r\n   *\r\n   * @return {*}\r\n   * @protected\r\n   */\r\n  getButtonContent() {\r\n    const iconName = this.props.icon;\r\n\r\n    return [\r\n      iconName && iconName !== true ? icon(iconName, {className: 'Button-icon'}) : '',\r\n      this.props.children ? <span className=\"Button-label\">{this.props.children}</span> : '',\r\n      this.props.loading ? LoadingIndicator.component({size: 'tiny', className: 'LoadingIndicator--inline'}) : ''\r\n    ];\r\n  }\r\n}\r\n","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\n/**\r\n * The `Component` class defines a user interface 'building block'. A component\r\n * can generate a virtual DOM to be rendered on each redraw.\r\n *\r\n * An instance's virtual DOM can be retrieved directly using the {@link\r\n * Component#render} method.\r\n *\r\n * @example\r\n * this.myComponentInstance = new MyComponent({foo: 'bar'});\r\n * return m('div', this.myComponentInstance.render());\r\n *\r\n * Alternatively, components can be nested, letting Mithril take care of\r\n * instance persistence. For this, the static {@link Component.component} method\r\n * can be used.\r\n *\r\n * @example\r\n * return m('div', MyComponent.component({foo: 'bar'));\r\n *\r\n * @see https://lhorie.github.io/mithril/mithril.component.html\r\n * @abstract\r\n */\r\nexport default class Component {\r\n  /**\r\n   * @param {Object} props\r\n   * @param {Array|Object} children\r\n   * @public\r\n   */\r\n  constructor(props = {}, children = null) {\r\n    if (children) props.children = children;\r\n\r\n    this.constructor.initProps(props);\r\n\r\n    /**\r\n     * The properties passed into the component.\r\n     *\r\n     * @type {Object}\r\n     */\r\n    this.props = props;\r\n\r\n    /**\r\n     * The root DOM element for the component.\r\n     *\r\n     * @type DOMElement\r\n     * @public\r\n     */\r\n    this.element = null;\r\n\r\n    /**\r\n     * Whether or not to retain the component's subtree on redraw.\r\n     *\r\n     * @type {boolean}\r\n     * @public\r\n     */\r\n    this.retain = false;\r\n\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n   * Called when the component is constructed.\r\n   *\r\n   * @protected\r\n   */\r\n  init() {\r\n  }\r\n\r\n  /**\r\n   * Called when the component is destroyed, i.e. after a redraw where it is no\r\n   * longer a part of the view.\r\n   *\r\n   * @see https://lhorie.github.io/mithril/mithril.component.html#unloading-components\r\n   * @param {Object} e\r\n   * @public\r\n   */\r\n  onunload() {\r\n  }\r\n\r\n  /**\r\n   * Get the renderable virtual DOM that represents the component's view.\r\n   *\r\n   * This should NOT be overridden by subclasses. Subclasses wishing to define\r\n   * their virtual DOM should override Component#view instead.\r\n   *\r\n   * @example\r\n   * this.myComponentInstance = new MyComponent({foo: 'bar'});\r\n   * return m('div', this.myComponentInstance.render());\r\n   *\r\n   * @returns {Object}\r\n   * @final\r\n   * @public\r\n   */\r\n  render() {\r\n    const vdom = this.retain ? {subtree: 'retain'} : this.view();\r\n\r\n    // Override the root element's config attribute with our own function, which\r\n    // will set the component instance's element property to the root DOM\r\n    // element, and then run the component class' config method.\r\n    vdom.attrs = vdom.attrs || {};\r\n\r\n    const originalConfig = vdom.attrs.config;\r\n\r\n    vdom.attrs.config = (...args) => {\r\n      this.element = args[0];\r\n      this.config.apply(this, args.slice(1));\r\n      if (originalConfig) originalConfig.apply(this, args);\r\n    };\r\n\r\n    return vdom;\r\n  }\r\n\r\n  /**\r\n   * Returns a jQuery object for this component's element. If you pass in a\r\n   * selector string, this method will return a jQuery object, using the current\r\n   * element as its buffer.\r\n   *\r\n   * For example, calling `component.$('li')` will return a jQuery object\r\n   * containing all of the `li` elements inside the DOM element of this\r\n   * component.\r\n   *\r\n   * @param {String} [selector] a jQuery-compatible selector string\r\n   * @returns {jQuery} the jQuery object for the DOM node\r\n   * @final\r\n   * @public\r\n   */\r\n  $(selector) {\r\n    const $element = $(this.element);\r\n\r\n    return selector ? $element.find(selector) : $element;\r\n  }\r\n\r\n  /**\r\n   * Called after the component's root element is redrawn. This hook can be used\r\n   * to perform any actions on the DOM, both on the initial draw and any\r\n   * subsequent redraws. See Mithril's documentation for more information.\r\n   *\r\n   * @see https://lhorie.github.io/mithril/mithril.html#the-config-attribute\r\n   * @param {Boolean} isInitialized\r\n   * @param {Object} context\r\n   * @param {Object} vdom\r\n   * @public\r\n   */\r\n  config() {\r\n  }\r\n\r\n  /**\r\n   * Get the virtual DOM that represents the component's view.\r\n   *\r\n   * @return {Object} The virtual DOM\r\n   * @protected\r\n   */\r\n  view() {\r\n    throw new Error('Component#view must be implemented by subclass');\r\n  }\r\n\r\n  /**\r\n   * Get a Mithril component object for this component, preloaded with props.\r\n   *\r\n   * @see https://lhorie.github.io/mithril/mithril.component.html\r\n   * @param {Object} [props] Properties to set on the component\r\n   * @param children\r\n   * @return {Object} The Mithril component object\r\n   * @property {function} controller\r\n   * @property {function} view\r\n   * @property {Object} component The class of this component\r\n   * @property {Object} props The props that were passed to the component\r\n   * @public\r\n   */\r\n  static component(props = {}, children = null) {\r\n    const componentProps = Object.assign({}, props);\r\n\r\n    if (children) componentProps.children = children;\r\n\r\n    this.initProps(componentProps);\r\n\r\n    // Set up a function for Mithril to get the component's view. It will accept\r\n    // the component's controller (which happens to be the component itself, in\r\n    // our case), update its props with the ones supplied, and then render the view.\r\n    const view = (component) => {\r\n      component.props = componentProps;\r\n      return component.render();\r\n    };\r\n\r\n    // Mithril uses this property on the view function to cache component\r\n    // controllers between redraws, thus persisting component state.\r\n    view.$original = this.prototype.view;\r\n\r\n    // Our output object consists of a controller constructor + a view function\r\n    // which Mithril will use to instantiate and render the component. We also\r\n    // attach a reference to the props that were passed through and the\r\n    // component's class for reference.\r\n    const output = {\r\n      controller: this.bind(undefined, componentProps),\r\n      view: view,\r\n      props: componentProps,\r\n      component: this\r\n    };\r\n\r\n    // If a `key` prop was set, then we'll assume that we want that to actually\r\n    // show up as an attribute on the component object so that Mithril's key\r\n    // algorithm can be applied.\r\n    if (componentProps.key) {\r\n      output.attrs = {key: componentProps.key};\r\n    }\r\n\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   * Initialize the component's props.\r\n   *\r\n   * @param {Object} props\r\n   * @public\r\n   */\r\n  static initProps(props) {\r\n  }\r\n}\r\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","class Item {\r\n  constructor(content, priority) {\r\n    this.content = content;\r\n    this.priority = priority;\r\n  }\r\n}\r\n\r\n/**\r\n * The `ItemList` class collects items and then arranges them into an array\r\n * by priority.\r\n */\r\nexport default class ItemList {\r\n  constructor() {\r\n    /**\r\n     * The items in the list.\r\n     *\r\n     * @type {Object}\r\n     * @public\r\n     */\r\n    this.items = {};\r\n  }\r\n\r\n  /**\r\n   * Check whether the list is empty.\r\n   *\r\n   * @returns {boolean}\r\n   * @public\r\n   */\r\n  isEmpty() {\r\n    for (const i in this.items) {\r\n      if(this.items.hasOwnProperty(i)) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Check whether an item is present in the list.\r\n   *\r\n   * @param key\r\n   * @returns {boolean}\r\n   */\r\n  has(key) {\r\n    return !!this.items[key];\r\n  }\r\n\r\n  /**\r\n   * Get the content of an item.\r\n   *\r\n   * @param {String} key\r\n   * @return {*}\r\n   * @public\r\n   */\r\n  get(key) {\r\n    return this.items[key].content;\r\n  }\r\n\r\n  /**\r\n   * Add an item to the list.\r\n   *\r\n   * @param {String} key A unique key for the item.\r\n   * @param {*} content The item's content.\r\n   * @param {Integer} [priority] The priority of the item. Items with a higher\r\n   *     priority will be positioned before items with a lower priority.\r\n   * @return {ItemList}\r\n   * @public\r\n   */\r\n  add(key, content, priority = 0) {\r\n    this.items[key] = new Item(content, priority);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Replace an item in the list, only if it is already present.\r\n   *\r\n   * @param {String} key\r\n   * @param {*} [content]\r\n   * @param {Integer} [priority]\r\n   * @return {ItemList}\r\n   * @public\r\n   */\r\n  replace(key, content = null, priority = null) {\r\n    if (this.items[key]) {\r\n      if (content !== null) {\r\n        this.items[key].content = content;\r\n      }\r\n\r\n      if (priority !== null) {\r\n        this.items[key].priority = priority;\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Remove an item from the list.\r\n   *\r\n   * @param {String} key\r\n   * @return {ItemList}\r\n   * @public\r\n   */\r\n  remove(key) {\r\n    delete this.items[key];\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Merge another list's items into this one.\r\n   *\r\n   * @param {ItemList} items\r\n   * @return {ItemList}\r\n   * @public\r\n   */\r\n  merge(items) {\r\n    for (const i in items.items) {\r\n      if (items.items.hasOwnProperty(i) && items.items[i] instanceof Item) {\r\n        this.items[i] = items.items[i];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Convert the list into an array of item content arranged by priority. Each\r\n   * item's content will be assigned an `itemName` property equal to the item's\r\n   * unique key.\r\n   *\r\n   * @return {Array}\r\n   * @public\r\n   */\r\n  toArray() {\r\n    const items = [];\r\n\r\n    for (const i in this.items) {\r\n      if (this.items.hasOwnProperty(i) && this.items[i] instanceof Item) {\r\n        this.items[i].content = Object(this.items[i].content);\r\n\r\n        this.items[i].content.itemName = i;\r\n        items.push(this.items[i]);\r\n        this.items[i].key = items.length;\r\n      }\r\n    }\r\n\r\n    return items.sort((a, b) => {\r\n      if (a.priority === b.priority) {\r\n        return a.key - b.key;\r\n      } else if (a.priority > b.priority) {\r\n        return -1;\r\n      }\r\n      return 1;\r\n    }).map(item => item.content);\r\n  }\r\n}\r\n\r\n","/**\r\n * The `icon` helper displays an icon.\r\n *\r\n * @param {String} fontClass The full icon class, prefix and the icons name.\r\n * @param {Object} attrs Any other attributes to apply.\r\n * @return {Object}\r\n */\r\nexport default function icon(fontClass, attrs = {}) {\r\n  attrs.className = 'icon ' + fontClass + ' ' + (attrs.className || '');\r\n\r\n  return <i {...attrs}/>;\r\n}\r\n","import Separator from '../components/Separator';\r\nimport classList from '../utils/classList';\r\n\r\nfunction isSeparator(item) {\r\n  return item && item.component === Separator;\r\n}\r\n\r\nfunction withoutUnnecessarySeparators(items) {\r\n  const newItems = [];\r\n  let prevItem;\r\n\r\n  items.forEach((item, i) => {\r\n    if (!isSeparator(item) || (prevItem && !isSeparator(prevItem) && i !== items.length - 1)) {\r\n      prevItem = item;\r\n      newItems.push(item);\r\n    }\r\n  });\r\n\r\n  return newItems;\r\n}\r\n\r\n/**\r\n * The `listItems` helper wraps a collection of components in <li> tags,\r\n * stripping out any unnecessary `Separator` components.\r\n *\r\n * @param {*} items\r\n * @return {Array}\r\n */\r\nexport default function listItems(items) {\r\n  if (!(items instanceof Array)) items = [items];\r\n\r\n  return withoutUnnecessarySeparators(items).map(item => {\r\n    const isListItem = item.component && item.component.isListItem;\r\n    const active = item.component && item.component.isActive && item.component.isActive(item.props);\r\n    const className = item.props ? item.props.itemClassName : item.itemClassName;\r\n\r\n    if (isListItem) {\r\n      item.attrs = item.attrs || {};\r\n      item.attrs.key = item.attrs.key || item.itemName;\r\n    }\r\n\r\n    return isListItem\r\n      ? item\r\n      : <li className={classList([\r\n          (item.itemName ? 'item-' + item.itemName : ''),\r\n          className,\r\n          (active ? 'active' : '')\r\n        ])}\r\n          key={item.itemName}>\r\n          {item}\r\n        </li>;\r\n  });\r\n}\r\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/**\r\n * Extract the text nodes from a virtual element.\r\n *\r\n * @param {VirtualElement} vdom\r\n * @return {String}\r\n */\r\nexport default function extractText(vdom) {\r\n  if (vdom instanceof Array) {\r\n    return vdom.map(element => extractText(element)).join('');\r\n  } else if (typeof vdom === 'object' && vdom !== null) {\r\n    return extractText(vdom.children);\r\n  } else {\r\n    return vdom;\r\n  }\r\n}\r\n","/**\r\n * The `extract` utility deletes a property from an object and returns its\r\n * value.\r\n *\r\n * @param {Object} object The object that owns the property\r\n * @param {String} property The name of the property to extract\r\n * @return {*} The value of the property\r\n */\r\nexport default function extract(object, property) {\r\n  const value = object[property];\r\n\r\n  delete object[property];\r\n\r\n  return value;\r\n}\r\n","import Model from '../Model';\r\n\r\nclass Group extends Model {}\r\n\r\nObject.assign(Group.prototype, {\r\n  nameSingular: Model.attribute('nameSingular'),\r\n  namePlural: Model.attribute('namePlural'),\r\n  color: Model.attribute('color'),\r\n  icon: Model.attribute('icon')\r\n});\r\n\r\nGroup.ADMINISTRATOR_ID = '1';\r\nGroup.GUEST_ID = '2';\r\nGroup.MEMBER_ID = '3';\r\n\r\nexport default Group;\r\n","import Component from '../Component';\r\nimport Alert from './Alert';\r\nimport Button from './Button';\r\n\r\n/**\r\n * The `Modal` component displays a modal dialog, wrapped in a form. Subclasses\r\n * should implement the `className`, `title`, and `content` methods.\r\n *\r\n * @abstract\r\n */\r\nexport default class Modal extends Component {\r\n  init() {\r\n    /**\r\n     * An alert component to show below the header.\r\n     *\r\n     * @type {Alert}\r\n     */\r\n    this.alert = null;\r\n  }\r\n\r\n  view() {\r\n    if (this.alert) {\r\n      this.alert.props.dismissible = false;\r\n    }\r\n\r\n    return (\r\n      <div className={'Modal modal-dialog ' + this.className()}>\r\n        <div className=\"Modal-content\">\r\n          {this.isDismissible() ? (\r\n            <div className=\"Modal-close App-backControl\">\r\n              {Button.component({\r\n                icon: 'fas fa-times',\r\n                onclick: this.hide.bind(this),\r\n                className: 'Button Button--icon Button--link'\r\n              })}\r\n            </div>\r\n          ) : ''}\r\n\r\n          <form onsubmit={this.onsubmit.bind(this)}>\r\n            <div className=\"Modal-header\">\r\n              <h3 className=\"App-titleControl App-titleControl--text\">{this.title()}</h3>\r\n            </div>\r\n\r\n            {alert ? <div className=\"Modal-alert\">{this.alert}</div> : ''}\r\n\r\n            {this.content()}\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Determine whether or not the modal should be dismissible via an 'x' button.\r\n   *\r\n   * @return {Boolean}\r\n   */\r\n  isDismissible() {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Get the class name to apply to the modal.\r\n   *\r\n   * @return {String}\r\n   * @abstract\r\n   */\r\n  className() {\r\n  }\r\n\r\n  /**\r\n   * Get the title of the modal dialog.\r\n   *\r\n   * @return {String}\r\n   * @abstract\r\n   */\r\n  title() {\r\n  }\r\n\r\n  /**\r\n   * Get the content of the modal.\r\n   *\r\n   * @return {VirtualElement}\r\n   * @abstract\r\n   */\r\n  content() {\r\n  }\r\n\r\n  /**\r\n   * Handle the modal form's submit event.\r\n   *\r\n   * @param {Event} e\r\n   */\r\n  onsubmit() {\r\n  }\r\n\r\n  /**\r\n   * Focus on the first input when the modal is ready to be used.\r\n   */\r\n  onready() {\r\n    this.$('form').find('input, select, textarea').first().focus().select();\r\n  }\r\n\r\n  onhide() {\r\n  }\r\n\r\n  /**\r\n   * Hide the modal.\r\n   */\r\n  hide() {\r\n    app.modal.close();\r\n  }\r\n\r\n  /**\r\n   * Stop loading.\r\n   */\r\n  loaded() {\r\n    this.loading = false;\r\n    m.redraw();\r\n  }\r\n\r\n  /**\r\n   * Show an alert describing an error returned from the API, and give focus to\r\n   * the first relevant field.\r\n   *\r\n   * @param {RequestError} error\r\n   */\r\n  onerror(error) {\r\n    this.alert = error.alert;\r\n\r\n    m.redraw();\r\n\r\n    if (error.status === 422 && error.response.errors) {\r\n      this.$('form [name=\"' + error.response.errors[0].source.pointer.replace('/data/attributes/', '') + '\"]').select();\r\n    } else {\r\n      this.onready();\r\n    }\r\n  }\r\n}\r\n","import Component from '../Component';\r\nimport icon from '../helpers/icon';\r\nimport listItems from '../helpers/listItems';\r\n\r\n/**\r\n * The `Dropdown` component displays a button which, when clicked, shows a\r\n * dropdown menu beneath it.\r\n *\r\n * ### Props\r\n *\r\n * - `buttonClassName` A class name to apply to the dropdown toggle button.\r\n * - `menuClassName` A class name to apply to the dropdown menu.\r\n * - `icon` The name of an icon to show in the dropdown toggle button.\r\n * - `caretIcon` The name of an icon to show on the right of the button.\r\n * - `label` The label of the dropdown toggle button. Defaults to 'Controls'.\r\n * - `onhide`\r\n * - `onshow`\r\n *\r\n * The children will be displayed as a list inside of the dropdown menu.\r\n */\r\nexport default class Dropdown extends Component {\r\n  static initProps(props) {\r\n    super.initProps(props);\r\n\r\n    props.className = props.className || '';\r\n    props.buttonClassName = props.buttonClassName || '';\r\n    props.menuClassName = props.menuClassName || '';\r\n    props.label = props.label || '';\r\n    props.caretIcon = typeof props.caretIcon !== 'undefined' ? props.caretIcon : 'fas fa-caret-down';\r\n  }\r\n\r\n  init() {\r\n    this.showing = false;\r\n  }\r\n\r\n  view() {\r\n    const items = this.props.children ? listItems(this.props.children) : [];\r\n\r\n    return (\r\n      <div className={'ButtonGroup Dropdown dropdown ' + this.props.className + ' itemCount' + items.length + (this.showing ? ' open' : '')}>\r\n        {this.getButton()}\r\n        {this.getMenu(items)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  config(isInitialized) {\r\n    if (isInitialized) return;\r\n\r\n    this.$('> .Dropdown-toggle').dropdown();\r\n\r\n    // When opening the dropdown menu, work out if the menu goes beyond the\r\n    // bottom of the viewport. If it does, we will apply class to make it show\r\n    // above the toggle button instead of below it.\r\n    this.element.addEventListener('shown.bs.dropdown', () => {\r\n      this.showing = true;\r\n\r\n      if (this.props.onshow) {\r\n        this.props.onshow();\r\n      }\r\n\r\n      m.redraw();\r\n\r\n      const $menu = this.$('.Dropdown-menu');\r\n      const isRight = $menu.hasClass('Dropdown-menu--right');\r\n\r\n      $menu.removeClass('Dropdown-menu--top Dropdown-menu--right');\r\n\r\n      $menu.toggleClass(\r\n        'Dropdown-menu--top',\r\n        $menu.offset().top + $menu.height() > $(window).scrollTop() + $(window).height()\r\n      );\r\n\r\n      if ($menu.offset().top < 0) {\r\n        $menu.removeClass('Dropdown-menu--top');\r\n      }\r\n\r\n      $menu.toggleClass(\r\n        'Dropdown-menu--right',\r\n        isRight || $menu.offset().left + $menu.width() > $(window).scrollLeft() + $(window).width()\r\n      );\r\n    });\r\n\r\n    this.element.addEventListener('hidden.bs.dropdown', () => {\r\n      this.showing = false;\r\n\r\n      if (this.props.onhide) {\r\n        this.props.onhide();\r\n      }\r\n\r\n      m.redraw();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the template for the button.\r\n   *\r\n   * @return {*}\r\n   * @protected\r\n   */\r\n  getButton() {\r\n    return (\r\n      <button\r\n        className={'Dropdown-toggle ' + this.props.buttonClassName}\r\n        data-toggle=\"dropdown\"\r\n        onclick={this.props.onclick}>\r\n        {this.getButtonContent()}\r\n      </button>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get the template for the button's content.\r\n   *\r\n   * @return {*}\r\n   * @protected\r\n   */\r\n  getButtonContent() {\r\n    return [\r\n      this.props.icon ? icon(this.props.icon, {className: 'Button-icon'}) : '',\r\n      <span className=\"Button-label\">{this.props.label}</span>,\r\n      this.props.caretIcon ? icon(this.props.caretIcon, {className: 'Button-caret'}) : ''\r\n    ];\r\n  }\r\n\r\n  getMenu(items) {\r\n    return (\r\n      <ul className={'Dropdown-menu dropdown-menu ' + this.props.menuClassName}>\r\n        {items}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n","var __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar defaults = {\r\n    lines: 12,\r\n    length: 7,\r\n    width: 5,\r\n    radius: 10,\r\n    scale: 1.0,\r\n    corners: 1,\r\n    color: '#000',\r\n    fadeColor: 'transparent',\r\n    animation: 'spinner-line-fade-default',\r\n    rotate: 0,\r\n    direction: 1,\r\n    speed: 1,\r\n    zIndex: 2e9,\r\n    className: 'spinner',\r\n    top: '50%',\r\n    left: '50%',\r\n    shadow: '0 0 1px transparent',\r\n    position: 'absolute',\r\n};\r\nvar Spinner = /** @class */ (function () {\r\n    function Spinner(opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        this.opts = __assign({}, defaults, opts);\r\n    }\r\n    /**\r\n     * Adds the spinner to the given target element. If this instance is already\r\n     * spinning, it is automatically removed from its previous target by calling\r\n     * stop() internally.\r\n     */\r\n    Spinner.prototype.spin = function (target) {\r\n        this.stop();\r\n        this.el = document.createElement('div');\r\n        this.el.className = this.opts.className;\r\n        this.el.setAttribute('role', 'progressbar');\r\n        css(this.el, {\r\n            position: this.opts.position,\r\n            width: 0,\r\n            zIndex: this.opts.zIndex,\r\n            left: this.opts.left,\r\n            top: this.opts.top,\r\n            transform: \"scale(\" + this.opts.scale + \")\",\r\n        });\r\n        if (target) {\r\n            target.insertBefore(this.el, target.firstChild || null);\r\n        }\r\n        drawLines(this.el, this.opts);\r\n        return this;\r\n    };\r\n    /**\r\n     * Stops and removes the Spinner.\r\n     * Stopped spinners may be reused by calling spin() again.\r\n     */\r\n    Spinner.prototype.stop = function () {\r\n        if (this.el) {\r\n            if (typeof requestAnimationFrame !== 'undefined') {\r\n                cancelAnimationFrame(this.animateId);\r\n            }\r\n            else {\r\n                clearTimeout(this.animateId);\r\n            }\r\n            if (this.el.parentNode) {\r\n                this.el.parentNode.removeChild(this.el);\r\n            }\r\n            this.el = undefined;\r\n        }\r\n        return this;\r\n    };\r\n    return Spinner;\r\n}());\r\nexport { Spinner };\r\n/**\r\n * Sets multiple style properties at once.\r\n */\r\nfunction css(el, props) {\r\n    for (var prop in props) {\r\n        el.style[prop] = props[prop];\r\n    }\r\n    return el;\r\n}\r\n/**\r\n * Returns the line color from the given string or array.\r\n */\r\nfunction getColor(color, idx) {\r\n    return typeof color == 'string' ? color : color[idx % color.length];\r\n}\r\n/**\r\n * Internal method that draws the individual lines.\r\n */\r\nfunction drawLines(el, opts) {\r\n    var borderRadius = (Math.round(opts.corners * opts.width * 500) / 1000) + 'px';\r\n    var shadow = 'none';\r\n    if (opts.shadow === true) {\r\n        shadow = '0 2px 4px #000'; // default shadow\r\n    }\r\n    else if (typeof opts.shadow === 'string') {\r\n        shadow = opts.shadow;\r\n    }\r\n    var shadows = parseBoxShadow(shadow);\r\n    for (var i = 0; i < opts.lines; i++) {\r\n        var degrees = ~~(360 / opts.lines * i + opts.rotate);\r\n        var backgroundLine = css(document.createElement('div'), {\r\n            position: 'absolute',\r\n            top: -opts.width / 2 + \"px\",\r\n            width: (opts.length + opts.width) + 'px',\r\n            height: opts.width + 'px',\r\n            background: getColor(opts.fadeColor, i),\r\n            borderRadius: borderRadius,\r\n            transformOrigin: 'left',\r\n            transform: \"rotate(\" + degrees + \"deg) translateX(\" + opts.radius + \"px)\",\r\n        });\r\n        var delay = i * opts.direction / opts.lines / opts.speed;\r\n        delay -= 1 / opts.speed; // so initial animation state will include trail\r\n        var line = css(document.createElement('div'), {\r\n            width: '100%',\r\n            height: '100%',\r\n            background: getColor(opts.color, i),\r\n            borderRadius: borderRadius,\r\n            boxShadow: normalizeShadow(shadows, degrees),\r\n            animation: 1 / opts.speed + \"s linear \" + delay + \"s infinite \" + opts.animation,\r\n        });\r\n        backgroundLine.appendChild(line);\r\n        el.appendChild(backgroundLine);\r\n    }\r\n}\r\nfunction parseBoxShadow(boxShadow) {\r\n    var regex = /^\\s*([a-zA-Z]+\\s+)?(-?\\d+(\\.\\d+)?)([a-zA-Z]*)\\s+(-?\\d+(\\.\\d+)?)([a-zA-Z]*)(.*)$/;\r\n    var shadows = [];\r\n    for (var _i = 0, _a = boxShadow.split(','); _i < _a.length; _i++) {\r\n        var shadow = _a[_i];\r\n        var matches = shadow.match(regex);\r\n        if (matches === null) {\r\n            continue; // invalid syntax\r\n        }\r\n        var x = +matches[2];\r\n        var y = +matches[5];\r\n        var xUnits = matches[4];\r\n        var yUnits = matches[7];\r\n        if (x === 0 && !xUnits) {\r\n            xUnits = yUnits;\r\n        }\r\n        if (y === 0 && !yUnits) {\r\n            yUnits = xUnits;\r\n        }\r\n        if (xUnits !== yUnits) {\r\n            continue; // units must match to use as coordinates\r\n        }\r\n        shadows.push({\r\n            prefix: matches[1] || '',\r\n            x: x,\r\n            y: y,\r\n            xUnits: xUnits,\r\n            yUnits: yUnits,\r\n            end: matches[8],\r\n        });\r\n    }\r\n    return shadows;\r\n}\r\n/**\r\n * Modify box-shadow x/y offsets to counteract rotation\r\n */\r\nfunction normalizeShadow(shadows, degrees) {\r\n    var normalized = [];\r\n    for (var _i = 0, shadows_1 = shadows; _i < shadows_1.length; _i++) {\r\n        var shadow = shadows_1[_i];\r\n        var xy = convertOffset(shadow.x, shadow.y, degrees);\r\n        normalized.push(shadow.prefix + xy[0] + shadow.xUnits + ' ' + xy[1] + shadow.yUnits + shadow.end);\r\n    }\r\n    return normalized.join(', ');\r\n}\r\nfunction convertOffset(x, y, degrees) {\r\n    var radians = degrees * Math.PI / 180;\r\n    var sin = Math.sin(radians);\r\n    var cos = Math.cos(radians);\r\n    return [\r\n        Math.round((x * cos + y * sin) * 1000) / 1000,\r\n        Math.round((-x * sin + y * cos) * 1000) / 1000,\r\n    ];\r\n}\r\n","import Component from '../Component';\r\nimport { Spinner } from 'spin.js';\r\n\r\n/**\r\n * The `LoadingIndicator` component displays a loading spinner with spin.js. It\r\n * may have the following special props:\r\n *\r\n * - `size` The spin.js size preset to use. Defaults to 'small'.\r\n *\r\n * All other props will be assigned as attributes on the element.\r\n */\r\nexport default class LoadingIndicator extends Component {\r\n  view() {\r\n    const attrs = Object.assign({}, this.props);\r\n\r\n    attrs.className = 'LoadingIndicator ' + (attrs.className || '');\r\n    delete attrs.size;\r\n\r\n    return <div {...attrs}>{m.trust('&nbsp;')}</div>;\r\n  }\r\n\r\n  config(isInitialized) {\r\n    if (isInitialized) return;\r\n\r\n    const options = { zIndex: 'auto', color: this.$().css('color') };\r\n\r\n    switch (this.props.size) {\r\n      case 'large':\r\n        Object.assign(options, { lines: 10, length: 8, width: 4, radius: 8 });\r\n        break;\r\n\r\n      case 'tiny':\r\n        Object.assign(options, { lines: 8, length: 2, width: 2, radius: 3 });\r\n        break;\r\n\r\n      default:\r\n        Object.assign(options, { lines: 8, length: 4, width: 3, radius: 5 });\r\n    }\r\n\r\n    new Spinner(options).spin(this.element);\r\n  }\r\n}\r\n","/**\r\n * The `avatar` helper displays a user's avatar.\r\n *\r\n * @param {User} user\r\n * @param {Object} attrs Attributes to apply to the avatar element\r\n * @return {Object}\r\n */\r\nexport default function avatar(user, attrs = {}) {\r\n  attrs.className = 'Avatar ' + (attrs.className || '');\r\n  let content = '';\r\n\r\n  // If the `title` attribute is set to null or false, we don't want to give the\r\n  // avatar a title. On the other hand, if it hasn't been given at all, we can\r\n  // safely default it to the user's username.\r\n  const hasTitle = attrs.title === 'undefined' || attrs.title;\r\n  if (!hasTitle) delete attrs.title;\r\n\r\n  // If a user has been passed, then we will set up an avatar using their\r\n  // uploaded image, or the first letter of their username if they haven't\r\n  // uploaded one.\r\n  if (user) {\r\n    const username = user.displayName() || '?';\r\n    const avatarUrl = user.avatarUrl();\r\n\r\n    if (hasTitle) attrs.title = attrs.title || username;\r\n\r\n    if (avatarUrl) {\r\n      return <img {...attrs} src={avatarUrl}/>;\r\n    }\r\n\r\n    content = username.charAt(0).toUpperCase();\r\n    attrs.style = {background: user.color()};\r\n  }\r\n\r\n  return <span {...attrs}>{content}</span>;\r\n}\r\n","import Component from '../Component';\r\nimport Button from './Button';\r\nimport listItems from '../helpers/listItems';\r\nimport extract from '../utils/extract';\r\n\r\n/**\r\n * The `Alert` component represents an alert box, which contains a message,\r\n * some controls, and may be dismissible.\r\n *\r\n * The alert may have the following special props:\r\n *\r\n * - `type` The type of alert this is. Will be used to give the alert a class\r\n *   name of `Alert--{type}`.\r\n * - `controls` An array of controls to show in the alert.\r\n * - `dismissible` Whether or not the alert can be dismissed.\r\n * - `ondismiss` A callback to run when the alert is dismissed.\r\n *\r\n * All other props will be assigned as attributes on the alert element.\r\n */\r\nexport default class Alert extends Component {\r\n  view() {\r\n    const attrs = Object.assign({}, this.props);\r\n\r\n    const type = extract(attrs, 'type');\r\n    attrs.className = 'Alert Alert--' + type + ' ' + (attrs.className || '');\r\n\r\n    const children = extract(attrs, 'children');\r\n    const controls = extract(attrs, 'controls') || [];\r\n\r\n    // If the alert is meant to be dismissible (which is the case by default),\r\n    // then we will create a dismiss button to append as the final control in\r\n    // the alert.\r\n    const dismissible = extract(attrs, 'dismissible');\r\n    const ondismiss = extract(attrs, 'ondismiss');\r\n    const dismissControl = [];\r\n\r\n    if (dismissible || dismissible === undefined) {\r\n      dismissControl.push(\r\n        <Button\r\n          icon=\"fas fa-times\"\r\n          className=\"Button Button--link Button--icon Alert-dismiss\"\r\n          onclick={ondismiss}/>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div {...attrs}>\r\n        <span className=\"Alert-body\">\r\n          {children}\r\n        </span>\r\n        <ul className=\"Alert-controls\">\r\n          {listItems(controls.concat(dismissControl))}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","/**\r\n * The `username` helper displays a user's username in a <span class=\"username\">\r\n * tag. If the user doesn't exist, the username will be displayed as [deleted].\r\n *\r\n * @param {User} user\r\n * @return {Object}\r\n */\r\nexport default function username(user) {\r\n  const name = (user && user.displayName()) || app.translator.trans('core.lib.username.deleted_text');\r\n\r\n  return <span className=\"username\">{name}</span>;\r\n}\r\n","/**\r\n * The `computed` utility creates a function that will cache its output until\r\n * any of the dependent values are dirty.\r\n *\r\n * @param {...String} dependentKeys The keys of the dependent values.\r\n * @param {function} compute The function which computes the value using the\r\n *     dependent values.\r\n * @return {Function}\r\n */\r\nexport default function computed(...dependentKeys) {\r\n  const keys = dependentKeys.slice(0, -1);\r\n  const compute = dependentKeys.slice(-1)[0];\r\n\r\n  const dependentValues = {};\r\n  let computedValue;\r\n\r\n  return function() {\r\n    let recompute = false;\r\n\r\n    // Read all of the dependent values. If any of them have changed since last\r\n    // time, then we'll want to recompute our output.\r\n    keys.forEach(key => {\r\n      const value = typeof this[key] === 'function' ? this[key]() : this[key];\r\n\r\n      if (dependentValues[key] !== value) {\r\n        recompute = true;\r\n        dependentValues[key] = value;\r\n      }\r\n    });\r\n\r\n    if (recompute) {\r\n      computedValue = compute.apply(this, keys.map(key => dependentValues[key]));\r\n    }\r\n\r\n    return computedValue;\r\n  };\r\n}\r\n","import Button from './Button';\r\n\r\n/**\r\n * The `LinkButton` component defines a `Button` which links to a route.\r\n *\r\n * ### Props\r\n *\r\n * All of the props accepted by `Button`, plus:\r\n *\r\n * - `active` Whether or not the page that this button links to is currently\r\n *   active.\r\n * - `href` The URL to link to. If the current URL `m.route()` matches this,\r\n *   the `active` prop will automatically be set to true.\r\n */\r\nexport default class LinkButton extends Button {\r\n  static initProps(props) {\r\n    props.active = this.isActive(props);\r\n    props.config = props.config || m.route;\r\n  }\r\n\r\n  view() {\r\n    const vdom = super.view();\r\n\r\n    vdom.tag = 'a';\r\n\r\n    return vdom;\r\n  }\r\n\r\n  /**\r\n   * Determine whether a component with the given props is 'active'.\r\n   *\r\n   * @param {Object} props\r\n   * @return {Boolean}\r\n   */\r\n  static isActive(props) {\r\n    return typeof props.active !== 'undefined'\r\n      ? props.active\r\n      : m.route() === props.href;\r\n  }\r\n}\r\n","import Component from '../Component';\r\n\r\n/**\r\n * The `Separator` component defines a menu separator item.\r\n */\r\nclass Separator extends Component {\r\n  view() {\r\n    return <li className=\"Dropdown-separator\"/>;\r\n  }\r\n}\r\n\r\nSeparator.isListItem = true;\r\n\r\nexport default Separator;\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\r\n * The `humanTime` utility converts a date to a localized, human-readable time-\r\n * ago string.\r\n *\r\n * @param {Date} time\r\n * @return {String}\r\n */\r\nexport default function humanTime(time) {\r\n  let m = dayjs(time);\r\n  const now = dayjs();\r\n\r\n  // To prevent showing things like \"in a few seconds\" due to small offsets\r\n  // between client and server time, we always reset future dates to the\r\n  // current time. This will result in \"just now\" being shown instead.\r\n  if (m.isAfter(now)) {\r\n    m = now;\r\n  }\r\n\r\n  const day = 864e5;\r\n  const diff = m.diff(dayjs());\r\n  let ago = null;\r\n\r\n  // If this date was more than a month ago, we'll show the name of the month\r\n  // in the string. If it wasn't this year, we'll show the year as well.\r\n  if (diff < -30 * day) {\r\n    if (m.year() === dayjs().year()) {\r\n      ago = m.format('D MMM');\r\n    } else {\r\n      ago = m.format('MMM \\'YY');\r\n    }\r\n  } else {\r\n    ago = m.fromNow();\r\n  }\r\n\r\n  return ago;\r\n};\r\n","import Component from '../Component';\r\nimport icon from '../helpers/icon';\r\nimport extract from '../utils/extract';\r\n\r\n/**\r\n * The `Badge` component represents a user/discussion badge, indicating some\r\n * status (e.g. a discussion is stickied, a user is an admin).\r\n *\r\n * A badge may have the following special props:\r\n *\r\n * - `type` The type of badge this is. This will be used to give the badge a\r\n *   class name of `Badge--{type}`.\r\n * - `icon` The name of an icon to show inside the badge.\r\n * - `label`\r\n *\r\n * All other props will be assigned as attributes on the badge element.\r\n */\r\nexport default class Badge extends Component {\r\n  view() {\r\n    const attrs = Object.assign({}, this.props);\r\n    const type = extract(attrs, 'type');\r\n    const iconName = extract(attrs, 'icon');\r\n\r\n    attrs.className = 'Badge ' + (type ? 'Badge--' + type : '') + ' ' + (attrs.className || '');\r\n    attrs.title = extract(attrs, 'label') || '';\r\n\r\n    return (\r\n      <span {...attrs}>\r\n        {iconName ? icon(iconName, {className: 'Badge-icon'}) : m.trust('&nbsp;')}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  config(isInitialized) {\r\n    if (isInitialized) return;\r\n\r\n    if (this.props.label) this.$().tooltip({container: 'body'});\r\n  }\r\n}\r\n","import Component from '../Component';\r\nimport listItems from '../helpers/listItems';\r\n\r\n/**\r\n * The `FieldSet` component defines a collection of fields, displayed in a list\r\n * underneath a title. Accepted properties are:\r\n *\r\n * - `className` The class name for the fieldset.\r\n * - `label` The title of this group of fields.\r\n *\r\n * The children should be an array of items to show in the fieldset.\r\n */\r\nexport default class FieldSet extends Component {\r\n  view() {\r\n    return (\r\n      <fieldset className={this.props.className}>\r\n        <legend>{this.props.label}</legend>\r\n        <ul>{listItems(this.props.children)}</ul>\r\n      </fieldset>\r\n    );\r\n  }\r\n}\r\n","/**\r\n * The `classList` utility creates a list of class names by joining an object's\r\n * keys, but only for values which are truthy.\r\n *\r\n * @example\r\n * classList({ foo: true, bar: false, qux: 'qaz' });\r\n * // \"foo qux\"\r\n *\r\n * @param {Object} classes\r\n * @return {String}\r\n */\r\nexport default function classList(classes) {\r\n  let classNames;\r\n\r\n  if (classes instanceof Array) {\r\n    classNames = classes.filter(name => name);\r\n  } else {\r\n    classNames = [];\r\n\r\n    for (const i in classes) {\r\n      if (classes[i]) classNames.push(i);\r\n    }\r\n  }\r\n\r\n  return classNames.join(' ');\r\n}\r\n","/**\r\n * Truncate a string to the given length, appending ellipses if necessary.\r\n *\r\n * @param {String} string\r\n * @param {Number} length\r\n * @param {Number} [start=0]\r\n * @return {String}\r\n */\r\nexport function truncate(string, length, start = 0) {\r\n  return (start > 0 ? '...' : '') +\r\n    string.substring(start, start + length) +\r\n    (string.length > start + length ? '...' : '');\r\n}\r\n\r\n/**\r\n * Create a slug out of the given string. Non-alphanumeric characters are\r\n * converted to hyphens.\r\n *\r\n * NOTE: This method does not use the comparably sophisticated transliteration\r\n * mechanism that is employed in the backend. Therefore, it should only be used\r\n * to *suggest* slugs that can be overridden by the user.\r\n *\r\n * @param {String} string\r\n * @return {String}\r\n */\r\nexport function slug(string) {\r\n  return string.toLowerCase()\r\n    .replace(/[^a-z0-9]/gi, '-')\r\n    .replace(/-+/g, '-')\r\n    .replace(/-$|^-/g, '');\r\n}\r\n\r\n/**\r\n * Strip HTML tags and quotes out of the given string, replacing them with\r\n * meaningful punctuation.\r\n *\r\n * @param {String} string\r\n * @return {String}\r\n */\r\nexport function getPlainContent(string) {\r\n  const html = string\r\n    .replace(/(<\\/p>|<br>)/g, '$1 &nbsp;')\r\n    .replace(/<img\\b[^>]*>/ig, ' ');\r\n\r\n  const dom = $('<div/>').html(html);\r\n\r\n  dom.find(getPlainContent.removeSelectors.join(',')).remove();\r\n\r\n  return dom.text().replace(/\\s+/g, ' ').trim();\r\n}\r\n\r\n/**\r\n * An array of DOM selectors to remove when getting plain content.\r\n *\r\n * @type {Array}\r\n */\r\ngetPlainContent.removeSelectors = ['blockquote', 'script'];\r\n\r\n/**\r\n * Make a string's first character uppercase.\r\n *\r\n * @param {String} string\r\n * @return {String}\r\n */\r\nexport function ucfirst(string) {\r\n  return string.substr(0, 1).toUpperCase() + string.substr(1);\r\n}\r\n","import Dropdown from './Dropdown';\r\nimport icon from '../helpers/icon';\r\n\r\n/**\r\n * The `SelectDropdown` component is the same as a `Dropdown`, except the toggle\r\n * button's label is set as the label of the first child which has a truthy\r\n * `active` prop.\r\n *\r\n * ### Props\r\n *\r\n * - `caretIcon`\r\n * - `defaultLabel`\r\n */\r\nexport default class SelectDropdown extends Dropdown {\r\n  static initProps(props) {\r\n    props.caretIcon = typeof props.caretIcon !== 'undefined' ? props.caretIcon : 'fas fa-sort';\r\n\r\n    super.initProps(props);\r\n\r\n    props.className += ' Dropdown--select';\r\n  }\r\n\r\n  getButtonContent() {\r\n    const activeChild = this.props.children.filter(child => child.props.active)[0];\r\n    let label = activeChild && activeChild.props.children || this.props.defaultLabel;\r\n\r\n    if (label instanceof Array) label = label[0];\r\n\r\n    return [\r\n      <span className=\"Button-label\">{label}</span>,\r\n      icon(this.props.caretIcon, {className: 'Button-caret'})\r\n    ];\r\n  }\r\n}\r\n","import Badge from './Badge';\r\n\r\nexport default class GroupBadge extends Badge {\r\n  static initProps(props) {\r\n    super.initProps(props);\r\n\r\n    if (props.group) {\r\n      props.icon = props.group.icon();\r\n      props.style = {backgroundColor: props.group.color()};\r\n      props.label = typeof props.label === 'undefined' ? props.group.nameSingular() : props.label;\r\n      props.type = 'group--' + props.group.id();\r\n\r\n      delete props.group;\r\n    }\r\n  }\r\n}\r\n","import { truncate } from '../utils/string';\r\n\r\n/**\r\n * The `highlight` helper searches for a word phrase in a string, and wraps\r\n * matches with the <mark> tag.\r\n *\r\n * @param {String} string The string to highlight.\r\n * @param {String|RegExp} phrase The word or words to highlight.\r\n * @param {Integer} [length] The number of characters to truncate the string to.\r\n *     The string will be truncated surrounding the first match.\r\n * @return {Object}\r\n */\r\nexport default function highlight(string, phrase, length) {\r\n  if (!phrase && !length) return string;\r\n\r\n  // Convert the word phrase into a global regular expression (if it isn't\r\n  // already) so we can search the string for matched.\r\n  const regexp = phrase instanceof RegExp ? phrase : new RegExp(phrase, 'gi');\r\n\r\n  let highlighted = string;\r\n  let start = 0;\r\n\r\n  // If a length was given, the truncate the string surrounding the first match.\r\n  if (length) {\r\n    if (phrase) start = Math.max(0, string.search(regexp) - length / 2);\r\n\r\n    highlighted = truncate(highlighted, length, start);\r\n  }\r\n\r\n  // Convert the string into HTML entities, then highlight all matches with\r\n  // <mark> tags. Then we will return the result as a trusted HTML string.\r\n  highlighted = $('<div/>').text(highlighted).html();\r\n\r\n  if (phrase) highlighted = highlighted.replace(regexp, '<mark>$&</mark>');\r\n\r\n  return m.trust(highlighted);\r\n}\r\n","const later = window.requestAnimationFrame ||\r\n  window.webkitRequestAnimationFrame ||\r\n  window.mozRequestAnimationFrame ||\r\n  window.msRequestAnimationFrame ||\r\n  window.oRequestAnimationFrame ||\r\n  (callback => window.setTimeout(callback, 1000 / 60));\r\n\r\n/**\r\n * The `ScrollListener` class sets up a listener that handles window scroll\r\n * events.\r\n */\r\nexport default class ScrollListener {\r\n  /**\r\n   * @param {Function} callback The callback to run when the scroll position\r\n   *     changes.\r\n   * @public\r\n   */\r\n  constructor(callback) {\r\n    this.callback = callback;\r\n    this.ticking = false;\r\n  }\r\n\r\n  /**\r\n   * On each animation frame, as long as the listener is active, run the\r\n   * `update` method.\r\n   *\r\n   * @protected\r\n   */\r\n  loop() {\r\n    // THROTTLE: If the callback is still running (or hasn't yet run), we ignore\r\n    // further scroll events.\r\n    if (this.ticking) return;\r\n\r\n    // Schedule the callback to be executed soon (TM), and stop throttling once\r\n    // the callback is done.\r\n    later(() => {\r\n      this.update();\r\n      this.ticking = false;\r\n    });\r\n\r\n    this.ticking = true;\r\n  }\r\n\r\n  /**\r\n   * Run the callback, whether there was a scroll event or not.\r\n   *\r\n   * @public\r\n   */\r\n  update() {\r\n    this.callback(window.pageYOffset);\r\n  }\r\n\r\n  /**\r\n   * Start listening to and handling the window's scroll position.\r\n   *\r\n   * @public\r\n   */\r\n  start() {\r\n    if (!this.active) {\r\n      window.addEventListener(\r\n        'scroll',\r\n        this.active = this.loop.bind(this)\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop listening to and handling the window's scroll position.\r\n   *\r\n   * @public\r\n   */\r\n  stop() {\r\n    window.removeEventListener('scroll', this.active);\r\n\r\n    this.active = null;\r\n  }\r\n}\r\n","/**\r\n * Extend an object's method by running its output through a mutating callback\r\n * every time it is called.\r\n *\r\n * The callback accepts the method's return value and should perform any\r\n * mutations directly on this value. For this reason, this function will not be\r\n * effective on methods which return scalar values (numbers, strings, booleans).\r\n *\r\n * Care should be taken to extend the correct object  in most cases, a class'\r\n * prototype will be the desired target of extension, not the class itself.\r\n *\r\n * @example\r\n * extend(Discussion.prototype, 'badges', function(badges) {\r\n *   // do something with `badges`\r\n * });\r\n *\r\n * @param {Object} object The object that owns the method\r\n * @param {String} method The name of the method to extend\r\n * @param {function} callback A callback which mutates the method's output\r\n */\r\nexport function extend(object, method, callback) {\r\n  const original = object[method];\r\n\r\n  object[method] = function(...args) {\r\n    const value = original ? original.apply(this, args) : undefined;\r\n\r\n    callback.apply(this, [value].concat(args));\r\n\r\n    return value;\r\n  };\r\n\r\n  Object.assign(object[method], original);\r\n}\r\n\r\n/**\r\n * Override an object's method by replacing it with a new function, so that the\r\n * new function will be run every time the object's method is called.\r\n *\r\n * The replacement function accepts the original method as its first argument,\r\n * which is like a call to 'super'. Any arguments passed to the original method\r\n * are also passed to the replacement.\r\n *\r\n * Care should be taken to extend the correct object  in most cases, a class'\r\n * prototype will be the desired target of extension, not the class itself.\r\n *\r\n * @example\r\n * override(Discussion.prototype, 'badges', function(original) {\r\n *   const badges = original();\r\n *   // do something with badges\r\n *   return badges;\r\n * });\r\n *\r\n * @param {Object} object The object that owns the method\r\n * @param {String} method The name of the method to override\r\n * @param {function} newMethod The method to replace it with\r\n */\r\nexport function override(object, method, newMethod) {\r\n  const original = object[method];\r\n\r\n  object[method] = function(...args) {\r\n    return newMethod.apply(this, [original.bind(this)].concat(args));\r\n  };\r\n\r\n  Object.assign(object[method], original);\r\n}\r\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import Checkbox from './Checkbox';\r\n\r\n/**\r\n * The `Switch` component is a `Checkbox`, but with a switch display instead of\r\n * a tick/cross one.\r\n */\r\nexport default class Switch extends Checkbox {\r\n  static initProps(props) {\r\n    super.initProps(props);\r\n\r\n    props.className = (props.className || '') + ' Checkbox--switch';\r\n  }\r\n\r\n  getDisplay() {\r\n    return this.loading ? super.getDisplay() : '';\r\n  }\r\n}\r\n","/*global ColorThief*/\r\n\r\nimport Model from '../Model';\r\nimport stringToColor from '../utils/stringToColor';\r\nimport ItemList from '../utils/ItemList';\r\nimport computed from '../utils/computed';\r\nimport GroupBadge from '../components/GroupBadge';\r\n\r\nexport default class User extends Model {}\r\n\r\nObject.assign(User.prototype, {\r\n  username: Model.attribute('username'),\r\n  displayName: Model.attribute('displayName'),\r\n  email: Model.attribute('email'),\r\n  isEmailConfirmed: Model.attribute('isEmailConfirmed'),\r\n  password: Model.attribute('password'),\r\n\r\n  avatarUrl: Model.attribute('avatarUrl'),\r\n  preferences: Model.attribute('preferences'),\r\n  groups: Model.hasMany('groups'),\r\n\r\n  joinTime: Model.attribute('joinTime', Model.transformDate),\r\n  lastSeenAt: Model.attribute('lastSeenAt', Model.transformDate),\r\n  markedAllAsReadAt: Model.attribute('markedAllAsReadAt', Model.transformDate),\r\n  unreadNotificationCount: Model.attribute('unreadNotificationCount'),\r\n  newNotificationCount: Model.attribute('newNotificationCount'),\r\n\r\n  discussionCount: Model.attribute('discussionCount'),\r\n  commentCount: Model.attribute('commentCount'),\r\n\r\n  canEdit: Model.attribute('canEdit'),\r\n  canDelete: Model.attribute('canDelete'),\r\n\r\n  avatarColor: null,\r\n  color: computed('username', 'avatarUrl', 'avatarColor', function(username, avatarUrl, avatarColor) {\r\n    // If we've already calculated and cached the dominant color of the user's\r\n    // avatar, then we can return that in RGB format. If we haven't, we'll want\r\n    // to calculate it. Unless the user doesn't have an avatar, in which case\r\n    // we generate a color from their username.\r\n    if (avatarColor) {\r\n      return 'rgb(' + avatarColor.join(', ') + ')';\r\n    } else if (avatarUrl) {\r\n      this.calculateAvatarColor();\r\n      return '';\r\n    }\r\n\r\n    return '#' + stringToColor(username);\r\n  }),\r\n\r\n  /**\r\n   * Check whether or not the user has been seen in the last 5 minutes.\r\n   *\r\n   * @return {Boolean}\r\n   * @public\r\n   */\r\n  isOnline() {\r\n    return this.lastSeenAt() > dayjs().subtract(5, 'minutes').toDate();\r\n  },\r\n\r\n  /**\r\n   * Get the Badge components that apply to this user.\r\n   *\r\n   * @return {ItemList}\r\n   */\r\n  badges() {\r\n    const items = new ItemList();\r\n    const groups = this.groups();\r\n\r\n    if (groups) {\r\n      groups.forEach(group => {\r\n        items.add('group' + group.id(), GroupBadge.component({group}));\r\n      });\r\n    }\r\n\r\n    return items;\r\n  },\r\n\r\n  /**\r\n   * Calculate the dominant color of the user's avatar. The dominant color will\r\n   * be set to the `avatarColor` property once it has been calculated.\r\n   *\r\n   * @protected\r\n   */\r\n  calculateAvatarColor() {\r\n    const image = new Image();\r\n    const user = this;\r\n\r\n    image.onload = function() {\r\n      const colorThief = new ColorThief();\r\n      user.avatarColor = colorThief.getColor(this);\r\n      user.freshness = new Date();\r\n      m.redraw();\r\n    };\r\n    image.crossOrigin = 'anonymous';\r\n    image.src = this.avatarUrl();\r\n  },\r\n\r\n  /**\r\n   * Update the user's preferences.\r\n   *\r\n   * @param {Object} newPreferences\r\n   * @return {Promise}\r\n   */\r\n  savePreferences(newPreferences) {\r\n    const preferences = this.preferences();\r\n\r\n    Object.assign(preferences, newPreferences);\r\n\r\n    return this.save({preferences});\r\n  }\r\n});\r\n","/**\r\n * The `SubtreeRetainer` class represents a Mithril virtual DOM subtree. It\r\n * keeps track of a number of pieces of data, allowing the subtree to be\r\n * retained if none of them have changed.\r\n *\r\n * @example\r\n * // constructor\r\n * this.subtree = new SubtreeRetainer(\r\n *   () => this.props.post.freshness,\r\n *   () => this.showing\r\n * );\r\n * this.subtree.check(() => this.props.user.freshness);\r\n *\r\n * // view\r\n * this.subtree.retain() || 'expensive expression'\r\n *\r\n * @see https://lhorie.github.io/mithril/mithril.html#persisting-dom-elements-across-route-changes\r\n */\r\nexport default class SubtreeRetainer {\r\n  /**\r\n   * @param {...callbacks} callbacks Functions returning data to keep track of.\r\n   */\r\n  constructor(...callbacks) {\r\n    this.callbacks = callbacks;\r\n    this.data = {};\r\n  }\r\n\r\n  /**\r\n   * Return a virtual DOM directive that will retain a subtree if no data has\r\n   * changed since the last check.\r\n   *\r\n   * @return {Object|false}\r\n   * @public\r\n   */\r\n  retain() {\r\n    let needsRebuild = false;\r\n\r\n    this.callbacks.forEach((callback, i) => {\r\n      const result = callback();\r\n\r\n      if (result !== this.data[i]) {\r\n        this.data[i] = result;\r\n        needsRebuild = true;\r\n      }\r\n    });\r\n\r\n    return needsRebuild ? false : {subtree: 'retain'};\r\n  }\r\n\r\n  /**\r\n   * Add another callback to be checked.\r\n   *\r\n   * @param {...Function} callbacks\r\n   * @public\r\n   */\r\n  check(...callbacks) {\r\n    this.callbacks = this.callbacks.concat(callbacks);\r\n  }\r\n\r\n  /**\r\n   * Invalidate the subtree, forcing it to be rerendered.\r\n   *\r\n   * @public\r\n   */\r\n  invalidate() {\r\n    this.data = {};\r\n  }\r\n}\r\n","import Model from '../Model';\r\nimport computed from '../utils/computed';\r\nimport ItemList from '../utils/ItemList';\r\nimport Badge from '../components/Badge';\r\n\r\nexport default class Discussion extends Model {}\r\n\r\nObject.assign(Discussion.prototype, {\r\n  title: Model.attribute('title'),\r\n  slug: Model.attribute('slug'),\r\n\r\n  createdAt: Model.attribute('createdAt', Model.transformDate),\r\n  user: Model.hasOne('user'),\r\n  firstPost: Model.hasOne('firstPost'),\r\n\r\n  lastPostedAt: Model.attribute('lastPostedAt', Model.transformDate),\r\n  lastPostedUser: Model.hasOne('lastPostedUser'),\r\n  lastPost: Model.hasOne('lastPost'),\r\n  lastPostNumber: Model.attribute('lastPostNumber'),\r\n\r\n  commentCount: Model.attribute('commentCount'),\r\n  replyCount: computed('commentCount', commentCount => Math.max(0, commentCount - 1)),\r\n  posts: Model.hasMany('posts'),\r\n  mostRelevantPost: Model.hasOne('mostRelevantPost'),\r\n\r\n  lastReadAt: Model.attribute('lastReadAt', Model.transformDate),\r\n  lastReadPostNumber: Model.attribute('lastReadPostNumber'),\r\n  isUnread: computed('unreadCount', unreadCount => !!unreadCount),\r\n  isRead: computed('unreadCount', unreadCount => app.session.user && !unreadCount),\r\n\r\n  hiddenAt: Model.attribute('hiddenAt', Model.transformDate),\r\n  hiddenUser: Model.hasOne('hiddenUser'),\r\n  isHidden: computed('hiddenAt', hiddenAt => !!hiddenAt),\r\n\r\n  canReply: Model.attribute('canReply'),\r\n  canRename: Model.attribute('canRename'),\r\n  canHide: Model.attribute('canHide'),\r\n  canDelete: Model.attribute('canDelete'),\r\n\r\n  /**\r\n   * Remove a post from the discussion's posts relationship.\r\n   *\r\n   * @param {Integer} id The ID of the post to remove.\r\n   * @public\r\n   */\r\n  removePost(id) {\r\n    const relationships = this.data.relationships;\r\n    const posts = relationships && relationships.posts;\r\n\r\n    if (posts) {\r\n      posts.data.some((data, i) => {\r\n        if (id === data.id) {\r\n          posts.data.splice(i, 1);\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Get the estimated number of unread posts in this discussion for the current\r\n   * user.\r\n   *\r\n   * @return {Integer}\r\n   * @public\r\n   */\r\n  unreadCount() {\r\n    const user = app.session.user;\r\n\r\n    if (user && user.markedAllAsReadAt() < this.lastPostedAt()) {\r\n      return Math.max(0, this.lastPostNumber() - (this.lastReadPostNumber() || 0));\r\n    }\r\n\r\n    return 0;\r\n  },\r\n\r\n  /**\r\n   * Get the Badge components that apply to this discussion.\r\n   *\r\n   * @return {ItemList}\r\n   * @public\r\n   */\r\n  badges() {\r\n    const items = new ItemList();\r\n\r\n    if (this.isHidden()) {\r\n      items.add('hidden', <Badge type=\"hidden\" icon=\"fas fa-trash\" label={app.translator.trans('core.lib.badge.hidden_tooltip')}/>);\r\n    }\r\n\r\n    return items;\r\n  },\r\n\r\n  /**\r\n   * Get a list of all of the post IDs in this discussion.\r\n   *\r\n   * @return {Array}\r\n   * @public\r\n   */\r\n  postIds() {\r\n    const posts = this.data.relationships.posts;\r\n\r\n    return posts ? posts.data.map(link => link.id) : [];\r\n  }\r\n});\r\n","import humanTimeUtil from '../utils/humanTime';\r\n\r\n/**\r\n * The `humanTime` helper displays a time in a human-friendly time-ago format\r\n * (e.g. '12 days ago'), wrapped in a <time> tag with other information about\r\n * the time.\r\n *\r\n * @param {Date} time\r\n * @return {Object}\r\n */\r\nexport default function humanTime(time) {\r\n  const mo = dayjs(time);\r\n\r\n  const datetime = mo.format();\r\n  const full = mo.format('LLLL');\r\n  const ago = humanTimeUtil(time);\r\n\r\n  return <time pubdate datetime={datetime} title={full} data-humantime>{ago}</time>;\r\n}\r\n","import Component from '../Component';\r\nimport LoadingIndicator from './LoadingIndicator';\r\nimport icon from '../helpers/icon';\r\n\r\n/**\r\n * The `Checkbox` component defines a checkbox input.\r\n *\r\n * ### Props\r\n *\r\n * - `state` Whether or not the checkbox is checked.\r\n * - `className` The class name for the root element.\r\n * - `disabled` Whether or not the checkbox is disabled.\r\n * - `onchange` A callback to run when the checkbox is checked/unchecked.\r\n * - `children` A text label to display next to the checkbox.\r\n */\r\nexport default class Checkbox extends Component {\r\n  init() {\r\n    /**\r\n     * Whether or not the checkbox's value is in the process of being saved.\r\n     *\r\n     * @type {Boolean}\r\n     * @public\r\n     */\r\n    this.loading = false;\r\n  }\r\n\r\n  view() {\r\n    let className = 'Checkbox ' + (this.props.state ? 'on' : 'off') + ' ' + (this.props.className || '');\r\n    if (this.loading) className += ' loading';\r\n    if (this.props.disabled) className += ' disabled';\r\n\r\n    return (\r\n      <label className={className}>\r\n        <input type=\"checkbox\"\r\n          checked={this.props.state}\r\n          disabled={this.props.disabled}\r\n          onchange={m.withAttr('checked', this.onchange.bind(this))}/>\r\n        <div className=\"Checkbox-display\">\r\n          {this.getDisplay()}\r\n        </div>\r\n        {this.props.children}\r\n      </label>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get the template for the checkbox's display (tick/cross icon).\r\n   *\r\n   * @return {*}\r\n   * @protected\r\n   */\r\n  getDisplay() {\r\n    return this.loading\r\n      ? LoadingIndicator.component({size: 'tiny'})\r\n      : icon(this.props.state ? 'fas fa-check' : 'fas fa-times');\r\n  }\r\n\r\n  /**\r\n   * Run a callback when the state of the checkbox is changed.\r\n   *\r\n   * @param {Boolean} checked\r\n   * @protected\r\n   */\r\n  onchange(checked) {\r\n    if (this.props.onchange) this.props.onchange(checked, this);\r\n  }\r\n}\r\n","export default class RequestError {\r\n  constructor(status, responseText, options, xhr) {\r\n    this.status = status;\r\n    this.responseText = responseText;\r\n    this.options = options;\r\n    this.xhr = xhr;\r\n\r\n    try {\r\n      this.response = JSON.parse(responseText);\r\n    } catch (e) {\r\n      this.response = null;\r\n    }\r\n\r\n    this.alert = null;\r\n  }\r\n}\r\n","import Component from '../Component';\r\nimport Button from './Button';\r\nimport LinkButton from './LinkButton';\r\n\r\n/**\r\n * The `Navigation` component displays a set of navigation buttons. Typically\r\n * this is just a back button which pops the app's History. If the user is on\r\n * the root page and there is no history to pop, then in some instances it may\r\n * show a button that toggles the app's drawer.\r\n *\r\n * If the app has a pane, it will also include a 'pin' button which toggles the\r\n * pinned state of the pane.\r\n *\r\n * Accepts the following props:\r\n *\r\n * - `className` The name of a class to set on the root element.\r\n * - `drawer` Whether or not to show a button to toggle the app's drawer if\r\n *   there is no more history to pop.\r\n */\r\nexport default class Navigation extends Component {\r\n  view() {\r\n    const {history, pane} = app;\r\n\r\n    return (\r\n      <div className={'Navigation ButtonGroup ' + (this.props.className || '')}\r\n        onmouseenter={pane && pane.show.bind(pane)}\r\n        onmouseleave={pane && pane.onmouseleave.bind(pane)}>\r\n        {history.canGoBack()\r\n          ? [this.getBackButton(), this.getPaneButton()]\r\n          : this.getDrawerButton()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  config(isInitialized, context) {\r\n    // Since this component is 'above' the content of the page (that is, it is a\r\n    // part of the global UI that persists between routes), we will flag the DOM\r\n    // to be retained across route changes.\r\n    context.retain = true;\r\n  }\r\n\r\n  /**\r\n   * Get the back button.\r\n   *\r\n   * @return {Object}\r\n   * @protected\r\n   */\r\n  getBackButton() {\r\n    const {history} = app;\r\n    const previous = history.getPrevious() || {};\r\n\r\n    return LinkButton.component({\r\n      className: 'Button Navigation-back Button--icon',\r\n      href: history.backUrl(),\r\n      icon: 'fas fa-chevron-left',\r\n      title: previous.title,\r\n      config: () => {},\r\n      onclick: e => {\r\n        if (e.shiftKey || e.ctrlKey || e.metaKey || e.which === 2) return;\r\n        e.preventDefault();\r\n        history.back();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the pane pinned toggle button.\r\n   *\r\n   * @return {Object|String}\r\n   * @protected\r\n   */\r\n  getPaneButton() {\r\n    const {pane} = app;\r\n\r\n    if (!pane || !pane.active) return '';\r\n\r\n    return Button.component({\r\n      className: 'Button Button--icon Navigation-pin' + (pane.pinned ? ' active' : ''),\r\n      onclick: pane.togglePinned.bind(pane),\r\n      icon: 'fas fa-thumbtack'\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the drawer toggle button.\r\n   *\r\n   * @return {Object|String}\r\n   * @protected\r\n   */\r\n  getDrawerButton() {\r\n    if (!this.props.drawer) return '';\r\n\r\n    const {drawer} = app;\r\n    const user = app.session.user;\r\n\r\n    return Button.component({\r\n      className: 'Button Button--icon Navigation-drawer' +\r\n        (user && user.newNotificationCount() ? ' new' : ''),\r\n      onclick: e => {\r\n        e.stopPropagation();\r\n        drawer.show();\r\n      },\r\n      icon: 'fas fa-bars'\r\n    });\r\n  }\r\n}\r\n","import Component from '../Component';\r\nimport icon from '../helpers/icon';\r\n\r\n/**\r\n * The `Select` component displays a <select> input, surrounded with some extra\r\n * elements for styling. It accepts the following props:\r\n *\r\n * - `options` A map of option values to labels.\r\n * - `onchange` A callback to run when the selected value is changed.\r\n * - `value` The value of the selected option.\r\n * - `disabled` Disabled state for the input.\r\n */\r\nexport default class Select extends Component {\r\n  view() {\r\n    const {options, onchange, value, disabled} = this.props;\r\n\r\n    return (\r\n      <span className=\"Select\">\r\n        <select className=\"Select-input FormControl\" onchange={onchange ? m.withAttr('value', onchange.bind(this)) : undefined} value={value} disabled={disabled}>\r\n          {Object.keys(options).map(key => <option value={key}>{options[key]}</option>)}\r\n        </select>\r\n        {icon('fas fa-sort', {className: 'Select-caret'})}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n","import Component from '../Component';\r\n\r\nexport default function patchMithril(global) {\r\n  const mo = global.m;\r\n\r\n  const m = function(comp, ...args) {\r\n    if (comp.prototype && comp.prototype instanceof Component) {\r\n      let children = args.slice(1);\r\n      if (children.length === 1 && Array.isArray(children[0])) {\r\n        children = children[0]\r\n      }\r\n\r\n      return comp.component(args[0], children);\r\n    }\r\n\r\n    const node = mo.apply(this, arguments);\r\n\r\n    if (node.attrs.bidi) {\r\n      m.bidi(node, node.attrs.bidi);\r\n    }\r\n\r\n    if (node.attrs.route) {\r\n      node.attrs.href = node.attrs.route;\r\n      node.attrs.config = m.route;\r\n\r\n      delete node.attrs.route;\r\n    }\r\n\r\n    return node;\r\n  };\r\n\r\n  Object.keys(mo).forEach(key => m[key] = mo[key]);\r\n\r\n  /**\r\n   * Redraw only if not in the middle of a computation (e.g. a route change).\r\n   *\r\n   * @return {void}\r\n   */\r\n  m.lazyRedraw = function() {\r\n    m.startComputation();\r\n    m.endComputation();\r\n  };\r\n\r\n  global.m = m;\r\n}\r\n","import Component from '../Component';\r\n\r\n/**\r\n * The `Placeholder` component displays a muted text with some call to action,\r\n * usually used as an empty state.\r\n *\r\n * ### Props\r\n *\r\n * - `text`\r\n */\r\nexport default class Placeholder extends Component {\r\n  view() {\r\n    return (\r\n      <div className=\"Placeholder\">\r\n        <p>{this.props.text}</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Component from '../Component';\r\nimport Alert from './Alert';\r\n\r\n/**\r\n * The `AlertManager` component provides an area in which `Alert` components can\r\n * be shown and dismissed.\r\n */\r\nexport default class AlertManager extends Component {\r\n  init() {\r\n    /**\r\n     * An array of Alert components which are currently showing.\r\n     *\r\n     * @type {Alert[]}\r\n     * @protected\r\n     */\r\n    this.components = [];\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className=\"AlertManager\">\r\n        {this.components.map(component => <div className=\"AlertManager-alert\">{component}</div>)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  config(isInitialized, context) {\r\n    // Since this component is 'above' the content of the page (that is, it is a\r\n    // part of the global UI that persists between routes), we will flag the DOM\r\n    // to be retained across route changes.\r\n    context.retain = true;\r\n  }\r\n\r\n  /**\r\n   * Show an Alert in the alerts area.\r\n   *\r\n   * @param {Alert} component\r\n   * @public\r\n   */\r\n  show(component) {\r\n    if (!(component instanceof Alert)) {\r\n      throw new Error('The AlertManager component can only show Alert components');\r\n    }\r\n\r\n    component.props.ondismiss = this.dismiss.bind(this, component);\r\n\r\n    this.components.push(component);\r\n    m.redraw();\r\n  }\r\n\r\n  /**\r\n   * Dismiss an alert.\r\n   *\r\n   * @param {Alert} component\r\n   * @public\r\n   */\r\n  dismiss(component) {\r\n    const index = this.components.indexOf(component);\r\n\r\n    if (index !== -1) {\r\n      this.components.splice(index, 1);\r\n      m.redraw();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all alerts.\r\n   *\r\n   * @public\r\n   */\r\n  clear() {\r\n    this.components = [];\r\n    m.redraw();\r\n  }\r\n}\r\n","import Modal from './Modal';\r\n\r\nexport default class RequestErrorModal extends Modal {\r\n  className() {\r\n    return 'RequestErrorModal Modal--large';\r\n  }\r\n\r\n  title() {\r\n    return this.props.error.xhr\r\n      ? this.props.error.xhr.status+' '+this.props.error.xhr.statusText\r\n      : '';\r\n  }\r\n\r\n  content() {\r\n    let responseText;\r\n\r\n    try {\r\n      responseText = JSON.stringify(JSON.parse(this.props.error.responseText), null, 2);\r\n    } catch (e) {\r\n      responseText = this.props.error.responseText;\r\n    }\r\n\r\n    return <div className=\"Modal-body\">\r\n      <pre>\r\n        {this.props.error.options.method} {this.props.error.options.url}<br/><br/>\r\n        {responseText}\r\n      </pre>\r\n    </div>;\r\n  }\r\n}\r\n","import User from './models/User';\r\nimport username from './helpers/username';\r\nimport extract from './utils/extract';\r\n\r\n/**\r\n * Translator with the same API as Symfony's.\r\n *\r\n * Derived from https://github.com/willdurand/BazingaJsTranslationBundle\r\n * which is available under the MIT License.\r\n * Copyright (c) William Durand <william.durand1@gmail.com>\r\n */\r\nexport default class Translator {\r\n  constructor() {\r\n    /**\r\n     * A map of translation keys to their translated values.\r\n     *\r\n     * @type {Object}\r\n     * @public\r\n     */\r\n    this.translations = {};\r\n\r\n    this.locale = null;\r\n  }\r\n\r\n  addTranslations(translations) {\r\n    Object.assign(this.translations, translations);\r\n  }\r\n\r\n  trans(id, parameters) {\r\n    const translation = this.translations[id];\r\n\r\n    if (translation) {\r\n      return this.apply(translation, parameters || {});\r\n    }\r\n\r\n    return id;\r\n  }\r\n\r\n  transChoice(id, number, parameters) {\r\n    let translation = this.translations[id];\r\n\r\n    if (translation) {\r\n      number = parseInt(number, 10);\r\n\r\n      translation = this.pluralize(translation, number);\r\n\r\n      return this.apply(translation, parameters || {});\r\n    }\r\n\r\n    return id;\r\n  }\r\n\r\n  apply(translation, input) {\r\n    // If we've been given a user model as one of the input parameters, then\r\n    // we'll extract the username and use that for the translation. In the\r\n    // future there should be a hook here to inspect the user and change the\r\n    // translation key. This will allow a gender property to determine which\r\n    // translation key is used.\r\n    if ('user' in input) {\r\n      const user = extract(input, 'user');\r\n\r\n      if (!input.username) input.username = username(user);\r\n    }\r\n\r\n    translation = translation.split(new RegExp('({[a-z0-9_]+}|</?[a-z0-9_]+>)', 'gi'));\r\n\r\n    const hydrated = [];\r\n    const open = [hydrated];\r\n\r\n    translation.forEach(part => {\r\n      const match = part.match(new RegExp('{([a-z0-9_]+)}|<(/?)([a-z0-9_]+)>', 'i'));\r\n\r\n      if (match) {\r\n        if (match[1]) {\r\n          open[0].push(input[match[1]]);\r\n        } else if (match[3]) {\r\n          if (match[2]) {\r\n            open.shift();\r\n          } else {\r\n            let tag = input[match[3]] || {tag: match[3], children: []};\r\n            open[0].push(tag);\r\n            open.unshift(tag.children || tag);\r\n          }\r\n        }\r\n      } else {\r\n        open[0].push(part);\r\n      }\r\n    });\r\n\r\n    return hydrated.filter(part => part);\r\n  }\r\n\r\n  pluralize(translation, number) {\r\n    const sPluralRegex = new RegExp(/^\\w+\\: +(.+)$/),\r\n      cPluralRegex = new RegExp(/^\\s*((\\{\\s*(\\-?\\d+[\\s*,\\s*\\-?\\d+]*)\\s*\\})|([\\[\\]])\\s*(-Inf|\\-?\\d+)\\s*,\\s*(\\+?Inf|\\-?\\d+)\\s*([\\[\\]]))\\s?(.+?)$/),\r\n      iPluralRegex = new RegExp(/^\\s*(\\{\\s*(\\-?\\d+[\\s*,\\s*\\-?\\d+]*)\\s*\\})|([\\[\\]])\\s*(-Inf|\\-?\\d+)\\s*,\\s*(\\+?Inf|\\-?\\d+)\\s*([\\[\\]])/),\r\n      standardRules = [],\r\n      explicitRules = [];\r\n\r\n    translation.split('|').forEach(part => {\r\n      if (cPluralRegex.test(part)) {\r\n        const matches = part.match(cPluralRegex);\r\n        explicitRules[matches[0]] = matches[matches.length - 1];\r\n      } else if (sPluralRegex.test(part)) {\r\n        const matches = part.match(sPluralRegex);\r\n        standardRules.push(matches[1]);\r\n      } else {\r\n        standardRules.push(part);\r\n      }\r\n    });\r\n\r\n    explicitRules.forEach((rule, e) => {\r\n      if (iPluralRegex.test(e)) {\r\n        const matches = e.match(iPluralRegex);\r\n\r\n        if (matches[1]) {\r\n          const ns = matches[2].split(',');\r\n\r\n          for (let n in ns) {\r\n            if (number == ns[n]) {\r\n              return explicitRules[e];\r\n            }\r\n          }\r\n        } else {\r\n          var leftNumber  = this.convertNumber(matches[4]);\r\n          var rightNumber = this.convertNumber(matches[5]);\r\n\r\n          if (('[' === matches[3] ? number >= leftNumber : number > leftNumber) &&\r\n            (']' === matches[6] ? number <= rightNumber : number < rightNumber)) {\r\n            return explicitRules[e];\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    return standardRules[this.pluralPosition(number, this.locale)] || standardRules[0] || undefined;\r\n  }\r\n\r\n  convertNumber(number) {\r\n    if ('-Inf' === number) {\r\n      return Number.NEGATIVE_INFINITY;\r\n    } else if ('+Inf' === number || 'Inf' === number) {\r\n      return Number.POSITIVE_INFINITY;\r\n    }\r\n\r\n    return parseInt(number, 10);\r\n  }\r\n\r\n  pluralPosition(number, locale) {\r\n    if ('pt_BR' === locale) {\r\n      locale = 'xbr';\r\n    }\r\n\r\n    if (locale.length > 3) {\r\n      locale = locale.split('_')[0];\r\n    }\r\n\r\n    switch (locale) {\r\n      case 'bo':\r\n      case 'dz':\r\n      case 'id':\r\n      case 'ja':\r\n      case 'jv':\r\n      case 'ka':\r\n      case 'km':\r\n      case 'kn':\r\n      case 'ko':\r\n      case 'ms':\r\n      case 'th':\r\n      case 'vi':\r\n      case 'zh':\r\n        return 0;\r\n\r\n      case 'af':\r\n      case 'az':\r\n      case 'bn':\r\n      case 'bg':\r\n      case 'ca':\r\n      case 'da':\r\n      case 'de':\r\n      case 'el':\r\n      case 'en':\r\n      case 'eo':\r\n      case 'es':\r\n      case 'et':\r\n      case 'eu':\r\n      case 'fa':\r\n      case 'fi':\r\n      case 'fo':\r\n      case 'fur':\r\n      case 'fy':\r\n      case 'gl':\r\n      case 'gu':\r\n      case 'ha':\r\n      case 'he':\r\n      case 'hu':\r\n      case 'is':\r\n      case 'it':\r\n      case 'ku':\r\n      case 'lb':\r\n      case 'ml':\r\n      case 'mn':\r\n      case 'mr':\r\n      case 'nah':\r\n      case 'nb':\r\n      case 'ne':\r\n      case 'nl':\r\n      case 'nn':\r\n      case 'no':\r\n      case 'om':\r\n      case 'or':\r\n      case 'pa':\r\n      case 'pap':\r\n      case 'ps':\r\n      case 'pt':\r\n      case 'so':\r\n      case 'sq':\r\n      case 'sv':\r\n      case 'sw':\r\n      case 'ta':\r\n      case 'te':\r\n      case 'tk':\r\n      case 'tr':\r\n      case 'ur':\r\n      case 'zu':\r\n        return (number == 1) ? 0 : 1;\r\n\r\n      case 'am':\r\n      case 'bh':\r\n      case 'fil':\r\n      case 'fr':\r\n      case 'gun':\r\n      case 'hi':\r\n      case 'ln':\r\n      case 'mg':\r\n      case 'nso':\r\n      case 'xbr':\r\n      case 'ti':\r\n      case 'wa':\r\n        return ((number === 0) || (number == 1)) ? 0 : 1;\r\n\r\n      case 'be':\r\n      case 'bs':\r\n      case 'hr':\r\n      case 'ru':\r\n      case 'sr':\r\n      case 'uk':\r\n        return ((number % 10 == 1) && (number % 100 != 11)) ? 0 : (((number % 10 >= 2) && (number % 10 <= 4) && ((number % 100 < 10) || (number % 100 >= 20))) ? 1 : 2);\r\n\r\n      case 'cs':\r\n      case 'sk':\r\n        return (number == 1) ? 0 : (((number >= 2) && (number <= 4)) ? 1 : 2);\r\n\r\n      case 'ga':\r\n        return (number == 1) ? 0 : ((number == 2) ? 1 : 2);\r\n\r\n      case 'lt':\r\n        return ((number % 10 == 1) && (number % 100 != 11)) ? 0 : (((number % 10 >= 2) && ((number % 100 < 10) || (number % 100 >= 20))) ? 1 : 2);\r\n\r\n      case 'sl':\r\n        return (number % 100 == 1) ? 0 : ((number % 100 == 2) ? 1 : (((number % 100 == 3) || (number % 100 == 4)) ? 2 : 3));\r\n\r\n      case 'mk':\r\n        return (number % 10 == 1) ? 0 : 1;\r\n\r\n      case 'mt':\r\n        return (number == 1) ? 0 : (((number === 0) || ((number % 100 > 1) && (number % 100 < 11))) ? 1 : (((number % 100 > 10) && (number % 100 < 20)) ? 2 : 3));\r\n\r\n      case 'lv':\r\n        return (number === 0) ? 0 : (((number % 10 == 1) && (number % 100 != 11)) ? 1 : 2);\r\n\r\n      case 'pl':\r\n        return (number == 1) ? 0 : (((number % 10 >= 2) && (number % 10 <= 4) && ((number % 100 < 12) || (number % 100 > 14))) ? 1 : 2);\r\n\r\n      case 'cy':\r\n        return (number == 1) ? 0 : ((number == 2) ? 1 : (((number == 8) || (number == 11)) ? 2 : 3));\r\n\r\n      case 'ro':\r\n        return (number == 1) ? 0 : (((number === 0) || ((number % 100 > 0) && (number % 100 < 20))) ? 1 : 2);\r\n\r\n      case 'ar':\r\n        return (number === 0) ? 0 : ((number == 1) ? 1 : ((number == 2) ? 2 : (((number >= 3) && (number <= 10)) ? 3 : (((number >= 11) && (number <= 99)) ? 4 : 5))));\r\n\r\n      default:\r\n        return 0;\r\n    }\r\n  }\r\n}\r\n","function hsvToRgb(h, s, v) {\r\n  let r;\r\n  let g;\r\n  let b;\r\n\r\n  const i = Math.floor(h * 6);\r\n  const f = h * 6 - i;\r\n  const p = v * (1 - s);\r\n  const q = v * (1 - f * s);\r\n  const t = v * (1 - (1 - f) * s);\r\n\r\n  switch (i % 6) {\r\n    case 0: r = v; g = t; b = p; break;\r\n    case 1: r = q; g = v; b = p; break;\r\n    case 2: r = p; g = v; b = t; break;\r\n    case 3: r = p; g = q; b = v; break;\r\n    case 4: r = t; g = p; b = v; break;\r\n    case 5: r = v; g = p; b = q; break;\r\n  }\r\n\r\n  return {\r\n    r: Math.floor(r * 255),\r\n    g: Math.floor(g * 255),\r\n    b: Math.floor(b * 255)\r\n  };\r\n}\r\n\r\n/**\r\n * Convert the given string to a unique color.\r\n *\r\n * @param {String} string\r\n * @return {String}\r\n */\r\nexport default function stringToColor(string) {\r\n  let num = 0;\r\n\r\n  // Convert the username into a number based on the ASCII value of each\r\n  // character.\r\n  for (let i = 0; i < string.length; i++) {\r\n    num += string.charCodeAt(i);\r\n  }\r\n\r\n  // Construct a color using the remainder of that number divided by 360, and\r\n  // some predefined saturation and value values.\r\n  const hue = num % 360;\r\n  const rgb = hsvToRgb(hue / 360, 0.3, 0.9);\r\n\r\n  return '' + rgb.r.toString(16) + rgb.g.toString(16) + rgb.b.toString(16);\r\n}\r\n","/**\r\n * The `Store` class defines a local data store, and provides methods to\r\n * retrieve data from the API.\r\n */\r\nexport default class Store {\r\n  constructor(models) {\r\n    /**\r\n     * The local data store. A tree of resource types to IDs, such that\r\n     * accessing data[type][id] will return the model for that type/ID.\r\n     *\r\n     * @type {Object}\r\n     * @protected\r\n     */\r\n    this.data = {};\r\n\r\n    /**\r\n     * The model registry. A map of resource types to the model class that\r\n     * should be used to represent resources of that type.\r\n     *\r\n     * @type {Object}\r\n     * @public\r\n     */\r\n    this.models = models;\r\n  }\r\n\r\n  /**\r\n   * Push resources contained within an API payload into the store.\r\n   *\r\n   * @param {Object} payload\r\n   * @return {Model|Model[]} The model(s) representing the resource(s) contained\r\n   *     within the 'data' key of the payload.\r\n   * @public\r\n   */\r\n  pushPayload(payload) {\r\n    if (payload.included) payload.included.map(this.pushObject.bind(this));\r\n\r\n    const result = payload.data instanceof Array\r\n      ? payload.data.map(this.pushObject.bind(this))\r\n      : this.pushObject(payload.data);\r\n\r\n    // Attach the original payload to the model that we give back. This is\r\n    // useful to consumers as it allows them to access meta information\r\n    // associated with their request.\r\n    result.payload = payload;\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Create a model to represent a resource object (or update an existing one),\r\n   * and push it into the store.\r\n   *\r\n   * @param {Object} data The resource object\r\n   * @return {Model|null} The model, or null if no model class has been\r\n   *     registered for this resource type.\r\n   * @public\r\n   */\r\n  pushObject(data) {\r\n    if (!this.models[data.type]) return null;\r\n\r\n    const type = this.data[data.type] = this.data[data.type] || {};\r\n\r\n    if (type[data.id]) {\r\n      type[data.id].pushData(data);\r\n    } else {\r\n      type[data.id] = this.createRecord(data.type, data);\r\n    }\r\n\r\n    type[data.id].exists = true;\r\n\r\n    return type[data.id];\r\n  }\r\n\r\n  /**\r\n   * Make a request to the API to find record(s) of a specific type.\r\n   *\r\n   * @param {String} type The resource type.\r\n   * @param {Integer|Integer[]|Object} [id] The ID(s) of the model(s) to retrieve.\r\n   *     Alternatively, if an object is passed, it will be handled as the\r\n   *     `query` parameter.\r\n   * @param {Object} [query]\r\n   * @param {Object} [options]\r\n   * @return {Promise}\r\n   * @public\r\n   */\r\n  find(type, id, query = {}, options = {}) {\r\n    let data = query;\r\n    let url = app.forum.attribute('apiUrl') + '/' + type;\r\n\r\n    if (id instanceof Array) {\r\n      url += '?filter[id]=' + id.join(',');\r\n    } else if (typeof id === 'object') {\r\n      data = id;\r\n    } else if (id) {\r\n      url += '/' + id;\r\n    }\r\n\r\n    return app.request(Object.assign({\r\n      method: 'GET',\r\n      url,\r\n      data\r\n    }, options)).then(this.pushPayload.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Get a record from the store by ID.\r\n   *\r\n   * @param {String} type The resource type.\r\n   * @param {Integer} id The resource ID.\r\n   * @return {Model}\r\n   * @public\r\n   */\r\n  getById(type, id) {\r\n    return this.data[type] && this.data[type][id];\r\n  }\r\n\r\n  /**\r\n   * Get a record from the store by the value of a model attribute.\r\n   *\r\n   * @param {String} type The resource type.\r\n   * @param {String} key The name of the method on the model.\r\n   * @param {*} value The value of the model attribute.\r\n   * @return {Model}\r\n   * @public\r\n   */\r\n  getBy(type, key, value) {\r\n    return this.all(type).filter(model => model[key]() === value)[0];\r\n  }\r\n\r\n  /**\r\n   * Get all loaded records of a specific type.\r\n   *\r\n   * @param {String} type\r\n   * @return {Model[]}\r\n   * @public\r\n   */\r\n  all(type) {\r\n    const records = this.data[type];\r\n\r\n    return records ? Object.keys(records).map(id => records[id]) : [];\r\n  }\r\n\r\n  /**\r\n   * Remove the given model from the store.\r\n   *\r\n   * @param {Model} model\r\n   */\r\n  remove(model) {\r\n    delete this.data[model.data.type][model.id()];\r\n  }\r\n\r\n  /**\r\n   * Create a new record of the given type.\r\n   *\r\n   * @param {String} type The resource type\r\n   * @param {Object} [data] Any data to initialize the model with\r\n   * @return {Model}\r\n   * @public\r\n   */\r\n  createRecord(type, data = {}) {\r\n    data.type = data.type || type;\r\n\r\n    return new (this.models[type])(data, this);\r\n  }\r\n}\r\n","/**\r\n * The `Session` class defines the current user session. It stores a reference\r\n * to the current authenticated user, and provides methods to log in/out.\r\n */\r\nexport default class Session {\r\n  constructor(user, csrfToken) {\r\n    /**\r\n     * The current authenticated user.\r\n     *\r\n     * @type {User|null}\r\n     * @public\r\n     */\r\n    this.user = user;\r\n\r\n    /**\r\n     * The CSRF token.\r\n     *\r\n     * @type {String|null}\r\n     * @public\r\n     */\r\n    this.csrfToken = csrfToken;\r\n  }\r\n\r\n  /**\r\n   * Attempt to log in a user.\r\n   *\r\n   * @param {String} identification The username/email.\r\n   * @param {String} password\r\n   * @param {Object} [options]\r\n   * @return {Promise}\r\n   * @public\r\n   */\r\n  login(data, options = {}) {\r\n    return app.request(Object.assign({\r\n      method: 'POST',\r\n      url: app.forum.attribute('baseUrl') + '/login',\r\n      data\r\n    }, options));\r\n  }\r\n\r\n  /**\r\n   * Log the user out.\r\n   *\r\n   * @public\r\n   */\r\n  logout() {\r\n    window.location = app.forum.attribute('baseUrl') + '/logout?token=' + this.csrfToken;\r\n  }\r\n}\r\n","/**\r\n * The `Drawer` class controls the page's drawer. The drawer is the area the\r\n * slides out from the left on mobile devices; it contains the header and the\r\n * footer.\r\n */\r\nexport default class Drawer {\r\n  constructor() {\r\n    // Set up an event handler so that whenever the content area is tapped,\r\n    // the drawer will close.\r\n    $('#content').click(e => {\r\n      if (this.isOpen()) {\r\n        e.preventDefault();\r\n        this.hide();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Check whether or not the drawer is currently open.\r\n   *\r\n   * @return {Boolean}\r\n   * @public\r\n   */\r\n  isOpen() {\r\n    return $('#app').hasClass('drawerOpen');\r\n  }\r\n\r\n  /**\r\n   * Hide the drawer.\r\n   *\r\n   * @public\r\n   */\r\n  hide() {\r\n    $('#app').removeClass('drawerOpen');\r\n\r\n    if (this.$backdrop) this.$backdrop.remove();\r\n  }\r\n\r\n  /**\r\n   * Show the drawer.\r\n   *\r\n   * @public\r\n   */\r\n  show() {\r\n    $('#app').addClass('drawerOpen');\r\n\r\n    this.$backdrop = $('<div/>')\r\n      .addClass('drawer-backdrop fade')\r\n      .appendTo('body')\r\n      .click(() => this.hide());\r\n\r\n    setTimeout(() => this.$backdrop.addClass('in'));\r\n  }\r\n}\r\n","/**\r\n * The `mapRoutes` utility converts a map of named application routes into a\r\n * format that can be understood by Mithril.\r\n *\r\n * @see https://lhorie.github.io/mithril/mithril.route.html#defining-routes\r\n * @param {Object} routes\r\n * @param {String} [basePath]\r\n * @return {Object}\r\n */\r\nexport default function mapRoutes(routes, basePath = '') {\r\n  const map = {};\r\n\r\n  for (const key in routes) {\r\n    const route = routes[key];\r\n\r\n    if (route.component) route.component.props.routeName = key;\r\n\r\n    map[basePath + route.path] = route.component;\r\n  }\r\n\r\n  return map;\r\n}\r\n","import Model from '../Model';\r\n\r\nexport default class Forum extends Model {\r\n  apiEndpoint() {\r\n    return '/';\r\n  }\r\n}\r\n","import Model from '../Model';\r\nimport computed from '../utils/computed';\r\nimport { getPlainContent } from '../utils/string';\r\n\r\nexport default class Post extends Model {}\r\n\r\nObject.assign(Post.prototype, {\r\n  number: Model.attribute('number'),\r\n  discussion: Model.hasOne('discussion'),\r\n\r\n  createdAt: Model.attribute('createdAt', Model.transformDate),\r\n  user: Model.hasOne('user'),\r\n  contentType: Model.attribute('contentType'),\r\n  content: Model.attribute('content'),\r\n  contentHtml: Model.attribute('contentHtml'),\r\n  contentPlain: computed('contentHtml', getPlainContent),\r\n\r\n  editedAt: Model.attribute('editedAt', Model.transformDate),\r\n  editedUser: Model.hasOne('editedUser'),\r\n  isEdited: computed('editedAt', editedAt => !!editedAt),\r\n\r\n  hiddenAt: Model.attribute('hiddenAt', Model.transformDate),\r\n  hiddenUser: Model.hasOne('hiddenUser'),\r\n  isHidden: computed('hiddenAt', hiddenAt => !!hiddenAt),\r\n\r\n  canEdit: Model.attribute('canEdit'),\r\n  canHide: Model.attribute('canHide'),\r\n  canDelete: Model.attribute('canDelete')\r\n});\r\n","import Model from '../Model';\r\n\r\nexport default class Notification extends Model {}\r\n\r\nObject.assign(Notification.prototype, {\r\n  contentType: Model.attribute('contentType'),\r\n  content: Model.attribute('content'),\r\n  createdAt: Model.attribute('createdAt', Model.transformDate),\r\n\r\n  isRead: Model.attribute('isRead'),\r\n\r\n  user: Model.hasOne('user'),\r\n  fromUser: Model.hasOne('fromUser'),\r\n  subject: Model.hasOne('subject')\r\n});\r\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import Symbol from './_Symbol.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nexport default isFlattenable;\n","import arrayPush from './_arrayPush.js';\nimport isFlattenable from './_isFlattenable.js';\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nexport default baseFlatten;\n","import baseFlatten from './_baseFlatten.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Recursively flattens `array`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flattenDeep([1, [2, [3, [4]], 5]]);\n * // => [1, 2, 3, 4, 5]\n */\nfunction flattenDeep(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, INFINITY) : [];\n}\n\nexport default flattenDeep;\n","import ItemList from './utils/ItemList';\r\nimport Alert from './components/Alert';\r\nimport Button from './components/Button';\r\nimport ModalManager from './components/ModalManager';\r\nimport AlertManager from './components/AlertManager';\r\nimport RequestErrorModal from './components/RequestErrorModal';\r\nimport Translator from './Translator';\r\nimport Store from './Store';\r\nimport Session from './Session';\r\nimport extract from './utils/extract';\r\nimport Drawer from './utils/Drawer';\r\nimport mapRoutes from './utils/mapRoutes';\r\nimport RequestError from './utils/RequestError';\r\nimport ScrollListener from './utils/ScrollListener';\r\nimport { extend } from './extend';\r\n\r\nimport Forum from './models/Forum';\r\nimport User from './models/User';\r\nimport Discussion from './models/Discussion';\r\nimport Post from './models/Post';\r\nimport Group from './models/Group';\r\nimport Notification from './models/Notification';\r\nimport { flattenDeep } from 'lodash-es';\r\n\r\n/**\r\n * The `App` class provides a container for an application, as well as various\r\n * utilities for the rest of the app to use.\r\n */\r\nexport default class Application {\r\n  /**\r\n   * The forum model for this application.\r\n   *\r\n   * @type {Forum}\r\n   * @public\r\n   */\r\n  forum = null;\r\n\r\n  /**\r\n   * A map of routes, keyed by a unique route name. Each route is an object\r\n   * containing the following properties:\r\n   *\r\n   * - `path` The path that the route is accessed at.\r\n   * - `component` The Mithril component to render when this route is active.\r\n   *\r\n   * @example\r\n   * app.routes.discussion = {path: '/d/:id', component: DiscussionPage.component()};\r\n   *\r\n   * @type {Object}\r\n   * @public\r\n   */\r\n  routes = {};\r\n\r\n  /**\r\n   * An ordered list of initializers to bootstrap the application.\r\n   *\r\n   * @type {ItemList}\r\n   * @public\r\n   */\r\n  initializers = new ItemList();\r\n\r\n  /**\r\n   * The app's session.\r\n   *\r\n   * @type {Session}\r\n   * @public\r\n   */\r\n  session = null;\r\n\r\n  /**\r\n   * The app's translator.\r\n   *\r\n   * @type {Translator}\r\n   * @public\r\n   */\r\n  translator = new Translator();\r\n\r\n  /**\r\n   * The app's data store.\r\n   *\r\n   * @type {Store}\r\n   * @public\r\n   */\r\n  store = new Store({\r\n    forums: Forum,\r\n    users: User,\r\n    discussions: Discussion,\r\n    posts: Post,\r\n    groups: Group,\r\n    notifications: Notification\r\n  });\r\n\r\n  /**\r\n   * A local cache that can be used to store data at the application level, so\r\n   * that is persists between different routes.\r\n   *\r\n   * @type {Object}\r\n   * @public\r\n   */\r\n  cache = {};\r\n\r\n  /**\r\n   * Whether or not the app has been booted.\r\n   *\r\n   * @type {Boolean}\r\n   * @public\r\n   */\r\n  booted = false;\r\n\r\n  /**\r\n   * An Alert that was shown as a result of an AJAX request error. If present,\r\n   * it will be dismissed on the next successful request.\r\n   *\r\n   * @type {null|Alert}\r\n   * @private\r\n   */\r\n  requestError = null;\r\n\r\n  data;\r\n\r\n  title = '';\r\n  titleCount = 0;\r\n\r\n  load(payload) {\r\n    this.data = payload;\r\n    this.translator.locale = payload.locale;\r\n  }\r\n\r\n  boot() {\r\n    this.initializers.toArray().forEach(initializer => initializer(this));\r\n\r\n    this.store.pushPayload({data: this.data.resources});\r\n\r\n    this.forum = this.store.getById('forums', 1);\r\n\r\n    this.session = new Session(\r\n        this.store.getById('users', this.data.session.userId),\r\n        this.data.session.csrfToken\r\n    );\r\n\r\n    this.mount();\r\n  }\r\n\r\n  bootExtensions(extensions) {\r\n    Object.keys(extensions).forEach(name => {\r\n      const extension = extensions[name];\r\n\r\n      const extenders = flattenDeep(extension.extend);\r\n\r\n      for (const extender of extenders) {\r\n        extender.extend(this, { name, exports: extension });\r\n      }\r\n    });\r\n  }\r\n\r\n  mount(basePath = '') {\r\n    this.modal = m.mount(document.getElementById('modal'), <ModalManager/>);\r\n    this.alerts = m.mount(document.getElementById('alerts'), <AlertManager/>);\r\n\r\n    this.drawer = new Drawer();\r\n\r\n    m.route(\r\n      document.getElementById('content'),\r\n      basePath + '/',\r\n      mapRoutes(this.routes, basePath)\r\n    );\r\n\r\n    // Add a class to the body which indicates that the page has been scrolled\r\n    // down.\r\n    new ScrollListener(top => {\r\n      const $app = $('#app');\r\n      const offset = $app.offset().top;\r\n\r\n      $app\r\n        .toggleClass('affix', top >= offset)\r\n        .toggleClass('scrolled', top > offset);\r\n    }).start();\r\n\r\n    $(() => {\r\n      $('body').addClass('ontouchstart' in window ? 'touch' : 'no-touch');\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the API response document that has been preloaded into the application.\r\n   *\r\n   * @return {Object|null}\r\n   * @public\r\n   */\r\n  preloadedApiDocument() {\r\n    if (this.data.apiDocument) {\r\n      const results = this.store.pushPayload(this.data.apiDocument);\r\n\r\n      this.data.apiDocument = null;\r\n\r\n      return results;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Set the <title> of the page.\r\n   *\r\n   * @param {String} title\r\n   * @public\r\n   */\r\n  setTitle(title) {\r\n    this.title = title;\r\n    this.updateTitle();\r\n  }\r\n\r\n  /**\r\n   * Set a number to display in the <title> of the page.\r\n   *\r\n   * @param {Integer} count\r\n   */\r\n  setTitleCount(count) {\r\n    this.titleCount = count;\r\n    this.updateTitle();\r\n  }\r\n\r\n  updateTitle() {\r\n    document.title = (this.titleCount ? `(${this.titleCount}) ` : '') +\r\n      (this.title ? this.title + ' - ' : '') +\r\n      this.forum.attribute('title');\r\n  }\r\n\r\n  /**\r\n   * Make an AJAX request, handling any low-level errors that may occur.\r\n   *\r\n   * @see https://lhorie.github.io/mithril/mithril.request.html\r\n   * @param {Object} options\r\n   * @return {Promise}\r\n   * @public\r\n   */\r\n  request(originalOptions) {\r\n    const options = Object.assign({}, originalOptions);\r\n\r\n    // Set some default options if they haven't been overridden. We want to\r\n    // authenticate all requests with the session token. We also want all\r\n    // requests to run asynchronously in the background, so that they don't\r\n    // prevent redraws from occurring.\r\n    options.background = options.background || true;\r\n\r\n    extend(options, 'config', (result, xhr) => xhr.setRequestHeader('X-CSRF-Token', this.session.csrfToken));\r\n\r\n    // If the method is something like PATCH or DELETE, which not all servers\r\n    // and clients support, then we'll send it as a POST request with the\r\n    // intended method specified in the X-HTTP-Method-Override header.\r\n    if (options.method !== 'GET' && options.method !== 'POST') {\r\n      const method = options.method;\r\n      extend(options, 'config', (result, xhr) => xhr.setRequestHeader('X-HTTP-Method-Override', method));\r\n      options.method = 'POST';\r\n    }\r\n\r\n    // When we deserialize JSON data, if for some reason the server has provided\r\n    // a dud response, we don't want the application to crash. We'll show an\r\n    // error message to the user instead.\r\n    options.deserialize = options.deserialize || (responseText => responseText);\r\n\r\n    options.errorHandler = options.errorHandler || (error => {\r\n      throw error;\r\n    });\r\n\r\n    // When extracting the data from the response, we can check the server\r\n    // response code and show an error message to the user if something's gone\r\n    // awry.\r\n    const original = options.extract;\r\n    options.extract = xhr => {\r\n      let responseText;\r\n\r\n      if (original) {\r\n        responseText = original(xhr.responseText);\r\n      } else {\r\n        responseText = xhr.responseText || null;\r\n      }\r\n\r\n      const status = xhr.status;\r\n\r\n      if (status < 200 || status > 299) {\r\n        throw new RequestError(status, responseText, options, xhr);\r\n      }\r\n\r\n      if (xhr.getResponseHeader) {\r\n        const csrfToken = xhr.getResponseHeader('X-CSRF-Token');\r\n        if (csrfToken) app.session.csrfToken = csrfToken;\r\n      }\r\n\r\n      try {\r\n        return JSON.parse(responseText);\r\n      } catch (e) {\r\n        throw new RequestError(500, responseText, options, xhr);\r\n      }\r\n    };\r\n\r\n    if (this.requestError) this.alerts.dismiss(this.requestError.alert);\r\n\r\n    // Now make the request. If it's a failure, inspect the error that was\r\n    // returned and show an alert containing its contents.\r\n    const deferred = m.deferred();\r\n\r\n    m.request(options).then(response => deferred.resolve(response), error => {\r\n      this.requestError = error;\r\n\r\n      let children;\r\n\r\n      switch (error.status) {\r\n        case 422:\r\n          children = error.response.errors\r\n            .map(error => [error.detail, <br/>])\r\n            .reduce((a, b) => a.concat(b), [])\r\n            .slice(0, -1);\r\n          break;\r\n\r\n        case 401:\r\n        case 403:\r\n          children = app.translator.trans('core.lib.error.permission_denied_message');\r\n          break;\r\n\r\n        case 404:\r\n        case 410:\r\n          children = app.translator.trans('core.lib.error.not_found_message');\r\n          break;\r\n\r\n        case 429:\r\n          children = app.translator.trans('core.lib.error.rate_limit_exceeded_message');\r\n          break;\r\n\r\n        default:\r\n          children = app.translator.trans('core.lib.error.generic_message');\r\n      }\r\n\r\n      const isDebug = app.forum.attribute('debug');\r\n\r\n      error.alert = new Alert({\r\n        type: 'error',\r\n        children,\r\n        controls: isDebug && [\r\n          <Button className=\"Button Button--link\" onclick={this.showDebug.bind(this, error)}>Debug</Button>\r\n        ]\r\n      });\r\n\r\n      try {\r\n        options.errorHandler(error);\r\n      } catch (error) {\r\n        this.alerts.show(error.alert);\r\n      }\r\n\r\n      deferred.reject(error);\r\n    });\r\n\r\n    return deferred.promise;\r\n  }\r\n\r\n  /**\r\n   * @param {RequestError} error\r\n   * @private\r\n   */\r\n  showDebug(error) {\r\n    this.alerts.dismiss(this.requestError.alert);\r\n\r\n    this.modal.show(new RequestErrorModal({error}));\r\n  }\r\n\r\n  /**\r\n   * Construct a URL to the route with the given name.\r\n   *\r\n   * @param {String} name\r\n   * @param {Object} params\r\n   * @return {String}\r\n   * @public\r\n   */\r\n  route(name, params = {}) {\r\n    const url = this.routes[name].path.replace(/:([^\\/]+)/g, (m, key) => extract(params, key));\r\n    const queryString = m.route.buildQueryString(params);\r\n    const prefix = m.route.mode === 'pathname' ? app.forum.attribute('basePath') : '';\r\n\r\n    return prefix + url + (queryString ? '?' + queryString : '');\r\n  }\r\n}\r\n","const MicroModal = (() => {\n\n  const FOCUSABLE_ELEMENTS = ['a[href]', 'area[href]', 'input:not([disabled]):not([type=\"hidden\"]):not([aria-hidden])', 'select:not([disabled]):not([aria-hidden])', 'textarea:not([disabled]):not([aria-hidden])', 'button:not([disabled]):not([aria-hidden])', 'iframe', 'object', 'embed', '[contenteditable]', '[tabindex]:not([tabindex^=\"-\"])'];\n\n  class Modal {\n    constructor({\n      targetModal,\n      triggers = [],\n      onShow = () => {},\n      onClose = () => {},\n      openTrigger = 'data-micromodal-trigger',\n      closeTrigger = 'data-micromodal-close',\n      disableScroll = false,\n      disableFocus = false,\n      awaitCloseAnimation = false,\n      awaitOpenAnimation = false,\n      debugMode = false\n    }) {\n      // Save a reference of the modal\n      this.modal = document.getElementById(targetModal); // Save a reference to the passed config\n\n      this.config = {\n        debugMode,\n        disableScroll,\n        openTrigger,\n        closeTrigger,\n        onShow,\n        onClose,\n        awaitCloseAnimation,\n        awaitOpenAnimation,\n        disableFocus // Register click events only if pre binding eventListeners\n\n      };\n      if (triggers.length > 0) this.registerTriggers(...triggers); // pre bind functions for event listeners\n\n      this.onClick = this.onClick.bind(this);\n      this.onKeydown = this.onKeydown.bind(this);\n    }\n    /**\n     * Loops through all openTriggers and binds click event\n     * @param  {array} triggers [Array of node elements]\n     * @return {void}\n     */\n\n\n    registerTriggers(...triggers) {\n      triggers.filter(Boolean).forEach(trigger => {\n        trigger.addEventListener('click', event => this.showModal(event));\n      });\n    }\n\n    showModal() {\n      this.activeElement = document.activeElement;\n      this.modal.setAttribute('aria-hidden', 'false');\n      this.modal.classList.add('is-open');\n      this.scrollBehaviour('disable');\n      this.addEventListeners();\n\n      if (this.config.awaitOpenAnimation) {\n        const handler = () => {\n          this.modal.removeEventListener('animationend', handler, false);\n          this.setFocusToFirstNode();\n        };\n\n        this.modal.addEventListener('animationend', handler, false);\n      } else {\n        this.setFocusToFirstNode();\n      }\n\n      this.config.onShow(this.modal, this.activeElement);\n    }\n\n    closeModal() {\n      const modal = this.modal;\n      this.modal.setAttribute('aria-hidden', 'true');\n      this.removeEventListeners();\n      this.scrollBehaviour('enable');\n\n      if (this.activeElement) {\n        this.activeElement.focus();\n      }\n\n      this.config.onClose(this.modal);\n\n      if (this.config.awaitCloseAnimation) {\n        this.modal.addEventListener('animationend', function handler() {\n          modal.classList.remove('is-open');\n          modal.removeEventListener('animationend', handler, false);\n        }, false);\n      } else {\n        modal.classList.remove('is-open');\n      }\n    }\n\n    closeModalById(targetModal) {\n      this.modal = document.getElementById(targetModal);\n      if (this.modal) this.closeModal();\n    }\n\n    scrollBehaviour(toggle) {\n      if (!this.config.disableScroll) return;\n      const body = document.querySelector('body');\n\n      switch (toggle) {\n        case 'enable':\n          Object.assign(body.style, {\n            overflow: '',\n            height: ''\n          });\n          break;\n\n        case 'disable':\n          Object.assign(body.style, {\n            overflow: 'hidden',\n            height: '100vh'\n          });\n          break;\n\n        default:\n      }\n    }\n\n    addEventListeners() {\n      this.modal.addEventListener('touchstart', this.onClick);\n      this.modal.addEventListener('click', this.onClick);\n      document.addEventListener('keydown', this.onKeydown);\n    }\n\n    removeEventListeners() {\n      this.modal.removeEventListener('touchstart', this.onClick);\n      this.modal.removeEventListener('click', this.onClick);\n      document.removeEventListener('keydown', this.onKeydown);\n    }\n\n    onClick(event) {\n      if (event.target.hasAttribute(this.config.closeTrigger)) {\n        this.closeModal();\n        event.preventDefault();\n      }\n    }\n\n    onKeydown(event) {\n      if (event.keyCode === 27) this.closeModal(event);\n      if (event.keyCode === 9) this.maintainFocus(event);\n    }\n\n    getFocusableNodes() {\n      const nodes = this.modal.querySelectorAll(FOCUSABLE_ELEMENTS);\n      return Array(...nodes);\n    }\n\n    setFocusToFirstNode() {\n      if (this.config.disableFocus) return;\n      const focusableNodes = this.getFocusableNodes();\n      if (focusableNodes.length) focusableNodes[0].focus();\n    }\n\n    maintainFocus(event) {\n      const focusableNodes = this.getFocusableNodes(); // if disableFocus is true\n\n      if (!this.modal.contains(document.activeElement)) {\n        focusableNodes[0].focus();\n      } else {\n        const focusedItemIndex = focusableNodes.indexOf(document.activeElement);\n\n        if (event.shiftKey && focusedItemIndex === 0) {\n          focusableNodes[focusableNodes.length - 1].focus();\n          event.preventDefault();\n        }\n\n        if (!event.shiftKey && focusedItemIndex === focusableNodes.length - 1) {\n          focusableNodes[0].focus();\n          event.preventDefault();\n        }\n      }\n    }\n\n  }\n  /**\n   * Modal prototype ends.\n   * Here on code is responsible for detecting and\n   * auto binding event handlers on modal triggers\n   */\n  // Keep a reference to the opened modal\n\n\n  let activeModal = null;\n  /**\n   * Generates an associative array of modals and it's\n   * respective triggers\n   * @param  {array} triggers     An array of all triggers\n   * @param  {string} triggerAttr The data-attribute which triggers the module\n   * @return {array}\n   */\n\n  const generateTriggerMap = (triggers, triggerAttr) => {\n    const triggerMap = [];\n    triggers.forEach(trigger => {\n      const targetModal = trigger.attributes[triggerAttr].value;\n      if (triggerMap[targetModal] === undefined) triggerMap[targetModal] = [];\n      triggerMap[targetModal].push(trigger);\n    });\n    return triggerMap;\n  };\n  /**\n   * Validates whether a modal of the given id exists\n   * in the DOM\n   * @param  {number} id  The id of the modal\n   * @return {boolean}\n   */\n\n\n  const validateModalPresence = id => {\n    if (!document.getElementById(id)) {\n      console.warn(`MicroModal: \\u2757Seems like you have missed %c'${id}'`, 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', 'ID somewhere in your code. Refer example below to resolve it.');\n      console.warn(`%cExample:`, 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', `<div class=\"modal\" id=\"${id}\"></div>`);\n      return false;\n    }\n  };\n  /**\n   * Validates if there are modal triggers present\n   * in the DOM\n   * @param  {array} triggers An array of data-triggers\n   * @return {boolean}\n   */\n\n\n  const validateTriggerPresence = triggers => {\n    if (triggers.length <= 0) {\n      console.warn(`MicroModal: \\u2757Please specify at least one %c'micromodal-trigger'`, 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', 'data attribute.');\n      console.warn(`%cExample:`, 'background-color: #f8f9fa;color: #50596c;font-weight: bold;', `<a href=\"#\" data-micromodal-trigger=\"my-modal\"></a>`);\n      return false;\n    }\n  };\n  /**\n   * Checks if triggers and their corresponding modals\n   * are present in the DOM\n   * @param  {array} triggers   Array of DOM nodes which have data-triggers\n   * @param  {array} triggerMap Associative array of modals and their triggers\n   * @return {boolean}\n   */\n\n\n  const validateArgs = (triggers, triggerMap) => {\n    validateTriggerPresence(triggers);\n    if (!triggerMap) return true;\n\n    for (var id in triggerMap) validateModalPresence(id);\n\n    return true;\n  };\n  /**\n   * Binds click handlers to all modal triggers\n   * @param  {object} config [description]\n   * @return void\n   */\n\n\n  const init = config => {\n    // Create an config object with default openTrigger\n    const options = Object.assign({}, {\n      openTrigger: 'data-micromodal-trigger'\n    }, config); // Collects all the nodes with the trigger\n\n    const triggers = [...document.querySelectorAll(`[${options.openTrigger}]`)]; // Makes a mappings of modals with their trigger nodes\n\n    const triggerMap = generateTriggerMap(triggers, options.openTrigger); // Checks if modals and triggers exist in dom\n\n    if (options.debugMode === true && validateArgs(triggers, triggerMap) === false) return; // For every target modal creates a new instance\n\n    for (var key in triggerMap) {\n      let value = triggerMap[key];\n      options.targetModal = key;\n      options.triggers = [...value];\n      activeModal = new Modal(options); // eslint-disable-line no-new\n    }\n  };\n  /**\n   * Shows a particular modal\n   * @param  {string} targetModal [The id of the modal to display]\n   * @param  {object} config [The configuration object to pass]\n   * @return {void}\n   */\n\n\n  const show = (targetModal, config) => {\n    const options = config || {};\n    options.targetModal = targetModal; // Checks if modals and triggers exist in dom\n\n    if (options.debugMode === true && validateModalPresence(targetModal) === false) return; // stores reference to active modal\n\n    activeModal = new Modal(options); // eslint-disable-line no-new\n\n    activeModal.showModal();\n  };\n  /**\n   * Closes the active modal\n   * @param  {string} targetModal [The id of the modal to close]\n   * @return {void}\n   */\n\n\n  const close = targetModal => {\n    targetModal ? activeModal.closeModalById(targetModal) : activeModal.closeModal();\n  };\n\n  return {\n    init,\n    show,\n    close\n  };\n})();\n\nexport default MicroModal;\n","import MicroModal from 'micromodal';\r\n\r\nimport Component from '../Component';\r\nimport Modal from './Modal';\r\n\r\n/**\r\n * The `ModalManager` component manages a modal dialog. Only one modal dialog\r\n * can be shown at once; loading a new component into the ModalManager will\r\n * overwrite the previous one.\r\n */\r\nexport default class ModalManager extends Component {\r\n  init() {\r\n    this.showing = false;\r\n    this.component = null;\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className=\"ModalManager modal\" id=\"Modal\" onclick={this.onclick.bind(this)}>\r\n        {this.component && this.component.render()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  config(isInitialized, context) {\r\n    if (isInitialized) return;\r\n\r\n    // Since this component is 'above' the content of the page (that is, it is a\r\n    // part of the global UI that persists between routes), we will flag the DOM\r\n    // to be retained across route changes.\r\n    context.retain = true;\r\n  }\r\n\r\n  /**\r\n   * Show a modal dialog.\r\n   *\r\n   * @param {Modal} component\r\n   * @public\r\n   */\r\n  show(component) {\r\n    if (!(component instanceof Modal)) {\r\n      throw new Error('The ModalManager component can only show Modal components');\r\n    }\r\n\r\n    clearTimeout(this.hideTimeout);\r\n\r\n    this.showing = true;\r\n    this.component = component;\r\n\r\n    if (app.current) app.current.retain = true;\r\n\r\n    m.redraw(true);\r\n\r\n    if (!$('.modal-backdrop').length) {\r\n      $('<div />').addClass('modal-backdrop')\r\n        .appendTo('body');\r\n    }\r\n\r\n    MicroModal.show('Modal', {\r\n      awaitCloseAnimation: true,\r\n      onClose: () => {\r\n        $('.modal-backdrop').fadeOut(200, function () {\r\n          this.remove();\r\n        });\r\n\r\n        this.showing = false;\r\n      }\r\n    });\r\n\r\n    this.onready();\r\n  }\r\n\r\n  onclick(e) {\r\n    if (e.target === this.element) {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Close the modal dialog.\r\n   *\r\n   * @public\r\n   */\r\n  close() {\r\n    if (!this.showing) return;\r\n\r\n    // Don't hide the modal immediately, because if the consumer happens to call\r\n    // the `show` method straight after to show another modal dialog, it will\r\n    // cause the new modal dialog to disappear. Instead we will wait for a tiny\r\n    // bit to give the `show` method the opportunity to prevent this from going\r\n    // ahead.\r\n    this.hideTimeout = setTimeout(() => MicroModal.close('Modal'));\r\n  }\r\n\r\n  /**\r\n   * Clear content from the modal area.\r\n   *\r\n   * @protected\r\n   */\r\n  clear() {\r\n    if (this.component) {\r\n      this.component.onhide();\r\n    }\r\n\r\n    this.component = null;\r\n\r\n    app.current.retain = false;\r\n\r\n    m.lazyRedraw();\r\n  }\r\n\r\n  /**\r\n   * When the modal dialog is ready to be used, tell it!\r\n   *\r\n   * @protected\r\n   */\r\n  onready() {\r\n    if (this.component && this.component.onready) {\r\n      this.component.onready(this.$());\r\n    }\r\n  }\r\n}\r\n","/**\r\n * The `formatNumber` utility localizes a number into a string with the\r\n * appropriate punctuation.\r\n *\r\n * @example\r\n * formatNumber(1234);\r\n * // 1,234\r\n *\r\n * @param {Number} number\r\n * @return {String}\r\n */\r\nexport default function formatNumber(number) {\r\n  return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n}\r\n","/**\r\n * The `anchorScroll` utility saves the scroll position relative to an element,\r\n * and then restores it after a callback has been run.\r\n *\r\n * This is useful if a redraw will change the page's content above the viewport.\r\n * Normally doing this will result in the content in the viewport being pushed\r\n * down or pulled up. By wrapping the redraw with this utility, the scroll\r\n * position can be anchor to an element that is in or below the viewport, so\r\n * the content in the viewport will stay the same.\r\n *\r\n * @param {DOMElement} element The element to anchor the scroll position to.\r\n * @param {Function} callback The callback to run that will change page content.\r\n */\r\nexport default function anchorScroll(element, callback) {\r\n  const $window = $(window);\r\n  const $el = $(element);\r\n\r\n  if (!element || !$el.length) {\r\n    return callback();\r\n  }\r\n\r\n  const relativeScroll = $el.offset().top - $window.scrollTop();\r\n\r\n  callback();\r\n\r\n  $window.scrollTop($el.offset().top - relativeScroll);\r\n}\r\n","/**\r\n * The `evented` mixin provides methods allowing an object to trigger events,\r\n * running externally registered event handlers.\r\n */\r\nexport default {\r\n  /**\r\n   * Arrays of registered event handlers, grouped by the event name.\r\n   *\r\n   * @type {Object}\r\n   * @protected\r\n   */\r\n  handlers: null,\r\n\r\n  /**\r\n   * Get all of the registered handlers for an event.\r\n   *\r\n   * @param {String} event The name of the event.\r\n   * @return {Array}\r\n   * @protected\r\n   */\r\n  getHandlers(event) {\r\n    this.handlers = this.handlers || {};\r\n\r\n    this.handlers[event] = this.handlers[event] || [];\r\n\r\n    return this.handlers[event];\r\n  },\r\n\r\n  /**\r\n   * Trigger an event.\r\n   *\r\n   * @param {String} event The name of the event.\r\n   * @param {...*} args Arguments to pass to event handlers.\r\n   * @public\r\n   */\r\n  trigger(event, ...args) {\r\n    this.getHandlers(event).forEach(handler => handler.apply(this, args));\r\n  },\r\n\r\n  /**\r\n   * Register an event handler.\r\n   *\r\n   * @param {String} event The name of the event.\r\n   * @param {function} handler The function to handle the event.\r\n   */\r\n  on(event, handler) {\r\n    this.getHandlers(event).push(handler);\r\n  },\r\n\r\n  /**\r\n   * Register an event handler so that it will run only once, and then\r\n   * unregister itself.\r\n   *\r\n   * @param {String} event The name of the event.\r\n   * @param {function} handler The function to handle the event.\r\n   */\r\n  one(event, handler) {\r\n    const wrapper = function() {\r\n      handler.apply(this, arguments);\r\n\r\n      this.off(event, wrapper);\r\n    };\r\n\r\n    this.getHandlers(event).push(wrapper);\r\n  },\r\n\r\n  /**\r\n   * Unregister an event handler.\r\n   *\r\n   * @param {String} event The name of the event.\r\n   * @param {function} handler The function that handles the event.\r\n   */\r\n  off(event, handler) {\r\n    const handlers = this.getHandlers(event);\r\n    const index = handlers.indexOf(handler);\r\n\r\n    if (index !== -1) {\r\n      handlers.splice(index, 1);\r\n    }\r\n  }\r\n}\r\n","import Dropdown from './Dropdown';\r\nimport Button from './Button';\r\nimport icon from '../helpers/icon';\r\n\r\n/**\r\n * The `SplitDropdown` component is similar to `Dropdown`, but the first child\r\n * is displayed as its own button prior to the toggle button.\r\n */\r\nexport default class SplitDropdown extends Dropdown {\r\n  static initProps(props) {\r\n    super.initProps(props);\r\n\r\n    props.className += ' Dropdown--split';\r\n    props.menuClassName += ' Dropdown-menu--right';\r\n  }\r\n\r\n  getButton() {\r\n    // Make a copy of the props of the first child component. We will assign\r\n    // these props to a new button, so that it has exactly the same behaviour as\r\n    // the first child.\r\n    const firstChild = this.getFirstChild();\r\n    const buttonProps = Object.assign({}, firstChild.props);\r\n    buttonProps.className = (buttonProps.className || '') + ' SplitDropdown-button Button ' + this.props.buttonClassName;\r\n\r\n    return [\r\n      Button.component(buttonProps),\r\n      <button\r\n        className={'Dropdown-toggle Button Button--icon ' + this.props.buttonClassName}\r\n        data-toggle=\"dropdown\">\r\n        {icon(this.props.icon, {className: 'Button-icon'})}\r\n        {icon('fas fa-caret-down', {className: 'Button-caret'})}\r\n      </button>\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Get the first child. If the first child is an array, the first item in that\r\n   * array will be returned.\r\n   *\r\n   * @return {*}\r\n   * @protected\r\n   */\r\n  getFirstChild() {\r\n    let firstChild = this.props.children;\r\n\r\n    while (firstChild instanceof Array) firstChild = firstChild[0];\r\n\r\n    return firstChild;\r\n  }\r\n}\r\n","import icon from './icon';\r\n\r\n/**\r\n * The `useronline` helper displays a green circle if the user is online\r\n *\r\n * @param {User} user\r\n * @return {Object}\r\n */\r\nexport default function userOnline(user) {\r\n    if (user.lastSeenAt() && user.isOnline()) {\r\n        return <span className=\"UserOnline\">{icon('fas fa-circle')}</span>;\r\n    }\r\n}\r\n","/**\r\n * The `fullTime` helper displays a formatted time string wrapped in a <time>\r\n * tag.\r\n *\r\n * @param {Date} time\r\n * @return {Object}\r\n */\r\nexport default function fullTime(time) {\r\n  const mo = dayjs(time);\r\n\r\n  const datetime = mo.format();\r\n  const full = mo.format('LLLL');\r\n\r\n  return <time pubdate datetime={datetime}>{full}</time>;\r\n}\r\n","/**\r\n * The `abbreviateNumber` utility converts a number to a shorter localized form.\r\n *\r\n * @example\r\n * abbreviateNumber(1234);\r\n * // \"1.2K\"\r\n *\r\n * @param {Integer} number\r\n * @return {String}\r\n */\r\nexport default function abbreviateNumber(number) {\r\n  // TODO: translation\r\n  if (number >= 1000000) {\r\n    return Math.floor(number / 1000000) + app.translator.trans('core.lib.number_suffix.mega_text');\r\n  } else if (number >= 1000) {\r\n    return Math.floor(number / 1000) + app.translator.trans('core.lib.number_suffix.kilo_text');\r\n  } else {\r\n    return number.toString();\r\n  }\r\n}\r\n","/* global Promise */\r\n\r\n;(function (global, factory) { // eslint-disable-line\r\n\t\"use strict\"\r\n\t/* eslint-disable no-undef */\r\n\tvar m = factory(global)\r\n\t/*\tSet dependencies when no window for isomorphic compatibility */\r\n\tif(typeof window === \"undefined\") {\r\n\t\tm.deps({\r\n\t\t\tdocument: typeof document !== \"undefined\" ? document : {},\r\n\t\t\tlocation: typeof location !== \"undefined\" ? location : {},\r\n\t\t\tclearTimeout: clearTimeout,\r\n\t\t\tsetTimeout: setTimeout\r\n\t\t})\r\n\t}\r\n\tif (typeof module === \"object\" && module != null && module.exports) {\r\n\t\tmodule.exports = m\r\n\t} else if (typeof define === \"function\" && define.amd) {\r\n\t\tdefine(function () { return m })\r\n\t} else {\r\n\t\tglobal.m = m\r\n\t}\r\n\t/* eslint-enable no-undef */\r\n})(typeof window !== \"undefined\" ? window : this, function factory(global, undefined) { // eslint-disable-line\r\n\t\"use strict\"\r\n\r\n\tm.version = function () {\r\n\t\treturn \"v0.2.8\"\r\n\t}\r\n\r\n\tvar hasOwn = {}.hasOwnProperty\r\n\tvar type = {}.toString\r\n\r\n\tfunction isFunction(object) {\r\n\t\treturn typeof object === \"function\"\r\n\t}\r\n\r\n\tfunction isObject(object) {\r\n\t\treturn type.call(object) === \"[object Object]\"\r\n\t}\r\n\r\n\tfunction isString(object) {\r\n\t\treturn type.call(object) === \"[object String]\"\r\n\t}\r\n\r\n\tvar isArray = Array.isArray || function (object) {\r\n\t\treturn type.call(object) === \"[object Array]\"\r\n\t}\r\n\r\n\tfunction noop() {}\r\n\r\n\tvar voidElements = {\r\n\t\tAREA: 1,\r\n\t\tBASE: 1,\r\n\t\tBR: 1,\r\n\t\tCOL: 1,\r\n\t\tCOMMAND: 1,\r\n\t\tEMBED: 1,\r\n\t\tHR: 1,\r\n\t\tIMG: 1,\r\n\t\tINPUT: 1,\r\n\t\tKEYGEN: 1,\r\n\t\tLINK: 1,\r\n\t\tMETA: 1,\r\n\t\tPARAM: 1,\r\n\t\tSOURCE: 1,\r\n\t\tTRACK: 1,\r\n\t\tWBR: 1\r\n\t}\r\n\r\n\t// caching commonly used variables\r\n\tvar $document, $location, $requestAnimationFrame, $cancelAnimationFrame\r\n\r\n\t// self invoking function needed because of the way mocks work\r\n\tfunction initialize(mock) {\r\n\t\t$document = mock.document\r\n\t\t$location = mock.location\r\n\t\t$cancelAnimationFrame = mock.cancelAnimationFrame || mock.clearTimeout\r\n\t\t$requestAnimationFrame = mock.requestAnimationFrame || mock.setTimeout\r\n\t}\r\n\r\n\t// testing API\r\n\tm.deps = function (mock) {\r\n\t\tinitialize(global = mock || window)\r\n\t\treturn global\r\n\t}\r\n\r\n\tm.deps.factory = m.factory = factory\r\n\r\n\tm.deps(global)\r\n\r\n\t/**\r\n\t * @typedef {String} Tag\r\n\t * A string that looks like -> div.classname#id[param=one][param2=two]\r\n\t * Which describes a DOM node\r\n\t */\r\n\r\n\tfunction parseTagAttrs(cell, tag) {\r\n\t\tvar classes = []\r\n\t\t/* eslint-disable max-len */\r\n\t\tvar parser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\r\n\t\t/* eslint-enable max-len */\r\n\t\tvar match\r\n\r\n\t\twhile ((match = parser.exec(tag))) {\r\n\t\t\tif (match[1] === \"\" && match[2]) {\r\n\t\t\t\tcell.tag = match[2]\r\n\t\t\t} else if (match[1] === \"#\") {\r\n\t\t\t\tcell.attrs.id = match[2]\r\n\t\t\t} else if (match[1] === \".\") {\r\n\t\t\t\tclasses.push(match[2])\r\n\t\t\t} else if (match[3].charAt(0) === \"[\") { // #1195\r\n\t\t\t\tvar attrValue = match[6]\r\n\t\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\")\r\n\t\t\t\tif (match[4] === \"class\") classes.push(attrValue)\r\n\t\t\t\telse cell.attrs[match[4]] = attrValue || true\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn classes\r\n\t}\r\n\r\n\tfunction getVirtualChildren(args, hasAttrs) {\r\n\t\tvar children = hasAttrs ? args.slice(1) : args\r\n\r\n\t\tif (children.length === 1 && isArray(children[0])) {\r\n\t\t\treturn children[0]\r\n\t\t} else {\r\n\t\t\treturn children\r\n\t\t}\r\n\t}\r\n\r\n\tfunction assignAttrs(target, attrs, classes) {\r\n\t\tvar classAttr = \"class\" in attrs ? \"class\" : \"className\"\r\n\r\n\t\tfor (var attrName in attrs) {\r\n\t\t\tif (hasOwn.call(attrs, attrName)) {\r\n\t\t\t\tif (attrName === classAttr &&\r\n\t\t\t\t\t\tattrs[attrName] != null &&\r\n\t\t\t\t\t\tattrs[attrName] !== \"\") {\r\n\t\t\t\t\tclasses.push(attrs[attrName])\r\n\t\t\t\t\t// create key in correct iteration order\r\n\t\t\t\t\ttarget[attrName] = \"\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[attrName] = attrs[attrName]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (classes.length) target[classAttr] = classes.join(\" \")\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {Tag} The DOM node tag\r\n\t * @param {Object=[]} optional key-value pairs to be mapped to DOM attrs\r\n\t * @param {...mNode=[]} Zero or more Mithril child nodes. Can be an array,\r\n\t *                      or splat (optional)\r\n\t */\r\n\tfunction m(tag, pairs) {\r\n\t\tvar args = []\r\n\r\n\t\tfor (var i = 1, length = arguments.length; i < length; i++) {\r\n\t\t\targs[i - 1] = arguments[i]\r\n\t\t}\r\n\r\n\t\tif (tag && isFunction(tag.view)) return parameterize(tag, args)\r\n\r\n\t\tif (!isString(tag)) {\r\n\t\t\tthrow new Error(\"selector in m(selector, attrs, children) should \" +\r\n\t\t\t\t\"be a string\")\r\n\t\t}\r\n\r\n\t\tvar hasAttrs = pairs != null && isObject(pairs) &&\r\n\t\t\t!(\"tag\" in pairs || \"view\" in pairs || \"subtree\" in pairs)\r\n\r\n\t\tvar attrs = hasAttrs ? pairs : {}\r\n\t\tvar cell = {\r\n\t\t\ttag: \"div\",\r\n\t\t\tattrs: {},\r\n\t\t\tchildren: getVirtualChildren(args, hasAttrs)\r\n\t\t}\r\n\r\n\t\tassignAttrs(cell.attrs, attrs, parseTagAttrs(cell, tag))\r\n\t\treturn cell\r\n\t}\r\n\r\n\tfunction forEach(list, f) {\r\n\t\tfor (var i = 0; i < list.length && !f(list[i], i++);) {\r\n\t\t\t// function called in condition\r\n\t\t}\r\n\t}\r\n\r\n\tfunction forKeys(list, f) {\r\n\t\tforEach(list, function (attrs, i) {\r\n\t\t\treturn (attrs = attrs && attrs.attrs) &&\r\n\t\t\t\tattrs.key != null &&\r\n\t\t\t\tf(attrs, i)\r\n\t\t})\r\n\t}\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction dataToString(data) {\r\n\t\t// data.toString() might throw or return null if data is the return\r\n\t\t// value of Console.log in some versions of Firefox (behavior depends on\r\n\t\t// version)\r\n\t\ttry {\r\n\t\t\tif (typeof data !== \"boolean\" &&\r\n\t\t\t\t\tdata != null &&\r\n\t\t\t\t\tdata.toString() != null) return data\r\n\t\t} catch (e) {\r\n\t\t\t// silently ignore errors\r\n\t\t}\r\n\t\treturn \"\"\r\n\t}\r\n\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction injectTextNode(parentElement, first, index, data) {\r\n\t\ttry {\r\n\t\t\tinsertNode(parentElement, first, index)\r\n\t\t\tfirst.nodeValue = data\r\n\t\t} catch (e) {\r\n\t\t\t// IE erroneously throws error when appending an empty text node\r\n\t\t\t// after a null\r\n\t\t}\r\n\t}\r\n\r\n\tfunction flatten(list) {\r\n\t\t// recursively flatten array\r\n\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\tif (isArray(list[i])) {\r\n\t\t\t\tlist = list.concat.apply([], list)\r\n\t\t\t\t// check current index again and flatten until there are no more\r\n\t\t\t\t// nested arrays at that index\r\n\t\t\t\ti--\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn list\r\n\t}\r\n\r\n\tfunction insertNode(parentElement, node, index) {\r\n\t\tparentElement.insertBefore(node,\r\n\t\t\tparentElement.childNodes[index] || null)\r\n\t}\r\n\r\n\tvar DELETION = 1\r\n\tvar INSERTION = 2\r\n\tvar MOVE = 3\r\n\r\n\tfunction handleKeysDiffer(data, existing, cached, parentElement) {\r\n\t\tforKeys(data, function (key, i) {\r\n\t\t\texisting[key = key.key] = existing[key] ? {\r\n\t\t\t\taction: MOVE,\r\n\t\t\t\tindex: i,\r\n\t\t\t\tfrom: existing[key].index,\r\n\t\t\t\telement: cached.nodes[existing[key].index] ||\r\n\t\t\t\t\t$document.createElement(\"div\")\r\n\t\t\t} : {action: INSERTION, index: i}\r\n\t\t})\r\n\r\n\t\tvar actions = []\r\n\t\tfor (var prop in existing) {\r\n\t\t\tif (hasOwn.call(existing, prop)) {\r\n\t\t\t\tactions.push(existing[prop])\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar changes = actions.sort(sortChanges)\r\n\t\tvar newCached = new Array(cached.length)\r\n\r\n\t\tnewCached.nodes = cached.nodes.slice()\r\n\r\n\t\tforEach(changes, function (change) {\r\n\t\t\tvar index = change.index\r\n\t\t\tif (change.action === DELETION) {\r\n\t\t\t\tclear(cached[index].nodes, cached[index])\r\n\t\t\t\tnewCached.splice(index, 1)\r\n\t\t\t}\r\n\t\t\tif (change.action === INSERTION) {\r\n\t\t\t\tvar dummy = $document.createElement(\"div\")\r\n\t\t\t\tdummy.key = data[index].attrs.key\r\n\t\t\t\tinsertNode(parentElement, dummy, index)\r\n\t\t\t\tnewCached.splice(index, 0, {\r\n\t\t\t\t\tattrs: {key: data[index].attrs.key},\r\n\t\t\t\t\tnodes: [dummy]\r\n\t\t\t\t})\r\n\t\t\t\tnewCached.nodes[index] = dummy\r\n\t\t\t}\r\n\r\n\t\t\tif (change.action === MOVE) {\r\n\t\t\t\tvar changeElement = change.element\r\n\t\t\t\tvar maybeChanged = parentElement.childNodes[index]\r\n\t\t\t\tif (maybeChanged !== changeElement && changeElement !== null) {\r\n\t\t\t\t\tparentElement.insertBefore(changeElement,\r\n\t\t\t\t\t\tmaybeChanged || null)\r\n\t\t\t\t}\r\n\t\t\t\tnewCached[index] = cached[change.from]\r\n\t\t\t\tnewCached.nodes[index] = changeElement\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn newCached\r\n\t}\r\n\r\n\tfunction diffKeys(data, cached, existing, parentElement) {\r\n\t\tvar keysDiffer = data.length !== cached.length\r\n\r\n\t\tif (!keysDiffer) {\r\n\t\t\tforKeys(data, function (attrs, i) {\r\n\t\t\t\tvar cachedCell = cached[i]\r\n\t\t\t\treturn keysDiffer = cachedCell &&\r\n\t\t\t\t\tcachedCell.attrs &&\r\n\t\t\t\t\tcachedCell.attrs.key !== attrs.key\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (keysDiffer) {\r\n\t\t\treturn handleKeysDiffer(data, existing, cached, parentElement)\r\n\t\t} else {\r\n\t\t\treturn cached\r\n\t\t}\r\n\t}\r\n\r\n\tfunction diffArray(data, cached, nodes) {\r\n\t\t// diff the array itself\r\n\r\n\t\t// update the list of DOM nodes by collecting the nodes from each item\r\n\t\tforEach(data, function (_, i) {\r\n\t\t\tif (cached[i] != null) nodes.push.apply(nodes, cached[i].nodes)\r\n\t\t})\r\n\t\t// remove items from the end of the array if the new array is shorter\r\n\t\t// than the old one. if errors ever happen here, the issue is most\r\n\t\t// likely a bug in the construction of the `cached` data structure\r\n\t\t// somewhere earlier in the program\r\n\t\tforEach(cached.nodes, function (node, i) {\r\n\t\t\tif (node.parentNode != null && nodes.indexOf(node) < 0) {\r\n\t\t\t\tclear([node], [cached[i]])\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif (data.length < cached.length) cached.length = data.length\r\n\t\tcached.nodes = nodes\r\n\t}\r\n\r\n\tfunction buildArrayKeys(data) {\r\n\t\tvar guid = 0\r\n\t\tforKeys(data, function () {\r\n\t\t\tforEach(data, function (attrs) {\r\n\t\t\t\tif ((attrs = attrs && attrs.attrs) && attrs.key == null) {\r\n\t\t\t\t\tattrs.key = \"__mithril__\" + guid++\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn 1\r\n\t\t})\r\n\t}\r\n\r\n\tfunction isDifferentEnough(data, cached, dataAttrKeys) {\r\n\t\tif (data.tag !== cached.tag) return true\r\n\r\n\t\tif (dataAttrKeys.sort().join() !==\r\n\t\t\t\tObject.keys(cached.attrs).sort().join()) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (data.attrs.id !== cached.attrs.id) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (data.attrs.key !== cached.attrs.key) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (m.redraw.strategy() === \"all\") {\r\n\t\t\treturn !cached.configContext || cached.configContext.retain !== true\r\n\t\t}\r\n\r\n\t\tif (m.redraw.strategy() === \"diff\") {\r\n\t\t\treturn cached.configContext && cached.configContext.retain === false\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tfunction maybeRecreateObject(data, cached, dataAttrKeys) {\r\n\t\t// if an element is different enough from the one in cache, recreate it\r\n\t\tif (isDifferentEnough(data, cached, dataAttrKeys)) {\r\n\t\t\tif (cached.nodes.length) clear(cached.nodes)\r\n\r\n\t\t\tif (cached.configContext &&\r\n\t\t\t\t\tisFunction(cached.configContext.onunload)) {\r\n\t\t\t\tcached.configContext.onunload()\r\n\t\t\t}\r\n\r\n\t\t\tif (cached.controllers) {\r\n\t\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\t\tif (controller.onunload) {\r\n\t\t\t\t\t\tcontroller.onunload({preventDefault: noop})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getObjectNamespace(data, namespace) {\r\n\t\tif (data.attrs.xmlns) return data.attrs.xmlns\r\n\t\tif (data.tag === \"svg\") return \"http://www.w3.org/2000/svg\"\r\n\t\tif (data.tag === \"math\") return \"http://www.w3.org/1998/Math/MathML\"\r\n\t\treturn namespace\r\n\t}\r\n\r\n\tvar pendingRequests = 0\r\n\tm.startComputation = function () { pendingRequests++ }\r\n\tm.endComputation = function () {\r\n\t\tif (pendingRequests > 1) {\r\n\t\t\tpendingRequests--\r\n\t\t} else {\r\n\t\t\tpendingRequests = 0\r\n\t\t\tm.redraw()\r\n\t\t}\r\n\t}\r\n\r\n\tfunction unloadCachedControllers(cached, views, controllers) {\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views\r\n\t\t\tcached.controllers = controllers\r\n\t\t\tforEach(controllers, function (controller) {\r\n\t\t\t\tif (controller.onunload && controller.onunload.$old) {\r\n\t\t\t\t\tcontroller.onunload = controller.onunload.$old\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pendingRequests && controller.onunload) {\r\n\t\t\t\t\tvar onunload = controller.onunload\r\n\t\t\t\t\tcontroller.onunload = function (){}\r\n\t\t\t\t\tcontroller.onunload.$old = onunload\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction scheduleConfigsToBeCalled(configs, data, node, isNew, cached) {\r\n\t\t// schedule configs to be called. They are called after `build` finishes\r\n\t\t// running\r\n\t\tif (isFunction(data.attrs.config)) {\r\n\t\t\tvar context = cached.configContext = cached.configContext || {}\r\n\r\n\t\t\t// bind\r\n\t\t\tconfigs.push(function () {\r\n\t\t\t\treturn data.attrs.config.call(data, node, !isNew, context,\r\n\t\t\t\t\tcached)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildUpdatedNode(\r\n\t\tcached,\r\n\t\tdata,\r\n\t\teditable,\r\n\t\thasKeys,\r\n\t\tnamespace,\r\n\t\tviews,\r\n\t\tconfigs,\r\n\t\tcontrollers\r\n\t) {\r\n\t\tvar node = cached.nodes[0]\r\n\r\n\t\tif (hasKeys) {\r\n\t\t\tsetAttributes(node, data.tag, data.attrs, cached.attrs, namespace)\r\n\t\t}\r\n\r\n\t\tcached.children = build(\r\n\t\t\tnode,\r\n\t\t\tdata.tag,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tdata.children,\r\n\t\t\tcached.children,\r\n\t\t\tfalse,\r\n\t\t\t0,\r\n\t\t\tdata.attrs.contenteditable ? node : editable,\r\n\t\t\tnamespace,\r\n\t\t\tconfigs\r\n\t\t)\r\n\r\n\t\tcached.nodes.intact = true\r\n\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views\r\n\t\t\tcached.controllers = controllers\r\n\t\t}\r\n\r\n\t\treturn node\r\n\t}\r\n\r\n\tfunction handleNonexistentNodes(data, parentElement, index) {\r\n\t\tvar nodes\r\n\t\tif (data.$trusted) {\r\n\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t} else {\r\n\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\tif (!(parentElement.nodeName in voidElements)) {\r\n\t\t\t\tinsertNode(parentElement, nodes[0], index)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar cached\r\n\r\n\t\tif (typeof data === \"string\" ||\r\n\t\t\t\ttypeof data === \"number\" ||\r\n\t\t\t\ttypeof data === \"boolean\") {\r\n\t\t\tcached = new data.constructor(data)\r\n\t\t} else {\r\n\t\t\tcached = data\r\n\t\t}\r\n\r\n\t\tcached.nodes = nodes\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction reattachNodes(\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tparentElement,\r\n\t\teditable,\r\n\t\tindex,\r\n\t\tparentTag\r\n\t) {\r\n\t\tvar nodes = cached.nodes\r\n\t\tif (!editable || editable !== $document.activeElement ||\r\n\t\t\t\tdata !== cached) {\r\n\t\t\tif (data.$trusted) {\r\n\t\t\t\tclear(nodes, cached)\r\n\t\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t\t} else if (parentTag === \"textarea\") {\r\n\t\t\t\t// <textarea> uses `value` instead of `nodeValue`.\r\n\t\t\t\tparentElement.value = data\r\n\t\t\t} else if (editable) {\r\n\t\t\t\t// contenteditable nodes use `innerHTML` instead of `nodeValue`.\r\n\t\t\t\teditable.innerHTML = data\r\n\t\t\t\tnodes = [].slice.call(editable.childNodes)\r\n\t\t\t} else {\r\n\t\t\t\t// was a trusted string\r\n\t\t\t\tif (nodes[0].nodeType === 1 || nodes.length > 1 ||\r\n\t\t\t\t\t\t(nodes[0].nodeValue.trim &&\r\n\t\t\t\t\t\t\t!nodes[0].nodeValue.trim())) {\r\n\t\t\t\t\tclear(cached.nodes, cached)\r\n\t\t\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinjectTextNode(parentElement, nodes[0], index, data)\r\n\t\t\t}\r\n\t\t}\r\n\t\tcached = new data.constructor(data)\r\n\t\tcached.nodes = nodes\r\n\t\tcached.$trusted = data.$trusted\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction handleTextNode(\r\n\t\tcached,\r\n\t\tdata,\r\n\t\tindex,\r\n\t\tparentElement,\r\n\t\tshouldReattach,\r\n\t\teditable,\r\n\t\tparentTag\r\n\t) {\r\n\t\tif (!cached.nodes.length) {\r\n\t\t\treturn handleNonexistentNodes(data, parentElement, index)\r\n\t\t} else if (cached.valueOf() !== data.valueOf() || shouldReattach) {\r\n\t\t\treturn reattachNodes(data, cached, parentElement, editable, index,\r\n\t\t\t\tparentTag)\r\n\t\t} else {\r\n\t\t\treturn (cached.nodes.intact = true, cached)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getSubArrayCount(item) {\r\n\t\tif (item.$trusted) {\r\n\t\t\t// fix offset of next element if item was a trusted string w/ more\r\n\t\t\t// than one html element\r\n\t\t\treturn item.nodes.length\r\n\t\t} else if (isArray(item)) {\r\n\t\t\treturn item.length\r\n\t\t}\r\n\t\treturn 1\r\n\t}\r\n\r\n\tfunction buildArray(\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tparentElement,\r\n\t\tindex,\r\n\t\tparentTag,\r\n\t\tshouldReattach,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tdata = flatten(data)\r\n\t\tvar nodes = []\r\n\t\tvar intact = cached.length === data.length\r\n\t\tvar subArrayCount = 0\r\n\r\n\t\t// keys algorithm: sort elements without recreating them if keys are\r\n\t\t// present\r\n\t\t//\r\n\t\t// 1) create a map of all existing keys, and mark all for deletion\r\n\t\t// 2) add new keys to map and mark them for addition\r\n\t\t// 3) if key exists in new list, change action from deletion to a move\r\n\t\t// 4) for each key, handle its corresponding action as marked in\r\n\t\t//    previous steps\r\n\r\n\t\tvar existing = {}\r\n\t\tvar shouldMaintainIdentities = false\r\n\r\n\t\tforKeys(cached, function (attrs, i) {\r\n\t\t\tshouldMaintainIdentities = true\r\n\t\t\texisting[cached[i].attrs.key] = {action: DELETION, index: i}\r\n\t\t})\r\n\r\n\t\tbuildArrayKeys(data)\r\n\t\tif (shouldMaintainIdentities) {\r\n\t\t\tcached = diffKeys(data, cached, existing, parentElement)\r\n\t\t}\r\n\t\t// end key algorithm\r\n\r\n\t\tvar cacheCount = 0\r\n\t\t// faster explicitly written\r\n\t\tfor (var i = 0, len = data.length; i < len; i++) {\r\n\t\t\t// diff each item in the array\r\n\t\t\tvar item = build(\r\n\t\t\t\tparentElement,\r\n\t\t\t\tparentTag,\r\n\t\t\t\tcached,\r\n\t\t\t\tindex,\r\n\t\t\t\tdata[i],\r\n\t\t\t\tcached[cacheCount],\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\tindex + subArrayCount || subArrayCount,\r\n\t\t\t\teditable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\r\n\t\t\tif (item !== undefined) {\r\n\t\t\t\tintact = intact && item.nodes.intact\r\n\t\t\t\tsubArrayCount += getSubArrayCount(item)\r\n\t\t\t\tcached[cacheCount++] = item\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!intact) diffArray(data, cached, nodes)\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction makeCache(data, cached, index, parentIndex, parentCache) {\r\n\t\tif (cached != null) {\r\n\t\t\tif (type.call(cached) === type.call(data)) return cached\r\n\r\n\t\t\tif (parentCache && parentCache.nodes) {\r\n\t\t\t\tvar offset = index - parentIndex\r\n\t\t\t\tvar end = offset + (isArray(data) ? data : cached.nodes).length\r\n\t\t\t\tclear(\r\n\t\t\t\t\tparentCache.nodes.slice(offset, end),\r\n\t\t\t\t\tparentCache.slice(offset, end))\r\n\t\t\t} else if (cached.nodes) {\r\n\t\t\t\tclear(cached.nodes, cached)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcached = new data.constructor()\r\n\t\t// if constructor creates a virtual dom element, use a blank object as\r\n\t\t// the base cached node instead of copying the virtual el (#277)\r\n\t\tif (cached.tag) cached = {}\r\n\t\tcached.nodes = []\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction constructNode(data, namespace) {\r\n\t\tif (data.attrs.is) {\r\n\t\t\tif (namespace == null) {\r\n\t\t\t\treturn $document.createElement(data.tag, data.attrs.is)\r\n\t\t\t} else {\r\n\t\t\t\treturn $document.createElementNS(namespace, data.tag,\r\n\t\t\t\t\tdata.attrs.is)\r\n\t\t\t}\r\n\t\t} else if (namespace == null) {\r\n\t\t\treturn $document.createElement(data.tag)\r\n\t\t} else {\r\n\t\t\treturn $document.createElementNS(namespace, data.tag)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction constructAttrs(data, node, namespace, hasKeys) {\r\n\t\tif (hasKeys) {\r\n\t\t\treturn setAttributes(node, data.tag, data.attrs, {}, namespace)\r\n\t\t} else {\r\n\t\t\treturn data.attrs\r\n\t\t}\r\n\t}\r\n\r\n\tfunction constructChildren(\r\n\t\tdata,\r\n\t\tnode,\r\n\t\tcached,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tif (data.children != null && data.children.length > 0) {\r\n\t\t\treturn build(\r\n\t\t\t\tnode,\r\n\t\t\t\tdata.tag,\r\n\t\t\t\tundefined,\r\n\t\t\t\tundefined,\r\n\t\t\t\tdata.children,\r\n\t\t\t\tcached.children,\r\n\t\t\t\ttrue,\r\n\t\t\t\t0,\r\n\t\t\t\tdata.attrs.contenteditable ? node : editable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else {\r\n\t\t\treturn data.children\r\n\t\t}\r\n\t}\r\n\r\n\tfunction reconstructCached(\r\n\t\tdata,\r\n\t\tattrs,\r\n\t\tchildren,\r\n\t\tnode,\r\n\t\tnamespace,\r\n\t\tviews,\r\n\t\tcontrollers\r\n\t) {\r\n\t\tvar cached = {\r\n\t\t\ttag: data.tag,\r\n\t\t\tattrs: attrs,\r\n\t\t\tchildren: children,\r\n\t\t\tnodes: [node]\r\n\t\t}\r\n\r\n\t\tunloadCachedControllers(cached, views, controllers)\r\n\r\n\t\tif (cached.children && !cached.children.nodes) {\r\n\t\t\tcached.children.nodes = []\r\n\t\t}\r\n\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction getController(views, view, cachedControllers, controller) {\r\n\t\tvar controllerIndex\r\n\r\n\t\tif (m.redraw.strategy() === \"diff\" && views) {\r\n\t\t\tcontrollerIndex = views.indexOf(view)\r\n\t\t} else {\r\n\t\t\tcontrollerIndex = -1\r\n\t\t}\r\n\r\n\t\tif (controllerIndex > -1) {\r\n\t\t\treturn cachedControllers[controllerIndex]\r\n\t\t} else if (isFunction(controller)) {\r\n\t\t\treturn new controller()\r\n\t\t} else {\r\n\t\t\treturn {}\r\n\t\t}\r\n\t}\r\n\r\n\tvar unloaders = []\r\n\r\n\tfunction updateLists(views, controllers, view, controller) {\r\n\t\tif (controller.onunload != null &&\r\n\t\t\t\tunloaders.map(function (u) { return u.handler })\r\n\t\t\t\t\t.indexOf(controller.onunload) < 0) {\r\n\t\t\tunloaders.push({\r\n\t\t\t\tcontroller: controller,\r\n\t\t\t\thandler: controller.onunload\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tviews.push(view)\r\n\t\tcontrollers.push(controller)\r\n\t}\r\n\r\n\tvar forcing = false\r\n\tfunction checkView(\r\n\t\tdata,\r\n\t\tview,\r\n\t\tcached,\r\n\t\tcachedControllers,\r\n\t\tcontrollers,\r\n\t\tviews\r\n\t) {\r\n\t\tvar controller = getController(\r\n\t\t\tcached.views,\r\n\t\t\tview,\r\n\t\t\tcachedControllers,\r\n\t\t\tdata.controller)\r\n\r\n\t\tvar key = data && data.attrs && data.attrs.key\r\n\r\n\t\tif (pendingRequests === 0 ||\r\n\t\t\t\tforcing ||\r\n\t\t\t\tcachedControllers &&\r\n\t\t\t\t\tcachedControllers.indexOf(controller) > -1) {\r\n\t\t\tdata = data.view(controller)\r\n\t\t} else {\r\n\t\t\tdata = {tag: \"placeholder\"}\r\n\t\t}\r\n\r\n\t\tif (data.subtree === \"retain\") return data\r\n\t\tdata.attrs = data.attrs || {}\r\n\t\tdata.attrs.key = key\r\n\t\tupdateLists(views, controllers, view, controller)\r\n\t\treturn data\r\n\t}\r\n\r\n\tfunction markViews(data, cached, views, controllers) {\r\n\t\tvar cachedControllers = cached && cached.controllers\r\n\r\n\t\twhile (data.view != null) {\r\n\t\t\tdata = checkView(\r\n\t\t\t\tdata,\r\n\t\t\t\tdata.view.$original || data.view,\r\n\t\t\t\tcached,\r\n\t\t\t\tcachedControllers,\r\n\t\t\t\tcontrollers,\r\n\t\t\t\tviews)\r\n\t\t}\r\n\r\n\t\treturn data\r\n\t}\r\n\r\n\tfunction buildObject( // eslint-disable-line max-statements\r\n\t\tdata,\r\n\t\tcached,\r\n\t\teditable,\r\n\t\tparentElement,\r\n\t\tindex,\r\n\t\tshouldReattach,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tvar views = []\r\n\t\tvar controllers = []\r\n\r\n\t\tdata = markViews(data, cached, views, controllers)\r\n\r\n\t\tif (data.subtree === \"retain\") return cached\r\n\r\n\t\tif (!data.tag && controllers.length) {\r\n\t\t\tthrow new Error(\"Component template must return a virtual \" +\r\n\t\t\t\t\"element, not an array, string, etc.\")\r\n\t\t}\r\n\r\n\t\tdata.attrs = data.attrs || {}\r\n\t\tcached.attrs = cached.attrs || {}\r\n\r\n\t\tvar dataAttrKeys = Object.keys(data.attrs)\r\n\t\tvar hasKeys = dataAttrKeys.length > (\"key\" in data.attrs ? 1 : 0)\r\n\r\n\t\tmaybeRecreateObject(data, cached, dataAttrKeys)\r\n\r\n\t\tif (!isString(data.tag)) return\r\n\r\n\t\tvar isNew = cached.nodes.length === 0\r\n\r\n\t\tnamespace = getObjectNamespace(data, namespace)\r\n\r\n\t\tvar node\r\n\t\tif (isNew) {\r\n\t\t\tnode = constructNode(data, namespace)\r\n\t\t\t// set attributes first, then create children\r\n\t\t\tvar attrs = constructAttrs(data, node, namespace, hasKeys)\r\n\r\n\t\t\t// add the node to its parent before attaching children to it\r\n\t\t\tinsertNode(parentElement, node, index)\r\n\r\n\t\t\tvar children = constructChildren(data, node, cached, editable,\r\n\t\t\t\tnamespace, configs)\r\n\r\n\t\t\tcached = reconstructCached(\r\n\t\t\t\tdata,\r\n\t\t\t\tattrs,\r\n\t\t\t\tchildren,\r\n\t\t\t\tnode,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tviews,\r\n\t\t\t\tcontrollers)\r\n\t\t} else {\r\n\t\t\tnode = buildUpdatedNode(\r\n\t\t\t\tcached,\r\n\t\t\t\tdata,\r\n\t\t\t\teditable,\r\n\t\t\t\thasKeys,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tviews,\r\n\t\t\t\tconfigs,\r\n\t\t\t\tcontrollers)\r\n\t\t}\r\n\r\n\t\t// edge case: setting value on <select> doesn't work before children\r\n\t\t// exist, so set it again after children have been created/updated\r\n\t\tif (data.tag === \"select\" && \"value\" in data.attrs) {\r\n\t\t\tsetAttributes(node, data.tag, {value: data.attrs.value}, {},\r\n\t\t\t\tnamespace)\r\n\t\t}\r\n\r\n\t\tif (!isNew && shouldReattach === true && node != null) {\r\n\t\t\tinsertNode(parentElement, node, index)\r\n\t\t}\r\n\r\n\t\t// The configs are called after `build` finishes running\r\n\t\tscheduleConfigsToBeCalled(configs, data, node, isNew, cached)\r\n\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction build(\r\n\t\tparentElement,\r\n\t\tparentTag,\r\n\t\tparentCache,\r\n\t\tparentIndex,\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tshouldReattach,\r\n\t\tindex,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\t/*\r\n\t\t * `build` is a recursive function that manages creation/diffing/removal\r\n\t\t * of DOM elements based on comparison between `data` and `cached` the\r\n\t\t * diff algorithm can be summarized as this:\r\n\t\t *\r\n\t\t * 1 - compare `data` and `cached`\r\n\t\t * 2 - if they are different, copy `data` to `cached` and update the DOM\r\n\t\t *     based on what the difference is\r\n\t\t * 3 - recursively apply this algorithm for every array and for the\r\n\t\t *     children of every virtual element\r\n\t\t *\r\n\t\t * The `cached` data structure is essentially the same as the previous\r\n\t\t * redraw's `data` data structure, with a few additions:\r\n\t\t * - `cached` always has a property called `nodes`, which is a list of\r\n\t\t *    DOM elements that correspond to the data represented by the\r\n\t\t *    respective virtual element\r\n\t\t * - in order to support attaching `nodes` as a property of `cached`,\r\n\t\t *    `cached` is *always* a non-primitive object, i.e. if the data was\r\n\t\t *    a string, then cached is a String instance. If data was `null` or\r\n\t\t *    `undefined`, cached is `new String(\"\")`\r\n\t\t * - `cached also has a `configContext` property, which is the state\r\n\t\t *    storage object exposed by config(element, isInitialized, context)\r\n\t\t * - when `cached` is an Object, it represents a virtual element; when\r\n\t\t *    it's an Array, it represents a list of elements; when it's a\r\n\t\t *    String, Number or Boolean, it represents a text node\r\n\t\t *\r\n\t\t * `parentElement` is a DOM element used for W3C DOM API calls\r\n\t\t * `parentTag` is only used for handling a corner case for textarea\r\n\t\t * values\r\n\t\t * `parentCache` is used to remove nodes in some multi-node cases\r\n\t\t * `parentIndex` and `index` are used to figure out the offset of nodes.\r\n\t\t * They're artifacts from before arrays started being flattened and are\r\n\t\t * likely refactorable\r\n\t\t * `data` and `cached` are, respectively, the new and old nodes being\r\n\t\t * diffed\r\n\t\t * `shouldReattach` is a flag indicating whether a parent node was\r\n\t\t * recreated (if so, and if this node is reused, then this node must\r\n\t\t * reattach itself to the new parent)\r\n\t\t * `editable` is a flag that indicates whether an ancestor is\r\n\t\t * contenteditable\r\n\t\t * `namespace` indicates the closest HTML namespace as it cascades down\r\n\t\t * from an ancestor\r\n\t\t * `configs` is a list of config functions to run after the topmost\r\n\t\t * `build` call finishes running\r\n\t\t *\r\n\t\t * there's logic that relies on the assumption that null and undefined\r\n\t\t * data are equivalent to empty strings\r\n\t\t * - this prevents lifecycle surprises from procedural helpers that mix\r\n\t\t *   implicit and explicit return statements (e.g.\r\n\t\t *   function foo() {if (cond) return m(\"div\")}\r\n\t\t * - it simplifies diffing code\r\n\t\t */\r\n\t\tdata = dataToString(data)\r\n\t\tif (data.subtree === \"retain\") return cached\r\n\t\tcached = makeCache(data, cached, index, parentIndex, parentCache)\r\n\r\n\t\tif (isArray(data)) {\r\n\t\t\treturn buildArray(\r\n\t\t\t\tdata,\r\n\t\t\t\tcached,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tindex,\r\n\t\t\t\tparentTag,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\teditable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else if (data != null && isObject(data)) {\r\n\t\t\treturn buildObject(\r\n\t\t\t\tdata,\r\n\t\t\t\tcached,\r\n\t\t\t\teditable,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tindex,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else if (!isFunction(data)) {\r\n\t\t\treturn handleTextNode(\r\n\t\t\t\tcached,\r\n\t\t\t\tdata,\r\n\t\t\t\tindex,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\teditable,\r\n\t\t\t\tparentTag)\r\n\t\t} else {\r\n\t\t\treturn cached\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sortChanges(a, b) {\r\n\t\treturn a.action - b.action || a.index - b.index\r\n\t}\r\n\r\n\tfunction copyStyleAttrs(node, dataAttr, cachedAttr) {\r\n\t\tif (cachedAttr === dataAttr) {\r\n\t\t\tnode.style = \"\"\r\n\t\t\tcachedAttr = {}\r\n\t\t}\r\n\t\tfor (var rule in dataAttr) {\r\n\t\t\tif (hasOwn.call(dataAttr, rule)) {\r\n\t\t\t\tif (cachedAttr == null || cachedAttr[rule] !== dataAttr[rule]) {\r\n\t\t\t\t\tnode.style[rule] = dataAttr[rule]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (rule in cachedAttr) {\r\n\t\t\tif (hasOwn.call(cachedAttr, rule)) {\r\n\t\t\t\tif (!hasOwn.call(dataAttr, rule)) node.style[rule] = \"\"\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar shouldUseSetAttribute = {\r\n\t\tlist: 1,\r\n\t\tstyle: 1,\r\n\t\tform: 1,\r\n\t\ttype: 1,\r\n\t\twidth: 1,\r\n\t\theight: 1\r\n\t}\r\n\r\n\tfunction setSingleAttr(\r\n\t\tnode,\r\n\t\tattrName,\r\n\t\tdataAttr,\r\n\t\tcachedAttr,\r\n\t\ttag,\r\n\t\tnamespace\r\n\t) {\r\n\t\tif (attrName === \"config\" || attrName === \"key\") {\r\n\t\t\t// `config` isn't a real attribute, so ignore it\r\n\t\t\treturn true\r\n\t\t} else if (isFunction(dataAttr) && attrName.slice(0, 2) === \"on\") {\r\n\t\t\t// hook event handlers to the auto-redrawing system\r\n\t\t\tnode[attrName] = autoredraw(dataAttr, node)\r\n\t\t} else if (attrName === \"style\" && dataAttr != null &&\r\n\t\t\t\tisObject(dataAttr)) {\r\n\t\t\t// handle `style: {...}`\r\n\t\t\tcopyStyleAttrs(node, dataAttr, cachedAttr)\r\n\t\t} else if (namespace != null) {\r\n\t\t\t// handle SVG\r\n\t\t\tif (attrName === \"href\") {\r\n\t\t\t\tnode.setAttributeNS(\"http://www.w3.org/1999/xlink\",\r\n\t\t\t\t\t\"href\", dataAttr)\r\n\t\t\t} else {\r\n\t\t\t\tnode.setAttribute(\r\n\t\t\t\t\tattrName === \"className\" ? \"class\" : attrName,\r\n\t\t\t\t\tdataAttr)\r\n\t\t\t}\r\n\t\t} else if (attrName in node && !shouldUseSetAttribute[attrName]) {\r\n\t\t\t// handle cases that are properties (but ignore cases where we\r\n\t\t\t// should use setAttribute instead)\r\n\t\t\t//\r\n\t\t\t// - list and form are typically used as strings, but are DOM\r\n\t\t\t//   element references in js\r\n\t\t\t//\r\n\t\t\t// - when using CSS selectors (e.g. `m(\"[style='']\")`), style is\r\n\t\t\t//   used as a string, but it's an object in js\r\n\t\t\t//\r\n\t\t\t// #348 don't set the value if not needed - otherwise, cursor\r\n\t\t\t// placement breaks in Chrome\r\n\t\t\t// #1252 likewise when `contenteditable` is set on an element.\r\n\t\t\ttry {\r\n\t\t\t\tif (\r\n\t\t\t\t\ttag !== \"input\" && !node.isContentEditable ||\r\n\t\t\t\t\tnode[attrName] != dataAttr // eslint-disable-line eqeqeq\r\n\t\t\t\t) {\r\n\t\t\t\t\tnode[attrName] = dataAttr\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tnode.setAttribute(attrName, dataAttr)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tnode.setAttribute(attrName, dataAttr)\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// IE8 doesn't allow change input attributes and throws\r\n\t\t\t\t// an exception. Unfortunately it cannot be handled, because\r\n\t\t\t\t// error code is not informative.\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction trySetAttr(\r\n\t\tnode,\r\n\t\tattrName,\r\n\t\tdataAttr,\r\n\t\tcachedAttr,\r\n\t\tcachedAttrs,\r\n\t\ttag,\r\n\t\tnamespace\r\n\t) {\r\n\t\tif (!(attrName in cachedAttrs) ||\r\n\t\t\t\t(cachedAttr !== dataAttr) ||\r\n\t\t\t\ttypeof dataAttr === \"object\" ||\r\n\t\t\t\t($document.activeElement === node)) {\r\n\t\t\tcachedAttrs[attrName] = dataAttr\r\n\t\t\ttry {\r\n\t\t\t\treturn setSingleAttr(\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\tattrName,\r\n\t\t\t\t\tdataAttr,\r\n\t\t\t\t\tcachedAttr,\r\n\t\t\t\t\ttag,\r\n\t\t\t\t\tnamespace)\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// swallow IE's invalid argument errors to mimic HTML's\r\n\t\t\t\t// fallback-to-doing-nothing-on-invalid-attributes behavior\r\n\t\t\t\tif (e.message.indexOf(\"Invalid argument\") < 0) throw e\r\n\t\t\t}\r\n\t\t} else if (attrName === \"value\" && tag === \"input\" &&\r\n\t\t\t\t\t\t\t\t/* eslint-disable eqeqeq */\r\n\t\t\t\t\t\t\t\tnode.value != dataAttr) {\r\n\t\t\t\t\t\t\t\t// #348 dataAttr may not be a string,\r\n\t\t\t\t\t\t\t\t// so use loose comparison\r\n\t\t\t\t\t\t\t\t/* eslint-enable eqeqeq */\r\n\t\t\tnode.value = dataAttr\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setAttributes(node, tag, dataAttrs, cachedAttrs, namespace) {\r\n\t\tfor (var attrName in dataAttrs) {\r\n\t\t\tif (hasOwn.call(dataAttrs, attrName)) {\r\n\t\t\t\tif (trySetAttr(\r\n\t\t\t\t\t\tnode,\r\n\t\t\t\t\t\tattrName,\r\n\t\t\t\t\t\tdataAttrs[attrName],\r\n\t\t\t\t\t\tcachedAttrs[attrName],\r\n\t\t\t\t\t\tcachedAttrs,\r\n\t\t\t\t\t\ttag,\r\n\t\t\t\t\t\tnamespace)) {\r\n\t\t\t\t\tcontinue\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cachedAttrs\r\n\t}\r\n\r\n\tfunction clear(nodes, cached) {\r\n\t\tfor (var i = nodes.length - 1; i > -1; i--) {\r\n\t\t\tif (nodes[i] && nodes[i].parentNode) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tnodes[i].parentNode.removeChild(nodes[i])\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t/* eslint-disable max-len */\r\n\t\t\t\t\t// ignore if this fails due to order of events (see\r\n\t\t\t\t\t// http://stackoverflow.com/questions/21926083/failed-to-execute-removechild-on-node)\r\n\t\t\t\t\t/* eslint-enable max-len */\r\n\t\t\t\t}\r\n\t\t\t\tcached = [].concat(cached)\r\n\t\t\t\tif (cached[i]) unload(cached[i])\r\n\t\t\t}\r\n\t\t}\r\n\t\t// release memory if nodes is an array. This check should fail if nodes\r\n\t\t// is a NodeList (see loop above)\r\n\t\tif (nodes.length) {\r\n\t\t\tnodes.length = 0\r\n\t\t}\r\n\t}\r\n\r\n\tfunction unload(cached) {\r\n\t\tif (cached.configContext && isFunction(cached.configContext.onunload)) {\r\n\t\t\tcached.configContext.onunload()\r\n\t\t\tcached.configContext.onunload = null\r\n\t\t}\r\n\t\tif (cached.controllers) {\r\n\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\tif (isFunction(controller.onunload)) {\r\n\t\t\t\t\tcontroller.onunload({preventDefault: noop})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (cached.children) {\r\n\t\t\tif (isArray(cached.children)) forEach(cached.children, unload)\r\n\t\t\telse if (cached.children.tag) unload(cached.children)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction appendTextFragment(parentElement, data) {\r\n\t\ttry {\r\n\t\t\tparentElement.appendChild(\r\n\t\t\t\t$document.createRange().createContextualFragment(data))\r\n\t\t} catch (e) {\r\n\t\t\tparentElement.insertAdjacentHTML(\"beforeend\", data)\r\n\t\t\treplaceScriptNodes(parentElement)\r\n\t\t}\r\n\t}\r\n\r\n\t// Replace script tags inside given DOM element with executable ones.\r\n\t// Will also check children recursively and replace any found script\r\n\t// tags in same manner.\r\n\tfunction replaceScriptNodes(node) {\r\n\t\tif (node.tagName === \"SCRIPT\") {\r\n\t\t\tnode.parentNode.replaceChild(buildExecutableNode(node), node)\r\n\t\t} else {\r\n\t\t\tvar children = node.childNodes\r\n\t\t\tif (children && children.length) {\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\treplaceScriptNodes(children[i])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn node\r\n\t}\r\n\r\n\t// Replace script element with one whose contents are executable.\r\n\tfunction buildExecutableNode(node){\r\n\t\tvar scriptEl = document.createElement(\"script\")\r\n\t\tvar attrs = node.attributes\r\n\r\n\t\tfor (var i = 0; i < attrs.length; i++) {\r\n\t\t\tscriptEl.setAttribute(attrs[i].name, attrs[i].value)\r\n\t\t}\r\n\r\n\t\tscriptEl.text = node.innerHTML\r\n\t\treturn scriptEl\r\n\t}\r\n\r\n\tfunction injectHTML(parentElement, index, data) {\r\n\t\tvar nextSibling = parentElement.childNodes[index]\r\n\t\tif (nextSibling) {\r\n\t\t\tvar isElement = nextSibling.nodeType !== 1\r\n\t\t\tvar placeholder = $document.createElement(\"span\")\r\n\t\t\tif (isElement) {\r\n\t\t\t\tparentElement.insertBefore(placeholder, nextSibling || null)\r\n\t\t\t\tplaceholder.insertAdjacentHTML(\"beforebegin\", data)\r\n\t\t\t\tparentElement.removeChild(placeholder)\r\n\t\t\t} else {\r\n\t\t\t\tnextSibling.insertAdjacentHTML(\"beforebegin\", data)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tappendTextFragment(parentElement, data)\r\n\t\t}\r\n\r\n\t\tvar nodes = []\r\n\r\n\t\twhile (parentElement.childNodes[index] !== nextSibling) {\r\n\t\t\tnodes.push(parentElement.childNodes[index])\r\n\t\t\tindex++\r\n\t\t}\r\n\r\n\t\treturn nodes\r\n\t}\r\n\r\n\tfunction autoredraw(callback, object) {\r\n\t\treturn function (e) {\r\n\t\t\te = e || event\r\n\t\t\tm.redraw.strategy(\"diff\")\r\n\t\t\tm.startComputation()\r\n\t\t\ttry {\r\n\t\t\t\treturn callback.call(object, e)\r\n\t\t\t} finally {\r\n\t\t\t\tendFirstComputation()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar html\r\n\tvar documentNode = {\r\n\t\tappendChild: function (node) {\r\n\t\t\tif (html === undefined) html = $document.createElement(\"html\")\r\n\t\t\tif ($document.documentElement &&\r\n\t\t\t\t\t$document.documentElement !== node) {\r\n\t\t\t\t$document.replaceChild(node, $document.documentElement)\r\n\t\t\t} else {\r\n\t\t\t\t$document.appendChild(node)\r\n\t\t\t}\r\n\r\n\t\t\tthis.childNodes = $document.childNodes\r\n\t\t},\r\n\r\n\t\tinsertBefore: function (node) {\r\n\t\t\tthis.appendChild(node)\r\n\t\t},\r\n\r\n\t\tchildNodes: []\r\n\t}\r\n\r\n\tvar nodeCache = []\r\n\tvar cellCache = {}\r\n\r\n\tm.render = function (root, cell, forceRecreation) {\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error(\"Ensure the DOM element being passed to \" +\r\n\t\t\t\t\"m.route/m.mount/m.render is not undefined.\")\r\n\t\t}\r\n\t\tvar configs = []\r\n\t\tvar id = getCellCacheKey(root)\r\n\t\tvar isDocumentRoot = root === $document\r\n\t\tvar node\r\n\r\n\t\tif (isDocumentRoot || root === $document.documentElement) {\r\n\t\t\tnode = documentNode\r\n\t\t} else {\r\n\t\t\tnode = root\r\n\t\t}\r\n\r\n\t\tif (isDocumentRoot && cell.tag !== \"html\") {\r\n\t\t\tcell = {tag: \"html\", attrs: {}, children: cell}\r\n\t\t}\r\n\r\n\t\tif (cellCache[id] === undefined) clear(node.childNodes)\r\n\t\tif (forceRecreation === true) reset(root)\r\n\r\n\t\tcellCache[id] = build(\r\n\t\t\tnode,\r\n\t\t\tnull,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tcell,\r\n\t\t\tcellCache[id],\r\n\t\t\tfalse,\r\n\t\t\t0,\r\n\t\t\tnull,\r\n\t\t\tundefined,\r\n\t\t\tconfigs)\r\n\r\n\t\tforEach(configs, function (config) { config() })\r\n\t}\r\n\r\n\tfunction getCellCacheKey(element) {\r\n\t\tvar index = nodeCache.indexOf(element)\r\n\t\treturn index < 0 ? nodeCache.push(element) - 1 : index\r\n\t}\r\n\r\n\tm.trust = function (value) {\r\n\t\tvalue = new String(value) // eslint-disable-line no-new-wrappers\r\n\t\tvalue.$trusted = true\r\n\t\treturn value\r\n\t}\r\n\r\n\tfunction gettersetter(store) {\r\n\t\tfunction prop() {\r\n\t\t\tif (arguments.length) store = arguments[0]\r\n\t\t\treturn store\r\n\t\t}\r\n\r\n\t\tprop.toJSON = function () {\r\n\t\t\tif (store && isFunction(store.toJSON)) return store.toJSON()\r\n\t\t\treturn store\r\n\t\t}\r\n\r\n\t\treturn prop\r\n\t}\r\n\r\n\tm.prop = function (store) {\r\n\t\tif ((store != null && (isObject(store) || isFunction(store)) ||\r\n\t\t\t\t\t((typeof Promise !== \"undefined\") &&\r\n\t\t\t\t\t\t(store instanceof Promise))) &&\r\n\t\t\t\tisFunction(store.then)) {\r\n\t\t\treturn propify(store)\r\n\t\t}\r\n\r\n\t\treturn gettersetter(store)\r\n\t}\r\n\r\n\tvar roots = []\r\n\tvar components = []\r\n\tvar controllers = []\r\n\tvar lastRedrawId = null\r\n\tvar lastRedrawCallTime = 0\r\n\tvar computePreRedrawHook = null\r\n\tvar computePostRedrawHook = null\r\n\tvar topComponent\r\n\tvar FRAME_BUDGET = 16 // 60 frames per second = 1 call per 16 ms\r\n\r\n\tfunction parameterize(component, args) {\r\n\t\tfunction controller() {\r\n\t\t\t/* eslint-disable no-invalid-this */\r\n\t\t\treturn (component.controller || noop).apply(this, args) || this\r\n\t\t\t/* eslint-enable no-invalid-this */\r\n\t\t}\r\n\r\n\t\tif (component.controller) {\r\n\t\t\tcontroller.prototype = component.controller.prototype\r\n\t\t}\r\n\r\n\t\tfunction view(ctrl) {\r\n\t\t\tvar currentArgs = [ctrl].concat(args)\r\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\r\n\t\t\t\tcurrentArgs.push(arguments[i])\r\n\t\t\t}\r\n\r\n\t\t\treturn component.view.apply(component, currentArgs)\r\n\t\t}\r\n\r\n\t\tview.$original = component.view\r\n\t\tvar output = {controller: controller, view: view}\r\n\t\tif (args[0] && args[0].key != null) output.attrs = {key: args[0].key}\r\n\t\treturn output\r\n\t}\r\n\r\n\tm.component = function (component) {\r\n\t\tvar args = new Array(arguments.length - 1)\r\n\r\n\t\tfor (var i = 1; i < arguments.length; i++) {\r\n\t\t\targs[i - 1] = arguments[i]\r\n\t\t}\r\n\r\n\t\treturn parameterize(component, args)\r\n\t}\r\n\r\n\tvar currentRoute, previousRoute\r\n\r\n\tfunction checkPrevented(component, root, index, isPrevented) {\r\n\t\tif (!isPrevented) {\r\n\t\t\tm.redraw.strategy(\"all\")\r\n\t\t\tm.startComputation()\r\n\t\t\troots[index] = root\r\n\t\t\tvar currentComponent\r\n\r\n\t\t\tif (component) {\r\n\t\t\t\tcurrentComponent = topComponent = component\r\n\t\t\t} else {\r\n\t\t\t\tcurrentComponent = topComponent = component = {controller: noop}\r\n\t\t\t}\r\n\r\n\t\t\tvar controller = new (component.controller || noop)()\r\n\r\n\t\t\t// controllers may call m.mount recursively (via m.route redirects,\r\n\t\t\t// for example)\r\n\t\t\t// this conditional ensures only the last recursive m.mount call is\r\n\t\t\t// applied\r\n\t\t\tif (currentComponent === topComponent) {\r\n\t\t\t\tcontrollers[index] = controller\r\n\t\t\t\tcomponents[index] = component\r\n\t\t\t}\r\n\t\t\tendFirstComputation()\r\n\t\t\tif (component === null) {\r\n\t\t\t\tremoveRootElement(root, index)\r\n\t\t\t}\r\n\t\t\treturn controllers[index]\r\n\t\t} else {\r\n\t\t\tif (component == null) {\r\n\t\t\t\tremoveRootElement(root, index)\r\n\t\t\t}\r\n\r\n\t\t\tif (previousRoute) {\r\n\t\t\t\tcurrentRoute = previousRoute\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tm.mount = m.module = function (root, component) {\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error(\"Ensure the DOM element being passed to \" +\r\n\t\t\t\t\"m.route/m.mount/m.render is not undefined.\")\r\n\t\t}\r\n\r\n\t\tvar index = roots.indexOf(root)\r\n\t\tif (index < 0) index = roots.length\r\n\r\n\t\tvar isPrevented = false\r\n\t\tvar event = {\r\n\t\t\tpreventDefault: function () {\r\n\t\t\t\tisPrevented = true\r\n\t\t\t\tcomputePreRedrawHook = computePostRedrawHook = null\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tforEach(unloaders, function (unloader) {\r\n\t\t\tunloader.handler.call(unloader.controller, event)\r\n\t\t\tunloader.controller.onunload = null\r\n\t\t})\r\n\r\n\t\tif (isPrevented) {\r\n\t\t\tforEach(unloaders, function (unloader) {\r\n\t\t\t\tunloader.controller.onunload = unloader.handler\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tunloaders = []\r\n\t\t}\r\n\r\n\t\tif (controllers[index] && isFunction(controllers[index].onunload)) {\r\n\t\t\tcontrollers[index].onunload(event)\r\n\t\t}\r\n\r\n\t\treturn checkPrevented(component, root, index, isPrevented)\r\n\t}\r\n\r\n\tfunction removeRootElement(root, index) {\r\n\t\troots.splice(index, 1)\r\n\t\tcontrollers.splice(index, 1)\r\n\t\tcomponents.splice(index, 1)\r\n\t\treset(root)\r\n\t\tnodeCache.splice(getCellCacheKey(root), 1)\r\n\t\tunloaders = []\r\n\t}\r\n\r\n\tvar redrawing = false\r\n\tm.redraw = function (force) {\r\n\t\tif (redrawing) return\r\n\t\tredrawing = true\r\n\t\tif (force) forcing = true\r\n\r\n\t\ttry {\r\n\t\t\t// lastRedrawId is a positive number if a second redraw is requested\r\n\t\t\t// before the next animation frame\r\n\t\t\t// lastRedrawId is null if it's the first redraw and not an event\r\n\t\t\t// handler\r\n\t\t\tif (lastRedrawId && !force) {\r\n\t\t\t\t// when setTimeout: only reschedule redraw if time between now\r\n\t\t\t\t// and previous redraw is bigger than a frame, otherwise keep\r\n\t\t\t\t// currently scheduled timeout\r\n\t\t\t\t// when rAF: always reschedule redraw\r\n\t\t\t\tif ($requestAnimationFrame === global.requestAnimationFrame ||\r\n\t\t\t\t\t\tnew Date() - lastRedrawCallTime > FRAME_BUDGET) {\r\n\t\t\t\t\tif (lastRedrawId > 0) $cancelAnimationFrame(lastRedrawId)\r\n\t\t\t\t\tlastRedrawId = $requestAnimationFrame(redraw, FRAME_BUDGET)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tredraw()\r\n\t\t\t\tlastRedrawId = $requestAnimationFrame(function () {\r\n\t\t\t\t\tlastRedrawId = null\r\n\t\t\t\t}, FRAME_BUDGET)\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tredrawing = forcing = false\r\n\t\t}\r\n\t}\r\n\r\n\tm.redraw.strategy = m.prop()\r\n\tfunction redraw() {\r\n\t\tif (computePreRedrawHook) {\r\n\t\t\tcomputePreRedrawHook()\r\n\t\t\tcomputePreRedrawHook = null\r\n\t\t}\r\n\t\tforEach(roots, function (root, i) {\r\n\t\t\tvar component = components[i]\r\n\t\t\tif (controllers[i]) {\r\n\t\t\t\tvar args = [controllers[i]]\r\n\t\t\t\tm.render(root,\r\n\t\t\t\t\tcomponent.view ? component.view(controllers[i], args) : \"\")\r\n\t\t\t}\r\n\t\t})\r\n\t\t// after rendering within a routed context, we need to scroll back to\r\n\t\t// the top, and fetch the document title for history.pushState\r\n\t\tif (computePostRedrawHook) {\r\n\t\t\tcomputePostRedrawHook()\r\n\t\t\tcomputePostRedrawHook = null\r\n\t\t}\r\n\t\tlastRedrawId = null\r\n\t\tlastRedrawCallTime = new Date()\r\n\t\tm.redraw.strategy(\"diff\")\r\n\t}\r\n\r\n\tfunction endFirstComputation() {\r\n\t\tif (m.redraw.strategy() === \"none\") {\r\n\t\t\tpendingRequests--\r\n\t\t\tm.redraw.strategy(\"diff\")\r\n\t\t} else {\r\n\t\t\tm.endComputation()\r\n\t\t}\r\n\t}\r\n\r\n\tm.withAttr = function (prop, withAttrCallback, callbackThis) {\r\n\t\treturn function (e) {\r\n\t\t\te = e || window.event\r\n\t\t\t/* eslint-disable no-invalid-this */\r\n\t\t\tvar currentTarget = e.currentTarget || this\r\n\t\t\tvar _this = callbackThis || this\r\n\t\t\t/* eslint-enable no-invalid-this */\r\n\t\t\tvar target = prop in currentTarget ?\r\n\t\t\t\tcurrentTarget[prop] :\r\n\t\t\t\tcurrentTarget.getAttribute(prop)\r\n\t\t\twithAttrCallback.call(_this, target)\r\n\t\t}\r\n\t}\r\n\r\n\t// routing\r\n\tvar modes = {pathname: \"\", hash: \"#\", search: \"?\"}\r\n\tvar redirect = noop\r\n\tvar isDefaultRoute = false\r\n\tvar routeParams\r\n\r\n\tm.route = function (root, arg1, arg2, vdom) { // eslint-disable-line\r\n\t\t// m.route()\r\n\t\tif (arguments.length === 0) return currentRoute\r\n\t\t// m.route(el, defaultRoute, routes)\r\n\t\tif (arguments.length === 3 && isString(arg1)) {\r\n\t\t\tredirect = function (source) {\r\n\t\t\t\tvar path = currentRoute = normalizeRoute(source)\r\n\t\t\t\tif (!routeByValue(root, arg2, path)) {\r\n\t\t\t\t\tif (isDefaultRoute) {\r\n\t\t\t\t\t\tthrow new Error(\"Ensure the default route matches \" +\r\n\t\t\t\t\t\t\t\"one of the routes defined in m.route\")\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tisDefaultRoute = true\r\n\t\t\t\t\tm.route(arg1, true)\r\n\t\t\t\t\tisDefaultRoute = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar listener = m.route.mode === \"hash\" ?\r\n\t\t\t\t\"onhashchange\" :\r\n\t\t\t\t\"onpopstate\"\r\n\r\n\t\t\tglobal[listener] = function () {\r\n\t\t\t\tvar path = $location[m.route.mode]\r\n\t\t\t\tif (m.route.mode === \"pathname\") path += $location.search\r\n\t\t\t\tif (currentRoute !== normalizeRoute(path)) redirect(path)\r\n\t\t\t}\r\n\r\n\t\t\tcomputePreRedrawHook = setScroll\r\n\t\t\tglobal[listener]()\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// config: m.route\r\n\t\tif (root.addEventListener || root.attachEvent) {\r\n\t\t\tvar base = m.route.mode !== \"pathname\" ? $location.pathname : \"\"\r\n\t\t\troot.href = base + modes[m.route.mode] + vdom.attrs.href\r\n\t\t\tif (root.addEventListener) {\r\n\t\t\t\troot.removeEventListener(\"click\", routeUnobtrusive)\r\n\t\t\t\troot.addEventListener(\"click\", routeUnobtrusive)\r\n\t\t\t} else {\r\n\t\t\t\troot.detachEvent(\"onclick\", routeUnobtrusive)\r\n\t\t\t\troot.attachEvent(\"onclick\", routeUnobtrusive)\r\n\t\t\t}\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// m.route(route, params, shouldReplaceHistoryEntry)\r\n\t\tif (isString(root)) {\r\n\t\t\tpreviousRoute = currentRoute\r\n\t\t\tcurrentRoute = root\r\n\r\n\t\t\tvar args = arg1 || {}\r\n\t\t\tvar queryIndex = currentRoute.indexOf(\"?\")\r\n\t\t\tvar params\r\n\r\n\t\t\tif (queryIndex > -1) {\r\n\t\t\t\tparams = parseQueryString(currentRoute.slice(queryIndex + 1))\r\n\t\t\t} else {\r\n\t\t\t\tparams = {}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i in args) {\r\n\t\t\t\tif (hasOwn.call(args, i)) {\r\n\t\t\t\t\tparams[i] = args[i]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar querystring = buildQueryString(params)\r\n\t\t\tvar currentPath\r\n\r\n\t\t\tif (queryIndex > -1) {\r\n\t\t\t\tcurrentPath = currentRoute.slice(0, queryIndex)\r\n\t\t\t} else {\r\n\t\t\t\tcurrentPath = currentRoute\r\n\t\t\t}\r\n\r\n\t\t\tif (querystring) {\r\n\t\t\t\tcurrentRoute = currentPath +\r\n\t\t\t\t\t(currentPath.indexOf(\"?\") === -1 ? \"?\" : \"&\") +\r\n\t\t\t\t\tquerystring\r\n\t\t\t}\r\n\r\n\t\t\tvar replaceHistory =\r\n\t\t\t\t(arguments.length === 3 ? arg2 : arg1) === true ||\r\n\t\t\t\tpreviousRoute === currentRoute\r\n\r\n\t\t\tif (global.history.pushState) {\r\n\t\t\t\tvar method = replaceHistory ? \"replaceState\" : \"pushState\"\r\n\t\t\t\tcomputePreRedrawHook = setScroll\r\n\t\t\t\tcomputePostRedrawHook = function () {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tglobal.history[method](null, $document.title,\r\n\t\t\t\t\t\t\tmodes[m.route.mode] + currentRoute)\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t// In the event of a pushState or replaceState failure,\r\n\t\t\t\t\t\t// fallback to a standard redirect. This is specifically\r\n\t\t\t\t\t\t// to address a Safari security error when attempting to\r\n\t\t\t\t\t\t// call pushState more than 100 times.\r\n\t\t\t\t\t\t$location[m.route.mode] = currentRoute\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute)\r\n\t\t\t} else {\r\n\t\t\t\t$location[m.route.mode] = currentRoute\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute)\r\n\t\t\t}\r\n\r\n\t\t\tpreviousRoute = null\r\n\t\t}\r\n\t}\r\n\r\n\tm.route.param = function (key) {\r\n\t\tif (!routeParams) {\r\n\t\t\tthrow new Error(\"You must call m.route(element, defaultRoute, \" +\r\n\t\t\t\t\"routes) before calling m.route.param()\")\r\n\t\t}\r\n\r\n\t\tif (!key) {\r\n\t\t\treturn routeParams\r\n\t\t}\r\n\r\n\t\treturn routeParams[key]\r\n\t}\r\n\r\n\tm.route.mode = \"search\"\r\n\r\n\tfunction normalizeRoute(route) {\r\n\t\treturn route.slice(modes[m.route.mode].length)\r\n\t}\r\n\r\n\tfunction routeByValue(root, router, path) {\r\n\t\trouteParams = {}\r\n\r\n\t\tvar queryStart = path.indexOf(\"?\")\r\n\t\tif (queryStart !== -1) {\r\n\t\t\trouteParams = parseQueryString(\r\n\t\t\t\tpath.substr(queryStart + 1, path.length))\r\n\t\t\tpath = path.substr(0, queryStart)\r\n\t\t}\r\n\r\n\t\t// Get all routes and check if there's\r\n\t\t// an exact match for the current path\r\n\t\tvar keys = Object.keys(router)\r\n\t\tvar index = keys.indexOf(path)\r\n\r\n\t\tif (index !== -1){\r\n\t\t\tm.mount(root, router[keys [index]])\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tfor (var route in router) {\r\n\t\t\tif (hasOwn.call(router, route)) {\r\n\t\t\t\tif (route === path) {\r\n\t\t\t\t\tm.mount(root, router[route])\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar matcher = new RegExp(\"^\" + route\r\n\t\t\t\t\t.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\")\r\n\t\t\t\t\t.replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\r\n\r\n\t\t\t\tif (matcher.test(path)) {\r\n\t\t\t\t\t/* eslint-disable no-loop-func */\r\n\t\t\t\t\tpath.replace(matcher, function () {\r\n\t\t\t\t\t\tvar keys = route.match(/:[^\\/]+/g) || []\r\n\t\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\r\n\t\t\t\t\t\tforEach(keys, function (key, i) {\r\n\t\t\t\t\t\t\trouteParams[key.replace(/:|\\./g, \"\")] =\r\n\t\t\t\t\t\t\t\tdecodeURIComponent(values[i])\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tm.mount(root, router[route])\r\n\t\t\t\t\t})\r\n\t\t\t\t\t/* eslint-enable no-loop-func */\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction routeUnobtrusive(e) {\r\n\t\te = e || event\r\n\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\r\n\r\n\t\tif (e.preventDefault) {\r\n\t\t\te.preventDefault()\r\n\t\t} else {\r\n\t\t\te.returnValue = false\r\n\t\t}\r\n\r\n\t\tvar currentTarget = e.currentTarget || e.srcElement\r\n\t\tvar args\r\n\r\n\t\tif (m.route.mode === \"pathname\" && currentTarget.search) {\r\n\t\t\targs = parseQueryString(currentTarget.search.slice(1))\r\n\t\t} else {\r\n\t\t\targs = {}\r\n\t\t}\r\n\r\n\t\twhile (currentTarget && !/a/i.test(currentTarget.nodeName)) {\r\n\t\t\tcurrentTarget = currentTarget.parentNode\r\n\t\t}\r\n\r\n\t\t// clear pendingRequests because we want an immediate route change\r\n\t\tpendingRequests = 0\r\n\t\tm.route(currentTarget[m.route.mode]\r\n\t\t\t.slice(modes[m.route.mode].length), args)\r\n\t}\r\n\r\n\tfunction setScroll() {\r\n\t\tif (m.route.mode !== \"hash\" && $location.hash) {\r\n\t\t\t$location.hash = $location.hash\r\n\t\t} else {\r\n\t\t\tglobal.scrollTo(0, 0)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildQueryString(object, prefix) {\r\n\t\tvar duplicates = {}\r\n\t\tvar str = []\r\n\r\n\t\tfor (var prop in object) {\r\n\t\t\tif (hasOwn.call(object, prop)) {\r\n\t\t\t\tvar key = prefix ? prefix + \"[\" + prop + \"]\" : prop\r\n\t\t\t\tvar value = object[prop]\r\n\r\n\t\t\t\tif (value === null) {\r\n\t\t\t\t\tstr.push(encodeURIComponent(key))\r\n\t\t\t\t} else if (isObject(value)) {\r\n\t\t\t\t\tstr.push(buildQueryString(value, key))\r\n\t\t\t\t} else if (isArray(value)) {\r\n\t\t\t\t\tvar keys = []\r\n\t\t\t\t\tduplicates[key] = duplicates[key] || {}\r\n\t\t\t\t\t/* eslint-disable no-loop-func */\r\n\t\t\t\t\tforEach(value, function (item) {\r\n\t\t\t\t\t\t/* eslint-enable no-loop-func */\r\n\t\t\t\t\t\tif (!duplicates[key][item]) {\r\n\t\t\t\t\t\t\tduplicates[key][item] = true\r\n\t\t\t\t\t\t\tkeys.push(encodeURIComponent(key) + \"=\" +\r\n\t\t\t\t\t\t\t\tencodeURIComponent(item))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tstr.push(keys.join(\"&\"))\r\n\t\t\t\t} else if (value !== undefined) {\r\n\t\t\t\t\tstr.push(encodeURIComponent(key) + \"=\" +\r\n\t\t\t\t\t\tencodeURIComponent(value))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn str.join(\"&\")\r\n\t}\r\n\r\n\tfunction parseQueryString(str) {\r\n\t\tif (str === \"\" || str == null) return {}\r\n\t\tif (str.charAt(0) === \"?\") str = str.slice(1)\r\n\r\n\t\tvar pairs = str.split(\"&\")\r\n\t\tvar params = {}\r\n\r\n\t\tforEach(pairs, function (string) {\r\n\t\t\tvar pair = string.split(\"=\")\r\n\t\t\tvar key = decodeURIComponent(pair[0])\r\n\t\t\tvar value = pair.length === 2 ? decodeURIComponent(pair[1]) : null\r\n\t\t\tif (params[key] != null) {\r\n\t\t\t\tif (!isArray(params[key])) params[key] = [params[key]]\r\n\t\t\t\tparams[key].push(value)\r\n\t\t\t} else params[key] = value\r\n\t\t})\r\n\r\n\t\treturn params\r\n\t}\r\n\r\n\tm.route.buildQueryString = buildQueryString\r\n\tm.route.parseQueryString = parseQueryString\r\n\r\n\tfunction reset(root) {\r\n\t\tvar cacheKey = getCellCacheKey(root)\r\n\t\tclear(root.childNodes, cellCache[cacheKey])\r\n\t\tcellCache[cacheKey] = undefined\r\n\t}\r\n\r\n\tm.deferred = function () {\r\n\t\tvar deferred = new Deferred()\r\n\t\tdeferred.promise = propify(deferred.promise)\r\n\t\treturn deferred\r\n\t}\r\n\r\n\tfunction propify(promise, initialValue) {\r\n\t\tvar prop = m.prop(initialValue)\r\n\t\tpromise.then(prop)\r\n\t\tprop.then = function (resolve, reject) {\r\n\t\t\treturn propify(promise.then(resolve, reject), initialValue)\r\n\t\t}\r\n\r\n\t\tprop[\"catch\"] = prop.then.bind(null, null)\r\n\t\treturn prop\r\n\t}\r\n\t// Promiz.mithril.js | Zolmeister | MIT\r\n\t// a modified version of Promiz.js, which does not conform to Promises/A+\r\n\t// for two reasons:\r\n\t//\r\n\t// 1) `then` callbacks are called synchronously (because setTimeout is too\r\n\t//    slow, and the setImmediate polyfill is too big\r\n\t//\r\n\t// 2) throwing subclasses of Error cause the error to be bubbled up instead\r\n\t//    of triggering rejection (because the spec does not account for the\r\n\t//    important use case of default browser error handling, i.e. message w/\r\n\t//    line number)\r\n\r\n\tvar RESOLVING = 1\r\n\tvar REJECTING = 2\r\n\tvar RESOLVED = 3\r\n\tvar REJECTED = 4\r\n\r\n\tfunction Deferred(onSuccess, onFailure) {\r\n\t\tvar self = this\r\n\t\tvar state = 0\r\n\t\tvar promiseValue = 0\r\n\t\tvar next = []\r\n\r\n\t\tself.promise = {}\r\n\r\n\t\tself.resolve = function (value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value\r\n\t\t\t\tstate = RESOLVING\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\r\n\t\t\treturn self\r\n\t\t}\r\n\r\n\t\tself.reject = function (value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value\r\n\t\t\t\tstate = REJECTING\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\r\n\t\t\treturn self\r\n\t\t}\r\n\r\n\t\tself.promise.then = function (onSuccess, onFailure) {\r\n\t\t\tvar deferred = new Deferred(onSuccess, onFailure)\r\n\r\n\t\t\tif (state === RESOLVED) {\r\n\t\t\t\tdeferred.resolve(promiseValue)\r\n\t\t\t} else if (state === REJECTED) {\r\n\t\t\t\tdeferred.reject(promiseValue)\r\n\t\t\t} else {\r\n\t\t\t\tnext.push(deferred)\r\n\t\t\t}\r\n\r\n\t\t\treturn deferred.promise\r\n\t\t}\r\n\r\n\t\tfunction finish(type) {\r\n\t\t\tstate = type || REJECTED\r\n\t\t\tnext.map(function (deferred) {\r\n\t\t\t\tif (state === RESOLVED) {\r\n\t\t\t\t\tdeferred.resolve(promiseValue)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdeferred.reject(promiseValue)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfunction thennable(then, success, failure, notThennable) {\r\n\t\t\tif (((promiseValue != null && isObject(promiseValue)) ||\r\n\t\t\t\t\tisFunction(promiseValue)) && isFunction(then)) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// count protects against abuse calls from spec checker\r\n\t\t\t\t\tvar count = 0\r\n\t\t\t\t\tthen.call(promiseValue, function (value) {\r\n\t\t\t\t\t\tif (count++) return\r\n\t\t\t\t\t\tpromiseValue = value\r\n\t\t\t\t\t\tsuccess()\r\n\t\t\t\t\t}, function (value) {\r\n\t\t\t\t\t\tif (count++) return\r\n\t\t\t\t\t\tpromiseValue = value\r\n\t\t\t\t\t\tfailure()\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\t\tpromiseValue = e\r\n\t\t\t\t\tfailure()\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnotThennable()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction fire() {\r\n\t\t\t// check if it's a thenable\r\n\t\t\tvar then\r\n\t\t\ttry {\r\n\t\t\t\tthen = promiseValue && promiseValue.then\r\n\t\t\t} catch (e) {\r\n\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\tpromiseValue = e\r\n\t\t\t\tstate = REJECTING\r\n\t\t\t\treturn fire()\r\n\t\t\t}\r\n\r\n\t\t\tif (state === REJECTING) {\r\n\t\t\t\tm.deferred.onerror(promiseValue)\r\n\t\t\t}\r\n\r\n\t\t\tthennable(then, function () {\r\n\t\t\t\tstate = RESOLVING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\tstate = REJECTING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (state === RESOLVING && isFunction(onSuccess)) {\r\n\t\t\t\t\t\tpromiseValue = onSuccess(promiseValue)\r\n\t\t\t\t\t} else if (state === REJECTING && isFunction(onFailure)) {\r\n\t\t\t\t\t\tpromiseValue = onFailure(promiseValue)\r\n\t\t\t\t\t\tstate = RESOLVING\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\t\tpromiseValue = e\r\n\t\t\t\t\treturn finish()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (promiseValue === self) {\r\n\t\t\t\t\tpromiseValue = TypeError()\r\n\t\t\t\t\tfinish()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthennable(then, function () {\r\n\t\t\t\t\t\tfinish(RESOLVED)\r\n\t\t\t\t\t}, finish, function () {\r\n\t\t\t\t\t\tfinish(state === RESOLVING && RESOLVED)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tm.deferred.onerror = function (e) {\r\n\t\tif (type.call(e) === \"[object Error]\" &&\r\n\t\t\t\t!/ Error/.test(e.constructor.toString())) {\r\n\t\t\tpendingRequests = 0\r\n\t\t\tthrow e\r\n\t\t}\r\n\t}\r\n\r\n\tm.sync = function (args) {\r\n\t\tvar deferred = m.deferred()\r\n\t\tvar outstanding = args.length\r\n\t\tvar results = []\r\n\t\tvar method = \"resolve\"\r\n\r\n\t\tfunction synchronizer(pos, resolved) {\r\n\t\t\treturn function (value) {\r\n\t\t\t\tresults[pos] = value\r\n\t\t\t\tif (!resolved) method = \"reject\"\r\n\t\t\t\tif (--outstanding === 0) {\r\n\t\t\t\t\tdeferred.promise(results)\r\n\t\t\t\t\tdeferred[method](results)\r\n\t\t\t\t}\r\n\t\t\t\treturn value\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (args.length > 0) {\r\n\t\t\tforEach(args, function (arg, i) {\r\n\t\t\t\targ.then(synchronizer(i, true), synchronizer(i, false))\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tdeferred.resolve([])\r\n\t\t}\r\n\r\n\t\treturn deferred.promise\r\n\t}\r\n\r\n\tfunction identity(value) { return value }\r\n\r\n\tfunction handleJsonp(options) {\r\n\t\tvar callbackKey = options.callbackName || \"mithril_callback_\" +\r\n\t\t\tnew Date().getTime() + \"_\" +\r\n\t\t\t(Math.round(Math.random() * 1e16)).toString(36)\r\n\r\n\t\tvar script = $document.createElement(\"script\")\r\n\r\n\t\tglobal[callbackKey] = function (resp) {\r\n\t\t\tscript.parentNode.removeChild(script)\r\n\t\t\toptions.onload({\r\n\t\t\t\ttype: \"load\",\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tresponseText: resp\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tglobal[callbackKey] = undefined\r\n\t\t}\r\n\r\n\t\tscript.onerror = function () {\r\n\t\t\tscript.parentNode.removeChild(script)\r\n\r\n\t\t\toptions.onerror({\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tstatus: 500,\r\n\t\t\t\t\tresponseText: JSON.stringify({\r\n\t\t\t\t\t\terror: \"Error making jsonp request\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tglobal[callbackKey] = undefined\r\n\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tscript.onload = function () {\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tscript.src = options.url +\r\n\t\t\t(options.url.indexOf(\"?\") > 0 ? \"&\" : \"?\") +\r\n\t\t\t(options.callbackKey ? options.callbackKey : \"callback\") +\r\n\t\t\t\"=\" + callbackKey +\r\n\t\t\t\"&\" + buildQueryString(options.data || {})\r\n\r\n\t\t$document.body.appendChild(script)\r\n\t}\r\n\r\n\tfunction createXhr(options) {\r\n\t\tvar xhr = new global.XMLHttpRequest()\r\n\t\txhr.open(options.method, options.url, true, options.user,\r\n\t\t\toptions.password)\r\n\r\n\t\txhr.onreadystatechange = function () {\r\n\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) {\r\n\t\t\t\t\toptions.onload({type: \"load\", target: xhr})\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptions.onerror({type: \"error\", target: xhr})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (options.serialize === JSON.stringify &&\r\n\t\t\t\toptions.data &&\r\n\t\t\t\toptions.method !== \"GET\") {\r\n\t\t\txhr.setRequestHeader(\"Content-Type\",\r\n\t\t\t\t\"application/json; charset=utf-8\")\r\n\t\t}\r\n\r\n\t\tif (options.deserialize === JSON.parse) {\r\n\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\r\n\t\t}\r\n\r\n\t\tif (isObject(options.headers)) {\r\n\t\t\tfor (var header in options.headers) {\r\n\t\t\t\tif (hasOwn.call(options.headers, header)) {\r\n\t\t\t\t\txhr.setRequestHeader(header, options.headers[header])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (isFunction(options.config)) {\r\n\t\t\tvar maybeXhr = options.config(xhr, options)\r\n\t\t\tif (maybeXhr != null) xhr = maybeXhr\r\n\t\t}\r\n\r\n\t\tvar data = options.method === \"GET\" || !options.data ? \"\" : options.data\r\n\r\n\t\tif (data && !isString(data) && data.constructor !== global.FormData) {\r\n\t\t\tthrow new Error(\"Request data should be either be a string or \" +\r\n\t\t\t\t\"FormData. Check the `serialize` option in `m.request`\")\r\n\t\t}\r\n\r\n\t\txhr.send(data)\r\n\t\treturn xhr\r\n\t}\r\n\r\n\tfunction ajax(options) {\r\n\t\tif (options.dataType && options.dataType.toLowerCase() === \"jsonp\") {\r\n\t\t\treturn handleJsonp(options)\r\n\t\t} else {\r\n\t\t\treturn createXhr(options)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction bindData(options, data, serialize) {\r\n\t\tif (options.method === \"GET\" && options.dataType !== \"jsonp\") {\r\n\t\t\tvar prefix = options.url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\r\n\t\t\tvar querystring = buildQueryString(data)\r\n\t\t\toptions.url += (querystring ? prefix + querystring : \"\")\r\n\t\t} else {\r\n\t\t\toptions.data = serialize(data)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parameterizeUrl(url, data) {\r\n\t\tif (data) {\r\n\t\t\turl = url.replace(/:[a-z]\\w+/gi, function (token){\r\n\t\t\t\tvar key = token.slice(1)\r\n\t\t\t\tvar value = data[key] || token\r\n\t\t\t\tdelete data[key]\r\n\t\t\t\treturn value\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn url\r\n\t}\r\n\r\n\tm.request = function (options) {\r\n\t\tif (options.background !== true) m.startComputation()\r\n\t\tvar deferred = new Deferred()\r\n\t\tvar isJSONP = options.dataType &&\r\n\t\t\toptions.dataType.toLowerCase() === \"jsonp\"\r\n\r\n\t\tvar serialize, deserialize, extract\r\n\r\n\t\tif (isJSONP) {\r\n\t\t\tserialize = options.serialize =\r\n\t\t\tdeserialize = options.deserialize = identity\r\n\r\n\t\t\textract = function (jsonp) { return jsonp.responseText }\r\n\t\t} else {\r\n\t\t\tserialize = options.serialize = options.serialize || JSON.stringify\r\n\r\n\t\t\tdeserialize = options.deserialize =\r\n\t\t\t\toptions.deserialize || JSON.parse\r\n\t\t\textract = options.extract || function (xhr) {\r\n\t\t\t\tif (xhr.responseText.length || deserialize !== JSON.parse) {\r\n\t\t\t\t\treturn xhr.responseText\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\toptions.method = (options.method || \"GET\").toUpperCase()\r\n\t\toptions.url = parameterizeUrl(options.url, options.data)\r\n\t\tbindData(options, options.data, serialize)\r\n\t\toptions.onload = options.onerror = function (ev) {\r\n\t\t\ttry {\r\n\t\t\t\tev = ev || event\r\n\t\t\t\tvar response = deserialize(extract(ev.target, options))\r\n\t\t\t\tif (ev.type === \"load\") {\r\n\t\t\t\t\tif (options.unwrapSuccess) {\r\n\t\t\t\t\t\tresponse = options.unwrapSuccess(response, ev.target)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isArray(response) && options.type) {\r\n\t\t\t\t\t\tforEach(response, function (res, i) {\r\n\t\t\t\t\t\t\tresponse[i] = new options.type(res)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (options.type) {\r\n\t\t\t\t\t\tresponse = new options.type(response)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeferred.resolve(response)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (options.unwrapError) {\r\n\t\t\t\t\t\tresponse = options.unwrapError(response, ev.target)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeferred.reject(response)\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tdeferred.reject(e)\r\n\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t} finally {\r\n\t\t\t\tif (options.background !== true) m.endComputation()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tajax(options)\r\n\t\tdeferred.promise = propify(deferred.promise, options.initialValue)\r\n\t\treturn deferred.promise\r\n\t}\r\n\r\n\treturn m\r\n}); // eslint-disable-line\r\n","// Robert Penner's easeInOutQuad\n\n// find the rest of his easing functions here: http://robertpenner.com/easing/\n// find them exported for ES6 consumption here: https://github.com/jaxgeller/ez.js\n\nvar easeInOutQuad = function easeInOutQuad(t, b, c, d) {\n  t /= d / 2;\n  if (t < 1) return c / 2 * t * t + b;\n  t--;\n  return -c / 2 * (t * (t - 2) - 1) + b;\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar jumper = function jumper() {\n  // private variable cache\n  // no variables are created during a jump, preventing memory leaks\n\n  var element = void 0; // element to scroll to                   (node)\n\n  var start = void 0; // where scroll starts                    (px)\n  var stop = void 0; // where scroll stops                     (px)\n\n  var offset = void 0; // adjustment from the stop position      (px)\n  var easing = void 0; // easing function                        (function)\n  var a11y = void 0; // accessibility support flag             (boolean)\n\n  var distance = void 0; // distance of scroll                     (px)\n  var duration = void 0; // scroll duration                        (ms)\n\n  var timeStart = void 0; // time scroll started                    (ms)\n  var timeElapsed = void 0; // time spent scrolling thus far          (ms)\n\n  var next = void 0; // next scroll position                   (px)\n\n  var callback = void 0; // to call when done scrolling            (function)\n\n  // scroll position helper\n\n  function location() {\n    return window.scrollY || window.pageYOffset;\n  }\n\n  // element offset helper\n\n  function top(element) {\n    return element.getBoundingClientRect().top + start;\n  }\n\n  // rAF loop helper\n\n  function loop(timeCurrent) {\n    // store time scroll started, if not started already\n    if (!timeStart) {\n      timeStart = timeCurrent;\n    }\n\n    // determine time spent scrolling so far\n    timeElapsed = timeCurrent - timeStart;\n\n    // calculate next scroll position\n    next = easing(timeElapsed, start, distance, duration);\n\n    // scroll to it\n    window.scrollTo(0, next);\n\n    // check progress\n    timeElapsed < duration ? window.requestAnimationFrame(loop) // continue scroll loop\n    : done(); // scrolling is done\n  }\n\n  // scroll finished helper\n\n  function done() {\n    // account for rAF time rounding inaccuracies\n    window.scrollTo(0, start + distance);\n\n    // if scrolling to an element, and accessibility is enabled\n    if (element && a11y) {\n      // add tabindex indicating programmatic focus\n      element.setAttribute('tabindex', '-1');\n\n      // focus the element\n      element.focus();\n    }\n\n    // if it exists, fire the callback\n    if (typeof callback === 'function') {\n      callback();\n    }\n\n    // reset time for next jump\n    timeStart = false;\n  }\n\n  // API\n\n  function jump(target) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    // resolve options, or use defaults\n    duration = options.duration || 1000;\n    offset = options.offset || 0;\n    callback = options.callback; // \"undefined\" is a suitable default, and won't be called\n    easing = options.easing || easeInOutQuad;\n    a11y = options.a11y || false;\n\n    // cache starting position\n    start = location();\n\n    // resolve target\n    switch (typeof target === 'undefined' ? 'undefined' : _typeof(target)) {\n      // scroll from current position\n      case 'number':\n        element = undefined; // no element to scroll to\n        a11y = false; // make sure accessibility is off\n        stop = start + target;\n        break;\n\n      // scroll to element (node)\n      // bounding rect is relative to the viewport\n      case 'object':\n        element = target;\n        stop = top(element);\n        break;\n\n      // scroll to element (selector)\n      // bounding rect is relative to the viewport\n      case 'string':\n        element = document.querySelector(target);\n        stop = top(element);\n        break;\n    }\n\n    // resolve scroll distance, accounting for offset\n    distance = stop - start + offset;\n\n    // resolve duration\n    switch (_typeof(options.duration)) {\n      // number in ms\n      case 'number':\n        duration = options.duration;\n        break;\n\n      // function passed the distance of the scroll\n      case 'function':\n        duration = options.duration(distance);\n        break;\n    }\n\n    // start the loop\n    window.requestAnimationFrame(loop);\n  }\n\n  // expose only the jump method\n  return jump;\n};\n\n// export singleton\n\nvar singleton = jumper();\n\nexport default singleton;\n","/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.3.2\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nimport Popper from 'popper.js';\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar DEFAULT_OPTIONS = {\n  container: false,\n  delay: 0,\n  html: false,\n  placement: 'top',\n  title: '',\n  template: '<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n  trigger: 'hover focus',\n  offset: 0,\n  arrowSelector: '.tooltip-arrow, .tooltip__arrow',\n  innerSelector: '.tooltip-inner, .tooltip__inner'\n};\n\nvar Tooltip = function () {\n  /**\n   * Create a new Tooltip.js instance\n   * @class Tooltip\n   * @param {HTMLElement} reference - The DOM node used as reference of the tooltip (it can be a jQuery element).\n   * @param {Object} options\n   * @param {String} options.placement='top'\n   *      Placement of the popper accepted values: `top(-start, -end), right(-start, -end), bottom(-start, -end),\n   *      left(-start, -end)`\n   * @param {String} options.arrowSelector='.tooltip-arrow, .tooltip__arrow' - className used to locate the DOM arrow element in the tooltip.\n   * @param {String} options.innerSelector='.tooltip-inner, .tooltip__inner' - className used to locate the DOM inner element in the tooltip.\n   * @param {HTMLElement|String|false} options.container=false - Append the tooltip to a specific element.\n   * @param {Number|Object} options.delay=0\n   *      Delay showing and hiding the tooltip (ms) - does not apply to manual trigger type.\n   *      If a number is supplied, delay is applied to both hide/show.\n   *      Object structure is: `{ show: 500, hide: 100 }`\n   * @param {Boolean} options.html=false - Insert HTML into the tooltip. If false, the content will inserted with `textContent`.\n   * @param {String} [options.template='<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>']\n   *      Base HTML to used when creating the tooltip.\n   *      The tooltip's `title` will be injected into the `.tooltip-inner` or `.tooltip__inner`.\n   *      `.tooltip-arrow` or `.tooltip__arrow` will become the tooltip's arrow.\n   *      The outermost wrapper element should have the `.tooltip` class.\n   * @param {String|HTMLElement|TitleFunction} options.title='' - Default title value if `title` attribute isn't present.\n   * @param {String} [options.trigger='hover focus']\n   *      How tooltip is triggered - click, hover, focus, manual.\n   *      You may pass multiple triggers; separate them with a space. `manual` cannot be combined with any other trigger.\n   * @param {Boolean} options.closeOnClickOutside=false - Close a popper on click outside of the popper and reference element. This has effect only when options.trigger is 'click'.\n   * @param {String|HTMLElement} options.boundariesElement\n   *      The element used as boundaries for the tooltip. For more information refer to Popper.js'\n   *      [boundariesElement docs](https://popper.js.org/popper-documentation.html)\n   * @param {Number|String} options.offset=0 - Offset of the tooltip relative to its reference. For more information refer to Popper.js'\n   *      [offset docs](https://popper.js.org/popper-documentation.html)\n   * @param {Object} options.popperOptions={} - Popper options, will be passed directly to popper instance. For more information refer to Popper.js'\n   *      [options docs](https://popper.js.org/popper-documentation.html)\n   * @return {Object} instance - The generated tooltip instance\n   */\n  function Tooltip(reference, options) {\n    classCallCheck(this, Tooltip);\n\n    _initialiseProps.call(this);\n\n    // apply user options over default ones\n    options = _extends({}, DEFAULT_OPTIONS, options);\n\n    reference.jquery && (reference = reference[0]);\n\n    // cache reference and options\n    this.reference = reference;\n    this.options = options;\n\n    // get events list\n    var events = typeof options.trigger === 'string' ? options.trigger.split(' ').filter(function (trigger) {\n      return ['click', 'hover', 'focus'].indexOf(trigger) !== -1;\n    }) : [];\n\n    // set initial state\n    this._isOpen = false;\n    this._popperOptions = {};\n\n    // set event listeners\n    this._setEventListeners(reference, events, options);\n  }\n\n  //\n  // Public methods\n  //\n\n  /**\n   * Reveals an element's tooltip. This is considered a \"manual\" triggering of the tooltip.\n   * Tooltips with zero-length titles are never displayed.\n   * @method Tooltip#show\n   * @memberof Tooltip\n   */\n\n\n  /**\n   * Hides an elements tooltip. This is considered a manual triggering of the tooltip.\n   * @method Tooltip#hide\n   * @memberof Tooltip\n   */\n\n\n  /**\n   * Hides and destroys an elements tooltip.\n   * @method Tooltip#dispose\n   * @memberof Tooltip\n   */\n\n\n  /**\n   * Toggles an elements tooltip. This is considered a manual triggering of the tooltip.\n   * @method Tooltip#toggle\n   * @memberof Tooltip\n   */\n\n\n  /**\n   * Updates the tooltip's title content\n   * @method Tooltip#updateTitleContent\n   * @memberof Tooltip\n   * @param {String|HTMLElement} title - The new content to use for the title\n   */\n\n\n  //\n  // Private methods\n  //\n\n  createClass(Tooltip, [{\n    key: '_create',\n\n\n    /**\n     * Creates a new tooltip node\n     * @memberof Tooltip\n     * @private\n     * @param {HTMLElement} reference\n     * @param {String} template\n     * @param {String|HTMLElement|TitleFunction} title\n     * @param {Boolean} allowHtml\n     * @return {HTMLElement} tooltipNode\n     */\n    value: function _create(reference, template, title, allowHtml) {\n      // create tooltip element\n      var tooltipGenerator = window.document.createElement('div');\n      tooltipGenerator.innerHTML = template.trim();\n      var tooltipNode = tooltipGenerator.childNodes[0];\n\n      // add unique ID to our tooltip (needed for accessibility reasons)\n      tooltipNode.id = 'tooltip_' + Math.random().toString(36).substr(2, 10);\n\n      // set initial `aria-hidden` state to `false` (it's visible!)\n      tooltipNode.setAttribute('aria-hidden', 'false');\n\n      // add title to tooltip\n      var titleNode = tooltipGenerator.querySelector(this.options.innerSelector);\n      this._addTitleContent(reference, title, allowHtml, titleNode);\n\n      // return the generated tooltip node\n      return tooltipNode;\n    }\n  }, {\n    key: '_addTitleContent',\n    value: function _addTitleContent(reference, title, allowHtml, titleNode) {\n      if (title.nodeType === 1 || title.nodeType === 11) {\n        // if title is a element node or document fragment, append it only if allowHtml is true\n        allowHtml && titleNode.appendChild(title);\n      } else if (isFunction(title)) {\n        // if title is a function, call it and set textContent or innerHtml depending by `allowHtml` value\n        var titleText = title.call(reference);\n        allowHtml ? titleNode.innerHTML = titleText : titleNode.textContent = titleText;\n      } else {\n        // if it's just a simple text, set textContent or innerHtml depending by `allowHtml` value\n        allowHtml ? titleNode.innerHTML = title : titleNode.textContent = title;\n      }\n    }\n  }, {\n    key: '_show',\n    value: function _show(reference, options) {\n      // don't show if it's already visible\n      // or if it's not being showed\n      if (this._isOpen && !this._isOpening) {\n        return this;\n      }\n      this._isOpen = true;\n\n      // if the tooltipNode already exists, just show it\n      if (this._tooltipNode) {\n        this._tooltipNode.style.visibility = 'visible';\n        this._tooltipNode.setAttribute('aria-hidden', 'false');\n        this.popperInstance.update();\n        return this;\n      }\n\n      // get title\n      var title = reference.getAttribute('title') || options.title;\n\n      // don't show tooltip if no title is defined\n      if (!title) {\n        return this;\n      }\n\n      // create tooltip node\n      var tooltipNode = this._create(reference, options.template, title, options.html);\n\n      // Add `aria-describedby` to our reference element for accessibility reasons\n      reference.setAttribute('aria-describedby', tooltipNode.id);\n\n      // append tooltip to container\n      var container = this._findContainer(options.container, reference);\n\n      this._append(tooltipNode, container);\n\n      this._popperOptions = _extends({}, options.popperOptions, {\n        placement: options.placement\n      });\n\n      this._popperOptions.modifiers = _extends({}, this._popperOptions.modifiers, {\n        arrow: _extends({}, this._popperOptions.modifiers && this._popperOptions.modifiers.arrow, {\n          element: options.arrowSelector\n        }),\n        offset: _extends({}, this._popperOptions.modifiers && this._popperOptions.modifiers.offset, {\n          offset: options.offset\n        })\n      });\n\n      if (options.boundariesElement) {\n        this._popperOptions.modifiers.preventOverflow = {\n          boundariesElement: options.boundariesElement\n        };\n      }\n\n      this.popperInstance = new Popper(reference, tooltipNode, this._popperOptions);\n\n      this._tooltipNode = tooltipNode;\n\n      return this;\n    }\n  }, {\n    key: '_hide',\n    value: function _hide() /*reference, options*/{\n      // don't hide if it's already hidden\n      if (!this._isOpen) {\n        return this;\n      }\n\n      this._isOpen = false;\n\n      // hide tooltipNode\n      this._tooltipNode.style.visibility = 'hidden';\n      this._tooltipNode.setAttribute('aria-hidden', 'true');\n\n      return this;\n    }\n  }, {\n    key: '_dispose',\n    value: function _dispose() {\n      var _this = this;\n\n      // remove event listeners first to prevent any unexpected behaviour\n      this._events.forEach(function (_ref) {\n        var func = _ref.func,\n            event = _ref.event;\n\n        _this.reference.removeEventListener(event, func);\n      });\n      this._events = [];\n\n      if (this._tooltipNode) {\n        this._hide();\n\n        // destroy instance\n        this.popperInstance.destroy();\n\n        // destroy tooltipNode if removeOnDestroy is not set, as popperInstance.destroy() already removes the element\n        if (!this.popperInstance.options.removeOnDestroy) {\n          this._tooltipNode.parentNode.removeChild(this._tooltipNode);\n          this._tooltipNode = null;\n        }\n      }\n      return this;\n    }\n  }, {\n    key: '_findContainer',\n    value: function _findContainer(container, reference) {\n      // if container is a query, get the relative element\n      if (typeof container === 'string') {\n        container = window.document.querySelector(container);\n      } else if (container === false) {\n        // if container is `false`, set it to reference parent\n        container = reference.parentNode;\n      }\n      return container;\n    }\n\n    /**\n     * Append tooltip to container\n     * @memberof Tooltip\n     * @private\n     * @param {HTMLElement} tooltipNode\n     * @param {HTMLElement|String|false} container\n     */\n\n  }, {\n    key: '_append',\n    value: function _append(tooltipNode, container) {\n      container.appendChild(tooltipNode);\n    }\n  }, {\n    key: '_setEventListeners',\n    value: function _setEventListeners(reference, events, options) {\n      var _this2 = this;\n\n      var directEvents = [];\n      var oppositeEvents = [];\n\n      events.forEach(function (event) {\n        switch (event) {\n          case 'hover':\n            directEvents.push('mouseenter');\n            oppositeEvents.push('mouseleave');\n            break;\n          case 'focus':\n            directEvents.push('focus');\n            oppositeEvents.push('blur');\n            break;\n          case 'click':\n            directEvents.push('click');\n            oppositeEvents.push('click');\n            break;\n        }\n      });\n\n      // schedule show tooltip\n      directEvents.forEach(function (event) {\n        var func = function func(evt) {\n          if (_this2._isOpening === true) {\n            return;\n          }\n          evt.usedByTooltip = true;\n          _this2._scheduleShow(reference, options.delay, options, evt);\n        };\n        _this2._events.push({ event: event, func: func });\n        reference.addEventListener(event, func);\n      });\n\n      // schedule hide tooltip\n      oppositeEvents.forEach(function (event) {\n        var func = function func(evt) {\n          if (evt.usedByTooltip === true) {\n            return;\n          }\n          _this2._scheduleHide(reference, options.delay, options, evt);\n        };\n        _this2._events.push({ event: event, func: func });\n        reference.addEventListener(event, func);\n        if (event === 'click' && options.closeOnClickOutside) {\n          document.addEventListener('mousedown', function (e) {\n            if (!_this2._isOpening) {\n              return;\n            }\n            var popper = _this2.popperInstance.popper;\n            if (reference.contains(e.target) || popper.contains(e.target)) {\n              return;\n            }\n            func(e);\n          }, true);\n        }\n      });\n    }\n  }, {\n    key: '_scheduleShow',\n    value: function _scheduleShow(reference, delay, options /*, evt */) {\n      var _this3 = this;\n\n      this._isOpening = true;\n      // defaults to 0\n      var computedDelay = delay && delay.show || delay || 0;\n      this._showTimeout = window.setTimeout(function () {\n        return _this3._show(reference, options);\n      }, computedDelay);\n    }\n  }, {\n    key: '_scheduleHide',\n    value: function _scheduleHide(reference, delay, options, evt) {\n      var _this4 = this;\n\n      this._isOpening = false;\n      // defaults to 0\n      var computedDelay = delay && delay.hide || delay || 0;\n      window.clearTimeout(this._showTimeout);\n      window.setTimeout(function () {\n        if (_this4._isOpen === false) {\n          return;\n        }\n        if (!document.body.contains(_this4._tooltipNode)) {\n          return;\n        }\n\n        // if we are hiding because of a mouseleave, we must check that the new\n        // reference isn't the tooltip, because in this case we don't want to hide it\n        if (evt.type === 'mouseleave') {\n          var isSet = _this4._setTooltipNodeEvent(evt, reference, delay, options);\n\n          // if we set the new event, don't hide the tooltip yet\n          // the new event will take care to hide it if necessary\n          if (isSet) {\n            return;\n          }\n        }\n\n        _this4._hide(reference, options);\n      }, computedDelay);\n    }\n  }, {\n    key: '_updateTitleContent',\n    value: function _updateTitleContent(title) {\n      if (typeof this._tooltipNode === 'undefined') {\n        if (typeof this.options.title !== 'undefined') {\n          this.options.title = title;\n        }\n        return;\n      }\n      var titleNode = this._tooltipNode.querySelector(this.options.innerSelector);\n      this._clearTitleContent(titleNode, this.options.html, this.reference.getAttribute('title') || this.options.title);\n      this._addTitleContent(this.reference, title, this.options.html, titleNode);\n      this.options.title = title;\n      this.popperInstance.update();\n    }\n  }, {\n    key: '_clearTitleContent',\n    value: function _clearTitleContent(titleNode, allowHtml, lastTitle) {\n      if (lastTitle.nodeType === 1 || lastTitle.nodeType === 11) {\n        allowHtml && titleNode.removeChild(lastTitle);\n      } else {\n        allowHtml ? titleNode.innerHTML = '' : titleNode.textContent = '';\n      }\n    }\n  }]);\n  return Tooltip;\n}();\n\n/**\n * Title function, its context is the Tooltip instance.\n * @memberof Tooltip\n * @callback TitleFunction\n * @return {String} placement - The desired title.\n */\n\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.show = function () {\n    return _this5._show(_this5.reference, _this5.options);\n  };\n\n  this.hide = function () {\n    return _this5._hide();\n  };\n\n  this.dispose = function () {\n    return _this5._dispose();\n  };\n\n  this.toggle = function () {\n    if (_this5._isOpen) {\n      return _this5.hide();\n    } else {\n      return _this5.show();\n    }\n  };\n\n  this.updateTitleContent = function (title) {\n    return _this5._updateTitleContent(title);\n  };\n\n  this._events = [];\n\n  this._setTooltipNodeEvent = function (evt, reference, delay, options) {\n    var relatedreference = evt.relatedreference || evt.toElement || evt.relatedTarget;\n\n    var callback = function callback(evt2) {\n      var relatedreference2 = evt2.relatedreference || evt2.toElement || evt2.relatedTarget;\n\n      // Remove event listener after call\n      _this5._tooltipNode.removeEventListener(evt.type, callback);\n\n      // If the new reference is not the reference element\n      if (!reference.contains(relatedreference2)) {\n        // Schedule to hide tooltip\n        _this5._scheduleHide(reference, options.delay, options, evt2);\n      }\n    };\n\n    if (_this5._tooltipNode.contains(relatedreference)) {\n      // listen to mouseleave on the tooltip element to be able to hide the tooltip\n      _this5._tooltipNode.addEventListener(evt.type, callback);\n      return true;\n    }\n\n    return false;\n  };\n};\n\nexport default Tooltip;\n//# sourceMappingURL=tooltip.js.map\n","import jump from 'jump.js';\r\nimport Tooltip from 'tooltip.js';\r\n\r\n// add $.fn.tooltip\r\n$.fn.tooltip = function (option) {\r\n  return this.each(function () {\r\n    const $this = $(this);\r\n    let data = $this.data('bs.tooltip');\r\n    const options = typeof option === 'object' && option || {};\r\n\r\n    if ($this.attr('title')) {\r\n      options.title = $this.attr('title');\r\n      $this.removeAttr('title');\r\n      $this.attr('data-original-title', options.title);\r\n    }\r\n\r\n    if (option === 'destroy') option = 'dispose';\r\n\r\n    if (!data && ['dispose', 'hide'].includes(option)) return;\r\n\r\n    if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)));\r\n    if (typeof option === 'string' && data[option]) data[option]();\r\n  });\r\n};\r\n\r\n// add $.fn.outerWidth and $.fn.outerHeight\r\n['width', 'height'].forEach(function(dimension) {\r\n  const Dimension = dimension.replace(/./, function (m) {\r\n    return m[0].toUpperCase()\r\n  });\r\n\r\n  $.fn[`outer${Dimension}`] = function(margin) {\r\n    const elem = this;\r\n\r\n    if (elem) {\r\n      const sides = {'width': ['left', 'right'], 'height': ['top', 'bottom']};\r\n      let size = elem[dimension]();\r\n\r\n      sides[dimension].forEach(function(side) {\r\n        if (margin) size += parseInt(elem.css('margin-' + side), 10);\r\n      });\r\n\r\n      return size;\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n});\r\n\r\n// allow use of $(':input')\r\n$.expr[':']['input'] = function() {\r\n  if (('disabled' in this) || ['INPUT', 'SELECT', 'TEXTAREA', 'BUTTON'].includes(this.tagName)) return this;\r\n};\r\n\r\n// add $().hover() method\r\n$.fn.hover = function(hover, leave) {\r\n  return this\r\n    .on('mouseenter', hover)\r\n    .on('mouseleave', leave || hover);\r\n};\r\n\r\n// add animated scroll\r\n$.fn.animatedScrollTop = function (to, duration = $.fx.speeds._default, callback) {\r\n  if (typeof to === 'number') to -= (window.scrollY || window.pageYOffset);\r\n\r\n  jump(to, {\r\n    duration: $.fx.speeds[duration] || duration,\r\n    callback\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n// required for compatibility with jquery plugins\r\n// ex: bootstrap plugins\r\n$.fn.extend = $.extend.bind($);\r\n\r\n/**\r\n * Enable special events on Zepto\r\n * @license Original Copyright 2013 Enideo. Released under dual MIT and GPL licenses.\r\n */\r\n$.event.special = $.event.special || {};\r\n\r\nconst bindBeforeSpecialEvents = $.fn.bind;\r\n\r\n$.fn.bind = function(eventName, data, callback) {\r\n  const el = this;\r\n\r\n  if (!callback){\r\n    callback = data;\r\n    data = null;\r\n  }\r\n\r\n  $.each(eventName.split(/\\s/), function(i, eventName) {\r\n    eventName = eventName.split(/\\./)[0];\r\n\r\n    if(eventName in $.event.special){\r\n      let specialEvent = $.event.special[eventName];\r\n\r\n      /// init enable special events on Zepto\r\n      if(!specialEvent._init) {\r\n        specialEvent._init = true;\r\n\r\n        /// intercept and replace the special event handler to add functionality\r\n        specialEvent.originalHandler = specialEvent.handler;\r\n        specialEvent.handler = function(){\r\n\r\n          /// make event argument writable, like on jQuery\r\n          const args = Array.prototype.slice.call(arguments);\r\n\r\n          args[0] = $.extend({},args[0]);\r\n\r\n          /// define the event handle, $.event.dispatch is only for newer versions of jQuery\r\n          $.event.handle = function(){\r\n\r\n            /// make context of trigger the event element\r\n            const args = Array.prototype.slice.call(arguments);\r\n            const event = args[0];\r\n            const $target = $(event.target);\r\n\r\n            $target.trigger.apply( $target, arguments );\r\n          };\r\n\r\n          specialEvent.originalHandler.apply(this,args);\r\n        }\r\n      }\r\n\r\n      /// setup special events on Zepto\r\n      specialEvent.setup.apply(el, [data]);\r\n    }\r\n  });\r\n\r\n  return bindBeforeSpecialEvents.apply(this, [eventName, callback]);\r\n};\r\n","export default class Routes {\r\n  type;\r\n  attributes = [];\r\n  hasOnes = [];\r\n  hasManys = [];\r\n\r\n  constructor(type, model = null) {\r\n    this.type = type;\r\n    this.model = model;\r\n  }\r\n\r\n  attribute(name) {\r\n    this.attributes.push(name);\r\n\r\n    return this;\r\n  }\r\n\r\n  hasOne(type) {\r\n    this.hasOnes.push(type);\r\n\r\n    return this;\r\n  }\r\n\r\n  hasMany(type) {\r\n    this.hasManys.push(type);\r\n\r\n    return this;\r\n  }\r\n\r\n  extend(app, extension) {\r\n    if (this.model) {\r\n      app.store.models[this.type] = this.model;\r\n    }\r\n    \r\n    const model = app.store.models[this.type];\r\n\r\n    this.attributes.forEach(name => model.prototype[name] = model.attribute(name));\r\n    this.hasOnes.forEach(name => model.prototype[name] = model.hasOne(name));\r\n    this.hasManys.forEach(name => model.prototype[name] = model.hasMany(name));\r\n  }\r\n}","export default class PostTypes {\r\n  postComponents = {};\r\n\r\n  add(name, component) {\r\n    this.postComponents[name] = component;\r\n\r\n    return this;\r\n  }\r\n\r\n  extend(app, extension) {\r\n    Object.assign(app.postComponents, this.postComponents);\r\n  }\r\n}","export default class Routes {\r\n  routes = {};\r\n\r\n  add(name, path, component) {\r\n    this.routes[name] = { path, component };\r\n\r\n    return this;\r\n  }\r\n\r\n  extend(app, extension) {\r\n    Object.assign(app.routes, this.routes);\r\n  }\r\n}","import 'expose-loader?jQuery!zepto';\r\nimport 'expose-loader?moment!expose-loader?dayjs!dayjs';\r\nimport 'expose-loader?m!mithril';\r\nimport 'expose-loader?m.bidi!m.attrs.bidi';\r\nimport 'expose-loader?Mousetrap!mousetrap';\r\n\r\nimport 'zepto/src/selector';\r\nimport 'zepto/src/data';\r\nimport 'zepto/src/fx';\r\nimport 'zepto/src/fx_methods';\r\n\r\nimport './utils/patchZepto';\r\n\r\nimport 'hc-sticky';\r\nimport 'bootstrap/js/dropdown';\r\nimport 'bootstrap/js/transition';\r\n\r\nimport relativeTime from 'dayjs/plugin/relativeTime';\r\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\r\n\r\ndayjs.extend(relativeTime);\r\ndayjs.extend(localizedFormat);\r\n\r\nimport patchMithril from './utils/patchMithril';\r\n\r\npatchMithril(window);\r\n\r\nimport * as Extend from './extend/index';\r\n\r\nexport { Extend };\r\n","/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.15.0\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nvar longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nvar timeoutDuration = 0;\nfor (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nfunction microtaskDebounce(fn) {\n  var called = false;\n  return function () {\n    if (called) {\n      return;\n    }\n    called = true;\n    window.Promise.resolve().then(function () {\n      called = false;\n      fn();\n    });\n  };\n}\n\nfunction taskDebounce(fn) {\n  var scheduled = false;\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(function () {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nvar supportsMicroTasks = isBrowser && window.Promise;\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nvar debounce = supportsMicroTasks ? microtaskDebounce : taskDebounce;\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\n/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nfunction getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  var window = element.ownerDocument.defaultView;\n  var css = window.getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n\n/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nfunction getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nfunction getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body;\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body;\n    case '#document':\n      return element.body;\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n\n  var _getStyleComputedProp = getStyleComputedProperty(element),\n      overflow = _getStyleComputedProp.overflow,\n      overflowX = _getStyleComputedProp.overflowX,\n      overflowY = _getStyleComputedProp.overflowY;\n\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n\nvar isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nvar isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nfunction isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nfunction getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  var noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  var offsetParent = element.offsetParent || null;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  var nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TH, TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n\nfunction isOffsetContainer(element) {\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;\n}\n\n/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nfunction getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nfunction findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\n  var start = order ? element1 : element2;\n  var end = order ? element2 : element1;\n\n  // Get common ancestor container\n  var range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  var commonAncestorContainer = range.commonAncestorContainer;\n\n  // Both nodes are inside #document\n\n  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  var element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n\n/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nfunction getScroll(element) {\n  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';\n\n  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    var html = element.ownerDocument.documentElement;\n    var scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nfunction includeScroll(rect, element) {\n  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var scrollTop = getScroll(element, 'top');\n  var scrollLeft = getScroll(element, 'left');\n  var modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n\n/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nfunction getBordersSize(styles, axis) {\n  var sideA = axis === 'x' ? 'Left' : 'Top';\n  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return parseFloat(styles['border' + sideA + 'Width'], 10) + parseFloat(styles['border' + sideB + 'Width'], 10);\n}\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE(10) ? parseInt(html['offset' + axis]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')]) : 0);\n}\n\nfunction getWindowSizes(document) {\n  var body = document.body;\n  var html = document.documentElement;\n  var computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle)\n  };\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nfunction getClientRect(offsets) {\n  return _extends({}, offsets, {\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height\n  });\n}\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nfunction getBoundingClientRect(element) {\n  var rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      var scrollTop = getScroll(element, 'top');\n      var scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    } else {\n      rect = element.getBoundingClientRect();\n    }\n  } catch (e) {}\n\n  var result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top\n  };\n\n  // subtract scrollbar size from sizes\n  var sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  var width = sizes.width || element.clientWidth || result.right - result.left;\n  var height = sizes.height || element.clientHeight || result.bottom - result.top;\n\n  var horizScrollbar = element.offsetWidth - width;\n  var vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    var styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n\nfunction getOffsetRectRelativeToArbitraryNode(children, parent) {\n  var fixedPosition = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var isIE10 = isIE(10);\n  var isHTML = parent.nodeName === 'HTML';\n  var childrenRect = getBoundingClientRect(children);\n  var parentRect = getBoundingClientRect(parent);\n  var scrollParent = getScrollParent(children);\n\n  var styles = getStyleComputedProperty(parent);\n  var borderTopWidth = parseFloat(styles.borderTopWidth, 10);\n  var borderLeftWidth = parseFloat(styles.borderLeftWidth, 10);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if (fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  var offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    var marginTop = parseFloat(styles.marginTop, 10);\n    var marginLeft = parseFloat(styles.marginLeft, 10);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (isIE10 && !fixedPosition ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n\nfunction getViewportOffsetRectRelativeToArtbitraryNode(element) {\n  var excludeScroll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var html = element.ownerDocument.documentElement;\n  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  var width = Math.max(html.clientWidth, window.innerWidth || 0);\n  var height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  var scrollTop = !excludeScroll ? getScroll(html) : 0;\n  var scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  var offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width: width,\n    height: height\n  };\n\n  return getClientRect(offset);\n}\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nfunction isFixed(element) {\n  var nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  var parentNode = getParentNode(element);\n  if (!parentNode) {\n    return false;\n  }\n  return isFixed(parentNode);\n}\n\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nfunction getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  var el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n}\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nfunction getBoundaries(popper, reference, padding, boundariesElement) {\n  var fixedPosition = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n  // NOTE: 1 DOM access here\n\n  var boundaries = { top: 0, left: 0 };\n  var offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport') {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  } else {\n    // Handle other cases based on DOM element used as boundaries\n    var boundariesNode = void 0;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent, fixedPosition);\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      var _getWindowSizes = getWindowSizes(popper.ownerDocument),\n          height = _getWindowSizes.height,\n          width = _getWindowSizes.width;\n\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  var isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0;\n  boundaries.top += isPaddingNumber ? padding : padding.top || 0;\n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0;\n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0;\n\n  return boundaries;\n}\n\nfunction getArea(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);\n\n  var rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height\n    }\n  };\n\n  var sortedAreas = Object.keys(rects).map(function (key) {\n    return _extends({\n      key: key\n    }, rects[key], {\n      area: getArea(rects[key])\n    });\n  }).sort(function (a, b) {\n    return b.area - a.area;\n  });\n\n  var filteredAreas = sortedAreas.filter(function (_ref2) {\n    var width = _ref2.width,\n        height = _ref2.height;\n    return width >= popper.clientWidth && height >= popper.clientHeight;\n  });\n\n  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;\n\n  var variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? '-' + variation : '');\n}\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nfunction getReferenceOffsets(state, popper, reference) {\n  var fixedPosition = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n  var commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n\n/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nfunction getOuterSizes(element) {\n  var window = element.ownerDocument.defaultView;\n  var styles = window.getComputedStyle(element);\n  var x = parseFloat(styles.marginTop || 0) + parseFloat(styles.marginBottom || 0);\n  var y = parseFloat(styles.marginLeft || 0) + parseFloat(styles.marginRight || 0);\n  var result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x\n  };\n  return result;\n}\n\n/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nfunction getOppositePlacement(placement) {\n  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nfunction getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  var popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  var popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  var mainSide = isHoriz ? 'top' : 'left';\n  var secondarySide = isHoriz ? 'left' : 'top';\n  var measurement = isHoriz ? 'height' : 'width';\n  var secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n\n/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(function (cur) {\n      return cur[prop] === value;\n    });\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  var match = find(arr, function (obj) {\n    return obj[prop] === value;\n  });\n  return arr.indexOf(match);\n}\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nfunction runModifiers(modifiers, data, ends) {\n  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(function (modifier) {\n    if (modifier['function']) {\n      // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    var fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nfunction update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  var data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {}\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(this.state, this.popper, this.reference, this.options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(this.options.placement, data.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding);\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(this.popper, data.offsets.reference, data.placement);\n\n  data.offsets.popper.position = this.options.positionFixed ? 'fixed' : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n\n/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nfunction isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(function (_ref) {\n    var name = _ref.name,\n        enabled = _ref.enabled;\n    return enabled && name === modifierName;\n  });\n}\n\n/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nfunction getSupportedPropertyName(property) {\n  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (var i = 0; i < prefixes.length; i++) {\n    var prefix = prefixes[i];\n    var toCheck = prefix ? '' + prefix + upperProp : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nfunction destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicity asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n\n/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nfunction getWindow(element) {\n  var ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  var isBody = scrollParent.nodeName === 'BODY';\n  var target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction setupEventListeners(reference, options, state, updateBound) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  var scrollElement = getScrollParent(reference);\n  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nfunction enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(this.reference, this.options, this.state, this.scheduleUpdate);\n  }\n}\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(function (target) {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nfunction disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n\n/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nfunction isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setStyles(element, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    var unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n\n/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function (prop) {\n    var value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nfunction applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nfunction applyStyleOnLoad(reference, popper, options, modifierOptions, state) {\n  // compute reference element offsets\n  var referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  var placement = computeAutoPlacement(options.placement, referenceOffsets, popper, reference, options.modifiers.flip.boundariesElement, options.modifiers.flip.padding);\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n\n/**\n * @function\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Boolean} shouldRound - If the offsets should be rounded at all\n * @returns {Object} The popper's position offsets rounded\n *\n * The tale of pixel-perfect positioning. It's still not 100% perfect, but as\n * good as it can be within reason.\n * Discussion here: https://github.com/FezVrasta/popper.js/pull/715\n *\n * Low DPI screens cause a popper to be blurry if not using full pixels (Safari\n * as well on High DPI screens).\n *\n * Firefox prefers no rounding for positioning and does not have blurriness on\n * high DPI screens.\n *\n * Only horizontal placement and left/right values need to be considered.\n */\nfunction getRoundedOffsets(data, shouldRound) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n  var round = Math.round,\n      floor = Math.floor;\n\n  var noRound = function noRound(v) {\n    return v;\n  };\n\n  var referenceWidth = round(reference.width);\n  var popperWidth = round(popper.width);\n\n  var isVertical = ['left', 'right'].indexOf(data.placement) !== -1;\n  var isVariation = data.placement.indexOf('-') !== -1;\n  var sameWidthParity = referenceWidth % 2 === popperWidth % 2;\n  var bothOddWidth = referenceWidth % 2 === 1 && popperWidth % 2 === 1;\n\n  var horizontalToInteger = !shouldRound ? noRound : isVertical || isVariation || sameWidthParity ? round : floor;\n  var verticalToInteger = !shouldRound ? noRound : round;\n\n  return {\n    left: horizontalToInteger(bothOddWidth && !isVariation && shouldRound ? popper.left - 1 : popper.left),\n    top: verticalToInteger(popper.top),\n    bottom: verticalToInteger(popper.bottom),\n    right: horizontalToInteger(popper.right)\n  };\n}\n\nvar isFirefox = isBrowser && /Firefox/i.test(navigator.userAgent);\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeStyle(data, options) {\n  var x = options.x,\n      y = options.y;\n  var popper = data.offsets.popper;\n\n  // Remove this legacy support in Popper.js v2\n\n  var legacyGpuAccelerationOption = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'applyStyle';\n  }).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');\n  }\n  var gpuAcceleration = legacyGpuAccelerationOption !== undefined ? legacyGpuAccelerationOption : options.gpuAcceleration;\n\n  var offsetParent = getOffsetParent(data.instance.popper);\n  var offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  var styles = {\n    position: popper.position\n  };\n\n  var offsets = getRoundedOffsets(data, window.devicePixelRatio < 2 || !isFirefox);\n\n  var sideA = x === 'bottom' ? 'top' : 'bottom';\n  var sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  var prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  var left = void 0,\n      top = void 0;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = 'translate3d(' + left + 'px, ' + top + 'px, 0)';\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    var invertTop = sideA === 'bottom' ? -1 : 1;\n    var invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = sideA + ', ' + sideB;\n  }\n\n  // Attributes\n  var attributes = {\n    'x-placement': data.placement\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = _extends({}, attributes, data.attributes);\n  data.styles = _extends({}, styles, data.styles);\n  data.arrowStyles = _extends({}, data.offsets.arrow, data.arrowStyles);\n\n  return data;\n}\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nfunction isModifierRequired(modifiers, requestingName, requestedName) {\n  var requesting = find(modifiers, function (_ref) {\n    var name = _ref.name;\n    return name === requestingName;\n  });\n\n  var isRequired = !!requesting && modifiers.some(function (modifier) {\n    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;\n  });\n\n  if (!isRequired) {\n    var _requesting = '`' + requestingName + '`';\n    var requested = '`' + requestedName + '`';\n    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');\n  }\n  return isRequired;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction arrow(data, options) {\n  var _data$offsets$arrow;\n\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  var arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn('WARNING: `arrow.element` must be child of its popper element!');\n      return data;\n    }\n  }\n\n  var placement = data.placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  var len = isVertical ? 'height' : 'width';\n  var sideCapitalized = isVertical ? 'Top' : 'Left';\n  var side = sideCapitalized.toLowerCase();\n  var altSide = isVertical ? 'left' : 'top';\n  var opSide = isVertical ? 'bottom' : 'right';\n  var arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -= popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] += reference[side] + arrowElementSize - popper[opSide];\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  var center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  var css = getStyleComputedProperty(data.instance.popper);\n  var popperMarginSide = parseFloat(css['margin' + sideCapitalized], 10);\n  var popperBorderSide = parseFloat(css['border' + sideCapitalized + 'Width'], 10);\n  var sideValue = center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = (_data$offsets$arrow = {}, defineProperty(_data$offsets$arrow, side, Math.round(sideValue)), defineProperty(_data$offsets$arrow, altSide, ''), _data$offsets$arrow);\n\n  return data;\n}\n\n/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nfunction getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n\n/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nvar placements = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'];\n\n// Get rid of `auto` `auto-start` and `auto-end`\nvar validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nfunction clockwise(placement) {\n  var counter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var index = validPlacements.indexOf(placement);\n  var arr = validPlacements.slice(index + 1).concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n\nvar BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise'\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, options.boundariesElement, data.positionFixed);\n\n  var placement = data.placement.split('-')[0];\n  var placementOpposite = getOppositePlacement(placement);\n  var variation = data.placement.split('-')[1] || '';\n\n  var flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach(function (step, index) {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    var popperOffsets = data.offsets.popper;\n    var refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    var floor = Math.floor;\n    var overlapsRef = placement === 'left' && floor(popperOffsets.right) > floor(refOffsets.left) || placement === 'right' && floor(popperOffsets.left) < floor(refOffsets.right) || placement === 'top' && floor(popperOffsets.bottom) > floor(refOffsets.top) || placement === 'bottom' && floor(popperOffsets.top) < floor(refOffsets.bottom);\n\n    var overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    var overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    var overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    var overflowsBottom = floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    var overflowsBoundaries = placement === 'left' && overflowsLeft || placement === 'right' && overflowsRight || placement === 'top' && overflowsTop || placement === 'bottom' && overflowsBottom;\n\n    // flip the variation if required\n    var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n\n    // flips variation if reference element overflows boundaries\n    var flippedVariationByRef = !!options.flipVariations && (isVertical && variation === 'start' && overflowsLeft || isVertical && variation === 'end' && overflowsRight || !isVertical && variation === 'start' && overflowsTop || !isVertical && variation === 'end' && overflowsBottom);\n\n    // flips variation if popper content overflows boundaries\n    var flippedVariationByContent = !!options.flipVariationsByContent && (isVertical && variation === 'start' && overflowsRight || isVertical && variation === 'end' && overflowsLeft || !isVertical && variation === 'start' && overflowsBottom || !isVertical && variation === 'end' && overflowsTop);\n\n    var flippedVariation = flippedVariationByRef || flippedVariationByContent;\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = _extends({}, data.offsets.popper, getPopperOffsets(data.instance.popper, data.offsets.reference, data.placement));\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction keepTogether(data) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var placement = data.placement.split('-')[0];\n  var floor = Math.floor;\n  var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  var side = isVertical ? 'right' : 'bottom';\n  var opSide = isVertical ? 'left' : 'top';\n  var measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] = floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nfunction toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  var split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  var value = +split[1];\n  var unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    var element = void 0;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    var rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    var size = void 0;\n    if (unit === 'vh') {\n      size = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    } else {\n      size = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nfunction parseOffset(offset, popperOffsets, referenceOffsets, basePlacement) {\n  var offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  var useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  var fragments = offset.split(/(\\+|\\-)/).map(function (frag) {\n    return frag.trim();\n  });\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  var divider = fragments.indexOf(find(fragments, function (frag) {\n    return frag.search(/,|\\s/) !== -1;\n  }));\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  var splitRegex = /\\s*,\\s*|\\s+/;\n  var ops = divider !== -1 ? [fragments.slice(0, divider).concat([fragments[divider].split(splitRegex)[0]]), [fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider + 1))] : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map(function (op, index) {\n    // Most of the units rely on the orientation of the popper\n    var measurement = (index === 1 ? !useHeight : useHeight) ? 'height' : 'width';\n    var mergeWithPrevious = false;\n    return op\n    // This aggregates any `+` or `-` sign that aren't considered operators\n    // e.g.: 10 + +5 => [10, +, +5]\n    .reduce(function (a, b) {\n      if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n        a[a.length - 1] = b;\n        mergeWithPrevious = true;\n        return a;\n      } else if (mergeWithPrevious) {\n        a[a.length - 1] += b;\n        mergeWithPrevious = false;\n        return a;\n      } else {\n        return a.concat(b);\n      }\n    }, [])\n    // Here we convert the string values into number values (in px)\n    .map(function (str) {\n      return toValue(str, measurement, popperOffsets, referenceOffsets);\n    });\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach(function (op, index) {\n    op.forEach(function (frag, index2) {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nfunction offset(data, _ref) {\n  var offset = _ref.offset;\n  var placement = data.placement,\n      _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var basePlacement = placement.split('-')[0];\n\n  var offsets = void 0;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction preventOverflow(data, options) {\n  var boundariesElement = options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  var transformProp = getSupportedPropertyName('transform');\n  var popperStyles = data.instance.popper.style; // assignment to help minification\n  var top = popperStyles.top,\n      left = popperStyles.left,\n      transform = popperStyles[transformProp];\n\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, boundariesElement, data.positionFixed);\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  var order = options.priority;\n  var popper = data.offsets.popper;\n\n  var check = {\n    primary: function primary(placement) {\n      var value = popper[placement];\n      if (popper[placement] < boundaries[placement] && !options.escapeWithReference) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return defineProperty({}, placement, value);\n    },\n    secondary: function secondary(placement) {\n      var mainSide = placement === 'right' ? 'left' : 'top';\n      var value = popper[mainSide];\n      if (popper[placement] > boundaries[placement] && !options.escapeWithReference) {\n        value = Math.min(popper[mainSide], boundaries[placement] - (placement === 'right' ? popper.width : popper.height));\n      }\n      return defineProperty({}, mainSide, value);\n    }\n  };\n\n  order.forEach(function (placement) {\n    var side = ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = _extends({}, popper, check[side](placement));\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction shift(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    var _data$offsets = data.offsets,\n        reference = _data$offsets.reference,\n        popper = _data$offsets.popper;\n\n    var isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    var side = isVertical ? 'left' : 'top';\n    var measurement = isVertical ? 'width' : 'height';\n\n    var shiftOffsets = {\n      start: defineProperty({}, side, reference[side]),\n      end: defineProperty({}, side, reference[side] + reference[measurement] - popper[measurement])\n    };\n\n    data.offsets.popper = _extends({}, popper, shiftOffsets[shiftvariation]);\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  var refRect = data.offsets.reference;\n  var bound = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'preventOverflow';\n  }).boundaries;\n\n  if (refRect.bottom < bound.top || refRect.left > bound.right || refRect.top > bound.bottom || refRect.right < bound.left) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction inner(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  var subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] = reference[basePlacement] - (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nvar modifiers = {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\"  or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent'\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]'\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport',\n    /**\n     * @prop {Boolean} flipVariations=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the reference element overlaps its boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariations: false,\n    /**\n     * @prop {Boolean} flipVariationsByContent=false\n     * The popper will switch placement variation between `-start` and `-end` when\n     * the popper element overlaps its reference boundaries.\n     *\n     * The original placement should have a set variation.\n     */\n    flipVariationsByContent: false\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right'\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined\n  }\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nvar Defaults = {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: function onCreate() {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: function onUpdate() {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers: modifiers\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n\n// Utils\n// Methods\nvar Popper = function () {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {Element|referenceObject} reference - The reference element used to position the popper\n   * @param {Element} popper - The HTML / XML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  function Popper(reference, popper) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    classCallCheck(this, Popper);\n\n    this.scheduleUpdate = function () {\n      return requestAnimationFrame(_this.update);\n    };\n\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = _extends({}, Popper.Defaults, options);\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: []\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys(_extends({}, Popper.Defaults.modifiers, options.modifiers)).forEach(function (name) {\n      _this.options.modifiers[name] = _extends({}, Popper.Defaults.modifiers[name] || {}, options.modifiers ? options.modifiers[name] : {});\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers).map(function (name) {\n      return _extends({\n        name: name\n      }, _this.options.modifiers[name]);\n    })\n    // sort the modifiers by order\n    .sort(function (a, b) {\n      return a.order - b.order;\n    });\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(function (modifierOptions) {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(_this.reference, _this.popper, _this.options, modifierOptions, _this.state);\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    var eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n\n\n  createClass(Popper, [{\n    key: 'update',\n    value: function update$$1() {\n      return update.call(this);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy$$1() {\n      return destroy.call(this);\n    }\n  }, {\n    key: 'enableEventListeners',\n    value: function enableEventListeners$$1() {\n      return enableEventListeners.call(this);\n    }\n  }, {\n    key: 'disableEventListeners',\n    value: function disableEventListeners$$1() {\n      return disableEventListeners.call(this);\n    }\n\n    /**\n     * Schedules an update. It will run on the next UI update available.\n     * @method scheduleUpdate\n     * @memberof Popper\n     */\n\n\n    /**\n     * Collection of utilities useful when writing custom modifiers.\n     * Starting from version 1.7, this method is available only if you\n     * include `popper-utils.js` before `popper.js`.\n     *\n     * **DEPRECATION**: This way to access PopperUtils is deprecated\n     * and will be removed in v2! Use the PopperUtils module directly instead.\n     * Due to the high instability of the methods contained in Utils, we can't\n     * guarantee them to follow semver. Use them at your own risk!\n     * @static\n     * @private\n     * @type {Object}\n     * @deprecated since version 1.8\n     * @member Utils\n     * @memberof Popper\n     */\n\n  }]);\n  return Popper;\n}();\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n\n\nPopper.Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\nPopper.placements = placements;\nPopper.Defaults = Defaults;\n\nexport default Popper;\n//# sourceMappingURL=popper.js.map\n","!function(r,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):r.dayjs_plugin_relativeTime=t()}(this,function(){\"use strict\";return function(r,t,e){var n=t.prototype;e.en.relativeTime={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"};var o=function(r,t,n,o){for(var d,i,u=n.$locale().relativeTime,a=[{l:\"s\",r:44,d:\"second\"},{l:\"m\",r:89},{l:\"mm\",r:44,d:\"minute\"},{l:\"h\",r:89},{l:\"hh\",r:21,d:\"hour\"},{l:\"d\",r:35},{l:\"dd\",r:25,d:\"day\"},{l:\"M\",r:45},{l:\"MM\",r:10,d:\"month\"},{l:\"y\",r:17},{l:\"yy\",d:\"year\"}],f=a.length,s=0;s<f;s+=1){var l=a[s];l.d&&(d=o?e(r).diff(n,l.d,!0):n.diff(r,l.d,!0));var h=Math.round(Math.abs(d));if(h<=l.r||!l.r){1===h&&s>0&&(l=a[s-1]),i=u[l.l].replace(\"%d\",h);break}}return t?i:(d>0?u.future:u.past).replace(\"%s\",i)};n.to=function(r,t){return o(r,t,this,!0)},n.from=function(r,t){return o(r,t,this)};var d=function(r){return r.$u?e.utc():e()};n.toNow=function(r){return this.to(d(this),r)},n.fromNow=function(r){return this.from(d(this),r)}}});\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.dayjs_plugin_localizedFormat=t()}(this,function(){\"use strict\";return function(e,t,o){var n=t.prototype,r=n.format,M={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"};o.en.formats=M;n.format=function(e){void 0===e&&(e=\"YYYY-MM-DDTHH:mm:ssZ\");var t=this.$locale().formats,o=void 0===t?{}:t,n=e.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(e,t,n){var r=n&&n.toUpperCase();return t||o[n]||M[n]||o[r].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,o){return t||o.slice(1)})});return r.call(this,n)}}});\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import humanTimeUtil from './humanTime';\r\n\r\nfunction updateHumanTimes() {\r\n  $('[data-humantime]').each(function() {\r\n    const $this = $(this);\r\n    const ago = humanTimeUtil($this.attr('datetime'));\r\n\r\n    $this.html(ago);\r\n  });\r\n}\r\n\r\n/**\r\n * The `humanTime` initializer sets up a loop every 1 second to update\r\n * timestamps rendered with the `humanTime` helper.\r\n */\r\nexport default function humanTime() {\r\n  setInterval(updateHumanTimes, 10000);\r\n}\r\n","import * as extend from './extend';\r\nimport Session from './Session';\r\nimport Store from './Store';\r\nimport evented from './utils/evented';\r\nimport liveHumanTimes from './utils/liveHumanTimes';\r\nimport ItemList from './utils/ItemList';\r\nimport mixin from './utils/mixin';\r\nimport humanTime from './utils/humanTime';\r\nimport computed from './utils/computed';\r\nimport Drawer from './utils/Drawer';\r\nimport anchorScroll from './utils/anchorScroll';\r\nimport RequestError from './utils/RequestError';\r\nimport abbreviateNumber from './utils/abbreviateNumber';\r\nimport * as string from './utils/string';\r\nimport SubtreeRetainer from './utils/SubtreeRetainer';\r\nimport extract from './utils/extract';\r\nimport ScrollListener from './utils/ScrollListener';\r\nimport stringToColor from './utils/stringToColor';\r\nimport patchMithril from './utils/patchMithril';\r\nimport classList from './utils/classList';\r\nimport extractText from './utils/extractText';\r\nimport formatNumber from './utils/formatNumber';\r\nimport mapRoutes from './utils/mapRoutes';\r\nimport Notification from './models/Notification';\r\nimport User from './models/User';\r\nimport Post from './models/Post';\r\nimport Discussion from './models/Discussion';\r\nimport Group from './models/Group';\r\nimport Forum from './models/Forum';\r\nimport Component from './Component';\r\nimport Translator from './Translator';\r\nimport AlertManager from './components/AlertManager';\r\nimport Switch from './components/Switch';\r\nimport Badge from './components/Badge';\r\nimport LoadingIndicator from './components/LoadingIndicator';\r\nimport Placeholder from './components/Placeholder';\r\nimport Separator from './components/Separator';\r\nimport Dropdown from './components/Dropdown';\r\nimport SplitDropdown from './components/SplitDropdown';\r\nimport RequestErrorModal from './components/RequestErrorModal';\r\nimport FieldSet from './components/FieldSet';\r\nimport Select from './components/Select';\r\nimport Navigation from './components/Navigation';\r\nimport Alert from './components/Alert';\r\nimport LinkButton from './components/LinkButton';\r\nimport Checkbox from './components/Checkbox';\r\nimport SelectDropdown from './components/SelectDropdown';\r\nimport ModalManager from './components/ModalManager';\r\nimport Button from './components/Button';\r\nimport Modal from './components/Modal';\r\nimport GroupBadge from './components/GroupBadge';\r\nimport Model from './Model';\r\nimport Application from './Application';\r\nimport fullTime from './helpers/fullTime';\r\nimport avatar from './helpers/avatar';\r\nimport icon from './helpers/icon';\r\nimport humanTimeHelper from './helpers/humanTime';\r\nimport punctuateSeries from './helpers/punctuateSeries';\r\nimport highlight from './helpers/highlight';\r\nimport username from './helpers/username';\r\nimport userOnline from './helpers/userOnline';\r\nimport listItems from './helpers/listItems';\r\n\r\nexport default {\r\n  'extend': extend,\r\n  'Session': Session,\r\n  'Store': Store,\r\n  'utils/evented': evented,\r\n  'utils/liveHumanTimes': liveHumanTimes,\r\n  'utils/ItemList': ItemList,\r\n  'utils/mixin': mixin,\r\n  'utils/humanTime': humanTime,\r\n  'utils/computed': computed,\r\n  'utils/Drawer': Drawer,\r\n  'utils/anchorScroll': anchorScroll,\r\n  'utils/RequestError': RequestError,\r\n  'utils/abbreviateNumber': abbreviateNumber,\r\n  'utils/string': string,\r\n  'utils/SubtreeRetainer': SubtreeRetainer,\r\n  'utils/extract': extract,\r\n  'utils/ScrollListener': ScrollListener,\r\n  'utils/stringToColor': stringToColor,\r\n  'utils/patchMithril': patchMithril,\r\n  'utils/classList': classList,\r\n  'utils/extractText': extractText,\r\n  'utils/formatNumber': formatNumber,\r\n  'utils/mapRoutes': mapRoutes,\r\n  'models/Notification': Notification,\r\n  'models/User': User,\r\n  'models/Post': Post,\r\n  'models/Discussion': Discussion,\r\n  'models/Group': Group,\r\n  'models/Forum': Forum,\r\n  'Component': Component,\r\n  'Translator': Translator,\r\n  'components/AlertManager': AlertManager,\r\n  'components/Switch': Switch,\r\n  'components/Badge': Badge,\r\n  'components/LoadingIndicator': LoadingIndicator,\r\n  'components/Placeholder': Placeholder,\r\n  'components/Separator': Separator,\r\n  'components/Dropdown': Dropdown,\r\n  'components/SplitDropdown': SplitDropdown,\r\n  'components/RequestErrorModal': RequestErrorModal,\r\n  'components/FieldSet': FieldSet,\r\n  'components/Select': Select,\r\n  'components/Navigation': Navigation,\r\n  'components/Alert': Alert,\r\n  'components/LinkButton': LinkButton,\r\n  'components/Checkbox': Checkbox,\r\n  'components/SelectDropdown': SelectDropdown,\r\n  'components/ModalManager': ModalManager,\r\n  'components/Button': Button,\r\n  'components/Modal': Modal,\r\n  'components/GroupBadge': GroupBadge,\r\n  'Model': Model,\r\n  'Application': Application,\r\n  'helpers/fullTime': fullTime,\r\n  'helpers/avatar': avatar,\r\n  'helpers/icon': icon,\r\n  'helpers/humanTime': humanTimeHelper,\r\n  'helpers/punctuateSeries': punctuateSeries,\r\n  'helpers/highlight': highlight,\r\n  'helpers/username': username,\r\n  'helpers/userOnline': userOnline,\r\n  'helpers/listItems': listItems\r\n};\r\n","/**\r\n * The `mixin` utility assigns the properties of a set of 'mixin' objects to\r\n * the prototype of a parent object.\r\n *\r\n * @example\r\n * class MyClass extends mixin(ExistingClass, evented, etc) {}\r\n *\r\n * @param {Class} Parent The class to extend the new class from.\r\n * @param {...Object} mixins The objects to mix in.\r\n * @return {Class} A new class that extends Parent and contains the mixins.\r\n */\r\nexport default function mixin(Parent, ...mixins) {\r\n  class Mixed extends Parent {}\r\n\r\n  mixins.forEach(object => {\r\n    Object.assign(Mixed.prototype, object);\r\n  });\r\n\r\n  return Mixed;\r\n}\r\n","/**\r\n * The `punctuateSeries` helper formats a list of strings (e.g. names) to read\r\n * fluently in the application's locale.\r\n *\r\n * ```js\r\n * punctuateSeries(['Toby', 'Franz', 'Dominion']) // Toby, Franz, and Dominion\r\n * ```\r\n *\r\n * @param {Array} items\r\n * @return {VirtualElement}\r\n */\r\nexport default function punctuateSeries(items) {\r\n  if (items.length === 2) {\r\n    return app.translator.trans('core.lib.series.two_text', {\r\n      first: items[0],\r\n      second: items[1]\r\n    });\r\n  } else if (items.length >= 3) {\r\n    // If there are three or more items, we will join all but the first and\r\n    // last items with the equivalent of a comma, and then we will feed that\r\n    // into the translator along with the first and last item.\r\n    const second = items\r\n      .slice(1, items.length - 1)\r\n      .reduce((list, item) => list.concat([item, app.translator.trans('core.lib.series.glue_text')]), [])\r\n      .slice(0, -1);\r\n\r\n    return app.translator.trans('core.lib.series.three_text', {\r\n      first: items[0],\r\n      second,\r\n      third: items[items.length - 1]\r\n    });\r\n  }\r\n\r\n  return items;\r\n}\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = global[\"jQuery\"] = require(\"-!E:\\\\flarum\\\\core\\\\js\\\\node_modules\\\\imports-loader\\\\index.js?this=>window!.\\\\zepto.js\");","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/* Zepto v1.2.0 - zepto event ajax form ie - zeptojs.com/license */\n(function(global, factory) {\n  if (typeof define === 'function' && define.amd)\n    define(function() { return factory(global) })\n  else\n    factory(global)\n}(this, function(window) {\n  var Zepto = (function() {\n  var undefined, key, $, classList, emptyArray = [], concat = emptyArray.concat, filter = emptyArray.filter, slice = emptyArray.slice,\n    document = window.document,\n    elementDisplay = {}, classCache = {},\n    cssNumber = { 'column-count': 1, 'columns': 1, 'font-weight': 1, 'line-height': 1,'opacity': 1, 'z-index': 1, 'zoom': 1 },\n    fragmentRE = /^\\s*<(\\w+|!)[^>]*>/,\n    singleTagRE = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\n    tagExpanderRE = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/ig,\n    rootNodeRE = /^(?:body|html)$/i,\n    capitalRE = /([A-Z])/g,\n\n    // special attributes that should be get/set via method calls\n    methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],\n\n    adjacencyOperators = [ 'after', 'prepend', 'before', 'append' ],\n    table = document.createElement('table'),\n    tableRow = document.createElement('tr'),\n    containers = {\n      'tr': document.createElement('tbody'),\n      'tbody': table, 'thead': table, 'tfoot': table,\n      'td': tableRow, 'th': tableRow,\n      '*': document.createElement('div')\n    },\n    readyRE = /complete|loaded|interactive/,\n    simpleSelectorRE = /^[\\w-]*$/,\n    class2type = {},\n    toString = class2type.toString,\n    zepto = {},\n    camelize, uniq,\n    tempParent = document.createElement('div'),\n    propMap = {\n      'tabindex': 'tabIndex',\n      'readonly': 'readOnly',\n      'for': 'htmlFor',\n      'class': 'className',\n      'maxlength': 'maxLength',\n      'cellspacing': 'cellSpacing',\n      'cellpadding': 'cellPadding',\n      'rowspan': 'rowSpan',\n      'colspan': 'colSpan',\n      'usemap': 'useMap',\n      'frameborder': 'frameBorder',\n      'contenteditable': 'contentEditable'\n    },\n    isArray = Array.isArray ||\n      function(object){ return object instanceof Array }\n\n  zepto.matches = function(element, selector) {\n    if (!selector || !element || element.nodeType !== 1) return false\n    var matchesSelector = element.matches || element.webkitMatchesSelector ||\n                          element.mozMatchesSelector || element.oMatchesSelector ||\n                          element.matchesSelector\n    if (matchesSelector) return matchesSelector.call(element, selector)\n    // fall back to performing a selector:\n    var match, parent = element.parentNode, temp = !parent\n    if (temp) (parent = tempParent).appendChild(element)\n    match = ~zepto.qsa(parent, selector).indexOf(element)\n    temp && tempParent.removeChild(element)\n    return match\n  }\n\n  function type(obj) {\n    return obj == null ? String(obj) :\n      class2type[toString.call(obj)] || \"object\"\n  }\n\n  function isFunction(value) { return type(value) == \"function\" }\n  function isWindow(obj)     { return obj != null && obj == obj.window }\n  function isDocument(obj)   { return obj != null && obj.nodeType == obj.DOCUMENT_NODE }\n  function isObject(obj)     { return type(obj) == \"object\" }\n  function isPlainObject(obj) {\n    return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype\n  }\n\n  function likeArray(obj) {\n    var length = !!obj && 'length' in obj && obj.length,\n      type = $.type(obj)\n\n    return 'function' != type && !isWindow(obj) && (\n      'array' == type || length === 0 ||\n        (typeof length == 'number' && length > 0 && (length - 1) in obj)\n    )\n  }\n\n  function compact(array) { return filter.call(array, function(item){ return item != null }) }\n  function flatten(array) { return array.length > 0 ? $.fn.concat.apply([], array) : array }\n  camelize = function(str){ return str.replace(/-+(.)?/g, function(match, chr){ return chr ? chr.toUpperCase() : '' }) }\n  function dasherize(str) {\n    return str.replace(/::/g, '/')\n           .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\n           .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\n           .replace(/_/g, '-')\n           .toLowerCase()\n  }\n  uniq = function(array){ return filter.call(array, function(item, idx){ return array.indexOf(item) == idx }) }\n\n  function classRE(name) {\n    return name in classCache ?\n      classCache[name] : (classCache[name] = new RegExp('(^|\\\\s)' + name + '(\\\\s|$)'))\n  }\n\n  function maybeAddPx(name, value) {\n    return (typeof value == \"number\" && !cssNumber[dasherize(name)]) ? value + \"px\" : value\n  }\n\n  function defaultDisplay(nodeName) {\n    var element, display\n    if (!elementDisplay[nodeName]) {\n      element = document.createElement(nodeName)\n      document.body.appendChild(element)\n      display = getComputedStyle(element, '').getPropertyValue(\"display\")\n      element.parentNode.removeChild(element)\n      display == \"none\" && (display = \"block\")\n      elementDisplay[nodeName] = display\n    }\n    return elementDisplay[nodeName]\n  }\n\n  function children(element) {\n    return 'children' in element ?\n      slice.call(element.children) :\n      $.map(element.childNodes, function(node){ if (node.nodeType == 1) return node })\n  }\n\n  function Z(dom, selector) {\n    var i, len = dom ? dom.length : 0\n    for (i = 0; i < len; i++) this[i] = dom[i]\n    this.length = len\n    this.selector = selector || ''\n  }\n\n  // `$.zepto.fragment` takes a html string and an optional tag name\n  // to generate DOM nodes from the given html string.\n  // The generated DOM nodes are returned as an array.\n  // This function can be overridden in plugins for example to make\n  // it compatible with browsers that don't support the DOM fully.\n  zepto.fragment = function(html, name, properties) {\n    var dom, nodes, container\n\n    // A special case optimization for a single tag\n    if (singleTagRE.test(html)) dom = $(document.createElement(RegExp.$1))\n\n    if (!dom) {\n      if (html.replace) html = html.replace(tagExpanderRE, \"<$1></$2>\")\n      if (name === undefined) name = fragmentRE.test(html) && RegExp.$1\n      if (!(name in containers)) name = '*'\n\n      container = containers[name]\n      container.innerHTML = '' + html\n      dom = $.each(slice.call(container.childNodes), function(){\n        container.removeChild(this)\n      })\n    }\n\n    if (isPlainObject(properties)) {\n      nodes = $(dom)\n      $.each(properties, function(key, value) {\n        if (methodAttributes.indexOf(key) > -1) nodes[key](value)\n        else nodes.attr(key, value)\n      })\n    }\n\n    return dom\n  }\n\n  // `$.zepto.Z` swaps out the prototype of the given `dom` array\n  // of nodes with `$.fn` and thus supplying all the Zepto functions\n  // to the array. This method can be overridden in plugins.\n  zepto.Z = function(dom, selector) {\n    return new Z(dom, selector)\n  }\n\n  // `$.zepto.isZ` should return `true` if the given object is a Zepto\n  // collection. This method can be overridden in plugins.\n  zepto.isZ = function(object) {\n    return object instanceof zepto.Z\n  }\n\n  // `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and\n  // takes a CSS selector and an optional context (and handles various\n  // special cases).\n  // This method can be overridden in plugins.\n  zepto.init = function(selector, context) {\n    var dom\n    // If nothing given, return an empty Zepto collection\n    if (!selector) return zepto.Z()\n    // Optimize for string selectors\n    else if (typeof selector == 'string') {\n      selector = selector.trim()\n      // If it's a html fragment, create nodes from it\n      // Note: In both Chrome 21 and Firefox 15, DOM error 12\n      // is thrown if the fragment doesn't begin with <\n      if (selector[0] == '<' && fragmentRE.test(selector))\n        dom = zepto.fragment(selector, RegExp.$1, context), selector = null\n      // If there's a context, create a collection on that context first, and select\n      // nodes from there\n      else if (context !== undefined) return $(context).find(selector)\n      // If it's a CSS selector, use it to select nodes.\n      else dom = zepto.qsa(document, selector)\n    }\n    // If a function is given, call it when the DOM is ready\n    else if (isFunction(selector)) return $(document).ready(selector)\n    // If a Zepto collection is given, just return it\n    else if (zepto.isZ(selector)) return selector\n    else {\n      // normalize array if an array of nodes is given\n      if (isArray(selector)) dom = compact(selector)\n      // Wrap DOM nodes.\n      else if (isObject(selector))\n        dom = [selector], selector = null\n      // If it's a html fragment, create nodes from it\n      else if (fragmentRE.test(selector))\n        dom = zepto.fragment(selector.trim(), RegExp.$1, context), selector = null\n      // If there's a context, create a collection on that context first, and select\n      // nodes from there\n      else if (context !== undefined) return $(context).find(selector)\n      // And last but no least, if it's a CSS selector, use it to select nodes.\n      else dom = zepto.qsa(document, selector)\n    }\n    // create a new Zepto collection from the nodes found\n    return zepto.Z(dom, selector)\n  }\n\n  // `$` will be the base `Zepto` object. When calling this\n  // function just call `$.zepto.init, which makes the implementation\n  // details of selecting nodes and creating Zepto collections\n  // patchable in plugins.\n  $ = function(selector, context){\n    return zepto.init(selector, context)\n  }\n\n  function extend(target, source, deep) {\n    for (key in source)\n      if (deep && (isPlainObject(source[key]) || isArray(source[key]))) {\n        if (isPlainObject(source[key]) && !isPlainObject(target[key]))\n          target[key] = {}\n        if (isArray(source[key]) && !isArray(target[key]))\n          target[key] = []\n        extend(target[key], source[key], deep)\n      }\n      else if (source[key] !== undefined) target[key] = source[key]\n  }\n\n  // Copy all but undefined properties from one or more\n  // objects to the `target` object.\n  $.extend = function(target){\n    var deep, args = slice.call(arguments, 1)\n    if (typeof target == 'boolean') {\n      deep = target\n      target = args.shift()\n    }\n    args.forEach(function(arg){ extend(target, arg, deep) })\n    return target\n  }\n\n  // `$.zepto.qsa` is Zepto's CSS selector implementation which\n  // uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.\n  // This method can be overridden in plugins.\n  zepto.qsa = function(element, selector){\n    var found,\n        maybeID = selector[0] == '#',\n        maybeClass = !maybeID && selector[0] == '.',\n        nameOnly = maybeID || maybeClass ? selector.slice(1) : selector, // Ensure that a 1 char tag name still gets checked\n        isSimple = simpleSelectorRE.test(nameOnly)\n    return (element.getElementById && isSimple && maybeID) ? // Safari DocumentFragment doesn't have getElementById\n      ( (found = element.getElementById(nameOnly)) ? [found] : [] ) :\n      (element.nodeType !== 1 && element.nodeType !== 9 && element.nodeType !== 11) ? [] :\n      slice.call(\n        isSimple && !maybeID && element.getElementsByClassName ? // DocumentFragment doesn't have getElementsByClassName/TagName\n          maybeClass ? element.getElementsByClassName(nameOnly) : // If it's simple, it could be a class\n          element.getElementsByTagName(selector) : // Or a tag\n          element.querySelectorAll(selector) // Or it's not simple, and we need to query all\n      )\n  }\n\n  function filtered(nodes, selector) {\n    return selector == null ? $(nodes) : $(nodes).filter(selector)\n  }\n\n  $.contains = document.documentElement.contains ?\n    function(parent, node) {\n      return parent !== node && parent.contains(node)\n    } :\n    function(parent, node) {\n      while (node && (node = node.parentNode))\n        if (node === parent) return true\n      return false\n    }\n\n  function funcArg(context, arg, idx, payload) {\n    return isFunction(arg) ? arg.call(context, idx, payload) : arg\n  }\n\n  function setAttribute(node, name, value) {\n    value == null ? node.removeAttribute(name) : node.setAttribute(name, value)\n  }\n\n  // access className property while respecting SVGAnimatedString\n  function className(node, value){\n    var klass = node.className || '',\n        svg   = klass && klass.baseVal !== undefined\n\n    if (value === undefined) return svg ? klass.baseVal : klass\n    svg ? (klass.baseVal = value) : (node.className = value)\n  }\n\n  // \"true\"  => true\n  // \"false\" => false\n  // \"null\"  => null\n  // \"42\"    => 42\n  // \"42.5\"  => 42.5\n  // \"08\"    => \"08\"\n  // JSON    => parse if valid\n  // String  => self\n  function deserializeValue(value) {\n    try {\n      return value ?\n        value == \"true\" ||\n        ( value == \"false\" ? false :\n          value == \"null\" ? null :\n          +value + \"\" == value ? +value :\n          /^[\\[\\{]/.test(value) ? $.parseJSON(value) :\n          value )\n        : value\n    } catch(e) {\n      return value\n    }\n  }\n\n  $.type = type\n  $.isFunction = isFunction\n  $.isWindow = isWindow\n  $.isArray = isArray\n  $.isPlainObject = isPlainObject\n\n  $.isEmptyObject = function(obj) {\n    var name\n    for (name in obj) return false\n    return true\n  }\n\n  $.isNumeric = function(val) {\n    var num = Number(val), type = typeof val\n    return val != null && type != 'boolean' &&\n      (type != 'string' || val.length) &&\n      !isNaN(num) && isFinite(num) || false\n  }\n\n  $.inArray = function(elem, array, i){\n    return emptyArray.indexOf.call(array, elem, i)\n  }\n\n  $.camelCase = camelize\n  $.trim = function(str) {\n    return str == null ? \"\" : String.prototype.trim.call(str)\n  }\n\n  // plugin compatibility\n  $.uuid = 0\n  $.support = { }\n  $.expr = { }\n  $.noop = function() {}\n\n  $.map = function(elements, callback){\n    var value, values = [], i, key\n    if (likeArray(elements))\n      for (i = 0; i < elements.length; i++) {\n        value = callback(elements[i], i)\n        if (value != null) values.push(value)\n      }\n    else\n      for (key in elements) {\n        value = callback(elements[key], key)\n        if (value != null) values.push(value)\n      }\n    return flatten(values)\n  }\n\n  $.each = function(elements, callback){\n    var i, key\n    if (likeArray(elements)) {\n      for (i = 0; i < elements.length; i++)\n        if (callback.call(elements[i], i, elements[i]) === false) return elements\n    } else {\n      for (key in elements)\n        if (callback.call(elements[key], key, elements[key]) === false) return elements\n    }\n\n    return elements\n  }\n\n  $.grep = function(elements, callback){\n    return filter.call(elements, callback)\n  }\n\n  if (window.JSON) $.parseJSON = JSON.parse\n\n  // Populate the class2type map\n  $.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) {\n    class2type[ \"[object \" + name + \"]\" ] = name.toLowerCase()\n  })\n\n  // Define methods that will be available on all\n  // Zepto collections\n  $.fn = {\n    constructor: zepto.Z,\n    length: 0,\n\n    // Because a collection acts like an array\n    // copy over these useful array functions.\n    forEach: emptyArray.forEach,\n    reduce: emptyArray.reduce,\n    push: emptyArray.push,\n    sort: emptyArray.sort,\n    splice: emptyArray.splice,\n    indexOf: emptyArray.indexOf,\n    concat: function(){\n      var i, value, args = []\n      for (i = 0; i < arguments.length; i++) {\n        value = arguments[i]\n        args[i] = zepto.isZ(value) ? value.toArray() : value\n      }\n      return concat.apply(zepto.isZ(this) ? this.toArray() : this, args)\n    },\n\n    // `map` and `slice` in the jQuery API work differently\n    // from their array counterparts\n    map: function(fn){\n      return $($.map(this, function(el, i){ return fn.call(el, i, el) }))\n    },\n    slice: function(){\n      return $(slice.apply(this, arguments))\n    },\n\n    ready: function(callback){\n      // need to check if document.body exists for IE as that browser reports\n      // document ready when it hasn't yet created the body element\n      if (readyRE.test(document.readyState) && document.body) callback($)\n      else document.addEventListener('DOMContentLoaded', function(){ callback($) }, false)\n      return this\n    },\n    get: function(idx){\n      return idx === undefined ? slice.call(this) : this[idx >= 0 ? idx : idx + this.length]\n    },\n    toArray: function(){ return this.get() },\n    size: function(){\n      return this.length\n    },\n    remove: function(){\n      return this.each(function(){\n        if (this.parentNode != null)\n          this.parentNode.removeChild(this)\n      })\n    },\n    each: function(callback){\n      emptyArray.every.call(this, function(el, idx){\n        return callback.call(el, idx, el) !== false\n      })\n      return this\n    },\n    filter: function(selector){\n      if (isFunction(selector)) return this.not(this.not(selector))\n      return $(filter.call(this, function(element){\n        return zepto.matches(element, selector)\n      }))\n    },\n    add: function(selector,context){\n      return $(uniq(this.concat($(selector,context))))\n    },\n    is: function(selector){\n      return this.length > 0 && zepto.matches(this[0], selector)\n    },\n    not: function(selector){\n      var nodes=[]\n      if (isFunction(selector) && selector.call !== undefined)\n        this.each(function(idx){\n          if (!selector.call(this,idx)) nodes.push(this)\n        })\n      else {\n        var excludes = typeof selector == 'string' ? this.filter(selector) :\n          (likeArray(selector) && isFunction(selector.item)) ? slice.call(selector) : $(selector)\n        this.forEach(function(el){\n          if (excludes.indexOf(el) < 0) nodes.push(el)\n        })\n      }\n      return $(nodes)\n    },\n    has: function(selector){\n      return this.filter(function(){\n        return isObject(selector) ?\n          $.contains(this, selector) :\n          $(this).find(selector).size()\n      })\n    },\n    eq: function(idx){\n      return idx === -1 ? this.slice(idx) : this.slice(idx, + idx + 1)\n    },\n    first: function(){\n      var el = this[0]\n      return el && !isObject(el) ? el : $(el)\n    },\n    last: function(){\n      var el = this[this.length - 1]\n      return el && !isObject(el) ? el : $(el)\n    },\n    find: function(selector){\n      var result, $this = this\n      if (!selector) result = $()\n      else if (typeof selector == 'object')\n        result = $(selector).filter(function(){\n          var node = this\n          return emptyArray.some.call($this, function(parent){\n            return $.contains(parent, node)\n          })\n        })\n      else if (this.length == 1) result = $(zepto.qsa(this[0], selector))\n      else result = this.map(function(){ return zepto.qsa(this, selector) })\n      return result\n    },\n    closest: function(selector, context){\n      var nodes = [], collection = typeof selector == 'object' && $(selector)\n      this.each(function(_, node){\n        while (node && !(collection ? collection.indexOf(node) >= 0 : zepto.matches(node, selector)))\n          node = node !== context && !isDocument(node) && node.parentNode\n        if (node && nodes.indexOf(node) < 0) nodes.push(node)\n      })\n      return $(nodes)\n    },\n    parents: function(selector){\n      var ancestors = [], nodes = this\n      while (nodes.length > 0)\n        nodes = $.map(nodes, function(node){\n          if ((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0) {\n            ancestors.push(node)\n            return node\n          }\n        })\n      return filtered(ancestors, selector)\n    },\n    parent: function(selector){\n      return filtered(uniq(this.pluck('parentNode')), selector)\n    },\n    children: function(selector){\n      return filtered(this.map(function(){ return children(this) }), selector)\n    },\n    contents: function() {\n      return this.map(function() { return this.contentDocument || slice.call(this.childNodes) })\n    },\n    siblings: function(selector){\n      return filtered(this.map(function(i, el){\n        return filter.call(children(el.parentNode), function(child){ return child!==el })\n      }), selector)\n    },\n    empty: function(){\n      return this.each(function(){ this.innerHTML = '' })\n    },\n    // `pluck` is borrowed from Prototype.js\n    pluck: function(property){\n      return $.map(this, function(el){ return el[property] })\n    },\n    show: function(){\n      return this.each(function(){\n        this.style.display == \"none\" && (this.style.display = '')\n        if (getComputedStyle(this, '').getPropertyValue(\"display\") == \"none\")\n          this.style.display = defaultDisplay(this.nodeName)\n      })\n    },\n    replaceWith: function(newContent){\n      return this.before(newContent).remove()\n    },\n    wrap: function(structure){\n      var func = isFunction(structure)\n      if (this[0] && !func)\n        var dom   = $(structure).get(0),\n            clone = dom.parentNode || this.length > 1\n\n      return this.each(function(index){\n        $(this).wrapAll(\n          func ? structure.call(this, index) :\n            clone ? dom.cloneNode(true) : dom\n        )\n      })\n    },\n    wrapAll: function(structure){\n      if (this[0]) {\n        $(this[0]).before(structure = $(structure))\n        var children\n        // drill down to the inmost element\n        while ((children = structure.children()).length) structure = children.first()\n        $(structure).append(this)\n      }\n      return this\n    },\n    wrapInner: function(structure){\n      var func = isFunction(structure)\n      return this.each(function(index){\n        var self = $(this), contents = self.contents(),\n            dom  = func ? structure.call(this, index) : structure\n        contents.length ? contents.wrapAll(dom) : self.append(dom)\n      })\n    },\n    unwrap: function(){\n      this.parent().each(function(){\n        $(this).replaceWith($(this).children())\n      })\n      return this\n    },\n    clone: function(){\n      return this.map(function(){ return this.cloneNode(true) })\n    },\n    hide: function(){\n      return this.css(\"display\", \"none\")\n    },\n    toggle: function(setting){\n      return this.each(function(){\n        var el = $(this)\n        ;(setting === undefined ? el.css(\"display\") == \"none\" : setting) ? el.show() : el.hide()\n      })\n    },\n    prev: function(selector){ return $(this.pluck('previousElementSibling')).filter(selector || '*') },\n    next: function(selector){ return $(this.pluck('nextElementSibling')).filter(selector || '*') },\n    html: function(html){\n      return 0 in arguments ?\n        this.each(function(idx){\n          var originHtml = this.innerHTML\n          $(this).empty().append( funcArg(this, html, idx, originHtml) )\n        }) :\n        (0 in this ? this[0].innerHTML : null)\n    },\n    text: function(text){\n      return 0 in arguments ?\n        this.each(function(idx){\n          var newText = funcArg(this, text, idx, this.textContent)\n          this.textContent = newText == null ? '' : ''+newText\n        }) :\n        (0 in this ? this.pluck('textContent').join(\"\") : null)\n    },\n    attr: function(name, value){\n      var result\n      return (typeof name == 'string' && !(1 in arguments)) ?\n        (0 in this && this[0].nodeType == 1 && (result = this[0].getAttribute(name)) != null ? result : undefined) :\n        this.each(function(idx){\n          if (this.nodeType !== 1) return\n          if (isObject(name)) for (key in name) setAttribute(this, key, name[key])\n          else setAttribute(this, name, funcArg(this, value, idx, this.getAttribute(name)))\n        })\n    },\n    removeAttr: function(name){\n      return this.each(function(){ this.nodeType === 1 && name.split(' ').forEach(function(attribute){\n        setAttribute(this, attribute)\n      }, this)})\n    },\n    prop: function(name, value){\n      name = propMap[name] || name\n      return (1 in arguments) ?\n        this.each(function(idx){\n          this[name] = funcArg(this, value, idx, this[name])\n        }) :\n        (this[0] && this[0][name])\n    },\n    removeProp: function(name){\n      name = propMap[name] || name\n      return this.each(function(){ delete this[name] })\n    },\n    data: function(name, value){\n      var attrName = 'data-' + name.replace(capitalRE, '-$1').toLowerCase()\n\n      var data = (1 in arguments) ?\n        this.attr(attrName, value) :\n        this.attr(attrName)\n\n      return data !== null ? deserializeValue(data) : undefined\n    },\n    val: function(value){\n      if (0 in arguments) {\n        if (value == null) value = \"\"\n        return this.each(function(idx){\n          this.value = funcArg(this, value, idx, this.value)\n        })\n      } else {\n        return this[0] && (this[0].multiple ?\n           $(this[0]).find('option').filter(function(){ return this.selected }).pluck('value') :\n           this[0].value)\n      }\n    },\n    offset: function(coordinates){\n      if (coordinates) return this.each(function(index){\n        var $this = $(this),\n            coords = funcArg(this, coordinates, index, $this.offset()),\n            parentOffset = $this.offsetParent().offset(),\n            props = {\n              top:  coords.top  - parentOffset.top,\n              left: coords.left - parentOffset.left\n            }\n\n        if ($this.css('position') == 'static') props['position'] = 'relative'\n        $this.css(props)\n      })\n      if (!this.length) return null\n      if (document.documentElement !== this[0] && !$.contains(document.documentElement, this[0]))\n        return {top: 0, left: 0}\n      var obj = this[0].getBoundingClientRect()\n      return {\n        left: obj.left + window.pageXOffset,\n        top: obj.top + window.pageYOffset,\n        width: Math.round(obj.width),\n        height: Math.round(obj.height)\n      }\n    },\n    css: function(property, value){\n      if (arguments.length < 2) {\n        var element = this[0]\n        if (typeof property == 'string') {\n          if (!element) return\n          return element.style[camelize(property)] || getComputedStyle(element, '').getPropertyValue(property)\n        } else if (isArray(property)) {\n          if (!element) return\n          var props = {}\n          var computedStyle = getComputedStyle(element, '')\n          $.each(property, function(_, prop){\n            props[prop] = (element.style[camelize(prop)] || computedStyle.getPropertyValue(prop))\n          })\n          return props\n        }\n      }\n\n      var css = ''\n      if (type(property) == 'string') {\n        if (!value && value !== 0)\n          this.each(function(){ this.style.removeProperty(dasherize(property)) })\n        else\n          css = dasherize(property) + \":\" + maybeAddPx(property, value)\n      } else {\n        for (key in property)\n          if (!property[key] && property[key] !== 0)\n            this.each(function(){ this.style.removeProperty(dasherize(key)) })\n          else\n            css += dasherize(key) + ':' + maybeAddPx(key, property[key]) + ';'\n      }\n\n      return this.each(function(){ this.style.cssText += ';' + css })\n    },\n    index: function(element){\n      return element ? this.indexOf($(element)[0]) : this.parent().children().indexOf(this[0])\n    },\n    hasClass: function(name){\n      if (!name) return false\n      return emptyArray.some.call(this, function(el){\n        return this.test(className(el))\n      }, classRE(name))\n    },\n    addClass: function(name){\n      if (!name) return this\n      return this.each(function(idx){\n        if (!('className' in this)) return\n        classList = []\n        var cls = className(this), newName = funcArg(this, name, idx, cls)\n        newName.split(/\\s+/g).forEach(function(klass){\n          if (!$(this).hasClass(klass)) classList.push(klass)\n        }, this)\n        classList.length && className(this, cls + (cls ? \" \" : \"\") + classList.join(\" \"))\n      })\n    },\n    removeClass: function(name){\n      return this.each(function(idx){\n        if (!('className' in this)) return\n        if (name === undefined) return className(this, '')\n        classList = className(this)\n        funcArg(this, name, idx, classList).split(/\\s+/g).forEach(function(klass){\n          classList = classList.replace(classRE(klass), \" \")\n        })\n        className(this, classList.trim())\n      })\n    },\n    toggleClass: function(name, when){\n      if (!name) return this\n      return this.each(function(idx){\n        var $this = $(this), names = funcArg(this, name, idx, className(this))\n        names.split(/\\s+/g).forEach(function(klass){\n          (when === undefined ? !$this.hasClass(klass) : when) ?\n            $this.addClass(klass) : $this.removeClass(klass)\n        })\n      })\n    },\n    scrollTop: function(value){\n      if (!this.length) return\n      var hasScrollTop = 'scrollTop' in this[0]\n      if (value === undefined) return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset\n      return this.each(hasScrollTop ?\n        function(){ this.scrollTop = value } :\n        function(){ this.scrollTo(this.scrollX, value) })\n    },\n    scrollLeft: function(value){\n      if (!this.length) return\n      var hasScrollLeft = 'scrollLeft' in this[0]\n      if (value === undefined) return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset\n      return this.each(hasScrollLeft ?\n        function(){ this.scrollLeft = value } :\n        function(){ this.scrollTo(value, this.scrollY) })\n    },\n    position: function() {\n      if (!this.length) return\n\n      var elem = this[0],\n        // Get *real* offsetParent\n        offsetParent = this.offsetParent(),\n        // Get correct offsets\n        offset       = this.offset(),\n        parentOffset = rootNodeRE.test(offsetParent[0].nodeName) ? { top: 0, left: 0 } : offsetParent.offset()\n\n      // Subtract element margins\n      // note: when an element has margin: auto the offsetLeft and marginLeft\n      // are the same in Safari causing offset.left to incorrectly be 0\n      offset.top  -= parseFloat( $(elem).css('margin-top') ) || 0\n      offset.left -= parseFloat( $(elem).css('margin-left') ) || 0\n\n      // Add offsetParent borders\n      parentOffset.top  += parseFloat( $(offsetParent[0]).css('border-top-width') ) || 0\n      parentOffset.left += parseFloat( $(offsetParent[0]).css('border-left-width') ) || 0\n\n      // Subtract the two offsets\n      return {\n        top:  offset.top  - parentOffset.top,\n        left: offset.left - parentOffset.left\n      }\n    },\n    offsetParent: function() {\n      return this.map(function(){\n        var parent = this.offsetParent || document.body\n        while (parent && !rootNodeRE.test(parent.nodeName) && $(parent).css(\"position\") == \"static\")\n          parent = parent.offsetParent\n        return parent\n      })\n    }\n  }\n\n  // for now\n  $.fn.detach = $.fn.remove\n\n  // Generate the `width` and `height` functions\n  ;['width', 'height'].forEach(function(dimension){\n    var dimensionProperty =\n      dimension.replace(/./, function(m){ return m[0].toUpperCase() })\n\n    $.fn[dimension] = function(value){\n      var offset, el = this[0]\n      if (value === undefined) return isWindow(el) ? el['inner' + dimensionProperty] :\n        isDocument(el) ? el.documentElement['scroll' + dimensionProperty] :\n        (offset = this.offset()) && offset[dimension]\n      else return this.each(function(idx){\n        el = $(this)\n        el.css(dimension, funcArg(this, value, idx, el[dimension]()))\n      })\n    }\n  })\n\n  function traverseNode(node, fun) {\n    fun(node)\n    for (var i = 0, len = node.childNodes.length; i < len; i++)\n      traverseNode(node.childNodes[i], fun)\n  }\n\n  // Generate the `after`, `prepend`, `before`, `append`,\n  // `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.\n  adjacencyOperators.forEach(function(operator, operatorIndex) {\n    var inside = operatorIndex % 2 //=> prepend, append\n\n    $.fn[operator] = function(){\n      // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings\n      var argType, nodes = $.map(arguments, function(arg) {\n            var arr = []\n            argType = type(arg)\n            if (argType == \"array\") {\n              arg.forEach(function(el) {\n                if (el.nodeType !== undefined) return arr.push(el)\n                else if ($.zepto.isZ(el)) return arr = arr.concat(el.get())\n                arr = arr.concat(zepto.fragment(el))\n              })\n              return arr\n            }\n            return argType == \"object\" || arg == null ?\n              arg : zepto.fragment(arg)\n          }),\n          parent, copyByClone = this.length > 1\n      if (nodes.length < 1) return this\n\n      return this.each(function(_, target){\n        parent = inside ? target : target.parentNode\n\n        // convert all methods to a \"before\" operation\n        target = operatorIndex == 0 ? target.nextSibling :\n                 operatorIndex == 1 ? target.firstChild :\n                 operatorIndex == 2 ? target :\n                 null\n\n        var parentInDocument = $.contains(document.documentElement, parent)\n\n        nodes.forEach(function(node){\n          if (copyByClone) node = node.cloneNode(true)\n          else if (!parent) return $(node).remove()\n\n          parent.insertBefore(node, target)\n          if (parentInDocument) traverseNode(node, function(el){\n            if (el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' &&\n               (!el.type || el.type === 'text/javascript') && !el.src){\n              var target = el.ownerDocument ? el.ownerDocument.defaultView : window\n              target['eval'].call(target, el.innerHTML)\n            }\n          })\n        })\n      })\n    }\n\n    // after    => insertAfter\n    // prepend  => prependTo\n    // before   => insertBefore\n    // append   => appendTo\n    $.fn[inside ? operator+'To' : 'insert'+(operatorIndex ? 'Before' : 'After')] = function(html){\n      $(html)[operator](this)\n      return this\n    }\n  })\n\n  zepto.Z.prototype = Z.prototype = $.fn\n\n  // Export internal API functions in the `$.zepto` namespace\n  zepto.uniq = uniq\n  zepto.deserializeValue = deserializeValue\n  $.zepto = zepto\n\n  return $\n})()\n\nwindow.Zepto = Zepto\nwindow.$ === undefined && (window.$ = Zepto)\n\n;(function($){\n  var _zid = 1, undefined,\n      slice = Array.prototype.slice,\n      isFunction = $.isFunction,\n      isString = function(obj){ return typeof obj == 'string' },\n      handlers = {},\n      specialEvents={},\n      focusinSupported = 'onfocusin' in window,\n      focus = { focus: 'focusin', blur: 'focusout' },\n      hover = { mouseenter: 'mouseover', mouseleave: 'mouseout' }\n\n  specialEvents.click = specialEvents.mousedown = specialEvents.mouseup = specialEvents.mousemove = 'MouseEvents'\n\n  function zid(element) {\n    return element._zid || (element._zid = _zid++)\n  }\n  function findHandlers(element, event, fn, selector) {\n    event = parse(event)\n    if (event.ns) var matcher = matcherFor(event.ns)\n    return (handlers[zid(element)] || []).filter(function(handler) {\n      return handler\n        && (!event.e  || handler.e == event.e)\n        && (!event.ns || matcher.test(handler.ns))\n        && (!fn       || zid(handler.fn) === zid(fn))\n        && (!selector || handler.sel == selector)\n    })\n  }\n  function parse(event) {\n    var parts = ('' + event).split('.')\n    return {e: parts[0], ns: parts.slice(1).sort().join(' ')}\n  }\n  function matcherFor(ns) {\n    return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)')\n  }\n\n  function eventCapture(handler, captureSetting) {\n    return handler.del &&\n      (!focusinSupported && (handler.e in focus)) ||\n      !!captureSetting\n  }\n\n  function realEvent(type) {\n    return hover[type] || (focusinSupported && focus[type]) || type\n  }\n\n  function add(element, events, fn, data, selector, delegator, capture){\n    var id = zid(element), set = (handlers[id] || (handlers[id] = []))\n    events.split(/\\s/).forEach(function(event){\n      if (event == 'ready') return $(document).ready(fn)\n      var handler   = parse(event)\n      handler.fn    = fn\n      handler.sel   = selector\n      // emulate mouseenter, mouseleave\n      if (handler.e in hover) fn = function(e){\n        var related = e.relatedTarget\n        if (!related || (related !== this && !$.contains(this, related)))\n          return handler.fn.apply(this, arguments)\n      }\n      handler.del   = delegator\n      var callback  = delegator || fn\n      handler.proxy = function(e){\n        e = compatible(e)\n        if (e.isImmediatePropagationStopped()) return\n        e.data = data\n        var result = callback.apply(element, e._args == undefined ? [e] : [e].concat(e._args))\n        if (result === false) e.preventDefault(), e.stopPropagation()\n        return result\n      }\n      handler.i = set.length\n      set.push(handler)\n      if ('addEventListener' in element)\n        element.addEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\n    })\n  }\n  function remove(element, events, fn, selector, capture){\n    var id = zid(element)\n    ;(events || '').split(/\\s/).forEach(function(event){\n      findHandlers(element, event, fn, selector).forEach(function(handler){\n        delete handlers[id][handler.i]\n      if ('removeEventListener' in element)\n        element.removeEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture))\n      })\n    })\n  }\n\n  $.event = { add: add, remove: remove }\n\n  $.proxy = function(fn, context) {\n    var args = (2 in arguments) && slice.call(arguments, 2)\n    if (isFunction(fn)) {\n      var proxyFn = function(){ return fn.apply(context, args ? args.concat(slice.call(arguments)) : arguments) }\n      proxyFn._zid = zid(fn)\n      return proxyFn\n    } else if (isString(context)) {\n      if (args) {\n        args.unshift(fn[context], fn)\n        return $.proxy.apply(null, args)\n      } else {\n        return $.proxy(fn[context], fn)\n      }\n    } else {\n      throw new TypeError(\"expected function\")\n    }\n  }\n\n  $.fn.bind = function(event, data, callback){\n    return this.on(event, data, callback)\n  }\n  $.fn.unbind = function(event, callback){\n    return this.off(event, callback)\n  }\n  $.fn.one = function(event, selector, data, callback){\n    return this.on(event, selector, data, callback, 1)\n  }\n\n  var returnTrue = function(){return true},\n      returnFalse = function(){return false},\n      ignoreProperties = /^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,\n      eventMethods = {\n        preventDefault: 'isDefaultPrevented',\n        stopImmediatePropagation: 'isImmediatePropagationStopped',\n        stopPropagation: 'isPropagationStopped'\n      }\n\n  function compatible(event, source) {\n    if (source || !event.isDefaultPrevented) {\n      source || (source = event)\n\n      $.each(eventMethods, function(name, predicate) {\n        var sourceMethod = source[name]\n        event[name] = function(){\n          this[predicate] = returnTrue\n          return sourceMethod && sourceMethod.apply(source, arguments)\n        }\n        event[predicate] = returnFalse\n      })\n\n      event.timeStamp || (event.timeStamp = Date.now())\n\n      if (source.defaultPrevented !== undefined ? source.defaultPrevented :\n          'returnValue' in source ? source.returnValue === false :\n          source.getPreventDefault && source.getPreventDefault())\n        event.isDefaultPrevented = returnTrue\n    }\n    return event\n  }\n\n  function createProxy(event) {\n    var key, proxy = { originalEvent: event }\n    for (key in event)\n      if (!ignoreProperties.test(key) && event[key] !== undefined) proxy[key] = event[key]\n\n    return compatible(proxy, event)\n  }\n\n  $.fn.delegate = function(selector, event, callback){\n    return this.on(event, selector, callback)\n  }\n  $.fn.undelegate = function(selector, event, callback){\n    return this.off(event, selector, callback)\n  }\n\n  $.fn.live = function(event, callback){\n    $(document.body).delegate(this.selector, event, callback)\n    return this\n  }\n  $.fn.die = function(event, callback){\n    $(document.body).undelegate(this.selector, event, callback)\n    return this\n  }\n\n  $.fn.on = function(event, selector, data, callback, one){\n    var autoRemove, delegator, $this = this\n    if (event && !isString(event)) {\n      $.each(event, function(type, fn){\n        $this.on(type, selector, data, fn, one)\n      })\n      return $this\n    }\n\n    if (!isString(selector) && !isFunction(callback) && callback !== false)\n      callback = data, data = selector, selector = undefined\n    if (callback === undefined || data === false)\n      callback = data, data = undefined\n\n    if (callback === false) callback = returnFalse\n\n    return $this.each(function(_, element){\n      if (one) autoRemove = function(e){\n        remove(element, e.type, callback)\n        return callback.apply(this, arguments)\n      }\n\n      if (selector) delegator = function(e){\n        var evt, match = $(e.target).closest(selector, element).get(0)\n        if (match && match !== element) {\n          evt = $.extend(createProxy(e), {currentTarget: match, liveFired: element})\n          return (autoRemove || callback).apply(match, [evt].concat(slice.call(arguments, 1)))\n        }\n      }\n\n      add(element, event, callback, data, selector, delegator || autoRemove)\n    })\n  }\n  $.fn.off = function(event, selector, callback){\n    var $this = this\n    if (event && !isString(event)) {\n      $.each(event, function(type, fn){\n        $this.off(type, selector, fn)\n      })\n      return $this\n    }\n\n    if (!isString(selector) && !isFunction(callback) && callback !== false)\n      callback = selector, selector = undefined\n\n    if (callback === false) callback = returnFalse\n\n    return $this.each(function(){\n      remove(this, event, callback, selector)\n    })\n  }\n\n  $.fn.trigger = function(event, args){\n    event = (isString(event) || $.isPlainObject(event)) ? $.Event(event) : compatible(event)\n    event._args = args\n    return this.each(function(){\n      // handle focus(), blur() by calling them directly\n      if (event.type in focus && typeof this[event.type] == \"function\") this[event.type]()\n      // items in the collection might not be DOM elements\n      else if ('dispatchEvent' in this) this.dispatchEvent(event)\n      else $(this).triggerHandler(event, args)\n    })\n  }\n\n  // triggers event handlers on current element just as if an event occurred,\n  // doesn't trigger an actual event, doesn't bubble\n  $.fn.triggerHandler = function(event, args){\n    var e, result\n    this.each(function(i, element){\n      e = createProxy(isString(event) ? $.Event(event) : event)\n      e._args = args\n      e.target = element\n      $.each(findHandlers(element, event.type || event), function(i, handler){\n        result = handler.proxy(e)\n        if (e.isImmediatePropagationStopped()) return false\n      })\n    })\n    return result\n  }\n\n  // shortcut methods for `.bind(event, fn)` for each event type\n  ;('focusin focusout focus blur load resize scroll unload click dblclick '+\n  'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave '+\n  'change select keydown keypress keyup error').split(' ').forEach(function(event) {\n    $.fn[event] = function(callback) {\n      return (0 in arguments) ?\n        this.bind(event, callback) :\n        this.trigger(event)\n    }\n  })\n\n  $.Event = function(type, props) {\n    if (!isString(type)) props = type, type = props.type\n    var event = document.createEvent(specialEvents[type] || 'Events'), bubbles = true\n    if (props) for (var name in props) (name == 'bubbles') ? (bubbles = !!props[name]) : (event[name] = props[name])\n    event.initEvent(type, bubbles, true)\n    return compatible(event)\n  }\n\n})(Zepto)\n\n;(function($){\n  var jsonpID = +new Date(),\n      document = window.document,\n      key,\n      name,\n      rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\n      scriptTypeRE = /^(?:text|application)\\/javascript/i,\n      xmlTypeRE = /^(?:text|application)\\/xml/i,\n      jsonType = 'application/json',\n      htmlType = 'text/html',\n      blankRE = /^\\s*$/,\n      originAnchor = document.createElement('a')\n\n  originAnchor.href = window.location.href\n\n  // trigger a custom event and return false if it was cancelled\n  function triggerAndReturn(context, eventName, data) {\n    var event = $.Event(eventName)\n    $(context).trigger(event, data)\n    return !event.isDefaultPrevented()\n  }\n\n  // trigger an Ajax \"global\" event\n  function triggerGlobal(settings, context, eventName, data) {\n    if (settings.global) return triggerAndReturn(context || document, eventName, data)\n  }\n\n  // Number of active Ajax requests\n  $.active = 0\n\n  function ajaxStart(settings) {\n    if (settings.global && $.active++ === 0) triggerGlobal(settings, null, 'ajaxStart')\n  }\n  function ajaxStop(settings) {\n    if (settings.global && !(--$.active)) triggerGlobal(settings, null, 'ajaxStop')\n  }\n\n  // triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\n  function ajaxBeforeSend(xhr, settings) {\n    var context = settings.context\n    if (settings.beforeSend.call(context, xhr, settings) === false ||\n        triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false)\n      return false\n\n    triggerGlobal(settings, context, 'ajaxSend', [xhr, settings])\n  }\n  function ajaxSuccess(data, xhr, settings, deferred) {\n    var context = settings.context, status = 'success'\n    settings.success.call(context, data, status, xhr)\n    if (deferred) deferred.resolveWith(context, [data, status, xhr])\n    triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data])\n    ajaxComplete(status, xhr, settings)\n  }\n  // type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n  function ajaxError(error, type, xhr, settings, deferred) {\n    var context = settings.context\n    settings.error.call(context, xhr, type, error)\n    if (deferred) deferred.rejectWith(context, [xhr, type, error])\n    triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error || type])\n    ajaxComplete(type, xhr, settings)\n  }\n  // status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n  function ajaxComplete(status, xhr, settings) {\n    var context = settings.context\n    settings.complete.call(context, xhr, status)\n    triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings])\n    ajaxStop(settings)\n  }\n\n  function ajaxDataFilter(data, type, settings) {\n    if (settings.dataFilter == empty) return data\n    var context = settings.context\n    return settings.dataFilter.call(context, data, type)\n  }\n\n  // Empty function, used as default callback\n  function empty() {}\n\n  $.ajaxJSONP = function(options, deferred){\n    if (!('type' in options)) return $.ajax(options)\n\n    var _callbackName = options.jsonpCallback,\n      callbackName = ($.isFunction(_callbackName) ?\n        _callbackName() : _callbackName) || ('Zepto' + (jsonpID++)),\n      script = document.createElement('script'),\n      originalCallback = window[callbackName],\n      responseData,\n      abort = function(errorType) {\n        $(script).triggerHandler('error', errorType || 'abort')\n      },\n      xhr = { abort: abort }, abortTimeout\n\n    if (deferred) deferred.promise(xhr)\n\n    $(script).on('load error', function(e, errorType){\n      clearTimeout(abortTimeout)\n      $(script).off().remove()\n\n      if (e.type == 'error' || !responseData) {\n        ajaxError(null, errorType || 'error', xhr, options, deferred)\n      } else {\n        ajaxSuccess(responseData[0], xhr, options, deferred)\n      }\n\n      window[callbackName] = originalCallback\n      if (responseData && $.isFunction(originalCallback))\n        originalCallback(responseData[0])\n\n      originalCallback = responseData = undefined\n    })\n\n    if (ajaxBeforeSend(xhr, options) === false) {\n      abort('abort')\n      return xhr\n    }\n\n    window[callbackName] = function(){\n      responseData = arguments\n    }\n\n    script.src = options.url.replace(/\\?(.+)=\\?/, '?$1=' + callbackName)\n    document.head.appendChild(script)\n\n    if (options.timeout > 0) abortTimeout = setTimeout(function(){\n      abort('timeout')\n    }, options.timeout)\n\n    return xhr\n  }\n\n  $.ajaxSettings = {\n    // Default type of request\n    type: 'GET',\n    // Callback that is executed before request\n    beforeSend: empty,\n    // Callback that is executed if the request succeeds\n    success: empty,\n    // Callback that is executed the the server drops error\n    error: empty,\n    // Callback that is executed on request complete (both: error and success)\n    complete: empty,\n    // The context for the callbacks\n    context: null,\n    // Whether to trigger \"global\" Ajax events\n    global: true,\n    // Transport\n    xhr: function () {\n      return new window.XMLHttpRequest()\n    },\n    // MIME types mapping\n    // IIS returns Javascript as \"application/x-javascript\"\n    accepts: {\n      script: 'text/javascript, application/javascript, application/x-javascript',\n      json:   jsonType,\n      xml:    'application/xml, text/xml',\n      html:   htmlType,\n      text:   'text/plain'\n    },\n    // Whether the request is to another domain\n    crossDomain: false,\n    // Default timeout\n    timeout: 0,\n    // Whether data should be serialized to string\n    processData: true,\n    // Whether the browser should be allowed to cache GET responses\n    cache: true,\n    //Used to handle the raw response data of XMLHttpRequest.\n    //This is a pre-filtering function to sanitize the response.\n    //The sanitized response should be returned\n    dataFilter: empty\n  }\n\n  function mimeToDataType(mime) {\n    if (mime) mime = mime.split(';', 2)[0]\n    return mime && ( mime == htmlType ? 'html' :\n      mime == jsonType ? 'json' :\n      scriptTypeRE.test(mime) ? 'script' :\n      xmlTypeRE.test(mime) && 'xml' ) || 'text'\n  }\n\n  function appendQuery(url, query) {\n    if (query == '') return url\n    return (url + '&' + query).replace(/[&?]{1,2}/, '?')\n  }\n\n  // serialize payload and append it to the URL for GET requests\n  function serializeData(options) {\n    if (options.processData && options.data && $.type(options.data) != \"string\")\n      options.data = $.param(options.data, options.traditional)\n    if (options.data && (!options.type || options.type.toUpperCase() == 'GET' || 'jsonp' == options.dataType))\n      options.url = appendQuery(options.url, options.data), options.data = undefined\n  }\n\n  $.ajax = function(options){\n    var settings = $.extend({}, options || {}),\n        deferred = $.Deferred && $.Deferred(),\n        urlAnchor, hashIndex\n    for (key in $.ajaxSettings) if (settings[key] === undefined) settings[key] = $.ajaxSettings[key]\n\n    ajaxStart(settings)\n\n    if (!settings.crossDomain) {\n      urlAnchor = document.createElement('a')\n      urlAnchor.href = settings.url\n      // cleans up URL for .href (IE only), see https://github.com/madrobby/zepto/pull/1049\n      urlAnchor.href = urlAnchor.href\n      settings.crossDomain = (originAnchor.protocol + '//' + originAnchor.host) !== (urlAnchor.protocol + '//' + urlAnchor.host)\n    }\n\n    if (!settings.url) settings.url = window.location.toString()\n    if ((hashIndex = settings.url.indexOf('#')) > -1) settings.url = settings.url.slice(0, hashIndex)\n    serializeData(settings)\n\n    var dataType = settings.dataType, hasPlaceholder = /\\?.+=\\?/.test(settings.url)\n    if (hasPlaceholder) dataType = 'jsonp'\n\n    if (settings.cache === false || (\n         (!options || options.cache !== true) &&\n         ('script' == dataType || 'jsonp' == dataType)\n        ))\n      settings.url = appendQuery(settings.url, '_=' + Date.now())\n\n    if ('jsonp' == dataType) {\n      if (!hasPlaceholder)\n        settings.url = appendQuery(settings.url,\n          settings.jsonp ? (settings.jsonp + '=?') : settings.jsonp === false ? '' : 'callback=?')\n      return $.ajaxJSONP(settings, deferred)\n    }\n\n    var mime = settings.accepts[dataType],\n        headers = { },\n        setHeader = function(name, value) { headers[name.toLowerCase()] = [name, value] },\n        protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol,\n        xhr = settings.xhr(),\n        nativeSetHeader = xhr.setRequestHeader,\n        abortTimeout\n\n    if (deferred) deferred.promise(xhr)\n\n    if (!settings.crossDomain) setHeader('X-Requested-With', 'XMLHttpRequest')\n    setHeader('Accept', mime || '*/*')\n    if (mime = settings.mimeType || mime) {\n      if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0]\n      xhr.overrideMimeType && xhr.overrideMimeType(mime)\n    }\n    if (settings.contentType || (settings.contentType !== false && settings.data && settings.type.toUpperCase() != 'GET'))\n      setHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded')\n\n    if (settings.headers) for (name in settings.headers) setHeader(name, settings.headers[name])\n    xhr.setRequestHeader = setHeader\n\n    xhr.onreadystatechange = function(){\n      if (xhr.readyState == 4) {\n        xhr.onreadystatechange = empty\n        clearTimeout(abortTimeout)\n        var result, error = false\n        if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304 || (xhr.status == 0 && protocol == 'file:')) {\n          dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'))\n\n          if (xhr.responseType == 'arraybuffer' || xhr.responseType == 'blob')\n            result = xhr.response\n          else {\n            result = xhr.responseText\n\n            try {\n              // http://perfectionkills.com/global-eval-what-are-the-options/\n              // sanitize response accordingly if data filter callback provided\n              result = ajaxDataFilter(result, dataType, settings)\n              if (dataType == 'script')    (1,eval)(result)\n              else if (dataType == 'xml')  result = xhr.responseXML\n              else if (dataType == 'json') result = blankRE.test(result) ? null : $.parseJSON(result)\n            } catch (e) { error = e }\n\n            if (error) return ajaxError(error, 'parsererror', xhr, settings, deferred)\n          }\n\n          ajaxSuccess(result, xhr, settings, deferred)\n        } else {\n          ajaxError(xhr.statusText || null, xhr.status ? 'error' : 'abort', xhr, settings, deferred)\n        }\n      }\n    }\n\n    if (ajaxBeforeSend(xhr, settings) === false) {\n      xhr.abort()\n      ajaxError(null, 'abort', xhr, settings, deferred)\n      return xhr\n    }\n\n    var async = 'async' in settings ? settings.async : true\n    xhr.open(settings.type, settings.url, async, settings.username, settings.password)\n\n    if (settings.xhrFields) for (name in settings.xhrFields) xhr[name] = settings.xhrFields[name]\n\n    for (name in headers) nativeSetHeader.apply(xhr, headers[name])\n\n    if (settings.timeout > 0) abortTimeout = setTimeout(function(){\n        xhr.onreadystatechange = empty\n        xhr.abort()\n        ajaxError(null, 'timeout', xhr, settings, deferred)\n      }, settings.timeout)\n\n    // avoid sending empty string (#319)\n    xhr.send(settings.data ? settings.data : null)\n    return xhr\n  }\n\n  // handle optional data/success arguments\n  function parseArguments(url, data, success, dataType) {\n    if ($.isFunction(data)) dataType = success, success = data, data = undefined\n    if (!$.isFunction(success)) dataType = success, success = undefined\n    return {\n      url: url\n    , data: data\n    , success: success\n    , dataType: dataType\n    }\n  }\n\n  $.get = function(/* url, data, success, dataType */){\n    return $.ajax(parseArguments.apply(null, arguments))\n  }\n\n  $.post = function(/* url, data, success, dataType */){\n    var options = parseArguments.apply(null, arguments)\n    options.type = 'POST'\n    return $.ajax(options)\n  }\n\n  $.getJSON = function(/* url, data, success */){\n    var options = parseArguments.apply(null, arguments)\n    options.dataType = 'json'\n    return $.ajax(options)\n  }\n\n  $.fn.load = function(url, data, success){\n    if (!this.length) return this\n    var self = this, parts = url.split(/\\s/), selector,\n        options = parseArguments(url, data, success),\n        callback = options.success\n    if (parts.length > 1) options.url = parts[0], selector = parts[1]\n    options.success = function(response){\n      self.html(selector ?\n        $('<div>').html(response.replace(rscript, \"\")).find(selector)\n        : response)\n      callback && callback.apply(self, arguments)\n    }\n    $.ajax(options)\n    return this\n  }\n\n  var escape = encodeURIComponent\n\n  function serialize(params, obj, traditional, scope){\n    var type, array = $.isArray(obj), hash = $.isPlainObject(obj)\n    $.each(obj, function(key, value) {\n      type = $.type(value)\n      if (scope) key = traditional ? scope :\n        scope + '[' + (hash || type == 'object' || type == 'array' ? key : '') + ']'\n      // handle data in serializeArray() format\n      if (!scope && array) params.add(value.name, value.value)\n      // recurse into nested objects\n      else if (type == \"array\" || (!traditional && type == \"object\"))\n        serialize(params, value, traditional, key)\n      else params.add(key, value)\n    })\n  }\n\n  $.param = function(obj, traditional){\n    var params = []\n    params.add = function(key, value) {\n      if ($.isFunction(value)) value = value()\n      if (value == null) value = \"\"\n      this.push(escape(key) + '=' + escape(value))\n    }\n    serialize(params, obj, traditional)\n    return params.join('&').replace(/%20/g, '+')\n  }\n})(Zepto)\n\n;(function($){\n  $.fn.serializeArray = function() {\n    var name, type, result = [],\n      add = function(value) {\n        if (value.forEach) return value.forEach(add)\n        result.push({ name: name, value: value })\n      }\n    if (this[0]) $.each(this[0].elements, function(_, field){\n      type = field.type, name = field.name\n      if (name && field.nodeName.toLowerCase() != 'fieldset' &&\n        !field.disabled && type != 'submit' && type != 'reset' && type != 'button' && type != 'file' &&\n        ((type != 'radio' && type != 'checkbox') || field.checked))\n          add($(field).val())\n    })\n    return result\n  }\n\n  $.fn.serialize = function(){\n    var result = []\n    this.serializeArray().forEach(function(elm){\n      result.push(encodeURIComponent(elm.name) + '=' + encodeURIComponent(elm.value))\n    })\n    return result.join('&')\n  }\n\n  $.fn.submit = function(callback) {\n    if (0 in arguments) this.bind('submit', callback)\n    else if (this.length) {\n      var event = $.Event('submit')\n      this.eq(0).trigger(event)\n      if (!event.isDefaultPrevented()) this.get(0).submit()\n    }\n    return this\n  }\n\n})(Zepto)\n\n;(function(){\n  // getComputedStyle shouldn't freak out when called\n  // without a valid element as argument\n  try {\n    getComputedStyle(undefined)\n  } catch(e) {\n    var nativeGetComputedStyle = getComputedStyle\n    window.getComputedStyle = function(element, pseudoElement){\n      try {\n        return nativeGetComputedStyle(element, pseudoElement)\n      } catch(e) {\n        return null\n      }\n    }\n  }\n})()\n  return Zepto\n}))\n\n}.call(window));","module.exports = global[\"moment\"] = require(\"-!E:\\\\flarum\\\\core\\\\js\\\\node_modules\\\\expose-loader\\\\index.js?dayjs!.\\\\dayjs.min.js\");","module.exports = global[\"dayjs\"] = require(\"-!.\\\\dayjs.min.js\");","!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define(n):t.dayjs=n()}(this,function(){\"use strict\";var t=\"millisecond\",n=\"second\",e=\"minute\",r=\"hour\",i=\"day\",s=\"week\",u=\"month\",a=\"quarter\",o=\"year\",h=/^(\\d{4})-?(\\d{1,2})-?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?.?(\\d{1,3})?$/,f=/\\[([^\\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,n,e){var r=String(t);return!r||r.length>=n?t:\"\"+Array(n+1-r.length).join(e)+t},d={s:c,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),i=e%60;return(n<=0?\"+\":\"-\")+c(r,2,\"0\")+\":\"+c(i,2,\"0\")},m:function(t,n){var e=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(e,u),i=n-r<0,s=t.clone().add(e+(i?-1:1),u);return Number(-(e+(n-r)/(i?r-s:s-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:u,y:o,w:s,d:i,h:r,m:e,s:n,ms:t,Q:a}[h]||String(h||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},$={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},l=\"en\",m={};m[l]=$;var y=function(t){return t instanceof v},M=function(t,n,e){var r;if(!t)return l;if(\"string\"==typeof t)m[t]&&(r=t),n&&(m[t]=n,r=t);else{var i=t.name;m[i]=t,r=i}return e||(l=r),r},g=function(t,n,e){if(y(t))return t.clone();var r=n?\"string\"==typeof n?{format:n,pl:e}:n:{};return r.date=t,new v(r)},D=d;D.l=M,D.i=y,D.w=function(t,n){return g(t,{locale:n.$L,utc:n.$u})};var v=function(){function c(t){this.$L=this.$L||M(t.locale,null,!0),this.parse(t)}var d=c.prototype;return d.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if(D.u(n))return new Date;if(n instanceof Date)return new Date(n);if(\"string\"==typeof n&&!/Z$/i.test(n)){var r=n.match(h);if(r)return e?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(n)}(t),this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return D},d.isValid=function(){return!(\"Invalid Date\"===this.$d.toString())},d.isSame=function(t,n){var e=g(t);return this.startOf(n)<=e&&e<=this.endOf(n)},d.isAfter=function(t,n){return g(t)<this.startOf(n)},d.isBefore=function(t,n){return this.endOf(n)<g(t)},d.$g=function(t,n,e){return D.u(t)?this[n]:this.set(e,t)},d.year=function(t){return this.$g(t,\"$y\",o)},d.month=function(t){return this.$g(t,\"$M\",u)},d.day=function(t){return this.$g(t,\"$W\",i)},d.date=function(t){return this.$g(t,\"$D\",\"date\")},d.hour=function(t){return this.$g(t,\"$H\",r)},d.minute=function(t){return this.$g(t,\"$m\",e)},d.second=function(t){return this.$g(t,\"$s\",n)},d.millisecond=function(n){return this.$g(n,\"$ms\",t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,a){var h=this,f=!!D.u(a)||a,c=D.p(t),d=function(t,n){var e=D.w(h.$u?Date.UTC(h.$y,n,t):new Date(h.$y,n,t),h);return f?e:e.endOf(i)},$=function(t,n){return D.w(h.toDate()[t].apply(h.toDate(),(f?[0,0,0,0]:[23,59,59,999]).slice(n)),h)},l=this.$W,m=this.$M,y=this.$D,M=\"set\"+(this.$u?\"UTC\":\"\");switch(c){case o:return f?d(1,0):d(31,11);case u:return f?d(1,m):d(0,m+1);case s:var g=this.$locale().weekStart||0,v=(l<g?l+7:l)-g;return d(f?y-v:y+(6-v),m);case i:case\"date\":return $(M+\"Hours\",0);case r:return $(M+\"Minutes\",1);case e:return $(M+\"Seconds\",2);case n:return $(M+\"Milliseconds\",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(s,a){var h,f=D.p(s),c=\"set\"+(this.$u?\"UTC\":\"\"),d=(h={},h[i]=c+\"Date\",h.date=c+\"Date\",h[u]=c+\"Month\",h[o]=c+\"FullYear\",h[r]=c+\"Hours\",h[e]=c+\"Minutes\",h[n]=c+\"Seconds\",h[t]=c+\"Milliseconds\",h)[f],$=f===i?this.$D+(a-this.$W):a;if(f===u||f===o){var l=this.clone().set(\"date\",1);l.$d[d]($),l.init(),this.$d=l.set(\"date\",Math.min(this.$D,l.daysInMonth())).toDate()}else d&&this.$d[d]($);return this.init(),this},d.set=function(t,n){return this.clone().$set(t,n)},d.get=function(t){return this[D.p(t)]()},d.add=function(t,a){var h,f=this;t=Number(t);var c=D.p(a),d=function(n){var e=g(f);return D.w(e.date(e.date()+Math.round(n*t)),f)};if(c===u)return this.set(u,this.$M+t);if(c===o)return this.set(o,this.$y+t);if(c===i)return d(1);if(c===s)return d(7);var $=(h={},h[e]=6e4,h[r]=36e5,h[n]=1e3,h)[c]||1,l=this.valueOf()+t*$;return D.w(l,this)},d.subtract=function(t,n){return this.add(-1*t,n)},d.format=function(t){var n=this;if(!this.isValid())return\"Invalid Date\";var e=t||\"YYYY-MM-DDTHH:mm:ssZ\",r=D.z(this),i=this.$locale(),s=this.$H,u=this.$m,a=this.$M,o=i.weekdays,h=i.months,c=function(t,r,i,s){return t&&(t[r]||t(n,e))||i[r].substr(0,s)},d=function(t){return D.s(s%12||12,t,\"0\")},$=i.meridiem||function(t,n,e){var r=t<12?\"AM\":\"PM\";return e?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:D.s(a+1,2,\"0\"),MMM:c(i.monthsShort,a,h,3),MMMM:h[a]||h(this,e),D:this.$D,DD:D.s(this.$D,2,\"0\"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,o,2),ddd:c(i.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:D.s(s,2,\"0\"),h:d(1),hh:d(2),a:$(s,u,!0),A:$(s,u,!1),m:String(u),mm:D.s(u,2,\"0\"),s:String(this.$s),ss:D.s(this.$s,2,\"0\"),SSS:D.s(this.$ms,3,\"0\"),Z:r};return e.replace(f,function(t,n){return n||l[t]||r.replace(\":\",\"\")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,h,f){var c,d=D.p(h),$=g(t),l=6e4*($.utcOffset()-this.utcOffset()),m=this-$,y=D.m(this,$);return y=(c={},c[o]=y/12,c[u]=y,c[a]=y/3,c[s]=(m-l)/6048e5,c[i]=(m-l)/864e5,c[r]=m/36e5,c[e]=m/6e4,c[n]=m/1e3,c)[d]||m,f?y:D.a(y)},d.daysInMonth=function(){return this.endOf(u).$D},d.$locale=function(){return m[this.$L]},d.locale=function(t,n){if(!t)return this.$L;var e=this.clone();return e.$L=M(t,n,!0),e},d.clone=function(){return D.w(this.toDate(),this)},d.toDate=function(){return new Date(this.$d)},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},c}();return g.prototype=v.prototype,g.extend=function(t,n){return t(n,v,g),g},g.locale=M,g.isDayjs=y,g.unix=function(t){return g(1e3*t)},g.en=m[l],g.Ls=m,g});\n","module.exports = global[\"m\"] = require(\"-!.\\\\mithril.js\");","if(!global[\"m\"]) global[\"m\"] = {};\nmodule.exports = global[\"m\"][\"bidi\"] = require(\"-!.\\\\bidi.js\");","( function _package( factory ){\r\n\tif( typeof define === 'function' && define.amd ){\r\n\t\tdefine( [ 'mithril' ], factory )\r\n\t}\r\n\telse if( typeof exports === 'object' ){\r\n\t\tmodule.exports = factory( require( 'mithril' ) )\r\n\t}\r\n\telse{\r\n\t\tfactory( m )\r\n\t}\r\n}( function define( m ){\r\n\tfunction bidi( node, prop ){\r\n\t\tvar type = node.tag === 'select'\r\n\t\t\t? node.attrs.multi\r\n\t\t\t\t? 'multi'\r\n\t\t\t\t: 'select'\r\n\t\t\t: node.attrs.type\r\n\r\n\t\t// Setup: bind listeners\r\n\t\tif( type === 'multi' ){\r\n\t\t\tnode.attrs.onchange = function(){\r\n\t\t\t\tprop( [].slice.call( this.selectedOptions, function( x ){\r\n\t\t\t\t\treturn x.value\r\n\t\t\t\t} ) )\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if( type === 'select' ){\r\n\t\t\tnode.attrs.onchange = function( e ){\r\n\t\t\t\tprop( this.selectedOptions[ 0 ].value )\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if( type === 'checkbox' ){\r\n\t\t\tnode.attrs.onchange = function( e ){\r\n\t\t\t\tprop( this.checked )\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnode.attrs.onchange = node.attrs.oninput = function( e ){\r\n\t\t\t\tprop( this.value )\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif( node.tag === 'select' ){\r\n\t\t\tnode.children.forEach( function( option ){\r\n\t\t\t\tif( option.attrs.value === prop() || option.children[ 0 ] === prop() ){\r\n\t\t\t\t\toption.attrs.selected = true\r\n\t\t\t\t}\r\n\t\t\t} )\r\n\t\t}\r\n\t\telse if( type === 'checkbox' ){\r\n\t\t\tnode.attrs.checked = prop()\r\n\t\t}\r\n\t\telse if( type === 'radio' ){\r\n\t\t\tnode.attrs.checked = prop() === node.attrs.value\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnode.attrs.value   = prop()\r\n\t\t}\r\n\r\n\t\treturn node\r\n\t}\r\n\r\n\tbidi.view = function( ctrl, node, prop ){\r\n\t  return bidi( node, node.attrs.bidi )\r\n\t}\r\n\r\n\tif( m.attrs ) m.attrs.bidi = bidi\r\n\t\r\n\tm.bidi = bidi\r\n\r\n\treturn bidi\r\n} ) )\r\n","module.exports = global[\"Mousetrap\"] = require(\"-!.\\\\mousetrap.js\");","/*global define:false */\n/**\n * Copyright 2012-2017 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.6.3\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    // Check if mousetrap is used inside browser, if not, return\n    if (!window) {\n        return;\n    }\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n\n        // This needs to use a string cause otherwise since 0 is falsey\n        // mousetrap will never fire for numpad 0 pressed as part of a keydown\n        // event.\n        //\n        // @see https://github.com/ccampbell/mousetrap/pull/258\n        _MAP[i + 96] = i.toString();\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // Events originating from a shadow DOM are re-targetted and `e.target` is the shadow host,\n        // not the initial event target in the shadow tree. Note that not all events cross the\n        // shadow boundary.\n        // For shadow trees with `mode: 'open'`, the initial event target is the first element in\n        // the events composed path. For shadow trees with `mode: 'closed'`, the initial event\n        // target cannot be obtained.\n        if ('composedPath' in e && typeof e.composedPath === 'function') {\n            // For open shadow trees, update `element` so that the following check works.\n            var initialEventTarget = e.composedPath()[0];\n            if (initialEventTarget !== e.target) {\n                element = initialEventTarget;\n            }\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * allow custom key mappings\n     */\n    Mousetrap.addKeycodes = function(object) {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                _MAP[key] = object[key];\n            }\n        }\n        _REVERSE_MAP = null;\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);\n","//     Zepto.js\n//     (c) 2010-2016 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n\n;(function($){\n  var zepto = $.zepto, oldQsa = zepto.qsa, oldMatches = zepto.matches\n\n  function visible(elem){\n    elem = $(elem)\n    return !!(elem.width() || elem.height()) && elem.css(\"display\") !== \"none\"\n  }\n\n  // Implements a subset from:\n  // http://api.jquery.com/category/selectors/jquery-selector-extensions/\n  //\n  // Each filter function receives the current index, all nodes in the\n  // considered set, and a value if there were parentheses. The value\n  // of `this` is the node currently being considered. The function returns the\n  // resulting node(s), null, or undefined.\n  //\n  // Complex selectors are not supported:\n  //   li:has(label:contains(\"foo\")) + li:has(label:contains(\"bar\"))\n  //   ul.inner:first > li\n  var filters = $.expr[':'] = {\n    visible:  function(){ if (visible(this)) return this },\n    hidden:   function(){ if (!visible(this)) return this },\n    selected: function(){ if (this.selected) return this },\n    checked:  function(){ if (this.checked) return this },\n    parent:   function(){ return this.parentNode },\n    first:    function(idx){ if (idx === 0) return this },\n    last:     function(idx, nodes){ if (idx === nodes.length - 1) return this },\n    eq:       function(idx, _, value){ if (idx === value) return this },\n    contains: function(idx, _, text){ if ($(this).text().indexOf(text) > -1) return this },\n    has:      function(idx, _, sel){ if (zepto.qsa(this, sel).length) return this }\n  }\n\n  var filterRe = new RegExp('(.*):(\\\\w+)(?:\\\\(([^)]+)\\\\))?$\\\\s*'),\n      childRe  = /^\\s*>/,\n      classTag = 'Zepto' + (+new Date())\n\n  function process(sel, fn) {\n    // quote the hash in `a[href^=#]` expression\n    sel = sel.replace(/=#\\]/g, '=\"#\"]')\n    var filter, arg, match = filterRe.exec(sel)\n    if (match && match[2] in filters) {\n      filter = filters[match[2]], arg = match[3]\n      sel = match[1]\n      if (arg) {\n        var num = Number(arg)\n        if (isNaN(num)) arg = arg.replace(/^[\"']|[\"']$/g, '')\n        else arg = num\n      }\n    }\n    return fn(sel, filter, arg)\n  }\n\n  zepto.qsa = function(node, selector) {\n    return process(selector, function(sel, filter, arg){\n      try {\n        var taggedParent\n        if (!sel && filter) sel = '*'\n        else if (childRe.test(sel))\n          // support \"> *\" child queries by tagging the parent node with a\n          // unique class and prepending that classname onto the selector\n          taggedParent = $(node).addClass(classTag), sel = '.'+classTag+' '+sel\n\n        var nodes = oldQsa(node, sel)\n      } catch(e) {\n        console.error('error performing selector: %o', selector)\n        throw e\n      } finally {\n        if (taggedParent) taggedParent.removeClass(classTag)\n      }\n      return !filter ? nodes :\n        zepto.uniq($.map(nodes, function(n, i){ return filter.call(n, i, nodes, arg) }))\n    })\n  }\n\n  zepto.matches = function(node, selector){\n    return process(selector, function(sel, filter, arg){\n      return (!sel || oldMatches(node, sel)) &&\n        (!filter || filter.call(node, null, arg) === node)\n    })\n  }\n})(Zepto)\n","//     Zepto.js\n//     (c) 2010-2016 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n\n// The following code is heavily inspired by jQuery's $.fn.data()\n\n;(function($){\n  var data = {}, dataAttr = $.fn.data, camelize = $.camelCase,\n    exp = $.expando = 'Zepto' + (+new Date()), emptyArray = []\n\n  // Get value from node:\n  // 1. first try key as given,\n  // 2. then try camelized key,\n  // 3. fall back to reading \"data-*\" attribute.\n  function getData(node, name) {\n    var id = node[exp], store = id && data[id]\n    if (name === undefined) return store || setData(node)\n    else {\n      if (store) {\n        if (name in store) return store[name]\n        var camelName = camelize(name)\n        if (camelName in store) return store[camelName]\n      }\n      return dataAttr.call($(node), name)\n    }\n  }\n\n  // Store value under camelized key on node\n  function setData(node, name, value) {\n    var id = node[exp] || (node[exp] = ++$.uuid),\n      store = data[id] || (data[id] = attributeData(node))\n    if (name !== undefined) store[camelize(name)] = value\n    return store\n  }\n\n  // Read all \"data-*\" attributes from a node\n  function attributeData(node) {\n    var store = {}\n    $.each(node.attributes || emptyArray, function(i, attr){\n      if (attr.name.indexOf('data-') == 0)\n        store[camelize(attr.name.replace('data-', ''))] =\n          $.zepto.deserializeValue(attr.value)\n    })\n    return store\n  }\n\n  $.fn.data = function(name, value) {\n    return value === undefined ?\n      // set multiple values via object\n      $.isPlainObject(name) ?\n        this.each(function(i, node){\n          $.each(name, function(key, value){ setData(node, key, value) })\n        }) :\n        // get value from first element\n        (0 in this ? getData(this[0], name) : undefined) :\n      // set value on all elements\n      this.each(function(){ setData(this, name, value) })\n  }\n\n  $.data = function(elem, name, value) {\n    return $(elem).data(name, value)\n  }\n\n  $.hasData = function(elem) {\n    var id = elem[exp], store = id && data[id]\n    return store ? !$.isEmptyObject(store) : false\n  }\n\n  $.fn.removeData = function(names) {\n    if (typeof names == 'string') names = names.split(/\\s+/)\n    return this.each(function(){\n      var id = this[exp], store = id && data[id]\n      if (store) $.each(names || store, function(key){\n        delete store[names ? camelize(this) : key]\n      })\n    })\n  }\n\n  // Generate extended `remove` and `empty` functions\n  ;['remove', 'empty'].forEach(function(methodName){\n    var origFn = $.fn[methodName]\n    $.fn[methodName] = function() {\n      var elements = this.find('*')\n      if (methodName === 'remove') elements = elements.add(this)\n      elements.removeData()\n      return origFn.call(this)\n    }\n  })\n})(Zepto)\n","//     Zepto.js\n//     (c) 2010-2016 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n\n;(function($, undefined){\n  var prefix = '', eventPrefix,\n    vendors = { Webkit: 'webkit', Moz: '', O: 'o' },\n    testEl = document.createElement('div'),\n    supportedTransforms = /^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,\n    transform,\n    transitionProperty, transitionDuration, transitionTiming, transitionDelay,\n    animationName, animationDuration, animationTiming, animationDelay,\n    cssReset = {}\n\n  function dasherize(str) { return str.replace(/([A-Z])/g, '-$1').toLowerCase() }\n  function normalizeEvent(name) { return eventPrefix ? eventPrefix + name : name.toLowerCase() }\n\n  if (testEl.style.transform === undefined) $.each(vendors, function(vendor, event){\n    if (testEl.style[vendor + 'TransitionProperty'] !== undefined) {\n      prefix = '-' + vendor.toLowerCase() + '-'\n      eventPrefix = event\n      return false\n    }\n  })\n\n  transform = prefix + 'transform'\n  cssReset[transitionProperty = prefix + 'transition-property'] =\n  cssReset[transitionDuration = prefix + 'transition-duration'] =\n  cssReset[transitionDelay    = prefix + 'transition-delay'] =\n  cssReset[transitionTiming   = prefix + 'transition-timing-function'] =\n  cssReset[animationName      = prefix + 'animation-name'] =\n  cssReset[animationDuration  = prefix + 'animation-duration'] =\n  cssReset[animationDelay     = prefix + 'animation-delay'] =\n  cssReset[animationTiming    = prefix + 'animation-timing-function'] = ''\n\n  $.fx = {\n    off: (eventPrefix === undefined && testEl.style.transitionProperty === undefined),\n    speeds: { _default: 400, fast: 200, slow: 600 },\n    cssPrefix: prefix,\n    transitionEnd: normalizeEvent('TransitionEnd'),\n    animationEnd: normalizeEvent('AnimationEnd')\n  }\n\n  $.fn.animate = function(properties, duration, ease, callback, delay){\n    if ($.isFunction(duration))\n      callback = duration, ease = undefined, duration = undefined\n    if ($.isFunction(ease))\n      callback = ease, ease = undefined\n    if ($.isPlainObject(duration))\n      ease = duration.easing, callback = duration.complete, delay = duration.delay, duration = duration.duration\n    if (duration) duration = (typeof duration == 'number' ? duration :\n                    ($.fx.speeds[duration] || $.fx.speeds._default)) / 1000\n    if (delay) delay = parseFloat(delay) / 1000\n    return this.anim(properties, duration, ease, callback, delay)\n  }\n\n  $.fn.anim = function(properties, duration, ease, callback, delay){\n    var key, cssValues = {}, cssProperties, transforms = '',\n        that = this, wrappedCallback, endEvent = $.fx.transitionEnd,\n        fired = false\n\n    if (duration === undefined) duration = $.fx.speeds._default / 1000\n    if (delay === undefined) delay = 0\n    if ($.fx.off) duration = 0\n\n    if (typeof properties == 'string') {\n      // keyframe animation\n      cssValues[animationName] = properties\n      cssValues[animationDuration] = duration + 's'\n      cssValues[animationDelay] = delay + 's'\n      cssValues[animationTiming] = (ease || 'linear')\n      endEvent = $.fx.animationEnd\n    } else {\n      cssProperties = []\n      // CSS transitions\n      for (key in properties)\n        if (supportedTransforms.test(key)) transforms += key + '(' + properties[key] + ') '\n        else cssValues[key] = properties[key], cssProperties.push(dasherize(key))\n\n      if (transforms) cssValues[transform] = transforms, cssProperties.push(transform)\n      if (duration > 0 && typeof properties === 'object') {\n        cssValues[transitionProperty] = cssProperties.join(', ')\n        cssValues[transitionDuration] = duration + 's'\n        cssValues[transitionDelay] = delay + 's'\n        cssValues[transitionTiming] = (ease || 'linear')\n      }\n    }\n\n    wrappedCallback = function(event){\n      if (typeof event !== 'undefined') {\n        if (event.target !== event.currentTarget) return // makes sure the event didn't bubble from \"below\"\n        $(event.target).unbind(endEvent, wrappedCallback)\n      } else\n        $(this).unbind(endEvent, wrappedCallback) // triggered by setTimeout\n\n      fired = true\n      $(this).css(cssReset)\n      callback && callback.call(this)\n    }\n    if (duration > 0){\n      this.bind(endEvent, wrappedCallback)\n      // transitionEnd is not always firing on older Android phones\n      // so make sure it gets fired\n      setTimeout(function(){\n        if (fired) return\n        wrappedCallback.call(that)\n      }, ((duration + delay) * 1000) + 25)\n    }\n\n    // trigger page reflow so new elements can animate\n    this.size() && this.get(0).clientLeft\n\n    this.css(cssValues)\n\n    if (duration <= 0) setTimeout(function() {\n      that.each(function(){ wrappedCallback.call(this) })\n    }, 0)\n\n    return this\n  }\n\n  testEl = null\n})(Zepto)\n","//     Zepto.js\n//     (c) 2010-2016 Thomas Fuchs\n//     Zepto.js may be freely distributed under the MIT license.\n\n;(function($, undefined){\n  var document = window.document, docElem = document.documentElement,\n    origShow = $.fn.show, origHide = $.fn.hide, origToggle = $.fn.toggle\n\n  function anim(el, speed, opacity, scale, callback) {\n    if (typeof speed == 'function' && !callback) callback = speed, speed = undefined\n    var props = { opacity: opacity }\n    if (scale) {\n      props.scale = scale\n      el.css($.fx.cssPrefix + 'transform-origin', '0 0')\n    }\n    return el.animate(props, speed, null, callback)\n  }\n\n  function hide(el, speed, scale, callback) {\n    return anim(el, speed, 0, scale, function(){\n      origHide.call($(this))\n      callback && callback.call(this)\n    })\n  }\n\n  $.fn.show = function(speed, callback) {\n    origShow.call(this)\n    if (speed === undefined) speed = 0\n    else this.css('opacity', 0)\n    return anim(this, speed, 1, '1,1', callback)\n  }\n\n  $.fn.hide = function(speed, callback) {\n    if (speed === undefined) return origHide.call(this)\n    else return hide(this, speed, '0,0', callback)\n  }\n\n  $.fn.toggle = function(speed, callback) {\n    if (speed === undefined || typeof speed == 'boolean')\n      return origToggle.call(this, speed)\n    else return this.each(function(){\n      var el = $(this)\n      el[el.css('display') == 'none' ? 'show' : 'hide'](speed, callback)\n    })\n  }\n\n  $.fn.fadeTo = function(speed, opacity, callback) {\n    return anim(this, speed, opacity, null, callback)\n  }\n\n  $.fn.fadeIn = function(speed, callback) {\n    var target = this.css('opacity')\n    if (target > 0) this.css('opacity', 0)\n    else target = 1\n    return origShow.call(this).fadeTo(speed, target, callback)\n  }\n\n  $.fn.fadeOut = function(speed, callback) {\n    return hide(this, speed, null, callback)\n  }\n\n  $.fn.fadeToggle = function(speed, callback) {\n    return this.each(function(){\n      var el = $(this)\n      el[\n        (el.css('opacity') == 0 || el.css('display') == 'none') ? 'fadeIn' : 'fadeOut'\n      ](speed, callback)\n    })\n  }\n\n})(Zepto)\n","/*!\n * HC-Sticky\n * =========\n * Version: 2.2.3\n * Author: Some Web Media\n * Author URL: http://somewebmedia.com\n * Plugin URL: https://github.com/somewebmedia/hc-sticky\n * Description: Cross-browser plugin that makes any element on your page visible while you scroll\n * License: MIT\n */\n!function(t,e){\"use strict\";if(\"object\"==typeof module&&\"object\"==typeof module.exports){if(!t.document)throw new Error(\"HC-Sticky requires a browser to run.\");module.exports=e(t)}else\"function\"==typeof define&&define.amd?define(\"hcSticky\",[],e(t)):e(t)}(\"undefined\"!=typeof window?window:this,function(U){\"use strict\";var Y={top:0,bottom:0,bottomEnd:0,innerTop:0,innerSticker:null,stickyClass:\"sticky\",stickTo:null,followScroll:!0,responsive:null,mobileFirst:!1,onStart:null,onStop:null,onBeforeResize:null,onResize:null,resizeDebounce:100,disable:!1,queries:null,queryFlow:\"down\"},$=function(t,e,o){console.log(\"%c! HC Sticky:%c \"+t+\"%c \"+o+\" is now deprecated and will be removed. Use%c \"+e+\"%c instead.\",\"color: red\",\"color: darkviolet\",\"color: black\",\"color: darkviolet\",\"color: black\")},Q=U.document,X=function(n,f){var o=this;if(\"string\"==typeof n&&(n=Q.querySelector(n)),!n)return!1;f.queries&&$(\"queries\",\"responsive\",\"option\"),f.queryFlow&&$(\"queryFlow\",\"mobileFirst\",\"option\");var p={},d=X.Helpers,s=n.parentNode;\"static\"===d.getStyle(s,\"position\")&&(s.style.position=\"relative\");var u=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d.isEmptyObject(t)&&!d.isEmptyObject(p)||(p=Object.assign({},Y,p,t))},t=function(){return p.disable},e=function(){var t,e=p.responsive||p.queries;if(e){var o=U.innerWidth;if(t=f,(p=Object.assign({},Y,t||{})).mobileFirst)for(var i in e)i<=o&&!d.isEmptyObject(e[i])&&u(e[i]);else{var n=[];for(var s in e){var r={};r[s]=e[s],n.push(r)}for(var l=n.length-1;0<=l;l--){var a=n[l],c=Object.keys(a)[0];o<=c&&!d.isEmptyObject(a[c])&&u(a[c])}}}},r={css:{},position:null,stick:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d.hasClass(n,p.stickyClass)||(!1===l.isAttached&&l.attach(),r.position=\"fixed\",n.style.position=\"fixed\",n.style.left=l.offsetLeft+\"px\",n.style.width=l.width,void 0===t.bottom?n.style.bottom=\"auto\":n.style.bottom=t.bottom+\"px\",void 0===t.top?n.style.top=\"auto\":n.style.top=t.top+\"px\",n.classList?n.classList.add(p.stickyClass):n.className+=\" \"+p.stickyClass,p.onStart&&p.onStart.call(n,Object.assign({},p)))},release:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(t.stop=t.stop||!1,!0===t.stop||\"fixed\"===r.position||null===r.position||!(void 0===t.top&&void 0===t.bottom||void 0!==t.top&&(parseInt(d.getStyle(n,\"top\"))||0)===t.top||void 0!==t.bottom&&(parseInt(d.getStyle(n,\"bottom\"))||0)===t.bottom)){!0===t.stop?!0===l.isAttached&&l.detach():!1===l.isAttached&&l.attach();var e=t.position||r.css.position;r.position=e,n.style.position=e,n.style.left=!0===t.stop?r.css.left:l.positionLeft+\"px\",n.style.width=\"absolute\"!==e?r.css.width:l.width,void 0===t.bottom?n.style.bottom=!0===t.stop?\"\":\"auto\":n.style.bottom=t.bottom+\"px\",void 0===t.top?n.style.top=!0===t.stop?\"\":\"auto\":n.style.top=t.top+\"px\",n.classList?n.classList.remove(p.stickyClass):n.className=n.className.replace(new RegExp(\"(^|\\\\b)\"+p.stickyClass.split(\" \").join(\"|\")+\"(\\\\b|$)\",\"gi\"),\" \"),p.onStop&&p.onStop.call(n,Object.assign({},p))}}},l={el:Q.createElement(\"div\"),offsetLeft:null,positionLeft:null,width:null,isAttached:!1,init:function(){for(var t in l.el.className=\"sticky-spacer\",r.css)l.el.style[t]=r.css[t];l.el.style[\"z-index\"]=\"-1\";var e=d.getStyle(n);l.offsetLeft=d.offset(n).left-(parseInt(e.marginLeft)||0),l.positionLeft=d.position(n).left,l.width=d.getStyle(n,\"width\")},attach:function(){s.insertBefore(l.el,n),l.isAttached=!0},detach:function(){l.el=s.removeChild(l.el),l.isAttached=!1}},a=void 0,c=void 0,g=void 0,m=void 0,h=void 0,v=void 0,y=void 0,b=void 0,S=void 0,w=void 0,k=void 0,E=void 0,x=void 0,L=void 0,T=void 0,j=void 0,O=void 0,C=void 0,i=function(){var t,e,o,i;r.css=(t=n,e=d.getCascadedStyle(t),o=d.getStyle(t),i={height:t.offsetHeight+\"px\",left:e.left,right:e.right,top:e.top,bottom:e.bottom,position:o.position,display:o.display,verticalAlign:o.verticalAlign,boxSizing:o.boxSizing,marginLeft:e.marginLeft,marginRight:e.marginRight,marginTop:e.marginTop,marginBottom:e.marginBottom,paddingLeft:e.paddingLeft,paddingRight:e.paddingRight},e.float&&(i.float=e.float||\"none\"),e.cssFloat&&(i.cssFloat=e.cssFloat||\"none\"),o.MozBoxSizing&&(i.MozBoxSizing=o.MozBoxSizing),i.width=\"auto\"!==e.width?e.width:\"border-box\"===i.boxSizing||\"border-box\"===i.MozBoxSizing?t.offsetWidth+\"px\":o.width,i),l.init(),a=!(!p.stickTo||!(\"document\"===p.stickTo||p.stickTo.nodeType&&9===p.stickTo.nodeType||\"object\"==typeof p.stickTo&&p.stickTo instanceof(\"undefined\"!=typeof HTMLDocument?HTMLDocument:Document))),c=p.stickTo?a?Q:\"string\"==typeof p.stickTo?Q.querySelector(p.stickTo):p.stickTo:s,T=(C=function(){var t=n.offsetHeight+(parseInt(r.css.marginTop)||0)+(parseInt(r.css.marginBottom)||0),e=(T||0)-t;return-1<=e&&e<=1?T:t})(),m=(O=function(){return a?Math.max(Q.documentElement.clientHeight,Q.body.scrollHeight,Q.documentElement.scrollHeight,Q.body.offsetHeight,Q.documentElement.offsetHeight):c.offsetHeight})(),h=a?0:d.offset(c).top,v=p.stickTo?a?0:d.offset(s).top:h,y=U.innerHeight,j=n.offsetTop-(parseInt(r.css.marginTop)||0),g=p.innerSticker?\"string\"==typeof p.innerSticker?Q.querySelector(p.innerSticker):p.innerSticker:null,b=isNaN(p.top)&&-1<p.top.indexOf(\"%\")?parseFloat(p.top)/100*y:p.top,S=isNaN(p.bottom)&&-1<p.bottom.indexOf(\"%\")?parseFloat(p.bottom)/100*y:p.bottom,w=g?g.offsetTop:p.innerTop?p.innerTop:0,k=isNaN(p.bottomEnd)&&-1<p.bottomEnd.indexOf(\"%\")?parseFloat(p.bottomEnd)/100*y:p.bottomEnd,E=h-b+w+j},z=U.pageYOffset||Q.documentElement.scrollTop,N=0,H=void 0,R=function(){T=C(),m=O(),x=h+m-b-k,L=y<T;var t=U.pageYOffset||Q.documentElement.scrollTop,e=d.offset(n).top,o=e-t,i=void 0;H=t<z?\"up\":\"down\",N=t-z,E<(z=t)?x+b+(L?S:0)-(p.followScroll&&L?0:b)<=t+T-w-(y-(E-w)<T-w&&p.followScroll&&0<(i=T-y-w)?i:0)?r.release({position:\"absolute\",bottom:v+s.offsetHeight-x-b}):L&&p.followScroll?\"down\"===H?o+T+S<=y+.9?r.stick({bottom:S}):\"fixed\"===r.position&&r.release({position:\"absolute\",top:e-b-E-N+w}):Math.ceil(o+w)<0&&\"fixed\"===r.position?r.release({position:\"absolute\",top:e-b-E+w-N}):t+b-w<=e&&r.stick({top:b-w}):r.stick({top:b-w}):r.release({stop:!0})},A=!1,B=!1,I=function(){A&&(d.event.unbind(U,\"scroll\",R),A=!1)},q=function(){null!==n.offsetParent&&\"none\"!==d.getStyle(n,\"display\")?(i(),m<=T?I():(R(),A||(d.event.bind(U,\"scroll\",R),A=!0))):I()},F=function(){n.style.position=\"\",n.style.left=\"\",n.style.top=\"\",n.style.bottom=\"\",n.style.width=\"\",n.classList?n.classList.remove(p.stickyClass):n.className=n.className.replace(new RegExp(\"(^|\\\\b)\"+p.stickyClass.split(\" \").join(\"|\")+\"(\\\\b|$)\",\"gi\"),\" \"),r.css={},!(r.position=null)===l.isAttached&&l.detach()},M=function(){F(),e(),t()?I():q()},D=function(){p.onBeforeResize&&p.onBeforeResize.call(n,Object.assign({},p)),M(),p.onResize&&p.onResize.call(n,Object.assign({},p))},P=p.resizeDebounce?d.debounce(D,p.resizeDebounce):D,W=function(){B&&(d.event.unbind(U,\"resize\",P),B=!1),I()},V=function(){B||(d.event.bind(U,\"resize\",P),B=!0),e(),t()?I():q()};this.options=function(t){return t?p[t]:Object.assign({},p)},this.refresh=M,this.update=function(t){u(t),f=Object.assign({},f,t||{}),M()},this.attach=V,this.detach=W,this.destroy=function(){W(),F()},this.triggerMethod=function(t,e){\"function\"==typeof o[t]&&o[t](e)},this.reinit=function(){$(\"reinit\",\"refresh\",\"method\"),M()},u(f),V(),d.event.bind(U,\"load\",M)};if(void 0!==U.jQuery){var i=U.jQuery,n=\"hcSticky\";i.fn.extend({hcSticky:function(e,o){return this.length?\"options\"===e?i.data(this.get(0),n).options():this.each(function(){var t=i.data(this,n);t?t.triggerMethod(e,o):(t=new X(this,e),i.data(this,n,t))}):this}})}return U.hcSticky=U.hcSticky||X,X}),function(c){\"use strict\";var t=c.hcSticky,f=c.document;\"function\"!=typeof Object.assign&&Object.defineProperty(Object,\"assign\",{value:function(t,e){if(null==t)throw new TypeError(\"Cannot convert undefined or null to object\");for(var o=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(o[s]=n[s])}return o},writable:!0,configurable:!0}),Array.prototype.forEach||(Array.prototype.forEach=function(t){var e,o;if(null==this)throw new TypeError(\"this is null or not defined\");var i=Object(this),n=i.length>>>0;if(\"function\"!=typeof t)throw new TypeError(t+\" is not a function\");for(1<arguments.length&&(e=arguments[1]),o=0;o<n;){var s;o in i&&(s=i[o],t.call(e,s,o,i)),o++}});var e=function(){var t=f.documentElement,e=function(){};function i(t){var e=c.event;return e.target=e.target||e.srcElement||t,e}t.addEventListener?e=function(t,e,o){t.addEventListener(e,o,!1)}:t.attachEvent&&(e=function(e,t,o){e[t+o]=o.handleEvent?function(){var t=i(e);o.handleEvent.call(o,t)}:function(){var t=i(e);o.call(e,t)},e.attachEvent(\"on\"+t,e[t+o])});var o=function(){};return t.removeEventListener?o=function(t,e,o){t.removeEventListener(e,o,!1)}:t.detachEvent&&(o=function(e,o,i){e.detachEvent(\"on\"+o,e[o+i]);try{delete e[o+i]}catch(t){e[o+i]=void 0}}),{bind:e,unbind:o}}(),r=function(t,e){return c.getComputedStyle?e?f.defaultView.getComputedStyle(t,null).getPropertyValue(e):f.defaultView.getComputedStyle(t,null):t.currentStyle?e?t.currentStyle[e.replace(/-\\w/g,function(t){return t.toUpperCase().replace(\"-\",\"\")})]:t.currentStyle:void 0},l=function(t){var e=t.getBoundingClientRect(),o=c.pageYOffset||f.documentElement.scrollTop,i=c.pageXOffset||f.documentElement.scrollLeft;return{top:e.top+o,left:e.left+i}};t.Helpers={isEmptyObject:function(t){for(var e in t)return!1;return!0},debounce:function(i,n,s){var r=void 0;return function(){var t=this,e=arguments,o=s&&!r;clearTimeout(r),r=setTimeout(function(){r=null,s||i.apply(t,e)},n),o&&i.apply(t,e)}},hasClass:function(t,e){return t.classList?t.classList.contains(e):new RegExp(\"(^| )\"+e+\"( |$)\",\"gi\").test(t.className)},offset:l,position:function(t){var e=t.offsetParent,o=l(e),i=l(t),n=r(e),s=r(t);return o.top+=parseInt(n.borderTopWidth)||0,o.left+=parseInt(n.borderLeftWidth)||0,{top:i.top-o.top-(parseInt(s.marginTop)||0),left:i.left-o.left-(parseInt(s.marginLeft)||0)}},getStyle:r,getCascadedStyle:function(t){var e=t.cloneNode(!0);e.style.display=\"none\",Array.prototype.slice.call(e.querySelectorAll('input[type=\"radio\"]')).forEach(function(t){t.removeAttribute(\"name\")}),t.parentNode.insertBefore(e,t.nextSibling);var o=void 0;e.currentStyle?o=e.currentStyle:c.getComputedStyle&&(o=f.defaultView.getComputedStyle(e,null));var i={};for(var n in o)!isNaN(n)||\"string\"!=typeof o[n]&&\"number\"!=typeof o[n]||(i[n]=o[n]);if(Object.keys(i).length<3)for(var s in i={},o)isNaN(s)||(i[o[s].replace(/-\\w/g,function(t){return t.toUpperCase().replace(\"-\",\"\")})]=o.getPropertyValue(o[s]));if(i.margin||\"auto\"!==i.marginLeft?i.margin||i.marginLeft!==i.marginRight||i.marginLeft!==i.marginTop||i.marginLeft!==i.marginBottom||(i.margin=i.marginLeft):i.margin=\"auto\",!i.margin&&\"0px\"===i.marginLeft&&\"0px\"===i.marginRight){var r=t.offsetLeft-t.parentNode.offsetLeft,l=r-(parseInt(i.left)||0)-(parseInt(i.right)||0),a=t.parentNode.offsetWidth-t.offsetWidth-r-(parseInt(i.right)||0)+(parseInt(i.left)||0)-l;0!==a&&1!==a||(i.margin=\"auto\")}return e.parentNode.removeChild(e),e=null,i},event:e}}(window);","/* ========================================================================\n * Bootstrap: dropdown.js v3.4.1\n * https://getbootstrap.com/docs/3.4/javascript/#dropdowns\n * ========================================================================\n * Copyright 2011-2019 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // DROPDOWN CLASS DEFINITION\n  // =========================\n\n  var backdrop = '.dropdown-backdrop'\n  var toggle   = '[data-toggle=\"dropdown\"]'\n  var Dropdown = function (element) {\n    $(element).on('click.bs.dropdown', this.toggle)\n  }\n\n  Dropdown.VERSION = '3.4.1'\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = selector !== '#' ? $(document).find(selector) : null\n\n    return $parent && $parent.length ? $parent : $this.parent()\n  }\n\n  function clearMenus(e) {\n    if (e && e.which === 3) return\n    $(backdrop).remove()\n    $(toggle).each(function () {\n      var $this         = $(this)\n      var $parent       = getParent($this)\n      var relatedTarget = { relatedTarget: this }\n\n      if (!$parent.hasClass('open')) return\n\n      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return\n\n      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this.attr('aria-expanded', 'false')\n      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))\n    })\n  }\n\n  Dropdown.prototype.toggle = function (e) {\n    var $this = $(this)\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    clearMenus()\n\n    if (!isActive) {\n      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {\n        // if mobile we use a backdrop because click events don't delegate\n        $(document.createElement('div'))\n          .addClass('dropdown-backdrop')\n          .insertAfter($(this))\n          .on('click', clearMenus)\n      }\n\n      var relatedTarget = { relatedTarget: this }\n      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this\n        .trigger('focus')\n        .attr('aria-expanded', 'true')\n\n      $parent\n        .toggleClass('open')\n        .trigger($.Event('shown.bs.dropdown', relatedTarget))\n    }\n\n    return false\n  }\n\n  Dropdown.prototype.keydown = function (e) {\n    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return\n\n    var $this = $(this)\n\n    e.preventDefault()\n    e.stopPropagation()\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    if (!isActive && e.which != 27 || isActive && e.which == 27) {\n      if (e.which == 27) $parent.find(toggle).trigger('focus')\n      return $this.trigger('click')\n    }\n\n    var desc = ' li:not(.disabled):visible a'\n    var $items = $parent.find('.dropdown-menu' + desc)\n\n    if (!$items.length) return\n\n    var index = $items.index(e.target)\n\n    if (e.which == 38 && index > 0)                 index--         // up\n    if (e.which == 40 && index < $items.length - 1) index++         // down\n    if (!~index)                                    index = 0\n\n    $items.eq(index).trigger('focus')\n  }\n\n\n  // DROPDOWN PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.dropdown')\n\n      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown             = Plugin\n  $.fn.dropdown.Constructor = Dropdown\n\n\n  // DROPDOWN NO CONFLICT\n  // ====================\n\n  $.fn.dropdown.noConflict = function () {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n  // APPLY TO STANDARD DROPDOWN ELEMENTS\n  // ===================================\n\n  $(document)\n    .on('click.bs.dropdown.data-api', clearMenus)\n    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\n    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)\n    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)\n    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)\n\n}(jQuery);\n","/* ========================================================================\n * Bootstrap: transition.js v3.4.1\n * https://getbootstrap.com/docs/3.4/javascript/#transitions\n * ========================================================================\n * Copyright 2011-2019 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // CSS TRANSITION SUPPORT (Shoutout: https://modernizr.com/)\n  // ============================================================\n\n  function transitionEnd() {\n    var el = document.createElement('bootstrap')\n\n    var transEndEventNames = {\n      WebkitTransition : 'webkitTransitionEnd',\n      MozTransition    : 'transitionend',\n      OTransition      : 'oTransitionEnd otransitionend',\n      transition       : 'transitionend'\n    }\n\n    for (var name in transEndEventNames) {\n      if (el.style[name] !== undefined) {\n        return { end: transEndEventNames[name] }\n      }\n    }\n\n    return false // explicit for ie8 (  ._.)\n  }\n\n  // https://blog.alexmaccaw.com/css-transitions\n  $.fn.emulateTransitionEnd = function (duration) {\n    var called = false\n    var $el = this\n    $(this).one('bsTransitionEnd', function () { called = true })\n    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }\n    setTimeout(callback, duration)\n    return this\n  }\n\n  $(function () {\n    $.support.transition = transitionEnd()\n\n    if (!$.support.transition) return\n\n    $.event.special.bsTransitionEnd = {\n      bindType: $.support.transition.end,\n      delegateType: $.support.transition.end,\n      handle: function (e) {\n        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)\n      }\n    }\n  })\n\n}(jQuery);\n","import Component from '../../common/Component';\r\nimport ItemList from '../../common/utils/ItemList';\r\nimport listItems from '../../common/helpers/listItems';\r\n\r\n/**\r\n * The `HeaderPrimary` component displays primary header controls. On the\r\n * default skin, these are shown just to the right of the forum title.\r\n */\r\nexport default class HeaderPrimary extends Component {\r\n  view() {\r\n    return (\r\n      <ul className=\"Header-controls\">\r\n        {listItems(this.items().toArray())}\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  config(isInitialized, context) {\r\n    // Since this component is 'above' the content of the page (that is, it is a\r\n    // part of the global UI that persists between routes), we will flag the DOM\r\n    // to be retained across route changes.\r\n    context.retain = true;\r\n  }\r\n\r\n  /**\r\n   * Build an item list for the controls.\r\n   *\r\n   * @return {ItemList}\r\n   */\r\n  items() {\r\n    return new ItemList();\r\n  }\r\n}\r\n","import avatar from '../../common/helpers/avatar';\r\nimport username from '../../common/helpers/username';\r\nimport Dropdown from '../../common/components/Dropdown';\r\nimport Button from '../../common/components/Button';\r\nimport ItemList from '../../common/utils/ItemList';\r\n\r\n/**\r\n * The `SessionDropdown` component shows a button with the current user's\r\n * avatar/name, with a dropdown of session controls.\r\n */\r\nexport default class SessionDropdown extends Dropdown {\r\n  static initProps(props) {\r\n    super.initProps(props);\r\n\r\n    props.className = 'SessionDropdown';\r\n    props.buttonClassName = 'Button Button--user Button--flat';\r\n    props.menuClassName = 'Dropdown-menu--right';\r\n  }\r\n\r\n  view() {\r\n    this.props.children = this.items().toArray();\r\n\r\n    return super.view();\r\n  }\r\n\r\n  getButtonContent() {\r\n    const user = app.session.user;\r\n\r\n    return [\r\n      avatar(user), ' ',\r\n      <span className=\"Button-label\">{username(user)}</span>\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Build an item list for the contents of the dropdown menu.\r\n   *\r\n   * @return {ItemList}\r\n   */\r\n  items() {\r\n    const items = new ItemList();\r\n\r\n    items.add('logOut',\r\n      Button.component({\r\n        icon: 'fas fa-sign-out-alt',\r\n        children: app.translator.trans('core.admin.header.log_out_button'),\r\n        onclick: app.session.logout.bind(app.session)\r\n      }),\r\n      -100\r\n    );\r\n\r\n    return items;\r\n  }\r\n}\r\n","import Component from '../../common/Component';\r\nimport SessionDropdown from './SessionDropdown';\r\nimport ItemList from '../../common/utils/ItemList';\r\nimport listItems from '../../common/helpers/listItems';\r\n\r\n/**\r\n * The `HeaderSecondary` component displays secondary header controls.\r\n */\r\nexport default class HeaderSecondary extends Component {\r\n  view() {\r\n    return (\r\n      <ul className=\"Header-controls\">\r\n        {listItems(this.items().toArray())}\r\n      </ul>\r\n    );\r\n  }\r\n\r\n  config(isInitialized, context) {\r\n    // Since this component is 'above' the content of the page (that is, it is a\r\n    // part of the global UI that persists between routes), we will flag the DOM\r\n    // to be retained across route changes.\r\n    context.retain = true;\r\n  }\r\n\r\n  /**\r\n   * Build an item list for the controls.\r\n   *\r\n   * @return {ItemList}\r\n   */\r\n  items() {\r\n    const items = new ItemList();\r\n\r\n    items.add('session', SessionDropdown.component());\r\n\r\n    return items;\r\n  }\r\n}\r\n","import Component from '../../common/Component';\r\n\r\n/**\r\n * The `Page` component\r\n *\r\n * @abstract\r\n */\r\nexport default class Page extends Component {\r\n  init() {\r\n    app.previous = app.current;\r\n    app.current = this;\r\n\r\n    app.modal.close();\r\n\r\n    /**\r\n     * A class name to apply to the body while the route is active.\r\n     *\r\n     * @type {String}\r\n     */\r\n    this.bodyClass = '';\r\n  }\r\n\r\n  config(isInitialized, context) {\r\n    if (isInitialized) return;\r\n\r\n    if (this.bodyClass) {\r\n      $('#app').addClass(this.bodyClass);\r\n\r\n      context.onunload = () => $('#app').removeClass(this.bodyClass);\r\n    }\r\n  }\r\n}\r\n","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nimport Component from '../../common/Component';\r\n\r\nexport default class Widget extends Component {\r\n  view() {\r\n    return (\r\n      <div className={\"Widget \"+this.className()}>\r\n        {this.content()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get the class name to apply to the widget.\r\n   *\r\n   * @return {String}\r\n   */\r\n  className() {\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * Get the content of the widget.\r\n   *\r\n   * @return {VirtualElement}\r\n   */\r\n  content() {\r\n    return [];\r\n  }\r\n}\r\n","import Modal from '../../common/components/Modal';\r\n\r\nexport default class LoadingModal extends Modal {\r\n  isDismissible() {\r\n    return false;\r\n  }\r\n\r\n  className() {\r\n    return 'LoadingModal Modal--small';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('core.admin.loading.title');\r\n  }\r\n\r\n  content() {\r\n    return '';\r\n  }\r\n}\r\n","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nimport DashboardWidget from './DashboardWidget';\r\nimport listItems from '../../common/helpers/listItems';\r\nimport ItemList from '../../common/utils/ItemList';\r\nimport Dropdown from '../../common/components/Dropdown';\r\nimport Button from '../../common/components/Button';\r\nimport LoadingModal from './LoadingModal';\r\n\r\nexport default class StatusWidget extends DashboardWidget {\r\n  className() {\r\n    return 'StatusWidget';\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <ul>{listItems(this.items().toArray())}</ul>\r\n    );\r\n  }\r\n\r\n  items() {\r\n    const items = new ItemList();\r\n\r\n    items.add('tools', (\r\n      <Dropdown\r\n        label={app.translator.trans('core.admin.dashboard.tools_button')}\r\n        icon=\"fas fa-cog\"\r\n        buttonClassName=\"Button\"\r\n        menuClassName=\"Dropdown-menu--right\">\r\n        <Button onclick={this.handleClearCache.bind(this)}>\r\n          {app.translator.trans('core.admin.dashboard.clear_cache_button')}\r\n        </Button>\r\n      </Dropdown>\r\n    ));\r\n\r\n    items.add('version-flarum', [<strong>Flarum</strong>, <br/>, app.forum.attribute('version')]);\r\n    items.add('version-php', [<strong>PHP</strong>, <br/>, app.data.phpVersion]);\r\n    items.add('version-mysql', [<strong>MySQL</strong>, <br/>, app.data.mysqlVersion]);\r\n\r\n    return items;\r\n  }\r\n\r\n  handleClearCache(e) {\r\n    app.modal.show(new LoadingModal());\r\n\r\n    app.request({\r\n      method: 'DELETE',\r\n      url: app.forum.attribute('apiUrl') + '/cache'\r\n    }).then(() => window.location.reload());\r\n  }\r\n}\r\n","import Page from './Page';\r\nimport StatusWidget from './StatusWidget';\r\n\r\nexport default class DashboardPage extends Page {\r\n  view() {\r\n    return (\r\n      <div className=\"DashboardPage\">\r\n        <div className=\"container\">\r\n          {this.availableWidgets()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  availableWidgets() {\r\n    return [<StatusWidget/>];\r\n  }\r\n}\r\n","export default function saveSettings(settings) {\r\n  const oldSettings = JSON.parse(JSON.stringify(app.data.settings));\r\n\r\n  Object.assign(app.data.settings, settings);\r\n\r\n  return app.request({\r\n    method: 'POST',\r\n    url: app.forum.attribute('apiUrl') + '/settings',\r\n    data: settings\r\n  }).catch(error => {\r\n    app.data.settings = oldSettings;\r\n    throw error;\r\n  });\r\n}\r\n","import Page from './Page';\r\nimport FieldSet from '../../common/components/FieldSet';\r\nimport Select from '../../common/components/Select';\r\nimport Button from '../../common/components/Button';\r\nimport Alert from '../../common/components/Alert';\r\nimport saveSettings from '../utils/saveSettings';\r\nimport ItemList from '../../common/utils/ItemList';\r\nimport Switch from '../../common/components/Switch';\r\n\r\nexport default class BasicsPage extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    this.loading = false;\r\n\r\n    this.fields = [\r\n      'forum_title',\r\n      'forum_description',\r\n      'default_locale',\r\n      'show_language_selector',\r\n      'default_route',\r\n      'welcome_title',\r\n      'welcome_message'\r\n    ];\r\n    this.values = {};\r\n\r\n    const settings = app.data.settings;\r\n    this.fields.forEach(key => this.values[key] = m.prop(settings[key]));\r\n\r\n    this.localeOptions = {};\r\n    const locales = app.data.locales;\r\n    for (const i in locales) {\r\n      this.localeOptions[i] = `${locales[i]} (${i})`;\r\n    }\r\n\r\n    if (typeof this.values.show_language_selector() !== \"number\") this.values.show_language_selector(1);\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className=\"BasicsPage\">\r\n        <div className=\"container\">\r\n          <form onsubmit={this.onsubmit.bind(this)}>\r\n            {FieldSet.component({\r\n              label: app.translator.trans('core.admin.basics.forum_title_heading'),\r\n              children: [\r\n                <input className=\"FormControl\" value={this.values.forum_title()} oninput={m.withAttr('value', this.values.forum_title)}/>\r\n              ]\r\n            })}\r\n\r\n            {FieldSet.component({\r\n              label: app.translator.trans('core.admin.basics.forum_description_heading'),\r\n              children: [\r\n                <div className=\"helpText\">\r\n                  {app.translator.trans('core.admin.basics.forum_description_text')}\r\n                </div>,\r\n                <textarea className=\"FormControl\" value={this.values.forum_description()} oninput={m.withAttr('value', this.values.forum_description)}/>\r\n              ]\r\n            })}\r\n\r\n            {Object.keys(this.localeOptions).length > 1\r\n              ? FieldSet.component({\r\n                label: app.translator.trans('core.admin.basics.default_language_heading'),\r\n                children: [\r\n                  Select.component({\r\n                    options: this.localeOptions,\r\n                    value: this.values.default_locale(),\r\n                    onchange: this.values.default_locale\r\n                  }),\r\n                  Switch.component({\r\n                    state: this.values.show_language_selector(),\r\n                    onchange: this.values.show_language_selector,\r\n                    children: app.translator.trans('core.admin.basics.show_language_selector_label'),\r\n                  })\r\n                ]\r\n              })\r\n              : ''}\r\n\r\n            {FieldSet.component({\r\n              label: app.translator.trans('core.admin.basics.home_page_heading'),\r\n              className: 'BasicsPage-homePage',\r\n              children: [\r\n                <div className=\"helpText\">\r\n                  {app.translator.trans('core.admin.basics.home_page_text')}\r\n                </div>,\r\n                this.homePageItems().toArray().map(({path, label}) =>\r\n                  <label className=\"checkbox\">\r\n                    <input type=\"radio\" name=\"homePage\" value={path} checked={this.values.default_route() === path} onclick={m.withAttr('value', this.values.default_route)}/>\r\n                    {label}\r\n                  </label>\r\n                )\r\n              ]\r\n            })}\r\n\r\n            {FieldSet.component({\r\n              label: app.translator.trans('core.admin.basics.welcome_banner_heading'),\r\n              className: 'BasicsPage-welcomeBanner',\r\n              children: [\r\n                <div className=\"helpText\">\r\n                  {app.translator.trans('core.admin.basics.welcome_banner_text')}\r\n                </div>,\r\n                <div className=\"BasicsPage-welcomeBanner-input\">\r\n                  <input className=\"FormControl\" value={this.values.welcome_title()} oninput={m.withAttr('value', this.values.welcome_title)}/>\r\n                  <textarea className=\"FormControl\" value={this.values.welcome_message()} oninput={m.withAttr('value', this.values.welcome_message)}/>\r\n                </div>\r\n              ]\r\n            })}\r\n\r\n            {Button.component({\r\n              type: 'submit',\r\n              className: 'Button Button--primary',\r\n              children: app.translator.trans('core.admin.basics.submit_button'),\r\n              loading: this.loading,\r\n              disabled: !this.changed()\r\n            })}\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  changed() {\r\n    return this.fields.some(key => this.values[key]() !== app.data.settings[key]);\r\n  }\r\n\r\n  /**\r\n   * Build a list of options for the default homepage. Each option must be an\r\n   * object with `path` and `label` properties.\r\n   *\r\n   * @return {ItemList}\r\n   * @public\r\n   */\r\n  homePageItems() {\r\n    const items = new ItemList();\r\n\r\n    items.add('allDiscussions', {\r\n      path: '/all',\r\n      label: app.translator.trans('core.admin.basics.all_discussions_label')\r\n    });\r\n\r\n    return items;\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    if (this.loading) return;\r\n\r\n    this.loading = true;\r\n    app.alerts.dismiss(this.successAlert);\r\n\r\n    const settings = {};\r\n\r\n    this.fields.forEach(key => settings[key] = this.values[key]());\r\n\r\n    saveSettings(settings)\r\n      .then(() => {\r\n        app.alerts.show(this.successAlert = new Alert({type: 'success', children: app.translator.trans('core.admin.basics.saved_message')}));\r\n      })\r\n      .catch(() => {})\r\n      .then(() => {\r\n        this.loading = false;\r\n        m.redraw();\r\n      });\r\n  }\r\n}\r\n","import Modal from '../../common/components/Modal';\r\nimport Button from '../../common/components/Button';\r\nimport Badge from '../../common/components/Badge';\r\nimport Group from '../../common/models/Group';\r\nimport ItemList from '../../common/utils/ItemList';\r\n\r\n/**\r\n * The `EditGroupModal` component shows a modal dialog which allows the user\r\n * to create or edit a group.\r\n */\r\nexport default class EditGroupModal extends Modal {\r\n  init() {\r\n    this.group = this.props.group || app.store.createRecord('groups');\r\n\r\n    this.nameSingular = m.prop(this.group.nameSingular() || '');\r\n    this.namePlural = m.prop(this.group.namePlural() || '');\r\n    this.icon = m.prop(this.group.icon() || '');\r\n    this.color = m.prop(this.group.color() || '');\r\n  }\r\n\r\n  className() {\r\n    return 'EditGroupModal Modal--small';\r\n  }\r\n\r\n  title() {\r\n    return [\r\n      this.color() || this.icon() ? Badge.component({\r\n        icon: this.icon(),\r\n        style: {backgroundColor: this.color()}\r\n      }) : '',\r\n      ' ',\r\n      this.namePlural() || app.translator.trans('core.admin.edit_group.title')\r\n    ];\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          {this.fields().toArray()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  fields() {\r\n    const items = new ItemList();\r\n\r\n    items.add('name', <div className=\"Form-group\">\r\n      <label>{app.translator.trans('core.admin.edit_group.name_label')}</label>\r\n      <div className=\"EditGroupModal-name-input\">\r\n        <input className=\"FormControl\" placeholder={app.translator.trans('core.admin.edit_group.singular_placeholder')} value={this.nameSingular()} oninput={m.withAttr('value', this.nameSingular)}/>\r\n        <input className=\"FormControl\" placeholder={app.translator.trans('core.admin.edit_group.plural_placeholder')} value={this.namePlural()} oninput={m.withAttr('value', this.namePlural)}/>\r\n      </div>\r\n    </div>, 30);\r\n\r\n    items.add('color', <div className=\"Form-group\">\r\n      <label>{app.translator.trans('core.admin.edit_group.color_label')}</label>\r\n      <input className=\"FormControl\" placeholder=\"#aaaaaa\" value={this.color()} oninput={m.withAttr('value', this.color)}/>\r\n    </div>, 20);\r\n\r\n    items.add('icon', <div className=\"Form-group\">\r\n      <label>{app.translator.trans('core.admin.edit_group.icon_label')}</label>\r\n      <div className=\"helpText\">\r\n        {app.translator.trans('core.admin.edit_group.icon_text', {a: <a href=\"https://fontawesome.com/icons?m=free\" tabindex=\"-1\"/>})}\r\n      </div>\r\n      <input className=\"FormControl\" placeholder=\"fas fa-bolt\" value={this.icon()} oninput={m.withAttr('value', this.icon)}/>\r\n    </div>, 10);\r\n\r\n    items.add('submit', <div className=\"Form-group\">\r\n      {Button.component({\r\n        type: 'submit',\r\n        className: 'Button Button--primary EditGroupModal-save',\r\n        loading: this.loading,\r\n        children: app.translator.trans('core.admin.edit_group.submit_button')\r\n      })}\r\n      {this.group.exists && this.group.id() !== Group.ADMINISTRATOR_ID ? (\r\n        <button type=\"button\" className=\"Button EditGroupModal-delete\" onclick={this.deleteGroup.bind(this)}>\r\n          {app.translator.trans('core.admin.edit_group.delete_button')}\r\n        </button>\r\n      ) : ''}\r\n    </div>, -10);\r\n\r\n    return items;\r\n  }\r\n\r\n  submitData() {\r\n    return {\r\n      nameSingular: this.nameSingular(),\r\n      namePlural: this.namePlural(),\r\n      color: this.color(),\r\n      icon: this.icon()\r\n    };\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.group.save(this.submitData(), {errorHandler: this.onerror.bind(this)})\r\n      .then(this.hide.bind(this))\r\n      .catch(() => {\r\n        this.loading = false;\r\n        m.redraw();\r\n      });\r\n  }\r\n\r\n  deleteGroup() {\r\n    if (confirm(app.translator.trans('core.admin.edit_group.delete_confirmation'))) {\r\n      this.group.delete().then(() => m.redraw());\r\n      this.hide();\r\n    }\r\n  }\r\n}\r\n","import Dropdown from '../../common/components/Dropdown';\r\nimport Button from '../../common/components/Button';\r\nimport Separator from '../../common/components/Separator';\r\nimport Group from '../../common/models/Group';\r\nimport Badge from '../../common/components/Badge';\r\nimport GroupBadge from '../../common/components/GroupBadge';\r\n\r\nfunction badgeForId(id) {\r\n  const group = app.store.getById('groups', id);\r\n\r\n  return group ? GroupBadge.component({group, label: null}) : '';\r\n}\r\n\r\nfunction filterByRequiredPermissions(groupIds, permission) {\r\n  app.getRequiredPermissions(permission)\r\n    .forEach(required => {\r\n      const restrictToGroupIds = app.data.permissions[required] || [];\r\n\r\n      if (restrictToGroupIds.indexOf(Group.GUEST_ID) !== -1) {\r\n        // do nothing\r\n      } else if (restrictToGroupIds.indexOf(Group.MEMBER_ID) !== -1) {\r\n        groupIds = groupIds.filter(id => id !== Group.GUEST_ID);\r\n      } else if (groupIds.indexOf(Group.MEMBER_ID) !== -1) {\r\n        groupIds = restrictToGroupIds;\r\n      } else {\r\n        groupIds = restrictToGroupIds.filter(id => groupIds.indexOf(id) !== -1);\r\n      }\r\n\r\n      groupIds = filterByRequiredPermissions(groupIds, required);\r\n    });\r\n\r\n  return groupIds;\r\n}\r\n\r\nexport default class PermissionDropdown extends Dropdown {\r\n  static initProps(props) {\r\n    super.initProps(props);\r\n\r\n    props.className = 'PermissionDropdown';\r\n    props.buttonClassName = 'Button Button--text';\r\n  }\r\n\r\n  view() {\r\n    this.props.children = [];\r\n\r\n    let groupIds = app.data.permissions[this.props.permission] || [];\r\n\r\n    groupIds = filterByRequiredPermissions(groupIds, this.props.permission);\r\n\r\n    const everyone = groupIds.indexOf(Group.GUEST_ID) !== -1;\r\n    const members = groupIds.indexOf(Group.MEMBER_ID) !== -1;\r\n    const adminGroup = app.store.getById('groups', Group.ADMINISTRATOR_ID);\r\n\r\n    if (everyone) {\r\n      this.props.label = Badge.component({icon: 'fas fa-globe'});\r\n    } else if (members) {\r\n      this.props.label = Badge.component({icon: 'fas fa-user'});\r\n    } else {\r\n      this.props.label = [\r\n        badgeForId(Group.ADMINISTRATOR_ID),\r\n        groupIds.map(badgeForId)\r\n      ];\r\n    }\r\n\r\n    if (this.showing) {\r\n      if (this.props.allowGuest) {\r\n        this.props.children.push(\r\n          Button.component({\r\n            children: [Badge.component({icon: 'fas fa-globe'}), ' ', app.translator.trans('core.admin.permissions_controls.everyone_button')],\r\n            icon: everyone ? 'fas fa-check' : true,\r\n            onclick: () => this.save([Group.GUEST_ID]),\r\n            disabled: this.isGroupDisabled(Group.GUEST_ID)\r\n          })\r\n        );\r\n      }\r\n\r\n      this.props.children.push(\r\n        Button.component({\r\n          children: [Badge.component({icon: 'fas fa-user'}), ' ', app.translator.trans('core.admin.permissions_controls.members_button')],\r\n          icon: members ? 'fas fa-check' : true,\r\n          onclick: () => this.save([Group.MEMBER_ID]),\r\n          disabled: this.isGroupDisabled(Group.MEMBER_ID)\r\n        }),\r\n\r\n        Separator.component(),\r\n\r\n        Button.component({\r\n          children: [badgeForId(adminGroup.id()), ' ', adminGroup.namePlural()],\r\n          icon: !everyone && !members ? 'fas fa-check' : true,\r\n          disabled: !everyone && !members,\r\n          onclick: e => {\r\n            if (e.shiftKey) e.stopPropagation();\r\n            this.save([]);\r\n          }\r\n        })\r\n      );\r\n\r\n      [].push.apply(\r\n        this.props.children,\r\n        app.store.all('groups')\r\n          .filter(group => [Group.ADMINISTRATOR_ID, Group.GUEST_ID, Group.MEMBER_ID].indexOf(group.id()) === -1)\r\n          .map(group => Button.component({\r\n            children: [badgeForId(group.id()), ' ', group.namePlural()],\r\n            icon: groupIds.indexOf(group.id()) !== -1 ? 'fas fa-check' : true,\r\n            onclick: (e) => {\r\n              if (e.shiftKey) e.stopPropagation();\r\n              this.toggle(group.id());\r\n            },\r\n            disabled: this.isGroupDisabled(group.id()) && this.isGroupDisabled(Group.MEMBER_ID) && this.isGroupDisabled(Group.GUEST_ID)\r\n          }))\r\n      );\r\n    }\r\n\r\n    return super.view();\r\n  }\r\n\r\n  save(groupIds) {\r\n    const permission = this.props.permission;\r\n\r\n    app.data.permissions[permission] = groupIds;\r\n\r\n    app.request({\r\n      method: 'POST',\r\n      url: app.forum.attribute('apiUrl') + '/permission',\r\n      data: {permission, groupIds}\r\n    });\r\n  }\r\n\r\n  toggle(groupId) {\r\n    const permission = this.props.permission;\r\n\r\n    let groupIds = app.data.permissions[permission] || [];\r\n\r\n    const index = groupIds.indexOf(groupId);\r\n\r\n    if (index !== -1) {\r\n      groupIds.splice(index, 1);\r\n    } else {\r\n      groupIds.push(groupId);\r\n      groupIds = groupIds.filter(id => [Group.GUEST_ID, Group.MEMBER_ID].indexOf(id) === -1);\r\n    }\r\n\r\n    this.save(groupIds);\r\n  }\r\n\r\n  isGroupDisabled(id) {\r\n    return filterByRequiredPermissions([id], this.props.permission).indexOf(id) === -1;\r\n  }\r\n}\r\n","import SelectDropdown from '../../common/components/SelectDropdown';\r\nimport Button from '../../common/components/Button';\r\nimport saveSettings from '../utils/saveSettings';\r\n\r\nexport default class SettingDropdown extends SelectDropdown {\r\n  static initProps(props) {\r\n    super.initProps(props);\r\n\r\n    props.className = 'SettingDropdown';\r\n    props.buttonClassName = 'Button Button--text';\r\n    props.caretIcon = 'fas fa-caret-down';\r\n    props.defaultLabel = 'Custom';\r\n\r\n    props.children = props.options.map(({value, label}) => {\r\n      const active = app.data.settings[props.key] === value;\r\n\r\n      return Button.component({\r\n        children: label,\r\n        icon: active ? 'fas fa-check' : true,\r\n        onclick: saveSettings.bind(this, {[props.key]: value}),\r\n        active\r\n      });\r\n    });\r\n  }\r\n}\r\n","import Component from '../../common/Component';\r\nimport PermissionDropdown from './PermissionDropdown';\r\nimport SettingDropdown from './SettingDropdown';\r\nimport Button from '../../common/components/Button';\r\nimport ItemList from '../../common/utils/ItemList';\r\nimport icon from '../../common/helpers/icon';\r\n\r\nexport default class PermissionGrid extends Component {\r\n  init() {\r\n    this.permissions = this.permissionItems().toArray();\r\n  }\r\n\r\n  view() {\r\n    const scopes = this.scopeItems().toArray();\r\n\r\n    const permissionCells = permission => {\r\n      return scopes.map(scope => (\r\n        <td>\r\n          {scope.render(permission)}\r\n        </td>\r\n      ));\r\n    };\r\n\r\n    return (\r\n      <table className=\"PermissionGrid\">\r\n        <thead>\r\n          <tr>\r\n            <td></td>\r\n            {scopes.map(scope => (\r\n              <th>\r\n                {scope.label}{' '}\r\n                {scope.onremove ? Button.component({icon: 'fas fa-times', className: 'Button Button--text PermissionGrid-removeScope', onclick: scope.onremove}) : ''}\r\n              </th>\r\n            ))}\r\n            <th>{this.scopeControlItems().toArray()}</th>\r\n          </tr>\r\n        </thead>\r\n        {this.permissions.map(section => (\r\n          <tbody>\r\n            <tr className=\"PermissionGrid-section\">\r\n              <th>{section.label}</th>\r\n              {permissionCells(section)}\r\n              <td/>\r\n            </tr>\r\n            {section.children.map(child => (\r\n              <tr className=\"PermissionGrid-child\">\r\n                <th>{icon(child.icon)}{child.label}</th>\r\n                {permissionCells(child)}\r\n                <td/>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        ))}\r\n      </table>\r\n    );\r\n  }\r\n\r\n  permissionItems() {\r\n    const items = new ItemList();\r\n\r\n    items.add('view', {\r\n      label: app.translator.trans('core.admin.permissions.read_heading'),\r\n      children: this.viewItems().toArray()\r\n    }, 100);\r\n\r\n    items.add('start', {\r\n      label: app.translator.trans('core.admin.permissions.create_heading'),\r\n      children: this.startItems().toArray()\r\n    }, 90);\r\n\r\n    items.add('reply', {\r\n      label: app.translator.trans('core.admin.permissions.participate_heading'),\r\n      children: this.replyItems().toArray()\r\n    }, 80);\r\n\r\n    items.add('moderate', {\r\n      label: app.translator.trans('core.admin.permissions.moderate_heading'),\r\n      children: this.moderateItems().toArray()\r\n    }, 70);\r\n\r\n    return items;\r\n  }\r\n\r\n  viewItems() {\r\n    const items = new ItemList();\r\n\r\n    items.add('viewDiscussions', {\r\n      icon: 'fas fa-eye',\r\n      label: app.translator.trans('core.admin.permissions.view_discussions_label'),\r\n      permission: 'viewDiscussions',\r\n      allowGuest: true\r\n    }, 100);\r\n\r\n    items.add('viewUserList', {\r\n      icon: 'fas fa-users',\r\n      label: app.translator.trans('core.admin.permissions.view_user_list_label'),\r\n      permission: 'viewUserList',\r\n      allowGuest: true\r\n    }, 100);\r\n\r\n    items.add('signUp', {\r\n      icon: 'fas fa-user-plus',\r\n      label: app.translator.trans('core.admin.permissions.sign_up_label'),\r\n      setting: () => SettingDropdown.component({\r\n        key: 'allow_sign_up',\r\n        options: [\r\n          {value: '1', label: app.translator.trans('core.admin.permissions_controls.signup_open_button')},\r\n          {value: '0', label: app.translator.trans('core.admin.permissions_controls.signup_closed_button')}\r\n        ]\r\n      })\r\n    }, 90);\r\n\r\n    items.add('viewLastSeenAt', {\r\n      icon: 'far fa-clock',\r\n      label: app.translator.trans('core.admin.permissions.view_last_seen_at_label'),\r\n      permission: 'user.viewLastSeenAt',\r\n    });\r\n\r\n    return items;\r\n  }\r\n\r\n  startItems() {\r\n    const items = new ItemList();\r\n\r\n    items.add('start', {\r\n      icon: 'fas fa-edit',\r\n      label: app.translator.trans('core.admin.permissions.start_discussions_label'),\r\n      permission: 'startDiscussion'\r\n    }, 100);\r\n\r\n    items.add('allowRenaming', {\r\n      icon: 'fas fa-i-cursor',\r\n      label: app.translator.trans('core.admin.permissions.allow_renaming_label'),\r\n      setting: () => {\r\n        const minutes = parseInt(app.data.settings.allow_renaming, 10);\r\n\r\n        return SettingDropdown.component({\r\n          defaultLabel: minutes\r\n            ? app.translator.transChoice('core.admin.permissions_controls.allow_some_minutes_button', minutes, {count: minutes})\r\n            : app.translator.trans('core.admin.permissions_controls.allow_indefinitely_button'),\r\n          key: 'allow_renaming',\r\n          options: [\r\n            {value: '-1', label: app.translator.trans('core.admin.permissions_controls.allow_indefinitely_button')},\r\n            {value: '10', label: app.translator.trans('core.admin.permissions_controls.allow_ten_minutes_button')},\r\n            {value: 'reply', label: app.translator.trans('core.admin.permissions_controls.allow_until_reply_button')}\r\n          ]\r\n        });\r\n      }\r\n    }, 90);\r\n\r\n    return items;\r\n  }\r\n\r\n  replyItems() {\r\n    const items = new ItemList();\r\n\r\n    items.add('reply', {\r\n      icon: 'fas fa-reply',\r\n      label: app.translator.trans('core.admin.permissions.reply_to_discussions_label'),\r\n      permission: 'discussion.reply'\r\n    }, 100);\r\n\r\n    items.add('allowPostEditing', {\r\n      icon: 'fas fa-pencil-alt',\r\n      label: app.translator.trans('core.admin.permissions.allow_post_editing_label'),\r\n      setting: () => {\r\n        const minutes = parseInt(app.data.settings.allow_post_editing, 10);\r\n\r\n        return SettingDropdown.component({\r\n          defaultLabel: minutes\r\n            ? app.translator.transChoice('core.admin.permissions_controls.allow_some_minutes_button', minutes, {count: minutes})\r\n            : app.translator.trans('core.admin.permissions_controls.allow_indefinitely_button'),\r\n          key: 'allow_post_editing',\r\n          options: [\r\n            {value: '-1', label: app.translator.trans('core.admin.permissions_controls.allow_indefinitely_button')},\r\n            {value: '10', label: app.translator.trans('core.admin.permissions_controls.allow_ten_minutes_button')},\r\n            {value: 'reply', label: app.translator.trans('core.admin.permissions_controls.allow_until_reply_button')}\r\n          ]\r\n        });\r\n      }\r\n    }, 90);\r\n\r\n    return items;\r\n  }\r\n\r\n  moderateItems() {\r\n    const items = new ItemList();\r\n\r\n    items.add('viewIpsPosts', {\r\n      icon: 'fas fa-bullseye',\r\n      label: app.translator.trans('core.admin.permissions.view_post_ips_label'),\r\n      permission: 'discussion.viewIpsPosts'\r\n    }, 110);\r\n\r\n    items.add('renameDiscussions', {\r\n      icon: 'fas fa-i-cursor',\r\n      label: app.translator.trans('core.admin.permissions.rename_discussions_label'),\r\n      permission: 'discussion.rename'\r\n    }, 100);\r\n\r\n    items.add('hideDiscussions', {\r\n      icon: 'far fa-trash-alt',\r\n      label: app.translator.trans('core.admin.permissions.delete_discussions_label'),\r\n      permission: 'discussion.hide'\r\n    }, 90);\r\n\r\n    items.add('deleteDiscussions', {\r\n      icon: 'fas fa-times',\r\n      label: app.translator.trans('core.admin.permissions.delete_discussions_forever_label'),\r\n      permission: 'discussion.delete'\r\n    }, 80);\r\n\r\n    items.add('postWithoutThrottle', {\r\n      icon: 'fas fa-swimmer',\r\n      label: app.translator.trans('core.admin.permissions.post_without_throttle_label'),\r\n      permission: 'postWithoutThrottle'\r\n    }, 70);\r\n\r\n    items.add('editPosts', {\r\n      icon: 'fas fa-pencil-alt',\r\n      label: app.translator.trans('core.admin.permissions.edit_posts_label'),\r\n      permission: 'discussion.editPosts'\r\n    }, 70);\r\n\r\n    items.add('hidePosts', {\r\n      icon: 'far fa-trash-alt',\r\n      label: app.translator.trans('core.admin.permissions.delete_posts_label'),\r\n      permission: 'discussion.hidePosts'\r\n    }, 60);\r\n\r\n    items.add('deletePosts', {\r\n      icon: 'fas fa-times',\r\n      label: app.translator.trans('core.admin.permissions.delete_posts_forever_label'),\r\n      permission: 'discussion.deletePosts'\r\n    }, 60);\r\n\r\n    items.add('userEdit', {\r\n      icon: 'fas fa-user-cog',\r\n      label: app.translator.trans('core.admin.permissions.edit_users_label'),\r\n      permission: 'user.edit'\r\n    }, 60);\r\n\r\n    return items;\r\n  }\r\n\r\n  scopeItems() {\r\n    const items = new ItemList();\r\n\r\n    items.add('global', {\r\n      label: app.translator.trans('core.admin.permissions.global_heading'),\r\n      render: item => {\r\n        if (item.setting) {\r\n          return item.setting();\r\n        } else if (item.permission) {\r\n          return PermissionDropdown.component({\r\n            permission: item.permission,\r\n            allowGuest: item.allowGuest\r\n          });\r\n        }\r\n\r\n        return '';\r\n      }\r\n    }, 100);\r\n\r\n    return items;\r\n  }\r\n\r\n  scopeControlItems() {\r\n    return new ItemList();\r\n  }\r\n}\r\n","import Page from './Page';\r\nimport GroupBadge from '../../common/components/GroupBadge';\r\nimport EditGroupModal from './EditGroupModal';\r\nimport Group from '../../common/models/Group';\r\nimport icon from '../../common/helpers/icon';\r\nimport PermissionGrid from './PermissionGrid';\r\n\r\nexport default class PermissionsPage extends Page {\r\n  view() {\r\n    return (\r\n      <div className=\"PermissionsPage\">\r\n        <div className=\"PermissionsPage-groups\">\r\n          <div className=\"container\">\r\n            {app.store.all('groups')\r\n              .filter(group => [Group.GUEST_ID, Group.MEMBER_ID].indexOf(group.id()) === -1)\r\n              .map(group => (\r\n                <button className=\"Button Group\" onclick={() => app.modal.show(new EditGroupModal({group}))}>\r\n                  {GroupBadge.component({\r\n                    group,\r\n                    className: 'Group-icon',\r\n                    label: null\r\n                  })}\r\n                  <span className=\"Group-name\">{group.namePlural()}</span>\r\n                </button>\r\n              ))}\r\n            <button className=\"Button Group Group--add\" onclick={() => app.modal.show(new EditGroupModal())}>\r\n              {icon('fas fa-plus', {className: 'Group-icon'})}\r\n              <span className=\"Group-name\">{app.translator.trans('core.admin.permissions.new_group_button')}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"PermissionsPage-permissions\">\r\n          <div className=\"container\">\r\n            {PermissionGrid.component()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Modal from '../../common/components/Modal';\r\nimport Button from '../../common/components/Button';\r\nimport saveSettings from '../utils/saveSettings';\r\n\r\nexport default class SettingsModal extends Modal {\r\n  init() {\r\n    this.settings = {};\r\n    this.loading = false;\r\n  }\r\n\r\n  form() {\r\n    return '';\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          {this.form()}\r\n\r\n          <div className=\"Form-group\">\r\n            {this.submitButton()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  submitButton() {\r\n    return (\r\n      <Button\r\n        type=\"submit\"\r\n        className=\"Button Button--primary\"\r\n        loading={this.loading}\r\n        disabled={!this.changed()}>\r\n        {app.translator.trans('core.admin.settings.submit_button')}\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  setting(key, fallback = '') {\r\n    this.settings[key] = this.settings[key] || m.prop(app.data.settings[key] || fallback);\r\n\r\n    return this.settings[key];\r\n  }\r\n\r\n  dirty() {\r\n    const dirty = {};\r\n\r\n    Object.keys(this.settings).forEach(key => {\r\n      const value = this.settings[key]();\r\n\r\n      if (value !== app.data.settings[key]) {\r\n        dirty[key] = value;\r\n      }\r\n    });\r\n\r\n    return dirty;\r\n  }\r\n\r\n  changed() {\r\n    return Object.keys(this.dirty()).length;\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    saveSettings(this.dirty()).then(\r\n      this.onsaved.bind(this),\r\n      this.loaded.bind(this)\r\n    );\r\n  }\r\n\r\n  onsaved() {\r\n    this.hide();\r\n  }\r\n}\r\n","import SettingsModal from './SettingsModal';\r\n\r\nexport default class EditCustomCssModal extends SettingsModal {\r\n  className() {\r\n    return 'EditCustomCssModal Modal--large';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('core.admin.edit_css.title');\r\n  }\r\n\r\n  form() {\r\n    return [\r\n      <p>{app.translator.trans('core.admin.edit_css.customize_text', {a: <a href=\"https://github.com/flarum/core/tree/master/less\" target=\"_blank\"/>})}</p>,\r\n      <div className=\"Form-group\">\r\n        <textarea className=\"FormControl\" rows=\"30\" bidi={this.setting('custom_less')}/>\r\n      </div>\r\n    ];\r\n  }\r\n\r\n  onsaved() {\r\n    window.location.reload();\r\n  }\r\n}\r\n","import SettingsModal from './SettingsModal';\r\n\r\nexport default class EditCustomHeaderModal extends SettingsModal {\r\n  className() {\r\n    return 'EditCustomHeaderModal Modal--large';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('core.admin.edit_header.title');\r\n  }\r\n\r\n  form() {\r\n    return [\r\n      <p>{app.translator.trans('core.admin.edit_header.customize_text')}</p>,\r\n      <div className=\"Form-group\">\r\n        <textarea className=\"FormControl\" rows=\"30\" bidi={this.setting('custom_header')}/>\r\n      </div>\r\n    ];\r\n  }\r\n\r\n  onsaved() {\r\n    window.location.reload();\r\n  }\r\n}\r\n","import SettingsModal from './SettingsModal';\r\n\r\nexport default class EditCustomFooterModal extends SettingsModal {\r\n  className() {\r\n    return 'EditCustomFooterModal Modal--large';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('core.admin.edit_footer.title');\r\n  }\r\n\r\n  form() {\r\n    return [\r\n      <p>{app.translator.trans('core.admin.edit_footer.customize_text')}</p>,\r\n      <div className=\"Form-group\">\r\n        <textarea className=\"FormControl\" rows=\"30\" bidi={this.setting('custom_footer')}/>\r\n      </div>\r\n    ];\r\n  }\r\n\r\n  onsaved() {\r\n    window.location.reload();\r\n  }\r\n}\r\n","import Button from '../../common/components/Button';\r\n\r\nexport default class UploadImageButton extends Button {\r\n  init() {\r\n    this.loading = false;\r\n  }\r\n\r\n  view() {\r\n    this.props.loading = this.loading;\r\n    this.props.className = (this.props.className || '') + ' Button';\r\n\r\n    if (app.data.settings[this.props.name + '_path']) {\r\n      this.props.onclick = this.remove.bind(this);\r\n      this.props.children = app.translator.trans('core.admin.upload_image.remove_button');\r\n\r\n      return (\r\n        <div>\r\n          <p><img src={app.forum.attribute(this.props.name+'Url')} alt=\"\"/></p>\r\n          <p>{super.view()}</p>\r\n        </div>\r\n      );\r\n    } else {\r\n      this.props.onclick = this.upload.bind(this);\r\n      this.props.children = app.translator.trans('core.admin.upload_image.upload_button');\r\n    }\r\n\r\n    return super.view();\r\n  }\r\n\r\n  /**\r\n   * Prompt the user to upload an image.\r\n   */\r\n  upload() {\r\n    if (this.loading) return;\r\n\r\n    const $input = $('<input type=\"file\">');\r\n\r\n    $input.appendTo('body').hide().click().on('change', e => {\r\n      const data = new FormData();\r\n      data.append(this.props.name, $(e.target)[0].files[0]);\r\n\r\n      this.loading = true;\r\n      m.redraw();\r\n\r\n      app.request({\r\n        method: 'POST',\r\n        url: this.resourceUrl(),\r\n        serialize: raw => raw,\r\n        data\r\n      }).then(\r\n        this.success.bind(this),\r\n        this.failure.bind(this)\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove the logo.\r\n   */\r\n  remove() {\r\n    this.loading = true;\r\n    m.redraw();\r\n\r\n    app.request({\r\n      method: 'DELETE',\r\n      url: this.resourceUrl()\r\n    }).then(\r\n      this.success.bind(this),\r\n      this.failure.bind(this)\r\n    );\r\n  }\r\n\r\n  resourceUrl() {\r\n    return app.forum.attribute('apiUrl') + '/' + this.props.name;\r\n  }\r\n\r\n  /**\r\n   * After a successful upload/removal, reload the page.\r\n   *\r\n   * @param {Object} response\r\n   * @protected\r\n   */\r\n  success(response) {\r\n    window.location.reload();\r\n  }\r\n\r\n  /**\r\n   * If upload/removal fails, stop loading.\r\n   *\r\n   * @param {Object} response\r\n   * @protected\r\n   */\r\n  failure(response) {\r\n    this.loading = false;\r\n    m.redraw();\r\n  }\r\n}\r\n","import Page from './Page';\r\nimport Button from '../../common/components/Button';\r\nimport Switch from '../../common/components/Switch';\r\nimport EditCustomCssModal from './EditCustomCssModal';\r\nimport EditCustomHeaderModal from './EditCustomHeaderModal';\r\nimport EditCustomFooterModal from './EditCustomFooterModal';\r\nimport UploadImageButton from './UploadImageButton';\r\nimport saveSettings from '../utils/saveSettings';\r\n\r\nexport default class AppearancePage extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    this.primaryColor = m.prop(app.data.settings.theme_primary_color);\r\n    this.secondaryColor = m.prop(app.data.settings.theme_secondary_color);\r\n    this.darkMode = m.prop(app.data.settings.theme_dark_mode === '1');\r\n    this.coloredHeader = m.prop(app.data.settings.theme_colored_header === '1');\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className=\"AppearancePage\">\r\n        <div className=\"container\">\r\n          <form onsubmit={this.onsubmit.bind(this)}>\r\n            <fieldset className=\"AppearancePage-colors\">\r\n              <legend>{app.translator.trans('core.admin.appearance.colors_heading')}</legend>\r\n              <div className=\"helpText\">\r\n                {app.translator.trans('core.admin.appearance.colors_text')}\r\n              </div>\r\n\r\n              <div className=\"AppearancePage-colors-input\">\r\n                <input className=\"FormControl\" type=\"text\" placeholder=\"#aaaaaa\" value={this.primaryColor()} onchange={m.withAttr('value', this.primaryColor)}/>\r\n                <input className=\"FormControl\" type=\"text\" placeholder=\"#aaaaaa\" value={this.secondaryColor()} onchange={m.withAttr('value', this.secondaryColor)}/>\r\n              </div>\r\n\r\n              {Switch.component({\r\n                state: this.darkMode(),\r\n                children: app.translator.trans('core.admin.appearance.dark_mode_label'),\r\n                onchange: this.darkMode\r\n              })}\r\n\r\n              {Switch.component({\r\n                state: this.coloredHeader(),\r\n                children: app.translator.trans('core.admin.appearance.colored_header_label'),\r\n                onchange: this.coloredHeader\r\n              })}\r\n\r\n              {Button.component({\r\n                className: 'Button Button--primary',\r\n                type: 'submit',\r\n                children: app.translator.trans('core.admin.appearance.submit_button'),\r\n                loading: this.loading\r\n              })}\r\n            </fieldset>\r\n          </form>\r\n\r\n          <fieldset>\r\n            <legend>{app.translator.trans('core.admin.appearance.logo_heading')}</legend>\r\n            <div className=\"helpText\">\r\n              {app.translator.trans('core.admin.appearance.logo_text')}\r\n            </div>\r\n            <UploadImageButton name=\"logo\"/>\r\n          </fieldset>\r\n\r\n          <fieldset>\r\n            <legend>{app.translator.trans('core.admin.appearance.favicon_heading')}</legend>\r\n            <div className=\"helpText\">\r\n              {app.translator.trans('core.admin.appearance.favicon_text')}\r\n            </div>\r\n            <UploadImageButton name=\"favicon\"/>\r\n          </fieldset>\r\n\r\n          <fieldset>\r\n            <legend>{app.translator.trans('core.admin.appearance.custom_header_heading')}</legend>\r\n            <div className=\"helpText\">\r\n              {app.translator.trans('core.admin.appearance.custom_header_text')}\r\n            </div>\r\n            {Button.component({\r\n              className: 'Button',\r\n              children: app.translator.trans('core.admin.appearance.edit_header_button'),\r\n              onclick: () => app.modal.show(new EditCustomHeaderModal())\r\n            })}\r\n          </fieldset>\r\n\r\n          <fieldset>\r\n            <legend>{app.translator.trans('core.admin.appearance.custom_footer_heading')}</legend>\r\n            <div className=\"helpText\">\r\n              {app.translator.trans('core.admin.appearance.custom_footer_text')}\r\n            </div>\r\n            {Button.component({\r\n              className: 'Button',\r\n              children: app.translator.trans('core.admin.appearance.edit_footer_button'),\r\n              onclick: () => app.modal.show(new EditCustomFooterModal())\r\n            })}\r\n          </fieldset>\r\n\r\n          <fieldset>\r\n            <legend>{app.translator.trans('core.admin.appearance.custom_styles_heading')}</legend>\r\n            <div className=\"helpText\">\r\n              {app.translator.trans('core.admin.appearance.custom_styles_text')}\r\n            </div>\r\n            {Button.component({\r\n              className: 'Button',\r\n              children: app.translator.trans('core.admin.appearance.edit_css_button'),\r\n              onclick: () => app.modal.show(new EditCustomCssModal())\r\n            })}\r\n          </fieldset>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    const hex = /^#[0-9a-f]{3}([0-9a-f]{3})?$/i;\r\n\r\n    if (!hex.test(this.primaryColor()) || !hex.test(this.secondaryColor())) {\r\n      alert(app.translator.trans('core.admin.appearance.enter_hex_message'));\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n\r\n    saveSettings({\r\n      theme_primary_color: this.primaryColor(),\r\n      theme_secondary_color: this.secondaryColor(),\r\n      theme_dark_mode: this.darkMode(),\r\n      theme_colored_header: this.coloredHeader()\r\n    }).then(() => window.location.reload());\r\n  }\r\n}\r\n","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nimport Modal from '../../common/components/Modal';\r\n\r\nexport default class AddExtensionModal extends Modal {\r\n  className() {\r\n    return 'AddExtensionModal Modal--small';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('core.admin.add_extension.title');\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <p>{app.translator.trans('core.admin.add_extension.temporary_text')}</p>\r\n        <p>{app.translator.trans('core.admin.add_extension.install_text', {a: <a href=\"https://discuss.flarum.org/t/extensions\" target=\"_blank\"/>})}</p>\r\n        <p>{app.translator.trans('core.admin.add_extension.developer_text', {a: <a href=\"http://flarum.org/docs/extend\" target=\"_blank\"/>})}</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Page from './Page';\r\nimport LinkButton from '../../common/components/LinkButton';\r\nimport Button from '../../common/components/Button';\r\nimport Dropdown from '../../common/components/Dropdown';\r\nimport Separator from '../../common/components/Separator';\r\nimport AddExtensionModal from './AddExtensionModal';\r\nimport LoadingModal from './LoadingModal';\r\nimport ItemList from '../../common/utils/ItemList';\r\nimport icon from '../../common/helpers/icon';\r\nimport listItems from '../../common/helpers/listItems';\r\n\r\nexport default class ExtensionsPage extends Page {\r\n  view() {\r\n    return (\r\n      <div className=\"ExtensionsPage\">\r\n        <div className=\"ExtensionsPage-header\">\r\n          <div className=\"container\">\r\n            {Button.component({\r\n              children: app.translator.trans('core.admin.extensions.add_button'),\r\n              icon: 'fas fa-plus',\r\n              className: 'Button Button--primary',\r\n              onclick: () => app.modal.show(new AddExtensionModal())\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"ExtensionsPage-list\">\r\n          <div className=\"container\">\r\n            <ul className=\"ExtensionList\">\r\n              {Object.keys(app.data.extensions)\r\n                .map(id => {\r\n                  const extension = app.data.extensions[id];\r\n                  const controls = this.controlItems(extension.id).toArray();\r\n\r\n                  return <li className={'ExtensionListItem ' + (!this.isEnabled(extension.id) ? 'disabled' : '')}>\r\n                    <div className=\"ExtensionListItem-content\">\r\n                      <span className=\"ExtensionListItem-icon ExtensionIcon\" style={extension.icon}>\r\n                        {extension.icon ? icon(extension.icon.name) : ''}\r\n                      </span>\r\n                      {controls.length ? (\r\n                        <Dropdown\r\n                          className=\"ExtensionListItem-controls\"\r\n                          buttonClassName=\"Button Button--icon Button--flat\"\r\n                          menuClassName=\"Dropdown-menu--right\"\r\n                          icon=\"fas fa-ellipsis-h\">\r\n                          {controls}\r\n                        </Dropdown>\r\n                      ) : ''}\r\n                      <div className=\"ExtensionListItem-main\">\r\n                        <label className=\"ExtensionListItem-title\">\r\n                          <input type=\"checkbox\" checked={this.isEnabled(extension.id)} onclick={this.toggle.bind(this, extension.id)}/> {' '}\r\n                            {extension.extra['flarum-extension'].title}\r\n                        </label>\r\n                        <div className=\"ExtensionListItem-version\">{extension.version}</div>\r\n                        <div className=\"ExtensionListItem-description\">{extension.description}</div>\r\n                      </div>\r\n                    </div>\r\n                  </li>;\r\n                })}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  controlItems(name) {\r\n    const items = new ItemList();\r\n    const enabled = this.isEnabled(name);\r\n\r\n    if (app.extensionSettings[name]) {\r\n      items.add('settings', Button.component({\r\n        icon: 'fas fa-cog',\r\n        children: app.translator.trans('core.admin.extensions.settings_button'),\r\n        onclick: app.extensionSettings[name]\r\n      }));\r\n    }\r\n\r\n    if (!enabled) {\r\n      items.add('uninstall', Button.component({\r\n        icon: 'far fa-trash-alt',\r\n        children: app.translator.trans('core.admin.extensions.uninstall_button'),\r\n        onclick: () => {\r\n          app.request({\r\n            url: app.forum.attribute('apiUrl') + '/extensions/' + name,\r\n            method: 'DELETE'\r\n          }).then(() => window.location.reload());\r\n\r\n          app.modal.show(new LoadingModal());\r\n        }\r\n      }));\r\n    }\r\n\r\n    return items;\r\n  }\r\n\r\n  isEnabled(name) {\r\n    const enabled = JSON.parse(app.data.settings.extensions_enabled);\r\n\r\n    return enabled.indexOf(name) !== -1;\r\n  }\r\n\r\n  toggle(id) {\r\n    const enabled = this.isEnabled(id);\r\n\r\n    app.request({\r\n      url: app.forum.attribute('apiUrl') + '/extensions/' + id,\r\n      method: 'PATCH',\r\n      data: {enabled: !enabled}\r\n    }).then(() => {\r\n      if (!enabled) localStorage.setItem('enabledExtension', id);\r\n      window.location.reload();\r\n    });\r\n\r\n    app.modal.show(new LoadingModal());\r\n  }\r\n}\r\n","import Page from './Page';\r\nimport FieldSet from '../../common/components/FieldSet';\r\nimport Button from '../../common/components/Button';\r\nimport Alert from '../../common/components/Alert';\r\nimport Select from '../../common/components/Select';\r\nimport LoadingIndicator from '../../common/components/LoadingIndicator';\r\nimport saveSettings from '../utils/saveSettings';\r\n\r\nexport default class MailPage extends Page {\r\n  init() {\r\n    super.init();\r\n\r\n    this.saving = false;\r\n    this.refresh();\r\n  }\r\n\r\n  refresh() {\r\n    this.loading = true;\r\n\r\n    this.driverFields = {};\r\n    this.fields = ['mail_driver', 'mail_from'];\r\n    this.values = {};\r\n    this.status = {sending: false, errors: {}};\r\n\r\n    const settings = app.data.settings;\r\n    this.fields.forEach(key => this.values[key] = m.prop(settings[key]));\r\n\r\n    app.request({\r\n      method: 'GET',\r\n      url: app.forum.attribute('apiUrl') + '/mail-settings'\r\n    }).then(response => {\r\n      this.driverFields = response['data']['attributes']['fields'];\r\n      this.status.sending = response['data']['attributes']['sending'];\r\n      this.status.errors = response['data']['attributes']['errors'];\r\n\r\n      for (const driver in this.driverFields) {\r\n        for (const field in this.driverFields[driver]) {\r\n          this.fields.push(field);\r\n          this.values[field] = m.prop(settings[field]);\r\n        }\r\n      }\r\n\r\n      this.loading = false;\r\n      m.redraw();\r\n    });\r\n  }\r\n\r\n  view() {\r\n    if (this.loading || this.saving) {\r\n      return (\r\n        <div className=\"MailPage\">\r\n          <div className=\"container\">\r\n            <LoadingIndicator />\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const fields = this.driverFields[this.values.mail_driver()];\r\n    const fieldKeys = Object.keys(fields);\r\n\r\n    return (\r\n      <div className=\"MailPage\">\r\n        <div className=\"container\">\r\n          <form onsubmit={this.onsubmit.bind(this)}>\r\n            <h2>{app.translator.trans('core.admin.email.heading')}</h2>\r\n            <div className=\"helpText\">\r\n              {app.translator.trans('core.admin.email.text')}\r\n            </div>\r\n\r\n            {FieldSet.component({\r\n              label: app.translator.trans('core.admin.email.addresses_heading'),\r\n              className: 'MailPage-MailSettings',\r\n              children: [\r\n                <div className=\"MailPage-MailSettings-input\">\r\n                  <label>\r\n                    {app.translator.trans('core.admin.email.from_label')}\r\n                    <input className=\"FormControl\" value={this.values.mail_from() || ''} oninput={m.withAttr('value', this.values.mail_from)} />\r\n                  </label>\r\n                </div>\r\n              ]\r\n            })}\r\n\r\n            {FieldSet.component({\r\n              label: app.translator.trans('core.admin.email.driver_heading'),\r\n              className: 'MailPage-MailSettings',\r\n              children: [\r\n                <div className=\"MailPage-MailSettings-input\">\r\n                  <label>\r\n                    {app.translator.trans('core.admin.email.driver_label')}\r\n                    <Select value={this.values.mail_driver()} options={Object.keys(this.driverFields).reduce((memo, val) => ({...memo, [val]: val}), {})} onchange={this.values.mail_driver} />\r\n                  </label>\r\n                </div>\r\n              ]\r\n            })}\r\n\r\n            {this.status.sending || Alert.component({\r\n              children: app.translator.trans('core.admin.email.not_sending_message'),\r\n              dismissible: false,\r\n            })}\r\n\r\n            {fieldKeys.length > 0 && FieldSet.component({\r\n              label: app.translator.trans(`core.admin.email.${this.values.mail_driver()}_heading`),\r\n              className: 'MailPage-MailSettings',\r\n              children: [\r\n                <div className=\"MailPage-MailSettings-input\">\r\n                  {fieldKeys.map(field => [\r\n                    <label>\r\n                      {app.translator.trans(`core.admin.email.${field}_label`)}\r\n                      {this.renderField(field)}\r\n                    </label>,\r\n                    this.status.errors[field] && <p className='ValidationError'>{this.status.errors[field]}</p>,\r\n                  ])}\r\n                </div>\r\n              ]\r\n            })}\r\n\r\n            {Button.component({\r\n              type: 'submit',\r\n              className: 'Button Button--primary',\r\n              children: app.translator.trans('core.admin.email.submit_button'),\r\n              disabled: !this.changed()\r\n            })}\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderField(name) {\r\n    const driver = this.values.mail_driver();\r\n    const field = this.driverFields[driver][name];\r\n    const prop = this.values[name];\r\n\r\n    if (typeof field === 'string') {\r\n      return <input className=\"FormControl\" value={prop() || ''} oninput={m.withAttr('value', prop)} />;\r\n    } else {\r\n      return <Select value={prop()} options={field} onchange={prop} />;\r\n    }\r\n  }\r\n\r\n  changed() {\r\n    return this.fields.some(key => this.values[key]() !== app.data.settings[key]);\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    if (this.saving) return;\r\n\r\n    this.saving = true;\r\n    app.alerts.dismiss(this.successAlert);\r\n\r\n    const settings = {};\r\n\r\n    this.fields.forEach(key => settings[key] = this.values[key]());\r\n\r\n    saveSettings(settings)\r\n      .then(() => {\r\n        app.alerts.show(this.successAlert = new Alert({type: 'success', children: app.translator.trans('core.admin.basics.saved_message')}));\r\n      })\r\n      .catch(() => {})\r\n      .then(() => {\r\n        this.saving = false;\r\n        this.refresh();\r\n      });\r\n  }\r\n}\r\n","import DashboardPage from './components/DashboardPage';\r\nimport BasicsPage from './components/BasicsPage';\r\nimport PermissionsPage from './components/PermissionsPage';\r\nimport AppearancePage from './components/AppearancePage';\r\nimport ExtensionsPage from './components/ExtensionsPage';\r\nimport MailPage from './components/MailPage';\r\n\r\n/**\r\n * The `routes` initializer defines the forum app's routes.\r\n *\r\n * @param {App} app\r\n */\r\nexport default function(app) {\r\n  app.routes = {\r\n    'dashboard': {path: '/', component: DashboardPage.component()},\r\n    'basics': {path: '/basics', component: BasicsPage.component()},\r\n    'permissions': {path: '/permissions', component: PermissionsPage.component()},\r\n    'appearance': {path: '/appearance', component: AppearancePage.component()},\r\n    'extensions': {path: '/extensions', component: ExtensionsPage.component()},\r\n    'mail': {path: '/mail', component: MailPage.component()}\r\n  };\r\n}\r\n","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nimport LinkButton from '../../common/components/LinkButton';\r\n\r\nexport default class AdminLinkButton extends LinkButton {\r\n  getButtonContent() {\r\n    const content = super.getButtonContent();\r\n\r\n    content.push(\r\n      <div className=\"AdminLinkButton-description\">\r\n        {this.props.description}\r\n      </div>\r\n    );\r\n\r\n    return content;\r\n  }\r\n}\r\n","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nimport Component from '../../common/Component';\r\nimport AdminLinkButton from './AdminLinkButton';\r\nimport SelectDropdown from '../../common/components/SelectDropdown';\r\nimport ItemList from '../../common/utils/ItemList';\r\n\r\nexport default class AdminNav extends Component {\r\n  view() {\r\n    return (\r\n      <SelectDropdown\r\n        className=\"AdminNav App-titleControl\"\r\n        buttonClassName=\"Button\">\r\n        {this.items().toArray()}\r\n      </SelectDropdown>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Build an item list of links to show in the admin navigation.\r\n   *\r\n   * @return {ItemList}\r\n   */\r\n  items() {\r\n    const items = new ItemList();\r\n\r\n    items.add('dashboard', AdminLinkButton.component({\r\n      href: app.route('dashboard'),\r\n      icon: 'far fa-chart-bar',\r\n      children: app.translator.trans('core.admin.nav.dashboard_button'),\r\n      description: app.translator.trans('core.admin.nav.dashboard_text')\r\n    }));\r\n\r\n    items.add('basics', AdminLinkButton.component({\r\n      href: app.route('basics'),\r\n      icon: 'fas fa-pencil-alt',\r\n      children: app.translator.trans('core.admin.nav.basics_button'),\r\n      description: app.translator.trans('core.admin.nav.basics_text')\r\n    }));\r\n\r\n    items.add('mail', AdminLinkButton.component({\r\n      href: app.route('mail'),\r\n      icon: 'fas fa-envelope',\r\n      children: app.translator.trans('core.admin.nav.email_button'),\r\n      description: app.translator.trans('core.admin.nav.email_text')\r\n    }));\r\n\r\n    items.add('permissions', AdminLinkButton.component({\r\n      href: app.route('permissions'),\r\n      icon: 'fas fa-key',\r\n      children: app.translator.trans('core.admin.nav.permissions_button'),\r\n      description: app.translator.trans('core.admin.nav.permissions_text')\r\n    }));\r\n\r\n    items.add('appearance', AdminLinkButton.component({\r\n      href: app.route('appearance'),\r\n      icon: 'fas fa-paint-brush',\r\n      children: app.translator.trans('core.admin.nav.appearance_button'),\r\n      description: app.translator.trans('core.admin.nav.appearance_text')\r\n    }));\r\n\r\n    items.add('extensions', AdminLinkButton.component({\r\n      href: app.route('extensions'),\r\n      icon: 'fas fa-puzzle-piece',\r\n      children: app.translator.trans('core.admin.nav.extensions_button'),\r\n      description: app.translator.trans('core.admin.nav.extensions_text')\r\n    }));\r\n\r\n    return items;\r\n  }\r\n}\r\n","import HeaderPrimary from './components/HeaderPrimary';\r\nimport HeaderSecondary from './components/HeaderSecondary';\r\nimport routes from './routes';\r\nimport Application from '../common/Application';\r\nimport Navigation from '../common/components/Navigation';\r\nimport AdminNav from './components/AdminNav';\r\n\r\nexport default class AdminApplication extends Application {\r\n  extensionSettings = {};\r\n\r\n  history = {\r\n    canGoBack: () => true,\r\n    getPrevious: () => {},\r\n    backUrl: () => this.forum.attribute('baseUrl'),\r\n    back: function() {\r\n      window.location = this.backUrl();\r\n    }\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    routes(this);\r\n  }\r\n\r\n  /**\r\n   * @inheritdoc\r\n   */\r\n  mount() {\r\n    m.mount(document.getElementById('app-navigation'), Navigation.component({className: 'App-backControl', drawer: true}));\r\n    m.mount(document.getElementById('header-navigation'), Navigation.component());\r\n    m.mount(document.getElementById('header-primary'), HeaderPrimary.component());\r\n    m.mount(document.getElementById('header-secondary'), HeaderSecondary.component());\r\n    m.mount(document.getElementById('admin-navigation'), AdminNav.component());\r\n\r\n    m.route.mode = 'hash';\r\n    super.mount();\r\n\r\n    // If an extension has just been enabled, then we will run its settings\r\n    // callback.\r\n    const enabled = localStorage.getItem('enabledExtension');\r\n    if (enabled && this.extensionSettings[enabled]) {\r\n      this.extensionSettings[enabled]();\r\n      localStorage.removeItem('enabledExtension');\r\n    }\r\n  }\r\n\r\n  getRequiredPermissions(permission) {\r\n    const required = [];\r\n\r\n    if (permission === 'startDiscussion' || permission.indexOf('discussion.') === 0) {\r\n      required.push('viewDiscussions');\r\n    }\r\n    if (permission === 'discussion.delete') {\r\n      required.push('discussion.hide');\r\n    }\r\n    if (permission === 'discussion.deletePosts') {\r\n      required.push('discussion.hidePosts');\r\n    }\r\n\r\n    return required;\r\n  };\r\n}\r\n","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nimport Component from '../../common/Component';\r\n\r\nexport default class DashboardWidget extends Component {\r\n  view() {\r\n    return (\r\n      <div className={\"DashboardWidget \"+this.className()}>\r\n        {this.content()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get the class name to apply to the widget.\r\n   *\r\n   * @return {String}\r\n   */\r\n  className() {\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * Get the content of the widget.\r\n   *\r\n   * @return {VirtualElement}\r\n   */\r\n  content() {\r\n    return [];\r\n  }\r\n}\r\n","import compat from '../common/compat';\r\n\r\nimport saveSettings from './utils/saveSettings';\r\nimport SettingDropdown from './components/SettingDropdown';\r\nimport EditCustomFooterModal from './components/EditCustomFooterModal';\r\nimport SessionDropdown from './components/SessionDropdown';\r\nimport HeaderPrimary from './components/HeaderPrimary';\r\nimport AppearancePage from './components/AppearancePage';\r\nimport Page from './components/Page';\r\nimport StatusWidget from './components/StatusWidget';\r\nimport HeaderSecondary from './components/HeaderSecondary';\r\nimport SettingsModal from './components/SettingsModal';\r\nimport DashboardWidget from './components/DashboardWidget';\r\nimport AddExtensionModal from './components/AddExtensionModal';\r\nimport ExtensionsPage from './components/ExtensionsPage';\r\nimport AdminLinkButton from './components/AdminLinkButton';\r\nimport PermissionGrid from './components/PermissionGrid';\r\nimport Widget from './components/Widget';\r\nimport MailPage from './components/MailPage';\r\nimport UploadImageButton from './components/UploadImageButton';\r\nimport LoadingModal from './components/LoadingModal';\r\nimport DashboardPage from './components/DashboardPage';\r\nimport BasicsPage from './components/BasicsPage';\r\nimport EditCustomHeaderModal from './components/EditCustomHeaderModal';\r\nimport PermissionsPage from './components/PermissionsPage';\r\nimport PermissionDropdown from './components/PermissionDropdown';\r\nimport AdminNav from './components/AdminNav';\r\nimport EditCustomCssModal from './components/EditCustomCssModal';\r\nimport EditGroupModal from './components/EditGroupModal';\r\nimport routes from './routes';\r\nimport AdminApplication from './AdminApplication';\r\n\r\nexport default Object.assign(compat, {\r\n  'utils/saveSettings': saveSettings,\r\n  'components/SettingDropdown': SettingDropdown,\r\n  'components/EditCustomFooterModal': EditCustomFooterModal,\r\n  'components/SessionDropdown': SessionDropdown,\r\n  'components/HeaderPrimary': HeaderPrimary,\r\n  'components/AppearancePage': AppearancePage,\r\n  'components/Page': Page,\r\n  'components/StatusWidget': StatusWidget,\r\n  'components/HeaderSecondary': HeaderSecondary,\r\n  'components/SettingsModal': SettingsModal,\r\n  'components/DashboardWidget': DashboardWidget,\r\n  'components/AddExtensionModal': AddExtensionModal,\r\n  'components/ExtensionsPage': ExtensionsPage,\r\n  'components/AdminLinkButton': AdminLinkButton,\r\n  'components/PermissionGrid': PermissionGrid,\r\n  'components/Widget': Widget,\r\n  'components/MailPage': MailPage,\r\n  'components/UploadImageButton': UploadImageButton,\r\n  'components/LoadingModal': LoadingModal,\r\n  'components/DashboardPage': DashboardPage,\r\n  'components/BasicsPage': BasicsPage,\r\n  'components/EditCustomHeaderModal': EditCustomHeaderModal,\r\n  'components/PermissionsPage': PermissionsPage,\r\n  'components/PermissionDropdown': PermissionDropdown,\r\n  'components/AdminNav': AdminNav,\r\n  'components/EditCustomCssModal': EditCustomCssModal,\r\n  'components/EditGroupModal': EditGroupModal,\r\n  'routes': routes,\r\n  'AdminApplication': AdminApplication\r\n});\r\n","import AdminApplication from './AdminApplication';\r\n\r\nconst app = new AdminApplication();\r\n\r\n// Backwards compatibility\r\nwindow.app = app;\r\n\r\nexport { app };\r\n\r\n// Export public API\r\n\r\n\r\n// Export compat API\r\nimport compat from './compat';\r\n\r\ncompat.app = app;\r\n\r\nexport { compat };\r\n","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nexport * from './src/common';\r\nexport * from './src/admin';"],"sourceRoot":""}