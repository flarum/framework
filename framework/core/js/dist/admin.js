/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/admin/AdminApplication.tsx":
/*!****************************************!*\
  !*** ./src/admin/AdminApplication.tsx ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AdminApplication)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _components_HeaderPrimary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/HeaderPrimary */ "./src/admin/components/HeaderPrimary.js");
/* harmony import */ var _components_HeaderSecondary__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/HeaderSecondary */ "./src/admin/components/HeaderSecondary.js");
/* harmony import */ var _routes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./routes */ "./src/admin/routes.ts");
/* harmony import */ var _common_Application__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/Application */ "./src/common/Application.tsx");
/* harmony import */ var _common_components_Navigation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/components/Navigation */ "./src/common/components/Navigation.tsx");
/* harmony import */ var _components_AdminNav__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/AdminNav */ "./src/admin/components/AdminNav.js");
/* harmony import */ var _utils_ExtensionData__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/ExtensionData */ "./src/admin/utils/ExtensionData.ts");









var AdminApplication = /*#__PURE__*/function (_Application) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(AdminApplication, _Application);
  /**
   * Settings are serialized to the admin dashboard as strings.
   * Additional encoding/decoding is possible, but must take
   * place on the client side.
   *
   * @inheritdoc
   */

  function AdminApplication() {
    var _this;
    _this = _Application.call(this) || this;
    _this.extensionData = new _utils_ExtensionData__WEBPACK_IMPORTED_MODULE_8__["default"]();
    _this.extensionCategories = {
      feature: 30,
      theme: 20,
      language: 10
    };
    _this.history = {
      canGoBack: function canGoBack() {
        return true;
      },
      getCurrent: function getCurrent() {
        return null;
      },
      getPrevious: function getPrevious() {
        return null;
      },
      push: function push() {},
      backUrl: function backUrl() {
        return _this.forum.attribute('baseUrl');
      },
      back: function back() {
        window.location.assign(this.backUrl());
      },
      home: function home() {}
    };
    _this.data = void 0;
    _this.route = void 0;
    (0,_routes__WEBPACK_IMPORTED_MODULE_4__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__["default"])(_this));
    _this.route = Object.getPrototypeOf(Object.getPrototypeOf((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__["default"])(_this))).route.bind((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__["default"])(_this));
    return _this;
  }

  /**
   * @inheritdoc
   */
  var _proto = AdminApplication.prototype;
  _proto.mount = function mount() {
    // Mithril does not render the home route on https://example.com/admin, so
    // we need to go to https://example.com/admin#/ explicitly.
    if (!document.location.hash) document.location.hash = '#/';
    m.route.prefix = '#';
    _Application.prototype.mount.call(this);
    m.mount(document.getElementById('app-navigation'), {
      view: function view() {
        return m(_common_components_Navigation__WEBPACK_IMPORTED_MODULE_6__["default"], {
          className: "App-backControl",
          drawer: true
        });
      }
    });
    m.mount(document.getElementById('header-navigation'), _common_components_Navigation__WEBPACK_IMPORTED_MODULE_6__["default"]);
    m.mount(document.getElementById('header-primary'), _components_HeaderPrimary__WEBPACK_IMPORTED_MODULE_2__["default"]);
    m.mount(document.getElementById('header-secondary'), _components_HeaderSecondary__WEBPACK_IMPORTED_MODULE_3__["default"]);
    m.mount(document.getElementById('admin-navigation'), _components_AdminNav__WEBPACK_IMPORTED_MODULE_7__["default"]);
  };
  _proto.getRequiredPermissions = function getRequiredPermissions(permission) {
    var required = [];
    if (permission === 'startDiscussion' || permission.indexOf('discussion.') === 0) {
      required.push('viewForum');
    }
    if (permission === 'discussion.delete') {
      required.push('discussion.hide');
    }
    if (permission === 'discussion.deletePosts') {
      required.push('discussion.hidePosts');
    }
    if (permission === 'user.editGroups') {
      required.push('viewHiddenGroups');
    }
    return required;
  };
  return AdminApplication;
}(_common_Application__WEBPACK_IMPORTED_MODULE_5__["default"]);


/***/ }),

/***/ "./src/admin/app.ts":
/*!**************************!*\
  !*** ./src/admin/app.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _AdminApplication__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AdminApplication */ "./src/admin/AdminApplication.tsx");

var app = new _AdminApplication__WEBPACK_IMPORTED_MODULE_0__["default"]();

// @ts-expect-error We need to do this for backwards compatibility purposes.
window.app = app;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (app);

/***/ }),

/***/ "./src/admin/compat.ts":
/*!*****************************!*\
  !*** ./src/admin/compat.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _common_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/compat */ "./src/common/compat.ts");
/* harmony import */ var _utils_saveSettings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/saveSettings */ "./src/admin/utils/saveSettings.js");
/* harmony import */ var _utils_ExtensionData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/ExtensionData */ "./src/admin/utils/ExtensionData.ts");
/* harmony import */ var _utils_isExtensionEnabled__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/isExtensionEnabled */ "./src/admin/utils/isExtensionEnabled.js");
/* harmony import */ var _utils_getCategorizedExtensions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/getCategorizedExtensions */ "./src/admin/utils/getCategorizedExtensions.js");
/* harmony import */ var _components_SettingDropdown__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/SettingDropdown */ "./src/admin/components/SettingDropdown.tsx");
/* harmony import */ var _components_EditCustomFooterModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/EditCustomFooterModal */ "./src/admin/components/EditCustomFooterModal.tsx");
/* harmony import */ var _components_SessionDropdown__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/SessionDropdown */ "./src/admin/components/SessionDropdown.tsx");
/* harmony import */ var _components_HeaderPrimary__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/HeaderPrimary */ "./src/admin/components/HeaderPrimary.js");
/* harmony import */ var _components_AdminPage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/AdminPage */ "./src/admin/components/AdminPage.tsx");
/* harmony import */ var _components_AppearancePage__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./components/AppearancePage */ "./src/admin/components/AppearancePage.tsx");
/* harmony import */ var _components_StatusWidget__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/StatusWidget */ "./src/admin/components/StatusWidget.js");
/* harmony import */ var _components_ExtensionsWidget__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/ExtensionsWidget */ "./src/admin/components/ExtensionsWidget.js");
/* harmony import */ var _components_HeaderSecondary__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/HeaderSecondary */ "./src/admin/components/HeaderSecondary.js");
/* harmony import */ var _components_SettingsModal__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./components/SettingsModal */ "./src/admin/components/SettingsModal.tsx");
/* harmony import */ var _components_DashboardWidget__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./components/DashboardWidget */ "./src/admin/components/DashboardWidget.tsx");
/* harmony import */ var _components_ExtensionPage__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./components/ExtensionPage */ "./src/admin/components/ExtensionPage.tsx");
/* harmony import */ var _components_ExtensionLinkButton__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./components/ExtensionLinkButton */ "./src/admin/components/ExtensionLinkButton.js");
/* harmony import */ var _components_PermissionGrid__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./components/PermissionGrid */ "./src/admin/components/PermissionGrid.tsx");
/* harmony import */ var _components_ExtensionPermissionGrid__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./components/ExtensionPermissionGrid */ "./src/admin/components/ExtensionPermissionGrid.tsx");
/* harmony import */ var _components_MailPage__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./components/MailPage */ "./src/admin/components/MailPage.tsx");
/* harmony import */ var _components_UploadImageButton__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./components/UploadImageButton */ "./src/admin/components/UploadImageButton.js");
/* harmony import */ var _components_LoadingModal__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./components/LoadingModal */ "./src/admin/components/LoadingModal.tsx");
/* harmony import */ var _components_DashboardPage__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./components/DashboardPage */ "./src/admin/components/DashboardPage.tsx");
/* harmony import */ var _components_BasicsPage__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./components/BasicsPage */ "./src/admin/components/BasicsPage.tsx");
/* harmony import */ var _components_UserListPage__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./components/UserListPage */ "./src/admin/components/UserListPage.tsx");
/* harmony import */ var _components_EditCustomHeaderModal__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./components/EditCustomHeaderModal */ "./src/admin/components/EditCustomHeaderModal.tsx");
/* harmony import */ var _components_PermissionsPage__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./components/PermissionsPage */ "./src/admin/components/PermissionsPage.tsx");
/* harmony import */ var _components_PermissionDropdown__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./components/PermissionDropdown */ "./src/admin/components/PermissionDropdown.tsx");
/* harmony import */ var _components_AdminNav__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./components/AdminNav */ "./src/admin/components/AdminNav.js");
/* harmony import */ var _components_AdminHeader__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./components/AdminHeader */ "./src/admin/components/AdminHeader.js");
/* harmony import */ var _components_EditCustomCssModal__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./components/EditCustomCssModal */ "./src/admin/components/EditCustomCssModal.tsx");
/* harmony import */ var _components_EditGroupModal__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./components/EditGroupModal */ "./src/admin/components/EditGroupModal.tsx");
/* harmony import */ var _routes__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./routes */ "./src/admin/routes.ts");
/* harmony import */ var _AdminApplication__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./AdminApplication */ "./src/admin/AdminApplication.tsx");
/* harmony import */ var _utils_generateElementId__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./utils/generateElementId */ "./src/admin/utils/generateElementId.ts");
/* harmony import */ var _components_CreateUserModal__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./components/CreateUserModal */ "./src/admin/components/CreateUserModal.tsx");





































/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Object.assign(_common_compat__WEBPACK_IMPORTED_MODULE_0__["default"], {
  'utils/saveSettings': _utils_saveSettings__WEBPACK_IMPORTED_MODULE_1__["default"],
  'utils/ExtensionData': _utils_ExtensionData__WEBPACK_IMPORTED_MODULE_2__["default"],
  'utils/isExtensionEnabled': _utils_isExtensionEnabled__WEBPACK_IMPORTED_MODULE_3__["default"],
  'utils/getCategorizedExtensions': _utils_getCategorizedExtensions__WEBPACK_IMPORTED_MODULE_4__["default"],
  'utils/generateElementId': _utils_generateElementId__WEBPACK_IMPORTED_MODULE_35__["default"],
  'components/SettingDropdown': _components_SettingDropdown__WEBPACK_IMPORTED_MODULE_5__["default"],
  'components/EditCustomFooterModal': _components_EditCustomFooterModal__WEBPACK_IMPORTED_MODULE_6__["default"],
  'components/SessionDropdown': _components_SessionDropdown__WEBPACK_IMPORTED_MODULE_7__["default"],
  'components/HeaderPrimary': _components_HeaderPrimary__WEBPACK_IMPORTED_MODULE_8__["default"],
  'components/AdminPage': _components_AdminPage__WEBPACK_IMPORTED_MODULE_9__["default"],
  'components/AppearancePage': _components_AppearancePage__WEBPACK_IMPORTED_MODULE_10__["default"],
  'components/StatusWidget': _components_StatusWidget__WEBPACK_IMPORTED_MODULE_11__["default"],
  'components/ExtensionsWidget': _components_ExtensionsWidget__WEBPACK_IMPORTED_MODULE_12__["default"],
  'components/HeaderSecondary': _components_HeaderSecondary__WEBPACK_IMPORTED_MODULE_13__["default"],
  'components/SettingsModal': _components_SettingsModal__WEBPACK_IMPORTED_MODULE_14__["default"],
  'components/DashboardWidget': _components_DashboardWidget__WEBPACK_IMPORTED_MODULE_15__["default"],
  'components/ExtensionPage': _components_ExtensionPage__WEBPACK_IMPORTED_MODULE_16__["default"],
  'components/ExtensionLinkButton': _components_ExtensionLinkButton__WEBPACK_IMPORTED_MODULE_17__["default"],
  'components/PermissionGrid': _components_PermissionGrid__WEBPACK_IMPORTED_MODULE_18__["default"],
  'components/ExtensionPermissionGrid': _components_ExtensionPermissionGrid__WEBPACK_IMPORTED_MODULE_19__["default"],
  'components/MailPage': _components_MailPage__WEBPACK_IMPORTED_MODULE_20__["default"],
  'components/UploadImageButton': _components_UploadImageButton__WEBPACK_IMPORTED_MODULE_21__["default"],
  'components/LoadingModal': _components_LoadingModal__WEBPACK_IMPORTED_MODULE_22__["default"],
  'components/DashboardPage': _components_DashboardPage__WEBPACK_IMPORTED_MODULE_23__["default"],
  'components/BasicsPage': _components_BasicsPage__WEBPACK_IMPORTED_MODULE_24__["default"],
  'components/UserListPage': _components_UserListPage__WEBPACK_IMPORTED_MODULE_25__["default"],
  'components/EditCustomHeaderModal': _components_EditCustomHeaderModal__WEBPACK_IMPORTED_MODULE_26__["default"],
  'components/PermissionsPage': _components_PermissionsPage__WEBPACK_IMPORTED_MODULE_27__["default"],
  'components/PermissionDropdown': _components_PermissionDropdown__WEBPACK_IMPORTED_MODULE_28__["default"],
  'components/AdminNav': _components_AdminNav__WEBPACK_IMPORTED_MODULE_29__["default"],
  'components/AdminHeader': _components_AdminHeader__WEBPACK_IMPORTED_MODULE_30__["default"],
  'components/EditCustomCssModal': _components_EditCustomCssModal__WEBPACK_IMPORTED_MODULE_31__["default"],
  'components/EditGroupModal': _components_EditGroupModal__WEBPACK_IMPORTED_MODULE_32__["default"],
  'components/CreateUserModal': _components_CreateUserModal__WEBPACK_IMPORTED_MODULE_36__["default"],
  routes: _routes__WEBPACK_IMPORTED_MODULE_33__["default"],
  AdminApplication: _AdminApplication__WEBPACK_IMPORTED_MODULE_34__["default"]
}));

/***/ }),

/***/ "./src/admin/components/AdminPage.tsx":
/*!********************************************!*\
  !*** ./src/admin/components/AdminPage.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AdminPage)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_Page__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/components/Page */ "./src/common/components/Page.tsx");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_components_Switch__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/components/Switch */ "./src/common/components/Switch.tsx");
/* harmony import */ var _common_components_Select__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/components/Select */ "./src/common/components/Select.js");
/* harmony import */ var _common_utils_classList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/utils/classList */ "./src/common/utils/classList.ts");
/* harmony import */ var _common_utils_Stream__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../common/utils/Stream */ "./src/common/utils/Stream.ts");
/* harmony import */ var _utils_saveSettings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/saveSettings */ "./src/admin/utils/saveSettings.js");
/* harmony import */ var _AdminHeader__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./AdminHeader */ "./src/admin/components/AdminHeader.js");
/* harmony import */ var _utils_generateElementId__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utils/generateElementId */ "./src/admin/utils/generateElementId.ts");
/* harmony import */ var _common_components_ColorPreviewInput__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../common/components/ColorPreviewInput */ "./src/common/components/ColorPreviewInput.tsx");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");



var _excluded = ["title", "className"],
  _excluded2 = ["setting", "help", "type", "label"],
  _excluded3 = ["default", "options"];












var BooleanSettingTypes = ['bool', 'checkbox', 'switch', 'boolean'];
var SelectSettingTypes = ['select', 'dropdown', 'selectdropdown'];
var TextareaSettingTypes = ['textarea'];
var ColorPreviewSettingType = 'color-preview';

/**
 * Valid options for the setting component builder to generate a Switch.
 */
var AdminPage = /*#__PURE__*/function (_Page) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(AdminPage, _Page);
  function AdminPage() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Page.call.apply(_Page, [this].concat(args)) || this;
    _this.settings = {};
    _this.loading = false;
    return _this;
  }
  var _proto = AdminPage.prototype;
  _proto.view = function view(vnode) {
    var className = (0,_common_utils_classList__WEBPACK_IMPORTED_MODULE_8__["default"])('AdminPage', this.headerInfo().className);
    return m("div", {
      className: className
    }, this.header(vnode), m("div", {
      className: "container"
    }, this.content(vnode)));
  }

  /**
   * Returns the content of the AdminPage.
   */;
  /**
   * Returns the submit button for this AdminPage.
   *
   * Calls `this.saveSettings` when the button is clicked.
   */
  _proto.submitButton = function submitButton() {
    return m(_common_components_Button__WEBPACK_IMPORTED_MODULE_5__["default"], {
      onclick: this.saveSettings.bind(this),
      className: "Button Button--primary",
      loading: this.loading,
      disabled: !this.isChanged()
    }, _app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.settings.submit_button'));
  }

  /**
   * Returns the Header component for this AdminPage.
   */;
  _proto.header = function header(vnode) {
    var _this$headerInfo = this.headerInfo(),
      title = _this$headerInfo.title,
      className = _this$headerInfo.className,
      headerAttrs = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(_this$headerInfo, _excluded);
    return m(_AdminHeader__WEBPACK_IMPORTED_MODULE_11__["default"], Object.assign({
      className: className ? className + "-header" : undefined
    }, headerAttrs), title);
  }

  /**
   * Returns the options passed to the AdminHeader component.
   */;
  _proto.headerInfo = function headerInfo() {
    return {
      className: '',
      icon: '',
      title: '',
      description: ''
    };
  }

  /**
   * A list of extension-defined custom setting components to be available through
   * {@link AdminPage.buildSettingComponent}.
   *
   * The ItemList key represents the value for `type` to be provided when calling
   * {@link AdminPage.buildSettingComponent}. Other attributes passed are provided
   * as arguments to the function added to the ItemList.
   *
   * ItemList priority has no effect here.
   *
   * @example
   * ```tsx
   * extend(AdminPage.prototype, 'customSettingComponents', function (items) {
   *   // You can access the AdminPage instance with `this` to access its `settings` property.
   *
   *   // Prefixing the key with your extension ID is recommended to avoid collisions.
   *   items.add('my-ext.setting-component', (attrs) => {
   *     return (
   *       <div className={attrs.className}>
   *         <label>{attrs.label}</label>
   *         {attrs.help && <p className="helpText">{attrs.help}</p>}
   *
   *         My setting component!
   *       </div>
   *     );
   *   })
   * })
   * ```
   */;
  _proto.customSettingComponents = function customSettingComponents() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_14__["default"]();
    return items;
  }

  /**
   * `buildSettingComponent` takes a settings object and turns it into a component.
   * Depending on the type of input, you can set the type to 'bool', 'select', or
   * any standard <input> type. Any values inside the 'extra' object will be added
   * to the component as an attribute.
   *
   * Alternatively, you can pass a callback that will be executed in ExtensionPage's
   * context to include custom JSX elements.
   *
   * @example
   *
   * {
   *    setting: 'acme.checkbox',
   *    label: app.translator.trans('acme.admin.setting_label'),
   *    type: 'bool',
   *    help: app.translator.trans('acme.admin.setting_help'),
   *    className: 'Setting-item'
   * }
   *
   * @example
   *
   * {
   *    setting: 'acme.select',
   *    label: app.translator.trans('acme.admin.setting_label'),
   *    type: 'select',
   *    options: {
   *      'option1': 'Option 1 label',
   *      'option2': 'Option 2 label',
   *    },
   *    default: 'option1',
   * }
   *
   * @example
   *
   * () => {
   *   return <p>My cool component</p>;
   * }
   */;
  _proto.buildSettingComponent = function buildSettingComponent(entry) {
    if (typeof entry === 'function') {
      return entry.call(this);
    }
    var customSettingComponents = this.customSettingComponents();
    var setting = entry.setting,
      help = entry.help,
      type = entry.type,
      label = entry.label,
      componentAttrs = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(entry, _excluded2);
    var value = this.setting(setting)();
    var _ref = [(0,_utils_generateElementId__WEBPACK_IMPORTED_MODULE_12__["default"])(), (0,_utils_generateElementId__WEBPACK_IMPORTED_MODULE_12__["default"])()],
      inputId = _ref[0],
      helpTextId = _ref[1];
    var settingElement;

    // Typescript being Typescript
    // https://github.com/microsoft/TypeScript/issues/14520
    if (BooleanSettingTypes.includes(type)) {
      return (
        // TODO: Add aria-describedby for switch help text.
        //? Requires changes to Checkbox component to allow providing attrs directly for the element(s).
        m("div", {
          className: "Form-group"
        }, m(_common_components_Switch__WEBPACK_IMPORTED_MODULE_6__["default"], Object.assign({
          state: !!value && value !== '0',
          onchange: this.settings[setting]
        }, componentAttrs), label), m("div", {
          className: "helpText"
        }, help))
      );
    } else if (SelectSettingTypes.includes(type)) {
      var defaultValue = componentAttrs["default"],
        options = componentAttrs.options,
        otherAttrs = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(componentAttrs, _excluded3);
      settingElement = m(_common_components_Select__WEBPACK_IMPORTED_MODULE_7__["default"], Object.assign({
        id: inputId,
        "aria-describedby": helpTextId,
        value: value || defaultValue,
        options: options,
        onchange: this.settings[setting]
      }, otherAttrs));
    } else if (customSettingComponents.has(type)) {
      return customSettingComponents.get(type)((0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
        setting: setting,
        help: help,
        label: label
      }, componentAttrs));
    } else {
      componentAttrs.className = (0,_common_utils_classList__WEBPACK_IMPORTED_MODULE_8__["default"])('FormControl', componentAttrs.className);
      if (TextareaSettingTypes.includes(type)) {
        settingElement = m("textarea", Object.assign({
          id: inputId,
          "aria-describedby": helpTextId,
          bidi: this.setting(setting)
        }, componentAttrs));
      } else {
        var Tag = 'input';
        if (type === ColorPreviewSettingType) {
          Tag = _common_components_ColorPreviewInput__WEBPACK_IMPORTED_MODULE_13__["default"];
        } else {
          componentAttrs.type = type;
        }
        settingElement = m(Tag, Object.assign({
          id: inputId,
          "aria-describedby": helpTextId,
          bidi: this.setting(setting)
        }, componentAttrs));
      }
    }
    return m("div", {
      className: "Form-group"
    }, label && m("label", {
      "for": inputId
    }, label), m("div", {
      id: helpTextId,
      className: "helpText"
    }, help), settingElement);
  }

  /**
   * Called when `saveSettings` completes successfully.
   */;
  _proto.onsaved = function onsaved() {
    this.loading = false;
    _app__WEBPACK_IMPORTED_MODULE_3__["default"].alerts.show({
      type: 'success'
    }, _app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.settings.saved_message'));
  }

  /**
   * Returns a function that fetches the setting from the `app` global.
   */;
  _proto.setting = function setting(key, fallback) {
    if (fallback === void 0) {
      fallback = '';
    }
    this.settings[key] = this.settings[key] || (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_9__["default"])(_app__WEBPACK_IMPORTED_MODULE_3__["default"].data.settings[key] || fallback);
    return this.settings[key];
  }

  /**
   * Returns a map of settings keys to values which includes only those which have been modified but not yet saved.
   */;
  _proto.dirty = function dirty() {
    var _this2 = this;
    var dirty = {};
    Object.keys(this.settings).forEach(function (key) {
      var value = _this2.settings[key]();
      if (value !== _app__WEBPACK_IMPORTED_MODULE_3__["default"].data.settings[key]) {
        dirty[key] = value;
      }
    });
    return dirty;
  }

  /**
   * Returns the number of settings that have been modified.
   */;
  _proto.isChanged = function isChanged() {
    return Object.keys(this.dirty()).length;
  }

  /**
   * Saves the modified settings to the database.
   */;
  _proto.saveSettings = function saveSettings(e) {
    e.preventDefault();
    _app__WEBPACK_IMPORTED_MODULE_3__["default"].alerts.clear();
    this.loading = true;
    return (0,_utils_saveSettings__WEBPACK_IMPORTED_MODULE_10__["default"])(this.dirty()).then(this.onsaved.bind(this));
  };
  return AdminPage;
}(_common_components_Page__WEBPACK_IMPORTED_MODULE_4__["default"]);


/***/ }),

/***/ "./src/admin/components/AppearancePage.tsx":
/*!*************************************************!*\
  !*** ./src/admin/components/AppearancePage.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AppearancePage)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _EditCustomCssModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EditCustomCssModal */ "./src/admin/components/EditCustomCssModal.tsx");
/* harmony import */ var _EditCustomHeaderModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EditCustomHeaderModal */ "./src/admin/components/EditCustomHeaderModal.tsx");
/* harmony import */ var _EditCustomFooterModal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./EditCustomFooterModal */ "./src/admin/components/EditCustomFooterModal.tsx");
/* harmony import */ var _UploadImageButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./UploadImageButton */ "./src/admin/components/UploadImageButton.js");
/* harmony import */ var _AdminPage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./AdminPage */ "./src/admin/components/AdminPage.tsx");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");









var AppearancePage = /*#__PURE__*/function (_AdminPage) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(AppearancePage, _AdminPage);
  function AppearancePage() {
    return _AdminPage.apply(this, arguments) || this;
  }
  var _proto = AppearancePage.prototype;
  _proto.headerInfo = function headerInfo() {
    return {
      className: 'AppearancePage',
      icon: 'fas fa-paint-brush',
      title: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.title'),
      description: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.description')
    };
  };
  _proto.content = function content() {
    return m('[', null, m("div", {
      className: "Form"
    }, m("fieldset", {
      className: "AppearancePage-colors"
    }, m("legend", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.colors_heading')), this.colorItems().toArray())), m("fieldset", null, m("legend", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.logo_heading')), m("div", {
      className: "helpText"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.logo_text')), m(_UploadImageButton__WEBPACK_IMPORTED_MODULE_6__["default"], {
      name: "logo"
    })), m("fieldset", null, m("legend", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.favicon_heading')), m("div", {
      className: "helpText"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.favicon_text')), m(_UploadImageButton__WEBPACK_IMPORTED_MODULE_6__["default"], {
      name: "favicon"
    })), m("fieldset", null, m("legend", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.custom_header_heading')), m("div", {
      className: "helpText"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.custom_header_text')), m(_common_components_Button__WEBPACK_IMPORTED_MODULE_2__["default"], {
      className: "Button",
      onclick: function onclick() {
        return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.show(_EditCustomHeaderModal__WEBPACK_IMPORTED_MODULE_4__["default"]);
      }
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.edit_header_button'))), m("fieldset", null, m("legend", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.custom_footer_heading')), m("div", {
      className: "helpText"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.custom_footer_text')), m(_common_components_Button__WEBPACK_IMPORTED_MODULE_2__["default"], {
      className: "Button",
      onclick: function onclick() {
        return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.show(_EditCustomFooterModal__WEBPACK_IMPORTED_MODULE_5__["default"]);
      }
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.edit_footer_button'))), m("fieldset", null, m("legend", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.custom_styles_heading')), m("div", {
      className: "helpText"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.custom_styles_text')), m(_common_components_Button__WEBPACK_IMPORTED_MODULE_2__["default"], {
      className: "Button",
      onclick: function onclick() {
        return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.show(_EditCustomCssModal__WEBPACK_IMPORTED_MODULE_3__["default"]);
      }
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.edit_css_button'))));
  };
  _proto.colorItems = function colorItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_8__["default"]();
    items.add('helpText', m("div", {
      className: "helpText"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.colors_text')), 80);
    items.add('theme-colors', m("div", {
      className: "AppearancePage-colors-input"
    }, this.buildSettingComponent({
      type: 'color-preview',
      setting: 'theme_primary_color',
      placeholder: '#aaaaaa',
      ariaLabel: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.colors_primary_label')
    }), this.buildSettingComponent({
      type: 'color-preview',
      setting: 'theme_secondary_color',
      placeholder: '#aaaaaa',
      ariaLabel: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.colors_secondary_label')
    })), 70);
    items.add('dark-mode', this.buildSettingComponent({
      type: 'switch',
      setting: 'theme_dark_mode',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.dark_mode_label')
    }), 60);
    items.add('colored-header', this.buildSettingComponent({
      type: 'switch',
      setting: 'theme_colored_header',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.appearance.colored_header_label')
    }), 50);
    items.add('submit', this.submitButton(), 0);
    return items;
  };
  _proto.onsaved = function onsaved() {
    window.location.reload();
  };
  return AppearancePage;
}(_AdminPage__WEBPACK_IMPORTED_MODULE_7__["default"]);


/***/ }),

/***/ "./src/admin/components/BasicsPage.tsx":
/*!*********************************************!*\
  !*** ./src/admin/components/BasicsPage.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BasicsPage)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_FieldSet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/components/FieldSet */ "./src/common/components/FieldSet.js");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _AdminPage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AdminPage */ "./src/admin/components/AdminPage.tsx");





var BasicsPage = /*#__PURE__*/function (_AdminPage) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(BasicsPage, _AdminPage);
  function BasicsPage() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _AdminPage.call.apply(_AdminPage, [this].concat(args)) || this;
    _this.localeOptions = {};
    _this.displayNameOptions = {};
    _this.slugDriverOptions = {};
    return _this;
  }
  var _proto = BasicsPage.prototype;
  _proto.oninit = function oninit(vnode) {
    var _this2 = this;
    _AdminPage.prototype.oninit.call(this, vnode);
    Object.keys(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.locales).forEach(function (i) {
      _this2.localeOptions[i] = _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.locales[i] + " (" + i + ")";
    });
    _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.displayNameDrivers.forEach(function (identifier) {
      _this2.displayNameOptions[identifier] = identifier;
    });
    Object.keys(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.slugDrivers).forEach(function (model) {
      _this2.slugDriverOptions[model] = {};
      _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.slugDrivers[model].forEach(function (option) {
        _this2.slugDriverOptions[model][option] = option;
      });
    });
  };
  _proto.headerInfo = function headerInfo() {
    return {
      className: 'BasicsPage',
      icon: 'fas fa-pencil-alt',
      title: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.title'),
      description: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.description')
    };
  };
  _proto.content = function content() {
    var _this3 = this;
    return [m("div", {
      className: "Form"
    }, this.buildSettingComponent({
      type: 'text',
      setting: 'forum_title',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.forum_title_heading')
    }), this.buildSettingComponent({
      type: 'text',
      setting: 'forum_description',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.forum_description_heading'),
      help: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.forum_description_text')
    }), Object.keys(this.localeOptions).length > 1 && m('[', null, this.buildSettingComponent({
      type: 'select',
      setting: 'default_locale',
      options: this.localeOptions,
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.default_language_heading')
    }), this.buildSettingComponent({
      type: 'switch',
      setting: 'show_language_selector',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.show_language_selector_label')
    })), m(_common_components_FieldSet__WEBPACK_IMPORTED_MODULE_2__["default"], {
      className: "BasicsPage-homePage Form-group",
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.home_page_heading')
    }, m("div", {
      className: "helpText"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.home_page_text')), this.homePageItems().toArray().map(function (_ref) {
      var path = _ref.path,
        label = _ref.label;
      return m("label", {
        className: "checkbox"
      }, m("input", {
        type: "radio",
        name: "homePage",
        value: path,
        bidi: _this3.setting('default_route')
      }), label);
    })), m("div", {
      className: "Form-group BasicsPage-welcomeBanner-input"
    }, m("label", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.welcome_banner_heading')), m("div", {
      className: "helpText"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.welcome_banner_text')), m("input", {
      type: "text",
      className: "FormControl",
      bidi: this.setting('welcome_title')
    }), m("textarea", {
      className: "FormControl",
      bidi: this.setting('welcome_message')
    })), Object.keys(this.displayNameOptions).length > 1 && this.buildSettingComponent({
      type: 'select',
      setting: 'display_name_driver',
      options: this.displayNameOptions,
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.display_name_heading'),
      help: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.display_name_text')
    }), Object.keys(this.slugDriverOptions).map(function (model) {
      var options = _this3.slugDriverOptions[model];
      if (Object.keys(options).length > 1) {
        return _this3.buildSettingComponent({
          type: 'select',
          setting: "slug_driver_" + model,
          options: options,
          label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.slug_driver_heading', {
            model: model
          }),
          help: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.slug_driver_text', {
            model: model
          })
        });
      }
      return null;
    }), this.submitButton())];
  }

  /**
   * Build a list of options for the default homepage. Each option must be an
   * object with `path` and `label` properties.
   */;
  _proto.homePageItems = function homePageItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_3__["default"]();
    items.add('allDiscussions', {
      path: '/all',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.basics.all_discussions_label')
    });
    return items;
  };
  return BasicsPage;
}(_AdminPage__WEBPACK_IMPORTED_MODULE_4__["default"]);


/***/ }),

/***/ "./src/admin/components/CreateUserModal.tsx":
/*!**************************************************!*\
  !*** ./src/admin/components/CreateUserModal.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ CreateUserModal)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_Modal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/components/Modal */ "./src/common/components/Modal.tsx");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_utils_extractText__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils/extractText */ "./src/common/utils/extractText.ts");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _common_utils_Stream__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/utils/Stream */ "./src/common/utils/Stream.ts");
/* harmony import */ var _common_components_Switch__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/components/Switch */ "./src/common/components/Switch.tsx");
/* harmony import */ var _common_utils_string__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/utils/string */ "./src/common/utils/string.ts");









var CreateUserModal = /*#__PURE__*/function (_Modal) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(CreateUserModal, _Modal);
  function CreateUserModal() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Modal.call.apply(_Modal, [this].concat(args)) || this;
    _this.username = void 0;
    _this.email = void 0;
    _this.password = void 0;
    _this.requireEmailConfirmation = void 0;
    _this.bulkAdd = void 0;
    return _this;
  }
  var _proto = CreateUserModal.prototype;
  _proto.oninit = function oninit(vnode) {
    _Modal.prototype.oninit.call(this, vnode);
    this.username = (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_6__["default"])('');
    this.email = (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_6__["default"])('');
    this.password = (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_6__["default"])('');
    this.requireEmailConfirmation = (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_6__["default"])(false);
    this.bulkAdd = (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_6__["default"])(false);
  };
  _proto.className = function className() {
    return 'Modal--small CreateUserModal';
  };
  _proto.title = function title() {
    return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.create_user.title');
  };
  _proto.content = function content() {
    return m('[', null, m("div", {
      className: "Modal-body"
    }, this.body()));
  };
  _proto.body = function body() {
    return m('[', null, m("div", {
      className: "Form Form--centered"
    }, this.fields().toArray()));
  };
  _proto.fields = function fields() {
    var _this2 = this;
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_5__["default"]();
    var usernameLabel = (0,_common_utils_extractText__WEBPACK_IMPORTED_MODULE_4__["default"])(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.create_user.username_placeholder'));
    var emailLabel = (0,_common_utils_extractText__WEBPACK_IMPORTED_MODULE_4__["default"])(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.create_user.email_placeholder'));
    var emailConfirmationLabel = (0,_common_utils_extractText__WEBPACK_IMPORTED_MODULE_4__["default"])(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.create_user.email_confirmed_label'));
    var useRandomPasswordLabel = (0,_common_utils_extractText__WEBPACK_IMPORTED_MODULE_4__["default"])(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.create_user.use_random_password'));
    var passwordLabel = (0,_common_utils_extractText__WEBPACK_IMPORTED_MODULE_4__["default"])(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.create_user.password_placeholder'));
    items.add('username', m("div", {
      className: "Form-group"
    }, m("input", {
      className: "FormControl",
      name: "username",
      type: "text",
      placeholder: usernameLabel,
      "aria-label": usernameLabel,
      bidi: this.username,
      disabled: this.loading
    })), 100);
    items.add('email', m("div", {
      className: "Form-group"
    }, m("input", {
      className: "FormControl",
      name: "email",
      type: "email",
      placeholder: emailLabel,
      "aria-label": emailLabel,
      bidi: this.email,
      disabled: this.loading
    })), 80);
    items.add('password', m("div", {
      className: "Form-group"
    }, m("input", {
      className: "FormControl",
      name: "password",
      type: "password",
      autocomplete: "new-password",
      placeholder: passwordLabel,
      "aria-label": passwordLabel,
      bidi: this.password,
      disabled: this.loading || this.password() === null
    })), 60);
    items.add('emailConfirmation', m("div", {
      className: "Form-group"
    }, m(_common_components_Switch__WEBPACK_IMPORTED_MODULE_7__["default"], {
      name: "emailConfirmed",
      state: this.requireEmailConfirmation(),
      onchange: function onchange(checked) {
        return _this2.requireEmailConfirmation(checked);
      },
      disabled: this.loading
    }, emailConfirmationLabel)), 40);
    items.add('useRandomPassword', m("div", {
      className: "Form-group"
    }, m(_common_components_Switch__WEBPACK_IMPORTED_MODULE_7__["default"], {
      name: "useRandomPassword",
      state: this.password() === null,
      onchange: function onchange(enabled) {
        _this2.password(enabled ? null : '');
      },
      disabled: this.loading
    }, useRandomPasswordLabel)), 20);
    items.add('submit', m("div", {
      className: "Form-group"
    }, m(_common_components_Button__WEBPACK_IMPORTED_MODULE_3__["default"], {
      className: "Button Button--primary Button--block",
      type: "submit",
      loading: this.loading
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.create_user.submit_button'))), 0);
    items.add('submitAndAdd', m("div", {
      className: "Form-group"
    }, m(_common_components_Button__WEBPACK_IMPORTED_MODULE_3__["default"], {
      className: "Button Button--block",
      onclick: function onclick() {
        return _this2.bulkAdd(true) && _this2.onsubmit();
      },
      disabled: this.loading
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.create_user.submit_and_create_another_button'))), -20);
    return items;
  };
  _proto.onready = function onready() {
    this.$('[name=username]').trigger('select');
  };
  _proto.onsubmit = function onsubmit(e) {
    var _e,
      _this3 = this;
    if (e === void 0) {
      e = null;
    }
    (_e = e) == null ? void 0 : _e.preventDefault();
    this.loading = true;
    _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].request({
      url: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].forum.attribute('apiUrl') + '/users',
      method: 'POST',
      body: {
        data: {
          attributes: this.submitData()
        }
      },
      errorHandler: this.onerror.bind(this)
    }).then(function () {
      if (_this3.bulkAdd()) {
        _this3.resetData();
      } else {
        _this3.hide();
      }
    })["finally"](function () {
      _this3.bulkAdd(false);
      _this3.loaded();
    });
  }

  /**
   * Get the data that should be submitted in the sign-up request.
   */;
  _proto.submitData = function submitData() {
    var _this$password;
    var data = {
      username: this.username(),
      email: this.email(),
      isEmailConfirmed: !this.requireEmailConfirmation(),
      password: (_this$password = this.password()) != null ? _this$password : (0,_common_utils_string__WEBPACK_IMPORTED_MODULE_8__.generateRandomString)(32)
    };
    return data;
  };
  _proto.resetData = function resetData() {
    this.username('');
    this.email('');
    this.password('');
  };
  return CreateUserModal;
}(_common_components_Modal__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/admin/components/DashboardPage.tsx":
/*!************************************************!*\
  !*** ./src/admin/components/DashboardPage.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DashboardPage)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _StatusWidget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StatusWidget */ "./src/admin/components/StatusWidget.js");
/* harmony import */ var _ExtensionsWidget__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ExtensionsWidget */ "./src/admin/components/ExtensionsWidget.js");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _AdminPage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AdminPage */ "./src/admin/components/AdminPage.tsx");
/* harmony import */ var _DebugWarningWidget__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./DebugWarningWidget */ "./src/admin/components/DebugWarningWidget.tsx");







var DashboardPage = /*#__PURE__*/function (_AdminPage) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(DashboardPage, _AdminPage);
  function DashboardPage() {
    return _AdminPage.apply(this, arguments) || this;
  }
  var _proto = DashboardPage.prototype;
  _proto.headerInfo = function headerInfo() {
    return {
      className: 'DashboardPage',
      icon: 'fas fa-chart-bar',
      title: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.dashboard.title'),
      description: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.dashboard.description')
    };
  };
  _proto.content = function content() {
    return this.availableWidgets().toArray();
  };
  _proto.availableWidgets = function availableWidgets() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
    if (_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.debugEnabled) {
      items.add('debug-warning', m(_DebugWarningWidget__WEBPACK_IMPORTED_MODULE_6__["default"], null), 100);
    }
    items.add('status', m(_StatusWidget__WEBPACK_IMPORTED_MODULE_2__["default"], null), 30);
    items.add('extensions', m(_ExtensionsWidget__WEBPACK_IMPORTED_MODULE_3__["default"], null), 10);
    return items;
  };
  return DashboardPage;
}(_AdminPage__WEBPACK_IMPORTED_MODULE_5__["default"]);


/***/ }),

/***/ "./src/admin/components/DashboardWidget.tsx":
/*!**************************************************!*\
  !*** ./src/admin/components/DashboardWidget.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DashboardWidget)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _common_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Component */ "./src/common/Component.ts");


var DashboardWidget = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(DashboardWidget, _Component);
  function DashboardWidget() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = DashboardWidget.prototype;
  _proto.view = function view(vnode) {
    return m("div", {
      className: 'DashboardWidget Widget ' + this.className()
    }, this.content());
  };
  _proto.className = function className() {
    return '';
  };
  _proto.content = function content() {
    return null;
  };
  return DashboardWidget;
}(_common_Component__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/admin/components/DebugWarningWidget.tsx":
/*!*****************************************************!*\
  !*** ./src/admin/components/DebugWarningWidget.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DebugWarningWidget)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_Alert__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/components/Alert */ "./src/common/components/Alert.tsx");
/* harmony import */ var _common_components_Link__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/Link */ "./src/common/components/Link.js");
/* harmony import */ var _DashboardWidget__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DashboardWidget */ "./src/admin/components/DashboardWidget.tsx");





var DebugWarningWidget = /*#__PURE__*/function (_DashboardWidget) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(DebugWarningWidget, _DashboardWidget);
  function DebugWarningWidget() {
    return _DashboardWidget.apply(this, arguments) || this;
  }
  var _proto = DebugWarningWidget.prototype;
  _proto.className = function className() {
    return 'DebugWarningWidget';
  };
  _proto.content = function content() {
    return m(_common_components_Alert__WEBPACK_IMPORTED_MODULE_2__["default"], {
      type: "warning",
      dismissible: false,
      title: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.debug-warning.label'),
      icon: "fas fa-exclamation-triangle"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.debug-warning.detail', {
      link: m(_common_components_Link__WEBPACK_IMPORTED_MODULE_3__["default"], {
        href: "https://docs.flarum.org/troubleshoot/#step-0-activate-debug-mode",
        external: true,
        target: "_blank"
      })
    }));
  };
  return DebugWarningWidget;
}(_DashboardWidget__WEBPACK_IMPORTED_MODULE_4__["default"]);


/***/ }),

/***/ "./src/admin/components/EditCustomCssModal.tsx":
/*!*****************************************************!*\
  !*** ./src/admin/components/EditCustomCssModal.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EditCustomCssModal)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _SettingsModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SettingsModal */ "./src/admin/components/SettingsModal.tsx");



var EditCustomCssModal = /*#__PURE__*/function (_SettingsModal) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(EditCustomCssModal, _SettingsModal);
  function EditCustomCssModal() {
    return _SettingsModal.apply(this, arguments) || this;
  }
  var _proto = EditCustomCssModal.prototype;
  _proto.className = function className() {
    return 'EditCustomCssModal TextareaCodeModal Modal--large';
  };
  _proto.title = function title() {
    return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_css.title');
  };
  _proto.form = function form() {
    return [m("p", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_css.customize_text', {
      a: m("a", {
        href: "https://github.com/flarum/core/tree/master/less",
        target: "_blank"
      })
    })), m("div", {
      className: "Form-group"
    }, m("textarea", {
      className: "FormControl",
      rows: "30",
      bidi: this.setting('custom_less'),
      spellcheck: false
    }))];
  };
  _proto.onsaved = function onsaved() {
    window.location.reload();
  };
  return EditCustomCssModal;
}(_SettingsModal__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/admin/components/EditCustomFooterModal.tsx":
/*!********************************************************!*\
  !*** ./src/admin/components/EditCustomFooterModal.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EditCustomFooterModal)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _SettingsModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SettingsModal */ "./src/admin/components/SettingsModal.tsx");



var EditCustomFooterModal = /*#__PURE__*/function (_SettingsModal) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(EditCustomFooterModal, _SettingsModal);
  function EditCustomFooterModal() {
    return _SettingsModal.apply(this, arguments) || this;
  }
  var _proto = EditCustomFooterModal.prototype;
  _proto.className = function className() {
    return 'EditCustomFooterModal TextareaCodeModal Modal--large';
  };
  _proto.title = function title() {
    return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_footer.title');
  };
  _proto.form = function form() {
    return [m("p", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_footer.customize_text')), m("div", {
      className: "Form-group"
    }, m("textarea", {
      className: "FormControl",
      rows: "30",
      bidi: this.setting('custom_footer')
    }))];
  };
  _proto.onsaved = function onsaved() {
    window.location.reload();
  };
  return EditCustomFooterModal;
}(_SettingsModal__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/admin/components/EditCustomHeaderModal.tsx":
/*!********************************************************!*\
  !*** ./src/admin/components/EditCustomHeaderModal.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EditCustomHeaderModal)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _SettingsModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SettingsModal */ "./src/admin/components/SettingsModal.tsx");



var EditCustomHeaderModal = /*#__PURE__*/function (_SettingsModal) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(EditCustomHeaderModal, _SettingsModal);
  function EditCustomHeaderModal() {
    return _SettingsModal.apply(this, arguments) || this;
  }
  var _proto = EditCustomHeaderModal.prototype;
  _proto.className = function className() {
    return 'EditCustomHeaderModal TextareaCodeModal Modal--large';
  };
  _proto.title = function title() {
    return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_header.title');
  };
  _proto.form = function form() {
    return [m("p", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_header.customize_text')), m("div", {
      className: "Form-group"
    }, m("textarea", {
      className: "FormControl",
      rows: "30",
      bidi: this.setting('custom_header')
    }))];
  };
  _proto.onsaved = function onsaved() {
    window.location.reload();
  };
  return EditCustomHeaderModal;
}(_SettingsModal__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/admin/components/EditGroupModal.tsx":
/*!*************************************************!*\
  !*** ./src/admin/components/EditGroupModal.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EditGroupModal)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_Modal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/components/Modal */ "./src/common/components/Modal.tsx");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_components_Badge__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/components/Badge */ "./src/common/components/Badge.tsx");
/* harmony import */ var _common_models_Group__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/models/Group */ "./src/common/models/Group.ts");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _common_components_Switch__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/components/Switch */ "./src/common/components/Switch.tsx");
/* harmony import */ var _common_utils_Stream__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/utils/Stream */ "./src/common/utils/Stream.ts");
/* harmony import */ var _common_utils_extractText__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../common/utils/extractText */ "./src/common/utils/extractText.ts");
/* harmony import */ var _common_components_ColorPreviewInput__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../common/components/ColorPreviewInput */ "./src/common/components/ColorPreviewInput.tsx");











/**
 * The `EditGroupModal` component shows a modal dialog which allows the user
 * to create or edit a group.
 */
var EditGroupModal = /*#__PURE__*/function (_Modal) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(EditGroupModal, _Modal);
  function EditGroupModal() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Modal.call.apply(_Modal, [this].concat(args)) || this;
    _this.group = void 0;
    _this.nameSingular = void 0;
    _this.namePlural = void 0;
    _this.icon = void 0;
    _this.color = void 0;
    _this.isHidden = void 0;
    return _this;
  }
  var _proto = EditGroupModal.prototype;
  _proto.oninit = function oninit(vnode) {
    _Modal.prototype.oninit.call(this, vnode);
    this.group = this.attrs.group || _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].store.createRecord('groups');
    this.nameSingular = (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])(this.group.nameSingular() || '');
    this.namePlural = (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])(this.group.namePlural() || '');
    this.icon = (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])(this.group.icon() || '');
    this.color = (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])(this.group.color() || '');
    this.isHidden = (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])(this.group.isHidden() || false);
  };
  _proto.className = function className() {
    return 'EditGroupModal Modal--small';
  };
  _proto.title = function title() {
    return m('[', null, !!(this.color() || this.icon()) && m(_common_components_Badge__WEBPACK_IMPORTED_MODULE_4__["default"], {
      icon: this.icon(),
      color: this.color()
    }), ' ', this.namePlural() || _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_group.title'));
  };
  _proto.content = function content() {
    return m("div", {
      className: "Modal-body"
    }, m("div", {
      className: "Form"
    }, this.fields().toArray()));
  };
  _proto.fields = function fields() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_6__["default"]();
    items.add('name', m("div", {
      className: "Form-group"
    }, m("label", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_group.name_label')), m("div", {
      className: "EditGroupModal-name-input"
    }, m("input", {
      className: "FormControl",
      placeholder: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_group.singular_placeholder'),
      bidi: this.nameSingular
    }), m("input", {
      className: "FormControl",
      placeholder: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_group.plural_placeholder'),
      bidi: this.namePlural
    }))), 30);
    items.add('color', m("div", {
      className: "Form-group"
    }, m("label", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_group.color_label')), m(_common_components_ColorPreviewInput__WEBPACK_IMPORTED_MODULE_10__["default"], {
      placeholder: "#aaaaaa",
      bidi: this.color
    })), 20);
    items.add('icon', m("div", {
      className: "Form-group"
    }, m("label", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_group.icon_label')), m("div", {
      className: "helpText"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_group.icon_text', {
      a: m("a", {
        href: "https://fontawesome.com/v5/search?m=free",
        tabindex: "-1"
      })
    })), m("input", {
      className: "FormControl",
      placeholder: "fas fa-bolt",
      bidi: this.icon
    })), 10);
    items.add('hidden', m("div", {
      className: "Form-group"
    }, m(_common_components_Switch__WEBPACK_IMPORTED_MODULE_7__["default"], {
      state: this.isHidden(),
      onchange: this.isHidden
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_group.hide_label'))), 10);
    items.add('submit', m("div", {
      className: "Form-group"
    }, m(_common_components_Button__WEBPACK_IMPORTED_MODULE_3__["default"], {
      type: "submit",
      className: "Button Button--primary EditGroupModal-save",
      loading: this.loading
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_group.submit_button')), this.group.exists && this.group.id() !== _common_models_Group__WEBPACK_IMPORTED_MODULE_5__["default"].ADMINISTRATOR_ID && m("button", {
      type: "button",
      className: "Button EditGroupModal-delete",
      onclick: this.deleteGroup.bind(this)
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_group.delete_button'))), -10);
    return items;
  };
  _proto.submitData = function submitData() {
    return {
      nameSingular: this.nameSingular(),
      namePlural: this.namePlural(),
      color: this.color(),
      icon: this.icon(),
      isHidden: this.isHidden()
    };
  };
  _proto.onsubmit = function onsubmit(e) {
    var _this2 = this;
    e.preventDefault();
    this.loading = true;
    this.group.save(this.submitData(), {
      errorHandler: this.onerror.bind(this)
    }).then(this.hide.bind(this))["catch"](function () {
      _this2.loading = false;
      m.redraw();
    });
  };
  _proto.deleteGroup = function deleteGroup() {
    if (confirm((0,_common_utils_extractText__WEBPACK_IMPORTED_MODULE_9__["default"])(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.edit_group.delete_confirmation')))) {
      this.group["delete"]().then(function () {
        return m.redraw();
      });
      this.hide();
    }
  };
  return EditGroupModal;
}(_common_components_Modal__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/admin/components/ExtensionPage.tsx":
/*!************************************************!*\
  !*** ./src/admin/components/ExtensionPage.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ExtensionPage)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_components_Link__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/Link */ "./src/common/components/Link.js");
/* harmony import */ var _common_components_LinkButton__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/components/LinkButton */ "./src/common/components/LinkButton.js");
/* harmony import */ var _common_components_Switch__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/components/Switch */ "./src/common/components/Switch.tsx");
/* harmony import */ var _common_helpers_icon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _common_helpers_punctuateSeries__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/helpers/punctuateSeries */ "./src/common/helpers/punctuateSeries.js");
/* harmony import */ var _common_helpers_listItems__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/helpers/listItems */ "./src/common/helpers/listItems.tsx");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _LoadingModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./LoadingModal */ "./src/admin/components/LoadingModal.tsx");
/* harmony import */ var _ExtensionPermissionGrid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./ExtensionPermissionGrid */ "./src/admin/components/ExtensionPermissionGrid.tsx");
/* harmony import */ var _utils_isExtensionEnabled__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utils/isExtensionEnabled */ "./src/admin/utils/isExtensionEnabled.js");
/* harmony import */ var _AdminPage__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./AdminPage */ "./src/admin/components/AdminPage.tsx");
/* harmony import */ var _ReadmeModal__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./ReadmeModal */ "./src/admin/components/ReadmeModal.tsx");
/* harmony import */ var _common_utils_extractText__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../common/utils/extractText */ "./src/common/utils/extractText.ts");
















var ExtensionPage = /*#__PURE__*/function (_AdminPage) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(ExtensionPage, _AdminPage);
  function ExtensionPage() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _AdminPage.call.apply(_AdminPage, [this].concat(args)) || this;
    _this.extension = void 0;
    _this.changingState = false;
    _this.infoFields = {
      discuss: 'fas fa-comment-alt',
      documentation: 'fas fa-book',
      support: 'fas fa-life-ring',
      website: 'fas fa-link',
      donate: 'fas fa-donate',
      source: 'fas fa-code'
    };
    return _this;
  }
  var _proto = ExtensionPage.prototype;
  _proto.oninit = function oninit(vnode) {
    _AdminPage.prototype.oninit.call(this, vnode);
    var extension = _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.extensions[this.attrs.id];
    if (!extension) {
      return m.route.set(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].route('dashboard'));
    }
    this.extension = extension;
  };
  _proto.className = function className() {
    if (!this.extension) return '';
    return this.extension.id + '-Page';
  };
  _proto.view = function view(vnode) {
    if (!this.extension) return null;
    return m("div", {
      className: 'ExtensionPage ' + this.className()
    }, this.header(), !this.isEnabled() ? m("div", {
      className: "container"
    }, m("h3", {
      className: "ExtensionPage-subHeader"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.extension.enable_to_see'))) : m("div", {
      className: "ExtensionPage-body"
    }, this.sections(vnode).toArray()));
  };
  _proto.header = function header() {
    var isEnabled = this.isEnabled();
    return [m("div", {
      className: "ExtensionPage-header"
    }, m("div", {
      className: "container"
    }, m("div", {
      className: "ExtensionTitle"
    }, m("span", {
      className: "ExtensionIcon",
      style: this.extension.icon
    }, !!this.extension.icon && (0,_common_helpers_icon__WEBPACK_IMPORTED_MODULE_6__["default"])(this.extension.icon.name)), m("div", {
      className: "ExtensionName"
    }, m("h2", null, this.extension.extra['flarum-extension'].title)), m("div", {
      className: "ExtensionPage-headerTopItems"
    }, m("ul", null, (0,_common_helpers_listItems__WEBPACK_IMPORTED_MODULE_8__["default"])(this.topItems().toArray())))), m("div", {
      className: "helpText"
    }, this.extension.description), m("div", {
      className: "ExtensionPage-headerItems"
    }, m(_common_components_Switch__WEBPACK_IMPORTED_MODULE_5__["default"], {
      state: this.changingState ? !isEnabled : isEnabled,
      loading: this.changingState,
      onchange: this.toggle.bind(this, this.extension.id)
    }, isEnabled ? _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.extension.enabled') : _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.extension.disabled')), m("aside", {
      className: "ExtensionInfo"
    }, m("ul", null, (0,_common_helpers_listItems__WEBPACK_IMPORTED_MODULE_8__["default"])(this.infoItems().toArray()))))))];
  };
  _proto.sections = function sections(vnode) {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_9__["default"]();
    items.add('content', this.content(vnode));
    items.add('permissions', m("div", {
      className: "ExtensionPage-permissions"
    }, m("div", {
      className: "ExtensionPage-permissions-header"
    }, m("div", {
      className: "container"
    }, m("h2", {
      className: "ExtensionTitle"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.extension.permissions_title')))), m("div", {
      className: "container"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionData.extensionHasPermissions(this.extension.id) ? m(_ExtensionPermissionGrid__WEBPACK_IMPORTED_MODULE_11__["default"], {
      extensionId: this.extension.id
    }) : m("h3", {
      className: "ExtensionPage-subHeader"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.extension.no_permissions')))));
    return items;
  };
  _proto.content = function content(vnode) {
    var settings = _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionData.getSettings(this.extension.id);
    return m("div", {
      className: "ExtensionPage-settings"
    }, m("div", {
      className: "container"
    }, settings ? m("div", {
      className: "Form"
    }, settings.map(this.buildSettingComponent.bind(this)), m("div", {
      className: "Form-group"
    }, this.submitButton())) : m("h3", {
      className: "ExtensionPage-subHeader"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.extension.no_settings'))));
  };
  _proto.topItems = function topItems() {
    var _this2 = this;
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_9__["default"]();
    items.add('version', m("span", {
      className: "ExtensionVersion"
    }, this.extension.version));
    if (!this.isEnabled()) {
      var purge = function purge() {
        if (confirm((0,_common_utils_extractText__WEBPACK_IMPORTED_MODULE_15__["default"])(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.extension.confirm_purge')))) {
          _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].request({
            url: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].forum.attribute('apiUrl') + '/extensions/' + _this2.extension.id,
            method: 'DELETE'
          }).then(function () {
            return window.location.reload();
          });
          _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.show(_LoadingModal__WEBPACK_IMPORTED_MODULE_10__["default"]);
        }
      };

      // TODO v2.0: rename `uninstall` to `purge`
      items.add('uninstall', m(_common_components_Button__WEBPACK_IMPORTED_MODULE_2__["default"], {
        icon: "fas fa-trash-alt",
        className: "Button Button--primary",
        onclick: purge.bind(this)
      }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.extension.purge_button')));
    }
    return items;
  };
  _proto.infoItems = function infoItems() {
    var _links$authors,
      _this3 = this;
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_9__["default"]();
    var links = this.extension.links;
    if ((_links$authors = links.authors) != null && _links$authors.length) {
      var authors = links.authors.map(function (author) {
        return m(_common_components_Link__WEBPACK_IMPORTED_MODULE_3__["default"], {
          href: author.link,
          external: true,
          target: "_blank"
        }, author.name);
      });
      items.add('authors', [(0,_common_helpers_icon__WEBPACK_IMPORTED_MODULE_6__["default"])('fas fa-user'), m("span", null, (0,_common_helpers_punctuateSeries__WEBPACK_IMPORTED_MODULE_7__["default"])(authors))]);
    }
    Object.keys(this.infoFields).map(function (field) {
      if (links[field]) {
        items.add(field, m(_common_components_LinkButton__WEBPACK_IMPORTED_MODULE_4__["default"], {
          href: links[field],
          icon: _this3.infoFields[field],
          external: true,
          target: "_blank"
        }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans("core.admin.extension.info_links." + field)));
      }
    });
    var extension = this.extension;
    items.add('readme', m(_common_components_Button__WEBPACK_IMPORTED_MODULE_2__["default"], {
      icon: "fab fa-readme",
      className: "Button Button--text",
      onclick: function onclick() {
        return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.show(_ReadmeModal__WEBPACK_IMPORTED_MODULE_14__["default"], {
          extension: extension
        });
      }
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.extension.readme.button_label')), 10);
    return items;
  };
  _proto.toggle = function toggle() {
    var _this4 = this;
    var enabled = this.isEnabled();
    this.changingState = true;
    _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].request({
      url: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].forum.attribute('apiUrl') + '/extensions/' + this.extension.id,
      method: 'PATCH',
      body: {
        enabled: !enabled
      },
      errorHandler: this.onerror.bind(this)
    }).then(function () {
      if (!enabled) localStorage.setItem('enabledExtension', _this4.extension.id);
      window.location.reload();
    });
    _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.show(_LoadingModal__WEBPACK_IMPORTED_MODULE_10__["default"]);
  };
  _proto.isEnabled = function isEnabled() {
    return (0,_utils_isExtensionEnabled__WEBPACK_IMPORTED_MODULE_12__["default"])(this.extension.id);
  };
  _proto.onerror = function onerror(e) {
    var _e$response, _e$response$errors;
    // We need to give the modal animation time to start; if we close the modal too early,
    // it breaks the bootstrap modal library.
    // TODO: This workaround should be removed when we move away from bootstrap JS for modals.
    setTimeout(function () {
      _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.close();
    }, 300); // Bootstrap's Modal.TRANSITION_DURATION is 300 ms.

    this.changingState = false;
    if (e.status !== 409) {
      throw e;
    }
    var error = (_e$response = e.response) == null ? void 0 : (_e$response$errors = _e$response.errors) == null ? void 0 : _e$response$errors[0];
    if (error) {
      _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].alerts.show({
        type: 'error'
      }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans("core.lib.error." + error.code + "_message", {
        extension: error.extension,
        extensions: error.extensions.join(', ')
      }));
    }
  };
  return ExtensionPage;
}(_AdminPage__WEBPACK_IMPORTED_MODULE_13__["default"]);


/***/ }),

/***/ "./src/admin/components/ExtensionPermissionGrid.tsx":
/*!**********************************************************!*\
  !*** ./src/admin/components/ExtensionPermissionGrid.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ExtensionPermissionGrid)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _PermissionGrid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PermissionGrid */ "./src/admin/components/PermissionGrid.tsx");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");





var ExtensionPermissionGrid = /*#__PURE__*/function (_PermissionGrid) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(ExtensionPermissionGrid, _PermissionGrid);
  function ExtensionPermissionGrid() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _PermissionGrid.call.apply(_PermissionGrid, [this].concat(args)) || this;
    _this.extensionId = void 0;
    return _this;
  }
  var _proto = ExtensionPermissionGrid.prototype;
  _proto.oninit = function oninit(vnode) {
    _PermissionGrid.prototype.oninit.call(this, vnode);
    this.extensionId = this.attrs.extensionId;
  };
  _proto.permissionItems = function permissionItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
    _PermissionGrid.prototype.permissionItems.call(this).toArray().filter(function (item) {
      return item.children.length > 0;
    }).forEach(function (item) {
      items.add(item.itemName, item);
    });
    return items;
  };
  _proto.viewItems = function viewItems() {
    return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionData.getExtensionPermissions(this.extensionId, 'view') || new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
  };
  _proto.startItems = function startItems() {
    return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionData.getExtensionPermissions(this.extensionId, 'start') || new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
  };
  _proto.replyItems = function replyItems() {
    return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionData.getExtensionPermissions(this.extensionId, 'reply') || new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
  };
  _proto.moderateItems = function moderateItems() {
    return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionData.getExtensionPermissions(this.extensionId, 'moderate') || new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
  };
  _proto.scopeControlItems = function scopeControlItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
    items.add('configureScopes', m(_common_components_Button__WEBPACK_IMPORTED_MODULE_3__["default"], {
      className: "Button Button--text",
      onclick: function onclick() {
        return m.route.set(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].route('permissions'));
      }
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.extension.configure_scopes')));
    return items;
  };
  return ExtensionPermissionGrid;
}(_PermissionGrid__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/admin/components/LoadingModal.tsx":
/*!***********************************************!*\
  !*** ./src/admin/components/LoadingModal.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ LoadingModal)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_Modal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/components/Modal */ "./src/common/components/Modal.tsx");



var LoadingModal = /*#__PURE__*/function (_Modal) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(LoadingModal, _Modal);
  function LoadingModal() {
    return _Modal.apply(this, arguments) || this;
  }
  var _proto = LoadingModal.prototype;
  /**
   * @inheritdoc
   */
  _proto.className = function className() {
    return 'LoadingModal Modal--small';
  };
  _proto.title = function title() {
    return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.loading.title');
  };
  _proto.content = function content() {
    return null;
  };
  _proto.onsubmit = function onsubmit(e) {
    throw new Error('LoadingModal should not throw errors.');
  };
  return LoadingModal;
}(_common_components_Modal__WEBPACK_IMPORTED_MODULE_2__["default"]);
LoadingModal.isDismissible = false;


/***/ }),

/***/ "./src/admin/components/MailPage.tsx":
/*!*******************************************!*\
  !*** ./src/admin/components/MailPage.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MailPage)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_FieldSet__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/FieldSet */ "./src/common/components/FieldSet.js");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_components_Alert__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/components/Alert */ "./src/common/components/Alert.tsx");
/* harmony import */ var _common_components_LoadingIndicator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/components/LoadingIndicator */ "./src/common/components/LoadingIndicator.tsx");
/* harmony import */ var _AdminPage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./AdminPage */ "./src/admin/components/AdminPage.tsx");








var MailPage = /*#__PURE__*/function (_AdminPage) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(MailPage, _AdminPage);
  function MailPage() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _AdminPage.call.apply(_AdminPage, [this].concat(args)) || this;
    _this.sendingTest = false;
    _this.status = void 0;
    _this.driverFields = void 0;
    _this.testEmailSuccessAlert = void 0;
    return _this;
  }
  var _proto = MailPage.prototype;
  _proto.oninit = function oninit(vnode) {
    _AdminPage.prototype.oninit.call(this, vnode);
    this.refresh();
  };
  _proto.headerInfo = function headerInfo() {
    return {
      className: 'MailPage',
      icon: 'fas fa-envelope',
      title: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.email.title'),
      description: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.email.description')
    };
  };
  _proto.refresh = function refresh() {
    var _this2 = this;
    this.loading = true;
    this.status = {
      sending: false,
      errors: {}
    };
    _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].request({
      method: 'GET',
      url: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].forum.attribute('apiUrl') + '/mail/settings'
    }).then(function (response) {
      _this2.driverFields = response.data.attributes.fields;
      _this2.status.sending = response.data.attributes.sending;
      _this2.status.errors = response.data.attributes.errors;
      _this2.loading = false;
      m.redraw();
    });
  };
  _proto.content = function content() {
    var _this3 = this;
    if (this.loading) {
      return m(_common_components_LoadingIndicator__WEBPACK_IMPORTED_MODULE_6__["default"], null);
    }
    var fields = this.driverFields[this.setting('mail_driver')()];
    var fieldKeys = Object.keys(fields);
    return m("div", {
      className: "Form"
    }, this.buildSettingComponent({
      type: 'text',
      setting: 'mail_from',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.email.addresses_heading')
    }), this.buildSettingComponent({
      type: 'select',
      setting: 'mail_driver',
      options: Object.keys(this.driverFields).reduce(function (memo, val) {
        var _extends2;
        return (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, memo, (_extends2 = {}, _extends2[val] = val, _extends2));
      }, {}),
      label: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.email.driver_heading')
    }), this.status.sending || m(_common_components_Alert__WEBPACK_IMPORTED_MODULE_5__["default"], {
      dismissible: false
    }, _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.email.not_sending_message')), !!fieldKeys.length && m(_common_components_FieldSet__WEBPACK_IMPORTED_MODULE_3__["default"], {
      label: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans("core.admin.email." + this.setting('mail_driver')() + "_heading"),
      className: "MailPage-MailSettings"
    }, m("div", {
      className: "MailPage-MailSettings-input"
    }, fieldKeys.map(function (field) {
      var fieldInfo = fields[field];
      return m('[', null, _this3.buildSettingComponent({
        type: typeof fieldInfo === 'string' ? 'text' : 'select',
        label: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans("core.admin.email." + field + "_label"),
        setting: field,
        options: fieldInfo
      }), _this3.status.errors[field] && m("p", {
        className: "ValidationError"
      }, _this3.status.errors[field]));
    }))), this.submitButton(), m(_common_components_FieldSet__WEBPACK_IMPORTED_MODULE_3__["default"], {
      label: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.email.send_test_mail_heading'),
      className: "MailPage-MailSettings"
    }, m("div", {
      className: "helpText"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.email.send_test_mail_text', {
      email: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].session.user.email()
    })), m(_common_components_Button__WEBPACK_IMPORTED_MODULE_4__["default"], {
      className: "Button Button--primary",
      disabled: this.sendingTest || this.isChanged(),
      onclick: function onclick() {
        return _this3.sendTestEmail();
      }
    }, _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.email.send_test_mail_button'))));
  };
  _proto.sendTestEmail = function sendTestEmail() {
    var _this4 = this;
    if (this.sendingTest) return;
    this.sendingTest = true;
    if (this.testEmailSuccessAlert) _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].alerts.dismiss(this.testEmailSuccessAlert);
    _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].request({
      method: 'POST',
      url: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].forum.attribute('apiUrl') + '/mail/test'
    }).then(function (response) {
      _this4.sendingTest = false;
      _this4.testEmailSuccessAlert = _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].alerts.show({
        type: 'success'
      }, _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.email.send_test_mail_success'));
    })["catch"](function (error) {
      _this4.sendingTest = false;
      m.redraw();
      throw error;
    });
  };
  _proto.saveSettings = function saveSettings(e) {
    var _this5 = this;
    return _AdminPage.prototype.saveSettings.call(this, e).then(function () {
      return _this5.refresh();
    });
  };
  return MailPage;
}(_AdminPage__WEBPACK_IMPORTED_MODULE_7__["default"]);


/***/ }),

/***/ "./src/admin/components/PermissionDropdown.tsx":
/*!*****************************************************!*\
  !*** ./src/admin/components/PermissionDropdown.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PermissionDropdown)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_Dropdown__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/Dropdown */ "./src/common/components/Dropdown.tsx");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_components_Separator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/components/Separator */ "./src/common/components/Separator.js");
/* harmony import */ var _common_models_Group__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/models/Group */ "./src/common/models/Group.ts");
/* harmony import */ var _common_components_Badge__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/components/Badge */ "./src/common/components/Badge.tsx");
/* harmony import */ var _common_components_GroupBadge__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/components/GroupBadge */ "./src/common/components/GroupBadge.tsx");









function badgeForId(id) {
  var group = _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].store.getById('groups', id);
  return !!group && m(_common_components_GroupBadge__WEBPACK_IMPORTED_MODULE_8__["default"], {
    group: group,
    label: null
  });
}
function filterByRequiredPermissions(groupIds, permission) {
  _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].getRequiredPermissions(permission).forEach(function (required) {
    var restrictToGroupIds = _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].data.permissions[required] || [];
    if (restrictToGroupIds.indexOf(_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].GUEST_ID) !== -1) {
      // do nothing
    } else if (restrictToGroupIds.indexOf(_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].MEMBER_ID) !== -1) {
      groupIds = groupIds.filter(function (id) {
        return id !== _common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].GUEST_ID;
      });
    } else if (groupIds.indexOf(_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].MEMBER_ID) !== -1) {
      groupIds = restrictToGroupIds;
    } else {
      groupIds = restrictToGroupIds.filter(function (id) {
        return groupIds.indexOf(id) !== -1;
      });
    }
    groupIds = filterByRequiredPermissions(groupIds, required);
  });
  return groupIds;
}
var PermissionDropdown = /*#__PURE__*/function (_Dropdown) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(PermissionDropdown, _Dropdown);
  function PermissionDropdown() {
    return _Dropdown.apply(this, arguments) || this;
  }
  PermissionDropdown.initAttrs = function initAttrs(attrs) {
    _Dropdown.initAttrs.call(this, attrs);
    attrs.className = 'PermissionDropdown';
    attrs.buttonClassName = 'Button Button--text';
  };
  var _proto = PermissionDropdown.prototype;
  _proto.view = function view(vnode) {
    var _this = this;
    var children = [];
    var groupIds = _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].data.permissions[this.attrs.permission] || [];
    groupIds = filterByRequiredPermissions(groupIds, this.attrs.permission);
    var everyone = groupIds.includes(_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].GUEST_ID);
    var members = groupIds.includes(_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].MEMBER_ID);
    var adminGroup = _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].store.getById('groups', _common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].ADMINISTRATOR_ID);
    if (everyone) {
      this.attrs.label = m(_common_components_Badge__WEBPACK_IMPORTED_MODULE_7__["default"], {
        icon: "fas fa-globe"
      });
    } else if (members) {
      this.attrs.label = m(_common_components_Badge__WEBPACK_IMPORTED_MODULE_7__["default"], {
        icon: "fas fa-user"
      });
    } else {
      this.attrs.label = [badgeForId(_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].ADMINISTRATOR_ID), groupIds.map(badgeForId)];
    }
    if (this.showing) {
      if (this.attrs.allowGuest) {
        children.push(m(_common_components_Button__WEBPACK_IMPORTED_MODULE_4__["default"], {
          icon: everyone ? 'fas fa-check' : true,
          onclick: function onclick() {
            return _this.save([_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].GUEST_ID]);
          },
          disabled: this.isGroupDisabled(_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].GUEST_ID)
        }, m(_common_components_Badge__WEBPACK_IMPORTED_MODULE_7__["default"], {
          icon: "fas fa-globe"
        }), " ", _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.permissions_controls.everyone_button')));
      }
      children.push(m(_common_components_Button__WEBPACK_IMPORTED_MODULE_4__["default"], {
        icon: members ? 'fas fa-check' : true,
        onclick: function onclick() {
          return _this.save([_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].MEMBER_ID]);
        },
        disabled: this.isGroupDisabled(_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].MEMBER_ID)
      }, m(_common_components_Badge__WEBPACK_IMPORTED_MODULE_7__["default"], {
        icon: "fas fa-user"
      }), " ", _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.permissions_controls.members_button')), m(_common_components_Separator__WEBPACK_IMPORTED_MODULE_5__["default"], null), m(_common_components_Button__WEBPACK_IMPORTED_MODULE_4__["default"], {
        icon: !everyone && !members ? 'fas fa-check' : true,
        disabled: !everyone && !members,
        onclick: function onclick(e) {
          if (e.shiftKey) e.stopPropagation();
          _this.save([]);
        }
      }, badgeForId(adminGroup.id()), " ", adminGroup.namePlural()));

      // These groups are defined above, appearing first in the list.
      var excludedGroups = [_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].ADMINISTRATOR_ID, _common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].GUEST_ID, _common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].MEMBER_ID];
      var groupButtons = _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].store.all('groups').filter(function (group) {
        return !excludedGroups.includes(group.id());
      }).map(function (group) {
        return m(_common_components_Button__WEBPACK_IMPORTED_MODULE_4__["default"], {
          icon: groupIds.includes(group.id()) ? 'fas fa-check' : true,
          onclick: function onclick(e) {
            if (e.shiftKey) e.stopPropagation();
            _this.toggle(group.id());
          },
          disabled: _this.isGroupDisabled(group.id()) && _this.isGroupDisabled(_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].MEMBER_ID) && _this.isGroupDisabled(_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].GUEST_ID)
        }, badgeForId(group.id()), " ", group.namePlural());
      });
      children.push.apply(children, groupButtons);
    }
    return _Dropdown.prototype.view.call(this, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, vnode, {
      children: children
    }));
  };
  _proto.save = function save(groupIds) {
    var permission = this.attrs.permission;
    _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].data.permissions[permission] = groupIds;
    _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].request({
      method: 'POST',
      url: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].forum.attribute('apiUrl') + '/permission',
      body: {
        permission: permission,
        groupIds: groupIds
      }
    });
  };
  _proto.toggle = function toggle(groupId) {
    var permission = this.attrs.permission;
    var groupIds = _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].data.permissions[permission] || [];
    var index = groupIds.indexOf(groupId);
    if (index !== -1) {
      groupIds.splice(index, 1);
    } else {
      groupIds.push(groupId);
      groupIds = groupIds.filter(function (id) {
        return [_common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].GUEST_ID, _common_models_Group__WEBPACK_IMPORTED_MODULE_6__["default"].MEMBER_ID].indexOf(id) === -1;
      });
    }
    this.save(groupIds);
  };
  _proto.isGroupDisabled = function isGroupDisabled(id) {
    return !filterByRequiredPermissions([id], this.attrs.permission).includes(id);
  };
  return PermissionDropdown;
}(_common_components_Dropdown__WEBPACK_IMPORTED_MODULE_3__["default"]);


/***/ }),

/***/ "./src/admin/components/PermissionGrid.tsx":
/*!*************************************************!*\
  !*** ./src/admin/components/PermissionGrid.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PermissionGrid)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/Component */ "./src/common/Component.ts");
/* harmony import */ var _PermissionDropdown__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PermissionDropdown */ "./src/admin/components/PermissionDropdown.tsx");
/* harmony import */ var _SettingDropdown__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SettingDropdown */ "./src/admin/components/SettingDropdown.tsx");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _common_helpers_icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/helpers/icon */ "./src/common/helpers/icon.tsx");








var PermissionGrid = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(PermissionGrid, _Component);
  function PermissionGrid() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = PermissionGrid.prototype;
  _proto.view = function view(vnode) {
    var scopes = this.scopeItems().toArray();
    var permissionCells = function permissionCells(permission) {
      return scopes.map(function (scope) {
        // This indicates the "permission" is a permission category,
        // in which case we return an empty table cell.
        if ('children' in permission) {
          return m("td", null);
        }
        return m("td", null, scope.render(permission));
      });
    };
    return m("table", {
      className: "PermissionGrid"
    }, m("thead", null, m("tr", null, m("th", null), scopes.map(function (scope) {
      return m("th", null, scope.label, ' ', !!scope.onremove && m(_common_components_Button__WEBPACK_IMPORTED_MODULE_5__["default"], {
        icon: "fas fa-times",
        className: "Button Button--text PermissionGrid-removeScope",
        onclick: scope.onremove
      }));
    }), m("th", null, this.scopeControlItems().toArray()))), this.permissionItems().toArray().map(function (section) {
      return m("tbody", null, m("tr", {
        className: "PermissionGrid-section"
      }, m("th", null, section.label), permissionCells(section), m("td", null)), section.children.map(function (child) {
        return m("tr", {
          className: "PermissionGrid-child"
        }, m("th", null, (0,_common_helpers_icon__WEBPACK_IMPORTED_MODULE_7__["default"])(child.icon), child.label), permissionCells(child), m("td", null));
      }));
    }));
  };
  _proto.permissionItems = function permissionItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_6__["default"]();
    items.add('view', {
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.read_heading'),
      children: this.viewItems().toArray()
    }, 100);
    items.add('start', {
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.create_heading'),
      children: this.startItems().toArray()
    }, 90);
    items.add('reply', {
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.participate_heading'),
      children: this.replyItems().toArray()
    }, 80);
    items.add('moderate', {
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.moderate_heading'),
      children: this.moderateItems().toArray()
    }, 70);
    return items;
  };
  _proto.viewItems = function viewItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_6__["default"]();
    items.add('viewForum', {
      icon: 'fas fa-eye',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.view_forum_label'),
      permission: 'viewForum',
      allowGuest: true
    }, 100);
    items.add('viewHiddenGroups', {
      icon: 'fas fa-users',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.view_hidden_groups_label'),
      permission: 'viewHiddenGroups'
    }, 100);
    items.add('searchUsers', {
      icon: 'fas fa-users',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.search_users_label'),
      permission: 'searchUsers',
      allowGuest: true
    }, 100);
    items.add('signUp', {
      icon: 'fas fa-user-plus',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.sign_up_label'),
      setting: function setting() {
        return m(_SettingDropdown__WEBPACK_IMPORTED_MODULE_4__["default"], {
          key: "allow_sign_up",
          options: [{
            value: '1',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.signup_open_button')
          }, {
            value: '0',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.signup_closed_button')
          }],
          lazyDraw: true
        });
      }
    }, 90);
    items.add('viewLastSeenAt', {
      icon: 'far fa-clock',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.view_last_seen_at_label'),
      permission: 'user.viewLastSeenAt'
    });
    items.merge(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionData.getAllExtensionPermissions('view'));
    return items;
  };
  _proto.startItems = function startItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_6__["default"]();
    items.add('start', {
      icon: 'fas fa-edit',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.start_discussions_label'),
      permission: 'startDiscussion'
    }, 100);
    items.add('allowRenaming', {
      icon: 'fas fa-i-cursor',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.allow_renaming_label'),
      setting: function setting() {
        var minutes = parseInt(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.settings.allow_renaming, 10);
        return m(_SettingDropdown__WEBPACK_IMPORTED_MODULE_4__["default"], {
          defaultLabel: minutes ? _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_some_minutes_button', {
            count: minutes
          }) : _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_indefinitely_button'),
          key: "allow_renaming",
          options: [{
            value: '-1',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_indefinitely_button')
          }, {
            value: '10',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_ten_minutes_button')
          }, {
            value: 'reply',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_until_reply_button')
          }],
          lazyDraw: true
        });
      }
    }, 90);
    items.add('createAccessToken', {
      icon: 'fas fa-key',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.create_access_token_label'),
      permission: 'createAccessToken'
    }, 80);
    items.merge(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionData.getAllExtensionPermissions('start'));
    return items;
  };
  _proto.replyItems = function replyItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_6__["default"]();
    items.add('reply', {
      icon: 'fas fa-reply',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.reply_to_discussions_label'),
      permission: 'discussion.reply'
    }, 100);
    items.add('allowPostEditing', {
      icon: 'fas fa-pencil-alt',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.allow_post_editing_label'),
      setting: function setting() {
        var minutes = parseInt(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.settings.allow_post_editing, 10);
        return m(_SettingDropdown__WEBPACK_IMPORTED_MODULE_4__["default"], {
          defaultLabel: minutes ? _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_some_minutes_button', {
            count: minutes
          }) : _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_indefinitely_button'),
          key: "allow_post_editing",
          options: [{
            value: '-1',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_indefinitely_button')
          }, {
            value: '10',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_ten_minutes_button')
          }, {
            value: 'reply',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_until_reply_button')
          }]
        });
      }
    }, 90);
    items.add('hideOwnPosts', {
      icon: 'far fa-trash-alt',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.allow_hide_own_posts_label'),
      setting: function setting() {
        var minutes = parseInt(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.settings.allow_hide_own_posts, 10);
        return _SettingDropdown__WEBPACK_IMPORTED_MODULE_4__["default"].component({
          defaultLabel: minutes ? _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_some_minutes_button', {
            count: minutes
          }) : _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_indefinitely_button'),
          key: 'allow_hide_own_posts',
          options: [{
            value: '-1',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_indefinitely_button')
          }, {
            value: '10',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_ten_minutes_button')
          }, {
            value: 'reply',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_until_reply_button')
          }, {
            value: '0',
            label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions_controls.allow_never_button')
          }]
        });
      }
    }, 80);
    items.merge(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionData.getAllExtensionPermissions('reply'));
    return items;
  };
  _proto.moderateItems = function moderateItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_6__["default"]();
    items.add('viewIpsPosts', {
      icon: 'fas fa-bullseye',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.view_post_ips_label'),
      permission: 'discussion.viewIpsPosts'
    }, 110);
    items.add('renameDiscussions', {
      icon: 'fas fa-i-cursor',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.rename_discussions_label'),
      permission: 'discussion.rename'
    }, 100);
    items.add('hideDiscussions', {
      icon: 'far fa-trash-alt',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.delete_discussions_label'),
      permission: 'discussion.hide'
    }, 90);
    items.add('deleteDiscussions', {
      icon: 'fas fa-times',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.delete_discussions_forever_label'),
      permission: 'discussion.delete'
    }, 80);
    items.add('postWithoutThrottle', {
      icon: 'fas fa-swimmer',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.post_without_throttle_label'),
      permission: 'postWithoutThrottle'
    }, 70);
    items.add('editPosts', {
      icon: 'fas fa-pencil-alt',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.edit_posts_label'),
      permission: 'discussion.editPosts'
    }, 70);
    items.add('hidePosts', {
      icon: 'far fa-trash-alt',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.delete_posts_label'),
      permission: 'discussion.hidePosts'
    }, 60);
    items.add('deletePosts', {
      icon: 'fas fa-times',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.delete_posts_forever_label'),
      permission: 'discussion.deletePosts'
    }, 60);
    items.add('userEditCredentials', {
      icon: 'fas fa-user-cog',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.edit_users_credentials_label'),
      permission: 'user.editCredentials'
    }, 60);
    items.add('userEditGroups', {
      icon: 'fas fa-users-cog',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.edit_users_groups_label'),
      permission: 'user.editGroups'
    }, 60);
    items.add('userEdit', {
      icon: 'fas fa-address-card',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.edit_users_label'),
      permission: 'user.edit'
    }, 60);
    items.add('moderateAccessTokens', {
      icon: 'fas fa-key',
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.moderate_access_tokens_label'),
      permission: 'moderateAccessTokens'
    }, 60);
    items.merge(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionData.getAllExtensionPermissions('moderate'));
    return items;
  };
  _proto.scopeItems = function scopeItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_6__["default"]();
    items.add('global', {
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.global_heading'),
      render: function render(item) {
        if ('setting' in item) {
          return item.setting();
        } else if ('permission' in item) {
          return m(_PermissionDropdown__WEBPACK_IMPORTED_MODULE_3__["default"], {
            permission: item.permission,
            allowGuest: item.allowGuest
          });
        }
        return null;
      }
    }, 100);
    return items;
  };
  _proto.scopeControlItems = function scopeControlItems() {
    return new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_6__["default"]();
  };
  return PermissionGrid;
}(_common_Component__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/admin/components/PermissionsPage.tsx":
/*!**************************************************!*\
  !*** ./src/admin/components/PermissionsPage.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PermissionsPage)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_GroupBadge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/components/GroupBadge */ "./src/common/components/GroupBadge.tsx");
/* harmony import */ var _EditGroupModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EditGroupModal */ "./src/admin/components/EditGroupModal.tsx");
/* harmony import */ var _common_models_Group__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/models/Group */ "./src/common/models/Group.ts");
/* harmony import */ var _common_helpers_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _PermissionGrid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PermissionGrid */ "./src/admin/components/PermissionGrid.tsx");
/* harmony import */ var _AdminPage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./AdminPage */ "./src/admin/components/AdminPage.tsx");








var PermissionsPage = /*#__PURE__*/function (_AdminPage) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(PermissionsPage, _AdminPage);
  function PermissionsPage() {
    return _AdminPage.apply(this, arguments) || this;
  }
  var _proto = PermissionsPage.prototype;
  _proto.headerInfo = function headerInfo() {
    return {
      className: 'PermissionsPage',
      icon: 'fas fa-key',
      title: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.title'),
      description: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.description')
    };
  };
  _proto.content = function content() {
    return m('[', null, m("div", {
      className: "PermissionsPage-groups"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].store.all('groups').filter(function (group) {
      return [_common_models_Group__WEBPACK_IMPORTED_MODULE_4__["default"].GUEST_ID, _common_models_Group__WEBPACK_IMPORTED_MODULE_4__["default"].MEMBER_ID].indexOf(group.id()) === -1;
    }).map(function (group) {
      return m("button", {
        className: "Button Group",
        onclick: function onclick() {
          return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.show(_EditGroupModal__WEBPACK_IMPORTED_MODULE_3__["default"], {
            group: group
          });
        }
      }, m(_common_components_GroupBadge__WEBPACK_IMPORTED_MODULE_2__["default"], {
        group: group,
        className: "Group-icon",
        label: null
      }), m("span", {
        className: "Group-name"
      }, group.namePlural()));
    }), m("button", {
      className: "Button Group Group--add",
      onclick: function onclick() {
        return _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.show(_EditGroupModal__WEBPACK_IMPORTED_MODULE_3__["default"]);
      }
    }, (0,_common_helpers_icon__WEBPACK_IMPORTED_MODULE_5__["default"])('fas fa-plus', {
      className: 'Group-icon'
    }), m("span", {
      className: "Group-name"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.permissions.new_group_button')))), m("div", {
      className: "PermissionsPage-permissions"
    }, m(_PermissionGrid__WEBPACK_IMPORTED_MODULE_6__["default"], null)));
  };
  return PermissionsPage;
}(_AdminPage__WEBPACK_IMPORTED_MODULE_7__["default"]);


/***/ }),

/***/ "./src/admin/components/ReadmeModal.tsx":
/*!**********************************************!*\
  !*** ./src/admin/components/ReadmeModal.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ReadmeModal)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "../../../node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_Modal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/components/Modal */ "./src/common/components/Modal.tsx");
/* harmony import */ var _common_components_LoadingIndicator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/components/LoadingIndicator */ "./src/common/components/LoadingIndicator.tsx");
/* harmony import */ var _common_components_Placeholder__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/components/Placeholder */ "./src/common/components/Placeholder.js");
/* harmony import */ var _models_ExtensionReadme__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../models/ExtensionReadme */ "./src/admin/models/ExtensionReadme.js");








var ReadmeModal = /*#__PURE__*/function (_Modal) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(ReadmeModal, _Modal);
  function ReadmeModal() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Modal.call.apply(_Modal, [this].concat(args)) || this;
    _this.name = void 0;
    _this.extName = void 0;
    _this.readme = void 0;
    return _this;
  }
  var _proto = ReadmeModal.prototype;
  _proto.oninit = function oninit(vnode) {
    _Modal.prototype.oninit.call(this, vnode);
    _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].store.models["extension-readmes"] = _models_ExtensionReadme__WEBPACK_IMPORTED_MODULE_7__["default"];
    this.name = this.attrs.extension.id;
    this.extName = this.attrs.extension.extra['flarum-extension'].title;
    this.loading = true;
    this.loadReadme();
  };
  _proto.className = function className() {
    return 'ReadmeModal Modal--large Modal--inverted';
  };
  _proto.title = function title() {
    return _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.extension.readme.title', {
      extName: this.extName
    });
  };
  _proto.content = function content() {
    return m("div", {
      className: "Modal-body"
    }, this.loading ? m("div", {
      className: "ReadmeModal-loading"
    }, m(_common_components_LoadingIndicator__WEBPACK_IMPORTED_MODULE_5__["default"], null)) : m("div", null, this.readme.content() ? m.trust(this.readme.content()) : m(_common_components_Placeholder__WEBPACK_IMPORTED_MODULE_6__["default"], {
      text: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.extension.readme.no_readme')
    })));
  };
  _proto.loadReadme = /*#__PURE__*/function () {
    var _loadReadme = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee() {
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].store.find('extension-readmes', this.name);
            case 2:
              this.readme = _context.sent;
              this.loading = false;
              m.redraw();
            case 5:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));
    function loadReadme() {
      return _loadReadme.apply(this, arguments);
    }
    return loadReadme;
  }();
  return ReadmeModal;
}(_common_components_Modal__WEBPACK_IMPORTED_MODULE_4__["default"]);


/***/ }),

/***/ "./src/admin/components/SessionDropdown.tsx":
/*!**************************************************!*\
  !*** ./src/admin/components/SessionDropdown.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SessionDropdown)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_helpers_avatar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/helpers/avatar */ "./src/common/helpers/avatar.tsx");
/* harmony import */ var _common_helpers_username__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/helpers/username */ "./src/common/helpers/username.tsx");
/* harmony import */ var _common_components_Dropdown__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/components/Dropdown */ "./src/common/components/Dropdown.tsx");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");








/**
 * The `SessionDropdown` component shows a button with the current user's
 * avatar/name, with a dropdown of session controls.
 */
var SessionDropdown = /*#__PURE__*/function (_Dropdown) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(SessionDropdown, _Dropdown);
  function SessionDropdown() {
    return _Dropdown.apply(this, arguments) || this;
  }
  SessionDropdown.initAttrs = function initAttrs(attrs) {
    _Dropdown.initAttrs.call(this, attrs);
    attrs.className = 'SessionDropdown';
    attrs.buttonClassName = 'Button Button--user Button--flat';
    attrs.menuClassName = 'Dropdown-menu--right';
  };
  var _proto = SessionDropdown.prototype;
  _proto.view = function view(vnode) {
    return _Dropdown.prototype.view.call(this, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, vnode, {
      children: this.items().toArray()
    }));
  };
  _proto.getButtonContent = function getButtonContent() {
    var user = _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].session.user;
    return [(0,_common_helpers_avatar__WEBPACK_IMPORTED_MODULE_3__["default"])(user), ' ', m("span", {
      className: "Button-label"
    }, (0,_common_helpers_username__WEBPACK_IMPORTED_MODULE_4__["default"])(user))];
  }

  /**
   * Build an item list for the contents of the dropdown menu.
   */;
  _proto.items = function items() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_7__["default"]();
    items.add('logOut', m(_common_components_Button__WEBPACK_IMPORTED_MODULE_6__["default"], {
      icon: "fas fa-sign-out-alt",
      onclick: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].session.logout.bind(_admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].session)
    }, _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.header.log_out_button')), -100);
    return items;
  };
  return SessionDropdown;
}(_common_components_Dropdown__WEBPACK_IMPORTED_MODULE_5__["default"]);


/***/ }),

/***/ "./src/admin/components/SettingDropdown.tsx":
/*!**************************************************!*\
  !*** ./src/admin/components/SettingDropdown.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SettingDropdown)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_SelectDropdown__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/SelectDropdown */ "./src/common/components/SelectDropdown.tsx");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _utils_saveSettings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/saveSettings */ "./src/admin/utils/saveSettings.js");






var SettingDropdown = /*#__PURE__*/function (_SelectDropdown) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(SettingDropdown, _SelectDropdown);
  function SettingDropdown() {
    return _SelectDropdown.apply(this, arguments) || this;
  }
  SettingDropdown.initAttrs = function initAttrs(attrs) {
    _SelectDropdown.initAttrs.call(this, attrs);
    attrs.className = 'SettingDropdown';
    attrs.buttonClassName = 'Button Button--text';
    attrs.caretIcon = 'fas fa-caret-down';
    attrs.defaultLabel = 'Custom';
    if ('key' in attrs) {
      var _attrs$key;
      attrs.setting = (_attrs$key = attrs.key) == null ? void 0 : _attrs$key.toString();
      delete attrs.key;
    }
  };
  var _proto = SettingDropdown.prototype;
  _proto.view = function view(vnode) {
    var _this = this;
    return _SelectDropdown.prototype.view.call(this, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, vnode, {
      children: this.attrs.options.map(function (_ref) {
        var _saveSettings$bind;
        var value = _ref.value,
          label = _ref.label;
        var active = _app__WEBPACK_IMPORTED_MODULE_2__["default"].data.settings[_this.attrs.setting] === value;
        return m(_common_components_Button__WEBPACK_IMPORTED_MODULE_4__["default"], {
          icon: active ? 'fas fa-check' : true,
          onclick: _utils_saveSettings__WEBPACK_IMPORTED_MODULE_5__["default"].bind(_this, (_saveSettings$bind = {}, _saveSettings$bind[_this.attrs.setting] = value, _saveSettings$bind)),
          active: active
        }, label);
      })
    }));
  };
  return SettingDropdown;
}(_common_components_SelectDropdown__WEBPACK_IMPORTED_MODULE_3__["default"]);


/***/ }),

/***/ "./src/admin/components/SettingsModal.tsx":
/*!************************************************!*\
  !*** ./src/admin/components/SettingsModal.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SettingsModal)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_Modal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/components/Modal */ "./src/common/components/Modal.tsx");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_utils_Stream__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils/Stream */ "./src/common/utils/Stream.ts");
/* harmony import */ var _utils_saveSettings__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/saveSettings */ "./src/admin/utils/saveSettings.js");






var SettingsModal = /*#__PURE__*/function (_Modal) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(SettingsModal, _Modal);
  function SettingsModal() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Modal.call.apply(_Modal, [this].concat(args)) || this;
    _this.settings = {};
    _this.loading = false;
    return _this;
  }
  var _proto = SettingsModal.prototype;
  _proto.form = function form() {
    return null;
  };
  _proto.content = function content() {
    return m("div", {
      className: "Modal-body"
    }, m("div", {
      className: "Form"
    }, this.form(), m("div", {
      className: "Form-group"
    }, this.submitButton())));
  };
  _proto.submitButton = function submitButton() {
    return m(_common_components_Button__WEBPACK_IMPORTED_MODULE_3__["default"], {
      type: "submit",
      className: "Button Button--primary",
      loading: this.loading,
      disabled: !this.changed()
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.settings.submit_button'));
  };
  _proto.setting = function setting(key, fallback) {
    if (fallback === void 0) {
      fallback = '';
    }
    this.settings[key] = this.settings[key] || (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_4__["default"])(_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.settings[key] || fallback);
    return this.settings[key];
  };
  _proto.dirty = function dirty() {
    var _this2 = this;
    var dirty = {};
    Object.keys(this.settings).forEach(function (key) {
      var value = _this2.settings[key]();
      if (value !== _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.settings[key]) {
        dirty[key] = value;
      }
    });
    return dirty;
  };
  _proto.changed = function changed() {
    return Object.keys(this.dirty()).length;
  };
  _proto.onsubmit = function onsubmit(e) {
    e.preventDefault();
    this.loading = true;
    (0,_utils_saveSettings__WEBPACK_IMPORTED_MODULE_5__["default"])(this.dirty()).then(this.onsaved.bind(this), this.loaded.bind(this));
  };
  _proto.onsaved = function onsaved() {
    this.hide();
  };
  return SettingsModal;
}(_common_components_Modal__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/admin/components/UserListPage.tsx":
/*!***********************************************!*\
  !*** ./src/admin/components/UserListPage.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ UserListPage)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "../../../node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_EditUserModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/components/EditUserModal */ "./src/common/components/EditUserModal.tsx");
/* harmony import */ var _common_components_LoadingIndicator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/components/LoadingIndicator */ "./src/common/components/LoadingIndicator.tsx");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_helpers_icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _common_helpers_listItems__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/helpers/listItems */ "./src/common/helpers/listItems.tsx");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _common_utils_classList__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../common/utils/classList */ "./src/common/utils/classList.ts");
/* harmony import */ var _common_utils_extractText__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../common/utils/extractText */ "./src/common/utils/extractText.ts");
/* harmony import */ var _AdminPage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./AdminPage */ "./src/admin/components/AdminPage.tsx");
/* harmony import */ var _common_utils_throttleDebounce__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../common/utils/throttleDebounce */ "./src/common/utils/throttleDebounce.ts");
/* harmony import */ var _CreateUserModal__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./CreateUserModal */ "./src/admin/components/CreateUserModal.tsx");















/**
 * Admin page which displays a paginated list of all users on the forum.
 */
var UserListPage = /*#__PURE__*/function (_AdminPage) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(UserListPage, _AdminPage);
  function UserListPage() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _AdminPage.call.apply(_AdminPage, [this].concat(args)) || this;
    _this.query = '';
    _this.throttledSearch = (0,_common_utils_throttleDebounce__WEBPACK_IMPORTED_MODULE_13__.debounce)(250, function () {
      return _this.loadPage(0);
    });
    _this.numPerPage = 50;
    _this.pageNumber = 0;
    _this.loadingPageNumber = 0;
    _this.userCount = _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].data.modelStatistics.users.total;
    _this.pageData = undefined;
    _this.moreData = false;
    _this.isLoadingPage = false;
    return _this;
  }
  var _proto = UserListPage.prototype;
  /**
   * Get total number of user pages.
   */
  _proto.getTotalPageCount = function getTotalPageCount() {
    if (this.userCount === -1) return 0;
    return Math.ceil(this.userCount / this.numPerPage);
  }

  /**
   * This page's array of users.
   *
   * `undefined` when page loads as no data has been fetched.
   */;
  _proto.oninit = function oninit(vnode) {
    _AdminPage.prototype.oninit.call(this, vnode);

    // Get page query value from URL
    var page = parseInt(m.route.param('page'));
    if (isNaN(page) || page < 1) {
      this.setPageNumberInUrl(1);
      this.pageNumber = 0;
    } else {
      this.pageNumber = page - 1;
    }
    this.loadingPageNumber = this.pageNumber;
  }

  /**
   * Component to render.
   */;
  _proto.content = function content() {
    var _this2 = this;
    if (typeof this.pageData === 'undefined') {
      this.loadPage(this.pageNumber);
      return [m("section", {
        className: "UserListPage-grid UserListPage-grid--loading"
      }, m(_common_components_LoadingIndicator__WEBPACK_IMPORTED_MODULE_5__["default"], {
        containerClassName: "LoadingIndicator--block",
        size: "large"
      }))];
    }
    var columns = this.columns().toArray();
    return [m("div", {
      className: "UserListPage-header"
    }, this.headerItems().toArray()), m("section", {
      className: (0,_common_utils_classList__WEBPACK_IMPORTED_MODULE_10__["default"])(['UserListPage-grid', this.isLoadingPage ? 'UserListPage-grid--loadingPage' : 'UserListPage-grid--loaded']),
      style: {
        '--columns': columns.length
      },
      role: "table"
      // +1 to account for header
      ,
      "aria-rowcount": this.pageData.length + 1,
      "aria-colcount": columns.length,
      "aria-live": "polite",
      "aria-busy": this.isLoadingPage ? 'true' : 'false'
    }, columns.map(function (column, colIndex) {
      return m("div", {
        className: "UserListPage-grid-header",
        role: "columnheader",
        "aria-colindex": colIndex + 1,
        "aria-rowindex": 1
      }, column.name);
    }), this.pageData.map(function (user, rowIndex) {
      return columns.map(function (col, colIndex) {
        var columnContent = col.content && col.content(user);
        return m("div", {
          className: (0,_common_utils_classList__WEBPACK_IMPORTED_MODULE_10__["default"])(['UserListPage-grid-rowItem', rowIndex % 2 > 0 && 'UserListPage-grid-rowItem--shaded']),
          "data-user-id": user.id(),
          "data-column-name": col.itemName,
          "aria-colindex": colIndex + 1
          // +2 to account for 0-based index, and for the header row
          ,
          "aria-rowindex": rowIndex + 2,
          role: "cell"
        }, columnContent || _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.invalid_column_content'));
      });
    }), this.isLoadingPage && m(_common_components_LoadingIndicator__WEBPACK_IMPORTED_MODULE_5__["default"], {
      size: "large"
    })), m("nav", {
      className: "UserListPage-gridPagination"
    }, m(_common_components_Button__WEBPACK_IMPORTED_MODULE_6__["default"], {
      disabled: this.pageNumber === 0,
      title: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.pagination.first_page_button'),
      onclick: this.goToPage.bind(this, 1),
      icon: "fas fa-step-backward",
      className: "Button Button--icon UserListPage-firstPageBtn"
    }), m(_common_components_Button__WEBPACK_IMPORTED_MODULE_6__["default"], {
      disabled: this.pageNumber === 0,
      title: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.pagination.back_button'),
      onclick: this.previousPage.bind(this),
      icon: "fas fa-chevron-left",
      className: "Button Button--icon UserListPage-backBtn"
    }), m("span", {
      className: "UserListPage-pageNumber"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.pagination.page_counter', {
      // https://technology.blog.gov.uk/2020/02/24/why-the-gov-uk-design-system-team-changed-the-input-type-for-numbers/
      current: m("input", {
        type: "text",
        inputmode: "numeric",
        pattern: "[0-9]*",
        value: this.loadingPageNumber + 1,
        "aria-label": (0,_common_utils_extractText__WEBPACK_IMPORTED_MODULE_11__["default"])(_admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.pagination.go_to_page_textbox_a11y_label')),
        autocomplete: "off",
        className: "FormControl UserListPage-pageNumberInput",
        onchange: function onchange(e) {
          var target = e.target;
          var pageNumber = parseInt(target.value);
          if (isNaN(pageNumber)) {
            // Invalid value, reset to current page
            target.value = (_this2.pageNumber + 1).toString();
            return;
          }
          if (pageNumber < 1) {
            // Lower constraint
            pageNumber = 1;
          } else if (pageNumber > _this2.getTotalPageCount()) {
            // Upper constraint
            pageNumber = _this2.getTotalPageCount();
          }
          target.value = pageNumber.toString();
          _this2.goToPage(pageNumber);
        }
      }),
      currentNum: this.pageNumber + 1,
      total: this.getTotalPageCount()
    })), m(_common_components_Button__WEBPACK_IMPORTED_MODULE_6__["default"], {
      disabled: !this.moreData,
      title: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.pagination.next_button'),
      onclick: this.nextPage.bind(this),
      icon: "fas fa-chevron-right",
      className: "Button Button--icon UserListPage-nextBtn"
    }), m(_common_components_Button__WEBPACK_IMPORTED_MODULE_6__["default"], {
      disabled: !this.moreData,
      title: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.pagination.last_page_button'),
      onclick: this.goToPage.bind(this, this.getTotalPageCount()),
      icon: "fas fa-step-forward",
      className: "Button Button--icon UserListPage-lastPageBtn"
    }))];
  };
  _proto.headerItems = function headerItems() {
    var _this3 = this;
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_9__["default"]();
    items.add('search', m("div", {
      className: "Search-input"
    }, m("input", {
      className: "FormControl SearchBar",
      type: "search",
      placeholder: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.search_placeholder'),
      oninput: function oninput(e) {
        var _e$target;
        _this3.isLoadingPage = true;
        _this3.query = e == null ? void 0 : (_e$target = e.target) == null ? void 0 : _e$target.value;
        _this3.throttledSearch();
      }
    })), 100);
    items.add('totalUsers', m("p", {
      "class": "UserListPage-totalUsers"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.total_users', {
      count: this.userCount
    })), 90);
    items.add('actions', m("div", {
      className: "UserListPage-actions"
    }, this.actionItems().toArray()), 80);
    return items;
  };
  _proto.actionItems = function actionItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_9__["default"]();
    items.add('createUser', m(_common_components_Button__WEBPACK_IMPORTED_MODULE_6__["default"], {
      className: "Button UserListPage-createUserBtn",
      icon: "fas fa-user-plus",
      onclick: function onclick() {
        return _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].modal.show(_CreateUserModal__WEBPACK_IMPORTED_MODULE_14__["default"]);
      }
    }, _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.create_user_button')), 100);
    return items;
  }

  /**
   * Build an item list of columns to show for each user.
   *
   * Each column in the list should be an object with keys `name` and `content`.
   *
   * `name` is a string that will be used as the column name.
   * `content` is a function with the User model passed as the first and only argument.
   *
   * See `UserListPage.tsx` for examples.
   */;
  _proto.columns = function columns() {
    var columns = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_9__["default"]();
    columns.add('id', {
      name: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.user_id.title'),
      content: function content(user) {
        var _user$id;
        return (_user$id = user.id()) != null ? _user$id : null;
      }
    }, 100);
    columns.add('username', {
      name: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.username.title'),
      content: function content(user) {
        var profileUrl = _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].forum.attribute('baseUrl') + "/u/" + user.slug();
        return m("a", {
          target: "_blank",
          href: profileUrl,
          title: (0,_common_utils_extractText__WEBPACK_IMPORTED_MODULE_11__["default"])(_admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.username.profile_link_tooltip', {
            username: user.username()
          }))
        }, user.username());
      }
    }, 90);
    columns.add('displayName', {
      name: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.display_name.title'),
      content: function content(user) {
        return user.displayName();
      }
    }, 85);
    columns.add('joinDate', {
      name: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.join_time.title'),
      content: function content(user) {
        return m("span", {
          className: "UserList-joinDate",
          title: user.joinTime()
        }, dayjs(user.joinTime()).format('LLL'));
      }
    }, 80);
    columns.add('groupBadges', {
      name: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.group_badges.title'),
      content: function content(user) {
        var badges = user.badges().toArray();
        if (badges.length) {
          return m("ul", {
            className: "DiscussionHero-badges badges"
          }, (0,_common_helpers_listItems__WEBPACK_IMPORTED_MODULE_8__["default"])(badges));
        } else {
          return _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.group_badges.no_badges');
        }
      }
    }, 70);
    columns.add('emailAddress', {
      name: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.email.title'),
      content: function content(user) {
        function setEmailVisibility(visible) {
          // Get needed jQuery element refs
          var emailContainer = $("[data-column-name=emailAddress][data-user-id=" + user.id() + "] .UserList-email");
          var emailAddress = emailContainer.find('.UserList-emailAddress');
          var emailToggleButton = emailContainer.find('.UserList-emailIconBtn');
          var emailToggleButtonIcon = emailToggleButton.find('.icon');
          emailToggleButton.attr('title', (0,_common_utils_extractText__WEBPACK_IMPORTED_MODULE_11__["default"])(visible ? _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.email.visibility_hide') : _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.email.visibility_show')));
          emailAddress.attr('aria-hidden', visible ? 'false' : 'true');
          if (visible) {
            emailToggleButtonIcon.addClass('fa-eye');
            emailToggleButtonIcon.removeClass('fa-eye-slash');
          } else {
            emailToggleButtonIcon.removeClass('fa-eye');
            emailToggleButtonIcon.addClass('fa-eye-slash');
          }

          // Need the string interpolation to prevent TS error.
          emailContainer.attr('data-email-shown', "" + visible);
        }
        function toggleEmailVisibility() {
          var emailContainer = $("[data-column-name=emailAddress][data-user-id=" + user.id() + "] .UserList-email");
          var emailShown = emailContainer.attr('data-email-shown') === 'true';
          if (emailShown) {
            setEmailVisibility(false);
          } else {
            setEmailVisibility(true);
          }
        }
        return m("div", {
          className: "UserList-email",
          key: user.id(),
          "data-email-shown": "false"
        }, m("span", {
          className: "UserList-emailAddress",
          "aria-hidden": "true",
          onclick: function onclick() {
            return setEmailVisibility(true);
          }
        }, user.email()), m("button", {
          onclick: toggleEmailVisibility,
          className: "Button Button--text UserList-emailIconBtn",
          title: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.email.visibility_show')
        }, (0,_common_helpers_icon__WEBPACK_IMPORTED_MODULE_7__["default"])('far fa-eye-slash fa-fw', {
          className: 'icon'
        })));
      }
    }, 70);
    columns.add('editUser', {
      name: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.edit_user.title'),
      content: function content(user) {
        return m(_common_components_Button__WEBPACK_IMPORTED_MODULE_6__["default"], {
          className: "Button UserList-editModalBtn",
          title: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.edit_user.tooltip', {
            username: user.username()
          }),
          onclick: function onclick() {
            return _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].modal.show(_common_components_EditUserModal__WEBPACK_IMPORTED_MODULE_4__["default"], {
              user: user
            });
          }
        }, _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.grid.columns.edit_user.button'));
      }
    }, -90);
    return columns;
  };
  _proto.headerInfo = function headerInfo() {
    return {
      className: 'UserListPage',
      icon: 'fas fa-users',
      title: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.title'),
      description: _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.admin.users.description')
    };
  }

  /**
   * Asynchronously fetch the next set of users to be rendered.
   *
   * Returns an array of Users, plus the raw API payload.
   *
   * Uses the `this.numPerPage` as the response limit, and automatically calculates the offset required from `pageNumber`.
   *
   * @param pageNumber The **zero-based** page number to load and display
   */;
  _proto.loadPage =
  /*#__PURE__*/
  function () {
    var _loadPage = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee(pageNumber) {
      var _this4 = this;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              if (pageNumber < 0) pageNumber = 0;
              this.loadingPageNumber = pageNumber;
              this.setPageNumberInUrl(pageNumber + 1);
              _admin_app__WEBPACK_IMPORTED_MODULE_3__["default"].store.find('users', {
                filter: {
                  q: this.query
                },
                page: {
                  limit: this.numPerPage,
                  offset: pageNumber * this.numPerPage
                }
              }).then(function (apiData) {
                var _apiData$payload, _apiData$payload$link;
                // Next link won't be present if there's no more data
                _this4.moreData = !!((_apiData$payload = apiData.payload) != null && (_apiData$payload$link = _apiData$payload.links) != null && _apiData$payload$link.next);
                var data = apiData;

                // @ts-ignore
                delete data.payload;
                var lastPage = _this4.getTotalPageCount();
                if (pageNumber > lastPage) {
                  _this4.loadPage(lastPage - 1);
                } else {
                  _this4.pageData = data;
                  _this4.pageNumber = pageNumber;
                  _this4.loadingPageNumber = pageNumber;
                  _this4.isLoadingPage = false;
                }
                m.redraw();
              })["catch"](function (err) {
                console.error(err);
                _this4.pageData = [];
              });
            case 4:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));
    function loadPage(_x) {
      return _loadPage.apply(this, arguments);
    }
    return loadPage;
  }();
  _proto.nextPage = function nextPage() {
    this.isLoadingPage = true;
    this.loadPage(this.pageNumber + 1);
  };
  _proto.previousPage = function previousPage() {
    this.isLoadingPage = true;
    this.loadPage(this.pageNumber - 1);
  }

  /**
   * @param page The **1-based** page number
   */;
  _proto.goToPage = function goToPage(page) {
    this.isLoadingPage = true;
    this.loadPage(page - 1);
  };
  _proto.setPageNumberInUrl = function setPageNumberInUrl(pageNumber) {
    var _search$;
    var search = window.location.hash.split('?', 2);
    var params = new URLSearchParams((_search$ = search == null ? void 0 : search[1]) != null ? _search$ : '');
    params.set('page', "" + pageNumber);
    window.location.hash = (search == null ? void 0 : search[0]) + '?' + params.toString();
  };
  return UserListPage;
}(_AdminPage__WEBPACK_IMPORTED_MODULE_12__["default"]);


/***/ }),

/***/ "./src/admin/index.ts":
/*!****************************!*\
  !*** ./src/admin/index.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "app": () => (/* reexport safe */ _app__WEBPACK_IMPORTED_MODULE_0__["default"]),
/* harmony export */   "compat": () => (/* binding */ compat)
/* harmony export */ });
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app */ "./src/admin/app.ts");
/* harmony import */ var _compat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./compat */ "./src/admin/compat.ts");
/* harmony import */ var _common_utils_proxifyCompat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/utils/proxifyCompat */ "./src/common/utils/proxifyCompat.ts");



// Export public API

// Export compat API



// @ts-expect-error The `app` instance needs to be available on compat.
_compat__WEBPACK_IMPORTED_MODULE_1__["default"].app = _app__WEBPACK_IMPORTED_MODULE_0__["default"];
var compat = (0,_common_utils_proxifyCompat__WEBPACK_IMPORTED_MODULE_2__["default"])(_compat__WEBPACK_IMPORTED_MODULE_1__["default"], 'admin');

/***/ }),

/***/ "./src/admin/resolvers/ExtensionPageResolver.ts":
/*!******************************************************!*\
  !*** ./src/admin/resolvers/ExtensionPageResolver.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ExtensionPageResolver)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_resolvers_DefaultResolver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/resolvers/DefaultResolver */ "./src/common/resolvers/DefaultResolver.ts");



/**
 * A custom route resolver for ExtensionPage that generates handles routes
 * to default extension pages or a page provided by an extension.
 */
var ExtensionPageResolver = /*#__PURE__*/function (_DefaultResolver) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(ExtensionPageResolver, _DefaultResolver);
  function ExtensionPageResolver() {
    return _DefaultResolver.apply(this, arguments) || this;
  }
  var _proto = ExtensionPageResolver.prototype;
  _proto.onmatch = function onmatch(args, requestedPath, route) {
    var extensionPage = _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionData.getPage(args.id);
    if (extensionPage) {
      return extensionPage;
    }
    return _DefaultResolver.prototype.onmatch.call(this, args, requestedPath, route);
  };
  return ExtensionPageResolver;
}(_common_resolvers_DefaultResolver__WEBPACK_IMPORTED_MODULE_2__["default"]);
ExtensionPageResolver.extension = null;


/***/ }),

/***/ "./src/admin/routes.ts":
/*!*****************************!*\
  !*** ./src/admin/routes.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _components_DashboardPage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/DashboardPage */ "./src/admin/components/DashboardPage.tsx");
/* harmony import */ var _components_BasicsPage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/BasicsPage */ "./src/admin/components/BasicsPage.tsx");
/* harmony import */ var _components_PermissionsPage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/PermissionsPage */ "./src/admin/components/PermissionsPage.tsx");
/* harmony import */ var _components_AppearancePage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/AppearancePage */ "./src/admin/components/AppearancePage.tsx");
/* harmony import */ var _components_MailPage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/MailPage */ "./src/admin/components/MailPage.tsx");
/* harmony import */ var _components_UserListPage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/UserListPage */ "./src/admin/components/UserListPage.tsx");
/* harmony import */ var _components_ExtensionPage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/ExtensionPage */ "./src/admin/components/ExtensionPage.tsx");
/* harmony import */ var _resolvers_ExtensionPageResolver__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./resolvers/ExtensionPageResolver */ "./src/admin/resolvers/ExtensionPageResolver.ts");









/**
 * Helper functions to generate URLs to admin pages.
 */

/**
 * The `routes` initializer defines the forum app's routes.
 */
/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(app) {
  app.routes = {
    dashboard: {
      path: '/',
      component: _components_DashboardPage__WEBPACK_IMPORTED_MODULE_0__["default"]
    },
    basics: {
      path: '/basics',
      component: _components_BasicsPage__WEBPACK_IMPORTED_MODULE_1__["default"]
    },
    permissions: {
      path: '/permissions',
      component: _components_PermissionsPage__WEBPACK_IMPORTED_MODULE_2__["default"]
    },
    appearance: {
      path: '/appearance',
      component: _components_AppearancePage__WEBPACK_IMPORTED_MODULE_3__["default"]
    },
    mail: {
      path: '/mail',
      component: _components_MailPage__WEBPACK_IMPORTED_MODULE_4__["default"]
    },
    users: {
      path: '/users',
      component: _components_UserListPage__WEBPACK_IMPORTED_MODULE_5__["default"]
    },
    extension: {
      path: '/extension/:id',
      component: _components_ExtensionPage__WEBPACK_IMPORTED_MODULE_6__["default"],
      resolverClass: _resolvers_ExtensionPageResolver__WEBPACK_IMPORTED_MODULE_7__["default"]
    }
  };
}

/***/ }),

/***/ "./src/admin/utils/ExtensionData.ts":
/*!******************************************!*\
  !*** ./src/admin/utils/ExtensionData.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ExtensionData)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");


var noActiveExtensionErrorMessage = 'You must select an active extension via `.for()` before using extensionData.';
var ExtensionData = /*#__PURE__*/function () {
  function ExtensionData() {
    this.state = {
      currentExtension: null,
      data: {}
    };
  }
  var _proto = ExtensionData.prototype;
  /**
   * This function simply takes the extension id
   *
   * @example
   * app.extensionData.for('flarum-tags')
   *
   * flarum/flags -> flarum-flags | acme/extension -> acme-extension
   */
  _proto["for"] = function _for(extension) {
    this.state.currentExtension = extension;
    this.state.data[extension] = this.state.data[extension] || {};
    return this;
  }

  /**
   * This function registers your settings with Flarum
   *
   * It takes either a settings object or a callback.
   *
   * @example
   *
   * .registerSetting({
   *   setting: 'flarum-flags.guidelines_url',
   *   type: 'text', // This will be inputted into the input tag for the setting (text/number/etc)
   *   label: app.translator.trans('flarum-flags.admin.settings.guidelines_url_label')
   * }, 15) // priority is optional (ItemList)
   */;
  _proto.registerSetting = function registerSetting(content, priority) {
    if (priority === void 0) {
      priority = 0;
    }
    if (this.state.currentExtension === null) {
      throw new Error(noActiveExtensionErrorMessage);
    }
    var tmpContent = content;

    // Callbacks can be passed in instead of settings to display custom content.
    // By default, they will be added with the `null` key, since they don't have a `.setting` attr.
    // To support multiple such items for one extension, we assign a random ID.
    // 36 is arbitrary length, but makes collisions very unlikely.
    if (tmpContent instanceof Function) {
      tmpContent.setting = Math.random().toString(36);
    }
    var settings = this.state.data[this.state.currentExtension].settings || new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_1__["default"]();
    settings.add(tmpContent.setting, tmpContent, priority);
    this.state.data[this.state.currentExtension].settings = settings;
    return this;
  }

  /**
   * This function registers your permission with Flarum
   *
   * @example
   *
   * .registerPermission('permissions', {
   *     icon: 'fas fa-flag',
   *     label: app.translator.trans('flarum-flags.admin.permissions.view_flags_label'),
   *     permission: 'discussion.viewFlags'
   * }, 'moderate', 65)
   */;
  _proto.registerPermission = function registerPermission(content, permissionType, priority) {
    var _extends2;
    if (priority === void 0) {
      priority = 0;
    }
    if (this.state.currentExtension === null) {
      throw new Error(noActiveExtensionErrorMessage);
    }
    var permissions = this.state.data[this.state.currentExtension].permissions || {};
    var permissionsForType = permissions[permissionType] || new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_1__["default"]();
    permissionsForType.add(content.permission, content, priority);
    this.state.data[this.state.currentExtension].permissions = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, permissions, (_extends2 = {}, _extends2[permissionType] = permissionsForType, _extends2));
    return this;
  }

  /**
   * Replace the default extension page with a custom component.
   * This component would typically extend ExtensionPage
   */;
  _proto.registerPage = function registerPage(component) {
    if (this.state.currentExtension === null) {
      throw new Error(noActiveExtensionErrorMessage);
    }
    this.state.data[this.state.currentExtension].page = component;
    return this;
  }

  /**
   * Get an extension's registered settings
   */;
  _proto.getSettings = function getSettings(extensionId) {
    var _this$state$data$exte, _this$state$data$exte2;
    return (_this$state$data$exte = this.state.data[extensionId]) == null ? void 0 : (_this$state$data$exte2 = _this$state$data$exte.settings) == null ? void 0 : _this$state$data$exte2.toArray();
  }

  /**
   * Get an ItemList of all extensions' registered permissions
   */;
  _proto.getAllExtensionPermissions = function getAllExtensionPermissions(type) {
    var _this = this;
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_1__["default"]();
    Object.keys(this.state.data).map(function (extension) {
      var _this$state$data$exte3, _this$state$data$exte4;
      var extPerms = (_this$state$data$exte3 = _this.state.data[extension]) == null ? void 0 : (_this$state$data$exte4 = _this$state$data$exte3.permissions) == null ? void 0 : _this$state$data$exte4[type];
      if (_this.extensionHasPermissions(extension) && extPerms !== undefined) {
        items.merge(extPerms);
      }
    });
    return items;
  }

  /**
   * Get a singular extension's registered permissions
   */;
  _proto.getExtensionPermissions = function getExtensionPermissions(extension, type) {
    var _this$state$data$exte5, _this$state$data$exte6;
    var extPerms = (_this$state$data$exte5 = this.state.data[extension]) == null ? void 0 : (_this$state$data$exte6 = _this$state$data$exte5.permissions) == null ? void 0 : _this$state$data$exte6[type];
    if (this.extensionHasPermissions(extension) && extPerms != null) {
      return extPerms;
    }
    return new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_1__["default"]();
  }

  /**
   * Checks whether a given extension has registered permissions.
   */;
  _proto.extensionHasPermissions = function extensionHasPermissions(extension) {
    var _this$state$data$exte7;
    return ((_this$state$data$exte7 = this.state.data[extension]) == null ? void 0 : _this$state$data$exte7.permissions) !== undefined;
  }

  /**
   * Returns an extension's custom page component if it exists.
   */;
  _proto.getPage = function getPage(extension) {
    var _this$state$data$exte8;
    return (_this$state$data$exte8 = this.state.data[extension]) == null ? void 0 : _this$state$data$exte8.page;
  };
  return ExtensionData;
}();


/***/ }),

/***/ "./src/admin/utils/generateElementId.ts":
/*!**********************************************!*\
  !*** ./src/admin/utils/generateElementId.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* reexport safe */ nanoid__WEBPACK_IMPORTED_MODULE_0__.nanoid)
/* harmony export */ });
/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ "../../../node_modules/nanoid/index.browser.js");


/***/ }),

/***/ "./src/common/Application.tsx":
/*!************************************!*\
  !*** ./src/common/Application.tsx ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Application)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "../../../node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/app */ "./src/common/app.ts");
/* harmony import */ var _utils_ItemList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _components_ModalManager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/ModalManager */ "./src/common/components/ModalManager.tsx");
/* harmony import */ var _components_AlertManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/AlertManager */ "./src/common/components/AlertManager.tsx");
/* harmony import */ var _components_RequestErrorModal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/RequestErrorModal */ "./src/common/components/RequestErrorModal.tsx");
/* harmony import */ var _Translator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Translator */ "./src/common/Translator.tsx");
/* harmony import */ var _Store__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Store */ "./src/common/Store.ts");
/* harmony import */ var _Session__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Session */ "./src/common/Session.ts");
/* harmony import */ var _utils_extract__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./utils/extract */ "./src/common/utils/extract.ts");
/* harmony import */ var _utils_extractText__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./utils/extractText */ "./src/common/utils/extractText.ts");
/* harmony import */ var _utils_Drawer__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./utils/Drawer */ "./src/common/utils/Drawer.js");
/* harmony import */ var _utils_mapRoutes__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./utils/mapRoutes */ "./src/common/utils/mapRoutes.ts");
/* harmony import */ var _utils_RequestError__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils/RequestError */ "./src/common/utils/RequestError.ts");
/* harmony import */ var _utils_ScrollListener__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./utils/ScrollListener */ "./src/common/utils/ScrollListener.js");
/* harmony import */ var _utils_liveHumanTimes__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./utils/liveHumanTimes */ "./src/common/utils/liveHumanTimes.ts");
/* harmony import */ var _extend_ts__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./extend.ts */ "./src/common/extend.ts");
/* harmony import */ var _models_Forum__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./models/Forum */ "./src/common/models/Forum.ts");
/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./models/User */ "./src/common/models/User.tsx");
/* harmony import */ var _models_Discussion__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./models/Discussion */ "./src/common/models/Discussion.tsx");
/* harmony import */ var _models_Post__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./models/Post */ "./src/common/models/Post.ts");
/* harmony import */ var _models_Group__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./models/Group */ "./src/common/models/Group.ts");
/* harmony import */ var _models_Notification__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./models/Notification */ "./src/common/models/Notification.ts");
/* harmony import */ var _states_PageState__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./states/PageState */ "./src/common/states/PageState.js");
/* harmony import */ var _states_ModalManagerState__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./states/ModalManagerState */ "./src/common/states/ModalManagerState.ts");
/* harmony import */ var _states_AlertManagerState__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./states/AlertManagerState */ "./src/common/states/AlertManagerState.ts");
/* harmony import */ var _helpers_fireApplicationError__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./helpers/fireApplicationError */ "./src/common/helpers/fireApplicationError.ts");
/* harmony import */ var _models_AccessToken__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./models/AccessToken */ "./src/common/models/AccessToken.ts");



var _excluded = ["background", "deserialize", "extract", "modifyText"];
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }
















// @ts-expect-error We need to explicitly use the prefix to distinguish between the extend folder.












/**
 * The `App` class provides a container for an application, as well as various
 * utilities for the rest of the app to use.
 */
var Application = /*#__PURE__*/function () {
  function Application() {
    this.forum = void 0;
    this.routes = {};
    this.initializers = new _utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
    this.session = void 0;
    this.translator = new _Translator__WEBPACK_IMPORTED_MODULE_9__["default"]();
    this.store = new _Store__WEBPACK_IMPORTED_MODULE_10__["default"]({
      'access-tokens': _models_AccessToken__WEBPACK_IMPORTED_MODULE_30__["default"],
      forums: _models_Forum__WEBPACK_IMPORTED_MODULE_20__["default"],
      users: _models_User__WEBPACK_IMPORTED_MODULE_21__["default"],
      discussions: _models_Discussion__WEBPACK_IMPORTED_MODULE_22__["default"],
      posts: _models_Post__WEBPACK_IMPORTED_MODULE_23__["default"],
      groups: _models_Group__WEBPACK_IMPORTED_MODULE_24__["default"],
      notifications: _models_Notification__WEBPACK_IMPORTED_MODULE_25__["default"]
    });
    this.cache = {};
    this.booted = false;
    this.current = new _states_PageState__WEBPACK_IMPORTED_MODULE_26__["default"](null);
    this.previous = new _states_PageState__WEBPACK_IMPORTED_MODULE_26__["default"](null);
    this.modal = new _states_ModalManagerState__WEBPACK_IMPORTED_MODULE_27__["default"]();
    this.alerts = new _states_AlertManagerState__WEBPACK_IMPORTED_MODULE_28__["default"]();
    this.drawer = void 0;
    this.history = null;
    this.pane = null;
    this.data = void 0;
    this._title = '';
    this._titleCount = 0;
    this.requestErrorAlert = null;
    this.initialRoute = void 0;
  }
  var _proto = Application.prototype;
  _proto.load = function load(payload) {
    this.data = payload;
    this.translator.setLocale(payload.locale);
  };
  _proto.boot = function boot() {
    var _this = this,
      _this$store$getById;
    var caughtInitializationErrors = [];
    this.initializers.toArray().forEach(function (initializer) {
      try {
        initializer(_this);
      } catch (e) {
        var extension = initializer.itemName.includes('/') ? initializer.itemName.replace(/(\/flarum-ext-)|(\/flarum-)/g, '-') : initializer.itemName;
        caughtInitializationErrors.push(function () {
          return (0,_helpers_fireApplicationError__WEBPACK_IMPORTED_MODULE_29__["default"])((0,_utils_extractText__WEBPACK_IMPORTED_MODULE_13__["default"])(_common_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.lib.error.extension_initialiation_failed_message', {
            extension: extension
          })), extension + " failed to initialize", e);
        });
      }
    });
    this.store.pushPayload({
      data: this.data.resources
    });
    this.forum = this.store.getById('forums', '1');
    this.session = new _Session__WEBPACK_IMPORTED_MODULE_11__["default"]((_this$store$getById = this.store.getById('users', String(this.data.session.userId))) != null ? _this$store$getById : null, this.data.session.csrfToken);
    this.mount();
    this.initialRoute = window.location.href;
    caughtInitializationErrors.forEach(function (handler) {
      return handler();
    });
  };
  _proto.bootExtensions = function bootExtensions(extensions) {
    var _this2 = this;
    Object.keys(extensions).forEach(function (name) {
      var extension = extensions[name];

      // If an extension doesn't define extenders, there's nothing more to do here.
      if (!extension.extend) return;
      var extenders = extension.extend.flat(Infinity);
      for (var _iterator = _createForOfIteratorHelperLoose(extenders), _step; !(_step = _iterator()).done;) {
        var extender = _step.value;
        extender.extend(_this2, {
          name: name,
          exports: extension
        });
      }
    });
  };
  _proto.mount = function mount(basePath) {
    var _this3 = this;
    if (basePath === void 0) {
      basePath = '';
    }
    // An object with a callable view property is used in order to pass arguments to the component; see https://mithril.js.org/mount.html
    m.mount(document.getElementById('modal'), {
      view: function view() {
        return m(_components_ModalManager__WEBPACK_IMPORTED_MODULE_6__["default"], {
          state: _this3.modal
        });
      }
    });
    m.mount(document.getElementById('alerts'), {
      view: function view() {
        return m(_components_AlertManager__WEBPACK_IMPORTED_MODULE_7__["default"], {
          state: _this3.alerts
        });
      }
    });
    this.drawer = new _utils_Drawer__WEBPACK_IMPORTED_MODULE_14__["default"]();
    m.route(document.getElementById('content'), basePath + '/', (0,_utils_mapRoutes__WEBPACK_IMPORTED_MODULE_15__["default"])(this.routes, basePath));
    var appEl = document.getElementById('app');
    var appHeaderEl = document.querySelector('.App-header');

    // Add a class to the body which indicates that the page has been scrolled
    // down. When this happens, we'll add classes to the header and app body
    // which will set the navbar's position to fixed. We don't want to always
    // have it fixed, as that could overlap with custom headers.
    var scrollListener = new _utils_ScrollListener__WEBPACK_IMPORTED_MODULE_17__["default"](function (top) {
      var offset = appEl.getBoundingClientRect().top + document.body.scrollTop;
      appEl.classList.toggle('affix', top >= offset);
      appEl.classList.toggle('scrolled', top > offset);
      appHeaderEl.classList.toggle('navbar-fixed-top', top >= offset);
    });
    scrollListener.start();
    scrollListener.update();
    document.body.classList.add('ontouchstart' in window ? 'touch' : 'no-touch');
    (0,_utils_liveHumanTimes__WEBPACK_IMPORTED_MODULE_18__["default"])();
  }

  /**
   * Get the API response document that has been preloaded into the application.
   */;
  _proto.preloadedApiDocument = function preloadedApiDocument() {
    // If the URL has changed, the preloaded Api document is invalid.
    if (this.data.apiDocument && window.location.href === this.initialRoute) {
      var results = (0,_Store__WEBPACK_IMPORTED_MODULE_10__.payloadIsPlural)(this.data.apiDocument) ? this.store.pushPayload(this.data.apiDocument) : this.store.pushPayload(this.data.apiDocument);
      this.data.apiDocument = null;
      return results;
    }
    return null;
  }

  /**
   * Determine the current screen mode, based on our media queries.
   */;
  _proto.screen = function screen() {
    var styles = getComputedStyle(document.documentElement);
    return styles.getPropertyValue('--flarum-screen');
  }

  /**
   * Set the `<title>` of the page.
   *
   * @param title New page title
   */;
  _proto.setTitle = function setTitle(title) {
    this.title = title;
    this.updateTitle();
  }

  /**
   * Set a number to display in the `<title>` of the page.
   *
   * @param count Number to display in title
   */;
  _proto.setTitleCount = function setTitleCount(count) {
    this.titleCount = count;
    this.updateTitle();
  };
  _proto.updateTitle = function updateTitle() {
    var count = this.titleCount ? "(" + this.titleCount + ") " : '';
    var onHomepage = m.route.get() === this.forum.attribute('basePath') + '/';
    var params = {
      pageTitle: this.title,
      forumName: this.forum.attribute('title'),
      // Until we add page numbers to the frontend, this is constant at 1
      // so that the page number portion doesn't show up in the URL.
      pageNumber: 1
    };
    var title = onHomepage || !this.title ? (0,_utils_extractText__WEBPACK_IMPORTED_MODULE_13__["default"])(_common_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.lib.meta_titles.without_page_title', params)) : (0,_utils_extractText__WEBPACK_IMPORTED_MODULE_13__["default"])(_common_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.lib.meta_titles.with_page_title', params));
    title = count + title;

    // We pass the title through a DOMParser to allow HTML entities
    // to be rendered correctly, while still preventing XSS attacks
    // from user input by using a script-disabled environment.
    // https://github.com/flarum/framework/issues/3514
    // https://github.com/flarum/framework/pull/3684
    // This is only a temporary solution for 1.x,
    // and the actual source of the issue will be fixed in 2.x
    // Actual source of the issue: https://github.com/flarum/framework/issues/3685
    var parser = new DOMParser();
    document.title = parser.parseFromString(title, 'text/html').body.innerText;
  };
  _proto.transformRequestOptions = function transformRequestOptions(flarumOptions) {
    var _this4 = this;
    var _flarumOptions = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, flarumOptions),
      background = _flarumOptions.background,
      deserialize = _flarumOptions.deserialize,
      extract = _flarumOptions.extract,
      modifyText = _flarumOptions.modifyText,
      tmpOptions = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(_flarumOptions, _excluded);

    // Unless specified otherwise, requests should run asynchronously in the
    // background, so that they don't prevent redraws from occurring.
    var defaultBackground = true;

    // When we deserialize JSON data, if for some reason the server has provided
    // a dud response, we don't want the application to crash. We'll show an
    // error message to the user instead.

    var defaultDeserialize = function defaultDeserialize(response) {
      return response;
    };

    // When extracting the data from the response, we can check the server
    // response code and show an error message to the user if something's gone
    // awry.
    var originalExtract = modifyText || extract;
    var options = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
      background: background != null ? background : defaultBackground,
      deserialize: deserialize != null ? deserialize : defaultDeserialize
    }, tmpOptions);
    (0,_extend_ts__WEBPACK_IMPORTED_MODULE_19__.extend)(options, 'config', function (_, xhr) {
      xhr.setRequestHeader('X-CSRF-Token', _this4.session.csrfToken);
    });

    // If the method is something like PATCH or DELETE, which not all servers
    // and clients support, then we'll send it as a POST request with the
    // intended method specified in the X-HTTP-Method-Override header.
    if (options.method && !['GET', 'POST'].includes(options.method)) {
      var method = options.method;
      (0,_extend_ts__WEBPACK_IMPORTED_MODULE_19__.extend)(options, 'config', function (_, xhr) {
        xhr.setRequestHeader('X-HTTP-Method-Override', method);
      });
      options.method = 'POST';
    }
    options.extract = function (xhr) {
      var responseText;
      if (originalExtract) {
        responseText = originalExtract(xhr.responseText);
      } else {
        responseText = xhr.responseText;
      }
      var status = xhr.status;
      if (status < 200 || status > 299) {
        throw new _utils_RequestError__WEBPACK_IMPORTED_MODULE_16__["default"](status, "" + responseText, options, xhr);
      }
      if (xhr.getResponseHeader) {
        var csrfToken = xhr.getResponseHeader('X-CSRF-Token');
        if (csrfToken) _common_app__WEBPACK_IMPORTED_MODULE_3__["default"].session.csrfToken = csrfToken;
      }
      try {
        if (responseText === '') {
          return null;
        }
        return JSON.parse(responseText);
      } catch (e) {
        throw new _utils_RequestError__WEBPACK_IMPORTED_MODULE_16__["default"](500, "" + responseText, options, xhr);
      }
    };
    return options;
  }

  /**
   * Make an AJAX request, handling any low-level errors that may occur.
   *
   * @see https://mithril.js.org/request.html
   */;
  _proto.request = function request(originalOptions) {
    var _this5 = this;
    var options = this.transformRequestOptions(originalOptions);
    if (this.requestErrorAlert) this.alerts.dismiss(this.requestErrorAlert);
    return m.request(options)["catch"](function (e) {
      return _this5.requestErrorCatch(e, originalOptions.errorHandler);
    });
  }

  /**
   * By default, show an error alert, and log the error to the console.
   */;
  _proto.requestErrorCatch = function requestErrorCatch(error, customErrorHandler) {
    var _error$response$error, _error$response, _error$response$error2;
    // the details property is decoded to transform escaped characters such as '\n'
    var formattedErrors = (_error$response$error = (_error$response = error.response) == null ? void 0 : (_error$response$error2 = _error$response.errors) == null ? void 0 : _error$response$error2.map(function (e) {
      var _e$detail;
      return decodeURI((_e$detail = e.detail) != null ? _e$detail : '');
    })) != null ? _error$response$error : [];
    var content;
    switch (error.status) {
      case 422:
        content = formattedErrors.map(function (detail) {
          return [detail, m("br", null)];
        }).flat().slice(0, -1);
        break;
      case 401:
      case 403:
        content = _common_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.lib.error.permission_denied_message');
        break;
      case 404:
      case 410:
        content = _common_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.lib.error.not_found_message');
        break;
      case 413:
        content = _common_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.lib.error.payload_too_large_message');
        break;
      case 429:
        content = _common_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.lib.error.rate_limit_exceeded_message');
        break;
      default:
        if (this.requestWasCrossOrigin(error)) {
          content = _common_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.lib.error.generic_cross_origin_message');
        } else {
          content = _common_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.lib.error.generic_message');
        }
    }
    var isDebug = _common_app__WEBPACK_IMPORTED_MODULE_3__["default"].forum.attribute('debug');
    error.alert = {
      type: 'error',
      content: content,
      controls: isDebug && [m(_components_Button__WEBPACK_IMPORTED_MODULE_5__["default"], {
        className: "Button Button--link",
        onclick: this.showDebug.bind(this, error, formattedErrors)
      }, _common_app__WEBPACK_IMPORTED_MODULE_3__["default"].translator.trans('core.lib.debug_button'))]
    };
    if (customErrorHandler) {
      customErrorHandler(error);
    } else {
      this.requestErrorDefaultHandler(error, isDebug, formattedErrors);
    }
    return Promise.reject(error);
  }

  /**
   * Used to modify the error message shown on the page to help troubleshooting.
   * While not certain, a failing cross-origin request likely indicates a missing redirect to Flarum canonical URL.
   * Because XHR errors do not expose CORS information, we can only compare the requested URL origin to the page origin.
   *
   * @param error
   * @protected
   */;
  _proto.requestWasCrossOrigin = function requestWasCrossOrigin(error) {
    return new URL(error.options.url, document.baseURI).origin !== window.location.origin;
  };
  _proto.requestErrorDefaultHandler = function requestErrorDefaultHandler(e, isDebug, formattedErrors) {
    if (e instanceof _utils_RequestError__WEBPACK_IMPORTED_MODULE_16__["default"]) {
      if (isDebug && e.xhr) {
        var _e$options = e.options,
          method = _e$options.method,
          url = _e$options.url;
        var _e$xhr$status = e.xhr.status,
          status = _e$xhr$status === void 0 ? '' : _e$xhr$status;
        console.group(method + " " + url + " " + status);
        if (formattedErrors.length) {
          var _console;
          (_console = console).error.apply(_console, formattedErrors);
        } else {
          console.error(e);
        }
        console.groupEnd();
      }
      if (e.alert) {
        this.requestErrorAlert = this.alerts.show(e.alert, e.alert.content);
      }
    } else {
      throw e;
    }
  };
  _proto.showDebug = function showDebug(error, formattedError) {
    if (this.requestErrorAlert !== null) this.alerts.dismiss(this.requestErrorAlert);
    this.modal.show(_components_RequestErrorModal__WEBPACK_IMPORTED_MODULE_8__["default"], {
      error: error,
      formattedError: formattedError
    });
  }

  /**
   * Construct a URL to the route with the given name.
   */;
  _proto.route = function route(name, params) {
    if (params === void 0) {
      params = {};
    }
    var route = this.routes[name];
    if (!route) throw new Error("Route '" + name + "' does not exist");
    var url = route.path.replace(/:([^\/]+)/g, function (m, key) {
      return "" + (0,_utils_extract__WEBPACK_IMPORTED_MODULE_12__["default"])(params, key);
    });

    // Remove falsy values in params to avoid having urls like '/?sort&q'
    for (var _key in params) {
      if (params.hasOwnProperty(_key) && !params[_key]) delete params[_key];
    }
    var queryString = m.buildQueryString(params);
    var prefix = m.route.prefix === '' ? this.forum.attribute('basePath') : '';
    return prefix + url + (queryString ? '?' + queryString : '');
  };
  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(Application, [{
    key: "title",
    get: function get() {
      return this._title;
    },
    set: function set(val) {
      this._title = val;
    }
  }, {
    key: "titleCount",
    get: function get() {
      return this._titleCount;
    }

    /**
     * The key for an Alert that was shown as a result of an AJAX request error.
     * If present, it will be dismissed on the next successful request.
     */,
    set: function set(val) {
      this._titleCount = val;
    }
  }]);
  return Application;
}();


/***/ }),

/***/ "./src/common/Component.ts":
/*!*********************************!*\
  !*** ./src/common/Component.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Component)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");

/**
 * The `Component` class defines a user interface 'building block'. A component
 * generates a virtual DOM to be rendered on each redraw.
 *
 * Essentially, this is a wrapper for Mithril's components that adds several useful features:
 *
 *  - In the `oninit` and `onbeforeupdate` lifecycle hooks, we store vnode attrs in `this.attrs.
 *    This allows us to use attrs across components without having to pass the vnode to every single
 *    method.
 *  - The static `initAttrs` method allows a convenient way to provide defaults (or to otherwise modify)
 *    the attrs that have been passed into a component.
 *  - When the component is created in the DOM, we store its DOM element under `this.element`; this lets
 *    us use jQuery to modify child DOM state from internal methods via the `this.$()` method.
 *  - A convenience `component` method, which serves as an alternative to hyperscript and JSX.
 *
 * As with other Mithril components, components extending Component can be initialized
 * and nested using JSX, hyperscript, or a combination of both. The `component` method can also
 * be used.
 *
 * @example
 * return m('div', <MyComponent foo="bar"><p>Hello World</p></MyComponent>);
 *
 * @example
 * return m('div', MyComponent.component({foo: 'bar'), m('p', 'Hello World!'));
 *
 * @see https://mithril.js.org/components.html
 */
var Component = /*#__PURE__*/function () {
  function Component() {
    this.element = void 0;
    this.attrs = void 0;
    this.state = void 0;
  }
  var _proto = Component.prototype;
  /**
   * @inheritdoc
   */
  _proto.oninit = function oninit(vnode) {
    this.setAttrs(vnode.attrs);
  }

  /**
   * @inheritdoc
   */;
  _proto.oncreate = function oncreate(vnode) {
    this.element = vnode.dom;
  }

  /**
   * @inheritdoc
   */;
  _proto.onbeforeupdate = function onbeforeupdate(vnode) {
    this.setAttrs(vnode.attrs);
  }

  /**
   * @inheritdoc
   */;
  _proto.onupdate = function onupdate(vnode) {}

  /**
   * @inheritdoc
   */;
  _proto.onbeforeremove = function onbeforeremove(vnode) {}

  /**
   * @inheritdoc
   */;
  _proto.onremove = function onremove(vnode) {}

  /**
   * Returns a jQuery object for this component's element. If you pass in a
   * selector string, this method will return a jQuery object, using the current
   * element as its buffer.
   *
   * For example, calling `component.$('li')` will return a jQuery object
   * containing all of the `li` elements inside the DOM element of this
   * component.
   *
   * @param [selector] a jQuery-compatible selector string
   * @returns the jQuery object for the DOM node
   * @final
   */;
  _proto.$ = function (_$) {
    function $(_x) {
      return _$.apply(this, arguments);
    }
    $.toString = function () {
      return _$.toString();
    };
    return $;
  }(function (selector) {
    var $element = $(this.element);
    return selector ? $element.find(selector) : $element;
  }

  /**
   * Convenience method to attach a component without JSX.
   * Has the same effect as calling `m(THIS_CLASS, attrs, children)`.
   *
   * @see https://mithril.js.org/hyperscript.html#mselector,-attributes,-children
   */);
  Component.component = function component(attrs, children) {
    if (attrs === void 0) {
      attrs = {};
    }
    if (children === void 0) {
      children = null;
    }
    var componentAttrs = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, attrs);
    return m(this, componentAttrs, children);
  }

  /**
   * Saves a reference to the vnode attrs after running them through initAttrs,
   * and checking for common issues.
   */;
  _proto.setAttrs = function setAttrs(attrs) {
    if (attrs === void 0) {
      attrs = {};
    }
    this.constructor.initAttrs(attrs);
    if (attrs) {
      if ('children' in attrs) {
        throw new Error("[" + this.constructor.name + "] The \"children\" attribute of attrs should never be used. Either pass children in as the vnode children or rename the attribute");
      }
      if ('tag' in attrs) {
        throw new Error("[" + this.constructor.name + "] You cannot use the \"tag\" attribute name with Mithril 2.");
      }
    }
    this.attrs = attrs;
  }

  /**
   * Initialize the component's attrs.
   *
   * This can be used to assign default values for missing, optional attrs.
   */;
  Component.initAttrs = function initAttrs(attrs) {};
  return Component;
}();


/***/ }),

/***/ "./src/common/Fragment.ts":
/*!********************************!*\
  !*** ./src/common/Fragment.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Fragment)
/* harmony export */ });
/**
 * The `Fragment` class represents a chunk of DOM that is rendered once with Mithril and then takes
 * over control of its own DOM and lifecycle.
 *
 * This is very similar to the `Component` wrapper class, but is used for more fine-grained control over
 * the rendering and display of some significant chunks of the DOM. In contrast to components, fragments
 * do not offer Mithril's lifecycle hooks.
 *
 * Use this when you want to enjoy the benefits of JSX / VDOM for initial rendering, combined with
 * small helper methods that then make updates to that DOM directly, instead of fully redrawing
 * everything through Mithril.
 *
 * This should only be used when necessary, and only with `m.render`. If you are unsure whether you need
 * this or `Component, you probably need `Component`.
 */
var Fragment = /*#__PURE__*/function () {
  function Fragment() {
    this.element = void 0;
  }
  var _proto = Fragment.prototype;
  /**
   * Returns a jQuery object for this fragment's element. If you pass in a
   * selector string, this method will return a jQuery object, using the current
   * element as its buffer.
   *
   * For example, calling `fragment.$('li')` will return a jQuery object
   * containing all of the `li` elements inside the DOM element of this
   * fragment.
   *
   * @param [selector] a jQuery-compatible selector string
   * @returns the jQuery object for the DOM node
   * @final
   */
  _proto.$ = function (_$) {
    function $(_x) {
      return _$.apply(this, arguments);
    }
    $.toString = function () {
      return _$.toString();
    };
    return $;
  }(function (selector) {
    var $element = $(this.element);
    return selector ? $element.find(selector) : $element;
  }

  /**
   * Get the renderable virtual DOM that represents the fragment's view.
   *
   * This should NOT be overridden by subclasses. Subclasses wishing to define
   * their virtual DOM should override Fragment#view instead.
   *
   * @example
   * const fragment = new MyFragment();
   * m.render(document.body, fragment.render());
   *
   * @final
   */);
  _proto.render = function render() {
    var _this = this;
    var vdom = this.view();
    vdom.attrs = vdom.attrs || {};
    var originalOnCreate = vdom.attrs.oncreate;
    vdom.attrs.oncreate = function (vnode) {
      _this.element = vnode.dom;
      if (originalOnCreate) originalOnCreate.apply(_this, [vnode]);
    };
    return vdom;
  }

  /**
   * Creates a view out of virtual elements.
   */;
  return Fragment;
}();


/***/ }),

/***/ "./src/common/Model.ts":
/*!*****************************!*\
  !*** ./src/common/Model.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Model)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/app */ "./src/common/app.ts");
/* harmony import */ var _helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers/fireDebugWarning */ "./src/common/helpers/fireDebugWarning.ts");



/**
 * The `Model` class represents a local data resource. It provides methods to
 * persist changes via the API.
 */
var Model = /*#__PURE__*/function () {
  /**
   * The resource object from the API.
   */

  /**
   * The time at which the model's data was last updated. Watching the value
   * of this property is a fast way to retain/cache a subtree if data hasn't
   * changed.
   */

  /**
   * Whether or not the resource exists on the server.
   */

  /**
   * The data store that this resource should be persisted to.
   */

  /**
   * @param data A resource object from the API.
   * @param store The data store that this model should be persisted to.
   */
  function Model(data, store) {
    if (data === void 0) {
      data = {};
    }
    if (store === void 0) {
      store = _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].store;
    }
    this.data = {};
    this.freshness = new Date();
    this.exists = false;
    this.store = void 0;
    this.data = data;
    this.store = store;
  }

  /**
   * Get the model's ID.
   *
   * @final
   */
  var _proto = Model.prototype;
  _proto.id = function id() {
    return 'id' in this.data ? this.data.id : undefined;
  }

  /**
   * Get one of the model's attributes.
   *
   * @final
   */;
  _proto.attribute = function (_attribute) {
    function attribute(_x) {
      return _attribute.apply(this, arguments);
    }
    attribute.toString = function () {
      return _attribute.toString();
    };
    return attribute;
  }(function (attribute) {
    var _this$data, _this$data$attributes;
    return (_this$data = this.data) == null ? void 0 : (_this$data$attributes = _this$data.attributes) == null ? void 0 : _this$data$attributes[attribute];
  }

  /**
   * Merge new data into this model locally.
   *
   * @param data A resource object to merge into this model
   */);
  _proto.pushData = function pushData(data) {
    if ('id' in data) {
      this.data.id = data.id;
    }
    if ('type' in data) {
      this.data.type = data.type;
    }
    if ('attributes' in data) {
      var _this$data2;
      (_this$data2 = this.data).attributes || (_this$data2.attributes = {});

      // @deprecated
      // Filter out relationships that got in by accident.
      for (var _key in data.attributes) {
        var val = data.attributes[_key];
        if (val && val instanceof Model) {
          (0,_helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_2__.fireDeprecationWarning)('Providing models as attributes to `Model.pushData()` or `Model.pushAttributes()` is deprecated.', '3249');
          delete data.attributes[_key];
          data.relationships || (data.relationships = {});
          data.relationships[_key] = {
            data: Model.getIdentifier(val)
          };
        }
      }
      Object.assign(this.data.attributes, data.attributes);
    }
    if ('relationships' in data) {
      var _this$data$relationsh;
      var relationships = (_this$data$relationsh = this.data.relationships) != null ? _this$data$relationsh : {};

      // For every relationship field, we need to check if we've
      // been handed a Model instance. If so, we will convert it to a
      // relationship data object.
      for (var r in data.relationships) {
        var _relationship = data.relationships[r];
        if (_relationship === null) {
          delete relationships[r];
          delete data.relationships[r];
          continue;
        }
        var identifier = void 0;
        if (_relationship instanceof Model) {
          identifier = {
            data: Model.getIdentifier(_relationship)
          };
        } else if (_relationship instanceof Array) {
          identifier = {
            data: _relationship.map(Model.getIdentifier)
          };
        } else {
          identifier = _relationship;
        }
        data.relationships[r] = identifier;
        relationships[r] = identifier;
      }
      this.data.relationships = relationships;
    }

    // Now that we've updated the data, we can say that the model is fresh.
    // This is an easy way to invalidate retained subtrees etc.
    this.freshness = new Date();
    return this;
  }

  /**
   * Merge new attributes into this model locally.
   *
   * @param attributes The attributes to merge.
   */;
  _proto.pushAttributes = function pushAttributes(attributes) {
    this.pushData({
      attributes: attributes
    });
  }

  /**
   * Merge new attributes into this model, both locally and with persistence.
   *
   * @param attributes The attributes to save. If a 'relationships' key
   *     exists, it will be extracted and relationships will also be saved.
   */;
  _proto.save = function save(attributes, options) {
    var _this = this;
    if (options === void 0) {
      options = {};
    }
    var data = {
      type: this.data.type,
      attributes: attributes
    };
    if ('id' in this.data) {
      data.id = this.data.id;
    }

    // If a 'relationships' key exists, extract it from the attributes hash and
    // set it on the top-level data object instead. We will be sending this data
    // object to the API for persistence.
    if (attributes.relationships) {
      data.relationships = {};
      for (var _key2 in attributes.relationships) {
        var _model = attributes.relationships[_key2];
        if (_model === null) continue;
        data.relationships[_key2] = {
          data: _model instanceof Array ? _model.map(Model.getIdentifier) : Model.getIdentifier(_model)
        };
      }
      delete attributes.relationships;
    }

    // Before we update the model's data, we should make a copy of the model's
    // old data so that we can revert back to it if something goes awry during
    // persistence.
    var oldData = this.copyData();
    this.pushData(data);
    var request = {
      data: data,
      meta: options.meta || undefined
    };
    return _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].request((0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
      method: this.exists ? 'PATCH' : 'POST',
      url: _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].forum.attribute('apiUrl') + this.apiEndpoint(),
      body: request
    }, options)).then(
    // If everything went well, we'll make sure the store knows that this
    // model exists now (if it didn't already), and we'll push the data that
    // the API returned into the store.
    function (payload) {
      return _this.store.pushPayload(payload);
    },
    // If something went wrong, though... good thing we backed up our model's
    // old data! We'll revert to that and let others handle the error.
    function (err) {
      _this.pushData(oldData);
      m.redraw();
      throw err;
    });
  }

  /**
   * Send a request to delete the resource.
   *
   * @param body Data to send along with the DELETE request.
   */;
  _proto["delete"] = function _delete(body, options) {
    var _this2 = this;
    if (body === void 0) {
      body = {};
    }
    if (options === void 0) {
      options = {};
    }
    if (!this.exists) return Promise.resolve();
    return _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].request((0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
      method: 'DELETE',
      url: _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].forum.attribute('apiUrl') + this.apiEndpoint(),
      body: body
    }, options)).then(function () {
      _this2.exists = false;
      _this2.store.remove(_this2);
    });
  }

  /**
   * Construct a path to the API endpoint for this resource.
   */;
  _proto.apiEndpoint = function apiEndpoint() {
    return '/' + this.data.type + ('id' in this.data ? '/' + this.data.id : '');
  };
  _proto.copyData = function copyData() {
    return JSON.parse(JSON.stringify(this.data));
  };
  _proto.rawRelationship = function rawRelationship(relationship) {
    var _this$data$relationsh2, _this$data$relationsh3;
    return (_this$data$relationsh2 = this.data.relationships) == null ? void 0 : (_this$data$relationsh3 = _this$data$relationsh2[relationship]) == null ? void 0 : _this$data$relationsh3.data;
  }

  /**
   * Generate a function which returns the value of the given attribute.
   *
   * @param transform A function to transform the attribute value
   */;
  Model.attribute = function attribute(name, transform) {
    return function () {
      if (transform) {
        return transform(this.attribute(name));
      }
      return this.attribute(name);
    };
  }

  /**
   * Generate a function which returns the value of the given has-one
   * relationship.
   *
   * @return false if no information about the
   *     relationship exists; undefined if the relationship exists but the model
   *     has not been loaded; or the model if it has been loaded.
   */;
  Model.hasOne = function hasOne(name) {
    return function () {
      var _this$data$relationsh4, _this$data$relationsh5;
      var relationshipData = (_this$data$relationsh4 = this.data.relationships) == null ? void 0 : (_this$data$relationsh5 = _this$data$relationsh4[name]) == null ? void 0 : _this$data$relationsh5.data;
      if (relationshipData && relationshipData instanceof Array) {
        throw new Error("Relationship " + name + " on model " + this.data.type + " is plural, so the hasOne method cannot be used to access it.");
      }
      if (relationshipData) {
        return this.store.getById(relationshipData.type, relationshipData.id);
      }
      return false;
    };
  }

  /**
   * Generate a function which returns the value of the given has-many
   * relationship.
   *
   * @return false if no information about the relationship
   *     exists; an array if it does, containing models if they have been
   *     loaded, and undefined for those that have not.
   */;
  Model.hasMany = function hasMany(name) {
    return function () {
      var _this$data$relationsh6,
        _this$data$relationsh7,
        _this3 = this;
      var relationshipData = (_this$data$relationsh6 = this.data.relationships) == null ? void 0 : (_this$data$relationsh7 = _this$data$relationsh6[name]) == null ? void 0 : _this$data$relationsh7.data;
      if (relationshipData && !(relationshipData instanceof Array)) {
        throw new Error("Relationship " + name + " on model " + this.data.type + " is singular, so the hasMany method cannot be used to access it.");
      }
      if (relationshipData) {
        return relationshipData.map(function (data) {
          return _this3.store.getById(data.type, data.id);
        });
      }
      return false;
    };
  }

  /**
   * Transform the given value into a Date object.
   */;
  Model.transformDate = function transformDate(value) {
    return value != null ? new Date(value) : value;
  }

  /**
   * Get a resource identifier object for the given model.
   */;
  Model.getIdentifier = function getIdentifier(model) {
    if (!model || !('id' in model.data)) return null;
    return {
      type: model.data.type,
      id: model.data.id
    };
  };
  return Model;
}();


/***/ }),

/***/ "./src/common/Session.ts":
/*!*******************************!*\
  !*** ./src/common/Session.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Session)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/app */ "./src/common/app.ts");


/**
 * The `Session` class defines the current user session. It stores a reference
 * to the current authenticated user, and provides methods to log in/out.
 */
var Session = /*#__PURE__*/function () {
  /**
   * The current authenticated user.
   */

  /**
   * The CSRF token.
   */

  function Session(user, csrfToken) {
    this.user = void 0;
    this.csrfToken = void 0;
    this.user = user;
    this.csrfToken = csrfToken;
  }

  /**
   * Attempt to log in a user.
   */
  var _proto = Session.prototype;
  _proto.login = function login(body, options) {
    if (options === void 0) {
      options = {};
    }
    return _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].request((0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
      method: 'POST',
      url: _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].forum.attribute('baseUrl') + "/login",
      body: body
    }, options));
  }

  /**
   * Log the user out.
   */;
  _proto.logout = function logout() {
    window.location.href = _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].forum.attribute('baseUrl') + "/logout?token=" + this.csrfToken;
  };
  return Session;
}();


/***/ }),

/***/ "./src/common/Store.ts":
/*!*****************************!*\
  !*** ./src/common/Store.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Store),
/* harmony export */   "payloadIsPlural": () => (/* binding */ payloadIsPlural)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ "../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ "../../../node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/app */ "./src/common/app.ts");
/* harmony import */ var _helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers/fireDebugWarning */ "./src/common/helpers/fireDebugWarning.ts");





function payloadIsPlural(payload) {
  return Array.isArray(payload.data);
}

/**
 * The `Store` class defines a local data store, and provides methods to
 * retrieve data from the API.
 */
var Store = /*#__PURE__*/function () {
  /**
   * The local data store. A tree of resource types to IDs, such that
   * accessing data[type][id] will return the model for that type/ID.
   */

  /**
   * The model registry. A map of resource types to the model class that
   * should be used to represent resources of that type.
   */

  function Store(models) {
    this.data = {};
    this.models = void 0;
    this.models = models;
  }

  /**
   * Push resources contained within an API payload into the store.
   *
   * @return The model(s) representing the resource(s) contained
   *     within the 'data' key of the payload.
   */
  var _proto = Store.prototype;
  _proto.pushPayload = function pushPayload(payload) {
    var _this = this;
    if (payload.included) payload.included.map(this.pushObject.bind(this));
    var models = payload.data instanceof Array ? payload.data.map(function (o) {
      return _this.pushObject(o, false);
    }) : this.pushObject(payload.data, false);
    var result = models;

    // Attach the original payload to the model that we give back. This is
    // useful to consumers as it allows them to access meta information
    // associated with their request.
    result.payload = payload;
    return result;
  }

  /**
   * Create a model to represent a resource object (or update an existing one),
   * and push it into the store.
   *
   * @param data The resource object
   * @return The model, or null if no model class has been
   *     registered for this resource type.
   */;
  _proto.pushObject = function pushObject(data, allowUnregistered) {
    if (allowUnregistered === void 0) {
      allowUnregistered = true;
    }
    if (!this.models[data.type]) {
      if (!allowUnregistered) {
        setTimeout(function () {
          return (0,_helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_4__.fireDeprecationWarning)("Pushing object of type `" + data.type + "` not allowed, as type not yet registered in the store.", '3206');
        });
      }
      return null;
    }
    var type = this.data[data.type] = this.data[data.type] || {};

    // Necessary for TS to narrow correctly.
    var curr = type[data.id];
    var instance = curr ? curr.pushData(data) : this.createRecord(data.type, data);
    type[data.id] = instance;
    instance.exists = true;
    return instance;
  }

  /**
   * Make a request to the API to find record(s) of a specific type.
   */;
  _proto.find = /*#__PURE__*/function () {
    var _find = (0,_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["default"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee(type, idOrParams, query, options) {
      var _this2 = this;
      var params, url;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              if (query === void 0) {
                query = {};
              }
              if (options === void 0) {
                options = {};
              }
              params = query;
              url = _common_app__WEBPACK_IMPORTED_MODULE_3__["default"].forum.attribute('apiUrl') + '/' + type;
              if (idOrParams instanceof Array) {
                url += '?filter[id]=' + idOrParams.join(',');
              } else if (typeof idOrParams === 'object') {
                params = idOrParams;
              } else if (idOrParams) {
                url += '/' + idOrParams;
              }
              return _context.abrupt("return", _common_app__WEBPACK_IMPORTED_MODULE_3__["default"].request((0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
                method: 'GET',
                url: url,
                params: params
              }, options)).then(function (payload) {
                if (payloadIsPlural(payload)) {
                  return _this2.pushPayload(payload);
                } else {
                  return _this2.pushPayload(payload);
                }
              }));
            case 6:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));
    function find(_x, _x2, _x3, _x4) {
      return _find.apply(this, arguments);
    }
    return find;
  }()
  /**
   * Get a record from the store by ID.
   */
  ;
  _proto.getById = function getById(type, id) {
    var _this$data, _this$data$type;
    return (_this$data = this.data) == null ? void 0 : (_this$data$type = _this$data[type]) == null ? void 0 : _this$data$type[id];
  }

  /**
   * Get a record from the store by the value of a model attribute.
   *
   * @param type The resource type.
   * @param key The name of the method on the model.
   * @param value The value of the model attribute.
   */;
  _proto.getBy = function getBy(type, key, value) {
    // @ts-expect-error No way to do this safely, unfortunately.
    return this.all(type).filter(function (model) {
      return model[key]() === value;
    })[0];
  }

  /**
   * Get all loaded records of a specific type.
   */;
  _proto.all = function all(type) {
    var records = this.data[type];
    return records ? Object.values(records) : [];
  }

  /**
   * Remove the given model from the store.
   */;
  _proto.remove = function remove(model) {
    delete this.data[model.data.type][model.id()];
  }

  /**
   * Create a new record of the given type.
   *
   * @param type The resource type
   * @param data Any data to initialize the model with
   */;
  _proto.createRecord = function createRecord(type, data) {
    if (data === void 0) {
      data = {};
    }
    data.type = data.type || type;

    // @ts-expect-error this will complain about initializing abstract models,
    // but we can safely assume that all models registered with the store are
    // not abstract.
    return new this.models[type](data, this);
  };
  return Store;
}();


/***/ }),

/***/ "./src/common/Translator.tsx":
/*!***********************************!*\
  !*** ./src/common/Translator.tsx ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Translator)
/* harmony export */ });
/* harmony import */ var _askvortsov_rich_icu_message_formatter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @askvortsov/rich-icu-message-formatter */ "../../../node_modules/@askvortsov/rich-icu-message-formatter/lib/rich-icu-message-formatter.es.js");
/* harmony import */ var _ultraq_icu_message_formatter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ultraq/icu-message-formatter */ "../../../node_modules/@ultraq/icu-message-formatter/lib/icu-message-formatter.es.js");
/* harmony import */ var _helpers_username__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers/username */ "./src/common/helpers/username.tsx");
/* harmony import */ var _utils_extract__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/extract */ "./src/common/utils/extract.ts");




var Translator = /*#__PURE__*/function () {
  function Translator() {
    this.translations = {};
    this.formatter = new _askvortsov_rich_icu_message_formatter__WEBPACK_IMPORTED_MODULE_2__.RichMessageFormatter(null, this.formatterTypeHandlers(), _askvortsov_rich_icu_message_formatter__WEBPACK_IMPORTED_MODULE_2__.mithrilRichHandler);
  }
  var _proto = Translator.prototype;
  /**
   * Sets the formatter's locale to the provided value.
   */
  _proto.setLocale = function setLocale(locale) {
    this.formatter.locale = locale;
  }

  /**
   * Returns the formatter's current locale.
   */;
  _proto.getLocale = function getLocale() {
    return this.formatter.locale;
  };
  _proto.addTranslations = function addTranslations(translations) {
    Object.assign(this.translations, translations);
  }

  /**
   * An extensible entrypoint for extenders to register type handlers for translations.
   */;
  _proto.formatterTypeHandlers = function formatterTypeHandlers() {
    return {
      plural: _ultraq_icu_message_formatter__WEBPACK_IMPORTED_MODULE_3__.pluralTypeHandler,
      select: _ultraq_icu_message_formatter__WEBPACK_IMPORTED_MODULE_3__.selectTypeHandler
    };
  }

  /**
   * A temporary system to preprocess parameters.
   * Should not be used by extensions.
   * TODO: An extender will be added in v1.x.
   *
   * @internal
   */;
  _proto.preprocessParameters = function preprocessParameters(parameters) {
    // If we've been given a user model as one of the input parameters, then
    // we'll extract the username and use that for the translation. In the
    // future there should be a hook here to inspect the user and change the
    // translation key. This will allow a gender property to determine which
    // translation key is used.

    if ('user' in parameters) {
      var user = (0,_utils_extract__WEBPACK_IMPORTED_MODULE_1__["default"])(parameters, 'user');
      if (!parameters.username) parameters.username = (0,_helpers_username__WEBPACK_IMPORTED_MODULE_0__["default"])(user);
    }
    return parameters;
  };
  _proto.trans = function trans(id, parameters) {
    if (parameters === void 0) {
      parameters = {};
    }
    var translation = this.translations[id];
    if (translation) {
      parameters = this.preprocessParameters(parameters);
      return this.formatter.rich(translation, parameters);
    }
    return id;
  };
  return Translator;
}();


/***/ }),

/***/ "./src/common/app.ts":
/*!***************************!*\
  !*** ./src/common/app.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
// Used to fix typings
var w = window;

/**
 * Proxy app. Common JS is run first, at which point `window.app` is not
 * set as this is done by the namespaced JS.
 *
 * When the corrent value is set, this code would retain the reference to
 * the original invalid value.
 *
 * By using a proxy, we can ensure that our `window.app` value is always
 * up-to-date with the latest reference.
 */
var appProxy = new Proxy({}, {
  get: function get(_, properties) {
    return Reflect.get(w.app, properties, w.app);
  },
  set: function set(_, properties, value) {
    return Reflect.set(w.app, properties, value, w.app);
  }
});

/**
 * The instance of Application within the common namespace.
 */
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (appProxy);

/***/ }),

/***/ "./src/common/compat.ts":
/*!******************************!*\
  !*** ./src/common/compat.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _extend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./extend */ "./src/common/extend.ts");
/* harmony import */ var _extenders__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./extenders */ "./src/common/extenders/index.ts");
/* harmony import */ var _Session__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Session */ "./src/common/Session.ts");
/* harmony import */ var _Store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Store */ "./src/common/Store.ts");
/* harmony import */ var _utils_BasicEditorDriver__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/BasicEditorDriver */ "./src/common/utils/BasicEditorDriver.ts");
/* harmony import */ var _utils_evented__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/evented */ "./src/common/utils/evented.js");
/* harmony import */ var _utils_EventEmitter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/EventEmitter */ "./src/common/utils/EventEmitter.ts");
/* harmony import */ var _utils_KeyboardNavigatable__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/KeyboardNavigatable */ "./src/common/utils/KeyboardNavigatable.ts");
/* harmony import */ var _utils_liveHumanTimes__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/liveHumanTimes */ "./src/common/utils/liveHumanTimes.ts");
/* harmony import */ var _utils_ItemList__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _utils_mixin__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/mixin */ "./src/common/utils/mixin.js");
/* harmony import */ var _utils_humanTime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./utils/humanTime */ "./src/common/utils/humanTime.ts");
/* harmony import */ var _utils_computed__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./utils/computed */ "./src/common/utils/computed.ts");
/* harmony import */ var _utils_insertText__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./utils/insertText */ "./src/common/utils/insertText.ts");
/* harmony import */ var _utils_styleSelectedText__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./utils/styleSelectedText */ "./src/common/utils/styleSelectedText.ts");
/* harmony import */ var _utils_Drawer__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./utils/Drawer */ "./src/common/utils/Drawer.js");
/* harmony import */ var _utils_anchorScroll__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils/anchorScroll */ "./src/common/utils/anchorScroll.js");
/* harmony import */ var _utils_RequestError__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./utils/RequestError */ "./src/common/utils/RequestError.ts");
/* harmony import */ var _utils_abbreviateNumber__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./utils/abbreviateNumber */ "./src/common/utils/abbreviateNumber.ts");
/* harmony import */ var _utils_escapeRegExp__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./utils/escapeRegExp */ "./src/common/utils/escapeRegExp.ts");
/* harmony import */ var _utils_string__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./utils/string */ "./src/common/utils/string.ts");
/* harmony import */ var _utils_throttleDebounce__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./utils/throttleDebounce */ "./src/common/utils/throttleDebounce.ts");
/* harmony import */ var _utils_Stream__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./utils/Stream */ "./src/common/utils/Stream.ts");
/* harmony import */ var _utils_SubtreeRetainer__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./utils/SubtreeRetainer */ "./src/common/utils/SubtreeRetainer.ts");
/* harmony import */ var _utils_setRouteWithForcedRefresh__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./utils/setRouteWithForcedRefresh */ "./src/common/utils/setRouteWithForcedRefresh.ts");
/* harmony import */ var _utils_extract__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./utils/extract */ "./src/common/utils/extract.ts");
/* harmony import */ var _utils_ScrollListener__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./utils/ScrollListener */ "./src/common/utils/ScrollListener.js");
/* harmony import */ var _utils_stringToColor__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./utils/stringToColor */ "./src/common/utils/stringToColor.ts");
/* harmony import */ var _utils_subclassOf__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./utils/subclassOf */ "./src/common/utils/subclassOf.js");
/* harmony import */ var _utils_patchMithril__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./utils/patchMithril */ "./src/common/utils/patchMithril.js");
/* harmony import */ var _utils_proxifyCompat__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./utils/proxifyCompat */ "./src/common/utils/proxifyCompat.ts");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./utils/classList */ "./src/common/utils/classList.ts");
/* harmony import */ var _utils_extractText__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./utils/extractText */ "./src/common/utils/extractText.ts");
/* harmony import */ var _utils_formatNumber__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./utils/formatNumber */ "./src/common/utils/formatNumber.ts");
/* harmony import */ var _utils_mapRoutes__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./utils/mapRoutes */ "./src/common/utils/mapRoutes.ts");
/* harmony import */ var _utils_withAttr__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./utils/withAttr */ "./src/common/utils/withAttr.ts");
/* harmony import */ var _utils_focusTrap__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./utils/focusTrap */ "./src/common/utils/focusTrap.ts");
/* harmony import */ var _utils_isDark__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./utils/isDark */ "./src/common/utils/isDark.ts");
/* harmony import */ var _models_Notification__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./models/Notification */ "./src/common/models/Notification.ts");
/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./models/User */ "./src/common/models/User.tsx");
/* harmony import */ var _models_Post__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./models/Post */ "./src/common/models/Post.ts");
/* harmony import */ var _models_Discussion__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./models/Discussion */ "./src/common/models/Discussion.tsx");
/* harmony import */ var _models_Group__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./models/Group */ "./src/common/models/Group.ts");
/* harmony import */ var _models_Forum__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./models/Forum */ "./src/common/models/Forum.ts");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./Component */ "./src/common/Component.ts");
/* harmony import */ var _Translator__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./Translator */ "./src/common/Translator.tsx");
/* harmony import */ var _components_AlertManager__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./components/AlertManager */ "./src/common/components/AlertManager.tsx");
/* harmony import */ var _components_Page__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./components/Page */ "./src/common/components/Page.tsx");
/* harmony import */ var _components_Switch__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./components/Switch */ "./src/common/components/Switch.tsx");
/* harmony import */ var _components_Badge__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./components/Badge */ "./src/common/components/Badge.tsx");
/* harmony import */ var _components_LoadingIndicator__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./components/LoadingIndicator */ "./src/common/components/LoadingIndicator.tsx");
/* harmony import */ var _components_Placeholder__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./components/Placeholder */ "./src/common/components/Placeholder.js");
/* harmony import */ var _components_Separator__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./components/Separator */ "./src/common/components/Separator.js");
/* harmony import */ var _components_Dropdown__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./components/Dropdown */ "./src/common/components/Dropdown.tsx");
/* harmony import */ var _components_SplitDropdown__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./components/SplitDropdown */ "./src/common/components/SplitDropdown.tsx");
/* harmony import */ var _components_RequestErrorModal__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./components/RequestErrorModal */ "./src/common/components/RequestErrorModal.tsx");
/* harmony import */ var _components_FieldSet__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./components/FieldSet */ "./src/common/components/FieldSet.js");
/* harmony import */ var _components_Select__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./components/Select */ "./src/common/components/Select.js");
/* harmony import */ var _components_Navigation__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./components/Navigation */ "./src/common/components/Navigation.tsx");
/* harmony import */ var _components_Alert__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./components/Alert */ "./src/common/components/Alert.tsx");
/* harmony import */ var _components_Link__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./components/Link */ "./src/common/components/Link.js");
/* harmony import */ var _components_LinkButton__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./components/LinkButton */ "./src/common/components/LinkButton.js");
/* harmony import */ var _components_Checkbox__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./components/Checkbox */ "./src/common/components/Checkbox.tsx");
/* harmony import */ var _components_ColorPreviewInput__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./components/ColorPreviewInput */ "./src/common/components/ColorPreviewInput.tsx");
/* harmony import */ var _components_SelectDropdown__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./components/SelectDropdown */ "./src/common/components/SelectDropdown.tsx");
/* harmony import */ var _components_ModalManager__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./components/ModalManager */ "./src/common/components/ModalManager.tsx");
/* harmony import */ var _components_Button__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _components_Modal__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./components/Modal */ "./src/common/components/Modal.tsx");
/* harmony import */ var _components_GroupBadge__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./components/GroupBadge */ "./src/common/components/GroupBadge.tsx");
/* harmony import */ var _components_TextEditor__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./components/TextEditor */ "./src/common/components/TextEditor.js");
/* harmony import */ var _components_TextEditorButton__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./components/TextEditorButton */ "./src/common/components/TextEditorButton.js");
/* harmony import */ var _components_EditUserModal__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./components/EditUserModal */ "./src/common/components/EditUserModal.tsx");
/* harmony import */ var _components_Tooltip__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./components/Tooltip */ "./src/common/components/Tooltip.tsx");
/* harmony import */ var _Model__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./Model */ "./src/common/Model.ts");
/* harmony import */ var _Application__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ./Application */ "./src/common/Application.tsx");
/* harmony import */ var _helpers_fullTime__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ./helpers/fullTime */ "./src/common/helpers/fullTime.tsx");
/* harmony import */ var _helpers_avatar__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ./helpers/avatar */ "./src/common/helpers/avatar.tsx");
/* harmony import */ var _helpers_icon__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ./helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _helpers_humanTime__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ./helpers/humanTime */ "./src/common/helpers/humanTime.tsx");
/* harmony import */ var _helpers_punctuateSeries__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ./helpers/punctuateSeries */ "./src/common/helpers/punctuateSeries.js");
/* harmony import */ var _helpers_highlight__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ./helpers/highlight */ "./src/common/helpers/highlight.tsx");
/* harmony import */ var _helpers_username__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ./helpers/username */ "./src/common/helpers/username.tsx");
/* harmony import */ var _helpers_userOnline__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ./helpers/userOnline */ "./src/common/helpers/userOnline.tsx");
/* harmony import */ var _helpers_listItems__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ./helpers/listItems */ "./src/common/helpers/listItems.tsx");
/* harmony import */ var _helpers_textContrastClass__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ./helpers/textContrastClass */ "./src/common/helpers/textContrastClass.ts");
/* harmony import */ var _Fragment__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ./Fragment */ "./src/common/Fragment.ts");
/* harmony import */ var _resolvers_DefaultResolver__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ./resolvers/DefaultResolver */ "./src/common/resolvers/DefaultResolver.ts");
/* harmony import */ var _states_PaginatedListState__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ./states/PaginatedListState */ "./src/common/states/PaginatedListState.ts");
/* harmony import */ var _utils_isObject__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ./utils/isObject */ "./src/common/utils/isObject.ts");
/* harmony import */ var _states_AlertManagerState__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ./states/AlertManagerState */ "./src/common/states/AlertManagerState.ts");
/* harmony import */ var _states_ModalManagerState__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ./states/ModalManagerState */ "./src/common/states/ModalManagerState.ts");
/* harmony import */ var _states_PageState__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ./states/PageState */ "./src/common/states/PageState.js");




























































































/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  extenders: _extenders__WEBPACK_IMPORTED_MODULE_1__["default"],
  extend: _extend__WEBPACK_IMPORTED_MODULE_0__,
  Session: _Session__WEBPACK_IMPORTED_MODULE_2__["default"],
  Store: _Store__WEBPACK_IMPORTED_MODULE_3__["default"],
  'utils/BasicEditorDriver': _utils_BasicEditorDriver__WEBPACK_IMPORTED_MODULE_4__["default"],
  'utils/evented': _utils_evented__WEBPACK_IMPORTED_MODULE_5__["default"],
  'utils/EventEmitter': _utils_EventEmitter__WEBPACK_IMPORTED_MODULE_6__["default"],
  'utils/KeyboardNavigatable': _utils_KeyboardNavigatable__WEBPACK_IMPORTED_MODULE_7__["default"],
  'utils/liveHumanTimes': _utils_liveHumanTimes__WEBPACK_IMPORTED_MODULE_8__["default"],
  'utils/ItemList': _utils_ItemList__WEBPACK_IMPORTED_MODULE_9__["default"],
  'utils/mixin': _utils_mixin__WEBPACK_IMPORTED_MODULE_10__["default"],
  'utils/humanTime': _utils_humanTime__WEBPACK_IMPORTED_MODULE_11__["default"],
  'utils/computed': _utils_computed__WEBPACK_IMPORTED_MODULE_12__["default"],
  'utils/insertText': _utils_insertText__WEBPACK_IMPORTED_MODULE_13__["default"],
  'utils/styleSelectedText': _utils_styleSelectedText__WEBPACK_IMPORTED_MODULE_14__["default"],
  'utils/Drawer': _utils_Drawer__WEBPACK_IMPORTED_MODULE_15__["default"],
  'utils/anchorScroll': _utils_anchorScroll__WEBPACK_IMPORTED_MODULE_16__["default"],
  'utils/RequestError': _utils_RequestError__WEBPACK_IMPORTED_MODULE_17__["default"],
  'utils/abbreviateNumber': _utils_abbreviateNumber__WEBPACK_IMPORTED_MODULE_18__["default"],
  'utils/string': _utils_string__WEBPACK_IMPORTED_MODULE_20__,
  'utils/SubtreeRetainer': _utils_SubtreeRetainer__WEBPACK_IMPORTED_MODULE_23__["default"],
  'utils/escapeRegExp': _utils_escapeRegExp__WEBPACK_IMPORTED_MODULE_19__["default"],
  'utils/extract': _utils_extract__WEBPACK_IMPORTED_MODULE_25__["default"],
  'utils/ScrollListener': _utils_ScrollListener__WEBPACK_IMPORTED_MODULE_26__["default"],
  'utils/stringToColor': _utils_stringToColor__WEBPACK_IMPORTED_MODULE_27__["default"],
  'utils/Stream': _utils_Stream__WEBPACK_IMPORTED_MODULE_22__["default"],
  'utils/subclassOf': _utils_subclassOf__WEBPACK_IMPORTED_MODULE_28__["default"],
  'utils/setRouteWithForcedRefresh': _utils_setRouteWithForcedRefresh__WEBPACK_IMPORTED_MODULE_24__["default"],
  'utils/patchMithril': _utils_patchMithril__WEBPACK_IMPORTED_MODULE_29__["default"],
  'utils/proxifyCompat': _utils_proxifyCompat__WEBPACK_IMPORTED_MODULE_30__["default"],
  'utils/classList': _utils_classList__WEBPACK_IMPORTED_MODULE_31__["default"],
  'utils/extractText': _utils_extractText__WEBPACK_IMPORTED_MODULE_32__["default"],
  'utils/formatNumber': _utils_formatNumber__WEBPACK_IMPORTED_MODULE_33__["default"],
  'utils/mapRoutes': _utils_mapRoutes__WEBPACK_IMPORTED_MODULE_34__["default"],
  'utils/withAttr': _utils_withAttr__WEBPACK_IMPORTED_MODULE_35__["default"],
  'utils/throttleDebounce': _utils_throttleDebounce__WEBPACK_IMPORTED_MODULE_21__,
  'utils/isObject': _utils_isObject__WEBPACK_IMPORTED_MODULE_88__["default"],
  'utils/focusTrap': _utils_focusTrap__WEBPACK_IMPORTED_MODULE_36__,
  'utils/isDark': _utils_isDark__WEBPACK_IMPORTED_MODULE_37__["default"],
  'models/Notification': _models_Notification__WEBPACK_IMPORTED_MODULE_38__["default"],
  'models/User': _models_User__WEBPACK_IMPORTED_MODULE_39__["default"],
  'models/Post': _models_Post__WEBPACK_IMPORTED_MODULE_40__["default"],
  'models/Discussion': _models_Discussion__WEBPACK_IMPORTED_MODULE_41__["default"],
  'models/Group': _models_Group__WEBPACK_IMPORTED_MODULE_42__["default"],
  'models/Forum': _models_Forum__WEBPACK_IMPORTED_MODULE_43__["default"],
  Component: _Component__WEBPACK_IMPORTED_MODULE_44__["default"],
  Fragment: _Fragment__WEBPACK_IMPORTED_MODULE_85__["default"],
  Translator: _Translator__WEBPACK_IMPORTED_MODULE_45__["default"],
  'components/AlertManager': _components_AlertManager__WEBPACK_IMPORTED_MODULE_46__["default"],
  'components/Page': _components_Page__WEBPACK_IMPORTED_MODULE_47__["default"],
  'components/Switch': _components_Switch__WEBPACK_IMPORTED_MODULE_48__["default"],
  'components/Badge': _components_Badge__WEBPACK_IMPORTED_MODULE_49__["default"],
  'components/LoadingIndicator': _components_LoadingIndicator__WEBPACK_IMPORTED_MODULE_50__["default"],
  'components/Placeholder': _components_Placeholder__WEBPACK_IMPORTED_MODULE_51__["default"],
  'components/Separator': _components_Separator__WEBPACK_IMPORTED_MODULE_52__["default"],
  'components/Dropdown': _components_Dropdown__WEBPACK_IMPORTED_MODULE_53__["default"],
  'components/SplitDropdown': _components_SplitDropdown__WEBPACK_IMPORTED_MODULE_54__["default"],
  'components/RequestErrorModal': _components_RequestErrorModal__WEBPACK_IMPORTED_MODULE_55__["default"],
  'components/FieldSet': _components_FieldSet__WEBPACK_IMPORTED_MODULE_56__["default"],
  'components/Select': _components_Select__WEBPACK_IMPORTED_MODULE_57__["default"],
  'components/Navigation': _components_Navigation__WEBPACK_IMPORTED_MODULE_58__["default"],
  'components/Alert': _components_Alert__WEBPACK_IMPORTED_MODULE_59__["default"],
  'components/Link': _components_Link__WEBPACK_IMPORTED_MODULE_60__["default"],
  'components/LinkButton': _components_LinkButton__WEBPACK_IMPORTED_MODULE_61__["default"],
  'components/Checkbox': _components_Checkbox__WEBPACK_IMPORTED_MODULE_62__["default"],
  'components/ColorPreviewInput': _components_ColorPreviewInput__WEBPACK_IMPORTED_MODULE_63__["default"],
  'components/SelectDropdown': _components_SelectDropdown__WEBPACK_IMPORTED_MODULE_64__["default"],
  'components/ModalManager': _components_ModalManager__WEBPACK_IMPORTED_MODULE_65__["default"],
  'components/Button': _components_Button__WEBPACK_IMPORTED_MODULE_66__["default"],
  'components/Modal': _components_Modal__WEBPACK_IMPORTED_MODULE_67__["default"],
  'components/GroupBadge': _components_GroupBadge__WEBPACK_IMPORTED_MODULE_68__["default"],
  'components/TextEditor': _components_TextEditor__WEBPACK_IMPORTED_MODULE_69__["default"],
  'components/TextEditorButton': _components_TextEditorButton__WEBPACK_IMPORTED_MODULE_70__["default"],
  'components/Tooltip': _components_Tooltip__WEBPACK_IMPORTED_MODULE_72__["default"],
  'components/EditUserModal': _components_EditUserModal__WEBPACK_IMPORTED_MODULE_71__["default"],
  Model: _Model__WEBPACK_IMPORTED_MODULE_73__["default"],
  Application: _Application__WEBPACK_IMPORTED_MODULE_74__["default"],
  'helpers/fullTime': _helpers_fullTime__WEBPACK_IMPORTED_MODULE_75__["default"],
  'helpers/avatar': _helpers_avatar__WEBPACK_IMPORTED_MODULE_76__["default"],
  'helpers/icon': _helpers_icon__WEBPACK_IMPORTED_MODULE_77__["default"],
  'helpers/humanTime': _helpers_humanTime__WEBPACK_IMPORTED_MODULE_78__["default"],
  'helpers/punctuateSeries': _helpers_punctuateSeries__WEBPACK_IMPORTED_MODULE_79__["default"],
  'helpers/highlight': _helpers_highlight__WEBPACK_IMPORTED_MODULE_80__["default"],
  'helpers/username': _helpers_username__WEBPACK_IMPORTED_MODULE_81__["default"],
  'helpers/userOnline': _helpers_userOnline__WEBPACK_IMPORTED_MODULE_82__["default"],
  'helpers/listItems': _helpers_listItems__WEBPACK_IMPORTED_MODULE_83__["default"],
  'helpers/textContrastClass': _helpers_textContrastClass__WEBPACK_IMPORTED_MODULE_84__["default"],
  'resolvers/DefaultResolver': _resolvers_DefaultResolver__WEBPACK_IMPORTED_MODULE_86__["default"],
  'states/PaginatedListState': _states_PaginatedListState__WEBPACK_IMPORTED_MODULE_87__["default"],
  'states/AlertManagerState': _states_AlertManagerState__WEBPACK_IMPORTED_MODULE_89__["default"],
  'states/ModalManagerState': _states_ModalManagerState__WEBPACK_IMPORTED_MODULE_90__["default"],
  'states/PageState': _states_PageState__WEBPACK_IMPORTED_MODULE_91__["default"]
});

/***/ }),

/***/ "./src/common/components/Alert.tsx":
/*!*****************************************!*\
  !*** ./src/common/components/Alert.tsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Alert)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _helpers_listItems__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/listItems */ "./src/common/helpers/listItems.tsx");
/* harmony import */ var _utils_extract__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/extract */ "./src/common/utils/extract.ts");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../app */ "./src/common/app.ts");
/* harmony import */ var _helpers_icon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers/icon */ "./src/common/helpers/icon.tsx");








/**
 * The `Alert` component represents an alert box, which contains a message,
 * some controls, and may be dismissible.
 */
var Alert = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Alert, _Component);
  function Alert() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = Alert.prototype;
  _proto.view = function view(vnode) {
    var attrs = Object.assign({}, this.attrs);
    var type = (0,_utils_extract__WEBPACK_IMPORTED_MODULE_4__["default"])(attrs, 'type');
    attrs.className = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_5__["default"])('Alert', "Alert--" + type, attrs.className);
    var title = (0,_utils_extract__WEBPACK_IMPORTED_MODULE_4__["default"])(attrs, 'title');
    var icon = (0,_utils_extract__WEBPACK_IMPORTED_MODULE_4__["default"])(attrs, 'icon');
    var content = (0,_utils_extract__WEBPACK_IMPORTED_MODULE_4__["default"])(attrs, 'content') || vnode.children;
    var controls = (0,_utils_extract__WEBPACK_IMPORTED_MODULE_4__["default"])(attrs, 'controls') || [];

    // If the alert is meant to be dismissible (which is the case by default),
    // then we will create a dismiss button to append as the final control in
    // the alert.
    var dismissible = (0,_utils_extract__WEBPACK_IMPORTED_MODULE_4__["default"])(attrs, 'dismissible');
    var ondismiss = (0,_utils_extract__WEBPACK_IMPORTED_MODULE_4__["default"])(attrs, 'ondismiss');
    var dismissControl = [];
    if (dismissible || dismissible === undefined) {
      dismissControl.push(m(_Button__WEBPACK_IMPORTED_MODULE_2__["default"], {
        "aria-label": _app__WEBPACK_IMPORTED_MODULE_6__["default"].translator.trans('core.lib.alert.dismiss_a11y_label'),
        icon: "fas fa-times",
        className: "Button Button--link Button--icon Alert-dismiss",
        onclick: ondismiss
      }));
    }
    return m("div", attrs, !!title && m("div", {
      className: "Alert-title"
    }, !!icon && m("span", {
      className: "Alert-title-icon"
    }, (0,_helpers_icon__WEBPACK_IMPORTED_MODULE_7__["default"])(icon)), m("span", {
      className: "Alert-title-text"
    }, title)), m("span", {
      className: "Alert-body"
    }, content), m("ul", {
      className: "Alert-controls"
    }, (0,_helpers_listItems__WEBPACK_IMPORTED_MODULE_3__["default"])(controls.concat(dismissControl))));
  };
  return Alert;
}(_Component__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/components/AlertManager.tsx":
/*!************************************************!*\
  !*** ./src/common/components/AlertManager.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AlertManager)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");


/**
 * The `AlertManager` component provides an area in which `Alert` components can
 * be shown and dismissed.
 */
var AlertManager = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(AlertManager, _Component);
  function AlertManager() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = AlertManager.prototype;
  _proto.oninit = function oninit(vnode) {
    _Component.prototype.oninit.call(this, vnode);
    this.state = this.attrs.state;
  };
  _proto.view = function view() {
    var _this = this;
    var activeAlerts = this.state.getActiveAlerts();
    return m("div", {
      className: "AlertManager"
    }, Object.keys(activeAlerts).map(Number).map(function (key) {
      var alert = activeAlerts[key];
      var urgent = alert.attrs.type === 'error';
      return m("div", {
        className: "AlertManager-alert",
        role: "alert",
        "aria-live": urgent ? 'assertive' : 'polite'
      }, m(alert.componentClass, Object.assign({}, alert.attrs, {
        ondismiss: _this.state.dismiss.bind(_this.state, key)
      }), alert.children));
    }));
  };
  return AlertManager;
}(_Component__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/components/Badge.tsx":
/*!*****************************************!*\
  !*** ./src/common/components/Badge.tsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Badge)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Tooltip */ "./src/common/components/Tooltip.tsx");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _helpers_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");
/* harmony import */ var _helpers_textContrastClass__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../helpers/textContrastClass */ "./src/common/helpers/textContrastClass.ts");



var _excluded = ["type", "icon", "label", "color", "style"];





/**
 * The `Badge` component represents a user/discussion badge, indicating some
 * status (e.g. a discussion is stickied, a user is an admin).
 *
 * A badge may have the following special attrs:
 *
 * - `type` The type of badge this is. This will be used to give the badge a
 *   class name of `Badge--{type}`.
 * - `icon` The name of an icon to show inside the badge.
 * - `label`
 *
 * All other attrs will be assigned as attributes on the badge element.
 */
var Badge = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(Badge, _Component);
  function Badge() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = Badge.prototype;
  _proto.view = function view() {
    var _this$attrs = this.attrs,
      type = _this$attrs.type,
      iconName = _this$attrs.icon,
      label = _this$attrs.label,
      color = _this$attrs.color,
      _this$attrs$style = _this$attrs.style,
      style = _this$attrs$style === void 0 ? {} : _this$attrs$style,
      attrs = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(_this$attrs, _excluded);
    var className = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_6__["default"])('Badge', [type && "Badge--" + type], attrs.className, (0,_helpers_textContrastClass__WEBPACK_IMPORTED_MODULE_7__["default"])(color));
    var iconChild = iconName ? (0,_helpers_icon__WEBPACK_IMPORTED_MODULE_5__["default"])(iconName, {
      className: 'Badge-icon'
    }) : m.trust('&nbsp;');
    var newStyle = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, style, {
      '--badge-bg': color
    });
    var badgeAttrs = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, attrs, {
      className: className,
      style: newStyle
    });
    var badgeNode = m("div", badgeAttrs, iconChild);

    // If we don't have a tooltip label, don't render the tooltip component.
    if (!label) return badgeNode;
    return m(_Tooltip__WEBPACK_IMPORTED_MODULE_3__["default"], {
      text: label
    }, badgeNode);
  };
  return Badge;
}(_Component__WEBPACK_IMPORTED_MODULE_4__["default"]);


/***/ }),

/***/ "./src/common/components/Button.tsx":
/*!******************************************!*\
  !*** ./src/common/components/Button.tsx ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Button)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/fireDebugWarning */ "./src/common/helpers/fireDebugWarning.ts");
/* harmony import */ var _helpers_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");
/* harmony import */ var _utils_extractText__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/extractText */ "./src/common/utils/extractText.ts");
/* harmony import */ var _LoadingIndicator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./LoadingIndicator */ "./src/common/components/LoadingIndicator.tsx");



var _excluded = ["type", "title", "aria-label", "icon", "disabled", "loading", "className", "class"];






/**
 * The `Button` component defines an element which, when clicked, performs an
 * action.
 *
 * Other attrs will be assigned as attributes on the `<button>` element.
 *
 * Note that a Button has no default class names. This is because a Button can
 * be used to represent any generic clickable control, like a menu item. Common
 * styles can be applied by providing `className="Button"` to the Button component.
 */
var Button = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(Button, _Component);
  function Button() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = Button.prototype;
  _proto.view = function view(vnode) {
    var _this$attrs = this.attrs,
      type = _this$attrs.type,
      title = _this$attrs.title,
      ariaLabel = _this$attrs['aria-label'],
      iconName = _this$attrs.icon,
      disabled = _this$attrs.disabled,
      loading = _this$attrs.loading,
      className = _this$attrs.className,
      _class = _this$attrs["class"],
      attrs = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(_this$attrs, _excluded);

    // If no `type` attr provided, set to "button"
    type || (type = 'button');

    // Use `title` attribute as `aria-label` if none provided
    ariaLabel || (ariaLabel = title);

    // If given a translation object, extract the text.
    if (typeof ariaLabel === 'object') {
      ariaLabel = (0,_utils_extractText__WEBPACK_IMPORTED_MODULE_7__["default"])(ariaLabel);
    }
    if (disabled || loading) {
      delete attrs.onclick;
    }
    className = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_6__["default"])(_class, className, {
      hasIcon: iconName,
      disabled: disabled || loading,
      loading: loading
    });
    var buttonAttrs = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
      disabled: disabled,
      className: className,
      type: type,
      'aria-label': ariaLabel
    }, attrs);
    return m("button", buttonAttrs, this.getButtonContent(vnode.children));
  };
  _proto.oncreate = function oncreate(vnode) {
    var _this$element;
    _Component.prototype.oncreate.call(this, vnode);
    var ariaLabel = this.attrs['aria-label'];
    if (this.view === Button.prototype.view && !ariaLabel && !(0,_utils_extractText__WEBPACK_IMPORTED_MODULE_7__["default"])(vnode.children) && !((_this$element = this.element) != null && _this$element.getAttribute != null && _this$element.getAttribute('aria-label'))) {
      (0,_helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_4__["default"])('[Flarum Accessibility Warning] Button has no content and no accessible label. This means that screen-readers will not be able to interpret its meaning and just read "Button". Consider providing accessible text via the `aria-label` attribute. https://web.dev/button-name', this.element);
    }
  }

  /**
   * Get the template for the button's content.
   */;
  _proto.getButtonContent = function getButtonContent(children) {
    var iconName = this.attrs.icon;
    return [iconName && (0,_helpers_icon__WEBPACK_IMPORTED_MODULE_5__["default"])(iconName, {
      className: 'Button-icon'
    }), children && m("span", {
      className: "Button-label"
    }, children), this.attrs.loading && m(_LoadingIndicator__WEBPACK_IMPORTED_MODULE_8__["default"], {
      size: "small",
      display: "inline"
    })];
  };
  return Button;
}(_Component__WEBPACK_IMPORTED_MODULE_3__["default"]);


/***/ }),

/***/ "./src/common/components/Checkbox.tsx":
/*!********************************************!*\
  !*** ./src/common/components/Checkbox.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Checkbox)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _LoadingIndicator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LoadingIndicator */ "./src/common/components/LoadingIndicator.tsx");
/* harmony import */ var _helpers_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");
/* harmony import */ var _utils_withAttr__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/withAttr */ "./src/common/utils/withAttr.ts");






/**
 * The `Checkbox` component defines a checkbox input.
 *
 * ### Attrs
 *
 * - `state` Whether or not the checkbox is checked.
 * - `className` The class name for the root element.
 * - `disabled` Whether or not the checkbox is disabled.
 * - `loading` Whether or not the checkbox is loading.
 * - `onchange` A callback to run when the checkbox is checked/unchecked.
 * - `children` A text label to display next to the checkbox.
 */
var Checkbox = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Checkbox, _Component);
  function Checkbox() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = Checkbox.prototype;
  _proto.view = function view(vnode) {
    var className = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_4__["default"])(['Checkbox', this.attrs.state ? 'on' : 'off', this.attrs.className, this.attrs.loading && 'loading', this.attrs.disabled && 'disabled']);
    return m("label", {
      className: className
    }, m("input", {
      type: "checkbox",
      checked: this.attrs.state,
      disabled: this.attrs.disabled,
      onchange: (0,_utils_withAttr__WEBPACK_IMPORTED_MODULE_5__["default"])('checked', this.onchange.bind(this))
    }), m("div", {
      className: "Checkbox-display",
      "aria-hidden": "true"
    }, this.getDisplay()), vnode.children);
  }

  /**
   * Get the template for the checkbox's display (tick/cross icon).
   */;
  _proto.getDisplay = function getDisplay() {
    return this.attrs.loading ? m(_LoadingIndicator__WEBPACK_IMPORTED_MODULE_2__["default"], {
      display: "unset",
      size: "small"
    }) : (0,_helpers_icon__WEBPACK_IMPORTED_MODULE_3__["default"])(this.attrs.state ? 'fas fa-check' : 'fas fa-times');
  }

  /**
   * Run a callback when the state of the checkbox is changed.
   */;
  _proto.onchange = function onchange(checked) {
    if (this.attrs.onchange) this.attrs.onchange(checked, this);
  };
  return Checkbox;
}(_Component__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/components/ColorPreviewInput.tsx":
/*!*****************************************************!*\
  !*** ./src/common/components/ColorPreviewInput.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ColorPreviewInput)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");
/* harmony import */ var _helpers_icon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/icon */ "./src/common/helpers/icon.tsx");


var _excluded = ["className", "id"];



var ColorPreviewInput = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(ColorPreviewInput, _Component);
  function ColorPreviewInput() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = ColorPreviewInput.prototype;
  _proto.view = function view(vnode) {
    var _this$attrs = this.attrs,
      className = _this$attrs.className,
      id = _this$attrs.id,
      attrs = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(_this$attrs, _excluded);
    attrs.type || (attrs.type = 'text');

    // If the input is a 3 digit hex code, convert it to 6 digits.
    if (attrs.value.length === 4) {
      attrs.value = attrs.value.replace(/#([a-f0-9])([a-f0-9])([a-f0-9])/, '#$1$1$2$2$3$3');
    }
    return m("div", {
      className: "ColorInput"
    }, m("input", Object.assign({
      className: (0,_utils_classList__WEBPACK_IMPORTED_MODULE_3__["default"])('FormControl', className),
      id: id
    }, attrs)), m("span", {
      className: "ColorInput-icon",
      role: "presentation"
    }, (0,_helpers_icon__WEBPACK_IMPORTED_MODULE_4__["default"])('fas fa-exclamation-circle')), m("input", Object.assign({
      className: "ColorInput-preview"
    }, attrs, {
      type: "color"
    })));
  };
  return ColorPreviewInput;
}(_Component__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/components/Dropdown.tsx":
/*!********************************************!*\
  !*** ./src/common/components/Dropdown.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Dropdown)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _helpers_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _helpers_listItems__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/listItems */ "./src/common/helpers/listItems.tsx");
/* harmony import */ var _utils_extractText__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/extractText */ "./src/common/utils/extractText.ts");






/**
 * The `Dropdown` component displays a button which, when clicked, shows a
 * dropdown menu beneath it.
 *
 * The children will be displayed as a list inside the dropdown menu.
 */
var Dropdown = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Dropdown, _Component);
  function Dropdown() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Component.call.apply(_Component, [this].concat(args)) || this;
    _this.showing = false;
    return _this;
  }
  Dropdown.initAttrs = function initAttrs(attrs) {
    var _attrs$caretIcon;
    attrs.className || (attrs.className = '');
    attrs.buttonClassName || (attrs.buttonClassName = '');
    attrs.menuClassName || (attrs.menuClassName = '');
    attrs.label || (attrs.label = '');
    (_attrs$caretIcon = attrs.caretIcon) != null ? _attrs$caretIcon : attrs.caretIcon = 'fas fa-caret-down';
    attrs.accessibleToggleLabel || (attrs.accessibleToggleLabel = (0,_utils_extractText__WEBPACK_IMPORTED_MODULE_5__["default"])(_common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.dropdown.toggle_dropdown_accessible_label')));
  };
  var _proto = Dropdown.prototype;
  _proto.view = function view(vnode) {
    var items = vnode.children ? (0,_helpers_listItems__WEBPACK_IMPORTED_MODULE_4__["default"])(vnode.children) : [];
    var renderItems = this.attrs.lazyDraw ? this.showing : true;
    return m("div", {
      className: 'ButtonGroup Dropdown dropdown ' + this.attrs.className + ' itemCount' + items.length + (this.showing ? ' open' : '')
    }, this.getButton(vnode.children), renderItems && this.getMenu(items));
  };
  _proto.oncreate = function oncreate(vnode) {
    var _this2 = this;
    _Component.prototype.oncreate.call(this, vnode);

    // When opening the dropdown menu, work out if the menu goes beyond the
    // bottom of the viewport. If it does, we will apply class to make it show
    // above the toggle button instead of below it.
    this.$().on('shown.bs.dropdown', function () {
      var _$menu$offset$top, _$menu$offset, _$menu$height, _$$scrollTop, _$$height, _$menu$offset2, _$menu$offset$left, _$menu$offset3, _$menu$width, _$$scrollLeft, _$$width;
      var _this2$attrs = _this2.attrs,
        lazyDraw = _this2$attrs.lazyDraw,
        onshow = _this2$attrs.onshow;
      _this2.showing = true;

      // If using lazy drawing, redraw before calling `onshow` function
      // to make sure the menu DOM exists in case the callback tries to use it.
      if (lazyDraw) {
        m.redraw.sync();
      }
      if (typeof onshow === 'function') {
        onshow();
      }

      // If not using lazy drawing, keep previous functionality
      // of redrawing after calling onshow()
      if (!lazyDraw) {
        m.redraw();
      }
      var $menu = _this2.$('.Dropdown-menu');
      var isRight = $menu.hasClass('Dropdown-menu--right');
      var top = (_$menu$offset$top = (_$menu$offset = $menu.offset()) == null ? void 0 : _$menu$offset.top) != null ? _$menu$offset$top : 0;
      var height = (_$menu$height = $menu.height()) != null ? _$menu$height : 0;
      var windowSrollTop = (_$$scrollTop = $(window).scrollTop()) != null ? _$$scrollTop : 0;
      var windowHeight = (_$$height = $(window).height()) != null ? _$$height : 0;
      $menu.removeClass('Dropdown-menu--top Dropdown-menu--right');
      $menu.toggleClass('Dropdown-menu--top', top + height > windowSrollTop + windowHeight);
      if ((((_$menu$offset2 = $menu.offset()) == null ? void 0 : _$menu$offset2.top) || 0) < 0) {
        $menu.removeClass('Dropdown-menu--top');
      }
      var left = (_$menu$offset$left = (_$menu$offset3 = $menu.offset()) == null ? void 0 : _$menu$offset3.left) != null ? _$menu$offset$left : 0;
      var width = (_$menu$width = $menu.width()) != null ? _$menu$width : 0;
      var windowScrollLeft = (_$$scrollLeft = $(window).scrollLeft()) != null ? _$$scrollLeft : 0;
      var windowWidth = (_$$width = $(window).width()) != null ? _$$width : 0;
      $menu.toggleClass('Dropdown-menu--right', isRight || left + width > windowScrollLeft + windowWidth);
    });
    this.$().on('hidden.bs.dropdown', function () {
      _this2.showing = false;
      if (_this2.attrs.onhide) {
        _this2.attrs.onhide();
      }
      m.redraw();
    });
  }

  /**
   * Get the template for the button.
   */;
  _proto.getButton = function getButton(children) {
    return m("button", {
      className: 'Dropdown-toggle ' + this.attrs.buttonClassName,
      "aria-haspopup": "menu",
      "aria-label": this.attrs.accessibleToggleLabel,
      "data-toggle": "dropdown",
      onclick: this.attrs.onclick
    }, this.getButtonContent(children));
  }

  /**
   * Get the template for the button's content.
   */;
  _proto.getButtonContent = function getButtonContent(children) {
    return [this.attrs.icon ? (0,_helpers_icon__WEBPACK_IMPORTED_MODULE_3__["default"])(this.attrs.icon, {
      className: 'Button-icon'
    }) : '', m("span", {
      className: "Button-label"
    }, this.attrs.label), this.attrs.caretIcon ? (0,_helpers_icon__WEBPACK_IMPORTED_MODULE_3__["default"])(this.attrs.caretIcon, {
      className: 'Button-caret'
    }) : ''];
  };
  _proto.getMenu = function getMenu(items) {
    return m("ul", {
      className: 'Dropdown-menu dropdown-menu ' + this.attrs.menuClassName
    }, items);
  };
  return Dropdown;
}(_Component__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/components/EditUserModal.tsx":
/*!*************************************************!*\
  !*** ./src/common/components/EditUserModal.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EditUserModal)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");
/* harmony import */ var _Modal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Modal */ "./src/common/components/Modal.tsx");
/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _GroupBadge__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GroupBadge */ "./src/common/components/GroupBadge.tsx");
/* harmony import */ var _models_Group__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/Group */ "./src/common/models/Group.ts");
/* harmony import */ var _utils_extractText__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/extractText */ "./src/common/utils/extractText.ts");
/* harmony import */ var _utils_ItemList__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _utils_Stream__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/Stream */ "./src/common/utils/Stream.ts");









var EditUserModal = /*#__PURE__*/function (_Modal) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(EditUserModal, _Modal);
  function EditUserModal() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Modal.call.apply(_Modal, [this].concat(args)) || this;
    _this.username = void 0;
    _this.email = void 0;
    _this.isEmailConfirmed = void 0;
    _this.setPassword = void 0;
    _this.password = void 0;
    _this.groups = {};
    return _this;
  }
  var _proto = EditUserModal.prototype;
  _proto.oninit = function oninit(vnode) {
    var _this2 = this;
    _Modal.prototype.oninit.call(this, vnode);
    var user = this.attrs.user;
    this.username = (0,_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])(user.username() || '');
    this.email = (0,_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])(user.email() || '');
    this.isEmailConfirmed = (0,_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])(user.isEmailConfirmed() || false);
    this.setPassword = (0,_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])(false);
    this.password = (0,_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])(user.password() || '');
    var userGroups = user.groups() || [];
    _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].store.all('groups').filter(function (group) {
      return ![_models_Group__WEBPACK_IMPORTED_MODULE_5__["default"].GUEST_ID, _models_Group__WEBPACK_IMPORTED_MODULE_5__["default"].MEMBER_ID].includes(group.id());
    }).forEach(function (group) {
      return _this2.groups[group.id()] = (0,_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])(userGroups.includes(group));
    });
  };
  _proto.className = function className() {
    return 'EditUserModal Modal--small';
  };
  _proto.title = function title() {
    return _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.title');
  };
  _proto.content = function content() {
    var fields = this.fields().toArray();
    return m("div", {
      className: "Modal-body"
    }, fields.length > 1 ? m("div", {
      className: "Form"
    }, this.fields().toArray()) : _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.nothing_available'));
  };
  _proto.fields = function fields() {
    var _this3 = this;
    var items = new _utils_ItemList__WEBPACK_IMPORTED_MODULE_7__["default"]();
    if (this.attrs.user.canEditCredentials()) {
      items.add('username', m("div", {
        className: "Form-group"
      }, m("label", null, _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.username_heading')), m("input", {
        className: "FormControl",
        placeholder: (0,_utils_extractText__WEBPACK_IMPORTED_MODULE_6__["default"])(_common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.username_label')),
        bidi: this.username,
        disabled: this.nonAdminEditingAdmin()
      })), 40);
      if (_common_app__WEBPACK_IMPORTED_MODULE_1__["default"].session.user !== this.attrs.user) {
        items.add('email', m("div", {
          className: "Form-group"
        }, m("label", null, _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.email_heading')), m("div", null, m("input", {
          className: "FormControl",
          placeholder: (0,_utils_extractText__WEBPACK_IMPORTED_MODULE_6__["default"])(_common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.email_label')),
          bidi: this.email,
          disabled: this.nonAdminEditingAdmin()
        })), !this.isEmailConfirmed() && this.userIsAdmin(_common_app__WEBPACK_IMPORTED_MODULE_1__["default"].session.user) && m("div", null, m(_Button__WEBPACK_IMPORTED_MODULE_3__["default"], {
          className: "Button Button--block",
          loading: this.loading,
          onclick: this.activate.bind(this)
        }, _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.activate_button')))), 30);
        items.add('password', m("div", {
          className: "Form-group"
        }, m("label", null, _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.password_heading')), m("div", null, m("label", {
          className: "checkbox"
        }, m("input", {
          type: "checkbox",
          onchange: function onchange(e) {
            var target = e.target;
            _this3.setPassword(target.checked);
            m.redraw.sync();
            if (target.checked) _this3.$('[name=password]').select();
            e.redraw = false;
          },
          disabled: this.nonAdminEditingAdmin()
        }), _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.set_password_label')), this.setPassword() && m("input", {
          className: "FormControl",
          type: "password",
          name: "password",
          placeholder: (0,_utils_extractText__WEBPACK_IMPORTED_MODULE_6__["default"])(_common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.password_label')),
          bidi: this.password,
          disabled: this.nonAdminEditingAdmin()
        }))), 20);
      }
    }
    if (this.attrs.user.canEditGroups()) {
      items.add('groups', m("div", {
        className: "Form-group EditUserModal-groups"
      }, m("label", null, _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.groups_heading')), m("div", null, Object.keys(this.groups).map(function (id) {
        return _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].store.getById('groups', id);
      }).filter(Boolean).map(function (group) {
        return (
          // Necessary because filter(Boolean) doesn't narrow out falsy values.
          group && m("label", {
            className: "checkbox"
          }, m("input", {
            type: "checkbox",
            bidi: _this3.groups[group.id()],
            disabled: group.id() === _models_Group__WEBPACK_IMPORTED_MODULE_5__["default"].ADMINISTRATOR_ID && (_this3.attrs.user === _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].session.user || !_this3.userIsAdmin(_common_app__WEBPACK_IMPORTED_MODULE_1__["default"].session.user))
          }), m(_GroupBadge__WEBPACK_IMPORTED_MODULE_4__["default"], {
            group: group,
            label: null
          }), " ", group.nameSingular())
        );
      }))), 10);
    }
    items.add('submit', m("div", {
      className: "Form-group"
    }, m(_Button__WEBPACK_IMPORTED_MODULE_3__["default"], {
      className: "Button Button--primary",
      type: "submit",
      loading: this.loading
    }, _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.edit_user.submit_button'))), -10);
    return items;
  };
  _proto.activate = function activate() {
    var _this4 = this;
    this.loading = true;
    var data = {
      username: this.username(),
      isEmailConfirmed: true
    };
    this.attrs.user.save(data, {
      errorHandler: this.onerror.bind(this)
    }).then(function () {
      _this4.isEmailConfirmed(true);
      _this4.loading = false;
      m.redraw();
    })["catch"](function () {
      _this4.loading = false;
      m.redraw();
    });
  };
  _proto.data = function data() {
    var _this5 = this;
    var data = {};
    var relationships = {};
    if (this.attrs.user.canEditCredentials() && !this.nonAdminEditingAdmin()) {
      data.username = this.username();
      if (_common_app__WEBPACK_IMPORTED_MODULE_1__["default"].session.user !== this.attrs.user) {
        data.email = this.email();
      }
      if (this.setPassword()) {
        data.password = this.password();
      }
    }
    if (this.attrs.user.canEditGroups()) {
      relationships.groups = Object.keys(this.groups).filter(function (id) {
        return _this5.groups[id]();
      }).map(function (id) {
        return _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].store.getById('groups', id);
      }).filter(function (g) {
        return g instanceof _models_Group__WEBPACK_IMPORTED_MODULE_5__["default"];
      });
    }
    data.relationships = relationships;
    return data;
  };
  _proto.onsubmit = function onsubmit(e) {
    var _this6 = this;
    e.preventDefault();
    this.loading = true;
    this.attrs.user.save(this.data(), {
      errorHandler: this.onerror.bind(this)
    }).then(this.hide.bind(this))["catch"](function () {
      _this6.loading = false;
      m.redraw();
    });
  };
  _proto.nonAdminEditingAdmin = function nonAdminEditingAdmin() {
    return this.userIsAdmin(this.attrs.user) && !this.userIsAdmin(_common_app__WEBPACK_IMPORTED_MODULE_1__["default"].session.user);
  }

  /**
   * @internal
   */;
  _proto.userIsAdmin = function userIsAdmin(user) {
    return !!((user == null ? void 0 : user.groups()) || []).some(function (g) {
      return (g == null ? void 0 : g.id()) === _models_Group__WEBPACK_IMPORTED_MODULE_5__["default"].ADMINISTRATOR_ID;
    });
  };
  return EditUserModal;
}(_Modal__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/components/GroupBadge.tsx":
/*!**********************************************!*\
  !*** ./src/common/components/GroupBadge.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ GroupBadge)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Badge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Badge */ "./src/common/components/Badge.tsx");


var GroupBadge = /*#__PURE__*/function (_Badge) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(GroupBadge, _Badge);
  function GroupBadge() {
    return _Badge.apply(this, arguments) || this;
  }
  GroupBadge.initAttrs = function initAttrs(attrs) {
    _Badge.initAttrs.call(this, attrs);
    if (attrs.group) {
      attrs.icon = attrs.group.icon() || '';
      attrs.color = attrs.group.color() || '';
      attrs.label = typeof attrs.label === 'undefined' ? attrs.group.nameSingular() : attrs.label;
      attrs.type = 'group--' + attrs.group.id();
      delete attrs.group;
    }
  };
  return GroupBadge;
}(_Badge__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/components/LoadingIndicator.tsx":
/*!****************************************************!*\
  !*** ./src/common/components/LoadingIndicator.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ LoadingIndicator)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");


var _excluded = ["display", "size", "containerClassName", "className"];



/**
 * The `LoadingIndicator` component displays a simple CSS-based loading spinner.
 *
 * To set a custom color, use the CSS `color` property.
 *
 * To increase spacing around the spinner, use the CSS `height` property on the
 * spinner's **container**. Setting the `display` attribute to `block` will set
 * a height of `100px` by default.
 *
 * To apply a custom size to the loading indicator, set the `--size` and
 * `--thickness` CSS custom properties on the loading indicator container.
 *
 * If you *really* want to change how this looks as part of your custom theme,
 * you can override the `border-radius` and `border` then set either a
 * background image, or use `content: "\<glyph>"` (e.g. `content: "\f1ce"`)
 * and `font-family: 'Font Awesome 5 Free'` to set an FA icon if you'd rather.
 *
 * ### Attrs
 *
 * - `containerClassName` Class name(s) to apply to the indicator's parent
 * - `className` Class name(s) to apply to the indicator itself
 * - `display` Determines how the spinner should be displayed (`inline`, `block` (default) or `unset`)
 * - `size` Size of the loading indicator (`small`, `medium` or `large`)
 * - `containerAttrs` Optional attrs to be applied to the container DOM element
 *
 * All other attrs will be assigned as attributes on the DOM element.
 */
var LoadingIndicator = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(LoadingIndicator, _Component);
  function LoadingIndicator() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = LoadingIndicator.prototype;
  _proto.view = function view() {
    var _this$attrs = this.attrs,
      _this$attrs$display = _this$attrs.display,
      display = _this$attrs$display === void 0 ? 'block' : _this$attrs$display,
      _this$attrs$size = _this$attrs.size,
      size = _this$attrs$size === void 0 ? 'medium' : _this$attrs$size,
      containerClassName = _this$attrs.containerClassName,
      className = _this$attrs.className,
      attrs = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(_this$attrs, _excluded);
    var completeClassName = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_4__["default"])('LoadingIndicator', className);
    var completeContainerClassName = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_4__["default"])('LoadingIndicator-container', display !== 'unset' && "LoadingIndicator-container--" + display, size && "LoadingIndicator-container--" + size, containerClassName);
    return m("div", Object.assign({
      "aria-label": _common_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.lib.loading_indicator.accessible_label'),
      role: "status"
    }, attrs.containerAttrs, {
      "data-size": size,
      className: completeContainerClassName
    }), m("div", Object.assign({
      "aria-hidden": "true",
      className: completeClassName
    }, attrs)));
  };
  return LoadingIndicator;
}(_Component__WEBPACK_IMPORTED_MODULE_3__["default"]);


/***/ }),

/***/ "./src/common/components/Modal.tsx":
/*!*****************************************!*\
  !*** ./src/common/components/Modal.tsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Modal)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "../../../node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _Alert__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Alert */ "./src/common/components/Alert.tsx");
/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../helpers/fireDebugWarning */ "./src/common/helpers/fireDebugWarning.ts");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");








/**
 * The `Modal` component displays a modal dialog, wrapped in a form. Subclasses
 * should implement the `className`, `title`, and `content` methods.
 */
var Modal = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(Modal, _Component);
  function Modal() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Component.call.apply(_Component, [this].concat(args)) || this;
    _this.loading = false;
    _this.alertAttrs = null;
    return _this;
  }
  var _proto = Modal.prototype;
  _proto.oninit = function oninit(vnode) {
    var _this2 = this;
    _Component.prototype.oninit.call(this, vnode);

    // TODO: [Flarum 2.0] Remove the code below.
    // This code prevents extensions which do not implement all abstract methods of this class from breaking
    // the forum frontend. Without it, function calls would would error rather than returning `undefined.`

    var missingMethods = [];
    ['className', 'title', 'content', 'onsubmit'].forEach(function (method) {
      if (!_this2[method]) {
        _this2[method] = function () {};
        missingMethods.push(method);
      }
    });
    if (missingMethods.length > 0) {
      (0,_helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_6__["default"])("Modal `" + this.constructor.name + "` does not implement all abstract methods of the Modal super class. Missing methods: " + missingMethods.join(', ') + ".");
    }
  };
  _proto.oncreate = function oncreate(vnode) {
    var _this3 = this;
    _Component.prototype.oncreate.call(this, vnode);
    this.attrs.animateShow(function () {
      return _this3.onready();
    });
  };
  _proto.onbeforeremove = function onbeforeremove(vnode) {
    _Component.prototype.onbeforeremove.call(this, vnode);

    // If the global modal state currently contains a modal,
    // we've just opened up a new one, and accordingly,
    // we don't need to show a hide animation.
    if (!this.attrs.state.modal) {
      // Here, we ensure that the animation has time to complete.
      // See https://mithril.js.org/lifecycle-methods.html#onbeforeremove
      // Bootstrap's Modal.TRANSITION_DURATION is 300 ms.
      return new Promise(function (resolve) {
        return setTimeout(resolve, 300);
      });
    }
  }

  /**
   * @todo split into FormModal and Modal in 2.0
   */;
  _proto.view = function view() {
    var _this4 = this;
    if (this.alertAttrs) {
      this.alertAttrs.dismissible = false;
    }
    return m("div", {
      className: (0,_utils_classList__WEBPACK_IMPORTED_MODULE_7__["default"])('Modal modal-dialog fade', this.className())
    }, m("div", {
      className: "Modal-content"
    }, this.dismissibleOptions.viaCloseButton && m("div", {
      className: "Modal-close App-backControl"
    }, m(_Button__WEBPACK_IMPORTED_MODULE_5__["default"], {
      icon: "fas fa-times",
      onclick: function onclick() {
        return _this4.hide();
      },
      className: "Button Button--icon Button--link",
      "aria-label": _common_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.lib.modal.close')
    })), m("form", {
      onsubmit: this.onsubmit.bind(this)
    }, m("div", {
      className: "Modal-header"
    }, m("h3", {
      className: "App-titleControl App-titleControl--text"
    }, this.title())), !!this.alertAttrs && m("div", {
      className: "Modal-alert"
    }, m(_Alert__WEBPACK_IMPORTED_MODULE_4__["default"], this.alertAttrs)), this.content())));
  }

  /**
   * Get the class name to apply to the modal.
   */;
  /**
   * Handle the modal form's submit event.
   */
  _proto.onsubmit = function onsubmit(e) {
    // ...
  }

  /**
   * Callback executed when the modal is shown and ready to be interacted with.
   *
   * @remark Focuses the first input in the modal.
   */;
  _proto.onready = function onready() {
    this.$().find('input, select, textarea').first().trigger('focus').trigger('select');
  }

  /**
   * Hides the modal.
   */;
  _proto.hide = function hide() {
    this.attrs.animateHide();
  }

  /**
   * Sets `loading` to false and triggers a redraw.
   */;
  _proto.loaded = function loaded() {
    this.loading = false;
    m.redraw();
  }

  /**
   * Shows an alert describing an error returned from the API, and gives focus to
   * the first relevant field involved in the error.
   */;
  _proto.onerror = function onerror(error) {
    var _error$response;
    this.alertAttrs = error.alert;
    m.redraw();
    if (error.status === 422 && (_error$response = error.response) != null && _error$response.errors) {
      this.$('form [name=' + error.response.errors[0].source.pointer.replace('/data/attributes/', '') + ']').trigger('select');
    } else {
      this.onready();
    }
  };
  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(Modal, [{
    key: "dismissibleOptions",
    get: function get() {
      return this.constructor.dismissibleOptions;
    }
  }], [{
    key: "dismissibleOptions",
    get: function get() {
      // If someone sets this to `false`, provide the same behaviour as previous versions of Flarum.
      if (!this.isDismissible) {
        return {
          isDismissible: false,
          viaCloseButton: false,
          viaEscKey: false,
          viaBackdropClick: false
        };
      }
      return {
        isDismissible: true,
        viaCloseButton: this.isDismissibleViaCloseButton,
        viaEscKey: this.isDismissibleViaEscKey,
        viaBackdropClick: this.isDismissibleViaBackdropClick
      };
    }
  }]);
  return Modal;
}(_Component__WEBPACK_IMPORTED_MODULE_3__["default"]);
Modal.isDismissible = true;
Modal.isDismissibleViaCloseButton = true;
Modal.isDismissibleViaEscKey = true;
Modal.isDismissibleViaBackdropClick = true;


/***/ }),

/***/ "./src/common/components/ModalManager.tsx":
/*!************************************************!*\
  !*** ./src/common/components/ModalManager.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ModalManager)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "../../../node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _utils_focusTrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/focusTrap */ "./src/common/utils/focusTrap.ts");
/* harmony import */ var body_scroll_lock__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! body-scroll-lock */ "../../../node_modules/body-scroll-lock/lib/bodyScrollLock.esm.js");





/**
 * The `ModalManager` component manages one or more modal dialogs. Stacking modals
 * is supported. Multiple dialogs can be shown at once; loading a new component
 * into the ModalManager will overwrite the previous one.
 */
var ModalManager = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(ModalManager, _Component);
  function ModalManager() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Component.call.apply(_Component, [this].concat(args)) || this;
    _this.focusTrap = void 0;
    _this.lastSetFocusTrap = void 0;
    _this.modalClosing = false;
    _this.keyUpListener = null;
    return _this;
  }
  var _proto = ModalManager.prototype;
  _proto.view = function view(vnode) {
    var _this2 = this;
    return m('[', null, this.attrs.state.modalList.map(function (modal, i) {
      var Tag = modal == null ? void 0 : modal.componentClass;
      return m("div", {
        key: modal.key,
        className: "ModalManager modal",
        "data-modal-key": modal.key,
        "data-modal-number": i,
        role: "dialog",
        "aria-modal": "true",
        style: {
          '--modal-number': i
        },
        "aria-hidden": _this2.attrs.state.modal !== modal && 'true'
      }, !!Tag && [m(Tag, Object.assign({
        key: modal.key
      }, modal.attrs, {
        animateShow: _this2.animateShow.bind(_this2),
        animateHide: _this2.animateHide.bind(_this2),
        state: _this2.attrs.state
      })), /* This backdrop is invisible and used for outside clicks to close the modal. */
      m("div", {
        key: modal.key,
        className: "ModalManager-invisibleBackdrop",
        onclick: _this2.handlePossibleBackdropClick.bind(_this2)
      })]);
    }), this.attrs.state.backdropShown && m("div", {
      className: "Modal-backdrop backdrop",
      ontransitionend: this.onBackdropTransitionEnd.bind(this),
      "data-showing": !!this.attrs.state.modalList.length,
      style: {
        '--modal-count': this.attrs.state.modalList.length
      }
    }));
  };
  _proto.oncreate = function oncreate(vnode) {
    _Component.prototype.oncreate.call(this, vnode);
    this.keyUpListener = this.handleEscPress.bind(this);
    document.body.addEventListener('keyup', this.keyUpListener);
  };
  _proto.onbeforeremove = function onbeforeremove(vnode) {
    _Component.prototype.onbeforeremove.call(this, vnode);
    this.keyUpListener && document.body.removeEventListener('keyup', this.keyUpListener);
    this.keyUpListener = null;
  };
  _proto.onupdate = function onupdate(vnode) {
    var _this3 = this;
    _Component.prototype.onupdate.call(this, vnode);
    requestAnimationFrame(function () {
      try {
        var _document$getElementB2;
        // Main content should gain or lose `aria-hidden` when modals are shown/removed
        // See: http://web-accessibility.carnegiemuseums.org/code/dialogs/

        if (!_this3.attrs.state.isModalOpen()) {
          var _document$getElementB;
          (_document$getElementB = document.getElementById('app')) == null ? void 0 : _document$getElementB.setAttribute('aria-hidden', 'false');
          _this3.focusTrap.deactivate == null ? void 0 : _this3.focusTrap.deactivate();
          (0,body_scroll_lock__WEBPACK_IMPORTED_MODULE_4__.clearAllBodyScrollLocks)();
          return;
        }
        (_document$getElementB2 = document.getElementById('app')) == null ? void 0 : _document$getElementB2.setAttribute('aria-hidden', 'true');

        // Get current dialog key
        var dialogKey = _this3.attrs.state.modal.key;

        // Deactivate focus trap if there's a new dialog/closed
        if (_this3.focusTrap && _this3.lastSetFocusTrap !== dialogKey) {
          _this3.focusTrap.deactivate == null ? void 0 : _this3.focusTrap.deactivate();
          (0,body_scroll_lock__WEBPACK_IMPORTED_MODULE_4__.clearAllBodyScrollLocks)();
        }

        // Activate focus trap if there's a new dialog which is not trapped yet
        if (_this3.activeDialogElement && _this3.lastSetFocusTrap !== dialogKey) {
          _this3.focusTrap = (0,_utils_focusTrap__WEBPACK_IMPORTED_MODULE_3__.createFocusTrap)(_this3.activeDialogElement, {
            allowOutsideClick: true
          });
          _this3.focusTrap.activate == null ? void 0 : _this3.focusTrap.activate();
          (0,body_scroll_lock__WEBPACK_IMPORTED_MODULE_4__.disableBodyScroll)(_this3.activeDialogManagerElement, {
            reserveScrollBarGap: true
          });
        }

        // Update key of current opened modal
        _this3.lastSetFocusTrap = dialogKey;
      } catch (_unused) {
        // We can expect errors to occur here due to the nature of mithril rendering
      }
    });
  }

  /**
   * Get current active dialog
   */;
  _proto.animateShow = function animateShow(readyCallback) {
    var _this4 = this;
    if (readyCallback === void 0) {
      readyCallback = function readyCallback() {};
    }
    if (!this.attrs.state.modal) return;
    this.activeDialogElement.addEventListener('transitionend', function () {
      readyCallback();
    }, {
      once: true
    });
    requestAnimationFrame(function () {
      _this4.activeDialogElement.classList.add('in');
    });
  };
  _proto.animateHide = function animateHide(closedCallback) {
    var _this5 = this;
    if (closedCallback === void 0) {
      closedCallback = function closedCallback() {};
    }
    if (this.modalClosing) return;
    this.modalClosing = true;
    var afterModalClosedCallback = function afterModalClosedCallback() {
      _this5.modalClosing = false;

      // Close the dialog
      _this5.attrs.state.close();
      closedCallback();
    };
    this.activeDialogElement.addEventListener('transitionend', afterModalClosedCallback, {
      once: true
    });
    this.activeDialogElement.classList.remove('in');
    this.activeDialogElement.classList.add('out');
  };
  _proto.handleEscPress = function handleEscPress(e) {
    if (!this.attrs.state.modal) return;
    var dismissibleState = this.attrs.state.modal.componentClass.dismissibleOptions;

    // Close the dialog if the escape key was pressed
    // Check if closing via escape key is enabled
    if (e.key === 'Escape' && dismissibleState.viaEscKey) {
      e.preventDefault();
      this.animateHide();
    }
  };
  _proto.handlePossibleBackdropClick = function handlePossibleBackdropClick(e) {
    if (!this.attrs.state.modal || !this.attrs.state.modal.componentClass.dismissibleOptions.viaBackdropClick) return;
    this.animateHide();
  };
  _proto.onBackdropTransitionEnd = function onBackdropTransitionEnd(e) {
    if (e.propertyName === 'opacity') {
      var backdrop = e.currentTarget;
      if (backdrop.getAttribute('data-showing') === null) {
        // Backdrop is fading out
        this.attrs.state.backdropShown = false;
        m.redraw();
      }
    }
  };
  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(ModalManager, [{
    key: "activeDialogElement",
    get: function get() {
      var _this$attrs$state$mod;
      return document.body.querySelector(".ModalManager[data-modal-key=\"" + ((_this$attrs$state$mod = this.attrs.state.modal) == null ? void 0 : _this$attrs$state$mod.key) + "\"] .Modal");
    }

    /**
     * Get current active dialog
     */
  }, {
    key: "activeDialogManagerElement",
    get: function get() {
      var _this$attrs$state$mod2;
      return document.body.querySelector(".ModalManager[data-modal-key=\"" + ((_this$attrs$state$mod2 = this.attrs.state.modal) == null ? void 0 : _this$attrs$state$mod2.key) + "\"]");
    }
  }]);
  return ModalManager;
}(_Component__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/components/Navigation.tsx":
/*!**********************************************!*\
  !*** ./src/common/components/Navigation.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Navigation)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _LinkButton__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./LinkButton */ "./src/common/components/LinkButton.js");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");







/**
 * The `Navigation` component displays a set of navigation buttons. Typically
 * this is just a back button which pops the app's History. If the user is on
 * the root page and there is no history to pop, then in some instances it may
 * show a button that toggles the app's drawer.
 *
 * If the app has a pane, it will also include a 'pin' button which toggles the
 * pinned state of the pane.
 *
 * Accepts the following attrs:
 *
 * - `className` The name of a class to set on the root element.
 * - `drawer` Whether or not to show a button to toggle the app's drawer if
 *   there is no more history to pop.
 */
var Navigation = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Navigation, _Component);
  function Navigation() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = Navigation.prototype;
  _proto.view = function view() {
    var history = _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].history,
      pane = _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].pane;
    return m("div", {
      className: (0,_utils_classList__WEBPACK_IMPORTED_MODULE_5__["default"])('Navigation ButtonGroup', this.attrs.className),
      onmouseenter: pane && pane.show.bind(pane),
      onmouseleave: pane && pane.onmouseleave.bind(pane)
    }, history != null && history.canGoBack() ? [this.getBackButton(), this.getPaneButton()] : this.getDrawerButton());
  }

  /**
   * Get the back button.
   */;
  _proto.getBackButton = function getBackButton() {
    var history = _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].history;
    var previous = history == null ? void 0 : history.getPrevious();
    return m(_LinkButton__WEBPACK_IMPORTED_MODULE_4__["default"], {
      className: "Button Navigation-back Button--icon",
      href: history == null ? void 0 : history.backUrl(),
      icon: "fas fa-chevron-left",
      "aria-label": previous == null ? void 0 : previous.title,
      onclick: function onclick(e) {
        if (e.shiftKey || e.ctrlKey || e.metaKey || e.which === 2) return;
        e.preventDefault();
        history == null ? void 0 : history.back();
      }
    });
  }

  /**
   * Get the pane pinned toggle button.
   */;
  _proto.getPaneButton = function getPaneButton() {
    var pane = _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].pane;
    if (!pane || !pane.active) return null;
    return m(_Button__WEBPACK_IMPORTED_MODULE_3__["default"], {
      className: (0,_utils_classList__WEBPACK_IMPORTED_MODULE_5__["default"])('Button Button--icon Navigation-pin', {
        active: pane.pinned
      }),
      onclick: pane.togglePinned.bind(pane),
      icon: "fas fa-thumbtack"
    });
  }

  /**
   * Get the drawer toggle button.
   */;
  _proto.getDrawerButton = function getDrawerButton() {
    if (!this.attrs.drawer) return null;
    var drawer = _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].drawer;
    var user = _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].session.user;
    return m(_Button__WEBPACK_IMPORTED_MODULE_3__["default"], {
      className: (0,_utils_classList__WEBPACK_IMPORTED_MODULE_5__["default"])('Button Button--icon Navigation-drawer', {
        "new": user == null ? void 0 : user.newNotificationCount()
      }),
      onclick: function onclick(e) {
        e.stopPropagation();
        drawer.show();
      },
      icon: "fas fa-bars",
      "aria-label": _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.nav.drawer_button')
    });
  };
  return Navigation;
}(_Component__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/components/Page.tsx":
/*!****************************************!*\
  !*** ./src/common/components/Page.tsx ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Page)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../app */ "./src/common/app.ts");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _states_PageState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../states/PageState */ "./src/common/states/PageState.js");




/**
 * The `Page` component
 *
 * @abstract
 */
var Page = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Page, _Component);
  function Page() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Component.call.apply(_Component, [this].concat(args)) || this;
    _this.bodyClass = '';
    _this.scrollTopOnCreate = true;
    _this.useBrowserScrollRestoration = true;
    return _this;
  }
  var _proto = Page.prototype;
  _proto.oninit = function oninit(vnode) {
    _Component.prototype.oninit.call(this, vnode);
    _app__WEBPACK_IMPORTED_MODULE_1__["default"].previous = _app__WEBPACK_IMPORTED_MODULE_1__["default"].current;
    _app__WEBPACK_IMPORTED_MODULE_1__["default"].current = new _states_PageState__WEBPACK_IMPORTED_MODULE_3__["default"](this.constructor, {
      routeName: this.attrs.routeName
    });
    _app__WEBPACK_IMPORTED_MODULE_1__["default"].drawer.hide();
    _app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.close();
  };
  _proto.oncreate = function oncreate(vnode) {
    _Component.prototype.oncreate.call(this, vnode);
    if (this.bodyClass) {
      $('#app').addClass(this.bodyClass);
    }
    if (this.scrollTopOnCreate) {
      $(window).scrollTop(0);
    }
    if ('scrollRestoration' in history) {
      history.scrollRestoration = this.useBrowserScrollRestoration ? 'auto' : 'manual';
    }
  };
  _proto.onremove = function onremove(vnode) {
    _Component.prototype.onremove.call(this, vnode);
    if (this.bodyClass) {
      $('#app').removeClass(this.bodyClass);
    }
  };
  return Page;
}(_Component__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/components/RequestErrorModal.tsx":
/*!*****************************************************!*\
  !*** ./src/common/components/RequestErrorModal.tsx ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ RequestErrorModal)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Modal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Modal */ "./src/common/components/Modal.tsx");


var RequestErrorModal = /*#__PURE__*/function (_Modal) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(RequestErrorModal, _Modal);
  function RequestErrorModal() {
    return _Modal.apply(this, arguments) || this;
  }
  var _proto = RequestErrorModal.prototype;
  _proto.className = function className() {
    return 'RequestErrorModal Modal--large';
  };
  _proto.title = function title() {
    return !!this.attrs.error.xhr && this.attrs.error.xhr.status + " " + this.attrs.error.xhr.statusText;
  };
  _proto.content = function content() {
    var _this$attrs = this.attrs,
      error = _this$attrs.error,
      formattedError = _this$attrs.formattedError;
    var responseText;

    // If the error is already formatted, just add line endings;
    // else try to parse it as JSON and stringify it with indentation
    if (formattedError.length) {
      responseText = formattedError.join('\n\n');
    } else if (error.response) {
      responseText = JSON.stringify(error.response, null, 2);
    } else {
      responseText = error.responseText;
    }
    return m("div", {
      className: "Modal-body"
    }, m("pre", null, this.attrs.error.options.method, " ", this.attrs.error.options.url, m("br", null), m("br", null), responseText));
  };
  return RequestErrorModal;
}(_Modal__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/components/SelectDropdown.tsx":
/*!**************************************************!*\
  !*** ./src/common/components/SelectDropdown.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SelectDropdown)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Dropdown__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Dropdown */ "./src/common/components/Dropdown.tsx");
/* harmony import */ var _helpers_icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");




/**
 * Determines via a vnode is currently "active".
 * Due to changes in Mithril 2, attrs will not be instantiated until AFTER view()
 * is initially called on the parent component, so we can not always depend on the
 * active attr to determine which element should be displayed as the "active child".
 *
 * This is a temporary patch, and as so, is not exported / placed in utils.
 */
function isActive(vnode) {
  if (!vnode || typeof vnode !== 'object' || vnode instanceof Array) return false;
  var tag = vnode.tag;

  // Allow non-selectable dividers/headers to be added.
  if (typeof tag === 'string' && tag !== 'a' && tag !== 'button') return false;
  if ((typeof tag === 'object' || typeof tag === 'function') && 'initAttrs' in tag) {
    tag.initAttrs(vnode.attrs);
  }
  return (typeof tag === 'object' || typeof tag === 'function') && 'isActive' in tag ? tag.isActive(vnode.attrs) : vnode.attrs.active;
}
/**
 * The `SelectDropdown` component is the same as a `Dropdown`, except the toggle
 * button's label is set as the label of the first child which has a truthy
 * `active` prop.
 */
var SelectDropdown = /*#__PURE__*/function (_Dropdown) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(SelectDropdown, _Dropdown);
  function SelectDropdown() {
    return _Dropdown.apply(this, arguments) || this;
  }
  SelectDropdown.initAttrs = function initAttrs(attrs) {
    var _attrs$caretIcon;
    (_attrs$caretIcon = attrs.caretIcon) != null ? _attrs$caretIcon : attrs.caretIcon = 'fas fa-sort';
    _Dropdown.initAttrs.call(this, attrs);
    attrs.className = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_3__["default"])(attrs.className, 'Dropdown--select');
  };
  var _proto = SelectDropdown.prototype;
  _proto.getButtonContent = function getButtonContent(children) {
    var activeChild = children.find(isActive);
    var label = activeChild && typeof activeChild === 'object' && 'children' in activeChild && activeChild.children || this.attrs.defaultLabel;

    // @ts-ignore
    if (Array.isArray(label)) label = label[0];
    return [m("span", {
      className: "Button-label"
    }, label), this.attrs.caretIcon ? (0,_helpers_icon__WEBPACK_IMPORTED_MODULE_2__["default"])(this.attrs.caretIcon, {
      className: 'Button-caret'
    }) : null];
  };
  return SelectDropdown;
}(_Dropdown__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/components/SplitDropdown.tsx":
/*!*************************************************!*\
  !*** ./src/common/components/SplitDropdown.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SplitDropdown)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Dropdown__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Dropdown */ "./src/common/components/Dropdown.tsx");
/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _helpers_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");





/**
 * The `SplitDropdown` component is similar to `Dropdown`, but the first child
 * is displayed as its own button prior to the toggle button.
 */
var SplitDropdown = /*#__PURE__*/function (_Dropdown) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(SplitDropdown, _Dropdown);
  function SplitDropdown() {
    return _Dropdown.apply(this, arguments) || this;
  }
  SplitDropdown.initAttrs = function initAttrs(attrs) {
    _Dropdown.initAttrs.call(this, attrs);
    attrs.className = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_4__["default"])(attrs.className, 'Dropdown--split');
    attrs.menuClassName = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_4__["default"])(attrs.menuClassName, 'Dropdown-menu--right');
  };
  var _proto = SplitDropdown.prototype;
  _proto.getButton = function getButton(children) {
    // Make a copy of the attrs of the first child component. We will assign
    // these attrs to a new button, so that it has exactly the same behaviour as
    // the first child.
    var firstChild = this.getFirstChild(children);
    var buttonAttrs = Object.assign({}, firstChild == null ? void 0 : firstChild.attrs);
    buttonAttrs.className = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_4__["default"])(buttonAttrs.className, 'SplitDropdown-button Button', this.attrs.buttonClassName);
    return m('[', null, m(_Button__WEBPACK_IMPORTED_MODULE_2__["default"], buttonAttrs, firstChild.children), m("button", {
      className: 'Dropdown-toggle Button Button--icon ' + this.attrs.buttonClassName,
      "aria-haspopup": "menu",
      "aria-label": this.attrs.accessibleToggleLabel,
      "data-toggle": "dropdown"
    }, this.attrs.icon ? (0,_helpers_icon__WEBPACK_IMPORTED_MODULE_3__["default"])(this.attrs.icon, {
      className: 'Button-icon'
    }) : null, (0,_helpers_icon__WEBPACK_IMPORTED_MODULE_3__["default"])('fas fa-caret-down', {
      className: 'Button-caret'
    })));
  }

  /**
   * Get the first child. If the first child is an array, the first item in that
   * array will be returned.
   */;
  _proto.getFirstChild = function getFirstChild(children) {
    var firstChild = children;
    while (firstChild instanceof Array) {
      firstChild = firstChild[0];
    }
    return firstChild;
  };
  return SplitDropdown;
}(_Dropdown__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/components/Switch.tsx":
/*!******************************************!*\
  !*** ./src/common/components/Switch.tsx ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Switch)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");
/* harmony import */ var _Checkbox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Checkbox */ "./src/common/components/Checkbox.tsx");




/**
 * The `Switch` component is a `Checkbox`, but with a switch display instead of
 * a tick/cross one.
 */
var Switch = /*#__PURE__*/function (_Checkbox) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Switch, _Checkbox);
  function Switch() {
    return _Checkbox.apply(this, arguments) || this;
  }
  Switch.initAttrs = function initAttrs(attrs) {
    _Checkbox.initAttrs.call(this, attrs);
    attrs.className = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_1__["default"])(attrs.className, 'Checkbox--switch');
  };
  var _proto = Switch.prototype;
  _proto.getDisplay = function getDisplay() {
    return !!this.attrs.loading && _Checkbox.prototype.getDisplay.call(this);
  };
  return Switch;
}(_Checkbox__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/components/Tooltip.tsx":
/*!*******************************************!*\
  !*** ./src/common/components/Tooltip.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Tooltip)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");
/* harmony import */ var _utils_extractText__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/extractText */ "./src/common/utils/extractText.ts");


var _excluded = ["text", "tooltipVisible", "showOnFocus", "position", "ignoreTitleWarning", "html", "delay"];



/**
 * The `Tooltip` component is used to create a tooltip for an element. It
 * requires a single child element to be passed to it. Passing multiple
 * children or fragments will throw an error.
 *
 * You should use this for any tooltips you create to allow for backwards
 * compatibility when we switch to another tooltip library instead of
 * Bootstrap tooltips.
 *
 * If you need to pass multiple children, surround them with another element,
 * such as a `<span>` or `<div>`.
 *
 * **Note:** this component will overwrite the `title` attribute of the first
 * child you pass to it, as this is how the current tooltip system works in
 * Flarum. This shouldn't be an issue if you're using this component correctly.
 *
 * @example <caption>Basic usage</caption>
 *          <Tooltip text="You wish!">
 *            <Button>
 *              Click for free money!
 *            </Button>
 *          </Tooltip>
 *
 * @example <caption>Use of `position` and `showOnFocus` attrs</caption>
 *          <Tooltip text="Woah! That's cool!" position="bottom" showOnFocus>
 *            <span>3 replies</span>
 *          </Tooltip>
 *
 * @example <caption>Incorrect usage</caption>
 *          // This is wrong! Surround the children with a <span> or similar.
 *          <Tooltip text="This won't work">
 *            Click
 *            <a href="/">here</a>
 *          </Tooltip>
 */
var Tooltip = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(Tooltip, _Component);
  function Tooltip() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Component.call.apply(_Component, [this].concat(args)) || this;
    _this.firstChild = null;
    _this.childDomNode = null;
    _this.oldText = '';
    _this.oldVisibility = void 0;
    _this.shouldRecreateTooltip = false;
    _this.shouldChangeTooltipVisibility = false;
    return _this;
  }
  var _proto = Tooltip.prototype;
  _proto.view = function view(vnode) {
    /**
     * We know this will be a ChildArray and not a primitive as this
     * vnode is a component, not a text or trusted HTML vnode.
     */
    var children = vnode.children;

    // We remove these to get the remaining attrs to pass to the DOM element
    var _this$attrs = this.attrs,
      text = _this$attrs.text,
      tooltipVisible = _this$attrs.tooltipVisible,
      _this$attrs$showOnFoc = _this$attrs.showOnFocus,
      showOnFocus = _this$attrs$showOnFoc === void 0 ? true : _this$attrs$showOnFoc,
      _this$attrs$position = _this$attrs.position,
      position = _this$attrs$position === void 0 ? 'top' : _this$attrs$position,
      _this$attrs$ignoreTit = _this$attrs.ignoreTitleWarning,
      ignoreTitleWarning = _this$attrs$ignoreTit === void 0 ? false : _this$attrs$ignoreTit,
      _this$attrs$html = _this$attrs.html,
      html = _this$attrs$html === void 0 ? false : _this$attrs$html,
      _this$attrs$delay = _this$attrs.delay,
      delay = _this$attrs$delay === void 0 ? 0 : _this$attrs$delay,
      attrs = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(_this$attrs, _excluded);
    if (this.attrs.title && !ignoreTitleWarning) {
      console.warn('`title` attribute was passed to Tooltip component. Was this intentional? Tooltip content should be passed to the `text` attr instead.');
    }
    var realText = this.getRealText();

    // We need to recreate the tooltip if the text has changed
    if (realText !== this.oldText) {
      this.oldText = realText;
      this.shouldRecreateTooltip = true;
    }
    if (tooltipVisible !== this.oldVisibility) {
      this.oldVisibility = this.attrs.tooltipVisible;
      this.shouldChangeTooltipVisibility = true;
    }

    // We'll try our best to detect any issues created by devs before they cause any weird effects.
    // Throwing an error will prevent the forum rendering, but will be better at alerting devs to
    // an issue.

    if (typeof children === 'undefined') {
      throw new Error("Tooltip component was provided with no direct child DOM element. Tooltips must contain a single direct DOM node to attach to.");
    }
    if (children.length !== 1) {
      throw new Error("Tooltip component was either passed more than one or no child node.\n\nPlease wrap multiple children in another element, such as a <div> or <span>.");
    }
    var firstChild = children[0];
    if (typeof firstChild !== 'object' || Array.isArray(firstChild) || firstChild === null) {
      throw new Error("Tooltip component was provided with no direct child DOM element. Tooltips must contain a single direct DOM node to attach to.");
    }
    if (typeof firstChild.tag === 'string' && ['#', '[', '<'].includes(firstChild.tag)) {
      throw new Error("Tooltip component with provided with a vnode with tag \"" + firstChild.tag + "\". This is not a DOM element, so is not a valid child element. Please wrap this vnode in another element, such as a <div> or <span>.");
    }
    this.firstChild = firstChild;
    return children;
  };
  _proto.oncreate = function oncreate(vnode) {
    _Component.prototype.oncreate.call(this, vnode);
    this.checkDomNodeChanged();
    this.recreateTooltip();
  };
  _proto.onupdate = function onupdate(vnode) {
    _Component.prototype.onupdate.call(this, vnode);
    this.checkDomNodeChanged();
    this.recreateTooltip();
  };
  _proto.recreateTooltip = function recreateTooltip() {
    if (this.shouldRecreateTooltip && this.childDomNode !== null) {
      $(this.childDomNode).tooltip('destroy',
      // @ts-expect-error We don't want this arg to be part of the public API. It only exists to prevent deprecation warnings when using `$.tooltip` in this component.
      'DANGEROUS_tooltip_jquery_fn_deprecation_exempt');
      this.createTooltip();
      this.shouldRecreateTooltip = false;
    }
    if (this.shouldChangeTooltipVisibility) {
      this.shouldChangeTooltipVisibility = false;
      this.updateVisibility();
    }
  };
  _proto.updateVisibility = function updateVisibility() {
    if (this.childDomNode === null) return;
    if (this.attrs.tooltipVisible === true) {
      $(this.childDomNode).tooltip('show',
      // @ts-expect-error We don't want this arg to be part of the public API. It only exists to prevent deprecation warnings when using `$.tooltip` in this component.
      'DANGEROUS_tooltip_jquery_fn_deprecation_exempt');
    } else if (this.attrs.tooltipVisible === false) {
      $(this.childDomNode).tooltip('hide',
      // @ts-expect-error We don't want this arg to be part of the public API. It only exists to prevent deprecation warnings when using `$.tooltip` in this component.
      'DANGEROUS_tooltip_jquery_fn_deprecation_exempt');
    }
  };
  _proto.createTooltip = function createTooltip() {
    if (this.childDomNode === null) return;
    var _this$attrs2 = this.attrs,
      _this$attrs2$showOnFo = _this$attrs2.showOnFocus,
      showOnFocus = _this$attrs2$showOnFo === void 0 ? true : _this$attrs2$showOnFo,
      _this$attrs2$position = _this$attrs2.position,
      position = _this$attrs2$position === void 0 ? 'top' : _this$attrs2$position,
      delay = _this$attrs2.delay,
      _this$attrs2$html = _this$attrs2.html,
      html = _this$attrs2$html === void 0 ? false : _this$attrs2$html,
      tooltipVisible = _this$attrs2.tooltipVisible,
      text = _this$attrs2.text;

    // Fancy "hack" to assemble the trigger string
    var trigger = typeof tooltipVisible === 'boolean' ? 'manual' : (0,_utils_classList__WEBPACK_IMPORTED_MODULE_3__["default"])('hover', [showOnFocus && 'focus']);
    var realText = this.getRealText();
    this.childDomNode.setAttribute('title', realText);
    this.childDomNode.setAttribute('aria-label', realText);

    // https://getbootstrap.com/docs/3.3/javascript/#tooltips-options
    $(this.childDomNode).tooltip({
      html: html,
      delay: delay,
      placement: position,
      trigger: trigger
    },
    // @ts-expect-error We don't want this arg to be part of the public API. It only exists to prevent deprecation warnings when using `$.tooltip` in this component.
    'DANGEROUS_tooltip_jquery_fn_deprecation_exempt');
  };
  _proto.getRealText = function getRealText() {
    var text = this.attrs.text;
    return Array.isArray(text) ? (0,_utils_extractText__WEBPACK_IMPORTED_MODULE_4__["default"])(text) : text;
  }

  /**
   * Checks if the tooltip DOM node has changed.
   *
   * If it has, it updates `this.childDomNode` to the new node, and sets
   * `shouldRecreateTooltip` to `true`.
   */;
  _proto.checkDomNodeChanged = function checkDomNodeChanged() {
    var domNode = this.firstChild.dom;
    if (domNode && !domNode.isSameNode(this.childDomNode)) {
      this.childDomNode = domNode;
      this.shouldRecreateTooltip = true;
    }
  };
  return Tooltip;
}(_Component__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/extend.ts":
/*!******************************!*\
  !*** ./src/common/extend.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "extend": () => (/* binding */ extend),
/* harmony export */   "override": () => (/* binding */ override)
/* harmony export */ });
/**
 * Extend an object's method by running its output through a mutating callback
 * every time it is called.
 *
 * The callback accepts the method's return value and should perform any
 * mutations directly on this value. For this reason, this function will not be
 * effective on methods which return scalar values (numbers, strings, booleans).
 *
 * Care should be taken to extend the correct object  in most cases, a class'
 * prototype will be the desired target of extension, not the class itself.
 *
 * @example <caption>Example usage of extending one method.</caption>
 * extend(Discussion.prototype, 'badges', function(badges) {
 *   // do something with `badges`
 * });
 *
 * @example <caption>Example usage of extending multiple methods.</caption>
 * extend(IndexPage.prototype, ['oncreate', 'onupdate'], function(vnode) {
 *   // something that needs to be run on creation and update
 * });
 *
 * @param object The object that owns the method
 * @param methods The name or names of the method(s) to extend
 * @param callback A callback which mutates the method's output
 */
function extend(object, methods, callback) {
  var allMethods = Array.isArray(methods) ? methods : [methods];
  allMethods.forEach(function (method) {
    var original = object[method];
    object[method] = function () {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      var value = original ? original.apply(this, args) : undefined;
      callback.apply(this, [value].concat(args));
      return value;
    };
    Object.assign(object[method], original);
  });
}

/**
 * Override an object's method by replacing it with a new function, so that the
 * new function will be run every time the object's method is called.
 *
 * The replacement function accepts the original method as its first argument,
 * which is like a call to `super`. Any arguments passed to the original method
 * are also passed to the replacement.
 *
 * Care should be taken to extend the correct object  in most cases, a class'
 * prototype will be the desired target of extension, not the class itself.
 *
 * @example <caption>Example usage of overriding one method.</caption>
 * override(Discussion.prototype, 'badges', function(original) {
 *   const badges = original();
 *   // do something with badges
 *   return badges;
 * });
 *
 * @example <caption>Example usage of overriding multiple methods.</caption>
 * extend(Discussion.prototype, ['oncreate', 'onupdate'], function(original, vnode) {
 *   // something that needs to be run on creation and update
 * });
 *
 * @param object The object that owns the method
 * @param methods The name or names of the method(s) to override
 * @param newMethod The method to replace it with
 */
function override(object, methods, newMethod) {
  var allMethods = Array.isArray(methods) ? methods : [methods];
  allMethods.forEach(function (method) {
    var original = object[method];
    object[method] = function () {
      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }
      return newMethod.apply(this, [original.bind(this)].concat(args));
    };
    Object.assign(object[method], original);
  });
}

/***/ }),

/***/ "./src/common/extenders/Model.ts":
/*!***************************************!*\
  !*** ./src/common/extenders/Model.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Model)
/* harmony export */ });
/* harmony import */ var _Model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Model */ "./src/common/Model.ts");
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var Model = /*#__PURE__*/function () {
  function Model(model) {
    this.model = void 0;
    this.callbacks = [];
    this.model = model;
  }
  var _proto = Model.prototype;
  _proto.attribute = function attribute(name, transform) {
    var _this = this;
    if (transform === void 0) {
      transform = null;
    }
    this.callbacks.push(function () {
      _this.model.prototype[name] = transform ? _Model__WEBPACK_IMPORTED_MODULE_0__["default"].attribute(name, transform) : _Model__WEBPACK_IMPORTED_MODULE_0__["default"].attribute(name);
    });
    return this;
  };
  _proto.hasOne = function hasOne(name) {
    var _this2 = this;
    this.callbacks.push(function () {
      _this2.model.prototype[name] = _Model__WEBPACK_IMPORTED_MODULE_0__["default"].hasOne(name);
    });
    return this;
  };
  _proto.hasMany = function hasMany(name) {
    var _this3 = this;
    this.callbacks.push(function () {
      _this3.model.prototype[name] = _Model__WEBPACK_IMPORTED_MODULE_0__["default"].hasMany(name);
    });
    return this;
  };
  _proto.extend = function extend(app, extension) {
    for (var _iterator = _createForOfIteratorHelperLoose(this.callbacks), _step; !(_step = _iterator()).done;) {
      var callback = _step.value;
      callback.call(this);
    }
  };
  return Model;
}();


/***/ }),

/***/ "./src/common/extenders/PostTypes.ts":
/*!*******************************************!*\
  !*** ./src/common/extenders/PostTypes.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PostTypes)
/* harmony export */ });
var PostTypes = /*#__PURE__*/function () {
  function PostTypes() {
    this.postComponents = {};
  }
  var _proto = PostTypes.prototype;
  /**
   * Register a new post component type.
   * Usually used for event posts.
   *
   * @param name The name of the post type.
   * @param component The component class to render the post.
   */
  _proto.add = function add(name, component) {
    this.postComponents[name] = component;
    return this;
  };
  _proto.extend = function extend(app, extension) {
    Object.assign(app.postComponents, this.postComponents);
  };
  return PostTypes;
}();


/***/ }),

/***/ "./src/common/extenders/Routes.ts":
/*!****************************************!*\
  !*** ./src/common/extenders/Routes.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Routes)
/* harmony export */ });
var Routes = /*#__PURE__*/function () {
  function Routes() {
    this.routes = {};
    this.helpers = {};
  }
  var _proto = Routes.prototype;
  /**
   * Add a mithril route to the application.
   *
   * @param name The name of the route.
   * @param path The path of the route.
   * @param component must extend `Page` component.
   */
  _proto.add = function add(name, path, component) {
    this.routes[name] = {
      path: path,
      component: component
    };
    return this;
  };
  _proto.helper = function helper(name, callback) {
    this.helpers[name] = callback;
    return this;
  };
  _proto.extend = function extend(app, extension) {
    Object.assign(app.routes, this.routes);
    Object.assign(app.route, this.helpers);
  };
  return Routes;
}();


/***/ }),

/***/ "./src/common/extenders/Store.ts":
/*!***************************************!*\
  !*** ./src/common/extenders/Store.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Store)
/* harmony export */ });
var Store = /*#__PURE__*/function () {
  function Store() {
    this.models = {};
  }
  var _proto = Store.prototype;
  _proto.add = function add(type, model) {
    this.models[type] = model;
    return this;
  };
  _proto.extend = function extend(app, extension) {
    for (var _type in this.models) {
      if (app.store.models[_type]) {
        throw new Error("The model type \"" + _type + "\" has already been registered with the class \"" + app.store.models[_type].name + "\".");
      }
      app.store.models[_type] = this.models[_type];
    }
  };
  return Store;
}();


/***/ }),

/***/ "./src/common/extenders/index.ts":
/*!***************************************!*\
  !*** ./src/common/extenders/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Model */ "./src/common/extenders/Model.ts");
/* harmony import */ var _PostTypes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PostTypes */ "./src/common/extenders/PostTypes.ts");
/* harmony import */ var _Routes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Routes */ "./src/common/extenders/Routes.ts");
/* harmony import */ var _Store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Store */ "./src/common/extenders/Store.ts");




/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  Model: _Model__WEBPACK_IMPORTED_MODULE_0__["default"],
  PostTypes: _PostTypes__WEBPACK_IMPORTED_MODULE_1__["default"],
  Routes: _Routes__WEBPACK_IMPORTED_MODULE_2__["default"],
  Store: _Store__WEBPACK_IMPORTED_MODULE_3__["default"]
});

/***/ }),

/***/ "./src/common/helpers/avatar.tsx":
/*!***************************************!*\
  !*** ./src/common/helpers/avatar.tsx ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ avatar)
/* harmony export */ });
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");

/**
 * The `avatar` helper displays a user's avatar.
 *
 * @param user
 * @param attrs Attributes to apply to the avatar element
 */
function avatar(user, attrs) {
  var _attrs, _attrs$loading;
  if (attrs === void 0) {
    attrs = {};
  }
  attrs.className = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_0__["default"])('Avatar', attrs.className);
  (_attrs$loading = (_attrs = attrs).loading) != null ? _attrs$loading : _attrs.loading = 'lazy';
  var content = '';

  // If the `title` attribute is set to null or false, we don't want to give the
  // avatar a title. On the other hand, if it hasn't been given at all, we can
  // safely default it to the user's username.
  var hasTitle = attrs.title === 'undefined' || attrs.title;
  if (!hasTitle) delete attrs.title;

  // If a user has been passed, then we will set up an avatar using their
  // uploaded image, or the first letter of their username if they haven't
  // uploaded one.
  if (user) {
    var username = user.displayName() || '?';
    var avatarUrl = user.avatarUrl();
    if (hasTitle) attrs.title = attrs.title || username;
    if (avatarUrl) {
      return m("img", Object.assign({}, attrs, {
        src: avatarUrl,
        alt: ""
      }));
    }
    content = username.charAt(0).toUpperCase();
    attrs.style = {
      '--avatar-bg': user.color()
    };
  }
  return m("span", attrs, content);
}

/***/ }),

/***/ "./src/common/helpers/fireApplicationError.ts":
/*!****************************************************!*\
  !*** ./src/common/helpers/fireApplicationError.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ fireApplicationError)
/* harmony export */ });
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../app */ "./src/common/app.ts");


/**
 * Fire a Flarum error which is shown in the JS console for everyone and in an alert for the admin.
 *
 * @param userTitle: a user friendly title of the error, should be localized.
 * @param consoleTitle: an error title that goes in the console, doesn't have to be localized.
 * @param error: the error.
 */
function fireApplicationError(userTitle, consoleTitle, error) {
  var _app$session, _app$session$user;
  console.group("%c" + consoleTitle, 'background-color: #d83e3e; color: #ffffff; font-weight: bold;');
  console.error(error);
  console.groupEnd();
  if ((_app$session = _app__WEBPACK_IMPORTED_MODULE_0__["default"].session) != null && (_app$session$user = _app$session.user) != null && _app$session$user.isAdmin()) {
    _app__WEBPACK_IMPORTED_MODULE_0__["default"].alerts.show({
      type: 'error'
    }, "" + userTitle);
  }
}

/***/ }),

/***/ "./src/common/helpers/fireDebugWarning.ts":
/*!************************************************!*\
  !*** ./src/common/helpers/fireDebugWarning.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ fireDebugWarning),
/* harmony export */   "fireDeprecationWarning": () => (/* binding */ fireDeprecationWarning)
/* harmony export */ });
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../app */ "./src/common/app.ts");


/**
 * Calls `console.warn` with the provided arguments, but only if the forum is in debug mode.
 *
 * This function is intended to provide warnings to extension developers about issues with
 * their extensions that may not be easily noticed when testing, such as accessibility
 * issues.
 *
 * These warnings should be hidden on production forums to ensure webmasters are not
 * inundated with do-gooders telling them they have an issue when it isn't something they
 * can fix.
 */
function fireDebugWarning() {
  var _console;
  if (!_app__WEBPACK_IMPORTED_MODULE_0__["default"].forum.attribute('debug')) return;
  (_console = console).warn.apply(_console, arguments);
}

/**
 * Fire a Flarum deprecation warning which is shown in the JS console.
 *
 * These warnings are only shown when the forum is in debug mode, and the function exists to
 * reduce bundle size caused by multiple warnings across our JavaScript.
 *
 * @param message The message to display. (Short, but sweet, please!)
 * @param githubId The PR or Issue ID with more info in relation to this change.
 * @param [removedFrom] The version in which this feature will be completely removed. (default: 2.0)
 * @param [repo] The repo which the issue or PR is located in. (default: flarum/core)
 *
 * @see {@link fireDebugWarning}
 */
function fireDeprecationWarning(message, githubId, removedFrom, repo) {
  if (removedFrom === void 0) {
    removedFrom = '2.0';
  }
  if (repo === void 0) {
    repo = 'flarum/core';
  }
  // GitHub auto-redirects between `/pull` and `/issues` for us, so using `/pull` saves 2 bytes!
  fireDebugWarning("[Flarum " + removedFrom + " Deprecation] " + message + "\n\nSee: https://github.com/" + repo + "/pull/" + githubId);
}

/***/ }),

/***/ "./src/common/helpers/fullTime.tsx":
/*!*****************************************!*\
  !*** ./src/common/helpers/fullTime.tsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ fullTime)
/* harmony export */ });
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ "../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/dayjs/dayjs.min.js");
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);

/**
 * The `fullTime` helper displays a formatted time string wrapped in a <time>
 * tag.
 */
function fullTime(time) {
  var d = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(time);
  var datetime = d.format();
  var full = d.format('LLLL');
  return m("time", {
    pubdate: true,
    datetime: datetime
  }, full);
}

/***/ }),

/***/ "./src/common/helpers/highlight.tsx":
/*!******************************************!*\
  !*** ./src/common/helpers/highlight.tsx ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ highlight)
/* harmony export */ });
/* harmony import */ var _utils_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/string */ "./src/common/utils/string.ts");


/**
 * The `highlight` helper searches for a word phrase in a string, and wraps
 * matches with the <mark> tag.
 *
 * @param string The string to highlight.
 * @param phrase The word or words to highlight.
 * @param [length] The number of characters to truncate the string to.
 *     The string will be truncated surrounding the first match.
 */
function highlight(string, phrase, length) {
  if (!phrase && !length) return string;

  // Convert the word phrase into a global regular expression (if it isn't
  // already) so we can search the string for matched.
  var regexp = phrase instanceof RegExp ? phrase : new RegExp(phrase != null ? phrase : '', 'gi');
  var highlighted = string;
  var start = 0;

  // If a length was given, the truncate the string surrounding the first match.
  if (length) {
    if (phrase) start = Math.max(0, string.search(regexp) - length / 2);
    highlighted = (0,_utils_string__WEBPACK_IMPORTED_MODULE_0__.truncate)(highlighted, length, start);
  }

  // Convert the string into HTML entities, then highlight all matches with
  // <mark> tags. Then we will return the result as a trusted HTML string.
  highlighted = $('<div/>').text(highlighted).html();
  if (phrase) highlighted = highlighted.replace(regexp, '<mark>$&</mark>');
  return m.trust(highlighted);
}

/***/ }),

/***/ "./src/common/helpers/humanTime.tsx":
/*!******************************************!*\
  !*** ./src/common/helpers/humanTime.tsx ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ humanTime)
/* harmony export */ });
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ "../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/dayjs/dayjs.min.js");
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_humanTime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/humanTime */ "./src/common/utils/humanTime.ts");



/**
 * The `humanTime` helper displays a time in a human-friendly time-ago format
 * (e.g. '12 days ago'), wrapped in a <time> tag with other information about
 * the time.
 */
function humanTime(time) {
  var d = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(time);
  var datetime = d.format();
  var full = d.format('LLLL');
  var ago = (0,_utils_humanTime__WEBPACK_IMPORTED_MODULE_1__["default"])(time);
  return m("time", {
    pubdate: true,
    datetime: datetime,
    title: full,
    "data-humantime": true
  }, ago);
}

/***/ }),

/***/ "./src/common/helpers/icon.tsx":
/*!*************************************!*\
  !*** ./src/common/helpers/icon.tsx ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ icon)
/* harmony export */ });
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");


/**
 * The `icon` helper displays an icon.
 *
 * @param fontClass The full icon class, prefix and the icons name.
 * @param attrs Any other attributes to apply.
 */
function icon(fontClass, attrs) {
  if (attrs === void 0) {
    attrs = {};
  }
  attrs.className = (0,_utils_classList__WEBPACK_IMPORTED_MODULE_0__["default"])('icon', fontClass, attrs.className);
  return m("i", Object.assign({
    "aria-hidden": "true"
  }, attrs));
}

/***/ }),

/***/ "./src/common/helpers/listItems.tsx":
/*!******************************************!*\
  !*** ./src/common/helpers/listItems.tsx ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ listItems)
/* harmony export */ });
/* harmony import */ var _components_Separator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/Separator */ "./src/common/components/Separator.js");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");


function isVnode(item) {
  return typeof item === 'object' && item !== null && 'tag' in item;
}
function isSeparator(item) {
  return isVnode(item) && item.tag === _components_Separator__WEBPACK_IMPORTED_MODULE_0__["default"];
}
function withoutUnnecessarySeparators(items) {
  var newItems = [];
  var prevItem;
  items.filter(Boolean).forEach(function (item, i) {
    if (!isSeparator(item) || prevItem && !isSeparator(prevItem) && i !== items.length - 1) {
      prevItem = item;
      newItems.push(item);
    }
  });
  return newItems;
}

/**
 * The `listItems` helper wraps an array of components in the provided tag,
 * stripping out any unnecessary `Separator` components.
 *
 * By default, this tag is an `<li>` tag, but this is customisable through the
 * second function parameter, `customTag`.
 */
function listItems(rawItems, customTag, attributes) {
  if (customTag === void 0) {
    customTag = 'li';
  }
  if (attributes === void 0) {
    attributes = {};
  }
  var items = rawItems instanceof Array ? rawItems : [rawItems];
  var Tag = customTag;
  return withoutUnnecessarySeparators(items).map(function (item) {
    var _item$attrs2;
    var classes = [item.itemName && "item-" + item.itemName];
    if (isVnode(item) && item.tag.isListItem) {
      item.attrs = item.attrs || {};
      item.attrs.key = item.attrs.key || item.itemName;
      item.key = item.attrs.key;
      return item;
    }
    if (isVnode(item)) {
      var _item$attrs;
      classes.push(((_item$attrs = item.attrs) == null ? void 0 : _item$attrs.itemClassName) || item.itemClassName);
      if (item.tag.isActive != null && item.tag.isActive(item.attrs)) {
        classes.push('active');
      }
    }
    var key = isVnode(item) && (item == null ? void 0 : (_item$attrs2 = item.attrs) == null ? void 0 : _item$attrs2.key) || item.itemName;
    return m(Tag, Object.assign({
      className: (0,_utils_classList__WEBPACK_IMPORTED_MODULE_1__["default"])(classes),
      key: key
    }, attributes), item);
  });
}

/***/ }),

/***/ "./src/common/helpers/textContrastClass.ts":
/*!*************************************************!*\
  !*** ./src/common/helpers/textContrastClass.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ textContrastClass)
/* harmony export */ });
/* harmony import */ var _utils_isDark__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/isDark */ "./src/common/utils/isDark.ts");

function textContrastClass(hexcolor) {
  if (!hexcolor) return 'text-contrast--unchanged';
  return (0,_utils_isDark__WEBPACK_IMPORTED_MODULE_0__["default"])(hexcolor) ? 'text-contrast--light' : 'text-contrast--dark';
}

/***/ }),

/***/ "./src/common/helpers/userOnline.tsx":
/*!*******************************************!*\
  !*** ./src/common/helpers/userOnline.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ userOnline)
/* harmony export */ });
/* harmony import */ var _icon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon */ "./src/common/helpers/icon.tsx");


/**
 * The `useronline` helper displays a green circle if the user is online.
 */
function userOnline(user) {
  if (user.lastSeenAt() && user.isOnline()) {
    return m("span", {
      className: "UserOnline"
    }, (0,_icon__WEBPACK_IMPORTED_MODULE_0__["default"])('fas fa-circle'));
  }
  return null;
}

/***/ }),

/***/ "./src/common/helpers/username.tsx":
/*!*****************************************!*\
  !*** ./src/common/helpers/username.tsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ username)
/* harmony export */ });
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");

/**
 * The `username` helper displays a user's username in a <span className="username">
 * tag. If the user doesn't exist, the username will be displayed as [deleted].
 */
function username(user) {
  var name = user && user.displayName() || _common_app__WEBPACK_IMPORTED_MODULE_0__["default"].translator.trans('core.lib.username.deleted_text');
  return m("span", {
    className: "username"
  }, name);
}

/***/ }),

/***/ "./src/common/index.ts":
/*!*****************************!*\
  !*** ./src/common/index.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "app": () => (/* reexport safe */ _app__WEBPACK_IMPORTED_MODULE_11__["default"])
/* harmony export */ });
/* harmony import */ var expose_loader_exposes_$_jQuery_jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! expose-loader?exposes=$,jQuery!jquery */ "../../../node_modules/expose-loader/dist/cjs.js?exposes=$,jQuery!../../../node_modules/jquery/dist/jquery-exposed.js");
/* harmony import */ var expose_loader_exposes_$_jQuery_jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(expose_loader_exposes_$_jQuery_jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var expose_loader_exposes_m_mithril__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! expose-loader?exposes=m!mithril */ "../../../node_modules/expose-loader/dist/cjs.js?exposes=m!../../../node_modules/mithril/index-exposed.js");
/* harmony import */ var expose_loader_exposes_m_mithril__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(expose_loader_exposes_m_mithril__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var expose_loader_exposes_dayjs_dayjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! expose-loader?exposes=dayjs!dayjs */ "../../../node_modules/expose-loader/dist/cjs.js?exposes=dayjs!../../../node_modules/dayjs/dayjs.min-exposed.js");
/* harmony import */ var expose_loader_exposes_dayjs_dayjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(expose_loader_exposes_dayjs_dayjs__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var bootstrap_js_affix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bootstrap/js/affix */ "../../../node_modules/bootstrap/js/affix.js");
/* harmony import */ var bootstrap_js_affix__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bootstrap_js_affix__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var bootstrap_js_dropdown__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bootstrap/js/dropdown */ "../../../node_modules/bootstrap/js/dropdown.js");
/* harmony import */ var bootstrap_js_dropdown__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(bootstrap_js_dropdown__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var bootstrap_js_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bootstrap/js/tooltip */ "../../../node_modules/bootstrap/js/tooltip.js");
/* harmony import */ var bootstrap_js_tooltip__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(bootstrap_js_tooltip__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var bootstrap_js_transition__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! bootstrap/js/transition */ "../../../node_modules/bootstrap/js/transition.js");
/* harmony import */ var bootstrap_js_transition__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(bootstrap_js_transition__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var jquery_hotkeys_jquery_hotkeys__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jquery.hotkeys/jquery.hotkeys */ "../../../node_modules/jquery.hotkeys/jquery.hotkeys.js");
/* harmony import */ var jquery_hotkeys_jquery_hotkeys__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jquery_hotkeys_jquery_hotkeys__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var dayjs_plugin_relativeTime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! dayjs/plugin/relativeTime */ "../../../node_modules/dayjs/plugin/relativeTime.js");
/* harmony import */ var dayjs_plugin_relativeTime__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_relativeTime__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! dayjs/plugin/localizedFormat */ "../../../node_modules/dayjs/plugin/localizedFormat.js");
/* harmony import */ var dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _utils_patchMithril__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/patchMithril */ "./src/common/utils/patchMithril.js");
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./app */ "./src/common/app.ts");
/* harmony import */ var _utils_arrayFlatPolyfill__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./utils/arrayFlatPolyfill */ "./src/common/utils/arrayFlatPolyfill.ts");
/* harmony import */ var _utils_arrayFlatPolyfill__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_utils_arrayFlatPolyfill__WEBPACK_IMPORTED_MODULE_12__);
// Expose jQuery, mithril and dayjs to the window browser object










dayjs.extend((dayjs_plugin_relativeTime__WEBPACK_IMPORTED_MODULE_8___default()));
dayjs.extend((dayjs_plugin_localizedFormat__WEBPACK_IMPORTED_MODULE_9___default()));

(0,_utils_patchMithril__WEBPACK_IMPORTED_MODULE_10__["default"])(window);



var tooltipGen = $.fn.tooltip;

// Remove in a future version of Flarum.
// @ts-ignore
$.fn.tooltip = function (options, caller) {
  // Show a warning when `$.tooltip` is used outside of the Tooltip component.
  // This functionality is deprecated and should not be used.
  if (!['DANGEROUS_tooltip_jquery_fn_deprecation_exempt'].includes(caller)) {
    console.warn("Calling `$.tooltip` is now deprecated. Please use the `<Tooltip>` component exposed by flarum/core instead. `$.tooltip` may be removed in a future version of Flarum.\n\nIf this component doesn't meet your requirements, please open an issue: https://github.com/flarum/core/issues/new?assignees=davwheat&labels=type/bug,needs-verification&template=bug-report.md&title=Tooltip%20component%20unsuitable%20for%20use%20case");
  }
  tooltipGen.bind(this)(options);
};

/***/ }),

/***/ "./src/common/models/AccessToken.ts":
/*!******************************************!*\
  !*** ./src/common/models/AccessToken.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AccessToken)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Model */ "./src/common/Model.ts");


var AccessToken = /*#__PURE__*/function (_Model) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(AccessToken, _Model);
  function AccessToken() {
    return _Model.apply(this, arguments) || this;
  }
  var _proto = AccessToken.prototype;
  _proto.token = function token() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('token').call(this);
  };
  _proto.userId = function userId() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('userId').call(this);
  };
  _proto.title = function title() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('title').call(this);
  };
  _proto.type = function type() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('type').call(this);
  };
  _proto.createdAt = function createdAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('createdAt', _Model__WEBPACK_IMPORTED_MODULE_1__["default"].transformDate).call(this);
  };
  _proto.lastActivityAt = function lastActivityAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('lastActivityAt', _Model__WEBPACK_IMPORTED_MODULE_1__["default"].transformDate).call(this);
  };
  _proto.lastIpAddress = function lastIpAddress() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('lastIpAddress').call(this);
  };
  _proto.device = function device() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('device').call(this);
  };
  _proto.isCurrent = function isCurrent() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('isCurrent').call(this);
  };
  _proto.isSessionToken = function isSessionToken() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('isSessionToken').call(this);
  };
  return AccessToken;
}(_Model__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/models/Discussion.tsx":
/*!******************************************!*\
  !*** ./src/common/models/Discussion.tsx ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Discussion)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");
/* harmony import */ var _Model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Model */ "./src/common/Model.ts");
/* harmony import */ var _utils_computed__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/computed */ "./src/common/utils/computed.ts");
/* harmony import */ var _utils_ItemList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _components_Badge__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/Badge */ "./src/common/components/Badge.tsx");






var Discussion = /*#__PURE__*/function (_Model) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Discussion, _Model);
  function Discussion() {
    return _Model.apply(this, arguments) || this;
  }
  var _proto = Discussion.prototype;
  _proto.title = function title() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('title').call(this);
  };
  _proto.slug = function slug() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('slug').call(this);
  };
  _proto.createdAt = function createdAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('createdAt', _Model__WEBPACK_IMPORTED_MODULE_2__["default"].transformDate).call(this);
  };
  _proto.user = function user() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].hasOne('user').call(this);
  };
  _proto.firstPost = function firstPost() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].hasOne('firstPost').call(this);
  };
  _proto.lastPostedAt = function lastPostedAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('lastPostedAt', _Model__WEBPACK_IMPORTED_MODULE_2__["default"].transformDate).call(this);
  };
  _proto.lastPostedUser = function lastPostedUser() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].hasOne('lastPostedUser').call(this);
  };
  _proto.lastPost = function lastPost() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].hasOne('lastPost').call(this);
  };
  _proto.lastPostNumber = function lastPostNumber() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('lastPostNumber').call(this);
  };
  _proto.commentCount = function commentCount() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('commentCount').call(this);
  };
  _proto.replyCount = function replyCount() {
    return (0,_utils_computed__WEBPACK_IMPORTED_MODULE_3__["default"])('commentCount', function (commentCount) {
      var _ref;
      return Math.max(0, ((_ref = commentCount) != null ? _ref : 0) - 1);
    }).call(this);
  };
  _proto.posts = function posts() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].hasMany('posts').call(this);
  };
  _proto.mostRelevantPost = function mostRelevantPost() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].hasOne('mostRelevantPost').call(this);
  };
  _proto.lastReadAt = function lastReadAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('lastReadAt', _Model__WEBPACK_IMPORTED_MODULE_2__["default"].transformDate).call(this);
  };
  _proto.lastReadPostNumber = function lastReadPostNumber() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('lastReadPostNumber').call(this);
  };
  _proto.isUnread = function isUnread() {
    return (0,_utils_computed__WEBPACK_IMPORTED_MODULE_3__["default"])('unreadCount', function (unreadCount) {
      return !!unreadCount;
    }).call(this);
  };
  _proto.isRead = function isRead() {
    return (0,_utils_computed__WEBPACK_IMPORTED_MODULE_3__["default"])('unreadCount', function (unreadCount) {
      return !!(_common_app__WEBPACK_IMPORTED_MODULE_1__["default"].session.user && !unreadCount);
    }).call(this);
  };
  _proto.hiddenAt = function hiddenAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('hiddenAt', _Model__WEBPACK_IMPORTED_MODULE_2__["default"].transformDate).call(this);
  };
  _proto.hiddenUser = function hiddenUser() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].hasOne('hiddenUser').call(this);
  };
  _proto.isHidden = function isHidden() {
    return (0,_utils_computed__WEBPACK_IMPORTED_MODULE_3__["default"])('hiddenAt', function (hiddenAt) {
      return !!hiddenAt;
    }).call(this);
  };
  _proto.canReply = function canReply() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('canReply').call(this);
  };
  _proto.canRename = function canRename() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('canRename').call(this);
  };
  _proto.canHide = function canHide() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('canHide').call(this);
  };
  _proto.canDelete = function canDelete() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('canDelete').call(this);
  }

  /**
   * Remove a post from the discussion's posts relationship.
   */;
  _proto.removePost = function removePost(id) {
    var posts = this.rawRelationship('posts');
    if (!posts) {
      return;
    }
    posts.some(function (data, i) {
      if (id === data.id) {
        posts.splice(i, 1);
        return true;
      }
      return false;
    });
  }

  /**
   * Get the estimated number of unread posts in this discussion for the current
   * user.
   */;
  _proto.unreadCount = function unreadCount() {
    var _user$markedAllAsRead, _user$markedAllAsRead2, _this$lastPostedAt;
    var user = _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].session.user;
    if (user && ((_user$markedAllAsRead = (_user$markedAllAsRead2 = user.markedAllAsReadAt()) == null ? void 0 : _user$markedAllAsRead2.getTime()) != null ? _user$markedAllAsRead : 0) < ((_this$lastPostedAt = this.lastPostedAt()) == null ? void 0 : _this$lastPostedAt.getTime())) {
      var _this$lastPostNumber, _this$commentCount;
      var unreadCount = Math.max(0, ((_this$lastPostNumber = this.lastPostNumber()) != null ? _this$lastPostNumber : 0) - (this.lastReadPostNumber() || 0));
      // If posts have been deleted, it's possible that the unread count could exceed the
      // actual post count. As such, we take the min of the two to ensure this isn't an issue.
      return Math.min(unreadCount, (_this$commentCount = this.commentCount()) != null ? _this$commentCount : 0);
    }
    return 0;
  }

  /**
   * Get the Badge components that apply to this discussion.
   */;
  _proto.badges = function badges() {
    var items = new _utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
    if (this.isHidden()) {
      items.add('hidden', m(_components_Badge__WEBPACK_IMPORTED_MODULE_5__["default"], {
        type: "hidden",
        icon: "fas fa-trash",
        label: _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.lib.badge.hidden_tooltip')
      }));
    }
    return items;
  }

  /**
   * Get a list of all of the post IDs in this discussion.
   */;
  _proto.postIds = function postIds() {
    var _this$rawRelationship, _this$rawRelationship2;
    return (_this$rawRelationship = (_this$rawRelationship2 = this.rawRelationship('posts')) == null ? void 0 : _this$rawRelationship2.map(function (link) {
      return link.id;
    })) != null ? _this$rawRelationship : [];
  };
  return Discussion;
}(_Model__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/models/Forum.ts":
/*!************************************!*\
  !*** ./src/common/models/Forum.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Forum)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Model */ "./src/common/Model.ts");


var Forum = /*#__PURE__*/function (_Model) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Forum, _Model);
  function Forum() {
    return _Model.apply(this, arguments) || this;
  }
  var _proto = Forum.prototype;
  _proto.apiEndpoint = function apiEndpoint() {
    return '/';
  };
  return Forum;
}(_Model__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/models/Group.ts":
/*!************************************!*\
  !*** ./src/common/models/Group.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Group)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Model */ "./src/common/Model.ts");


var Group = /*#__PURE__*/function (_Model) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Group, _Model);
  function Group() {
    return _Model.apply(this, arguments) || this;
  }
  var _proto = Group.prototype;
  _proto.nameSingular = function nameSingular() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('nameSingular').call(this);
  };
  _proto.namePlural = function namePlural() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('namePlural').call(this);
  };
  _proto.color = function color() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('color').call(this);
  };
  _proto.icon = function icon() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('icon').call(this);
  };
  _proto.isHidden = function isHidden() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('isHidden').call(this);
  };
  return Group;
}(_Model__WEBPACK_IMPORTED_MODULE_1__["default"]);
Group.ADMINISTRATOR_ID = '1';
Group.GUEST_ID = '2';
Group.MEMBER_ID = '3';


/***/ }),

/***/ "./src/common/models/Notification.ts":
/*!*******************************************!*\
  !*** ./src/common/models/Notification.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Notification)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Model */ "./src/common/Model.ts");


var Notification = /*#__PURE__*/function (_Model) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Notification, _Model);
  function Notification() {
    return _Model.apply(this, arguments) || this;
  }
  var _proto = Notification.prototype;
  _proto.contentType = function contentType() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('contentType').call(this);
  };
  _proto.content = function content() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('content').call(this);
  };
  _proto.createdAt = function createdAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('createdAt', _Model__WEBPACK_IMPORTED_MODULE_1__["default"].transformDate).call(this);
  };
  _proto.isRead = function isRead() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('isRead').call(this);
  };
  _proto.user = function user() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].hasOne('user').call(this);
  };
  _proto.fromUser = function fromUser() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].hasOne('fromUser').call(this);
  };
  _proto.subject = function subject() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].hasOne('subject').call(this);
  };
  return Notification;
}(_Model__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/models/Post.ts":
/*!***********************************!*\
  !*** ./src/common/models/Post.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Post)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Model */ "./src/common/Model.ts");
/* harmony import */ var _utils_computed__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/computed */ "./src/common/utils/computed.ts");
/* harmony import */ var _utils_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/string */ "./src/common/utils/string.ts");




var Post = /*#__PURE__*/function (_Model) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Post, _Model);
  function Post() {
    return _Model.apply(this, arguments) || this;
  }
  var _proto = Post.prototype;
  _proto.number = function number() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('number').call(this);
  };
  _proto.discussion = function discussion() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].hasOne('discussion').call(this);
  };
  _proto.createdAt = function createdAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('createdAt', _Model__WEBPACK_IMPORTED_MODULE_1__["default"].transformDate).call(this);
  };
  _proto.user = function user() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].hasOne('user').call(this);
  };
  _proto.contentType = function contentType() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('contentType').call(this);
  };
  _proto.content = function content() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('content').call(this);
  };
  _proto.contentHtml = function contentHtml() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('contentHtml').call(this);
  };
  _proto.renderFailed = function renderFailed() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('renderFailed').call(this);
  };
  _proto.contentPlain = function contentPlain() {
    return (0,_utils_computed__WEBPACK_IMPORTED_MODULE_2__["default"])('contentHtml', function (content) {
      if (typeof content === 'string') {
        return (0,_utils_string__WEBPACK_IMPORTED_MODULE_3__.getPlainContent)(content);
      }
      return content;
    }).call(this);
  };
  _proto.editedAt = function editedAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('editedAt', _Model__WEBPACK_IMPORTED_MODULE_1__["default"].transformDate).call(this);
  };
  _proto.editedUser = function editedUser() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].hasOne('editedUser').call(this);
  };
  _proto.isEdited = function isEdited() {
    return (0,_utils_computed__WEBPACK_IMPORTED_MODULE_2__["default"])('editedAt', function (editedAt) {
      return !!editedAt;
    }).call(this);
  };
  _proto.hiddenAt = function hiddenAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('hiddenAt', _Model__WEBPACK_IMPORTED_MODULE_1__["default"].transformDate).call(this);
  };
  _proto.hiddenUser = function hiddenUser() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].hasOne('hiddenUser').call(this);
  };
  _proto.isHidden = function isHidden() {
    return (0,_utils_computed__WEBPACK_IMPORTED_MODULE_2__["default"])('hiddenAt', function (hiddenAt) {
      return !!hiddenAt;
    }).call(this);
  };
  _proto.canEdit = function canEdit() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('canEdit').call(this);
  };
  _proto.canHide = function canHide() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('canHide').call(this);
  };
  _proto.canDelete = function canDelete() {
    return _Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('canDelete').call(this);
  };
  return Post;
}(_Model__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/models/User.tsx":
/*!************************************!*\
  !*** ./src/common/models/User.tsx ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ User)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var color_thief_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! color-thief-browser */ "../../../node_modules/color-thief-browser/dist/color-thief.min.js");
/* harmony import */ var color_thief_browser__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(color_thief_browser__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Model */ "./src/common/Model.ts");
/* harmony import */ var _utils_stringToColor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/stringToColor */ "./src/common/utils/stringToColor.ts");
/* harmony import */ var _utils_ItemList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _utils_computed__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/computed */ "./src/common/utils/computed.ts");
/* harmony import */ var _components_GroupBadge__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/GroupBadge */ "./src/common/components/GroupBadge.tsx");







var User = /*#__PURE__*/function (_Model) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(User, _Model);
  function User() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Model.call.apply(_Model, [this].concat(args)) || this;
    _this.avatarColor = null;
    return _this;
  }
  var _proto = User.prototype;
  _proto.username = function username() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('username').call(this);
  };
  _proto.slug = function slug() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('slug').call(this);
  };
  _proto.displayName = function displayName() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('displayName').call(this);
  };
  _proto.email = function email() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('email').call(this);
  };
  _proto.isEmailConfirmed = function isEmailConfirmed() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('isEmailConfirmed').call(this);
  };
  _proto.password = function password() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('password').call(this);
  };
  _proto.avatarUrl = function avatarUrl() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('avatarUrl').call(this);
  };
  _proto.preferences = function preferences() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('preferences').call(this);
  };
  _proto.groups = function groups() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].hasMany('groups').call(this);
  };
  _proto.isAdmin = function isAdmin() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('isAdmin').call(this);
  };
  _proto.joinTime = function joinTime() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('joinTime', _Model__WEBPACK_IMPORTED_MODULE_2__["default"].transformDate).call(this);
  };
  _proto.lastSeenAt = function lastSeenAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('lastSeenAt', _Model__WEBPACK_IMPORTED_MODULE_2__["default"].transformDate).call(this);
  };
  _proto.markedAllAsReadAt = function markedAllAsReadAt() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('markedAllAsReadAt', _Model__WEBPACK_IMPORTED_MODULE_2__["default"].transformDate).call(this);
  };
  _proto.unreadNotificationCount = function unreadNotificationCount() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('unreadNotificationCount').call(this);
  };
  _proto.newNotificationCount = function newNotificationCount() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('newNotificationCount').call(this);
  };
  _proto.discussionCount = function discussionCount() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('discussionCount').call(this);
  };
  _proto.commentCount = function commentCount() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('commentCount').call(this);
  };
  _proto.canEdit = function canEdit() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('canEdit').call(this);
  };
  _proto.canEditCredentials = function canEditCredentials() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('canEditCredentials').call(this);
  };
  _proto.canEditGroups = function canEditGroups() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('canEditGroups').call(this);
  };
  _proto.canDelete = function canDelete() {
    return _Model__WEBPACK_IMPORTED_MODULE_2__["default"].attribute('canDelete').call(this);
  };
  _proto.color = function color() {
    var _this2 = this;
    return (0,_utils_computed__WEBPACK_IMPORTED_MODULE_5__["default"])('displayName', 'avatarUrl', 'avatarColor', function (displayName, avatarUrl, avatarColor) {
      // If we've already calculated and cached the dominant color of the user's
      // avatar, then we can return that in RGB format. If we haven't, we'll want
      // to calculate it. Unless the user doesn't have an avatar, in which case
      // we generate a color from their display name.
      if (avatarColor) {
        return "rgb(" + avatarColor.join(', ') + ")";
      } else if (avatarUrl) {
        _this2.calculateAvatarColor();
        return '';
      }
      return '#' + (0,_utils_stringToColor__WEBPACK_IMPORTED_MODULE_3__["default"])(displayName);
    }).call(this);
  };
  /**
   * Check whether or not the user has been seen in the last 5 minutes.
   */
  _proto.isOnline = function isOnline() {
    return dayjs().subtract(5, 'minutes').isBefore(this.lastSeenAt());
  }

  /**
   * Get the Badge components that apply to this user.
   */;
  _proto.badges = function badges() {
    var items = new _utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
    var groups = this.groups();
    if (groups) {
      groups.forEach(function (group) {
        items.add("group" + (group == null ? void 0 : group.id()), m(_components_GroupBadge__WEBPACK_IMPORTED_MODULE_6__["default"], {
          group: group
        }));
      });
    }
    return items;
  }

  /**
   * Calculate the dominant color of the user's avatar. The dominant color will
   * be set to the `avatarColor` property once it has been calculated.
   */;
  _proto.calculateAvatarColor = function calculateAvatarColor() {
    var _this$avatarUrl;
    var image = new Image();
    var user = this;
    image.addEventListener('load', function () {
      try {
        var colorThief = new (color_thief_browser__WEBPACK_IMPORTED_MODULE_1___default())();
        user.avatarColor = colorThief.getColor(this);
      } catch (e) {
        // Completely white avatars throw errors due to a glitch in color thief
        // See https://github.com/lokesh/color-thief/issues/40
        if (e instanceof TypeError) {
          user.avatarColor = [255, 255, 255];
        } else {
          throw e;
        }
      }
      user.freshness = new Date();
      m.redraw();
    });
    image.crossOrigin = 'anonymous';
    image.src = (_this$avatarUrl = this.avatarUrl()) != null ? _this$avatarUrl : '';
  }

  /**
   * Update the user's preferences.
   */;
  _proto.savePreferences = function savePreferences(newPreferences) {
    var preferences = this.preferences();
    Object.assign(preferences != null ? preferences : {}, newPreferences);
    return this.save({
      preferences: preferences
    });
  };
  return User;
}(_Model__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/resolvers/DefaultResolver.ts":
/*!*************************************************!*\
  !*** ./src/common/resolvers/DefaultResolver.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DefaultResolver)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");

/**
 * Generates a route resolver for a given component.
 *
 * In addition to regular route resolver functionality:
 * - It provide the current route name as an attr
 * - It sets a key on the component so a rerender will be triggered on route change.
 */
var DefaultResolver = /*#__PURE__*/function () {
  function DefaultResolver(component, routeName) {
    this.component = void 0;
    this.routeName = void 0;
    this.component = component;
    this.routeName = routeName;
  }

  /**
   * When a route change results in a changed key, a full page
   * rerender occurs. This method can be overriden in subclasses
   * to prevent rerenders on some route changes.
   */
  var _proto = DefaultResolver.prototype;
  _proto.makeKey = function makeKey() {
    return this.routeName + JSON.stringify(m.route.param());
  };
  _proto.makeAttrs = function makeAttrs(vnode) {
    return (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, vnode.attrs, {
      routeName: this.routeName
    });
  };
  _proto.onmatch = function onmatch(args, requestedPath, route) {
    return this.component;
  };
  _proto.render = function render(vnode) {
    return [(0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, vnode, {
      attrs: this.makeAttrs(vnode),
      key: this.makeKey()
    })];
  };
  return DefaultResolver;
}();


/***/ }),

/***/ "./src/common/states/AlertManagerState.ts":
/*!************************************************!*\
  !*** ./src/common/states/AlertManagerState.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AlertManagerState)
/* harmony export */ });
/* harmony import */ var _components_Alert__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/Alert */ "./src/common/components/Alert.tsx");


/**
 * Returned by `AlertManagerState.show`. Used to dismiss alerts.
 */
var AlertManagerState = /*#__PURE__*/function () {
  function AlertManagerState() {
    this.activeAlerts = {};
    this.alertId = 0;
  }
  var _proto = AlertManagerState.prototype;
  _proto.getActiveAlerts = function getActiveAlerts() {
    return this.activeAlerts;
  }

  /**
   * Show an Alert in the alerts area.
   *
   * @return The alert's ID, which can be used to dismiss the alert.
   */;
  _proto.show = function show(arg1, arg2, arg3) {
    // Assigns variables as per the above signatures
    var componentClass = _components_Alert__WEBPACK_IMPORTED_MODULE_0__["default"];
    var attrs = {};
    var children;
    if (arguments.length == 1) {
      children = arg1;
    } else if (arguments.length == 2) {
      attrs = arg1;
      children = arg2;
    } else if (arguments.length == 3) {
      componentClass = arg1;
      attrs = arg2;
      children = arg3;
    }
    this.activeAlerts[++this.alertId] = {
      children: children,
      attrs: attrs,
      componentClass: componentClass
    };
    m.redraw();
    return this.alertId;
  }

  /**
   * Dismiss an alert.
   */;
  _proto.dismiss = function dismiss(key) {
    if (!key || !(key in this.activeAlerts)) return;
    delete this.activeAlerts[key];
    m.redraw();
  }

  /**
   * Clear all alerts.
   */;
  _proto.clear = function clear() {
    this.activeAlerts = {};
    m.redraw();
  };
  return AlertManagerState;
}();


/***/ }),

/***/ "./src/common/states/ModalManagerState.ts":
/*!************************************************!*\
  !*** ./src/common/states/ModalManagerState.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ModalManagerState)
/* harmony export */ });
/* harmony import */ var _components_Modal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/Modal */ "./src/common/components/Modal.tsx");


/**
 * Ideally, `show` would take a higher-kinded generic, ala:
 *  `show<Attrs, C>(componentClass: C<Attrs>, attrs: Attrs): void`
 * Unfortunately, TypeScript does not support this:
 * https://github.com/Microsoft/TypeScript/issues/1213
 * Therefore, we have to use this ugly, messy workaround.
 */
/**
 * Class used to manage modal state.
 *
 * Accessible on the `app` object via `app.modal` property.
 */
var ModalManagerState = /*#__PURE__*/function () {
  function ModalManagerState() {
    this.modal = null;
    this.modalList = [];
    this.backdropShown = false;
    this.key = 0;
  }
  var _proto = ModalManagerState.prototype;
  /**
   * Shows a modal dialog.
   *
   * If `stackModal` is `true`, the modal will be shown on top of the current modal.
   *
   * If a value for `stackModal` is not provided, opening a new modal will close
   * any others currently being shown for backwards compatibility.
   *
   * @example <caption>Show a modal</caption>
   * app.modal.show(MyCoolModal, { attr: 'value' });
   *
   * @example <caption>Show a modal from a lifecycle method (`oncreate`, `view`, etc.)</caption>
   * // This "hack" is needed due to quirks with nested redraws in Mithril.
   * setTimeout(() => app.modal.show(MyCoolModal, { attr: 'value' }), 0);
   *
   * @example <caption>Stacking modals</caption>
   * app.modal.show(MyCoolStackedModal, { attr: 'value' }, true);
   */
  _proto.show = function show(componentClass, attrs, stackModal) {
    var _this = this;
    if (attrs === void 0) {
      attrs = {};
    }
    if (stackModal === void 0) {
      stackModal = false;
    }
    if (!(componentClass.prototype instanceof _components_Modal__WEBPACK_IMPORTED_MODULE_0__["default"])) {
      // This is duplicated so that if the error is caught, an error message still shows up in the debug console.
      var invalidModalWarning = 'The ModalManager can only show Modals.';
      console.error(invalidModalWarning);
      throw new Error(invalidModalWarning);
    }
    this.backdropShown = true;
    m.redraw.sync();

    // We use requestAnimationFrame here, since we need to wait for the backdrop to be added
    // to the DOM before actually adding the modal to the modal list.
    //
    // This is because we use RAF inside the ModalManager onupdate lifecycle hook, and if we
    // skip this RAF call, the hook will attempt to add a focus trap as well as lock scroll
    // onto the newly added modal before it's in the DOM, creating an extra scrollbar.
    requestAnimationFrame(function () {
      // Set current modal
      _this.modal = {
        componentClass: componentClass,
        attrs: attrs,
        key: _this.key++
      };

      // We want to stack this modal
      if (stackModal) {
        // Remember previously opened modal and add new modal to the modal list
        _this.modalList.push(_this.modal);
      } else {
        // Override last modals
        _this.modalList = [_this.modal];
      }
      m.redraw();
    });
  }

  /**
   * Closes the topmost currently open dialog, if one is open.
   */;
  _proto.close = function close() {
    if (!this.modal) return;

    // If there are two modals, remove the most recent one
    if (this.modalList.length > 1) {
      // Remove last modal from list
      this.modalList.pop();

      // Open last modal from list
      this.modal = this.modalList[this.modalList.length - 1];
    } else {
      // Reset state
      this.modal = null;
      this.modalList = [];
    }
    m.redraw();
  }

  /**
   * Checks if a modal is currently open.
   *
   * @return `true` if a modal dialog is currently open, otherwise `false`.
   */;
  _proto.isModalOpen = function isModalOpen() {
    return !!this.modal;
  };
  return ModalManagerState;
}();


/***/ }),

/***/ "./src/common/states/PaginatedListState.ts":
/*!*************************************************!*\
  !*** ./src/common/states/PaginatedListState.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PaginatedListState)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");


var PaginatedListState = /*#__PURE__*/function () {
  function PaginatedListState(params, page, pageSize) {
    if (params === void 0) {
      params = {};
    }
    if (page === void 0) {
      page = 1;
    }
    if (pageSize === void 0) {
      pageSize = 20;
    }
    this.location = void 0;
    this.pageSize = void 0;
    this.pages = [];
    this.params = {};
    this.initialLoading = false;
    this.loadingPrev = false;
    this.loadingNext = false;
    this.params = params;
    this.location = {
      page: page
    };
    this.pageSize = pageSize;
  }
  var _proto = PaginatedListState.prototype;
  _proto.clear = function clear() {
    this.pages = [];
    m.redraw();
  };
  _proto.loadPrev = function loadPrev() {
    var _this = this;
    if (this.loadingPrev || this.getLocation().page === 1) return Promise.resolve();
    this.loadingPrev = true;
    var page = this.getPrevPageNumber();
    return this.loadPage(page).then(this.parseResults.bind(this, page))["finally"](function () {
      return _this.loadingPrev = false;
    });
  };
  _proto.loadNext = function loadNext() {
    var _this2 = this;
    if (this.loadingNext) return Promise.resolve();
    this.loadingNext = true;
    var page = this.getNextPageNumber();
    return this.loadPage(page).then(this.parseResults.bind(this, page))["finally"](function () {
      return _this2.loadingNext = false;
    });
  };
  _proto.parseResults = function parseResults(pg, results) {
    var _results$payload;
    var pageNum = Number(pg);
    var links = (_results$payload = results.payload) == null ? void 0 : _results$payload.links;
    var page = {
      number: pageNum,
      items: results,
      hasNext: !!(links != null && links.next),
      hasPrev: !!(links != null && links.prev)
    };
    if (this.isEmpty() || pageNum > this.getNextPageNumber() - 1) {
      this.pages.push(page);
    } else {
      this.pages.unshift(page);
    }
    this.location = {
      page: pageNum
    };
    m.redraw();
  }

  /**
   * Load a new page of results.
   */;
  _proto.loadPage = function loadPage(page) {
    if (page === void 0) {
      page = 1;
    }
    var reqParams = this.requestParams();
    var include = Array.isArray(reqParams.include) ? reqParams.include.join(',') : reqParams.include;
    var params = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, reqParams, {
      page: (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, reqParams.page, {
        offset: this.pageSize * (page - 1)
      }),
      include: include
    });
    return _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].store.find(this.type, params);
  }

  /**
   * Get the parameters that should be passed in the API request.
   * Do not include page offset unless subclass overrides loadPage.
   *
   * @abstract
   * @see loadPage
   */;
  _proto.requestParams = function requestParams() {
    return this.params;
  }

  /**
   * Update the `this.params` object, calling `refresh` if they have changed.
   * Use `requestParams` for converting `this.params` into API parameters
   *
   * @param newParams
   * @param page
   * @see requestParams
   */;
  _proto.refreshParams = function refreshParams(newParams, page) {
    if (this.isEmpty() || this.paramsChanged(newParams)) {
      this.params = newParams;
      return this.refresh(page);
    }
    return Promise.resolve();
  };
  _proto.refresh = function refresh(page) {
    var _this3 = this;
    if (page === void 0) {
      page = 1;
    }
    this.initialLoading = true;
    this.loadingPrev = false;
    this.loadingNext = false;
    this.clear();
    this.location = {
      page: page
    };
    return this.loadPage().then(function (results) {
      _this3.pages = [];
      _this3.parseResults(_this3.location.page, results);
    })["finally"](function () {
      return _this3.initialLoading = false;
    });
  };
  _proto.getPages = function getPages() {
    return this.pages;
  };
  _proto.getLocation = function getLocation() {
    return this.location;
  };
  _proto.isLoading = function isLoading() {
    return this.initialLoading || this.loadingNext || this.loadingPrev;
  };
  _proto.isInitialLoading = function isInitialLoading() {
    return this.initialLoading;
  };
  _proto.isLoadingPrev = function isLoadingPrev() {
    return this.loadingPrev;
  };
  _proto.isLoadingNext = function isLoadingNext() {
    return this.loadingNext;
  }

  /**
   * Returns true when the number of items across all loaded pages is not 0.
   *
   * @see isEmpty
   */;
  _proto.hasItems = function hasItems() {
    return !!this.getAllItems().length;
  }

  /**
   * Returns true when there aren't any items *and* the state has already done its initial loading.
   * If you want to know whether there are items regardless of load state, use `hasItems()` instead
   *
   * @see hasItems
   */;
  _proto.isEmpty = function isEmpty() {
    return !this.isInitialLoading() && !this.hasItems();
  };
  _proto.hasPrev = function hasPrev() {
    var _this$pages$;
    return !!((_this$pages$ = this.pages[0]) != null && _this$pages$.hasPrev);
  };
  _proto.hasNext = function hasNext() {
    var _this$pages;
    return !!((_this$pages = this.pages[this.pages.length - 1]) != null && _this$pages.hasNext);
  }

  /**
   * Stored state parameters.
   */;
  _proto.getParams = function getParams() {
    return this.params;
  };
  _proto.getNextPageNumber = function getNextPageNumber() {
    var _this$pages2;
    var pg = (_this$pages2 = this.pages[this.pages.length - 1]) == null ? void 0 : _this$pages2.number;
    if (pg && !isNaN(pg)) {
      return pg + 1;
    } else {
      return this.location.page;
    }
  };
  _proto.getPrevPageNumber = function getPrevPageNumber() {
    var _this$pages$2;
    var pg = (_this$pages$2 = this.pages[0]) == null ? void 0 : _this$pages$2.number;
    if (pg && !isNaN(pg)) {
      // If the calculated page number is less than 1,
      // return 1 as the prev page (first possible page number)
      return Math.max(pg - 1, 1);
    } else {
      return this.location.page;
    }
  };
  _proto.paramsChanged = function paramsChanged(newParams) {
    var _this4 = this;
    return Object.keys(newParams).some(function (key) {
      return _this4.getParams()[key] !== newParams[key];
    });
  };
  _proto.getAllItems = function getAllItems() {
    return this.getPages().map(function (pg) {
      return pg.items;
    }).flat();
  };
  return PaginatedListState;
}();


/***/ }),

/***/ "./src/common/utils/BasicEditorDriver.ts":
/*!***********************************************!*\
  !*** ./src/common/utils/BasicEditorDriver.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BasicEditorDriver)
/* harmony export */ });
/* harmony import */ var textarea_caret__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! textarea-caret */ "../../../node_modules/textarea-caret/index.js");
/* harmony import */ var textarea_caret__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(textarea_caret__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _insertText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertText */ "./src/common/utils/insertText.ts");
/* harmony import */ var _ItemList__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ItemList */ "./src/common/utils/ItemList.ts");



var BasicEditorDriver = /*#__PURE__*/function () {
  function BasicEditorDriver(dom, params) {
    this.el = void 0;
    this.el = document.createElement('textarea');
    this.build(dom, params);
  }
  var _proto = BasicEditorDriver.prototype;
  _proto.build = function build(dom, params) {
    var _this = this;
    this.el.className = params.classNames.join(' ');
    this.el.disabled = params.disabled;
    this.el.placeholder = params.placeholder;
    this.el.value = params.value;
    var callInputListeners = function callInputListeners(e) {
      params.inputListeners.forEach(function (listener) {
        listener();
      });
      e.redraw = false;
    };
    this.el.oninput = function (e) {
      params.oninput(_this.el.value);
      callInputListeners(e);
    };
    this.el.onclick = callInputListeners;
    this.el.onkeyup = callInputListeners;
    this.el.addEventListener('keydown', function (e) {
      _this.keyHandlers(params).toArray().forEach(function (handler) {
        return handler(e);
      });
    });
    dom.append(this.el);
  };
  _proto.keyHandlers = function keyHandlers(params) {
    var items = new _ItemList__WEBPACK_IMPORTED_MODULE_2__["default"]();
    items.add('submit', function (e) {
      if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {
        params.onsubmit();
      }
    });
    return items;
  };
  _proto.moveCursorTo = function moveCursorTo(position) {
    this.setSelectionRange(position, position);
  };
  _proto.getSelectionRange = function getSelectionRange() {
    return [this.el.selectionStart, this.el.selectionEnd];
  };
  _proto.getLastNChars = function getLastNChars(n) {
    var value = this.el.value;
    return value.slice(Math.max(0, this.el.selectionStart - n), this.el.selectionStart);
  };
  _proto.insertAtCursor = function insertAtCursor(text) {
    this.insertAt(this.el.selectionStart, text);
  };
  _proto.insertAt = function insertAt(pos, text) {
    this.insertBetween(pos, pos, text);
  };
  _proto.insertBetween = function insertBetween(selectionStart, selectionEnd, text) {
    this.setSelectionRange(selectionStart, selectionEnd);
    var cursorPos = selectionStart + text.length;
    (0,_insertText__WEBPACK_IMPORTED_MODULE_1__["default"])(this.el, {
      text: text,
      selectionStart: cursorPos,
      selectionEnd: cursorPos
    });
  };
  _proto.replaceBeforeCursor = function replaceBeforeCursor(start, text) {
    this.insertBetween(start, this.el.selectionStart, text);
  };
  _proto.setSelectionRange = function setSelectionRange(start, end) {
    this.el.setSelectionRange(start, end);
    this.focus();
  };
  _proto.getCaretCoordinates = function getCaretCoordinates(position) {
    var relCoords = textarea_caret__WEBPACK_IMPORTED_MODULE_0___default()(this.el, position);
    return {
      top: relCoords.top - this.el.scrollTop,
      left: relCoords.left
    };
  }

  // DOM Interactions

  /**
   * Set the disabled status of the editor.
   */;
  _proto.disabled = function disabled(_disabled) {
    this.el.disabled = _disabled;
  }

  /**
   * Focus on the editor.
   */;
  _proto.focus = function focus() {
    this.el.focus();
  }

  /**
   * Destroy the editor
   */;
  _proto.destroy = function destroy() {
    this.el.remove();
  };
  return BasicEditorDriver;
}();


/***/ }),

/***/ "./src/common/utils/EventEmitter.ts":
/*!******************************************!*\
  !*** ./src/common/utils/EventEmitter.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EventEmitter)
/* harmony export */ });
var EventEmitter = /*#__PURE__*/function () {
  function EventEmitter() {
    this.events = {};
    this.events = {};
  }
  var _proto = EventEmitter.prototype;
  _proto.on = function on(event, listener) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(listener);
    return this;
  };
  _proto.emit = function emit(event) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    if (this.events[event]) {
      this.events[event].forEach(function (listener) {
        return listener.apply(void 0, args);
      });
    }
  };
  return EventEmitter;
}();


/***/ }),

/***/ "./src/common/utils/ItemList.ts":
/*!**************************************!*\
  !*** ./src/common/utils/ItemList.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ItemList)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "../../../node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _isObject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isObject */ "./src/common/utils/isObject.ts");



var Item = function Item(content, priority) {
  this.content = void 0;
  this.priority = void 0;
  this.content = content;
  this.priority = priority;
};
/**
 * The `ItemList` class collects items and then arranges them into an array
 * by priority.
 */
var ItemList = /*#__PURE__*/function () {
  function ItemList() {
    this._items = {};
  }
  var _proto = ItemList.prototype;
  /**
   * Check whether the list is empty.
   */
  _proto.isEmpty = function isEmpty() {
    return Object.keys(this._items).length === 0;
  }

  /**
   * Check whether an item is present in the list.
   */;
  _proto.has = function has(key) {
    return Object.keys(this._items).includes(key);
  }

  /**
   * Get the content of an item.
   */;
  _proto.get = function get(key) {
    return this._items[key].content;
  }

  /**
   * Get the priority of an item.
   */;
  _proto.getPriority = function getPriority(key) {
    return this._items[key].priority;
  }

  /**
   * Add an item to the list.
   *
   * @param key A unique key for the item.
   * @param content The item's content.
   * @param priority The priority of the item. Items with a higher priority
   * will be positioned before items with a lower priority.
   */;
  _proto.add = function add(key, content, priority) {
    if (priority === void 0) {
      priority = 0;
    }
    this._items[key] = new Item(content, priority);
    return this;
  }

  // TODO: [Flarum 2.0] Remove deprecated `.replace()` method.
  /**
   * Replace an item and/or priority in the list, only if it is already present.
   *
   * If `content` or `priority` are `null`, these values will not be replaced.
   *
   * If the provided `key` is not present, nothing will happen.
   *
   * @deprecated Please use the {@link ItemList.setContent} and {@link ItemList.setPriority}
   * methods to replace items and their priorities. This method will be removed in Flarum 2.0.
   *
   * @param key The key of the item in the list
   * @param content The item's new content
   * @param priority The item's new priority
   *
   * @example <caption>Replace priority and not content.</caption>
   * items.replace('myItem', null, 10);
   *
   * @example <caption>Replace content and not priority.</caption>
   * items.replace('myItem', <p>My new value.</p>);
   *
   * @example <caption>Replace content and priority.</caption>
   * items.replace('myItem', <p>My new value.</p>, 10);
   */;
  _proto.replace = function replace(key, content, priority) {
    if (content === void 0) {
      content = null;
    }
    if (priority === void 0) {
      priority = null;
    }
    if (!this.has(key)) return this;
    if (content !== null) {
      this._items[key].content = content;
    }
    if (priority !== null) {
      this._items[key].priority = priority;
    }
    return this;
  }

  /**
   * Replaces an item's content, if the provided item key exists.
   *
   * If the provided `key` is not present, an error will be thrown.
   *
   * @param key The key of the item in the list
   * @param content The item's new content
   *
   * @example <caption>Replace item content.</caption>
   * items.setContent('myItem', <p>My new value.</p>);
   *
   * @example <caption>Replace item content and priority.</caption>
   *          items
   *            .setContent('myItem', <p>My new value.</p>)
   *            .setPriority('myItem', 10);
   *
   * @throws If the provided `key` is not present in the ItemList.
   */;
  _proto.setContent = function setContent(key, content) {
    if (!this.has(key)) {
      throw new Error("[ItemList] Cannot set content of Item. Key `" + key + "` is not present.");
    }

    // Saves on bundle size to call the deprecated method internally
    return this.replace(key, content);
  }

  /**
   * Replaces an item's priority, if the provided item key exists.
   *
   * If the provided `key` is not present, an error will be thrown.
   *
   * @param key The key of the item in the list
   * @param priority The item's new priority
   *
   * @example <caption>Replace item priority.</caption>
   * items.setPriority('myItem', 10);
   *
   * @example <caption>Replace item priority and content.</caption>
   *          items
   *            .setPriority('myItem', 10)
   *            .setContent('myItem', <p>My new value.</p>);
   *
   * @throws If the provided `key` is not present in the ItemList.
   */;
  _proto.setPriority = function setPriority(key, priority) {
    if (!this.has(key)) {
      throw new Error("[ItemList] Cannot set priority of Item. Key `" + key + "` is not present.");
    }
    this._items[key].priority = priority;
    return this;
  }

  /**
   * Remove an item from the list.
   *
   * If the provided `key` is not present, nothing will happen.
   */;
  _proto.remove = function remove(key) {
    delete this._items[key];
    return this;
  }

  /**
   * Merge another list's items into this one.
   *
   * The list passed to this function will overwrite items which already exist
   * with the same key.
   */;
  _proto.merge = function merge(otherList) {
    var _this = this;
    Object.keys(otherList._items).forEach(function (key) {
      var val = otherList._items[key];
      if (val instanceof Item) {
        _this._items[key] = val;
      }
    });
    return this;
  }

  /**
   * Convert the list into an array of item content arranged by priority.
   *
   * This **does not** preserve the original types of primitives and proxies
   * all content values to make `itemName` accessible on them.
   *
   * **NOTE:** If your ItemList holds primitive types (such as numbers, booleans
   * or strings), these will be converted to their object counterparts if you do
   * not provide `true` to this function.
   *
   * **NOTE:** Modifying any objects in the final array may also update the
   * content of the original ItemList.
   *
   * @param keepPrimitives Converts item content to objects and sets the
   * `itemName` property on them.
   *
   * @see https://github.com/flarum/core/issues/3030
   */;
  _proto.toArray = function toArray(keepPrimitives) {
    var _this2 = this;
    if (keepPrimitives === void 0) {
      keepPrimitives = false;
    }
    var items = Object.keys(this._items).map(function (key, i) {
      var item = _this2._items[key];
      if (!keepPrimitives || (0,_isObject__WEBPACK_IMPORTED_MODULE_2__["default"])(item.content)) {
        // Convert content to object, then proxy it
        return (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, item, {
          content: _this2.createItemContentProxy((0,_isObject__WEBPACK_IMPORTED_MODULE_2__["default"])(item.content) ? item.content : Object(item.content), key)
        });
      } else {
        // ...otherwise just return a clone of the item.
        return (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, item);
      }
    });
    return items.sort(function (a, b) {
      return b.priority - a.priority;
    }).map(function (item) {
      return item.content;
    });
  }

  /**
   * A read-only map of all keys to their respective items in no particular order.
   *
   * We don't allow adding new items to the ItemList via setting new properties,
   * nor do we allow modifying existing items directly. You should use the
   * {@link ItemList.add}, {@link ItemList.setContent} and
   * {@link ItemList.setPriority} methods instead.
   *
   * To match the old behaviour of the `ItemList.items` property, call
   * `Object.values(ItemList.toObject())`.
   *
   * @example
   * const items = new ItemList();
   * items.add('b', 'My cool value', 20);
   * items.add('a', 'My value', 10);
   * items.toObject();
   * // {
   * //   a: { content: 'My value', priority: 10, itemName: 'a' },
   * //   b: { content: 'My cool value', priority: 20, itemName: 'b' },
   * // }
   */;
  _proto.toObject = function toObject() {
    var _this3 = this;
    return Object.keys(this._items).reduce(function (map, key) {
      var obj = {
        content: _this3.get(key),
        itemName: key,
        priority: _this3.getPriority(key)
      };
      map[key] = obj;
      return map;
    }, {});
  }

  /**
   * Proxies an item's content, adding the `itemName` readonly property to it.
   *
   * @example
   * createItemContentProxy({ foo: 'bar' }, 'myItem');
   * // { foo: 'bar', itemName: 'myItem' }
   *
   * @param content The item's content (objects only)
   * @param key The item's key
   * @return Proxied content
   *
   * @internal
   */;
  _proto.createItemContentProxy = function createItemContentProxy(content, key) {
    return new Proxy(content, {
      get: function get(target, property, receiver) {
        if (property === 'itemName') return key;
        return Reflect.get(target, property, receiver);
      },
      set: function set(target, property, value, receiver) {
        if (key !== null && property === 'itemName') {
          throw new Error('`itemName` property is read-only');
        }
        return Reflect.set(target, property, value, receiver);
      }
    });
  };
  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(ItemList, [{
    key: "items",
    get:
    // TODO: [Flarum 2.0] Remove `.items` getter.
    /**
     * A **read-only copy** of items in the list.
     *
     * We don't allow adding new items to the ItemList via setting new properties,
     * nor do we allow modifying existing items directly.
     *
     * @deprecated Use {@link ItemList.toObject} instead.
     */
    function get() {
      return new Proxy(this._items, {
        set: function set() {
          console.warn('Modifying `ItemList.items` is not allowed.');
          return false;
        }
      });
    }
  }]);
  return ItemList;
}();


/***/ }),

/***/ "./src/common/utils/KeyboardNavigatable.ts":
/*!*************************************************!*\
  !*** ./src/common/utils/KeyboardNavigatable.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ KeyboardNavigatable)
/* harmony export */ });
var Keys;
/**
 * The `KeyboardNavigatable` class manages lists that can be navigated with the
 * keyboard, calling callbacks for each actions.
 *
 * This helper encapsulates the key binding logic, providing a simple fluent
 * API for use.
 */
(function (Keys) {
  Keys[Keys["Enter"] = 13] = "Enter";
  Keys[Keys["Escape"] = 27] = "Escape";
  Keys[Keys["Space"] = 32] = "Space";
  Keys[Keys["ArrowUp"] = 38] = "ArrowUp";
  Keys[Keys["ArrowDown"] = 40] = "ArrowDown";
  Keys[Keys["ArrowLeft"] = 37] = "ArrowLeft";
  Keys[Keys["ArrowRight"] = 39] = "ArrowRight";
  Keys[Keys["Tab"] = 9] = "Tab";
  Keys[Keys["Backspace"] = 8] = "Backspace";
})(Keys || (Keys = {}));
var KeyboardNavigatable = /*#__PURE__*/function () {
  function KeyboardNavigatable() {
    this.callbacks = new Map();
    this.whenCallback = function (event) {
      return true;
    };
  }
  var _proto = KeyboardNavigatable.prototype;
  /**
   * Provide a callback to be executed when navigating upwards.
   *
   * This will be triggered by the Up key.
   */
  _proto.onUp = function onUp(callback) {
    this.callbacks.set(Keys.ArrowUp, function (e) {
      e.preventDefault();
      callback(e);
    });
    return this;
  }

  /**
   * Provide a callback to be executed when navigating downwards.
   *
   * This will be triggered by the Down key.
   */;
  _proto.onDown = function onDown(callback) {
    this.callbacks.set(Keys.ArrowDown, function (e) {
      e.preventDefault();
      callback(e);
    });
    return this;
  }

  /**
   * Provide a callback to be executed when the current item is selected..
   *
   * This will be triggered by the Return key (and Tab key, if not disabled).
   */;
  _proto.onSelect = function onSelect(callback, ignoreTabPress) {
    if (ignoreTabPress === void 0) {
      ignoreTabPress = false;
    }
    var handler = function handler(e) {
      e.preventDefault();
      callback(e);
    };
    if (!ignoreTabPress) this.callbacks.set(Keys.Tab, handler);
    this.callbacks.set(Keys.Enter, handler);
    return this;
  }

  /**
   * Provide a callback to be executed when the current item is tabbed into.
   *
   * This will be triggered by the Tab key.
   */;
  _proto.onTab = function onTab(callback) {
    var handler = function handler(e) {
      e.preventDefault();
      callback(e);
    };
    this.callbacks.set(9, handler);
    return this;
  }

  /**
   * Provide a callback to be executed when the navigation is canceled.
   *
   * This will be triggered by the Escape key.
   */;
  _proto.onCancel = function onCancel(callback) {
    this.callbacks.set(Keys.Escape, function (e) {
      e.stopPropagation();
      e.preventDefault();
      callback(e);
    });
    return this;
  }

  /**
   * Provide a callback to be executed when previous input is removed.
   *
   * This will be triggered by the Backspace key.
   */;
  _proto.onRemove = function onRemove(callback) {
    this.callbacks.set(Keys.Backspace, function (e) {
      if (e instanceof KeyboardEvent && e.target instanceof HTMLInputElement && e.target.selectionStart === 0 && e.target.selectionEnd === 0) {
        callback(e);
        e.preventDefault();
      }
    });
    return this;
  }

  /**
   * Provide a callback that determines whether keyboard input should be handled.
   */;
  _proto.when = function when(callback) {
    this.whenCallback = callback;
    return this;
  }

  /**
   * Set up the navigation key bindings on the given jQuery element.
   */;
  _proto.bindTo = function bindTo($element) {
    // Handle navigation key events on the navigatable element.
    $element[0].addEventListener('keydown', this.navigate.bind(this));
  }

  /**
   * Interpret the given keyboard event as navigation commands.
   */;
  _proto.navigate = function navigate(event) {
    // This callback determines whether keyboard should be handled or ignored.
    if (!this.whenCallback(event)) return;
    var keyCallback = this.callbacks.get(event.which);
    if (keyCallback) {
      keyCallback(event);
    }
  };
  return KeyboardNavigatable;
}();


/***/ }),

/***/ "./src/common/utils/RequestError.ts":
/*!******************************************!*\
  !*** ./src/common/utils/RequestError.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ RequestError)
/* harmony export */ });
var RequestError = function RequestError(status, responseText, options, xhr) {
  this.status = void 0;
  this.options = void 0;
  this.xhr = void 0;
  this.responseText = void 0;
  this.response = void 0;
  this.alert = void 0;
  this.status = status;
  this.responseText = responseText;
  this.options = options;
  this.xhr = xhr;
  try {
    this.response = JSON.parse(responseText != null ? responseText : 'null');
  } catch (e) {
    this.response = null;
  }
  this.alert = null;
};


/***/ }),

/***/ "./src/common/utils/Stream.ts":
/*!************************************!*\
  !*** ./src/common/utils/Stream.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var mithril_stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mithril/stream */ "../../../node_modules/mithril/stream.js");
/* harmony import */ var mithril_stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mithril_stream__WEBPACK_IMPORTED_MODULE_0__);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mithril_stream__WEBPACK_IMPORTED_MODULE_0___default()));

/***/ }),

/***/ "./src/common/utils/SubtreeRetainer.ts":
/*!*********************************************!*\
  !*** ./src/common/utils/SubtreeRetainer.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SubtreeRetainer)
/* harmony export */ });
/**
 * The `SubtreeRetainer` class keeps track of a number of pieces of data,
 * comparing the values of these pieces at every iteration.
 *
 * This is useful for preventing redraws to relatively static (or huge)
 * components whose VDOM only depends on very few values, when none of them
 * have changed.
 *
 * @example
 * // Check two callbacks for changes on each update
 * this.subtree = new SubtreeRetainer(
 *   () => this.attrs.post.freshness,
 *   () => this.showing
 * );
 *
 * // Add more callbacks to be checked for updates
 * this.subtree.check(() => this.attrs.user.freshness);
 *
 * // In a component's onbeforeupdate() method:
 * return this.subtree.needsRebuild()
 *
 * @see https://mithril.js.org/lifecycle-methods.html#onbeforeupdate
 */
var SubtreeRetainer = /*#__PURE__*/function () {
  /**
   * @param callbacks Functions returning data to keep track of.
   */
  function SubtreeRetainer() {
    this.callbacks = void 0;
    this.data = void 0;
    for (var _len = arguments.length, callbacks = new Array(_len), _key = 0; _key < _len; _key++) {
      callbacks[_key] = arguments[_key];
    }
    this.callbacks = callbacks;
    this.data = {};

    // Build the initial data, so it is available when calling
    // needsRebuild from the onbeforeupdate hook.
    this.needsRebuild();
  }

  /**
   * Return whether any data has changed since the last check.
   * If so, Mithril needs to re-diff the vnode and its children.
   */
  var _proto = SubtreeRetainer.prototype;
  _proto.needsRebuild = function needsRebuild() {
    var _this = this;
    var needsRebuild = false;
    this.callbacks.forEach(function (callback, i) {
      var result = callback();
      if (result !== _this.data[i]) {
        _this.data[i] = result;
        needsRebuild = true;
      }
    });
    return needsRebuild;
  }

  /**
   * Add another callback to be checked.
   */;
  _proto.check = function check() {
    for (var _len2 = arguments.length, callbacks = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      callbacks[_key2] = arguments[_key2];
    }
    this.callbacks = this.callbacks.concat(callbacks);
    // Update the data cache when new checks are added.
    this.needsRebuild();
  }

  /**
   * Invalidate the subtree, forcing it to be redrawn.
   */;
  _proto.invalidate = function invalidate() {
    this.data = {};
  };
  return SubtreeRetainer;
}();


/***/ }),

/***/ "./src/common/utils/abbreviateNumber.ts":
/*!**********************************************!*\
  !*** ./src/common/utils/abbreviateNumber.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ abbreviateNumber)
/* harmony export */ });
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");
/* harmony import */ var _extractText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./extractText */ "./src/common/utils/extractText.ts");



/**
 * The `abbreviateNumber` utility converts a number to a shorter localized form.
 *
 * @example
 * abbreviateNumber(1234);
 * // "1.2K"
 */
function abbreviateNumber(number) {
  // TODO: translation
  if (number >= 1000000) {
    return Math.floor(number / 1000000) + (0,_extractText__WEBPACK_IMPORTED_MODULE_1__["default"])(_common_app__WEBPACK_IMPORTED_MODULE_0__["default"].translator.trans('core.lib.number_suffix.mega_text'));
  } else if (number >= 1000) {
    return (number / 1000).toFixed(1) + (0,_extractText__WEBPACK_IMPORTED_MODULE_1__["default"])(_common_app__WEBPACK_IMPORTED_MODULE_0__["default"].translator.trans('core.lib.number_suffix.kilo_text'));
  } else {
    return number.toString();
  }
}

/***/ }),

/***/ "./src/common/utils/arrayFlatPolyfill.ts":
/*!***********************************************!*\
  !*** ./src/common/utils/arrayFlatPolyfill.ts ***!
  \***********************************************/
/***/ (() => {

// Based off of the polyfill on MDN
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat#reduce_concat_isarray_recursivity
//
// Needed to provide support for Safari on iOS < 12

// ts-ignored because we can afford to encapsulate some messy logic behind the clean typings.

if (!Array.prototype['flat']) {
  Array.prototype['flat'] = function flat(depth) {
    // @ts-ignore
    return (depth != null ? depth : 1) > 0 ?
    // @ts-ignore
    Array.prototype.reduce.call(this, function (acc, val) {
      return acc.concat(Array.isArray(val) ? flat.call(val, depth - 1) : val);
    }, []) : // If no depth is provided, or depth is 0, just return a copy of
    // the array. Spread is supported in all major browsers (iOS 8+)
    // @ts-ignore
    [].concat(this);
  };
}

/***/ }),

/***/ "./src/common/utils/classList.ts":
/*!***************************************!*\
  !*** ./src/common/utils/classList.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! clsx */ "../../../node_modules/clsx/dist/clsx.m.js");


/**
 * This util exposes `clsx` to core and extensions as a re-usable utility.
 *
 * For full documentation, see `clsx` on GitHub.
 *
 * @see https://github.com/lukeed/clsx
 */
var classList = clsx__WEBPACK_IMPORTED_MODULE_0__["default"];
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (classList);

/***/ }),

/***/ "./src/common/utils/computed.ts":
/*!**************************************!*\
  !*** ./src/common/utils/computed.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ computed)
/* harmony export */ });
/**
 * The `computed` utility creates a function that will cache its output until
 * any of the dependent values are dirty.
 *
 * @param dependentKeys The keys of the dependent values.
 * @param compute The function which computes the value using the
 *     dependent values.
 */
function computed() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }
  var keys = args.slice(0, -1);
  var compute = args.slice(-1)[0];
  var dependentValues = {};
  var computedValue;
  return function () {
    var _this = this;
    var recompute = false;

    // Read all of the dependent values. If any of them have changed since last
    // time, then we'll want to recompute our output.
    keys.forEach(function (key) {
      var attr = _this[key];
      var value = typeof attr === 'function' ? attr.call(_this) : attr;
      if (dependentValues[key] !== value) {
        recompute = true;
        dependentValues[key] = value;
      }
    });
    if (recompute) {
      computedValue = compute.apply(this, keys.map(function (key) {
        return dependentValues[key];
      }));
    }
    return computedValue;
  };
}

/***/ }),

/***/ "./src/common/utils/escapeRegExp.ts":
/*!******************************************!*\
  !*** ./src/common/utils/escapeRegExp.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ escapeRegExp)
/* harmony export */ });
var specialChars = /[.*+?^${}()|[\]\\]/g;

/**
 * Escapes the `RegExp` special characters in `input`.
 *
 * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping
 */
function escapeRegExp(input) {
  return input.replace(specialChars, '\\$&');
}

/***/ }),

/***/ "./src/common/utils/extract.ts":
/*!*************************************!*\
  !*** ./src/common/utils/extract.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ extract)
/* harmony export */ });
/**
 * The `extract` utility deletes a property from an object and returns its
 * value.
 *
 * @param object The object that owns the property
 * @param property The name of the property to extract
 * @return The value of the property
 */
function extract(object, property) {
  var value = object[property];
  delete object[property];
  return value;
}

/***/ }),

/***/ "./src/common/utils/extractText.ts":
/*!*****************************************!*\
  !*** ./src/common/utils/extractText.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ extractText)
/* harmony export */ });
/**
 * Extract the text nodes from a virtual element.
 */
function extractText(vdom) {
  if (vdom instanceof Array) {
    return vdom.map(function (element) {
      return extractText(element);
    }).join('');
  } else if (typeof vdom === 'object' && vdom !== null) {
    return vdom.children ? extractText(vdom.children) : String(vdom.text);
  } else {
    return String(vdom);
  }
}

/***/ }),

/***/ "./src/common/utils/focusTrap.ts":
/*!***************************************!*\
  !*** ./src/common/utils/focusTrap.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createFocusTrap": () => (/* binding */ createFocusTrap)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var focus_trap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! focus-trap */ "../../../node_modules/focus-trap/dist/focus-trap.esm.js");



/**
 * Creates a focus trap for the given element with the given options.
 * 
 * This function applies some default options that are different to the library.
 * Your own options still override these custom defaults:
 * 
 * ```json
 * {
     escapeDeactivates: false,
 * }
 * ```
 * 
 * @param element The element to be the focus trap, or a selector that will be used to find the element.
 * 
 * @see https://github.com/focus-trap/focus-trap#readme - Library documentation
 */
function createFocusTrap() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }
  args[1] = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
    escapeDeactivates: false
  }, args[1]);
  return focus_trap__WEBPACK_IMPORTED_MODULE_1__.createFocusTrap.apply(void 0, args);
}



/***/ }),

/***/ "./src/common/utils/formatNumber.ts":
/*!******************************************!*\
  !*** ./src/common/utils/formatNumber.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ formatNumber)
/* harmony export */ });
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");


/**
 * The `formatNumber` utility localizes a number into a string with the
 * appropriate punctuation based on the provided locale otherwise will default to the users locale.
 *
 * @example
 * formatNumber(1234);
 * // 1,234
 */
function formatNumber(number, locale) {
  if (locale === void 0) {
    locale = _common_app__WEBPACK_IMPORTED_MODULE_0__["default"].data.locale;
  }
  return new Intl.NumberFormat(locale).format(number);
}

/***/ }),

/***/ "./src/common/utils/humanTime.ts":
/*!***************************************!*\
  !*** ./src/common/utils/humanTime.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ humanTime)
/* harmony export */ });
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dayjs */ "../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/dayjs/dayjs.min.js");
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);


/**
 * The `humanTime` utility converts a date to a localized, human-readable time-
 * ago string.
 */
function humanTime(time) {
  var d = dayjs__WEBPACK_IMPORTED_MODULE_0___default()(time);
  var now = dayjs__WEBPACK_IMPORTED_MODULE_0___default()();

  // To prevent showing things like "in a few seconds" due to small offsets
  // between client and server time, we always reset future dates to the
  // current time. This will result in "just now" being shown instead.
  if (d.isAfter(now)) {
    d = now;
  }
  var day = 864e5;
  var diff = d.diff(dayjs__WEBPACK_IMPORTED_MODULE_0___default()());
  var ago;

  // If this date was more than a month ago, we'll show the name of the month
  // in the string. If it wasn't this year, we'll show the year as well.
  if (diff < -30 * day) {
    if (d.year() === dayjs__WEBPACK_IMPORTED_MODULE_0___default()().year()) {
      ago = d.format('D MMM');
    } else {
      ago = d.format('ll');
    }
  } else {
    ago = d.fromNow();
  }
  return ago;
}

/***/ }),

/***/ "./src/common/utils/insertText.ts":
/*!****************************************!*\
  !*** ./src/common/utils/insertText.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ insertText)
/* harmony export */ });
/*
 * Original Copyright GitHub, Inc. Licensed under the MIT License.
 * See license text at https://github.com/github/markdown-toolbar-element/blob/master/LICENSE.
 */

var canInsertText = null;
function insertText(textarea, _ref) {
  var text = _ref.text,
    selectionStart = _ref.selectionStart,
    selectionEnd = _ref.selectionEnd;
  var originalSelectionStart = textarea.selectionStart;
  var before = textarea.value.slice(0, originalSelectionStart);
  var after = textarea.value.slice(textarea.selectionEnd);
  if (canInsertText === null || canInsertText === true) {
    textarea.contentEditable = 'true';
    try {
      canInsertText = document.execCommand('insertText', false, text);
    } catch (error) {
      canInsertText = false;
    }
    textarea.contentEditable = 'false';
  }
  if (canInsertText && !textarea.value.slice(0, textarea.selectionStart).endsWith(text)) {
    canInsertText = false;
  }
  if (!canInsertText) {
    textarea.value = before + text + after;
    textarea.dispatchEvent(new CustomEvent('input', {
      bubbles: true,
      cancelable: true
    }));
  }
  if (selectionStart != null && selectionEnd != null) {
    textarea.setSelectionRange(selectionStart, selectionEnd);
  } else {
    textarea.setSelectionRange(originalSelectionStart, textarea.selectionEnd);
  }
}

/***/ }),

/***/ "./src/common/utils/isDark.ts":
/*!************************************!*\
  !*** ./src/common/utils/isDark.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ isDark)
/* harmony export */ });
/**
 * The `isDark` utility converts a hex color to rgb, and then calculates a YIQ
 * value in order to get the appropriate brightness value. See
 * https://www.w3.org/TR/AERT/#color-contrast for references.
 *
 * A YIQ value >= 128 corresponds to a light color according to the W3C
 * standards, but we use a custom threshold for each light and dark modes
 * to preserve design consistency.
 */
function isDark(hexcolor) {
  // return if hexcolor is undefined or shorter than 4 characters, shortest hex form is #333;
  // decided against regex hex color validation for performance considerations
  if (!hexcolor || hexcolor.length < 4) {
    return false;
  }
  var hexnumbers = hexcolor.replace('#', '');
  if (hexnumbers.length === 3) {
    hexnumbers += hexnumbers;
  }
  var r = parseInt(hexnumbers.slice(0, 2), 16);
  var g = parseInt(hexnumbers.slice(2, 4), 16);
  var b = parseInt(hexnumbers.slice(4, 6), 16);
  var yiq = (r * 299 + g * 587 + b * 114) / 1000;
  var threshold = parseInt(getComputedStyle(document.body).getPropertyValue('--yiq-threshold').trim()) || 128;
  return yiq < threshold;
}

/***/ }),

/***/ "./src/common/utils/isObject.ts":
/*!**************************************!*\
  !*** ./src/common/utils/isObject.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ isObject)
/* harmony export */ });
/**
 * Returns if the passed value is an object.
 *
 * In this context, "object" refers to **any non-primitive value**, including
 * arrays, function, maps, dates, and more.
 *
 * @example
 * isObject({}); // true
 * @example
 * isObject([]); // true
 * @example
 * isObject(function () {}); // true
 * @example
 * isObject(Object(1)); // true
 * @example
 * isObject(null); // false
 * @example
 * isObject(1); // false
 * @example
 * isObject("hello world"); // false
 *
 * @see https://github.com/jashkenas/underscore/blob/943977e34e2279503528a71ddcc2dd5f96483945/underscore.js#L87-L91
 */
function isObject(obj) {
  var type = typeof obj;
  return type === 'function' || type === 'object' && !!obj;
}

/***/ }),

/***/ "./src/common/utils/liveHumanTimes.ts":
/*!********************************************!*\
  !*** ./src/common/utils/liveHumanTimes.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ liveHumanTimes)
/* harmony export */ });
/* harmony import */ var _humanTime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./humanTime */ "./src/common/utils/humanTime.ts");

function updateHumanTimes() {
  $('[data-humantime]').each(function () {
    var $this = $(this);
    var ago = (0,_humanTime__WEBPACK_IMPORTED_MODULE_0__["default"])($this.attr('datetime'));
    $this.html(ago);
  });
}

/**
 * The `liveHumanTimes` initializer sets up a loop every 1 second to update
 * timestamps rendered with the `humanTime` helper.
 */
function liveHumanTimes() {
  setInterval(updateHumanTimes, 10000);
}

/***/ }),

/***/ "./src/common/utils/mapRoutes.ts":
/*!***************************************!*\
  !*** ./src/common/utils/mapRoutes.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ mapRoutes)
/* harmony export */ });
/* harmony import */ var _resolvers_DefaultResolver__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../resolvers/DefaultResolver */ "./src/common/resolvers/DefaultResolver.ts");


/**
 * The `mapRoutes` utility converts a map of named application routes into a
 * format that can be understood by Mithril, and wraps them in route resolvers
 * to provide each route with the current route name.
 *
 * @see https://mithril.js.org/route.html#signature
 */
function mapRoutes(routes, basePath) {
  if (basePath === void 0) {
    basePath = '';
  }
  var map = {};
  for (var routeName in routes) {
    var route = routes[routeName];
    if ('resolver' in route) {
      map[basePath + route.path] = route.resolver;
    } else if ('component' in route) {
      var resolverClass = 'resolverClass' in route ? route.resolverClass : _resolvers_DefaultResolver__WEBPACK_IMPORTED_MODULE_0__["default"];
      map[basePath + route.path] = new resolverClass(route.component, routeName);
    } else {
      throw new Error("Either a resolver or a component must be provided for the route [" + routeName + "]");
    }
  }
  return map;
}

/***/ }),

/***/ "./src/common/utils/proxifyCompat.ts":
/*!*******************************************!*\
  !*** ./src/common/utils/proxifyCompat.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ proxifyCompat)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_taggedTemplateLiteralLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/taggedTemplateLiteralLoose */ "../../../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteralLoose.js");

var _templateObject;
function proxifyCompat(compat, namespace) {
  // regex to replace common/ and NAMESPACE/ for core & core extensions
  // and remove .js, .ts and .tsx extensions
  // e.g. admin/utils/extract --> utils/extract
  // e.g. tags/common/utils/sortTags --> tags/utils/sortTags
  var regex = new RegExp(String.raw(_templateObject || (_templateObject = (0,_babel_runtime_helpers_esm_taggedTemplateLiteralLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(["(w+/)?(", "|common)/"], ["(\\w+\\/)?(", "|common)\\/"])), namespace));
  var fileExt = /(\.js|\.tsx?)$/;
  return new Proxy(compat, {
    get: function get(obj, prop) {
      return obj[prop] || obj[prop.replace(regex, '$1').replace(fileExt, '')];
    }
  });
}

/***/ }),

/***/ "./src/common/utils/setRouteWithForcedRefresh.ts":
/*!*******************************************************!*\
  !*** ./src/common/utils/setRouteWithForcedRefresh.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ setRouteWithForcedRefresh)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");

/**
 * Mithril 2 does not completely rerender the page if a route change leads to the same route
 * (or the same component handling a different route). This util calls m.route.set, forcing a reonit.
 *
 * @see https://mithril.js.org/route.html#key-parameter
 */
function setRouteWithForcedRefresh(route, params, options) {
  if (params === void 0) {
    params = null;
  }
  if (options === void 0) {
    options = {};
  }
  var newOptions = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options);
  newOptions.state = newOptions.state || {};
  newOptions.state.key = Date.now();
  m.route.set(route, params, newOptions);
}

/***/ }),

/***/ "./src/common/utils/string.ts":
/*!************************************!*\
  !*** ./src/common/utils/string.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "camelCaseToSnakeCase": () => (/* binding */ camelCaseToSnakeCase),
/* harmony export */   "generateRandomString": () => (/* binding */ generateRandomString),
/* harmony export */   "getPlainContent": () => (/* binding */ getPlainContent),
/* harmony export */   "slug": () => (/* binding */ slug),
/* harmony export */   "truncate": () => (/* binding */ truncate),
/* harmony export */   "ucfirst": () => (/* binding */ ucfirst)
/* harmony export */ });
/**
 * Truncate a string to the given length, appending ellipses if necessary.
 */
function truncate(string, length, start) {
  if (start === void 0) {
    start = 0;
  }
  return (start > 0 ? '...' : '') + string.substring(start, start + length) + (string.length > start + length ? '...' : '');
}

/**
 * Create a slug out of the given string depending on the selected mode.
 * Invalid characters are converted to hyphens.
 *
 * NOTE: This method does not use the comparably sophisticated transliteration
 * mechanism that is employed in the backend. Therefore, it should only be used
 * to *suggest* slugs that can be overridden by the user.
 */
function slug(string, mode) {
  if (mode === void 0) {
    mode = SluggingMode.ALPHANUMERIC;
  }
  switch (mode) {
    case SluggingMode.UTF8:
      return string.toLowerCase()
      // Match non-word characters (take UTF8 into consideration) and replace with a dash.
      .replace(/(?:(?![0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0898-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09F4-\u09F9\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BF2\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C78-\u0C7E\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D63\u0D66-\u0D78\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F33\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u17F0-\u17F9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u20D0-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA672\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA827\uA82C\uA830-\uA835\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE6\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD27\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEFD-\uDF27\uDF30-\uDF54\uDF70-\uDF85\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC52-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF59\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])[\s\S])/gi, '-').replace(/-+/g, '-').replace(/-$|^-/g, '');
    case SluggingMode.ALPHANUMERIC:
    default:
      return string.toLowerCase().replace(/[^a-z0-9]/gi, '-').replace(/-+/g, '-').replace(/-$|^-/g, '');
  }
}
var SluggingMode;
/**
 * Strip HTML tags and quotes out of the given string, replacing them with
 * meaningful punctuation.
 */
(function (SluggingMode) {
  SluggingMode["ALPHANUMERIC"] = "alphanum";
  SluggingMode["UTF8"] = "utf8";
})(SluggingMode || (SluggingMode = {}));
function getPlainContent(string) {
  var html = string.replace(/(<\/p>|<br>)/g, '$1 &nbsp;').replace(/<img\b[^>]*>/gi, ' ');
  var element = new DOMParser().parseFromString(html, 'text/html').documentElement;
  getPlainContent.removeSelectors.forEach(function (selector) {
    var el = element.querySelectorAll(selector);
    el.forEach(function (e) {
      e.remove();
    });
  });
  return element.innerText.replace(/\s+/g, ' ').trim();
}

/**
 * An array of DOM selectors to remove when getting plain content.
 *
 * @type {Array}
 */
getPlainContent.removeSelectors = ['blockquote', 'script'];

/**
 * Make a string's first character uppercase.
 */
function ucfirst(string) {
  return string.substr(0, 1).toUpperCase() + string.substr(1);
}

/**
 * Transform a camel case string to snake case.
 */
function camelCaseToSnakeCase(str) {
  return str.replace(/[A-Z]/g, function (letter) {
    return "_" + letter.toLowerCase();
  });
}

/**
 * Generate a random string (a-z, 0-9) of a given length.
 *
 * Providing a length of less than 0 will result in an error.
 *
 * @param length Length of the random string to generate
 * @returns A random string of provided length
 */
function generateRandomString(length) {
  if (length < 0) throw new Error('Cannot generate a random string with length less than 0.');
  if (length === 0) return '';
  var arr = new Uint8Array(length / 2);
  window.crypto.getRandomValues(arr);
  return Array.from(arr, function (dec) {
    return dec.toString(16).padStart(2, '0');
  }).join('');
}

/***/ }),

/***/ "./src/common/utils/stringToColor.ts":
/*!*******************************************!*\
  !*** ./src/common/utils/stringToColor.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ stringToColor)
/* harmony export */ });
function hsvToRgb(h, s, v) {
  var r;
  var g;
  var b;
  var i = Math.floor(h * 6);
  var f = h * 6 - i;
  var p = v * (1 - s);
  var q = v * (1 - f * s);
  var t = v * (1 - (1 - f) * s);
  switch (i % 6) {
    case 0:
      r = v;
      g = t;
      b = p;
      break;
    case 1:
      r = q;
      g = v;
      b = p;
      break;
    case 2:
      r = p;
      g = v;
      b = t;
      break;
    case 3:
      r = p;
      g = q;
      b = v;
      break;
    case 4:
      r = t;
      g = p;
      b = v;
      break;
    case 5:
      r = v;
      g = p;
      b = q;
      break;
  }
  return {
    r: Math.floor(r * 255),
    g: Math.floor(g * 255),
    b: Math.floor(b * 255)
  };
}

/**
 * Convert the given string to a unique color.
 */
function stringToColor(string) {
  var num = 0;

  // Convert the username into a number based on the ASCII value of each
  // character.
  for (var i = 0; i < string.length; i++) {
    num += string.charCodeAt(i);
  }

  // Construct a color using the remainder of that number divided by 360, and
  // some predefined saturation and value values.
  var hue = num % 360;
  var rgb = hsvToRgb(hue / 360, 0.3, 0.9);
  return '' + rgb.r.toString(16) + rgb.g.toString(16) + rgb.b.toString(16);
}

/***/ }),

/***/ "./src/common/utils/styleSelectedText.ts":
/*!***********************************************!*\
  !*** ./src/common/utils/styleSelectedText.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ styleSelectedText)
/* harmony export */ });
/* harmony import */ var _insertText__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./insertText */ "./src/common/utils/insertText.ts");
/*
 * Original Copyright GitHub, Inc. Licensed under the MIT License.
 * See license text at https://github.com/github/markdown-toolbar-element/blob/master/LICENSE.
 */


var defaults = {
  prefix: '',
  suffix: '',
  blockPrefix: '',
  blockSuffix: '',
  multiline: false,
  replaceNext: '',
  prefixSpace: false,
  scanFor: '',
  surroundWithNewlines: false,
  orderedList: false,
  unorderedList: false,
  trimFirst: false
};
function styleSelectedText(textarea, styleArgs) {
  // Next 2 lines are added
  textarea.focus();
  styleArgs = Object.assign({}, defaults, styleArgs);
  // Prev 2 lines are added
  var text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);
  var result;
  if (styleArgs.orderedList || styleArgs.unorderedList) {
    result = listStyle(textarea, styleArgs);
  } else if (styleArgs.multiline && isMultipleLines(text)) {
    result = multilineStyle(textarea, styleArgs);
  } else {
    result = blockStyle(textarea, styleArgs);
  }
  (0,_insertText__WEBPACK_IMPORTED_MODULE_0__["default"])(textarea, result);
}
function isMultipleLines(string) {
  return string.trim().split('\n').length > 1;
}
function repeat(string, n) {
  return Array(n + 1).join(string);
}
function wordSelectionStart(text, i) {
  var index = i;
  while (text[index] && text[index - 1] != null && !text[index - 1].match(/\s/)) {
    index--;
  }
  return index;
}
function wordSelectionEnd(text, i, multiline) {
  var index = i;
  var breakpoint = multiline ? /\n/ : /\s/;
  while (text[index] && !text[index].match(breakpoint)) {
    index++;
  }
  return index;
}
function expandSelectionToLine(textarea) {
  var lines = textarea.value.split('\n');
  var counter = 0;
  for (var index = 0; index < lines.length; index++) {
    var lineLength = lines[index].length + 1;
    if (textarea.selectionStart >= counter && textarea.selectionStart < counter + lineLength) {
      textarea.selectionStart = counter;
    }
    if (textarea.selectionEnd >= counter && textarea.selectionEnd < counter + lineLength) {
      textarea.selectionEnd = counter + lineLength - 1;
    }
    counter += lineLength;
  }
}
function expandSelectedText(textarea, prefixToUse, suffixToUse, multiline) {
  if (multiline === void 0) {
    multiline = false;
  }
  if (textarea.selectionStart === textarea.selectionEnd) {
    textarea.selectionStart = wordSelectionStart(textarea.value, textarea.selectionStart);
    textarea.selectionEnd = wordSelectionEnd(textarea.value, textarea.selectionEnd, multiline);
  } else {
    var expandedSelectionStart = textarea.selectionStart - prefixToUse.length;
    var expandedSelectionEnd = textarea.selectionEnd + suffixToUse.length;
    var beginsWithPrefix = textarea.value.slice(expandedSelectionStart, textarea.selectionStart) === prefixToUse;
    var endsWithSuffix = textarea.value.slice(textarea.selectionEnd, expandedSelectionEnd) === suffixToUse;
    if (beginsWithPrefix && endsWithSuffix) {
      textarea.selectionStart = expandedSelectionStart;
      textarea.selectionEnd = expandedSelectionEnd;
    }
  }
  return textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);
}
function newlinesToSurroundSelectedText(textarea) {
  var beforeSelection = textarea.value.slice(0, textarea.selectionStart);
  var afterSelection = textarea.value.slice(textarea.selectionEnd);
  var breaksBefore = beforeSelection.match(/\n*$/);
  var breaksAfter = afterSelection.match(/^\n*/);
  var newlinesBeforeSelection = breaksBefore ? breaksBefore[0].length : 0;
  var newlinesAfterSelection = breaksAfter ? breaksAfter[0].length : 0;
  var newlinesToAppend;
  var newlinesToPrepend;
  if (beforeSelection.match(/\S/) && newlinesBeforeSelection < 2) {
    newlinesToAppend = repeat('\n', 2 - newlinesBeforeSelection);
  }
  if (afterSelection.match(/\S/) && newlinesAfterSelection < 2) {
    newlinesToPrepend = repeat('\n', 2 - newlinesAfterSelection);
  }
  if (newlinesToAppend == null) {
    newlinesToAppend = '';
  }
  if (newlinesToPrepend == null) {
    newlinesToPrepend = '';
  }
  return {
    newlinesToAppend: newlinesToAppend,
    newlinesToPrepend: newlinesToPrepend
  };
}
function blockStyle(textarea, arg) {
  var newlinesToAppend;
  var newlinesToPrepend;
  var prefix = arg.prefix,
    suffix = arg.suffix,
    blockPrefix = arg.blockPrefix,
    blockSuffix = arg.blockSuffix,
    replaceNext = arg.replaceNext,
    prefixSpace = arg.prefixSpace,
    scanFor = arg.scanFor,
    surroundWithNewlines = arg.surroundWithNewlines;
  var originalSelectionStart = textarea.selectionStart;
  var originalSelectionEnd = textarea.selectionEnd;
  var selectedText = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);
  var prefixToUse = isMultipleLines(selectedText) && blockPrefix.length > 0 ? blockPrefix + "\n" : prefix;
  // CHANGED
  var suffixToUse = isMultipleLines(selectedText) && blockSuffix.length > 0 ? "\n" + blockSuffix : prefixToUse === prefix ? suffix : '';
  // END CHANGED

  if (prefixSpace) {
    var beforeSelection = textarea.value[textarea.selectionStart - 1];
    if (textarea.selectionStart !== 0 && beforeSelection != null && !beforeSelection.match(/\s/)) {
      prefixToUse = " " + prefixToUse;
    }
  }
  selectedText = expandSelectedText(textarea, prefixToUse, suffixToUse, arg.multiline);
  var selectionStart = textarea.selectionStart;
  var selectionEnd = textarea.selectionEnd;
  var hasReplaceNext = replaceNext.length > 0 && suffixToUse.indexOf(replaceNext) > -1 && selectedText.length > 0;
  if (surroundWithNewlines) {
    var ref = newlinesToSurroundSelectedText(textarea);
    newlinesToAppend = ref.newlinesToAppend;
    newlinesToPrepend = ref.newlinesToPrepend;
    prefixToUse = newlinesToAppend + prefix;
    suffixToUse += newlinesToPrepend;
  }
  if (selectedText.startsWith(prefixToUse) && selectedText.endsWith(suffixToUse)) {
    var replacementText = selectedText.slice(prefixToUse.length, selectedText.length - suffixToUse.length);
    if (originalSelectionStart === originalSelectionEnd) {
      var position = originalSelectionStart - prefixToUse.length;
      position = Math.max(position, selectionStart);
      position = Math.min(position, selectionStart + replacementText.length);
      selectionStart = selectionEnd = position;
    } else {
      selectionEnd = selectionStart + replacementText.length;
    }
    return {
      text: replacementText,
      selectionStart: selectionStart,
      selectionEnd: selectionEnd
    };
  } else if (!hasReplaceNext) {
    var _replacementText = prefixToUse + selectedText + suffixToUse;
    selectionStart = originalSelectionStart + prefixToUse.length;
    selectionEnd = originalSelectionEnd + prefixToUse.length;
    var whitespaceEdges = selectedText.match(/^\s*|\s*$/g);
    if (arg.trimFirst && whitespaceEdges) {
      var leadingWhitespace = whitespaceEdges[0] || '';
      var trailingWhitespace = whitespaceEdges[1] || '';
      _replacementText = leadingWhitespace + prefixToUse + selectedText.trim() + suffixToUse + trailingWhitespace;
      selectionStart += leadingWhitespace.length;
      selectionEnd -= trailingWhitespace.length;
    }
    return {
      text: _replacementText,
      selectionStart: selectionStart,
      selectionEnd: selectionEnd
    };
  } else if (scanFor.length > 0 && selectedText.match(scanFor)) {
    suffixToUse = suffixToUse.replace(replaceNext, selectedText);
    var _replacementText2 = prefixToUse + suffixToUse;
    selectionStart = selectionEnd = selectionStart + prefixToUse.length;
    return {
      text: _replacementText2,
      selectionStart: selectionStart,
      selectionEnd: selectionEnd
    };
  } else {
    var _replacementText3 = prefixToUse + selectedText + suffixToUse;
    selectionStart = selectionStart + prefixToUse.length + selectedText.length + suffixToUse.indexOf(replaceNext);
    selectionEnd = selectionStart + replaceNext.length;
    return {
      text: _replacementText3,
      selectionStart: selectionStart,
      selectionEnd: selectionEnd
    };
  }
}
function multilineStyle(textarea, arg) {
  var prefix = arg.prefix,
    suffix = arg.suffix,
    blockPrefix = arg.blockPrefix,
    blockSuffix = arg.blockSuffix,
    surroundWithNewlines = arg.surroundWithNewlines;
  var text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);
  var selectionStart = textarea.selectionStart;
  var selectionEnd = textarea.selectionEnd;
  var lines = text.split('\n');
  // CHANGED
  var prefixToUse = blockPrefix.length > 0 ? blockPrefix : prefix;
  var suffixToUse = blockSuffix.length > 0 ? blockSuffix : prefixToUse == prefix ? suffix : '';
  var undoStyle = lines.every(function (line) {
    return line.startsWith(prefixToUse) && line.endsWith(suffixToUse);
  });
  // END CHANGED

  if (undoStyle) {
    text = lines.map(function (line) {
      return line.slice(prefixToUse.length, line.length - suffixToUse.length);
    }).join('\n');
    selectionEnd = selectionStart + text.length;
  } else {
    // CHANGED
    text = lines.map(function (line) {
      return prefixToUse + line + suffixToUse;
    }).join('\n');
    if (surroundWithNewlines || suffixToUse === '') {
      // END CHANGED
      var _newlinesToSurroundSe = newlinesToSurroundSelectedText(textarea),
        newlinesToAppend = _newlinesToSurroundSe.newlinesToAppend,
        newlinesToPrepend = _newlinesToSurroundSe.newlinesToPrepend;
      selectionStart += newlinesToAppend.length;
      selectionEnd = selectionStart + text.length;
      text = newlinesToAppend + text + newlinesToPrepend;
    }
  }
  return {
    text: text,
    selectionStart: selectionStart,
    selectionEnd: selectionEnd
  };
}
function undoOrderedListStyle(text) {
  var lines = text.split('\n');
  var orderedListRegex = /^\d+\.\s+/;
  var shouldUndoOrderedList = lines.every(function (line) {
    return orderedListRegex.test(line);
  });
  var result = lines;
  if (shouldUndoOrderedList) {
    result = lines.map(function (line) {
      return line.replace(orderedListRegex, '');
    });
  }
  return {
    text: result.join('\n'),
    processed: shouldUndoOrderedList
  };
}
function undoUnorderedListStyle(text) {
  var lines = text.split('\n');
  var unorderedListPrefix = '- ';
  var shouldUndoUnorderedList = lines.every(function (line) {
    return line.startsWith(unorderedListPrefix);
  });
  var result = lines;
  if (shouldUndoUnorderedList) {
    result = lines.map(function (line) {
      return line.slice(unorderedListPrefix.length, line.length);
    });
  }
  return {
    text: result.join('\n'),
    processed: shouldUndoUnorderedList
  };
}
function makePrefix(index, unorderedList) {
  if (unorderedList) {
    return '- ';
  } else {
    return index + 1 + ". ";
  }
}
function clearExistingListStyle(style, selectedText) {
  var undoResultOpositeList;
  var undoResult;
  var pristineText;
  if (style.orderedList) {
    undoResult = undoOrderedListStyle(selectedText);
    undoResultOpositeList = undoUnorderedListStyle(undoResult.text);
    pristineText = undoResultOpositeList.text;
  } else {
    undoResult = undoUnorderedListStyle(selectedText);
    undoResultOpositeList = undoOrderedListStyle(undoResult.text);
    pristineText = undoResultOpositeList.text;
  }
  return [undoResult, undoResultOpositeList, pristineText];
}
function listStyle(textarea, style) {
  var noInitialSelection = textarea.selectionStart === textarea.selectionEnd;
  var selectionStart = textarea.selectionStart;
  var selectionEnd = textarea.selectionEnd;

  // Select whole line
  expandSelectionToLine(textarea);
  var selectedText = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);

  // If the user intent was to do an undo, we will stop after this.
  // Otherwise, we will still undo to other list type to prevent list stacking
  var _clearExistingListSty = clearExistingListStyle(style, selectedText),
    undoResult = _clearExistingListSty[0],
    undoResultOpositeList = _clearExistingListSty[1],
    pristineText = _clearExistingListSty[2];
  var prefixedLines = pristineText.split('\n').map(function (value, index) {
    return "" + makePrefix(index, style.unorderedList) + value;
  });
  var totalPrefixLength = prefixedLines.reduce(function (previousValue, _currentValue, currentIndex) {
    return previousValue + makePrefix(currentIndex, style.unorderedList).length;
  }, 0);
  var totalPrefixLengthOpositeList = prefixedLines.reduce(function (previousValue, _currentValue, currentIndex) {
    return previousValue + makePrefix(currentIndex, !style.unorderedList).length;
  }, 0);
  if (undoResult.processed) {
    if (noInitialSelection) {
      selectionStart = Math.max(selectionStart - makePrefix(0, style.unorderedList).length, 0);
      selectionEnd = selectionStart;
    } else {
      selectionStart = textarea.selectionStart;
      selectionEnd = textarea.selectionEnd - totalPrefixLength;
    }
    return {
      text: pristineText,
      selectionStart: selectionStart,
      selectionEnd: selectionEnd
    };
  }
  var _newlinesToSurroundSe2 = newlinesToSurroundSelectedText(textarea),
    newlinesToAppend = _newlinesToSurroundSe2.newlinesToAppend,
    newlinesToPrepend = _newlinesToSurroundSe2.newlinesToPrepend;
  var text = newlinesToAppend + prefixedLines.join('\n') + newlinesToPrepend;
  if (noInitialSelection) {
    selectionStart = Math.max(selectionStart + makePrefix(0, style.unorderedList).length + newlinesToAppend.length, 0);
    selectionEnd = selectionStart;
  } else {
    if (undoResultOpositeList.processed) {
      selectionStart = Math.max(textarea.selectionStart + newlinesToAppend.length, 0);
      selectionEnd = textarea.selectionEnd + newlinesToAppend.length + totalPrefixLength - totalPrefixLengthOpositeList;
    } else {
      selectionStart = Math.max(textarea.selectionStart + newlinesToAppend.length, 0);
      selectionEnd = textarea.selectionEnd + newlinesToAppend.length + totalPrefixLength;
    }
  }
  return {
    text: text,
    selectionStart: selectionStart,
    selectionEnd: selectionEnd
  };
}

/***/ }),

/***/ "./src/common/utils/throttleDebounce.ts":
/*!**********************************************!*\
  !*** ./src/common/utils/throttleDebounce.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "debounce": () => (/* reexport safe */ throttle_debounce__WEBPACK_IMPORTED_MODULE_0__.debounce),
/* harmony export */   "throttle": () => (/* reexport safe */ throttle_debounce__WEBPACK_IMPORTED_MODULE_0__.throttle)
/* harmony export */ });
/* harmony import */ var throttle_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! throttle-debounce */ "../../../node_modules/throttle-debounce/esm/index.js");
// Re-exports `throttle-debounce` to be used in `compat.js`.



/***/ }),

/***/ "./src/common/utils/withAttr.ts":
/*!**************************************!*\
  !*** ./src/common/utils/withAttr.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/**
 * An event handler factory that makes it simpler to implement data binding
 * for component event listeners.
 *
 * The handler created by this factory passes the DOM element's attribute
 * identified by the first argument to the callback (usually a bidirectional
 * Mithril stream: https://mithril.js.org/stream.html#bidirectional-bindings).
 *
 * Replaces m.withAttr for Mithril 2.0.
 * @see https://mithril.js.org/archive/v0.2.5/mithril.withAttr.html
 */
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (function (key, cb) {
  return function () {
    cb(this.getAttribute(key) || this[key]);
  };
});

/***/ }),

/***/ "../../../node_modules/@askvortsov/rich-icu-message-formatter/lib/rich-icu-message-formatter.es.js":
/*!*********************************************************************************************************!*\
  !*** ../../../node_modules/@askvortsov/rich-icu-message-formatter/lib/rich-icu-message-formatter.es.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RichMessageFormatter": () => (/* binding */ RichMessageFormatter),
/* harmony export */   "defaultRichHandler": () => (/* binding */ defaultRichHandler),
/* harmony export */   "mithrilRichHandler": () => (/* binding */ mithrilRichHandler),
/* harmony export */   "unEscapeHtml": () => (/* binding */ unEscapeHtml)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "../../../node_modules/@babel/runtime/helpers/slicedToArray.js");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "../../../node_modules/@babel/runtime/helpers/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "../../../node_modules/@babel/runtime/helpers/createClass.js");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ "../../../node_modules/@babel/runtime/helpers/inherits.js");
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ "../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ "../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _ultraq_icu_message_formatter__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ultraq/icu-message-formatter */ "../../../node_modules/@ultraq/icu-message-formatter/lib/icu-message-formatter.es.js");
/* harmony import */ var _ultraq_array_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ultraq/array-utils */ "../../../node_modules/@ultraq/array-utils/array-utils.es.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../../../node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);










/**
 * Replaces rich tags with elements, as per a provided handler.
 * No spaces allowed in tag name, syntax MUST be <TAG_NAME>SOME_CONTENTS</TAG_NAME>.
 * Currently does not support tags with attributes.
 * Currently does not support self closing tags.
 *
 * @param {String[]|any[]} message
 * @param {Object} values
 * @param {Function} handler
 * @param {Number[]} [dontUnescapeIndices]
 * @return {String[]|any[]}
 */
function replaceRichTags(message, values, handler) {
  var dontUnescapeIndices = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];
  var result = [];
  var onTagClose = function onTagClose(segment, currTagIsClosing, currTag, i, j, currTagStart) {
    if (currTagIsClosing) {
      return {
        "break": true
      };
    }
    var endingLocation = findClosingTag(message, currTag, i, j);
    if (!endingLocation) {
      return result;
    }
    var entireTagInSegment = endingLocation.segmentIndex === i;
    var segmentContainingClosingTag = message[endingLocation.segmentIndex];
    var tagContents = [];
    if (entireTagInSegment) {
      tagContents.push(segment.slice(j + 1, endingLocation.segmentStart));
    } else {
      tagContents.push(segment.slice(j + 1));
      for (var k = i + 1; k < endingLocation.segmentIndex; k++) {
        tagContents.push(message[k]);
      }
      tagContents.push(segmentContainingClosingTag.slice(0, endingLocation.segmentStart));
    }
    result.push(segment.slice(0, currTagStart));
    result.push(handler(currTag, values, replaceRichTags(tagContents.filter(function (s) {
      return s !== '';
    }), values, handler)));
    message.splice(endingLocation.segmentIndex + 1, 0, segmentContainingClosingTag.slice(endingLocation.segmentEnd + 1));
    return {
      processedSegment: true,
      newSegmentIndex: endingLocation.segmentIndex,
      "break": true
    };
  };
  traverseMessageTags(message, 0, 0, result, onTagClose);
  return result.filter(function (s) {
    return s !== '';
  }).map(function (s, i) {
    return dontUnescapeIndices.includes(i) ? s : unEscapeHtml(s);
  });
}
/**
 * Finds the index of the matching closing tag, including through strings that
 * could have nested tags.
 *
 * @param {String[]|any[]} message
 * @param {String} tag
 * @param {Number} startIndex
 * @param {Number} startSegmentIndex
 * @return {Boolean}
 */

function findClosingTag(message, tag, startIndex, startSegmentIndex) {
  var position; // set in callback

  var depth = 1;
  var onTagClose = function onTagClose(segment, currTagIsClosing, currTag, i, j, currTagStart) {
    if (currTag === tag) {
      if (currTagIsClosing) {
        depth--;
      } else {
        depth++;
      }
      if (depth === 0) {
        position = {
          segmentIndex: i,
          segmentStart: currTagStart,
          segmentEnd: j
        };
        return {
          exit: true
        };
      }
    }
    return {
      exit: false
    };
  };
  traverseMessageTags(message, startIndex, startSegmentIndex, [], onTagClose);
  return position;
}
function traverseMessageTags(message, startI, startJ, result, onTagClose) {
  var isHtmlTagChar = function isHtmlTagChar(ch) {
    return /[a-zA-Z-_]/.test(ch);
  };
  for (var i = startI; i < message.length; i++) {
    var segment = message[i];
    if (typeof segment !== 'string') {
      result.push(segment);
      continue;
    }
    var currTagIsClosing = false;
    var currTagStart = null;
    var inTag = false;
    var processedSegment = false;
    for (var j = i === startI ? startJ : 0; j < segment.length; j++) {
      // Start of tag
      if (!inTag && segment[j] === '<') {
        currTagStart = j;
        inTag = true;
        if (segment[j + 1] === '/') {
          currTagIsClosing = true;
          j++;
        }
      } // Tag ended
      else if (inTag && segment[j] === '>') {
        var currTag = segment.slice(currTagStart + 1 + currTagIsClosing, j);
        var instructions = onTagClose(segment, currTagIsClosing, currTag, i, j, currTagStart);
        if (instructions.exit) {
          return;
        }
        if (instructions.newSegmentIndex) {
          i = instructions.newSegmentIndex;
        }
        if (instructions.processedSegment) {
          processedSegment = true;
        }
        if (instructions["break"]) {
          break;
        }
        currTagIsClosing = false;
        currTagStart = null;
        inTag = false;
      } // Not a valid tag, reset state.
      else if (inTag && !isHtmlTagChar(segment[j])) {
        currTagIsClosing = false;
        currTagStart = null;
        inTag = false;
      }
    }
    if (!processedSegment) {
      result.push(segment);
    }
  }
}
/**
 * Escapes HTML markup in string and nested array arguments.
 *
 * @param {Object} values
 * @return {Object}
 */

function sanitizeValues(values) {
  return Object.keys(values).reduce(function (acc, key) {
    acc[key] = recSanitizeArr(values[key]);
    return acc;
  }, {});
}
/**
 * De-sanitizes HTML markup.
 *
 * @param {any} str
 * @return {string}
 */

function unEscapeHtml(str) {
  if (typeof str !== 'string') {
    return str;
  }
  return str.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '"').replace(/&#039;/g, "'").replace(/&amp;/g, '&');
}
/**
 * Recursively escape HTML in string or string array.
 *
 * @param {string[]|string} input
 * @return {string[]|string}
 */

function recSanitizeArr(input) {
  if (typeof input === 'string' || input instanceof String) {
    return input.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#039;');
  } else if (Array.isArray(input)) {
    return input.map(recSanitizeArr);
  }
  return input;
}
function defaultRichHandler(tag, values, contents) {
  return "<".concat(tag, ">").concat(unEscapeHtml(contents), "</").concat(tag, ">");
}
function _createSuper(Derived) {
  var hasNativeReflectConstruct = _isNativeReflectConstruct();
  return function _createSuperInternal() {
    var Super = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Derived),
      result;
    if (hasNativeReflectConstruct) {
      var NewTarget = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }
    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result);
  };
}
function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;
  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}
var RichMessageFormatter = /*#__PURE__*/function (_MessageFormatter) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(RichMessageFormatter, _MessageFormatter);
  var _super = _createSuper(RichMessageFormatter);
  function RichMessageFormatter(locale) {
    var _this;
    var typeHandlers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var richHandler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, RichMessageFormatter);
    _this = _super.call(this, locale, typeHandlers);
    _this.richHandler = richHandler ? richHandler : defaultRichHandler;
    return _this;
  }
  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(RichMessageFormatter, [{
    key: "rich",
    value: function rich(message) {
      var values = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var cleanedValues = sanitizeValues(values);
      var formatted = (0,_ultraq_array_utils__WEBPACK_IMPORTED_MODULE_7__.flatten)(this.process(message, cleanedValues)); // TODO
      // Should be a symbol but isn't because of conversion issues.
      // We use a random string instead. 

      var sym = Math.random().toString(36) + Math.random().toString(36) + Math.random().toString(36);
      var fakeValues = Object.fromEntries(Object.entries(values).map(function (_ref) {
        var _ref2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_ref, 2),
          key = _ref2[0];
        _ref2[1];
        return [key, sym];
      }));
      var formattedFake = (0,_ultraq_array_utils__WEBPACK_IMPORTED_MODULE_7__.flatten)(this.process(message, fakeValues));
      var replaceFake = replaceRichTags(formattedFake, fakeValues, function () {
        return sym;
      });
      var originalTemplateSegmentIndices = replaceFake.map(function (v, i) {
        return v === sym ? null : i;
      }).filter(function (i) {
        return i !== null;
      });
      return replaceRichTags(formatted, cleanedValues, this.richHandler, originalTemplateSegmentIndices);
    }
  }]);
  return RichMessageFormatter;
}(_ultraq_icu_message_formatter__WEBPACK_IMPORTED_MODULE_8__.MessageFormatter);
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {
      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function mithrilRichHandler(tag, values, contents) {
  var vnode = values[tag] || m(tag);
  var children = unEscapeHtml(m.fragment(contents).children);
  return _objectSpread(_objectSpread({}, vnode), {}, {
    children: children
  });
}


/***/ }),

/***/ "../../../node_modules/@ultraq/array-utils/array-utils.es.js":
/*!*******************************************************************!*\
  !*** ../../../node_modules/@ultraq/array-utils/array-utils.es.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "flatten": () => (/* binding */ flatten),
/* harmony export */   "range": () => (/* binding */ range),
/* harmony export */   "remove": () => (/* binding */ remove)
/* harmony export */ });
/* 
 * Copyright 2017, Emanuel Rabina (http://www.ultraq.net.nz/)
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Flattens an array of arrays of infinite depth into a single-dimension array.
 * 
 * > This is now natively in JavaScript as the `flat` method on an Array
 * > instance.  [Check MDN for which browsers have access to this feature](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat).
 * > If you can't use `flat`, then this method will do the job 
 * 
 * @param {Array} array
 * @return {Array} Flattened array.
 */
function flatten(array) {
  return array.reduce(function (accumulator, value) {
    return accumulator.concat(Array.isArray(value) ? flatten(value) : value);
  }, []);
}
/**
 * Creates an array of numbers from the starting value (inclusive) to the end
 * (exclusive), with an optional step (the gap between values).
 * 
 * @param {Number} start
 *   The value to start at, the first item in the returned array.
 * @param {Number} end
 *   The value to end with, the last item in the returned array.
 * @param {Number} [step=1]
 *   The increment/gap between values, defaults to 1.
 * @return {Array} An array encompassing the given range.
 */

function range(start, end) {
  var step = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;
  return Array.apply(0, Array(Math.ceil((end - start) / step))).map(function (empty, index) {
    return index * step + start;
  });
}
/**
 * Remove and return the first item from `array` that matches the predicate
 * function.
 * 
 * @param {Array} array
 * @param {Function} predicate
 *   Invoked with the array item.
 * @return {Object} The matching item, or `null` if no match was found.
 */

function remove(array, predicate) {
  return array.find(function (item, index) {
    if (predicate(item)) {
      array.splice(index, 1);
      return item;
    }
  });
}

/***/ }),

/***/ "../../../node_modules/@ultraq/function-utils/function-utils.es.js":
/*!*************************************************************************!*\
  !*** ../../../node_modules/@ultraq/function-utils/function-utils.es.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "memoize": () => (/* binding */ memoize)
/* harmony export */ });
/**
 * A higher-order function to apply [memoization](https://en.wikipedia.org/wiki/Memoization).
 * 
 * If memoizing a recursive function, then memoize and define the function at
 * the same time so you can make a call to the memoized function, eg:
 * 
 * ```javascript
 * const myFunction = memoize(() => myFunction());
 * ```
 * 
 * @param {Function} func
 * @return {Function} 
 */
function memoize(func) {
  var cache = {};
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    var key = args.length ? args.map(function (arg) {
      return arg === null ? 'null' : arg === undefined ? 'undefined' : typeof arg === 'function' ? arg.toString() : arg instanceof Date ? arg.toISOString() : JSON.stringify(arg);
    }).join('|') : '_(no-args)_';
    if (Object.prototype.hasOwnProperty.call(cache, key)) {
      return cache[key];
    }
    var result = func.apply(void 0, args);
    cache[key] = result;
    return result;
  };
}

/***/ }),

/***/ "../../../node_modules/@ultraq/icu-message-formatter/lib/icu-message-formatter.es.js":
/*!*******************************************************************************************!*\
  !*** ../../../node_modules/@ultraq/icu-message-formatter/lib/icu-message-formatter.es.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MessageFormatter": () => (/* binding */ MessageFormatter),
/* harmony export */   "findClosingBracket": () => (/* binding */ findClosingBracket),
/* harmony export */   "parseCases": () => (/* binding */ parseCases),
/* harmony export */   "pluralTypeHandler": () => (/* binding */ pluralTypeHandler),
/* harmony export */   "selectTypeHandler": () => (/* binding */ selectTypeHandler),
/* harmony export */   "splitFormattedArgument": () => (/* binding */ splitFormattedArgument)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ "../../../node_modules/@babel/runtime/helpers/slicedToArray.js");
/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ "../../../node_modules/@babel/runtime/helpers/classCallCheck.js");
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ "../../../node_modules/@babel/runtime/helpers/createClass.js");
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ "../../../node_modules/@babel/runtime/helpers/defineProperty.js");
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _ultraq_array_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ultraq/array-utils */ "../../../node_modules/@ultraq/array-utils/array-utils.es.js");
/* harmony import */ var _ultraq_function_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ultraq/function-utils */ "../../../node_modules/@ultraq/function-utils/function-utils.es.js");







/* 
 * Copyright 2019, Emanuel Rabina (http://www.ultraq.net.nz/)
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * Most branch-based type handlers are based around "cases".
 * For example, `select` and `plural` compare compare a value
 * to "case keys" to choose a subtranslation.
 * 
 * This util splits "matches" portions provided to the aforementioned
 * handlers into case strings, and extracts any prepended arguments
 * (for example, `plural` supports an `offset:n` argument used for
 * populating the magic `#` variable).
 * 
 * @param {String} string
 * @return {Object} The `cases` key points to a map of all cases.
 *                  The `arguments` key points to a list of prepended arguments.
 */
function parseCases(string) {
  var isWhitespace = function isWhitespace(ch) {
    return /\s/.test(ch);
  };
  var args = [];
  var cases = {};
  var currTermStart = 0;
  var latestTerm = null;
  var inTerm = false;
  var i = 0;
  while (i < string.length) {
    // Term ended
    if (inTerm && (isWhitespace(string[i]) || string[i] === '{')) {
      inTerm = false;
      latestTerm = string.slice(currTermStart, i); // We want to process the opening char again so the case will be properly registered.

      if (string[i] === '{') {
        i--;
      }
    } // New term
    else if (!inTerm && !isWhitespace(string[i])) {
      var caseBody = string[i] === '{'; // If there's a previous term, we can either handle a whole
      // case, or add that as an argument.

      if (latestTerm && caseBody) {
        var branchEndIndex = findClosingBracket(string, i);
        if (branchEndIndex === -1) {
          throw new Error("Unbalanced curly braces in string: \"".concat(string, "\""));
        }
        cases[latestTerm] = string.slice(i + 1, branchEndIndex); // Don't include the braces

        i = branchEndIndex; // Will be moved up where needed at end of loop.

        latestTerm = null;
      } else {
        if (latestTerm) {
          args.push(latestTerm);
          latestTerm = null;
        }
        inTerm = true;
        currTermStart = i;
      }
    }
    i++;
  }
  if (inTerm) {
    latestTerm = string.slice(currTermStart);
  }
  if (latestTerm) {
    args.push(latestTerm);
  }
  return {
    args: args,
    cases: cases
  };
}
/**
 * Finds the index of the matching closing curly bracket, including through
 * strings that could have nested brackets.
 * 
 * @param {String} string
 * @param {Number} fromIndex
 * @return {Number} The index of the matching closing bracket, or -1 if no
 *   closing bracket could be found.
 */

function findClosingBracket(string, fromIndex) {
  var depth = 0;
  for (var i = fromIndex + 1; i < string.length; i++) {
    var _char = string.charAt(i);
    if (_char === '}') {
      if (depth === 0) {
        return i;
      }
      depth--;
    } else if (_char === '{') {
      depth++;
    }
  }
  return -1;
}
/**
 * Split a `{key, type, format}` block into those 3 parts, taking into account
 * nested message syntax that can exist in the `format` part.
 * 
 * @param {String} block
 * @return {Array}
 *   An array with `key`, `type`, and `format` items in that order, if present
 *   in the formatted argument block.
 */

function splitFormattedArgument(block) {
  return split(block.slice(1, -1), ',', 3);
}
/**
 * Like `String.prototype.split()` but where the limit parameter causes the
 * remainder of the string to be grouped together in a final entry.
 * 
 * @private
 * @param {String} string
 * @param {String} separator
 * @param {Number} limit
 * @param {Array} [accumulator=[]]
 * @return {Array}
 */

function split(string, separator, limit) {
  var accumulator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];
  if (!string) {
    return accumulator;
  }
  if (limit === 1) {
    accumulator.push(string);
    return accumulator;
  }
  var indexOfDelimiter = string.indexOf(separator);
  if (indexOfDelimiter === -1) {
    accumulator.push(string);
    return accumulator;
  }
  var head = string.substring(0, indexOfDelimiter).trim();
  var tail = string.substring(indexOfDelimiter + separator.length + 1).trim();
  accumulator.push(head);
  return split(tail, separator, limit - 1, accumulator);
}

/**
 * The main class for formatting messages.
 * 
 * @author Emanuel Rabina
 */

var MessageFormatter = /*#__PURE__*/function () {
  /**
   * Creates a new formatter that can work using any of the custom type handlers
   * you register.
   * 
   * @param {String} locale
   * @param {Object} [typeHandlers={}]
   *   Optional object where the keys are the names of the types to register,
   *   their values being the functions that will return a nicely formatted
   *   string for the data and locale they are given.
   */
  function MessageFormatter(locale) {
    var _this = this;
    var typeHandlers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, MessageFormatter);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(this, "format", (0,_ultraq_function_utils__WEBPACK_IMPORTED_MODULE_4__.memoize)(function (message) {
      var values = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      return (0,_ultraq_array_utils__WEBPACK_IMPORTED_MODULE_5__.flatten)(_this.process(message, values)).join('');
    }));
    this.locale = locale;
    this.typeHandlers = typeHandlers;
  }
  /**
   * Formats an ICU message syntax string using `values` for placeholder data
   * and any currently-registered type handlers.
   * 
   * @param {String} message
   * @param {Object} [values={}]
   * @return {String}
   */

  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(MessageFormatter, [{
    key: "process",
    value:
    /**
     * Process an ICU message syntax string using `values` for placeholder data
     * and any currently-registered type handlers.  The result of this method is
     * an array of the component parts after they have been processed in turn by
     * their own type handlers.  This raw output is useful for other renderers,
     * eg: React where components can be used instead of being forced to return
     * raw strings.
     * 
     * This method is used by {@link MessageFormatter#format} where it acts as a
     * string renderer.
     * 
     * @param {String} message
     * @param {Object} [values={}]
     * @return {Array}
     */
    function process(message) {
      var values = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      if (!message) {
        return [];
      }
      var blockStartIndex = message.indexOf('{');
      if (blockStartIndex !== -1) {
        var blockEndIndex = findClosingBracket(message, blockStartIndex);
        if (blockEndIndex !== -1) {
          var block = message.substring(blockStartIndex, blockEndIndex + 1);
          if (block) {
            var result = [];
            var head = message.substring(0, blockStartIndex);
            if (head) {
              result.push(head);
            }
            var _splitFormattedArgume = splitFormattedArgument(block),
              _splitFormattedArgume2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_splitFormattedArgume, 3),
              key = _splitFormattedArgume2[0],
              type = _splitFormattedArgume2[1],
              format = _splitFormattedArgume2[2];
            var body = values[key];
            if (body === null || body === undefined) {
              body = '';
            }
            var typeHandler = type && this.typeHandlers[type];
            result.push(typeHandler ? typeHandler(body, format, this.locale, values, this.process.bind(this)) : body);
            var tail = message.substring(blockEndIndex + 1);
            if (tail) {
              result.push(this.process(tail, values));
            }
            return result;
          }
        } else {
          throw new Error("Unbalanced curly braces in string: \"".concat(message, "\""));
        }
      }
      return [message];
    }
  }]);
  return MessageFormatter;
}();
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) {
      symbols = symbols.filter(function (sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    }
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};
    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3___default()(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
var pluralFormatter;
var keyCounter = 0; // All the special keywords that can be used in `plural` blocks for the various branches

var ONE = 'one';
var OTHER$1 = 'other';
/**
 * @private
 * @param {String} caseBody
 * @param {Number} value
 * @return {Object} {caseBody: string, numberValues: object}
 */

function replaceNumberSign(caseBody, value) {
  var i = 0;
  var output = '';
  var numBraces = 0;
  var numberValues = {};
  while (i < caseBody.length) {
    if (caseBody[i] === '#' && !numBraces) {
      var keyParam = "__hashToken".concat(keyCounter++);
      output += "{".concat(keyParam, ", number}");
      numberValues[keyParam] = value;
    } else {
      output += caseBody[i];
    }
    if (caseBody[i] === '{') {
      numBraces++;
    } else if (caseBody[i] === '}') {
      numBraces--;
    }
    i++;
  }
  return {
    caseBody: output,
    numberValues: numberValues
  };
}
/**
 * Handler for `plural` statements within ICU message syntax strings.  Returns
 * a formatted string for the branch that closely matches the current value.
 * 
 * See https://formatjs.io/docs/core-concepts/icu-syntax#plural-format for more
 * details on how the `plural` statement works.
 * 
 * @param {String} value
 * @param {String} matches
 * @param {String} locale
 * @param {String} values
 * @param {Function} format
 * @return {String}
 */

function pluralTypeHandler(value) {
  var matches = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  var locale = arguments.length > 2 ? arguments[2] : undefined;
  var values = arguments.length > 3 ? arguments[3] : undefined;
  var format = arguments.length > 4 ? arguments[4] : undefined;
  var _parseCases = parseCases(matches),
    args = _parseCases.args,
    cases = _parseCases.cases;
  var intValue = parseInt(value);
  args.forEach(function (arg) {
    if (arg.startsWith('offset:')) {
      intValue -= parseInt(arg.slice('offset:'.length));
    }
  });
  var keywordPossibilities = [];
  if ('PluralRules' in Intl) {
    // Effectively memoize because instantiation of `Int.*` objects is expensive.
    if (pluralFormatter === undefined || pluralFormatter.resolvedOptions().locale !== locale) {
      pluralFormatter = new Intl.PluralRules(locale);
    }
    var pluralKeyword = pluralFormatter.select(intValue); // Other is always added last with least priority, so we don't want to add it here.

    if (pluralKeyword !== OTHER$1) {
      keywordPossibilities.push(pluralKeyword);
    }
  }
  if (intValue === 1) {
    keywordPossibilities.push(ONE);
  }
  keywordPossibilities.push("=".concat(intValue), OTHER$1);
  for (var i = 0; i < keywordPossibilities.length; i++) {
    var keyword = keywordPossibilities[i];
    if (keyword in cases) {
      var _replaceNumberSign = replaceNumberSign(cases[keyword], intValue),
        caseBody = _replaceNumberSign.caseBody,
        numberValues = _replaceNumberSign.numberValues;
      return format(caseBody, _objectSpread(_objectSpread({}, values), numberValues));
    }
  }
  return value;
}

/* 
 * Copyright 2019, Emanuel Rabina (http://www.ultraq.net.nz/)
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var OTHER = 'other';
/**
 * Handler for `select` statements within ICU message syntax strings.  Returns
 * a formatted string for the branch that closely matches the current value.
 * 
 * See https://formatjs.io/docs/core-concepts/icu-syntax#select-format for more
 * details on how the `select` statement works.
 * 
 * @param {String} value
 * @param {String} matches
 * @param {String} locale
 * @param {String} values
 * @param {Function} format
 * @return {String}
 */

function selectTypeHandler(value) {
  var matches = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  var values = arguments.length > 3 ? arguments[3] : undefined;
  var format = arguments.length > 4 ? arguments[4] : undefined;
  var _parseCases = parseCases(matches),
    cases = _parseCases.cases;
  if (value in cases) {
    return format(cases[value], values);
  } else if (OTHER in cases) {
    return format(cases[OTHER], values);
  }
  return value;
}


/***/ }),

/***/ "../../../node_modules/body-scroll-lock/lib/bodyScrollLock.esm.js":
/*!************************************************************************!*\
  !*** ../../../node_modules/body-scroll-lock/lib/bodyScrollLock.esm.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "clearAllBodyScrollLocks": () => (/* binding */ clearAllBodyScrollLocks),
/* harmony export */   "disableBodyScroll": () => (/* binding */ disableBodyScroll),
/* harmony export */   "enableBodyScroll": () => (/* binding */ enableBodyScroll)
/* harmony export */ });
function _toConsumableArray(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }
    return arr2;
  } else {
    return Array.from(arr);
  }
}

// Older browsers don't support event options, feature detect it.

// Adopted and modified solution from Bohdan Didukh (2017)
// https://stackoverflow.com/questions/41594997/ios-10-safari-prevent-scrolling-behind-a-fixed-overlay-and-maintain-scroll-posi

var hasPassiveEvents = false;
if (typeof window !== 'undefined') {
  var passiveTestOptions = {
    get passive() {
      hasPassiveEvents = true;
      return undefined;
    }
  };
  window.addEventListener('testPassive', null, passiveTestOptions);
  window.removeEventListener('testPassive', null, passiveTestOptions);
}
var isIosDevice = typeof window !== 'undefined' && window.navigator && window.navigator.platform && (/iP(ad|hone|od)/.test(window.navigator.platform) || window.navigator.platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);
var locks = [];
var documentListenerAdded = false;
var initialClientY = -1;
var previousBodyOverflowSetting = void 0;
var previousBodyPosition = void 0;
var previousBodyPaddingRight = void 0;

// returns true if `el` should be allowed to receive touchmove events.
var allowTouchMove = function allowTouchMove(el) {
  return locks.some(function (lock) {
    if (lock.options.allowTouchMove && lock.options.allowTouchMove(el)) {
      return true;
    }
    return false;
  });
};
var preventDefault = function preventDefault(rawEvent) {
  var e = rawEvent || window.event;

  // For the case whereby consumers adds a touchmove event listener to document.
  // Recall that we do document.addEventListener('touchmove', preventDefault, { passive: false })
  // in disableBodyScroll - so if we provide this opportunity to allowTouchMove, then
  // the touchmove event on document will break.
  if (allowTouchMove(e.target)) {
    return true;
  }

  // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).
  if (e.touches.length > 1) return true;
  if (e.preventDefault) e.preventDefault();
  return false;
};
var setOverflowHidden = function setOverflowHidden(options) {
  // If previousBodyPaddingRight is already set, don't set it again.
  if (previousBodyPaddingRight === undefined) {
    var _reserveScrollBarGap = !!options && options.reserveScrollBarGap === true;
    var scrollBarGap = window.innerWidth - document.documentElement.clientWidth;
    if (_reserveScrollBarGap && scrollBarGap > 0) {
      var computedBodyPaddingRight = parseInt(window.getComputedStyle(document.body).getPropertyValue('padding-right'), 10);
      previousBodyPaddingRight = document.body.style.paddingRight;
      document.body.style.paddingRight = computedBodyPaddingRight + scrollBarGap + 'px';
    }
  }

  // If previousBodyOverflowSetting is already set, don't set it again.
  if (previousBodyOverflowSetting === undefined) {
    previousBodyOverflowSetting = document.body.style.overflow;
    document.body.style.overflow = 'hidden';
  }
};
var restoreOverflowSetting = function restoreOverflowSetting() {
  if (previousBodyPaddingRight !== undefined) {
    document.body.style.paddingRight = previousBodyPaddingRight;

    // Restore previousBodyPaddingRight to undefined so setOverflowHidden knows it
    // can be set again.
    previousBodyPaddingRight = undefined;
  }
  if (previousBodyOverflowSetting !== undefined) {
    document.body.style.overflow = previousBodyOverflowSetting;

    // Restore previousBodyOverflowSetting to undefined
    // so setOverflowHidden knows it can be set again.
    previousBodyOverflowSetting = undefined;
  }
};
var setPositionFixed = function setPositionFixed() {
  return window.requestAnimationFrame(function () {
    // If previousBodyPosition is already set, don't set it again.
    if (previousBodyPosition === undefined) {
      previousBodyPosition = {
        position: document.body.style.position,
        top: document.body.style.top,
        left: document.body.style.left
      };

      // Update the dom inside an animation frame 
      var _window = window,
        scrollY = _window.scrollY,
        scrollX = _window.scrollX,
        innerHeight = _window.innerHeight;
      document.body.style.position = 'fixed';
      document.body.style.top = -scrollY;
      document.body.style.left = -scrollX;
      setTimeout(function () {
        return window.requestAnimationFrame(function () {
          // Attempt to check if the bottom bar appeared due to the position change
          var bottomBarHeight = innerHeight - window.innerHeight;
          if (bottomBarHeight && scrollY >= innerHeight) {
            // Move the content further up so that the bottom bar doesn't hide it
            document.body.style.top = -(scrollY + bottomBarHeight);
          }
        });
      }, 300);
    }
  });
};
var restorePositionSetting = function restorePositionSetting() {
  if (previousBodyPosition !== undefined) {
    // Convert the position from "px" to Int
    var y = -parseInt(document.body.style.top, 10);
    var x = -parseInt(document.body.style.left, 10);

    // Restore styles
    document.body.style.position = previousBodyPosition.position;
    document.body.style.top = previousBodyPosition.top;
    document.body.style.left = previousBodyPosition.left;

    // Restore scroll
    window.scrollTo(x, y);
    previousBodyPosition = undefined;
  }
};

// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions
var isTargetElementTotallyScrolled = function isTargetElementTotallyScrolled(targetElement) {
  return targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false;
};
var handleScroll = function handleScroll(event, targetElement) {
  var clientY = event.targetTouches[0].clientY - initialClientY;
  if (allowTouchMove(event.target)) {
    return false;
  }
  if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {
    // element is at the top of its scroll.
    return preventDefault(event);
  }
  if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {
    // element is at the bottom of its scroll.
    return preventDefault(event);
  }
  event.stopPropagation();
  return true;
};
var disableBodyScroll = function disableBodyScroll(targetElement, options) {
  // targetElement must be provided
  if (!targetElement) {
    // eslint-disable-next-line no-console
    console.error('disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.');
    return;
  }

  // disableBodyScroll must not have been called on this targetElement before
  if (locks.some(function (lock) {
    return lock.targetElement === targetElement;
  })) {
    return;
  }
  var lock = {
    targetElement: targetElement,
    options: options || {}
  };
  locks = [].concat(_toConsumableArray(locks), [lock]);
  if (isIosDevice) {
    setPositionFixed();
  } else {
    setOverflowHidden(options);
  }
  if (isIosDevice) {
    targetElement.ontouchstart = function (event) {
      if (event.targetTouches.length === 1) {
        // detect single touch.
        initialClientY = event.targetTouches[0].clientY;
      }
    };
    targetElement.ontouchmove = function (event) {
      if (event.targetTouches.length === 1) {
        // detect single touch.
        handleScroll(event, targetElement);
      }
    };
    if (!documentListenerAdded) {
      document.addEventListener('touchmove', preventDefault, hasPassiveEvents ? {
        passive: false
      } : undefined);
      documentListenerAdded = true;
    }
  }
};
var clearAllBodyScrollLocks = function clearAllBodyScrollLocks() {
  if (isIosDevice) {
    // Clear all locks ontouchstart/ontouchmove handlers, and the references.
    locks.forEach(function (lock) {
      lock.targetElement.ontouchstart = null;
      lock.targetElement.ontouchmove = null;
    });
    if (documentListenerAdded) {
      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? {
        passive: false
      } : undefined);
      documentListenerAdded = false;
    }

    // Reset initial clientY.
    initialClientY = -1;
  }
  if (isIosDevice) {
    restorePositionSetting();
  } else {
    restoreOverflowSetting();
  }
  locks = [];
};
var enableBodyScroll = function enableBodyScroll(targetElement) {
  if (!targetElement) {
    // eslint-disable-next-line no-console
    console.error('enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.');
    return;
  }
  locks = locks.filter(function (lock) {
    return lock.targetElement !== targetElement;
  });
  if (isIosDevice) {
    targetElement.ontouchstart = null;
    targetElement.ontouchmove = null;
    if (documentListenerAdded && locks.length === 0) {
      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? {
        passive: false
      } : undefined);
      documentListenerAdded = false;
    }
  }
  if (isIosDevice) {
    restorePositionSetting();
  } else {
    restoreOverflowSetting();
  }
};

/***/ }),

/***/ "../../../node_modules/bootstrap/js/affix.js":
/*!***************************************************!*\
  !*** ../../../node_modules/bootstrap/js/affix.js ***!
  \***************************************************/
/***/ (() => {

/* ========================================================================
 * Bootstrap: affix.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#affix
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

+function ($) {
  'use strict';

  // AFFIX CLASS DEFINITION
  // ======================
  var Affix = function Affix(element, options) {
    this.options = $.extend({}, Affix.DEFAULTS, options);
    var target = this.options.target === Affix.DEFAULTS.target ? $(this.options.target) : $(document).find(this.options.target);
    this.$target = target.on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this)).on('click.bs.affix.data-api', $.proxy(this.checkPositionWithEventLoop, this));
    this.$element = $(element);
    this.affixed = null;
    this.unpin = null;
    this.pinnedOffset = null;
    this.checkPosition();
  };
  Affix.VERSION = '3.4.1';
  Affix.RESET = 'affix affix-top affix-bottom';
  Affix.DEFAULTS = {
    offset: 0,
    target: window
  };
  Affix.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {
    var scrollTop = this.$target.scrollTop();
    var position = this.$element.offset();
    var targetHeight = this.$target.height();
    if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false;
    if (this.affixed == 'bottom') {
      if (offsetTop != null) return scrollTop + this.unpin <= position.top ? false : 'bottom';
      return scrollTop + targetHeight <= scrollHeight - offsetBottom ? false : 'bottom';
    }
    var initializing = this.affixed == null;
    var colliderTop = initializing ? scrollTop : position.top;
    var colliderHeight = initializing ? targetHeight : height;
    if (offsetTop != null && scrollTop <= offsetTop) return 'top';
    if (offsetBottom != null && colliderTop + colliderHeight >= scrollHeight - offsetBottom) return 'bottom';
    return false;
  };
  Affix.prototype.getPinnedOffset = function () {
    if (this.pinnedOffset) return this.pinnedOffset;
    this.$element.removeClass(Affix.RESET).addClass('affix');
    var scrollTop = this.$target.scrollTop();
    var position = this.$element.offset();
    return this.pinnedOffset = position.top - scrollTop;
  };
  Affix.prototype.checkPositionWithEventLoop = function () {
    setTimeout($.proxy(this.checkPosition, this), 1);
  };
  Affix.prototype.checkPosition = function () {
    if (!this.$element.is(':visible')) return;
    var height = this.$element.height();
    var offset = this.options.offset;
    var offsetTop = offset.top;
    var offsetBottom = offset.bottom;
    var scrollHeight = Math.max($(document).height(), $(document.body).height());
    if (typeof offset != 'object') offsetBottom = offsetTop = offset;
    if (typeof offsetTop == 'function') offsetTop = offset.top(this.$element);
    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element);
    var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom);
    if (this.affixed != affix) {
      if (this.unpin != null) this.$element.css('top', '');
      var affixType = 'affix' + (affix ? '-' + affix : '');
      var e = $.Event(affixType + '.bs.affix');
      this.$element.trigger(e);
      if (e.isDefaultPrevented()) return;
      this.affixed = affix;
      this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null;
      this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace('affix', 'affixed') + '.bs.affix');
    }
    if (affix == 'bottom') {
      this.$element.offset({
        top: scrollHeight - height - offsetBottom
      });
    }
  };

  // AFFIX PLUGIN DEFINITION
  // =======================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this);
      var data = $this.data('bs.affix');
      var options = typeof option == 'object' && option;
      if (!data) $this.data('bs.affix', data = new Affix(this, options));
      if (typeof option == 'string') data[option]();
    });
  }
  var old = $.fn.affix;
  $.fn.affix = Plugin;
  $.fn.affix.Constructor = Affix;

  // AFFIX NO CONFLICT
  // =================

  $.fn.affix.noConflict = function () {
    $.fn.affix = old;
    return this;
  };

  // AFFIX DATA-API
  // ==============

  $(window).on('load', function () {
    $('[data-spy="affix"]').each(function () {
      var $spy = $(this);
      var data = $spy.data();
      data.offset = data.offset || {};
      if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom;
      if (data.offsetTop != null) data.offset.top = data.offsetTop;
      Plugin.call($spy, data);
    });
  });
}(jQuery);

/***/ }),

/***/ "../../../node_modules/bootstrap/js/dropdown.js":
/*!******************************************************!*\
  !*** ../../../node_modules/bootstrap/js/dropdown.js ***!
  \******************************************************/
/***/ (() => {

/* ========================================================================
 * Bootstrap: dropdown.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

+function ($) {
  'use strict';

  // DROPDOWN CLASS DEFINITION
  // =========================
  var backdrop = '.dropdown-backdrop';
  var toggle = '[data-toggle="dropdown"]';
  var Dropdown = function Dropdown(element) {
    $(element).on('click.bs.dropdown', this.toggle);
  };
  Dropdown.VERSION = '3.4.1';
  function getParent($this) {
    var selector = $this.attr('data-target');
    if (!selector) {
      selector = $this.attr('href');
      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, ''); // strip for ie7
    }

    var $parent = selector !== '#' ? $(document).find(selector) : null;
    return $parent && $parent.length ? $parent : $this.parent();
  }
  function clearMenus(e) {
    if (e && e.which === 3) return;
    $(backdrop).remove();
    $(toggle).each(function () {
      var $this = $(this);
      var $parent = getParent($this);
      var relatedTarget = {
        relatedTarget: this
      };
      if (!$parent.hasClass('open')) return;
      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return;
      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget));
      if (e.isDefaultPrevented()) return;
      $this.attr('aria-expanded', 'false');
      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget));
    });
  }
  Dropdown.prototype.toggle = function (e) {
    var $this = $(this);
    if ($this.is('.disabled, :disabled')) return;
    var $parent = getParent($this);
    var isActive = $parent.hasClass('open');
    clearMenus();
    if (!isActive) {
      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
        // if mobile we use a backdrop because click events don't delegate
        $(document.createElement('div')).addClass('dropdown-backdrop').insertAfter($(this)).on('click', clearMenus);
      }
      var relatedTarget = {
        relatedTarget: this
      };
      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget));
      if (e.isDefaultPrevented()) return;
      $this.trigger('focus').attr('aria-expanded', 'true');
      $parent.toggleClass('open').trigger($.Event('shown.bs.dropdown', relatedTarget));
    }
    return false;
  };
  Dropdown.prototype.keydown = function (e) {
    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return;
    var $this = $(this);
    e.preventDefault();
    e.stopPropagation();
    if ($this.is('.disabled, :disabled')) return;
    var $parent = getParent($this);
    var isActive = $parent.hasClass('open');
    if (!isActive && e.which != 27 || isActive && e.which == 27) {
      if (e.which == 27) $parent.find(toggle).trigger('focus');
      return $this.trigger('click');
    }
    var desc = ' li:not(.disabled):visible a';
    var $items = $parent.find('.dropdown-menu' + desc);
    if (!$items.length) return;
    var index = $items.index(e.target);
    if (e.which == 38 && index > 0) index--; // up
    if (e.which == 40 && index < $items.length - 1) index++; // down
    if (!~index) index = 0;
    $items.eq(index).trigger('focus');
  };

  // DROPDOWN PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this);
      var data = $this.data('bs.dropdown');
      if (!data) $this.data('bs.dropdown', data = new Dropdown(this));
      if (typeof option == 'string') data[option].call($this);
    });
  }
  var old = $.fn.dropdown;
  $.fn.dropdown = Plugin;
  $.fn.dropdown.Constructor = Dropdown;

  // DROPDOWN NO CONFLICT
  // ====================

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old;
    return this;
  };

  // APPLY TO STANDARD DROPDOWN ELEMENTS
  // ===================================

  $(document).on('click.bs.dropdown.data-api', clearMenus).on('click.bs.dropdown.data-api', '.dropdown form', function (e) {
    e.stopPropagation();
  }).on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle).on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown).on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown);
}(jQuery);

/***/ }),

/***/ "../../../node_modules/bootstrap/js/tooltip.js":
/*!*****************************************************!*\
  !*** ../../../node_modules/bootstrap/js/tooltip.js ***!
  \*****************************************************/
/***/ (() => {

/* ========================================================================
 * Bootstrap: tooltip.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

+function ($) {
  'use strict';

  var DISALLOWED_ATTRIBUTES = ['sanitize', 'whiteList', 'sanitizeFn'];
  var uriAttrs = ['background', 'cite', 'href', 'itemtype', 'longdesc', 'poster', 'src', 'xlink:href'];
  var ARIA_ATTRIBUTE_PATTERN = /^aria-[\w-]*$/i;
  var DefaultWhitelist = {
    // Global attributes allowed on any supplied element below.
    '*': ['class', 'dir', 'id', 'lang', 'role', ARIA_ATTRIBUTE_PATTERN],
    a: ['target', 'href', 'title', 'rel'],
    area: [],
    b: [],
    br: [],
    col: [],
    code: [],
    div: [],
    em: [],
    hr: [],
    h1: [],
    h2: [],
    h3: [],
    h4: [],
    h5: [],
    h6: [],
    i: [],
    img: ['src', 'alt', 'title', 'width', 'height'],
    li: [],
    ol: [],
    p: [],
    pre: [],
    s: [],
    small: [],
    span: [],
    sub: [],
    sup: [],
    strong: [],
    u: [],
    ul: []
  };

  /**
   * A pattern that recognizes a commonly useful subset of URLs that are safe.
   *
   * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts
   */
  var SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;

  /**
   * A pattern that matches safe data URLs. Only matches image, video and audio types.
   *
   * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts
   */
  var DATA_URL_PATTERN = /^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;
  function allowedAttribute(attr, allowedAttributeList) {
    var attrName = attr.nodeName.toLowerCase();
    if ($.inArray(attrName, allowedAttributeList) !== -1) {
      if ($.inArray(attrName, uriAttrs) !== -1) {
        return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN) || attr.nodeValue.match(DATA_URL_PATTERN));
      }
      return true;
    }
    var regExp = $(allowedAttributeList).filter(function (index, value) {
      return value instanceof RegExp;
    });

    // Check if a regular expression validates the attribute.
    for (var i = 0, l = regExp.length; i < l; i++) {
      if (attrName.match(regExp[i])) {
        return true;
      }
    }
    return false;
  }
  function sanitizeHtml(unsafeHtml, whiteList, sanitizeFn) {
    if (unsafeHtml.length === 0) {
      return unsafeHtml;
    }
    if (sanitizeFn && typeof sanitizeFn === 'function') {
      return sanitizeFn(unsafeHtml);
    }

    // IE 8 and below don't support createHTMLDocument
    if (!document.implementation || !document.implementation.createHTMLDocument) {
      return unsafeHtml;
    }
    var createdDocument = document.implementation.createHTMLDocument('sanitization');
    createdDocument.body.innerHTML = unsafeHtml;
    var whitelistKeys = $.map(whiteList, function (el, i) {
      return i;
    });
    var elements = $(createdDocument.body).find('*');
    for (var i = 0, len = elements.length; i < len; i++) {
      var el = elements[i];
      var elName = el.nodeName.toLowerCase();
      if ($.inArray(elName, whitelistKeys) === -1) {
        el.parentNode.removeChild(el);
        continue;
      }
      var attributeList = $.map(el.attributes, function (el) {
        return el;
      });
      var whitelistedAttributes = [].concat(whiteList['*'] || [], whiteList[elName] || []);
      for (var j = 0, len2 = attributeList.length; j < len2; j++) {
        if (!allowedAttribute(attributeList[j], whitelistedAttributes)) {
          el.removeAttribute(attributeList[j].nodeName);
        }
      }
    }
    return createdDocument.body.innerHTML;
  }

  // TOOLTIP PUBLIC CLASS DEFINITION
  // ===============================

  var Tooltip = function Tooltip(element, options) {
    this.type = null;
    this.options = null;
    this.enabled = null;
    this.timeout = null;
    this.hoverState = null;
    this.$element = null;
    this.inState = null;
    this.init('tooltip', element, options);
  };
  Tooltip.VERSION = '3.4.1';
  Tooltip.TRANSITION_DURATION = 150;
  Tooltip.DEFAULTS = {
    animation: true,
    placement: 'top',
    selector: false,
    template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
    trigger: 'hover focus',
    title: '',
    delay: 0,
    html: false,
    container: false,
    viewport: {
      selector: 'body',
      padding: 0
    },
    sanitize: true,
    sanitizeFn: null,
    whiteList: DefaultWhitelist
  };
  Tooltip.prototype.init = function (type, element, options) {
    this.enabled = true;
    this.type = type;
    this.$element = $(element);
    this.options = this.getOptions(options);
    this.$viewport = this.options.viewport && $(document).find($.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : this.options.viewport.selector || this.options.viewport);
    this.inState = {
      click: false,
      hover: false,
      focus: false
    };
    if (this.$element[0] instanceof document.constructor && !this.options.selector) {
      throw new Error('`selector` option must be specified when initializing ' + this.type + ' on the window.document object!');
    }
    var triggers = this.options.trigger.split(' ');
    for (var i = triggers.length; i--;) {
      var trigger = triggers[i];
      if (trigger == 'click') {
        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this));
      } else if (trigger != 'manual') {
        var eventIn = trigger == 'hover' ? 'mouseenter' : 'focusin';
        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout';
        this.$element.on(eventIn + '.' + this.type, this.options.selector, $.proxy(this.enter, this));
        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this));
      }
    }
    this.options.selector ? this._options = $.extend({}, this.options, {
      trigger: 'manual',
      selector: ''
    }) : this.fixTitle();
  };
  Tooltip.prototype.getDefaults = function () {
    return Tooltip.DEFAULTS;
  };
  Tooltip.prototype.getOptions = function (options) {
    var dataAttributes = this.$element.data();
    for (var dataAttr in dataAttributes) {
      if (dataAttributes.hasOwnProperty(dataAttr) && $.inArray(dataAttr, DISALLOWED_ATTRIBUTES) !== -1) {
        delete dataAttributes[dataAttr];
      }
    }
    options = $.extend({}, this.getDefaults(), dataAttributes, options);
    if (options.delay && typeof options.delay == 'number') {
      options.delay = {
        show: options.delay,
        hide: options.delay
      };
    }
    if (options.sanitize) {
      options.template = sanitizeHtml(options.template, options.whiteList, options.sanitizeFn);
    }
    return options;
  };
  Tooltip.prototype.getDelegateOptions = function () {
    var options = {};
    var defaults = this.getDefaults();
    this._options && $.each(this._options, function (key, value) {
      if (defaults[key] != value) options[key] = value;
    });
    return options;
  };
  Tooltip.prototype.enter = function (obj) {
    var self = obj instanceof this.constructor ? obj : $(obj.currentTarget).data('bs.' + this.type);
    if (!self) {
      self = new this.constructor(obj.currentTarget, this.getDelegateOptions());
      $(obj.currentTarget).data('bs.' + this.type, self);
    }
    if (obj instanceof $.Event) {
      self.inState[obj.type == 'focusin' ? 'focus' : 'hover'] = true;
    }
    if (self.tip().hasClass('in') || self.hoverState == 'in') {
      self.hoverState = 'in';
      return;
    }
    clearTimeout(self.timeout);
    self.hoverState = 'in';
    if (!self.options.delay || !self.options.delay.show) return self.show();
    self.timeout = setTimeout(function () {
      if (self.hoverState == 'in') self.show();
    }, self.options.delay.show);
  };
  Tooltip.prototype.isInStateTrue = function () {
    for (var key in this.inState) {
      if (this.inState[key]) return true;
    }
    return false;
  };
  Tooltip.prototype.leave = function (obj) {
    var self = obj instanceof this.constructor ? obj : $(obj.currentTarget).data('bs.' + this.type);
    if (!self) {
      self = new this.constructor(obj.currentTarget, this.getDelegateOptions());
      $(obj.currentTarget).data('bs.' + this.type, self);
    }
    if (obj instanceof $.Event) {
      self.inState[obj.type == 'focusout' ? 'focus' : 'hover'] = false;
    }
    if (self.isInStateTrue()) return;
    clearTimeout(self.timeout);
    self.hoverState = 'out';
    if (!self.options.delay || !self.options.delay.hide) return self.hide();
    self.timeout = setTimeout(function () {
      if (self.hoverState == 'out') self.hide();
    }, self.options.delay.hide);
  };
  Tooltip.prototype.show = function () {
    var e = $.Event('show.bs.' + this.type);
    if (this.hasContent() && this.enabled) {
      this.$element.trigger(e);
      var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0]);
      if (e.isDefaultPrevented() || !inDom) return;
      var that = this;
      var $tip = this.tip();
      var tipId = this.getUID(this.type);
      this.setContent();
      $tip.attr('id', tipId);
      this.$element.attr('aria-describedby', tipId);
      if (this.options.animation) $tip.addClass('fade');
      var placement = typeof this.options.placement == 'function' ? this.options.placement.call(this, $tip[0], this.$element[0]) : this.options.placement;
      var autoToken = /\s?auto?\s?/i;
      var autoPlace = autoToken.test(placement);
      if (autoPlace) placement = placement.replace(autoToken, '') || 'top';
      $tip.detach().css({
        top: 0,
        left: 0,
        display: 'block'
      }).addClass(placement).data('bs.' + this.type, this);
      this.options.container ? $tip.appendTo($(document).find(this.options.container)) : $tip.insertAfter(this.$element);
      this.$element.trigger('inserted.bs.' + this.type);
      var pos = this.getPosition();
      var actualWidth = $tip[0].offsetWidth;
      var actualHeight = $tip[0].offsetHeight;
      if (autoPlace) {
        var orgPlacement = placement;
        var viewportDim = this.getPosition(this.$viewport);
        placement = placement == 'bottom' && pos.bottom + actualHeight > viewportDim.bottom ? 'top' : placement == 'top' && pos.top - actualHeight < viewportDim.top ? 'bottom' : placement == 'right' && pos.right + actualWidth > viewportDim.width ? 'left' : placement == 'left' && pos.left - actualWidth < viewportDim.left ? 'right' : placement;
        $tip.removeClass(orgPlacement).addClass(placement);
      }
      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight);
      this.applyPlacement(calculatedOffset, placement);
      var complete = function complete() {
        var prevHoverState = that.hoverState;
        that.$element.trigger('shown.bs.' + that.type);
        that.hoverState = null;
        if (prevHoverState == 'out') that.leave(that);
      };
      $.support.transition && this.$tip.hasClass('fade') ? $tip.one('bsTransitionEnd', complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION) : complete();
    }
  };
  Tooltip.prototype.applyPlacement = function (offset, placement) {
    var $tip = this.tip();
    var width = $tip[0].offsetWidth;
    var height = $tip[0].offsetHeight;

    // manually read margins because getBoundingClientRect includes difference
    var marginTop = parseInt($tip.css('margin-top'), 10);
    var marginLeft = parseInt($tip.css('margin-left'), 10);

    // we must check for NaN for ie 8/9
    if (isNaN(marginTop)) marginTop = 0;
    if (isNaN(marginLeft)) marginLeft = 0;
    offset.top += marginTop;
    offset.left += marginLeft;

    // $.fn.offset doesn't round pixel values
    // so we use setOffset directly with our own function B-0
    $.offset.setOffset($tip[0], $.extend({
      using: function using(props) {
        $tip.css({
          top: Math.round(props.top),
          left: Math.round(props.left)
        });
      }
    }, offset), 0);
    $tip.addClass('in');

    // check to see if placing tip in new offset caused the tip to resize itself
    var actualWidth = $tip[0].offsetWidth;
    var actualHeight = $tip[0].offsetHeight;
    if (placement == 'top' && actualHeight != height) {
      offset.top = offset.top + height - actualHeight;
    }
    var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight);
    if (delta.left) offset.left += delta.left;else offset.top += delta.top;
    var isVertical = /top|bottom/.test(placement);
    var arrowDelta = isVertical ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight;
    var arrowOffsetPosition = isVertical ? 'offsetWidth' : 'offsetHeight';
    $tip.offset(offset);
    this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], isVertical);
  };
  Tooltip.prototype.replaceArrow = function (delta, dimension, isVertical) {
    this.arrow().css(isVertical ? 'left' : 'top', 50 * (1 - delta / dimension) + '%').css(isVertical ? 'top' : 'left', '');
  };
  Tooltip.prototype.setContent = function () {
    var $tip = this.tip();
    var title = this.getTitle();
    if (this.options.html) {
      if (this.options.sanitize) {
        title = sanitizeHtml(title, this.options.whiteList, this.options.sanitizeFn);
      }
      $tip.find('.tooltip-inner').html(title);
    } else {
      $tip.find('.tooltip-inner').text(title);
    }
    $tip.removeClass('fade in top bottom left right');
  };
  Tooltip.prototype.hide = function (callback) {
    var that = this;
    var $tip = $(this.$tip);
    var e = $.Event('hide.bs.' + this.type);
    function complete() {
      if (that.hoverState != 'in') $tip.detach();
      if (that.$element) {
        // TODO: Check whether guarding this code with this `if` is really necessary.
        that.$element.removeAttr('aria-describedby').trigger('hidden.bs.' + that.type);
      }
      callback && callback();
    }
    this.$element.trigger(e);
    if (e.isDefaultPrevented()) return;
    $tip.removeClass('in');
    $.support.transition && $tip.hasClass('fade') ? $tip.one('bsTransitionEnd', complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION) : complete();
    this.hoverState = null;
    return this;
  };
  Tooltip.prototype.fixTitle = function () {
    var $e = this.$element;
    if ($e.attr('title') || typeof $e.attr('data-original-title') != 'string') {
      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '');
    }
  };
  Tooltip.prototype.hasContent = function () {
    return this.getTitle();
  };
  Tooltip.prototype.getPosition = function ($element) {
    $element = $element || this.$element;
    var el = $element[0];
    var isBody = el.tagName == 'BODY';
    var elRect = el.getBoundingClientRect();
    if (elRect.width == null) {
      // width and height are missing in IE8, so compute them manually; see https://github.com/twbs/bootstrap/issues/14093
      elRect = $.extend({}, elRect, {
        width: elRect.right - elRect.left,
        height: elRect.bottom - elRect.top
      });
    }
    var isSvg = window.SVGElement && el instanceof window.SVGElement;
    // Avoid using $.offset() on SVGs since it gives incorrect results in jQuery 3.
    // See https://github.com/twbs/bootstrap/issues/20280
    var elOffset = isBody ? {
      top: 0,
      left: 0
    } : isSvg ? null : $element.offset();
    var scroll = {
      scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop()
    };
    var outerDims = isBody ? {
      width: $(window).width(),
      height: $(window).height()
    } : null;
    return $.extend({}, elRect, scroll, outerDims, elOffset);
  };
  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {
    return placement == 'bottom' ? {
      top: pos.top + pos.height,
      left: pos.left + pos.width / 2 - actualWidth / 2
    } : placement == 'top' ? {
      top: pos.top - actualHeight,
      left: pos.left + pos.width / 2 - actualWidth / 2
    } : placement == 'left' ? {
      top: pos.top + pos.height / 2 - actualHeight / 2,
      left: pos.left - actualWidth
    } : /* placement == 'right' */{
      top: pos.top + pos.height / 2 - actualHeight / 2,
      left: pos.left + pos.width
    };
  };
  Tooltip.prototype.getViewportAdjustedDelta = function (placement, pos, actualWidth, actualHeight) {
    var delta = {
      top: 0,
      left: 0
    };
    if (!this.$viewport) return delta;
    var viewportPadding = this.options.viewport && this.options.viewport.padding || 0;
    var viewportDimensions = this.getPosition(this.$viewport);
    if (/right|left/.test(placement)) {
      var topEdgeOffset = pos.top - viewportPadding - viewportDimensions.scroll;
      var bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight;
      if (topEdgeOffset < viewportDimensions.top) {
        // top overflow
        delta.top = viewportDimensions.top - topEdgeOffset;
      } else if (bottomEdgeOffset > viewportDimensions.top + viewportDimensions.height) {
        // bottom overflow
        delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset;
      }
    } else {
      var leftEdgeOffset = pos.left - viewportPadding;
      var rightEdgeOffset = pos.left + viewportPadding + actualWidth;
      if (leftEdgeOffset < viewportDimensions.left) {
        // left overflow
        delta.left = viewportDimensions.left - leftEdgeOffset;
      } else if (rightEdgeOffset > viewportDimensions.right) {
        // right overflow
        delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset;
      }
    }
    return delta;
  };
  Tooltip.prototype.getTitle = function () {
    var title;
    var $e = this.$element;
    var o = this.options;
    title = $e.attr('data-original-title') || (typeof o.title == 'function' ? o.title.call($e[0]) : o.title);
    return title;
  };
  Tooltip.prototype.getUID = function (prefix) {
    do {
      prefix += ~~(Math.random() * 1000000);
    } while (document.getElementById(prefix));
    return prefix;
  };
  Tooltip.prototype.tip = function () {
    if (!this.$tip) {
      this.$tip = $(this.options.template);
      if (this.$tip.length != 1) {
        throw new Error(this.type + ' `template` option must consist of exactly 1 top-level element!');
      }
    }
    return this.$tip;
  };
  Tooltip.prototype.arrow = function () {
    return this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow');
  };
  Tooltip.prototype.enable = function () {
    this.enabled = true;
  };
  Tooltip.prototype.disable = function () {
    this.enabled = false;
  };
  Tooltip.prototype.toggleEnabled = function () {
    this.enabled = !this.enabled;
  };
  Tooltip.prototype.toggle = function (e) {
    var self = this;
    if (e) {
      self = $(e.currentTarget).data('bs.' + this.type);
      if (!self) {
        self = new this.constructor(e.currentTarget, this.getDelegateOptions());
        $(e.currentTarget).data('bs.' + this.type, self);
      }
    }
    if (e) {
      self.inState.click = !self.inState.click;
      if (self.isInStateTrue()) self.enter(self);else self.leave(self);
    } else {
      self.tip().hasClass('in') ? self.leave(self) : self.enter(self);
    }
  };
  Tooltip.prototype.destroy = function () {
    var that = this;
    clearTimeout(this.timeout);
    this.hide(function () {
      that.$element.off('.' + that.type).removeData('bs.' + that.type);
      if (that.$tip) {
        that.$tip.detach();
      }
      that.$tip = null;
      that.$arrow = null;
      that.$viewport = null;
      that.$element = null;
    });
  };
  Tooltip.prototype.sanitizeHtml = function (unsafeHtml) {
    return sanitizeHtml(unsafeHtml, this.options.whiteList, this.options.sanitizeFn);
  };

  // TOOLTIP PLUGIN DEFINITION
  // =========================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this);
      var data = $this.data('bs.tooltip');
      var options = typeof option == 'object' && option;
      if (!data && /destroy|hide/.test(option)) return;
      if (!data) $this.data('bs.tooltip', data = new Tooltip(this, options));
      if (typeof option == 'string') data[option]();
    });
  }
  var old = $.fn.tooltip;
  $.fn.tooltip = Plugin;
  $.fn.tooltip.Constructor = Tooltip;

  // TOOLTIP NO CONFLICT
  // ===================

  $.fn.tooltip.noConflict = function () {
    $.fn.tooltip = old;
    return this;
  };
}(jQuery);

/***/ }),

/***/ "../../../node_modules/bootstrap/js/transition.js":
/*!********************************************************!*\
  !*** ../../../node_modules/bootstrap/js/transition.js ***!
  \********************************************************/
/***/ (() => {

/* ========================================================================
 * Bootstrap: transition.js v3.4.1
 * https://getbootstrap.com/docs/3.4/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: https://modernizr.com/)
  // ============================================================
  function transitionEnd() {
    var el = document.createElement('bootstrap');
    var transEndEventNames = {
      WebkitTransition: 'webkitTransitionEnd',
      MozTransition: 'transitionend',
      OTransition: 'oTransitionEnd otransitionend',
      transition: 'transitionend'
    };
    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return {
          end: transEndEventNames[name]
        };
      }
    }
    return false; // explicit for ie8 (  ._.)
  }

  // https://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false;
    var $el = this;
    $(this).one('bsTransitionEnd', function () {
      called = true;
    });
    var callback = function callback() {
      if (!called) $($el).trigger($.support.transition.end);
    };
    setTimeout(callback, duration);
    return this;
  };
  $(function () {
    $.support.transition = transitionEnd();
    if (!$.support.transition) return;
    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function handle(e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments);
      }
    };
  });
}(jQuery);

/***/ }),

/***/ "../../../node_modules/clsx/dist/clsx.m.js":
/*!*************************************************!*\
  !*** ../../../node_modules/clsx/dist/clsx.m.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "clsx": () => (/* binding */ clsx),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
function r(e) {
  var t,
    f,
    n = "";
  if ("string" == typeof e || "number" == typeof e) n += e;else if ("object" == typeof e) if (Array.isArray(e)) for (t = 0; t < e.length; t++) {
    e[t] && (f = r(e[t])) && (n && (n += " "), n += f);
  } else for (t in e) {
    e[t] && (n && (n += " "), n += t);
  }
  return n;
}
function clsx() {
  for (var e, t, f = 0, n = ""; f < arguments.length;) {
    (e = arguments[f++]) && (t = r(e)) && (n && (n += " "), n += t);
  }
  return n;
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clsx);

/***/ }),

/***/ "../../../node_modules/color-thief-browser/dist/color-thief.min.js":
/*!*************************************************************************!*\
  !*** ../../../node_modules/color-thief-browser/dist/color-thief.min.js ***!
  \*************************************************************************/
/***/ ((module) => {

/*!
 * Color Thief v2.0
 * by Lokesh Dhakar - http://www.lokeshdhakar.com
 *
 * Thanks
 * ------
 * Nick Rabinowitz - For creating quantize.js.
 * John Schulz - For clean up and optimization. @JFSIII
 * Nathan Spady - For adding drag and drop support to the demo page.
 *
 * License
 * -------
 * Copyright 2011, 2015 Lokesh Dhakar
 * Released under the MIT license
 * https://raw.githubusercontent.com/lokesh/color-thief/master/LICENSE
 *
 */
var CanvasImage = function CanvasImage(a) {
  this.canvas = document.createElement("canvas"), this.context = this.canvas.getContext("2d"), document.body.appendChild(this.canvas), this.width = this.canvas.width = a.width, this.height = this.canvas.height = a.height, this.context.drawImage(a, 0, 0, this.width, this.height);
};
CanvasImage.prototype.clear = function () {
  this.context.clearRect(0, 0, this.width, this.height);
}, CanvasImage.prototype.update = function (a) {
  this.context.putImageData(a, 0, 0);
}, CanvasImage.prototype.getPixelCount = function () {
  return this.width * this.height;
}, CanvasImage.prototype.getImageData = function () {
  return this.context.getImageData(0, 0, this.width, this.height);
}, CanvasImage.prototype.removeCanvas = function () {
  this.canvas.parentNode.removeChild(this.canvas);
};
var ColorThief = function ColorThief() {}; /*!
                                           * quantize.js Copyright 2008 Nick Rabinowitz.
                                           * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
                                           */
/*!
 * Block below copied from Protovis: http://mbostock.github.com/protovis/
 * Copyright 2010 Stanford Visualization Group
 * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php
 */
if (ColorThief.prototype.getColor = function (a, b) {
  var c = this.getPalette(a, 5, b),
    d = c[0];
  return d;
}, ColorThief.prototype.getPalette = function (a, b, c) {
  "undefined" == typeof b && (b = 10), ("undefined" == typeof c || 1 > c) && (c = 10);
  for (var d, e, f, g, h, i = new CanvasImage(a), j = i.getImageData(), k = j.data, l = i.getPixelCount(), m = [], n = 0; l > n; n += c) {
    d = 4 * n, e = k[d + 0], f = k[d + 1], g = k[d + 2], h = k[d + 3], h >= 125 && (e > 250 && f > 250 && g > 250 || m.push([e, f, g]));
  }
  var o = MMCQ.quantize(m, b),
    p = o ? o.palette() : null;
  return i.removeCanvas(), p;
}, !pv) var pv = {
  map: function map(a, b) {
    var c = {};
    return b ? a.map(function (a, d) {
      return c.index = d, b.call(c, a);
    }) : a.slice();
  },
  naturalOrder: function naturalOrder(a, b) {
    return b > a ? -1 : a > b ? 1 : 0;
  },
  sum: function sum(a, b) {
    var c = {};
    return a.reduce(b ? function (a, d, e) {
      return c.index = e, a + b.call(c, d);
    } : function (a, b) {
      return a + b;
    }, 0);
  },
  max: function max(a, b) {
    return Math.max.apply(null, b ? pv.map(a, b) : a);
  }
};
var MMCQ = function () {
  function a(a, b, c) {
    return (a << 2 * i) + (b << i) + c;
  }
  function b(a) {
    function b() {
      c.sort(a), d = !0;
    }
    var c = [],
      d = !1;
    return {
      push: function push(a) {
        c.push(a), d = !1;
      },
      peek: function peek(a) {
        return d || b(), void 0 === a && (a = c.length - 1), c[a];
      },
      pop: function pop() {
        return d || b(), c.pop();
      },
      size: function size() {
        return c.length;
      },
      map: function map(a) {
        return c.map(a);
      },
      debug: function debug() {
        return d || b(), c;
      }
    };
  }
  function c(a, b, c, d, e, f, g) {
    var h = this;
    h.r1 = a, h.r2 = b, h.g1 = c, h.g2 = d, h.b1 = e, h.b2 = f, h.histo = g;
  }
  function d() {
    this.vboxes = new b(function (a, b) {
      return pv.naturalOrder(a.vbox.count() * a.vbox.volume(), b.vbox.count() * b.vbox.volume());
    });
  }
  function e(b) {
    var c,
      d,
      e,
      f,
      g = 1 << 3 * i,
      h = new Array(g);
    return b.forEach(function (b) {
      d = b[0] >> j, e = b[1] >> j, f = b[2] >> j, c = a(d, e, f), h[c] = (h[c] || 0) + 1;
    }), h;
  }
  function f(a, b) {
    var d,
      e,
      f,
      g = 1e6,
      h = 0,
      i = 1e6,
      k = 0,
      l = 1e6,
      m = 0;
    return a.forEach(function (a) {
      d = a[0] >> j, e = a[1] >> j, f = a[2] >> j, g > d ? g = d : d > h && (h = d), i > e ? i = e : e > k && (k = e), l > f ? l = f : f > m && (m = f);
    }), new c(g, h, i, k, l, m, b);
  }
  function g(b, c) {
    function d(a) {
      var b,
        d,
        e,
        f,
        g,
        h = a + "1",
        j = a + "2",
        k = 0;
      for (i = c[h]; i <= c[j]; i++) {
        if (o[i] > n / 2) {
          for (e = c.copy(), f = c.copy(), b = i - c[h], d = c[j] - i, g = d >= b ? Math.min(c[j] - 1, ~~(i + d / 2)) : Math.max(c[h], ~~(i - 1 - b / 2)); !o[g];) {
            g++;
          }
          for (k = p[g]; !k && o[g - 1];) {
            k = p[--g];
          }
          return e[j] = g, f[h] = e[j] + 1, [e, f];
        }
      }
    }
    if (c.count()) {
      var e = c.r2 - c.r1 + 1,
        f = c.g2 - c.g1 + 1,
        g = c.b2 - c.b1 + 1,
        h = pv.max([e, f, g]);
      if (1 == c.count()) return [c.copy()];
      var i,
        j,
        k,
        l,
        m,
        n = 0,
        o = [],
        p = [];
      if (h == e) for (i = c.r1; i <= c.r2; i++) {
        for (l = 0, j = c.g1; j <= c.g2; j++) {
          for (k = c.b1; k <= c.b2; k++) {
            m = a(i, j, k), l += b[m] || 0;
          }
        }
        n += l, o[i] = n;
      } else if (h == f) for (i = c.g1; i <= c.g2; i++) {
        for (l = 0, j = c.r1; j <= c.r2; j++) {
          for (k = c.b1; k <= c.b2; k++) {
            m = a(j, i, k), l += b[m] || 0;
          }
        }
        n += l, o[i] = n;
      } else for (i = c.b1; i <= c.b2; i++) {
        for (l = 0, j = c.r1; j <= c.r2; j++) {
          for (k = c.g1; k <= c.g2; k++) {
            m = a(j, k, i), l += b[m] || 0;
          }
        }
        n += l, o[i] = n;
      }
      return o.forEach(function (a, b) {
        p[b] = n - a;
      }), d(h == e ? "r" : h == f ? "g" : "b");
    }
  }
  function h(a, c) {
    function h(a, b) {
      for (var c, d = 1, e = 0; k > e;) {
        if (c = a.pop(), c.count()) {
          var f = g(i, c),
            h = f[0],
            j = f[1];
          if (!h) return;
          if (a.push(h), j && (a.push(j), d++), d >= b) return;
          if (e++ > k) return;
        } else a.push(c), e++;
      }
    }
    if (!a.length || 2 > c || c > 256) return !1;
    var i = e(a),
      j = 0;
    i.forEach(function () {
      j++;
    });
    var m = f(a, i),
      n = new b(function (a, b) {
        return pv.naturalOrder(a.count(), b.count());
      });
    n.push(m), h(n, l * c);
    for (var o = new b(function (a, b) {
      return pv.naturalOrder(a.count() * a.volume(), b.count() * b.volume());
    }); n.size();) {
      o.push(n.pop());
    }
    h(o, c - o.size());
    for (var p = new d(); o.size();) {
      p.push(o.pop());
    }
    return p;
  }
  var i = 5,
    j = 8 - i,
    k = 1e3,
    l = .75;
  return c.prototype = {
    volume: function volume(a) {
      var b = this;
      return (!b._volume || a) && (b._volume = (b.r2 - b.r1 + 1) * (b.g2 - b.g1 + 1) * (b.b2 - b.b1 + 1)), b._volume;
    },
    count: function count(b) {
      var c = this,
        d = c.histo;
      if (!c._count_set || b) {
        var e,
          f,
          g,
          h = 0;
        for (e = c.r1; e <= c.r2; e++) {
          for (f = c.g1; f <= c.g2; f++) {
            for (g = c.b1; g <= c.b2; g++) {
              index = a(e, f, g), h += d[index] || 0;
            }
          }
        }
        c._count = h, c._count_set = !0;
      }
      return c._count;
    },
    copy: function copy() {
      var a = this;
      return new c(a.r1, a.r2, a.g1, a.g2, a.b1, a.b2, a.histo);
    },
    avg: function avg(b) {
      var c = this,
        d = c.histo;
      if (!c._avg || b) {
        var e,
          f,
          g,
          h,
          j,
          k = 0,
          l = 1 << 8 - i,
          m = 0,
          n = 0,
          o = 0;
        for (f = c.r1; f <= c.r2; f++) {
          for (g = c.g1; g <= c.g2; g++) {
            for (h = c.b1; h <= c.b2; h++) {
              j = a(f, g, h), e = d[j] || 0, k += e, m += e * (f + .5) * l, n += e * (g + .5) * l, o += e * (h + .5) * l;
            }
          }
        }
        k ? c._avg = [~~(m / k), ~~(n / k), ~~(o / k)] : c._avg = [~~(l * (c.r1 + c.r2 + 1) / 2), ~~(l * (c.g1 + c.g2 + 1) / 2), ~~(l * (c.b1 + c.b2 + 1) / 2)];
      }
      return c._avg;
    },
    contains: function contains(a) {
      var b = this,
        c = a[0] >> j;
      return gval = a[1] >> j, bval = a[2] >> j, c >= b.r1 && c <= b.r2 && gval >= b.g1 && gval <= b.g2 && bval >= b.b1 && bval <= b.b2;
    }
  }, d.prototype = {
    push: function push(a) {
      this.vboxes.push({
        vbox: a,
        color: a.avg()
      });
    },
    palette: function palette() {
      return this.vboxes.map(function (a) {
        return a.color;
      });
    },
    size: function size() {
      return this.vboxes.size();
    },
    map: function map(a) {
      for (var b = this.vboxes, c = 0; c < b.size(); c++) {
        if (b.peek(c).vbox.contains(a)) return b.peek(c).color;
      }
      return this.nearest(a);
    },
    nearest: function nearest(a) {
      for (var b, c, d, e = this.vboxes, f = 0; f < e.size(); f++) {
        c = Math.sqrt(Math.pow(a[0] - e.peek(f).color[0], 2) + Math.pow(a[1] - e.peek(f).color[1], 2) + Math.pow(a[2] - e.peek(f).color[2], 2)), (b > c || void 0 === b) && (b = c, d = e.peek(f).color);
      }
      return d;
    },
    forcebw: function forcebw() {
      var a = this.vboxes;
      a.sort(function (a, b) {
        return pv.naturalOrder(pv.sum(a.color), pv.sum(b.color));
      });
      var b = a[0].color;
      b[0] < 5 && b[1] < 5 && b[2] < 5 && (a[0].color = [0, 0, 0]);
      var c = a.length - 1,
        d = a[c].color;
      d[0] > 251 && d[1] > 251 && d[2] > 251 && (a[c].color = [255, 255, 255]);
    }
  }, {
    quantize: h
  };
}();
module.exports = ColorThief;

/***/ }),

/***/ "../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/dayjs/dayjs.min.js":
/*!*********************************************************************************************************************!*\
  !*** ../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/dayjs/dayjs.min.js ***!
  \*********************************************************************************************************************/
/***/ (function(module) {

!function (t, e) {
   true ? module.exports = e() : 0;
}(this, function () {
  "use strict";

  var t = 1e3,
    e = 6e4,
    n = 36e5,
    r = "millisecond",
    i = "second",
    s = "minute",
    u = "hour",
    a = "day",
    o = "week",
    f = "month",
    h = "quarter",
    c = "year",
    d = "date",
    l = "Invalid Date",
    $ = /^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,
    y = /\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,
    M = {
      name: "en",
      weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
      months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
      ordinal: function ordinal(t) {
        var e = ["th", "st", "nd", "rd"],
          n = t % 100;
        return "[" + t + (e[(n - 20) % 10] || e[n] || e[0]) + "]";
      }
    },
    m = function m(t, e, n) {
      var r = String(t);
      return !r || r.length >= e ? t : "" + Array(e + 1 - r.length).join(n) + t;
    },
    v = {
      s: m,
      z: function z(t) {
        var e = -t.utcOffset(),
          n = Math.abs(e),
          r = Math.floor(n / 60),
          i = n % 60;
        return (e <= 0 ? "+" : "-") + m(r, 2, "0") + ":" + m(i, 2, "0");
      },
      m: function t(e, n) {
        if (e.date() < n.date()) return -t(n, e);
        var r = 12 * (n.year() - e.year()) + (n.month() - e.month()),
          i = e.clone().add(r, f),
          s = n - i < 0,
          u = e.clone().add(r + (s ? -1 : 1), f);
        return +(-(r + (n - i) / (s ? i - u : u - i)) || 0);
      },
      a: function a(t) {
        return t < 0 ? Math.ceil(t) || 0 : Math.floor(t);
      },
      p: function p(t) {
        return {
          M: f,
          y: c,
          w: o,
          d: a,
          D: d,
          h: u,
          m: s,
          s: i,
          ms: r,
          Q: h
        }[t] || String(t || "").toLowerCase().replace(/s$/, "");
      },
      u: function u(t) {
        return void 0 === t;
      }
    },
    g = "en",
    D = {};
  D[g] = M;
  var p = function p(t) {
      return t instanceof _;
    },
    S = function t(e, n, r) {
      var i;
      if (!e) return g;
      if ("string" == typeof e) {
        var s = e.toLowerCase();
        D[s] && (i = s), n && (D[s] = n, i = s);
        var u = e.split("-");
        if (!i && u.length > 1) return t(u[0]);
      } else {
        var a = e.name;
        D[a] = e, i = a;
      }
      return !r && i && (g = i), i || !r && g;
    },
    w = function w(t, e) {
      if (p(t)) return t.clone();
      var n = "object" == typeof e ? e : {};
      return n.date = t, n.args = arguments, new _(n);
    },
    O = v;
  O.l = S, O.i = p, O.w = function (t, e) {
    return w(t, {
      locale: e.$L,
      utc: e.$u,
      x: e.$x,
      $offset: e.$offset
    });
  };
  var _ = function () {
      function M(t) {
        this.$L = S(t.locale, null, !0), this.parse(t);
      }
      var m = M.prototype;
      return m.parse = function (t) {
        this.$d = function (t) {
          var e = t.date,
            n = t.utc;
          if (null === e) return new Date(NaN);
          if (O.u(e)) return new Date();
          if (e instanceof Date) return new Date(e);
          if ("string" == typeof e && !/Z$/i.test(e)) {
            var r = e.match($);
            if (r) {
              var i = r[2] - 1 || 0,
                s = (r[7] || "0").substring(0, 3);
              return n ? new Date(Date.UTC(r[1], i, r[3] || 1, r[4] || 0, r[5] || 0, r[6] || 0, s)) : new Date(r[1], i, r[3] || 1, r[4] || 0, r[5] || 0, r[6] || 0, s);
            }
          }
          return new Date(e);
        }(t), this.$x = t.x || {}, this.init();
      }, m.init = function () {
        var t = this.$d;
        this.$y = t.getFullYear(), this.$M = t.getMonth(), this.$D = t.getDate(), this.$W = t.getDay(), this.$H = t.getHours(), this.$m = t.getMinutes(), this.$s = t.getSeconds(), this.$ms = t.getMilliseconds();
      }, m.$utils = function () {
        return O;
      }, m.isValid = function () {
        return !(this.$d.toString() === l);
      }, m.isSame = function (t, e) {
        var n = w(t);
        return this.startOf(e) <= n && n <= this.endOf(e);
      }, m.isAfter = function (t, e) {
        return w(t) < this.startOf(e);
      }, m.isBefore = function (t, e) {
        return this.endOf(e) < w(t);
      }, m.$g = function (t, e, n) {
        return O.u(t) ? this[e] : this.set(n, t);
      }, m.unix = function () {
        return Math.floor(this.valueOf() / 1e3);
      }, m.valueOf = function () {
        return this.$d.getTime();
      }, m.startOf = function (t, e) {
        var n = this,
          r = !!O.u(e) || e,
          h = O.p(t),
          l = function l(t, e) {
            var i = O.w(n.$u ? Date.UTC(n.$y, e, t) : new Date(n.$y, e, t), n);
            return r ? i : i.endOf(a);
          },
          $ = function $(t, e) {
            return O.w(n.toDate()[t].apply(n.toDate("s"), (r ? [0, 0, 0, 0] : [23, 59, 59, 999]).slice(e)), n);
          },
          y = this.$W,
          M = this.$M,
          m = this.$D,
          v = "set" + (this.$u ? "UTC" : "");
        switch (h) {
          case c:
            return r ? l(1, 0) : l(31, 11);
          case f:
            return r ? l(1, M) : l(0, M + 1);
          case o:
            var g = this.$locale().weekStart || 0,
              D = (y < g ? y + 7 : y) - g;
            return l(r ? m - D : m + (6 - D), M);
          case a:
          case d:
            return $(v + "Hours", 0);
          case u:
            return $(v + "Minutes", 1);
          case s:
            return $(v + "Seconds", 2);
          case i:
            return $(v + "Milliseconds", 3);
          default:
            return this.clone();
        }
      }, m.endOf = function (t) {
        return this.startOf(t, !1);
      }, m.$set = function (t, e) {
        var n,
          o = O.p(t),
          h = "set" + (this.$u ? "UTC" : ""),
          l = (n = {}, n[a] = h + "Date", n[d] = h + "Date", n[f] = h + "Month", n[c] = h + "FullYear", n[u] = h + "Hours", n[s] = h + "Minutes", n[i] = h + "Seconds", n[r] = h + "Milliseconds", n)[o],
          $ = o === a ? this.$D + (e - this.$W) : e;
        if (o === f || o === c) {
          var y = this.clone().set(d, 1);
          y.$d[l]($), y.init(), this.$d = y.set(d, Math.min(this.$D, y.daysInMonth())).$d;
        } else l && this.$d[l]($);
        return this.init(), this;
      }, m.set = function (t, e) {
        return this.clone().$set(t, e);
      }, m.get = function (t) {
        return this[O.p(t)]();
      }, m.add = function (r, h) {
        var d,
          l = this;
        r = Number(r);
        var $ = O.p(h),
          y = function y(t) {
            var e = w(l);
            return O.w(e.date(e.date() + Math.round(t * r)), l);
          };
        if ($ === f) return this.set(f, this.$M + r);
        if ($ === c) return this.set(c, this.$y + r);
        if ($ === a) return y(1);
        if ($ === o) return y(7);
        var M = (d = {}, d[s] = e, d[u] = n, d[i] = t, d)[$] || 1,
          m = this.$d.getTime() + r * M;
        return O.w(m, this);
      }, m.subtract = function (t, e) {
        return this.add(-1 * t, e);
      }, m.format = function (t) {
        var e = this,
          n = this.$locale();
        if (!this.isValid()) return n.invalidDate || l;
        var r = t || "YYYY-MM-DDTHH:mm:ssZ",
          i = O.z(this),
          s = this.$H,
          u = this.$m,
          a = this.$M,
          o = n.weekdays,
          f = n.months,
          h = function h(t, n, i, s) {
            return t && (t[n] || t(e, r)) || i[n].slice(0, s);
          },
          c = function c(t) {
            return O.s(s % 12 || 12, t, "0");
          },
          d = n.meridiem || function (t, e, n) {
            var r = t < 12 ? "AM" : "PM";
            return n ? r.toLowerCase() : r;
          },
          $ = {
            YY: String(this.$y).slice(-2),
            YYYY: this.$y,
            M: a + 1,
            MM: O.s(a + 1, 2, "0"),
            MMM: h(n.monthsShort, a, f, 3),
            MMMM: h(f, a),
            D: this.$D,
            DD: O.s(this.$D, 2, "0"),
            d: String(this.$W),
            dd: h(n.weekdaysMin, this.$W, o, 2),
            ddd: h(n.weekdaysShort, this.$W, o, 3),
            dddd: o[this.$W],
            H: String(s),
            HH: O.s(s, 2, "0"),
            h: c(1),
            hh: c(2),
            a: d(s, u, !0),
            A: d(s, u, !1),
            m: String(u),
            mm: O.s(u, 2, "0"),
            s: String(this.$s),
            ss: O.s(this.$s, 2, "0"),
            SSS: O.s(this.$ms, 3, "0"),
            Z: i
          };
        return r.replace(y, function (t, e) {
          return e || $[t] || i.replace(":", "");
        });
      }, m.utcOffset = function () {
        return 15 * -Math.round(this.$d.getTimezoneOffset() / 15);
      }, m.diff = function (r, d, l) {
        var $,
          y = O.p(d),
          M = w(r),
          m = (M.utcOffset() - this.utcOffset()) * e,
          v = this - M,
          g = O.m(this, M);
        return g = ($ = {}, $[c] = g / 12, $[f] = g, $[h] = g / 3, $[o] = (v - m) / 6048e5, $[a] = (v - m) / 864e5, $[u] = v / n, $[s] = v / e, $[i] = v / t, $)[y] || v, l ? g : O.a(g);
      }, m.daysInMonth = function () {
        return this.endOf(f).$D;
      }, m.$locale = function () {
        return D[this.$L];
      }, m.locale = function (t, e) {
        if (!t) return this.$L;
        var n = this.clone(),
          r = S(t, e, !0);
        return r && (n.$L = r), n;
      }, m.clone = function () {
        return O.w(this.$d, this);
      }, m.toDate = function () {
        return new Date(this.valueOf());
      }, m.toJSON = function () {
        return this.isValid() ? this.toISOString() : null;
      }, m.toISOString = function () {
        return this.$d.toISOString();
      }, m.toString = function () {
        return this.$d.toUTCString();
      }, M;
    }(),
    T = _.prototype;
  return w.prototype = T, [["$ms", r], ["$s", i], ["$m", s], ["$H", u], ["$W", a], ["$M", f], ["$y", c], ["$D", d]].forEach(function (t) {
    T[t[1]] = function (e) {
      return this.$g(e, t[0], t[1]);
    };
  }), w.extend = function (t, e) {
    return t.$i || (t(e, _, w), t.$i = !0), w;
  }, w.locale = S, w.isDayjs = p, w.unix = function (t) {
    return w(1e3 * t);
  }, w.en = D[g], w.Ls = D, w.p = {}, w;
});

/***/ }),

/***/ "../../../node_modules/dayjs/plugin/localizedFormat.js":
/*!*************************************************************!*\
  !*** ../../../node_modules/dayjs/plugin/localizedFormat.js ***!
  \*************************************************************/
/***/ (function(module) {

!function (e, t) {
   true ? module.exports = t() : 0;
}(this, function () {
  "use strict";

  var e = {
    LTS: "h:mm:ss A",
    LT: "h:mm A",
    L: "MM/DD/YYYY",
    LL: "MMMM D, YYYY",
    LLL: "MMMM D, YYYY h:mm A",
    LLLL: "dddd, MMMM D, YYYY h:mm A"
  };
  return function (t, o, n) {
    var r = o.prototype,
      i = r.format;
    n.en.formats = e, r.format = function (t) {
      void 0 === t && (t = "YYYY-MM-DDTHH:mm:ssZ");
      var o = this.$locale().formats,
        n = function (t, o) {
          return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g, function (t, n, r) {
            var i = r && r.toUpperCase();
            return n || o[r] || e[r] || o[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g, function (e, t, o) {
              return t || o.slice(1);
            });
          });
        }(t, void 0 === o ? {} : o);
      return i.call(this, n);
    };
  };
});

/***/ }),

/***/ "../../../node_modules/dayjs/plugin/relativeTime.js":
/*!**********************************************************!*\
  !*** ../../../node_modules/dayjs/plugin/relativeTime.js ***!
  \**********************************************************/
/***/ (function(module) {

!function (r, e) {
   true ? module.exports = e() : 0;
}(this, function () {
  "use strict";

  return function (r, e, t) {
    r = r || {};
    var n = e.prototype,
      o = {
        future: "in %s",
        past: "%s ago",
        s: "a few seconds",
        m: "a minute",
        mm: "%d minutes",
        h: "an hour",
        hh: "%d hours",
        d: "a day",
        dd: "%d days",
        M: "a month",
        MM: "%d months",
        y: "a year",
        yy: "%d years"
      };
    function i(r, e, t, o) {
      return n.fromToBase(r, e, t, o);
    }
    t.en.relativeTime = o, n.fromToBase = function (e, n, i, d, u) {
      for (var f, a, s, l = i.$locale().relativeTime || o, h = r.thresholds || [{
          l: "s",
          r: 44,
          d: "second"
        }, {
          l: "m",
          r: 89
        }, {
          l: "mm",
          r: 44,
          d: "minute"
        }, {
          l: "h",
          r: 89
        }, {
          l: "hh",
          r: 21,
          d: "hour"
        }, {
          l: "d",
          r: 35
        }, {
          l: "dd",
          r: 25,
          d: "day"
        }, {
          l: "M",
          r: 45
        }, {
          l: "MM",
          r: 10,
          d: "month"
        }, {
          l: "y",
          r: 17
        }, {
          l: "yy",
          d: "year"
        }], m = h.length, c = 0; c < m; c += 1) {
        var y = h[c];
        y.d && (f = d ? t(e).diff(i, y.d, !0) : i.diff(e, y.d, !0));
        var p = (r.rounding || Math.round)(Math.abs(f));
        if (s = f > 0, p <= y.r || !y.r) {
          p <= 1 && c > 0 && (y = h[c - 1]);
          var v = l[y.l];
          u && (p = u("" + p)), a = "string" == typeof v ? v.replace("%d", p) : v(p, n, y.l, s);
          break;
        }
      }
      if (n) return a;
      var M = s ? l.future : l.past;
      return "function" == typeof M ? M(a) : M.replace("%s", a);
    }, n.to = function (r, e) {
      return i(r, e, this, !0);
    }, n.from = function (r, e) {
      return i(r, e, this);
    };
    var d = function d(r) {
      return r.$u ? t.utc() : t();
    };
    n.toNow = function (r) {
      return this.to(d(this), r);
    }, n.fromNow = function (r) {
      return this.from(d(this), r);
    };
  };
});

/***/ }),

/***/ "../../../node_modules/expose-loader/dist/runtime/getGlobalThis.js":
/*!*************************************************************************!*\
  !*** ../../../node_modules/expose-loader/dist/runtime/getGlobalThis.js ***!
  \*************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


// eslint-disable-next-line func-names
module.exports = function () {
  if (typeof globalThis === "object") {
    return globalThis;
  }
  var g;
  try {
    // This works if eval is allowed (see CSP)
    // eslint-disable-next-line no-new-func
    g = this || new Function("return this")();
  } catch (e) {
    // This works if the window reference is available
    if (typeof window === "object") {
      return window;
    } // This works if the self reference is available

    if (typeof self === "object") {
      return self;
    } // This works if the global reference is available

    if (typeof __webpack_require__.g !== "undefined") {
      return __webpack_require__.g;
    }
  }
  return g;
}();

/***/ }),

/***/ "../../../node_modules/focus-trap/dist/focus-trap.esm.js":
/*!***************************************************************!*\
  !*** ../../../node_modules/focus-trap/dist/focus-trap.esm.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createFocusTrap": () => (/* binding */ createFocusTrap)
/* harmony export */ });
/* harmony import */ var tabbable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tabbable */ "../../../node_modules/tabbable/dist/index.esm.js");
/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread2(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {
      _defineProperty(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
var activeFocusTraps = function () {
  var trapQueue = [];
  return {
    activateTrap: function activateTrap(trap) {
      if (trapQueue.length > 0) {
        var activeTrap = trapQueue[trapQueue.length - 1];
        if (activeTrap !== trap) {
          activeTrap.pause();
        }
      }
      var trapIndex = trapQueue.indexOf(trap);
      if (trapIndex === -1) {
        trapQueue.push(trap);
      } else {
        // move this existing trap to the front of the queue
        trapQueue.splice(trapIndex, 1);
        trapQueue.push(trap);
      }
    },
    deactivateTrap: function deactivateTrap(trap) {
      var trapIndex = trapQueue.indexOf(trap);
      if (trapIndex !== -1) {
        trapQueue.splice(trapIndex, 1);
      }
      if (trapQueue.length > 0) {
        trapQueue[trapQueue.length - 1].unpause();
      }
    }
  };
}();
var isSelectableInput = function isSelectableInput(node) {
  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';
};
var isEscapeEvent = function isEscapeEvent(e) {
  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;
};
var isTabEvent = function isTabEvent(e) {
  return e.key === 'Tab' || e.keyCode === 9;
};
var delay = function delay(fn) {
  return setTimeout(fn, 0);
}; // Array.find/findIndex() are not supported on IE; this replicates enough
//  of Array.findIndex() for our needs

var findIndex = function findIndex(arr, fn) {
  var idx = -1;
  arr.every(function (value, i) {
    if (fn(value)) {
      idx = i;
      return false; // break
    }

    return true; // next
  });

  return idx;
};
/**
 * Get an option's value when it could be a plain value, or a handler that provides
 *  the value.
 * @param {*} value Option's value to check.
 * @param {...*} [params] Any parameters to pass to the handler, if `value` is a function.
 * @returns {*} The `value`, or the handler's returned value.
 */

var valueOrHandler = function valueOrHandler(value) {
  for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    params[_key - 1] = arguments[_key];
  }
  return typeof value === 'function' ? value.apply(void 0, params) : value;
};
var getActualTarget = function getActualTarget(event) {
  // NOTE: If the trap is _inside_ a shadow DOM, event.target will always be the
  //  shadow host. However, event.target.composedPath() will be an array of
  //  nodes "clicked" from inner-most (the actual element inside the shadow) to
  //  outer-most (the host HTML document). If we have access to composedPath(),
  //  then use its first element; otherwise, fall back to event.target (and
  //  this only works for an _open_ shadow DOM; otherwise,
  //  composedPath()[0] === event.target always).
  return event.target.shadowRoot && typeof event.composedPath === 'function' ? event.composedPath()[0] : event.target;
};
var createFocusTrap = function createFocusTrap(elements, userOptions) {
  // SSR: a live trap shouldn't be created in this type of environment so this
  //  should be safe code to execute if the `document` option isn't specified
  var doc = (userOptions === null || userOptions === void 0 ? void 0 : userOptions.document) || document;
  var config = _objectSpread2({
    returnFocusOnDeactivate: true,
    escapeDeactivates: true,
    delayInitialFocus: true
  }, userOptions);
  var state = {
    // containers given to createFocusTrap()
    // @type {Array<HTMLElement>}
    containers: [],
    // list of objects identifying tabbable nodes in `containers` in the trap
    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap
    //  is active, but the trap should never get to a state where there isn't at least one group
    //  with at least one tabbable node in it (that would lead to an error condition that would
    //  result in an error being thrown)
    // @type {Array<{
    //   container: HTMLElement,
    //   tabbableNodes: Array<HTMLElement>, // empty if none
    //   focusableNodes: Array<HTMLElement>, // empty if none
    //   firstTabbableNode: HTMLElement|null,
    //   lastTabbableNode: HTMLElement|null,
    //   nextTabbableNode: (node: HTMLElement, forward: boolean) => HTMLElement|undefined
    // }>}
    containerGroups: [],
    // same order/length as `containers` list
    // references to objects in `containerGroups`, but only those that actually have
    //  tabbable nodes in them
    // NOTE: same order as `containers` and `containerGroups`, but __not necessarily__
    //  the same length
    tabbableGroups: [],
    nodeFocusedBeforeActivation: null,
    mostRecentlyFocusedNode: null,
    active: false,
    paused: false,
    // timer ID for when delayInitialFocus is true and initial focus in this trap
    //  has been delayed during activation
    delayInitialFocusTimer: undefined
  };
  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later

  /**
   * Gets a configuration option value.
   * @param {Object|undefined} configOverrideOptions If true, and option is defined in this set,
   *  value will be taken from this object. Otherwise, value will be taken from base configuration.
   * @param {string} optionName Name of the option whose value is sought.
   * @param {string|undefined} [configOptionName] Name of option to use __instead of__ `optionName`
   *  IIF `configOverrideOptions` is not defined. Otherwise, `optionName` is used.
   */

  var getOption = function getOption(configOverrideOptions, optionName, configOptionName) {
    return configOverrideOptions && configOverrideOptions[optionName] !== undefined ? configOverrideOptions[optionName] : config[configOptionName || optionName];
  };
  /**
   * Finds the index of the container that contains the element.
   * @param {HTMLElement} element
   * @returns {number} Index of the container in either `state.containers` or
   *  `state.containerGroups` (the order/length of these lists are the same); -1
   *  if the element isn't found.
   */

  var findContainerIndex = function findContainerIndex(element) {
    // NOTE: search `containerGroups` because it's possible a group contains no tabbable
    //  nodes, but still contains focusable nodes (e.g. if they all have `tabindex=-1`)
    //  and we still need to find the element in there
    return state.containerGroups.findIndex(function (_ref) {
      var container = _ref.container,
        tabbableNodes = _ref.tabbableNodes;
      return container.contains(element) ||
      // fall back to explicit tabbable search which will take into consideration any
      //  web components if the `tabbableOptions.getShadowRoot` option was used for
      //  the trap, enabling shadow DOM support in tabbable (`Node.contains()` doesn't
      //  look inside web components even if open)
      tabbableNodes.find(function (node) {
        return node === element;
      });
    });
  };
  /**
   * Gets the node for the given option, which is expected to be an option that
   *  can be either a DOM node, a string that is a selector to get a node, `false`
   *  (if a node is explicitly NOT given), or a function that returns any of these
   *  values.
   * @param {string} optionName
   * @returns {undefined | false | HTMLElement | SVGElement} Returns
   *  `undefined` if the option is not specified; `false` if the option
   *  resolved to `false` (node explicitly not given); otherwise, the resolved
   *  DOM node.
   * @throws {Error} If the option is set, not `false`, and is not, or does not
   *  resolve to a node.
   */

  var getNodeForOption = function getNodeForOption(optionName) {
    var optionValue = config[optionName];
    if (typeof optionValue === 'function') {
      for (var _len2 = arguments.length, params = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        params[_key2 - 1] = arguments[_key2];
      }
      optionValue = optionValue.apply(void 0, params);
    }
    if (optionValue === true) {
      optionValue = undefined; // use default value
    }

    if (!optionValue) {
      if (optionValue === undefined || optionValue === false) {
        return optionValue;
      } // else, empty string (invalid), null (invalid), 0 (invalid)

      throw new Error("`".concat(optionName, "` was specified but was not a node, or did not return a node"));
    }
    var node = optionValue; // could be HTMLElement, SVGElement, or non-empty string at this point

    if (typeof optionValue === 'string') {
      node = doc.querySelector(optionValue); // resolve to node, or null if fails

      if (!node) {
        throw new Error("`".concat(optionName, "` as selector refers to no known node"));
      }
    }
    return node;
  };
  var getInitialFocusNode = function getInitialFocusNode() {
    var node = getNodeForOption('initialFocus'); // false explicitly indicates we want no initialFocus at all

    if (node === false) {
      return false;
    }
    if (node === undefined) {
      // option not specified: use fallback options
      if (findContainerIndex(doc.activeElement) >= 0) {
        node = doc.activeElement;
      } else {
        var firstTabbableGroup = state.tabbableGroups[0];
        var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode; // NOTE: `fallbackFocus` option function cannot return `false` (not supported)

        node = firstTabbableNode || getNodeForOption('fallbackFocus');
      }
    }
    if (!node) {
      throw new Error('Your focus-trap needs to have at least one focusable element');
    }
    return node;
  };
  var updateTabbableNodes = function updateTabbableNodes() {
    state.containerGroups = state.containers.map(function (container) {
      var tabbableNodes = (0,tabbable__WEBPACK_IMPORTED_MODULE_0__.tabbable)(container, config.tabbableOptions); // NOTE: if we have tabbable nodes, we must have focusable nodes; focusable nodes
      //  are a superset of tabbable nodes

      var focusableNodes = (0,tabbable__WEBPACK_IMPORTED_MODULE_0__.focusable)(container, config.tabbableOptions);
      return {
        container: container,
        tabbableNodes: tabbableNodes,
        focusableNodes: focusableNodes,
        firstTabbableNode: tabbableNodes.length > 0 ? tabbableNodes[0] : null,
        lastTabbableNode: tabbableNodes.length > 0 ? tabbableNodes[tabbableNodes.length - 1] : null,
        /**
         * Finds the __tabbable__ node that follows the given node in the specified direction,
         *  in this container, if any.
         * @param {HTMLElement} node
         * @param {boolean} [forward] True if going in forward tab order; false if going
         *  in reverse.
         * @returns {HTMLElement|undefined} The next tabbable node, if any.
         */
        nextTabbableNode: function nextTabbableNode(node) {
          var forward = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
          // NOTE: If tabindex is positive (in order to manipulate the tab order separate
          //  from the DOM order), this __will not work__ because the list of focusableNodes,
          //  while it contains tabbable nodes, does not sort its nodes in any order other
          //  than DOM order, because it can't: Where would you place focusable (but not
          //  tabbable) nodes in that order? They have no order, because they aren't tabbale...
          // Support for positive tabindex is already broken and hard to manage (possibly
          //  not supportable, TBD), so this isn't going to make things worse than they
          //  already are, and at least makes things better for the majority of cases where
          //  tabindex is either 0/unset or negative.
          // FYI, positive tabindex issue: https://github.com/focus-trap/focus-trap/issues/375
          var nodeIdx = focusableNodes.findIndex(function (n) {
            return n === node;
          });
          if (nodeIdx < 0) {
            return undefined;
          }
          if (forward) {
            return focusableNodes.slice(nodeIdx + 1).find(function (n) {
              return (0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isTabbable)(n, config.tabbableOptions);
            });
          }
          return focusableNodes.slice(0, nodeIdx).reverse().find(function (n) {
            return (0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isTabbable)(n, config.tabbableOptions);
          });
        }
      };
    });
    state.tabbableGroups = state.containerGroups.filter(function (group) {
      return group.tabbableNodes.length > 0;
    }); // throw if no groups have tabbable nodes and we don't have a fallback focus node either

    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus') // returning false not supported for this option
    ) {
      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');
    }
  };
  var tryFocus = function tryFocus(node) {
    if (node === false) {
      return;
    }
    if (node === doc.activeElement) {
      return;
    }
    if (!node || !node.focus) {
      tryFocus(getInitialFocusNode());
      return;
    }
    node.focus({
      preventScroll: !!config.preventScroll
    });
    state.mostRecentlyFocusedNode = node;
    if (isSelectableInput(node)) {
      node.select();
    }
  };
  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {
    var node = getNodeForOption('setReturnFocus', previousActiveElement);
    return node ? node : node === false ? false : previousActiveElement;
  }; // This needs to be done on mousedown and touchstart instead of click
  // so that it precedes the focus event.

  var checkPointerDown = function checkPointerDown(e) {
    var target = getActualTarget(e);
    if (findContainerIndex(target) >= 0) {
      // allow the click since it ocurred inside the trap
      return;
    }
    if (valueOrHandler(config.clickOutsideDeactivates, e)) {
      // immediately deactivate the trap
      trap.deactivate({
        // if, on deactivation, we should return focus to the node originally-focused
        //  when the trap was activated (or the configured `setReturnFocus` node),
        //  then assume it's also OK to return focus to the outside node that was
        //  just clicked, causing deactivation, as long as that node is focusable;
        //  if it isn't focusable, then return focus to the original node focused
        //  on activation (or the configured `setReturnFocus` node)
        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,
        //  which will result in the outside click setting focus to the node
        //  that was clicked, whether it's focusable or not; by setting
        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused
        //  on activation (or the configured `setReturnFocus` node)
        returnFocus: config.returnFocusOnDeactivate && !(0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isFocusable)(target, config.tabbableOptions)
      });
      return;
    } // This is needed for mobile devices.
    // (If we'll only let `click` events through,
    // then on mobile they will be blocked anyways if `touchstart` is blocked.)

    if (valueOrHandler(config.allowOutsideClick, e)) {
      // allow the click outside the trap to take place
      return;
    } // otherwise, prevent the click

    e.preventDefault();
  }; // In case focus escapes the trap for some strange reason, pull it back in.

  var checkFocusIn = function checkFocusIn(e) {
    var target = getActualTarget(e);
    var targetContained = findContainerIndex(target) >= 0; // In Firefox when you Tab out of an iframe the Document is briefly focused.

    if (targetContained || target instanceof Document) {
      if (targetContained) {
        state.mostRecentlyFocusedNode = target;
      }
    } else {
      // escaped! pull it back in to where it just left
      e.stopImmediatePropagation();
      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());
    }
  }; // Hijack Tab events on the first and last focusable nodes of the trap,
  // in order to prevent focus from escaping. If it escapes for even a
  // moment it can end up scrolling the page and causing confusion so we
  // kind of need to capture the action at the keydown phase.

  var checkTab = function checkTab(e) {
    var target = getActualTarget(e);
    updateTabbableNodes();
    var destinationNode = null;
    if (state.tabbableGroups.length > 0) {
      // make sure the target is actually contained in a group
      // NOTE: the target may also be the container itself if it's focusable
      //  with tabIndex='-1' and was given initial focus
      var containerIndex = findContainerIndex(target);
      var containerGroup = containerIndex >= 0 ? state.containerGroups[containerIndex] : undefined;
      if (containerIndex < 0) {
        // target not found in any group: quite possible focus has escaped the trap,
        //  so bring it back in to...
        if (e.shiftKey) {
          // ...the last node in the last group
          destinationNode = state.tabbableGroups[state.tabbableGroups.length - 1].lastTabbableNode;
        } else {
          // ...the first node in the first group
          destinationNode = state.tabbableGroups[0].firstTabbableNode;
        }
      } else if (e.shiftKey) {
        // REVERSE
        // is the target the first tabbable node in a group?
        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {
          var firstTabbableNode = _ref2.firstTabbableNode;
          return target === firstTabbableNode;
        });
        if (startOfGroupIndex < 0 && (containerGroup.container === target || (0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isFocusable)(target, config.tabbableOptions) && !(0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isTabbable)(target, config.tabbableOptions) && !containerGroup.nextTabbableNode(target, false))) {
          // an exception case where the target is either the container itself, or
          //  a non-tabbable node that was given focus (i.e. tabindex is negative
          //  and user clicked on it or node was programmatically given focus)
          //  and is not followed by any other tabbable node, in which
          //  case, we should handle shift+tab as if focus were on the container's
          //  first tabbable node, and go to the last tabbable node of the LAST group
          startOfGroupIndex = containerIndex;
        }
        if (startOfGroupIndex >= 0) {
          // YES: then shift+tab should go to the last tabbable node in the
          //  previous group (and wrap around to the last tabbable node of
          //  the LAST group if it's the first tabbable node of the FIRST group)
          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;
          var destinationGroup = state.tabbableGroups[destinationGroupIndex];
          destinationNode = destinationGroup.lastTabbableNode;
        }
      } else {
        // FORWARD
        // is the target the last tabbable node in a group?
        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref3) {
          var lastTabbableNode = _ref3.lastTabbableNode;
          return target === lastTabbableNode;
        });
        if (lastOfGroupIndex < 0 && (containerGroup.container === target || (0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isFocusable)(target, config.tabbableOptions) && !(0,tabbable__WEBPACK_IMPORTED_MODULE_0__.isTabbable)(target, config.tabbableOptions) && !containerGroup.nextTabbableNode(target))) {
          // an exception case where the target is the container itself, or
          //  a non-tabbable node that was given focus (i.e. tabindex is negative
          //  and user clicked on it or node was programmatically given focus)
          //  and is not followed by any other tabbable node, in which
          //  case, we should handle tab as if focus were on the container's
          //  last tabbable node, and go to the first tabbable node of the FIRST group
          lastOfGroupIndex = containerIndex;
        }
        if (lastOfGroupIndex >= 0) {
          // YES: then tab should go to the first tabbable node in the next
          //  group (and wrap around to the first tabbable node of the FIRST
          //  group if it's the last tabbable node of the LAST group)
          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;
          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];
          destinationNode = _destinationGroup.firstTabbableNode;
        }
      }
    } else {
      // NOTE: the fallbackFocus option does not support returning false to opt-out
      destinationNode = getNodeForOption('fallbackFocus');
    }
    if (destinationNode) {
      e.preventDefault();
      tryFocus(destinationNode);
    } // else, let the browser take care of [shift+]tab and move the focus
  };

  var checkKey = function checkKey(e) {
    if (isEscapeEvent(e) && valueOrHandler(config.escapeDeactivates, e) !== false) {
      e.preventDefault();
      trap.deactivate();
      return;
    }
    if (isTabEvent(e)) {
      checkTab(e);
      return;
    }
  };
  var checkClick = function checkClick(e) {
    var target = getActualTarget(e);
    if (findContainerIndex(target) >= 0) {
      return;
    }
    if (valueOrHandler(config.clickOutsideDeactivates, e)) {
      return;
    }
    if (valueOrHandler(config.allowOutsideClick, e)) {
      return;
    }
    e.preventDefault();
    e.stopImmediatePropagation();
  }; //
  // EVENT LISTENERS
  //

  var addListeners = function addListeners() {
    if (!state.active) {
      return;
    } // There can be only one listening focus trap at a time

    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event
    // that caused the focus trap activation.

    state.delayInitialFocusTimer = config.delayInitialFocus ? delay(function () {
      tryFocus(getInitialFocusNode());
    }) : tryFocus(getInitialFocusNode());
    doc.addEventListener('focusin', checkFocusIn, true);
    doc.addEventListener('mousedown', checkPointerDown, {
      capture: true,
      passive: false
    });
    doc.addEventListener('touchstart', checkPointerDown, {
      capture: true,
      passive: false
    });
    doc.addEventListener('click', checkClick, {
      capture: true,
      passive: false
    });
    doc.addEventListener('keydown', checkKey, {
      capture: true,
      passive: false
    });
    return trap;
  };
  var removeListeners = function removeListeners() {
    if (!state.active) {
      return;
    }
    doc.removeEventListener('focusin', checkFocusIn, true);
    doc.removeEventListener('mousedown', checkPointerDown, true);
    doc.removeEventListener('touchstart', checkPointerDown, true);
    doc.removeEventListener('click', checkClick, true);
    doc.removeEventListener('keydown', checkKey, true);
    return trap;
  }; //
  // TRAP DEFINITION
  //

  trap = {
    get active() {
      return state.active;
    },
    get paused() {
      return state.paused;
    },
    activate: function activate(activateOptions) {
      if (state.active) {
        return this;
      }
      var onActivate = getOption(activateOptions, 'onActivate');
      var onPostActivate = getOption(activateOptions, 'onPostActivate');
      var checkCanFocusTrap = getOption(activateOptions, 'checkCanFocusTrap');
      if (!checkCanFocusTrap) {
        updateTabbableNodes();
      }
      state.active = true;
      state.paused = false;
      state.nodeFocusedBeforeActivation = doc.activeElement;
      if (onActivate) {
        onActivate();
      }
      var finishActivation = function finishActivation() {
        if (checkCanFocusTrap) {
          updateTabbableNodes();
        }
        addListeners();
        if (onPostActivate) {
          onPostActivate();
        }
      };
      if (checkCanFocusTrap) {
        checkCanFocusTrap(state.containers.concat()).then(finishActivation, finishActivation);
        return this;
      }
      finishActivation();
      return this;
    },
    deactivate: function deactivate(deactivateOptions) {
      if (!state.active) {
        return this;
      }
      var options = _objectSpread2({
        onDeactivate: config.onDeactivate,
        onPostDeactivate: config.onPostDeactivate,
        checkCanReturnFocus: config.checkCanReturnFocus
      }, deactivateOptions);
      clearTimeout(state.delayInitialFocusTimer); // noop if undefined

      state.delayInitialFocusTimer = undefined;
      removeListeners();
      state.active = false;
      state.paused = false;
      activeFocusTraps.deactivateTrap(trap);
      var onDeactivate = getOption(options, 'onDeactivate');
      var onPostDeactivate = getOption(options, 'onPostDeactivate');
      var checkCanReturnFocus = getOption(options, 'checkCanReturnFocus');
      var returnFocus = getOption(options, 'returnFocus', 'returnFocusOnDeactivate');
      if (onDeactivate) {
        onDeactivate();
      }
      var finishDeactivation = function finishDeactivation() {
        delay(function () {
          if (returnFocus) {
            tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));
          }
          if (onPostDeactivate) {
            onPostDeactivate();
          }
        });
      };
      if (returnFocus && checkCanReturnFocus) {
        checkCanReturnFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation)).then(finishDeactivation, finishDeactivation);
        return this;
      }
      finishDeactivation();
      return this;
    },
    pause: function pause() {
      if (state.paused || !state.active) {
        return this;
      }
      state.paused = true;
      removeListeners();
      return this;
    },
    unpause: function unpause() {
      if (!state.paused || !state.active) {
        return this;
      }
      state.paused = false;
      updateTabbableNodes();
      addListeners();
      return this;
    },
    updateContainerElements: function updateContainerElements(containerElements) {
      var elementsAsArray = [].concat(containerElements).filter(Boolean);
      state.containers = elementsAsArray.map(function (element) {
        return typeof element === 'string' ? doc.querySelector(element) : element;
      });
      if (state.active) {
        updateTabbableNodes();
      }
      return this;
    }
  }; // initialize container elements

  trap.updateContainerElements(elements);
  return trap;
};


/***/ }),

/***/ "../../../node_modules/jquery.hotkeys/jquery.hotkeys.js":
/*!**************************************************************!*\
  !*** ../../../node_modules/jquery.hotkeys/jquery.hotkeys.js ***!
  \**************************************************************/
/***/ (function() {

/*jslint browser: true*/
/*jslint jquery: true*/

/*
 * jQuery Hotkeys Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based upon the plugin by Tzury Bar Yochay:
 * https://github.com/tzuryby/jquery.hotkeys
 *
 * Original idea by:
 * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
 */

/*
 * One small change is: now keys are passed by object { keys: '...' }
 * Might be useful, when you want to pass some other data to your handler
 */

(function (jQuery) {
  jQuery.hotkeys = {
    version: "0.2.0",
    specialKeys: {
      8: "backspace",
      9: "tab",
      10: "return",
      13: "return",
      16: "shift",
      17: "ctrl",
      18: "alt",
      19: "pause",
      20: "capslock",
      27: "esc",
      32: "space",
      33: "pageup",
      34: "pagedown",
      35: "end",
      36: "home",
      37: "left",
      38: "up",
      39: "right",
      40: "down",
      45: "insert",
      46: "del",
      59: ";",
      61: "=",
      96: "0",
      97: "1",
      98: "2",
      99: "3",
      100: "4",
      101: "5",
      102: "6",
      103: "7",
      104: "8",
      105: "9",
      106: "*",
      107: "+",
      109: "-",
      110: ".",
      111: "/",
      112: "f1",
      113: "f2",
      114: "f3",
      115: "f4",
      116: "f5",
      117: "f6",
      118: "f7",
      119: "f8",
      120: "f9",
      121: "f10",
      122: "f11",
      123: "f12",
      144: "numlock",
      145: "scroll",
      173: "-",
      186: ";",
      187: "=",
      188: ",",
      189: "-",
      190: ".",
      191: "/",
      192: "`",
      219: "[",
      220: "\\",
      221: "]",
      222: "'"
    },
    shiftNums: {
      "`": "~",
      "1": "!",
      "2": "@",
      "3": "#",
      "4": "$",
      "5": "%",
      "6": "^",
      "7": "&",
      "8": "*",
      "9": "(",
      "0": ")",
      "-": "_",
      "=": "+",
      ";": ": ",
      "'": "\"",
      ",": "<",
      ".": ">",
      "/": "?",
      "\\": "|"
    },
    // excludes: button, checkbox, file, hidden, image, password, radio, reset, search, submit, url
    textAcceptingInputTypes: ["text", "password", "number", "email", "url", "range", "date", "month", "week", "time", "datetime", "datetime-local", "search", "color", "tel"],
    // default input types not to bind to unless bound directly
    textInputTypes: /textarea|input|select/i,
    options: {
      filterInputAcceptingElements: true,
      filterTextInputs: true,
      filterContentEditable: true
    }
  };
  function keyHandler(handleObj) {
    if (typeof handleObj.data === "string") {
      handleObj.data = {
        keys: handleObj.data
      };
    }

    // Only care when a possible input has been specified
    if (!handleObj.data || !handleObj.data.keys || typeof handleObj.data.keys !== "string") {
      return;
    }
    var origHandler = handleObj.handler,
      keys = handleObj.data.keys.toLowerCase().split(" ");
    handleObj.handler = function (event) {
      //      Don't fire in text-accepting inputs that we didn't directly bind to
      if (this !== event.target && (jQuery.hotkeys.options.filterInputAcceptingElements && jQuery.hotkeys.textInputTypes.test(event.target.nodeName) || jQuery.hotkeys.options.filterContentEditable && jQuery(event.target).attr('contenteditable') || jQuery.hotkeys.options.filterTextInputs && jQuery.inArray(event.target.type, jQuery.hotkeys.textAcceptingInputTypes) > -1)) {
        return;
      }
      var special = event.type !== "keypress" && jQuery.hotkeys.specialKeys[event.which],
        character = String.fromCharCode(event.which).toLowerCase(),
        modif = "",
        possible = {};
      jQuery.each(["alt", "ctrl", "shift"], function (index, specialKey) {
        if (event[specialKey + 'Key'] && special !== specialKey) {
          modif += specialKey + '+';
        }
      });

      // metaKey is triggered off ctrlKey erronously
      if (event.metaKey && !event.ctrlKey && special !== "meta") {
        modif += "meta+";
      }
      if (event.metaKey && special !== "meta" && modif.indexOf("alt+ctrl+shift+") > -1) {
        modif = modif.replace("alt+ctrl+shift+", "hyper+");
      }
      if (special) {
        possible[modif + special] = true;
      } else {
        possible[modif + character] = true;
        possible[modif + jQuery.hotkeys.shiftNums[character]] = true;

        // "$" can be triggered as "Shift+4" or "Shift+$" or just "$"
        if (modif === "shift+") {
          possible[jQuery.hotkeys.shiftNums[character]] = true;
        }
      }
      for (var i = 0, l = keys.length; i < l; i++) {
        if (possible[keys[i]]) {
          return origHandler.apply(this, arguments);
        }
      }
    };
  }
  jQuery.each(["keydown", "keyup", "keypress"], function () {
    jQuery.event.special[this] = {
      add: keyHandler
    };
  });
})(jQuery || this.jQuery || window.jQuery);

/***/ }),

/***/ "../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/jquery/dist/jquery.js":
/*!************************************************************************************************************************!*\
  !*** ../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/jquery/dist/jquery.js ***!
  \************************************************************************************************************************/
/***/ (function(module, exports) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jQuery JavaScript Library v3.6.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2022-08-26T17:52Z
 */
(function (global, factory) {
  "use strict";

  if ( true && typeof module.exports === "object") {
    // For CommonJS and CommonJS-like environments where a proper `window`
    // is present, execute the factory and get jQuery.
    // For environments that do not have a `window` with a `document`
    // (such as Node.js), expose a factory as module.exports.
    // This accentuates the need for the creation of a real `window`.
    // e.g. var jQuery = require("jquery")(window);
    // See ticket trac-14549 for more info.
    module.exports = global.document ? factory(global, true) : function (w) {
      if (!w.document) {
        throw new Error("jQuery requires a window with a document");
      }
      return factory(w);
    };
  } else {
    factory(global);
  }

  // Pass this if window is not defined yet
})(typeof window !== "undefined" ? window : this, function (window, noGlobal) {
  // Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1
  // throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode
  // arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common
  // enough that all such attempts are guarded in a try block.
  "use strict";

  var arr = [];
  var getProto = Object.getPrototypeOf;
  var _slice = arr.slice;
  var flat = arr.flat ? function (array) {
    return arr.flat.call(array);
  } : function (array) {
    return arr.concat.apply([], array);
  };
  var push = arr.push;
  var indexOf = arr.indexOf;
  var class2type = {};
  var toString = class2type.toString;
  var hasOwn = class2type.hasOwnProperty;
  var fnToString = hasOwn.toString;
  var ObjectFunctionString = fnToString.call(Object);
  var support = {};
  var isFunction = function isFunction(obj) {
    // Support: Chrome <=57, Firefox <=52
    // In some browsers, typeof returns "function" for HTML <object> elements
    // (i.e., `typeof document.createElement( "object" ) === "function"`).
    // We don't want to classify *any* DOM node as a function.
    // Support: QtWeb <=3.8.5, WebKit <=534.34, wkhtmltopdf tool <=0.12.5
    // Plus for old WebKit, typeof returns "function" for HTML collections
    // (e.g., `typeof document.getElementsByTagName("div") === "function"`). (gh-4756)
    return typeof obj === "function" && typeof obj.nodeType !== "number" && typeof obj.item !== "function";
  };
  var isWindow = function isWindow(obj) {
    return obj != null && obj === obj.window;
  };
  var document = window.document;
  var preservedScriptAttributes = {
    type: true,
    src: true,
    nonce: true,
    noModule: true
  };
  function DOMEval(code, node, doc) {
    doc = doc || document;
    var i,
      val,
      script = doc.createElement("script");
    script.text = code;
    if (node) {
      for (i in preservedScriptAttributes) {
        // Support: Firefox 64+, Edge 18+
        // Some browsers don't support the "nonce" property on scripts.
        // On the other hand, just using `getAttribute` is not enough as
        // the `nonce` attribute is reset to an empty string whenever it
        // becomes browsing-context connected.
        // See https://github.com/whatwg/html/issues/2369
        // See https://html.spec.whatwg.org/#nonce-attributes
        // The `node.getAttribute` check was added for the sake of
        // `jQuery.globalEval` so that it can fake a nonce-containing node
        // via an object.
        val = node[i] || node.getAttribute && node.getAttribute(i);
        if (val) {
          script.setAttribute(i, val);
        }
      }
    }
    doc.head.appendChild(script).parentNode.removeChild(script);
  }
  function toType(obj) {
    if (obj == null) {
      return obj + "";
    }

    // Support: Android <=2.3 only (functionish RegExp)
    return typeof obj === "object" || typeof obj === "function" ? class2type[toString.call(obj)] || "object" : typeof obj;
  }
  /* global Symbol */
  // Defining this global in .eslintrc.json would create a danger of using the global
  // unguarded in another place, it seems safer to define global only for this module

  var version = "3.6.1",
    // Define a local copy of jQuery
    jQuery = function jQuery(selector, context) {
      // The jQuery object is actually just the init constructor 'enhanced'
      // Need init if jQuery is called (just allow error to be thrown if not included)
      return new jQuery.fn.init(selector, context);
    };
  jQuery.fn = jQuery.prototype = {
    // The current version of jQuery being used
    jquery: version,
    constructor: jQuery,
    // The default length of a jQuery object is 0
    length: 0,
    toArray: function toArray() {
      return _slice.call(this);
    },
    // Get the Nth element in the matched element set OR
    // Get the whole matched element set as a clean array
    get: function get(num) {
      // Return all the elements in a clean array
      if (num == null) {
        return _slice.call(this);
      }

      // Return just the one element from the set
      return num < 0 ? this[num + this.length] : this[num];
    },
    // Take an array of elements and push it onto the stack
    // (returning the new matched element set)
    pushStack: function pushStack(elems) {
      // Build a new jQuery matched element set
      var ret = jQuery.merge(this.constructor(), elems);

      // Add the old object onto the stack (as a reference)
      ret.prevObject = this;

      // Return the newly-formed element set
      return ret;
    },
    // Execute a callback for every element in the matched set.
    each: function each(callback) {
      return jQuery.each(this, callback);
    },
    map: function map(callback) {
      return this.pushStack(jQuery.map(this, function (elem, i) {
        return callback.call(elem, i, elem);
      }));
    },
    slice: function slice() {
      return this.pushStack(_slice.apply(this, arguments));
    },
    first: function first() {
      return this.eq(0);
    },
    last: function last() {
      return this.eq(-1);
    },
    even: function even() {
      return this.pushStack(jQuery.grep(this, function (_elem, i) {
        return (i + 1) % 2;
      }));
    },
    odd: function odd() {
      return this.pushStack(jQuery.grep(this, function (_elem, i) {
        return i % 2;
      }));
    },
    eq: function eq(i) {
      var len = this.length,
        j = +i + (i < 0 ? len : 0);
      return this.pushStack(j >= 0 && j < len ? [this[j]] : []);
    },
    end: function end() {
      return this.prevObject || this.constructor();
    },
    // For internal use only.
    // Behaves like an Array's method, not like a jQuery method.
    push: push,
    sort: arr.sort,
    splice: arr.splice
  };
  jQuery.extend = jQuery.fn.extend = function () {
    var options,
      name,
      src,
      copy,
      copyIsArray,
      clone,
      target = arguments[0] || {},
      i = 1,
      length = arguments.length,
      deep = false;

    // Handle a deep copy situation
    if (typeof target === "boolean") {
      deep = target;

      // Skip the boolean and the target
      target = arguments[i] || {};
      i++;
    }

    // Handle case when target is a string or something (possible in deep copy)
    if (typeof target !== "object" && !isFunction(target)) {
      target = {};
    }

    // Extend jQuery itself if only one argument is passed
    if (i === length) {
      target = this;
      i--;
    }
    for (; i < length; i++) {
      // Only deal with non-null/undefined values
      if ((options = arguments[i]) != null) {
        // Extend the base object
        for (name in options) {
          copy = options[name];

          // Prevent Object.prototype pollution
          // Prevent never-ending loop
          if (name === "__proto__" || target === copy) {
            continue;
          }

          // Recurse if we're merging plain objects or arrays
          if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {
            src = target[name];

            // Ensure proper type for the source value
            if (copyIsArray && !Array.isArray(src)) {
              clone = [];
            } else if (!copyIsArray && !jQuery.isPlainObject(src)) {
              clone = {};
            } else {
              clone = src;
            }
            copyIsArray = false;

            // Never move original objects, clone them
            target[name] = jQuery.extend(deep, clone, copy);

            // Don't bring in undefined values
          } else if (copy !== undefined) {
            target[name] = copy;
          }
        }
      }
    }

    // Return the modified object
    return target;
  };
  jQuery.extend({
    // Unique for each copy of jQuery on the page
    expando: "jQuery" + (version + Math.random()).replace(/\D/g, ""),
    // Assume jQuery is ready without the ready module
    isReady: true,
    error: function error(msg) {
      throw new Error(msg);
    },
    noop: function noop() {},
    isPlainObject: function isPlainObject(obj) {
      var proto, Ctor;

      // Detect obvious negatives
      // Use toString instead of jQuery.type to catch host objects
      if (!obj || toString.call(obj) !== "[object Object]") {
        return false;
      }
      proto = getProto(obj);

      // Objects with no prototype (e.g., `Object.create( null )`) are plain
      if (!proto) {
        return true;
      }

      // Objects with prototype are plain iff they were constructed by a global Object function
      Ctor = hasOwn.call(proto, "constructor") && proto.constructor;
      return typeof Ctor === "function" && fnToString.call(Ctor) === ObjectFunctionString;
    },
    isEmptyObject: function isEmptyObject(obj) {
      var name;
      for (name in obj) {
        return false;
      }
      return true;
    },
    // Evaluates a script in a provided context; falls back to the global one
    // if not specified.
    globalEval: function globalEval(code, options, doc) {
      DOMEval(code, {
        nonce: options && options.nonce
      }, doc);
    },
    each: function each(obj, callback) {
      var length,
        i = 0;
      if (isArrayLike(obj)) {
        length = obj.length;
        for (; i < length; i++) {
          if (callback.call(obj[i], i, obj[i]) === false) {
            break;
          }
        }
      } else {
        for (i in obj) {
          if (callback.call(obj[i], i, obj[i]) === false) {
            break;
          }
        }
      }
      return obj;
    },
    // results is for internal usage only
    makeArray: function makeArray(arr, results) {
      var ret = results || [];
      if (arr != null) {
        if (isArrayLike(Object(arr))) {
          jQuery.merge(ret, typeof arr === "string" ? [arr] : arr);
        } else {
          push.call(ret, arr);
        }
      }
      return ret;
    },
    inArray: function inArray(elem, arr, i) {
      return arr == null ? -1 : indexOf.call(arr, elem, i);
    },
    // Support: Android <=4.0 only, PhantomJS 1 only
    // push.apply(_, arraylike) throws on ancient WebKit
    merge: function merge(first, second) {
      var len = +second.length,
        j = 0,
        i = first.length;
      for (; j < len; j++) {
        first[i++] = second[j];
      }
      first.length = i;
      return first;
    },
    grep: function grep(elems, callback, invert) {
      var callbackInverse,
        matches = [],
        i = 0,
        length = elems.length,
        callbackExpect = !invert;

      // Go through the array, only saving the items
      // that pass the validator function
      for (; i < length; i++) {
        callbackInverse = !callback(elems[i], i);
        if (callbackInverse !== callbackExpect) {
          matches.push(elems[i]);
        }
      }
      return matches;
    },
    // arg is for internal usage only
    map: function map(elems, callback, arg) {
      var length,
        value,
        i = 0,
        ret = [];

      // Go through the array, translating each of the items to their new values
      if (isArrayLike(elems)) {
        length = elems.length;
        for (; i < length; i++) {
          value = callback(elems[i], i, arg);
          if (value != null) {
            ret.push(value);
          }
        }

        // Go through every key on the object,
      } else {
        for (i in elems) {
          value = callback(elems[i], i, arg);
          if (value != null) {
            ret.push(value);
          }
        }
      }

      // Flatten any nested arrays
      return flat(ret);
    },
    // A global GUID counter for objects
    guid: 1,
    // jQuery.support is not used in Core but other projects attach their
    // properties to it so it needs to exist.
    support: support
  });
  if (typeof Symbol === "function") {
    jQuery.fn[Symbol.iterator] = arr[Symbol.iterator];
  }

  // Populate the class2type map
  jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function (_i, name) {
    class2type["[object " + name + "]"] = name.toLowerCase();
  });
  function isArrayLike(obj) {
    // Support: real iOS 8.2 only (not reproducible in simulator)
    // `in` check used to prevent JIT error (gh-2145)
    // hasOwn isn't used here due to false negatives
    // regarding Nodelist length in IE
    var length = !!obj && "length" in obj && obj.length,
      type = toType(obj);
    if (isFunction(obj) || isWindow(obj)) {
      return false;
    }
    return type === "array" || length === 0 || typeof length === "number" && length > 0 && length - 1 in obj;
  }
  var Sizzle =
  /*!
   * Sizzle CSS Selector Engine v2.3.6
   * https://sizzlejs.com/
   *
   * Copyright JS Foundation and other contributors
   * Released under the MIT license
   * https://js.foundation/
   *
   * Date: 2021-02-16
   */
  function (window) {
    var i,
      support,
      Expr,
      getText,
      isXML,
      tokenize,
      compile,
      select,
      outermostContext,
      sortInput,
      hasDuplicate,
      // Local document vars
      setDocument,
      document,
      docElem,
      documentIsHTML,
      rbuggyQSA,
      rbuggyMatches,
      matches,
      contains,
      // Instance-specific data
      expando = "sizzle" + 1 * new Date(),
      preferredDoc = window.document,
      dirruns = 0,
      done = 0,
      classCache = createCache(),
      tokenCache = createCache(),
      compilerCache = createCache(),
      nonnativeSelectorCache = createCache(),
      sortOrder = function sortOrder(a, b) {
        if (a === b) {
          hasDuplicate = true;
        }
        return 0;
      },
      // Instance methods
      hasOwn = {}.hasOwnProperty,
      arr = [],
      pop = arr.pop,
      pushNative = arr.push,
      push = arr.push,
      slice = arr.slice,
      // Use a stripped-down indexOf as it's faster than native
      // https://jsperf.com/thor-indexof-vs-for/5
      indexOf = function indexOf(list, elem) {
        var i = 0,
          len = list.length;
        for (; i < len; i++) {
          if (list[i] === elem) {
            return i;
          }
        }
        return -1;
      },
      booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|" + "ismap|loop|multiple|open|readonly|required|scoped",
      // Regular expressions

      // http://www.w3.org/TR/css3-selectors/#whitespace
      whitespace = "[\\x20\\t\\r\\n\\f]",
      // https://www.w3.org/TR/css-syntax-3/#ident-token-diagram
      identifier = "(?:\\\\[\\da-fA-F]{1,6}" + whitespace + "?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",
      // Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
      attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace +
      // Operator (capture 2)
      "*([*^$|!~]?=)" + whitespace +
      // "Attribute values must be CSS identifiers [capture 5]
      // or strings [capture 3 or capture 4]"
      "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace + "*\\]",
      pseudos = ":(" + identifier + ")(?:\\((" +
      // To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
      // 1. quoted (capture 3; capture 4 or capture 5)
      "('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
      // 2. simple (capture 6)
      "((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
      // 3. anything else (capture 2)
      ".*" + ")\\)|)",
      // Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
      rwhitespace = new RegExp(whitespace + "+", "g"),
      rtrim = new RegExp("^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g"),
      rcomma = new RegExp("^" + whitespace + "*," + whitespace + "*"),
      rcombinators = new RegExp("^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*"),
      rdescend = new RegExp(whitespace + "|>"),
      rpseudo = new RegExp(pseudos),
      ridentifier = new RegExp("^" + identifier + "$"),
      matchExpr = {
        "ID": new RegExp("^#(" + identifier + ")"),
        "CLASS": new RegExp("^\\.(" + identifier + ")"),
        "TAG": new RegExp("^(" + identifier + "|[*])"),
        "ATTR": new RegExp("^" + attributes),
        "PSEUDO": new RegExp("^" + pseudos),
        "CHILD": new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace + "*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace + "*(\\d+)|))" + whitespace + "*\\)|)", "i"),
        "bool": new RegExp("^(?:" + booleans + ")$", "i"),
        // For use in libraries implementing .is()
        // We use this for POS matching in `select`
        "needsContext": new RegExp("^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i")
      },
      rhtml = /HTML$/i,
      rinputs = /^(?:input|select|textarea|button)$/i,
      rheader = /^h\d$/i,
      rnative = /^[^{]+\{\s*\[native \w/,
      // Easily-parseable/retrievable ID or TAG or CLASS selectors
      rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
      rsibling = /[+~]/,
      // CSS escapes
      // http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
      runescape = new RegExp("\\\\[\\da-fA-F]{1,6}" + whitespace + "?|\\\\([^\\r\\n\\f])", "g"),
      funescape = function funescape(escape, nonHex) {
        var high = "0x" + escape.slice(1) - 0x10000;
        return nonHex ?
        // Strip the backslash prefix from a non-hex escape sequence
        nonHex :
        // Replace a hexadecimal escape sequence with the encoded Unicode code point
        // Support: IE <=11+
        // For values outside the Basic Multilingual Plane (BMP), manually construct a
        // surrogate pair
        high < 0 ? String.fromCharCode(high + 0x10000) : String.fromCharCode(high >> 10 | 0xD800, high & 0x3FF | 0xDC00);
      },
      // CSS string/identifier serialization
      // https://drafts.csswg.org/cssom/#common-serializing-idioms
      rcssescape = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
      fcssescape = function fcssescape(ch, asCodePoint) {
        if (asCodePoint) {
          // U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER
          if (ch === "\0") {
            return "\uFFFD";
          }

          // Control characters and (dependent upon position) numbers get escaped as code points
          return ch.slice(0, -1) + "\\" + ch.charCodeAt(ch.length - 1).toString(16) + " ";
        }

        // Other potentially-special ASCII characters get backslash-escaped
        return "\\" + ch;
      },
      // Used for iframes
      // See setDocument()
      // Removing the function wrapper causes a "Permission Denied"
      // error in IE
      unloadHandler = function unloadHandler() {
        setDocument();
      },
      inDisabledFieldset = addCombinator(function (elem) {
        return elem.disabled === true && elem.nodeName.toLowerCase() === "fieldset";
      }, {
        dir: "parentNode",
        next: "legend"
      });

    // Optimize for push.apply( _, NodeList )
    try {
      push.apply(arr = slice.call(preferredDoc.childNodes), preferredDoc.childNodes);

      // Support: Android<4.0
      // Detect silently failing push.apply
      // eslint-disable-next-line no-unused-expressions
      arr[preferredDoc.childNodes.length].nodeType;
    } catch (e) {
      push = {
        apply: arr.length ?
        // Leverage slice if possible
        function (target, els) {
          pushNative.apply(target, slice.call(els));
        } :
        // Support: IE<9
        // Otherwise append directly
        function (target, els) {
          var j = target.length,
            i = 0;

          // Can't trust NodeList.length
          while (target[j++] = els[i++]) {}
          target.length = j - 1;
        }
      };
    }
    function Sizzle(selector, context, results, seed) {
      var m,
        i,
        elem,
        nid,
        match,
        groups,
        newSelector,
        newContext = context && context.ownerDocument,
        // nodeType defaults to 9, since context defaults to document
        nodeType = context ? context.nodeType : 9;
      results = results || [];

      // Return early from calls with invalid selector or context
      if (typeof selector !== "string" || !selector || nodeType !== 1 && nodeType !== 9 && nodeType !== 11) {
        return results;
      }

      // Try to shortcut find operations (as opposed to filters) in HTML documents
      if (!seed) {
        setDocument(context);
        context = context || document;
        if (documentIsHTML) {
          // If the selector is sufficiently simple, try using a "get*By*" DOM method
          // (excepting DocumentFragment context, where the methods don't exist)
          if (nodeType !== 11 && (match = rquickExpr.exec(selector))) {
            // ID selector
            if (m = match[1]) {
              // Document context
              if (nodeType === 9) {
                if (elem = context.getElementById(m)) {
                  // Support: IE, Opera, Webkit
                  // TODO: identify versions
                  // getElementById can match elements by name instead of ID
                  if (elem.id === m) {
                    results.push(elem);
                    return results;
                  }
                } else {
                  return results;
                }

                // Element context
              } else {
                // Support: IE, Opera, Webkit
                // TODO: identify versions
                // getElementById can match elements by name instead of ID
                if (newContext && (elem = newContext.getElementById(m)) && contains(context, elem) && elem.id === m) {
                  results.push(elem);
                  return results;
                }
              }

              // Type selector
            } else if (match[2]) {
              push.apply(results, context.getElementsByTagName(selector));
              return results;

              // Class selector
            } else if ((m = match[3]) && support.getElementsByClassName && context.getElementsByClassName) {
              push.apply(results, context.getElementsByClassName(m));
              return results;
            }
          }

          // Take advantage of querySelectorAll
          if (support.qsa && !nonnativeSelectorCache[selector + " "] && (!rbuggyQSA || !rbuggyQSA.test(selector)) && (
          // Support: IE 8 only
          // Exclude object elements
          nodeType !== 1 || context.nodeName.toLowerCase() !== "object")) {
            newSelector = selector;
            newContext = context;

            // qSA considers elements outside a scoping root when evaluating child or
            // descendant combinators, which is not what we want.
            // In such cases, we work around the behavior by prefixing every selector in the
            // list with an ID selector referencing the scope context.
            // The technique has to be used as well when a leading combinator is used
            // as such selectors are not recognized by querySelectorAll.
            // Thanks to Andrew Dupont for this technique.
            if (nodeType === 1 && (rdescend.test(selector) || rcombinators.test(selector))) {
              // Expand context for sibling selectors
              newContext = rsibling.test(selector) && testContext(context.parentNode) || context;

              // We can use :scope instead of the ID hack if the browser
              // supports it & if we're not changing the context.
              if (newContext !== context || !support.scope) {
                // Capture the context ID, setting it first if necessary
                if (nid = context.getAttribute("id")) {
                  nid = nid.replace(rcssescape, fcssescape);
                } else {
                  context.setAttribute("id", nid = expando);
                }
              }

              // Prefix every selector in the list
              groups = tokenize(selector);
              i = groups.length;
              while (i--) {
                groups[i] = (nid ? "#" + nid : ":scope") + " " + toSelector(groups[i]);
              }
              newSelector = groups.join(",");
            }
            try {
              push.apply(results, newContext.querySelectorAll(newSelector));
              return results;
            } catch (qsaError) {
              nonnativeSelectorCache(selector, true);
            } finally {
              if (nid === expando) {
                context.removeAttribute("id");
              }
            }
          }
        }
      }

      // All others
      return select(selector.replace(rtrim, "$1"), context, results, seed);
    }

    /**
     * Create key-value caches of limited size
     * @returns {function(string, object)} Returns the Object data after storing it on itself with
     *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
     *	deleting the oldest entry
     */
    function createCache() {
      var keys = [];
      function cache(key, value) {
        // Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
        if (keys.push(key + " ") > Expr.cacheLength) {
          // Only keep the most recent entries
          delete cache[keys.shift()];
        }
        return cache[key + " "] = value;
      }
      return cache;
    }

    /**
     * Mark a function for special use by Sizzle
     * @param {Function} fn The function to mark
     */
    function markFunction(fn) {
      fn[expando] = true;
      return fn;
    }

    /**
     * Support testing using an element
     * @param {Function} fn Passed the created element and returns a boolean result
     */
    function assert(fn) {
      var el = document.createElement("fieldset");
      try {
        return !!fn(el);
      } catch (e) {
        return false;
      } finally {
        // Remove from its parent by default
        if (el.parentNode) {
          el.parentNode.removeChild(el);
        }

        // release memory in IE
        el = null;
      }
    }

    /**
     * Adds the same handler for all of the specified attrs
     * @param {String} attrs Pipe-separated list of attributes
     * @param {Function} handler The method that will be applied
     */
    function addHandle(attrs, handler) {
      var arr = attrs.split("|"),
        i = arr.length;
      while (i--) {
        Expr.attrHandle[arr[i]] = handler;
      }
    }

    /**
     * Checks document order of two siblings
     * @param {Element} a
     * @param {Element} b
     * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
     */
    function siblingCheck(a, b) {
      var cur = b && a,
        diff = cur && a.nodeType === 1 && b.nodeType === 1 && a.sourceIndex - b.sourceIndex;

      // Use IE sourceIndex if available on both nodes
      if (diff) {
        return diff;
      }

      // Check if b follows a
      if (cur) {
        while (cur = cur.nextSibling) {
          if (cur === b) {
            return -1;
          }
        }
      }
      return a ? 1 : -1;
    }

    /**
     * Returns a function to use in pseudos for input types
     * @param {String} type
     */
    function createInputPseudo(type) {
      return function (elem) {
        var name = elem.nodeName.toLowerCase();
        return name === "input" && elem.type === type;
      };
    }

    /**
     * Returns a function to use in pseudos for buttons
     * @param {String} type
     */
    function createButtonPseudo(type) {
      return function (elem) {
        var name = elem.nodeName.toLowerCase();
        return (name === "input" || name === "button") && elem.type === type;
      };
    }

    /**
     * Returns a function to use in pseudos for :enabled/:disabled
     * @param {Boolean} disabled true for :disabled; false for :enabled
     */
    function createDisabledPseudo(disabled) {
      // Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable
      return function (elem) {
        // Only certain elements can match :enabled or :disabled
        // https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled
        // https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled
        if ("form" in elem) {
          // Check for inherited disabledness on relevant non-disabled elements:
          // * listed form-associated elements in a disabled fieldset
          //   https://html.spec.whatwg.org/multipage/forms.html#category-listed
          //   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled
          // * option elements in a disabled optgroup
          //   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled
          // All such elements have a "form" property.
          if (elem.parentNode && elem.disabled === false) {
            // Option elements defer to a parent optgroup if present
            if ("label" in elem) {
              if ("label" in elem.parentNode) {
                return elem.parentNode.disabled === disabled;
              } else {
                return elem.disabled === disabled;
              }
            }

            // Support: IE 6 - 11
            // Use the isDisabled shortcut property to check for disabled fieldset ancestors
            return elem.isDisabled === disabled ||
            // Where there is no isDisabled, check manually
            /* jshint -W018 */
            elem.isDisabled !== !disabled && inDisabledFieldset(elem) === disabled;
          }
          return elem.disabled === disabled;

          // Try to winnow out elements that can't be disabled before trusting the disabled property.
          // Some victims get caught in our net (label, legend, menu, track), but it shouldn't
          // even exist on them, let alone have a boolean value.
        } else if ("label" in elem) {
          return elem.disabled === disabled;
        }

        // Remaining elements are neither :enabled nor :disabled
        return false;
      };
    }

    /**
     * Returns a function to use in pseudos for positionals
     * @param {Function} fn
     */
    function createPositionalPseudo(fn) {
      return markFunction(function (argument) {
        argument = +argument;
        return markFunction(function (seed, matches) {
          var j,
            matchIndexes = fn([], seed.length, argument),
            i = matchIndexes.length;

          // Match elements found at the specified indexes
          while (i--) {
            if (seed[j = matchIndexes[i]]) {
              seed[j] = !(matches[j] = seed[j]);
            }
          }
        });
      });
    }

    /**
     * Checks a node for validity as a Sizzle context
     * @param {Element|Object=} context
     * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
     */
    function testContext(context) {
      return context && typeof context.getElementsByTagName !== "undefined" && context;
    }

    // Expose support vars for convenience
    support = Sizzle.support = {};

    /**
     * Detects XML nodes
     * @param {Element|Object} elem An element or a document
     * @returns {Boolean} True iff elem is a non-HTML XML node
     */
    isXML = Sizzle.isXML = function (elem) {
      var namespace = elem && elem.namespaceURI,
        docElem = elem && (elem.ownerDocument || elem).documentElement;

      // Support: IE <=8
      // Assume HTML when documentElement doesn't yet exist, such as inside loading iframes
      // https://bugs.jquery.com/ticket/4833
      return !rhtml.test(namespace || docElem && docElem.nodeName || "HTML");
    };

    /**
     * Sets document-related variables once based on the current document
     * @param {Element|Object} [doc] An element or document object to use to set the document
     * @returns {Object} Returns the current document
     */
    setDocument = Sizzle.setDocument = function (node) {
      var hasCompare,
        subWindow,
        doc = node ? node.ownerDocument || node : preferredDoc;

      // Return early if doc is invalid or already selected
      // Support: IE 11+, Edge 17 - 18+
      // IE/Edge sometimes throw a "Permission denied" error when strict-comparing
      // two documents; shallow comparisons work.
      // eslint-disable-next-line eqeqeq
      if (doc == document || doc.nodeType !== 9 || !doc.documentElement) {
        return document;
      }

      // Update global variables
      document = doc;
      docElem = document.documentElement;
      documentIsHTML = !isXML(document);

      // Support: IE 9 - 11+, Edge 12 - 18+
      // Accessing iframe documents after unload throws "permission denied" errors (jQuery #13936)
      // Support: IE 11+, Edge 17 - 18+
      // IE/Edge sometimes throw a "Permission denied" error when strict-comparing
      // two documents; shallow comparisons work.
      // eslint-disable-next-line eqeqeq
      if (preferredDoc != document && (subWindow = document.defaultView) && subWindow.top !== subWindow) {
        // Support: IE 11, Edge
        if (subWindow.addEventListener) {
          subWindow.addEventListener("unload", unloadHandler, false);

          // Support: IE 9 - 10 only
        } else if (subWindow.attachEvent) {
          subWindow.attachEvent("onunload", unloadHandler);
        }
      }

      // Support: IE 8 - 11+, Edge 12 - 18+, Chrome <=16 - 25 only, Firefox <=3.6 - 31 only,
      // Safari 4 - 5 only, Opera <=11.6 - 12.x only
      // IE/Edge & older browsers don't support the :scope pseudo-class.
      // Support: Safari 6.0 only
      // Safari 6.0 supports :scope but it's an alias of :root there.
      support.scope = assert(function (el) {
        docElem.appendChild(el).appendChild(document.createElement("div"));
        return typeof el.querySelectorAll !== "undefined" && !el.querySelectorAll(":scope fieldset div").length;
      });

      /* Attributes
      ---------------------------------------------------------------------- */

      // Support: IE<8
      // Verify that getAttribute really returns attributes and not properties
      // (excepting IE8 booleans)
      support.attributes = assert(function (el) {
        el.className = "i";
        return !el.getAttribute("className");
      });

      /* getElement(s)By*
      ---------------------------------------------------------------------- */

      // Check if getElementsByTagName("*") returns only elements
      support.getElementsByTagName = assert(function (el) {
        el.appendChild(document.createComment(""));
        return !el.getElementsByTagName("*").length;
      });

      // Support: IE<9
      support.getElementsByClassName = rnative.test(document.getElementsByClassName);

      // Support: IE<10
      // Check if getElementById returns elements by name
      // The broken getElementById methods don't pick up programmatically-set names,
      // so use a roundabout getElementsByName test
      support.getById = assert(function (el) {
        docElem.appendChild(el).id = expando;
        return !document.getElementsByName || !document.getElementsByName(expando).length;
      });

      // ID filter and find
      if (support.getById) {
        Expr.filter["ID"] = function (id) {
          var attrId = id.replace(runescape, funescape);
          return function (elem) {
            return elem.getAttribute("id") === attrId;
          };
        };
        Expr.find["ID"] = function (id, context) {
          if (typeof context.getElementById !== "undefined" && documentIsHTML) {
            var elem = context.getElementById(id);
            return elem ? [elem] : [];
          }
        };
      } else {
        Expr.filter["ID"] = function (id) {
          var attrId = id.replace(runescape, funescape);
          return function (elem) {
            var node = typeof elem.getAttributeNode !== "undefined" && elem.getAttributeNode("id");
            return node && node.value === attrId;
          };
        };

        // Support: IE 6 - 7 only
        // getElementById is not reliable as a find shortcut
        Expr.find["ID"] = function (id, context) {
          if (typeof context.getElementById !== "undefined" && documentIsHTML) {
            var node,
              i,
              elems,
              elem = context.getElementById(id);
            if (elem) {
              // Verify the id attribute
              node = elem.getAttributeNode("id");
              if (node && node.value === id) {
                return [elem];
              }

              // Fall back on getElementsByName
              elems = context.getElementsByName(id);
              i = 0;
              while (elem = elems[i++]) {
                node = elem.getAttributeNode("id");
                if (node && node.value === id) {
                  return [elem];
                }
              }
            }
            return [];
          }
        };
      }

      // Tag
      Expr.find["TAG"] = support.getElementsByTagName ? function (tag, context) {
        if (typeof context.getElementsByTagName !== "undefined") {
          return context.getElementsByTagName(tag);

          // DocumentFragment nodes don't have gEBTN
        } else if (support.qsa) {
          return context.querySelectorAll(tag);
        }
      } : function (tag, context) {
        var elem,
          tmp = [],
          i = 0,
          // By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
          results = context.getElementsByTagName(tag);

        // Filter out possible comments
        if (tag === "*") {
          while (elem = results[i++]) {
            if (elem.nodeType === 1) {
              tmp.push(elem);
            }
          }
          return tmp;
        }
        return results;
      };

      // Class
      Expr.find["CLASS"] = support.getElementsByClassName && function (className, context) {
        if (typeof context.getElementsByClassName !== "undefined" && documentIsHTML) {
          return context.getElementsByClassName(className);
        }
      };

      /* QSA/matchesSelector
      ---------------------------------------------------------------------- */

      // QSA and matchesSelector support

      // matchesSelector(:active) reports false when true (IE9/Opera 11.5)
      rbuggyMatches = [];

      // qSa(:focus) reports false when true (Chrome 21)
      // We allow this because of a bug in IE8/9 that throws an error
      // whenever `document.activeElement` is accessed on an iframe
      // So, we allow :focus to pass through QSA all the time to avoid the IE error
      // See https://bugs.jquery.com/ticket/13378
      rbuggyQSA = [];
      if (support.qsa = rnative.test(document.querySelectorAll)) {
        // Build QSA regex
        // Regex strategy adopted from Diego Perini
        assert(function (el) {
          var input;

          // Select is set to empty string on purpose
          // This is to test IE's treatment of not explicitly
          // setting a boolean content attribute,
          // since its presence should be enough
          // https://bugs.jquery.com/ticket/12359
          docElem.appendChild(el).innerHTML = "<a id='" + expando + "'></a>" + "<select id='" + expando + "-\r\\' msallowcapture=''>" + "<option selected=''></option></select>";

          // Support: IE8, Opera 11-12.16
          // Nothing should be selected when empty strings follow ^= or $= or *=
          // The test attribute must be unknown in Opera but "safe" for WinRT
          // https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
          if (el.querySelectorAll("[msallowcapture^='']").length) {
            rbuggyQSA.push("[*^$]=" + whitespace + "*(?:''|\"\")");
          }

          // Support: IE8
          // Boolean attributes and "value" are not treated correctly
          if (!el.querySelectorAll("[selected]").length) {
            rbuggyQSA.push("\\[" + whitespace + "*(?:value|" + booleans + ")");
          }

          // Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+
          if (!el.querySelectorAll("[id~=" + expando + "-]").length) {
            rbuggyQSA.push("~=");
          }

          // Support: IE 11+, Edge 15 - 18+
          // IE 11/Edge don't find elements on a `[name='']` query in some cases.
          // Adding a temporary attribute to the document before the selection works
          // around the issue.
          // Interestingly, IE 10 & older don't seem to have the issue.
          input = document.createElement("input");
          input.setAttribute("name", "");
          el.appendChild(input);
          if (!el.querySelectorAll("[name='']").length) {
            rbuggyQSA.push("\\[" + whitespace + "*name" + whitespace + "*=" + whitespace + "*(?:''|\"\")");
          }

          // Webkit/Opera - :checked should return selected option elements
          // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
          // IE8 throws error here and will not see later tests
          if (!el.querySelectorAll(":checked").length) {
            rbuggyQSA.push(":checked");
          }

          // Support: Safari 8+, iOS 8+
          // https://bugs.webkit.org/show_bug.cgi?id=136851
          // In-page `selector#id sibling-combinator selector` fails
          if (!el.querySelectorAll("a#" + expando + "+*").length) {
            rbuggyQSA.push(".#.+[+~]");
          }

          // Support: Firefox <=3.6 - 5 only
          // Old Firefox doesn't throw on a badly-escaped identifier.
          el.querySelectorAll("\\\f");
          rbuggyQSA.push("[\\r\\n\\f]");
        });
        assert(function (el) {
          el.innerHTML = "<a href='' disabled='disabled'></a>" + "<select disabled='disabled'><option/></select>";

          // Support: Windows 8 Native Apps
          // The type and name attributes are restricted during .innerHTML assignment
          var input = document.createElement("input");
          input.setAttribute("type", "hidden");
          el.appendChild(input).setAttribute("name", "D");

          // Support: IE8
          // Enforce case-sensitivity of name attribute
          if (el.querySelectorAll("[name=d]").length) {
            rbuggyQSA.push("name" + whitespace + "*[*^$|!~]?=");
          }

          // FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
          // IE8 throws error here and will not see later tests
          if (el.querySelectorAll(":enabled").length !== 2) {
            rbuggyQSA.push(":enabled", ":disabled");
          }

          // Support: IE9-11+
          // IE's :disabled selector does not pick up the children of disabled fieldsets
          docElem.appendChild(el).disabled = true;
          if (el.querySelectorAll(":disabled").length !== 2) {
            rbuggyQSA.push(":enabled", ":disabled");
          }

          // Support: Opera 10 - 11 only
          // Opera 10-11 does not throw on post-comma invalid pseudos
          el.querySelectorAll("*,:x");
          rbuggyQSA.push(",.*:");
        });
      }
      if (support.matchesSelector = rnative.test(matches = docElem.matches || docElem.webkitMatchesSelector || docElem.mozMatchesSelector || docElem.oMatchesSelector || docElem.msMatchesSelector)) {
        assert(function (el) {
          // Check to see if it's possible to do matchesSelector
          // on a disconnected node (IE 9)
          support.disconnectedMatch = matches.call(el, "*");

          // This should fail with an exception
          // Gecko does not error, returns false instead
          matches.call(el, "[s!='']:x");
          rbuggyMatches.push("!=", pseudos);
        });
      }
      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join("|"));
      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join("|"));

      /* Contains
      ---------------------------------------------------------------------- */
      hasCompare = rnative.test(docElem.compareDocumentPosition);

      // Element contains another
      // Purposefully self-exclusive
      // As in, an element does not contain itself
      contains = hasCompare || rnative.test(docElem.contains) ? function (a, b) {
        var adown = a.nodeType === 9 ? a.documentElement : a,
          bup = b && b.parentNode;
        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));
      } : function (a, b) {
        if (b) {
          while (b = b.parentNode) {
            if (b === a) {
              return true;
            }
          }
        }
        return false;
      };

      /* Sorting
      ---------------------------------------------------------------------- */

      // Document order sorting
      sortOrder = hasCompare ? function (a, b) {
        // Flag for duplicate removal
        if (a === b) {
          hasDuplicate = true;
          return 0;
        }

        // Sort on method existence if only one input has compareDocumentPosition
        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
        if (compare) {
          return compare;
        }

        // Calculate position if both inputs belong to the same document
        // Support: IE 11+, Edge 17 - 18+
        // IE/Edge sometimes throw a "Permission denied" error when strict-comparing
        // two documents; shallow comparisons work.
        // eslint-disable-next-line eqeqeq
        compare = (a.ownerDocument || a) == (b.ownerDocument || b) ? a.compareDocumentPosition(b) :
        // Otherwise we know they are disconnected
        1;

        // Disconnected nodes
        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {
          // Choose the first element that is related to our preferred document
          // Support: IE 11+, Edge 17 - 18+
          // IE/Edge sometimes throw a "Permission denied" error when strict-comparing
          // two documents; shallow comparisons work.
          // eslint-disable-next-line eqeqeq
          if (a == document || a.ownerDocument == preferredDoc && contains(preferredDoc, a)) {
            return -1;
          }

          // Support: IE 11+, Edge 17 - 18+
          // IE/Edge sometimes throw a "Permission denied" error when strict-comparing
          // two documents; shallow comparisons work.
          // eslint-disable-next-line eqeqeq
          if (b == document || b.ownerDocument == preferredDoc && contains(preferredDoc, b)) {
            return 1;
          }

          // Maintain original order
          return sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0;
        }
        return compare & 4 ? -1 : 1;
      } : function (a, b) {
        // Exit early if the nodes are identical
        if (a === b) {
          hasDuplicate = true;
          return 0;
        }
        var cur,
          i = 0,
          aup = a.parentNode,
          bup = b.parentNode,
          ap = [a],
          bp = [b];

        // Parentless nodes are either documents or disconnected
        if (!aup || !bup) {
          // Support: IE 11+, Edge 17 - 18+
          // IE/Edge sometimes throw a "Permission denied" error when strict-comparing
          // two documents; shallow comparisons work.
          /* eslint-disable eqeqeq */
          return a == document ? -1 : b == document ? 1 : /* eslint-enable eqeqeq */
          aup ? -1 : bup ? 1 : sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0;

          // If the nodes are siblings, we can do a quick check
        } else if (aup === bup) {
          return siblingCheck(a, b);
        }

        // Otherwise we need full lists of their ancestors for comparison
        cur = a;
        while (cur = cur.parentNode) {
          ap.unshift(cur);
        }
        cur = b;
        while (cur = cur.parentNode) {
          bp.unshift(cur);
        }

        // Walk down the tree looking for a discrepancy
        while (ap[i] === bp[i]) {
          i++;
        }
        return i ?
        // Do a sibling check if the nodes have a common ancestor
        siblingCheck(ap[i], bp[i]) :
        // Otherwise nodes in our document sort first
        // Support: IE 11+, Edge 17 - 18+
        // IE/Edge sometimes throw a "Permission denied" error when strict-comparing
        // two documents; shallow comparisons work.
        /* eslint-disable eqeqeq */
        ap[i] == preferredDoc ? -1 : bp[i] == preferredDoc ? 1 : /* eslint-enable eqeqeq */
        0;
      };
      return document;
    };
    Sizzle.matches = function (expr, elements) {
      return Sizzle(expr, null, null, elements);
    };
    Sizzle.matchesSelector = function (elem, expr) {
      setDocument(elem);
      if (support.matchesSelector && documentIsHTML && !nonnativeSelectorCache[expr + " "] && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {
        try {
          var ret = matches.call(elem, expr);

          // IE 9's matchesSelector returns false on disconnected nodes
          if (ret || support.disconnectedMatch ||
          // As well, disconnected nodes are said to be in a document
          // fragment in IE 9
          elem.document && elem.document.nodeType !== 11) {
            return ret;
          }
        } catch (e) {
          nonnativeSelectorCache(expr, true);
        }
      }
      return Sizzle(expr, document, null, [elem]).length > 0;
    };
    Sizzle.contains = function (context, elem) {
      // Set document vars if needed
      // Support: IE 11+, Edge 17 - 18+
      // IE/Edge sometimes throw a "Permission denied" error when strict-comparing
      // two documents; shallow comparisons work.
      // eslint-disable-next-line eqeqeq
      if ((context.ownerDocument || context) != document) {
        setDocument(context);
      }
      return contains(context, elem);
    };
    Sizzle.attr = function (elem, name) {
      // Set document vars if needed
      // Support: IE 11+, Edge 17 - 18+
      // IE/Edge sometimes throw a "Permission denied" error when strict-comparing
      // two documents; shallow comparisons work.
      // eslint-disable-next-line eqeqeq
      if ((elem.ownerDocument || elem) != document) {
        setDocument(elem);
      }
      var fn = Expr.attrHandle[name.toLowerCase()],
        // Don't get fooled by Object.prototype properties (jQuery #13807)
        val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;
      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;
    };
    Sizzle.escape = function (sel) {
      return (sel + "").replace(rcssescape, fcssescape);
    };
    Sizzle.error = function (msg) {
      throw new Error("Syntax error, unrecognized expression: " + msg);
    };

    /**
     * Document sorting and removing duplicates
     * @param {ArrayLike} results
     */
    Sizzle.uniqueSort = function (results) {
      var elem,
        duplicates = [],
        j = 0,
        i = 0;

      // Unless we *know* we can detect duplicates, assume their presence
      hasDuplicate = !support.detectDuplicates;
      sortInput = !support.sortStable && results.slice(0);
      results.sort(sortOrder);
      if (hasDuplicate) {
        while (elem = results[i++]) {
          if (elem === results[i]) {
            j = duplicates.push(i);
          }
        }
        while (j--) {
          results.splice(duplicates[j], 1);
        }
      }

      // Clear input after sorting to release objects
      // See https://github.com/jquery/sizzle/pull/225
      sortInput = null;
      return results;
    };

    /**
     * Utility function for retrieving the text value of an array of DOM nodes
     * @param {Array|Element} elem
     */
    getText = Sizzle.getText = function (elem) {
      var node,
        ret = "",
        i = 0,
        nodeType = elem.nodeType;
      if (!nodeType) {
        // If no nodeType, this is expected to be an array
        while (node = elem[i++]) {
          // Do not traverse comment nodes
          ret += getText(node);
        }
      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {
        // Use textContent for elements
        // innerText usage removed for consistency of new lines (jQuery #11153)
        if (typeof elem.textContent === "string") {
          return elem.textContent;
        } else {
          // Traverse its children
          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {
            ret += getText(elem);
          }
        }
      } else if (nodeType === 3 || nodeType === 4) {
        return elem.nodeValue;
      }

      // Do not include comment or processing instruction nodes

      return ret;
    };
    Expr = Sizzle.selectors = {
      // Can be adjusted by the user
      cacheLength: 50,
      createPseudo: markFunction,
      match: matchExpr,
      attrHandle: {},
      find: {},
      relative: {
        ">": {
          dir: "parentNode",
          first: true
        },
        " ": {
          dir: "parentNode"
        },
        "+": {
          dir: "previousSibling",
          first: true
        },
        "~": {
          dir: "previousSibling"
        }
      },
      preFilter: {
        "ATTR": function ATTR(match) {
          match[1] = match[1].replace(runescape, funescape);

          // Move the given value to match[3] whether quoted or unquoted
          match[3] = (match[3] || match[4] || match[5] || "").replace(runescape, funescape);
          if (match[2] === "~=") {
            match[3] = " " + match[3] + " ";
          }
          return match.slice(0, 4);
        },
        "CHILD": function CHILD(match) {
          /* matches from matchExpr["CHILD"]
          	1 type (only|nth|...)
          	2 what (child|of-type)
          	3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
          	4 xn-component of xn+y argument ([+-]?\d*n|)
          	5 sign of xn-component
          	6 x of xn-component
          	7 sign of y-component
          	8 y of y-component
          */
          match[1] = match[1].toLowerCase();
          if (match[1].slice(0, 3) === "nth") {
            // nth-* requires argument
            if (!match[3]) {
              Sizzle.error(match[0]);
            }

            // numeric x and y parameters for Expr.filter.CHILD
            // remember that false/true cast respectively to 0/1
            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === "even" || match[3] === "odd"));
            match[5] = +(match[7] + match[8] || match[3] === "odd");

            // other types prohibit arguments
          } else if (match[3]) {
            Sizzle.error(match[0]);
          }
          return match;
        },
        "PSEUDO": function PSEUDO(match) {
          var excess,
            unquoted = !match[6] && match[2];
          if (matchExpr["CHILD"].test(match[0])) {
            return null;
          }

          // Accept quoted arguments as-is
          if (match[3]) {
            match[2] = match[4] || match[5] || "";

            // Strip excess characters from unquoted arguments
          } else if (unquoted && rpseudo.test(unquoted) && (
          // Get excess from tokenize (recursively)
          excess = tokenize(unquoted, true)) && (
          // advance to the next closing parenthesis
          excess = unquoted.indexOf(")", unquoted.length - excess) - unquoted.length)) {
            // excess is a negative index
            match[0] = match[0].slice(0, excess);
            match[2] = unquoted.slice(0, excess);
          }

          // Return only captures needed by the pseudo filter method (type and argument)
          return match.slice(0, 3);
        }
      },
      filter: {
        "TAG": function TAG(nodeNameSelector) {
          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();
          return nodeNameSelector === "*" ? function () {
            return true;
          } : function (elem) {
            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
          };
        },
        "CLASS": function CLASS(className) {
          var pattern = classCache[className + " "];
          return pattern || (pattern = new RegExp("(^|" + whitespace + ")" + className + "(" + whitespace + "|$)")) && classCache(className, function (elem) {
            return pattern.test(typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "");
          });
        },
        "ATTR": function ATTR(name, operator, check) {
          return function (elem) {
            var result = Sizzle.attr(elem, name);
            if (result == null) {
              return operator === "!=";
            }
            if (!operator) {
              return true;
            }
            result += "";

            /* eslint-disable max-len */

            return operator === "=" ? result === check : operator === "!=" ? result !== check : operator === "^=" ? check && result.indexOf(check) === 0 : operator === "*=" ? check && result.indexOf(check) > -1 : operator === "$=" ? check && result.slice(-check.length) === check : operator === "~=" ? (" " + result.replace(rwhitespace, " ") + " ").indexOf(check) > -1 : operator === "|=" ? result === check || result.slice(0, check.length + 1) === check + "-" : false;
            /* eslint-enable max-len */
          };
        },

        "CHILD": function CHILD(type, what, _argument, first, last) {
          var simple = type.slice(0, 3) !== "nth",
            forward = type.slice(-4) !== "last",
            ofType = what === "of-type";
          return first === 1 && last === 0 ?
          // Shortcut for :nth-*(n)
          function (elem) {
            return !!elem.parentNode;
          } : function (elem, _context, xml) {
            var cache,
              uniqueCache,
              outerCache,
              node,
              nodeIndex,
              start,
              dir = simple !== forward ? "nextSibling" : "previousSibling",
              parent = elem.parentNode,
              name = ofType && elem.nodeName.toLowerCase(),
              useCache = !xml && !ofType,
              diff = false;
            if (parent) {
              // :(first|last|only)-(child|of-type)
              if (simple) {
                while (dir) {
                  node = elem;
                  while (node = node[dir]) {
                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {
                      return false;
                    }
                  }

                  // Reverse direction for :only-* (if we haven't yet done so)
                  start = dir = type === "only" && !start && "nextSibling";
                }
                return true;
              }
              start = [forward ? parent.firstChild : parent.lastChild];

              // non-xml :nth-child(...) stores cache data on `parent`
              if (forward && useCache) {
                // Seek `elem` from a previously-cached index

                // ...in a gzip-friendly way
                node = parent;
                outerCache = node[expando] || (node[expando] = {});

                // Support: IE <9 only
                // Defend against cloned attroperties (jQuery gh-1709)
                uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {});
                cache = uniqueCache[type] || [];
                nodeIndex = cache[0] === dirruns && cache[1];
                diff = nodeIndex && cache[2];
                node = nodeIndex && parent.childNodes[nodeIndex];
                while (node = ++nodeIndex && node && node[dir] || (
                // Fallback to seeking `elem` from the start
                diff = nodeIndex = 0) || start.pop()) {
                  // When found, cache indexes on `parent` and break
                  if (node.nodeType === 1 && ++diff && node === elem) {
                    uniqueCache[type] = [dirruns, nodeIndex, diff];
                    break;
                  }
                }
              } else {
                // Use previously-cached element index if available
                if (useCache) {
                  // ...in a gzip-friendly way
                  node = elem;
                  outerCache = node[expando] || (node[expando] = {});

                  // Support: IE <9 only
                  // Defend against cloned attroperties (jQuery gh-1709)
                  uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {});
                  cache = uniqueCache[type] || [];
                  nodeIndex = cache[0] === dirruns && cache[1];
                  diff = nodeIndex;
                }

                // xml :nth-child(...)
                // or :nth-last-child(...) or :nth(-last)?-of-type(...)
                if (diff === false) {
                  // Use the same loop as above to seek `elem` from the start
                  while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {
                    if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {
                      // Cache the index of each encountered element
                      if (useCache) {
                        outerCache = node[expando] || (node[expando] = {});

                        // Support: IE <9 only
                        // Defend against cloned attroperties (jQuery gh-1709)
                        uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {});
                        uniqueCache[type] = [dirruns, diff];
                      }
                      if (node === elem) {
                        break;
                      }
                    }
                  }
                }
              }

              // Incorporate the offset, then check against cycle size
              diff -= last;
              return diff === first || diff % first === 0 && diff / first >= 0;
            }
          };
        },
        "PSEUDO": function PSEUDO(pseudo, argument) {
          // pseudo-class names are case-insensitive
          // http://www.w3.org/TR/selectors/#pseudo-classes
          // Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
          // Remember that setFilters inherits from pseudos
          var args,
            fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error("unsupported pseudo: " + pseudo);

          // The user may use createPseudo to indicate that
          // arguments are needed to create the filter function
          // just as Sizzle does
          if (fn[expando]) {
            return fn(argument);
          }

          // But maintain support for old signatures
          if (fn.length > 1) {
            args = [pseudo, pseudo, "", argument];
            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {
              var idx,
                matched = fn(seed, argument),
                i = matched.length;
              while (i--) {
                idx = indexOf(seed, matched[i]);
                seed[idx] = !(matches[idx] = matched[i]);
              }
            }) : function (elem) {
              return fn(elem, 0, args);
            };
          }
          return fn;
        }
      },
      pseudos: {
        // Potentially complex pseudos
        "not": markFunction(function (selector) {
          // Trim the selector passed to compile
          // to avoid treating leading and trailing
          // spaces as combinators
          var input = [],
            results = [],
            matcher = compile(selector.replace(rtrim, "$1"));
          return matcher[expando] ? markFunction(function (seed, matches, _context, xml) {
            var elem,
              unmatched = matcher(seed, null, xml, []),
              i = seed.length;

            // Match elements unmatched by `matcher`
            while (i--) {
              if (elem = unmatched[i]) {
                seed[i] = !(matches[i] = elem);
              }
            }
          }) : function (elem, _context, xml) {
            input[0] = elem;
            matcher(input, null, xml, results);

            // Don't keep the element (issue #299)
            input[0] = null;
            return !results.pop();
          };
        }),
        "has": markFunction(function (selector) {
          return function (elem) {
            return Sizzle(selector, elem).length > 0;
          };
        }),
        "contains": markFunction(function (text) {
          text = text.replace(runescape, funescape);
          return function (elem) {
            return (elem.textContent || getText(elem)).indexOf(text) > -1;
          };
        }),
        // "Whether an element is represented by a :lang() selector
        // is based solely on the element's language value
        // being equal to the identifier C,
        // or beginning with the identifier C immediately followed by "-".
        // The matching of C against the element's language value is performed case-insensitively.
        // The identifier C does not have to be a valid language name."
        // http://www.w3.org/TR/selectors/#lang-pseudo
        "lang": markFunction(function (lang) {
          // lang value must be a valid identifier
          if (!ridentifier.test(lang || "")) {
            Sizzle.error("unsupported lang: " + lang);
          }
          lang = lang.replace(runescape, funescape).toLowerCase();
          return function (elem) {
            var elemLang;
            do {
              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute("xml:lang") || elem.getAttribute("lang")) {
                elemLang = elemLang.toLowerCase();
                return elemLang === lang || elemLang.indexOf(lang + "-") === 0;
              }
            } while ((elem = elem.parentNode) && elem.nodeType === 1);
            return false;
          };
        }),
        // Miscellaneous
        "target": function target(elem) {
          var hash = window.location && window.location.hash;
          return hash && hash.slice(1) === elem.id;
        },
        "root": function root(elem) {
          return elem === docElem;
        },
        "focus": function focus(elem) {
          return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
        },
        // Boolean properties
        "enabled": createDisabledPseudo(false),
        "disabled": createDisabledPseudo(true),
        "checked": function checked(elem) {
          // In CSS3, :checked should return both checked and selected elements
          // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
          var nodeName = elem.nodeName.toLowerCase();
          return nodeName === "input" && !!elem.checked || nodeName === "option" && !!elem.selected;
        },
        "selected": function selected(elem) {
          // Accessing this property makes selected-by-default
          // options in Safari work properly
          if (elem.parentNode) {
            // eslint-disable-next-line no-unused-expressions
            elem.parentNode.selectedIndex;
          }
          return elem.selected === true;
        },
        // Contents
        "empty": function empty(elem) {
          // http://www.w3.org/TR/selectors/#empty-pseudo
          // :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
          //   but not by others (comment: 8; processing instruction: 7; etc.)
          // nodeType < 6 works because attributes (2) do not appear as children
          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {
            if (elem.nodeType < 6) {
              return false;
            }
          }
          return true;
        },
        "parent": function parent(elem) {
          return !Expr.pseudos["empty"](elem);
        },
        // Element/input types
        "header": function header(elem) {
          return rheader.test(elem.nodeName);
        },
        "input": function input(elem) {
          return rinputs.test(elem.nodeName);
        },
        "button": function button(elem) {
          var name = elem.nodeName.toLowerCase();
          return name === "input" && elem.type === "button" || name === "button";
        },
        "text": function text(elem) {
          var attr;
          return elem.nodeName.toLowerCase() === "input" && elem.type === "text" && (
          // Support: IE<8
          // New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
          (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text");
        },
        // Position-in-collection
        "first": createPositionalPseudo(function () {
          return [0];
        }),
        "last": createPositionalPseudo(function (_matchIndexes, length) {
          return [length - 1];
        }),
        "eq": createPositionalPseudo(function (_matchIndexes, length, argument) {
          return [argument < 0 ? argument + length : argument];
        }),
        "even": createPositionalPseudo(function (matchIndexes, length) {
          var i = 0;
          for (; i < length; i += 2) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        }),
        "odd": createPositionalPseudo(function (matchIndexes, length) {
          var i = 1;
          for (; i < length; i += 2) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        }),
        "lt": createPositionalPseudo(function (matchIndexes, length, argument) {
          var i = argument < 0 ? argument + length : argument > length ? length : argument;
          for (; --i >= 0;) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        }),
        "gt": createPositionalPseudo(function (matchIndexes, length, argument) {
          var i = argument < 0 ? argument + length : argument;
          for (; ++i < length;) {
            matchIndexes.push(i);
          }
          return matchIndexes;
        })
      }
    };
    Expr.pseudos["nth"] = Expr.pseudos["eq"];

    // Add button/input type pseudos
    for (i in {
      radio: true,
      checkbox: true,
      file: true,
      password: true,
      image: true
    }) {
      Expr.pseudos[i] = createInputPseudo(i);
    }
    for (i in {
      submit: true,
      reset: true
    }) {
      Expr.pseudos[i] = createButtonPseudo(i);
    }

    // Easy API for creating new setFilters
    function setFilters() {}
    setFilters.prototype = Expr.filters = Expr.pseudos;
    Expr.setFilters = new setFilters();
    tokenize = Sizzle.tokenize = function (selector, parseOnly) {
      var matched,
        match,
        tokens,
        type,
        soFar,
        groups,
        preFilters,
        cached = tokenCache[selector + " "];
      if (cached) {
        return parseOnly ? 0 : cached.slice(0);
      }
      soFar = selector;
      groups = [];
      preFilters = Expr.preFilter;
      while (soFar) {
        // Comma and first run
        if (!matched || (match = rcomma.exec(soFar))) {
          if (match) {
            // Don't consume trailing commas as valid
            soFar = soFar.slice(match[0].length) || soFar;
          }
          groups.push(tokens = []);
        }
        matched = false;

        // Combinators
        if (match = rcombinators.exec(soFar)) {
          matched = match.shift();
          tokens.push({
            value: matched,
            // Cast descendant combinators to space
            type: match[0].replace(rtrim, " ")
          });
          soFar = soFar.slice(matched.length);
        }

        // Filters
        for (type in Expr.filter) {
          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {
            matched = match.shift();
            tokens.push({
              value: matched,
              type: type,
              matches: match
            });
            soFar = soFar.slice(matched.length);
          }
        }
        if (!matched) {
          break;
        }
      }

      // Return the length of the invalid excess
      // if we're just parsing
      // Otherwise, throw an error or return tokens
      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) :
      // Cache the tokens
      tokenCache(selector, groups).slice(0);
    };
    function toSelector(tokens) {
      var i = 0,
        len = tokens.length,
        selector = "";
      for (; i < len; i++) {
        selector += tokens[i].value;
      }
      return selector;
    }
    function addCombinator(matcher, combinator, base) {
      var dir = combinator.dir,
        skip = combinator.next,
        key = skip || dir,
        checkNonElements = base && key === "parentNode",
        doneName = done++;
      return combinator.first ?
      // Check against closest ancestor/preceding element
      function (elem, context, xml) {
        while (elem = elem[dir]) {
          if (elem.nodeType === 1 || checkNonElements) {
            return matcher(elem, context, xml);
          }
        }
        return false;
      } :
      // Check against all ancestor/preceding elements
      function (elem, context, xml) {
        var oldCache,
          uniqueCache,
          outerCache,
          newCache = [dirruns, doneName];

        // We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching
        if (xml) {
          while (elem = elem[dir]) {
            if (elem.nodeType === 1 || checkNonElements) {
              if (matcher(elem, context, xml)) {
                return true;
              }
            }
          }
        } else {
          while (elem = elem[dir]) {
            if (elem.nodeType === 1 || checkNonElements) {
              outerCache = elem[expando] || (elem[expando] = {});

              // Support: IE <9 only
              // Defend against cloned attroperties (jQuery gh-1709)
              uniqueCache = outerCache[elem.uniqueID] || (outerCache[elem.uniqueID] = {});
              if (skip && skip === elem.nodeName.toLowerCase()) {
                elem = elem[dir] || elem;
              } else if ((oldCache = uniqueCache[key]) && oldCache[0] === dirruns && oldCache[1] === doneName) {
                // Assign to newCache so results back-propagate to previous elements
                return newCache[2] = oldCache[2];
              } else {
                // Reuse newcache so results back-propagate to previous elements
                uniqueCache[key] = newCache;

                // A match means we're done; a fail means we have to keep checking
                if (newCache[2] = matcher(elem, context, xml)) {
                  return true;
                }
              }
            }
          }
        }
        return false;
      };
    }
    function elementMatcher(matchers) {
      return matchers.length > 1 ? function (elem, context, xml) {
        var i = matchers.length;
        while (i--) {
          if (!matchers[i](elem, context, xml)) {
            return false;
          }
        }
        return true;
      } : matchers[0];
    }
    function multipleContexts(selector, contexts, results) {
      var i = 0,
        len = contexts.length;
      for (; i < len; i++) {
        Sizzle(selector, contexts[i], results);
      }
      return results;
    }
    function condense(unmatched, map, filter, context, xml) {
      var elem,
        newUnmatched = [],
        i = 0,
        len = unmatched.length,
        mapped = map != null;
      for (; i < len; i++) {
        if (elem = unmatched[i]) {
          if (!filter || filter(elem, context, xml)) {
            newUnmatched.push(elem);
            if (mapped) {
              map.push(i);
            }
          }
        }
      }
      return newUnmatched;
    }
    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {
      if (postFilter && !postFilter[expando]) {
        postFilter = setMatcher(postFilter);
      }
      if (postFinder && !postFinder[expando]) {
        postFinder = setMatcher(postFinder, postSelector);
      }
      return markFunction(function (seed, results, context, xml) {
        var temp,
          i,
          elem,
          preMap = [],
          postMap = [],
          preexisting = results.length,
          // Get initial elements from seed or context
          elems = seed || multipleContexts(selector || "*", context.nodeType ? [context] : context, []),
          // Prefilter to get matcher input, preserving a map for seed-results synchronization
          matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems,
          matcherOut = matcher ?
          // If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
          postFinder || (seed ? preFilter : preexisting || postFilter) ?
          // ...intermediate processing is necessary
          [] :
          // ...otherwise use results directly
          results : matcherIn;

        // Find primary matches
        if (matcher) {
          matcher(matcherIn, matcherOut, context, xml);
        }

        // Apply postFilter
        if (postFilter) {
          temp = condense(matcherOut, postMap);
          postFilter(temp, [], context, xml);

          // Un-match failing elements by moving them back to matcherIn
          i = temp.length;
          while (i--) {
            if (elem = temp[i]) {
              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);
            }
          }
        }
        if (seed) {
          if (postFinder || preFilter) {
            if (postFinder) {
              // Get the final matcherOut by condensing this intermediate into postFinder contexts
              temp = [];
              i = matcherOut.length;
              while (i--) {
                if (elem = matcherOut[i]) {
                  // Restore matcherIn since elem is not yet a final match
                  temp.push(matcherIn[i] = elem);
                }
              }
              postFinder(null, matcherOut = [], temp, xml);
            }

            // Move matched elements from seed to results to keep them synchronized
            i = matcherOut.length;
            while (i--) {
              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf(seed, elem) : preMap[i]) > -1) {
                seed[temp] = !(results[temp] = elem);
              }
            }
          }

          // Add elements to results, through postFinder if defined
        } else {
          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);
          if (postFinder) {
            postFinder(null, results, matcherOut, xml);
          } else {
            push.apply(results, matcherOut);
          }
        }
      });
    }
    function matcherFromTokens(tokens) {
      var checkContext,
        matcher,
        j,
        len = tokens.length,
        leadingRelative = Expr.relative[tokens[0].type],
        implicitRelative = leadingRelative || Expr.relative[" "],
        i = leadingRelative ? 1 : 0,
        // The foundational matcher ensures that elements are reachable from top-level context(s)
        matchContext = addCombinator(function (elem) {
          return elem === checkContext;
        }, implicitRelative, true),
        matchAnyContext = addCombinator(function (elem) {
          return indexOf(checkContext, elem) > -1;
        }, implicitRelative, true),
        matchers = [function (elem, context, xml) {
          var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));

          // Avoid hanging onto element (issue #299)
          checkContext = null;
          return ret;
        }];
      for (; i < len; i++) {
        if (matcher = Expr.relative[tokens[i].type]) {
          matchers = [addCombinator(elementMatcher(matchers), matcher)];
        } else {
          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);

          // Return special upon seeing a positional matcher
          if (matcher[expando]) {
            // Find the next relative operator (if any) for proper handling
            j = ++i;
            for (; j < len; j++) {
              if (Expr.relative[tokens[j].type]) {
                break;
              }
            }
            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(
            // If the preceding token was a descendant combinator, insert an implicit any-element `*`
            tokens.slice(0, i - 1).concat({
              value: tokens[i - 2].type === " " ? "*" : ""
            })).replace(rtrim, "$1"), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));
          }
          matchers.push(matcher);
        }
      }
      return elementMatcher(matchers);
    }
    function matcherFromGroupMatchers(elementMatchers, setMatchers) {
      var bySet = setMatchers.length > 0,
        byElement = elementMatchers.length > 0,
        superMatcher = function superMatcher(seed, context, xml, results, outermost) {
          var elem,
            j,
            matcher,
            matchedCount = 0,
            i = "0",
            unmatched = seed && [],
            setMatched = [],
            contextBackup = outermostContext,
            // We must always have either seed elements or outermost context
            elems = seed || byElement && Expr.find["TAG"]("*", outermost),
            // Use integer dirruns iff this is the outermost matcher
            dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1,
            len = elems.length;
          if (outermost) {
            // Support: IE 11+, Edge 17 - 18+
            // IE/Edge sometimes throw a "Permission denied" error when strict-comparing
            // two documents; shallow comparisons work.
            // eslint-disable-next-line eqeqeq
            outermostContext = context == document || context || outermost;
          }

          // Add elements passing elementMatchers directly to results
          // Support: IE<9, Safari
          // Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
          for (; i !== len && (elem = elems[i]) != null; i++) {
            if (byElement && elem) {
              j = 0;

              // Support: IE 11+, Edge 17 - 18+
              // IE/Edge sometimes throw a "Permission denied" error when strict-comparing
              // two documents; shallow comparisons work.
              // eslint-disable-next-line eqeqeq
              if (!context && elem.ownerDocument != document) {
                setDocument(elem);
                xml = !documentIsHTML;
              }
              while (matcher = elementMatchers[j++]) {
                if (matcher(elem, context || document, xml)) {
                  results.push(elem);
                  break;
                }
              }
              if (outermost) {
                dirruns = dirrunsUnique;
              }
            }

            // Track unmatched elements for set filters
            if (bySet) {
              // They will have gone through all possible matchers
              if (elem = !matcher && elem) {
                matchedCount--;
              }

              // Lengthen the array for every element, matched or not
              if (seed) {
                unmatched.push(elem);
              }
            }
          }

          // `i` is now the count of elements visited above, and adding it to `matchedCount`
          // makes the latter nonnegative.
          matchedCount += i;

          // Apply set filters to unmatched elements
          // NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`
          // equals `i`), unless we didn't visit _any_ elements in the above loop because we have
          // no element matchers and no seed.
          // Incrementing an initially-string "0" `i` allows `i` to remain a string only in that
          // case, which will result in a "00" `matchedCount` that differs from `i` but is also
          // numerically zero.
          if (bySet && i !== matchedCount) {
            j = 0;
            while (matcher = setMatchers[j++]) {
              matcher(unmatched, setMatched, context, xml);
            }
            if (seed) {
              // Reintegrate element matches to eliminate the need for sorting
              if (matchedCount > 0) {
                while (i--) {
                  if (!(unmatched[i] || setMatched[i])) {
                    setMatched[i] = pop.call(results);
                  }
                }
              }

              // Discard index placeholder values to get only actual matches
              setMatched = condense(setMatched);
            }

            // Add matches to results
            push.apply(results, setMatched);

            // Seedless set matches succeeding multiple successful matchers stipulate sorting
            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {
              Sizzle.uniqueSort(results);
            }
          }

          // Override manipulation of globals by nested matchers
          if (outermost) {
            dirruns = dirrunsUnique;
            outermostContext = contextBackup;
          }
          return unmatched;
        };
      return bySet ? markFunction(superMatcher) : superMatcher;
    }
    compile = Sizzle.compile = function (selector, match /* Internal Use Only */) {
      var i,
        setMatchers = [],
        elementMatchers = [],
        cached = compilerCache[selector + " "];
      if (!cached) {
        // Generate a function of recursive functions that can be used to check each element
        if (!match) {
          match = tokenize(selector);
        }
        i = match.length;
        while (i--) {
          cached = matcherFromTokens(match[i]);
          if (cached[expando]) {
            setMatchers.push(cached);
          } else {
            elementMatchers.push(cached);
          }
        }

        // Cache the compiled function
        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));

        // Save selector and tokenization
        cached.selector = selector;
      }
      return cached;
    };

    /**
     * A low-level selection function that works with Sizzle's compiled
     *  selector functions
     * @param {String|Function} selector A selector or a pre-compiled
     *  selector function built with Sizzle.compile
     * @param {Element} context
     * @param {Array} [results]
     * @param {Array} [seed] A set of elements to match against
     */
    select = Sizzle.select = function (selector, context, results, seed) {
      var i,
        tokens,
        token,
        type,
        find,
        compiled = typeof selector === "function" && selector,
        match = !seed && tokenize(selector = compiled.selector || selector);
      results = results || [];

      // Try to minimize operations if there is only one selector in the list and no seed
      // (the latter of which guarantees us context)
      if (match.length === 1) {
        // Reduce context if the leading compound selector is an ID
        tokens = match[0] = match[0].slice(0);
        if (tokens.length > 2 && (token = tokens[0]).type === "ID" && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {
          context = (Expr.find["ID"](token.matches[0].replace(runescape, funescape), context) || [])[0];
          if (!context) {
            return results;

            // Precompiled matchers will still verify ancestry, so step up a level
          } else if (compiled) {
            context = context.parentNode;
          }
          selector = selector.slice(tokens.shift().value.length);
        }

        // Fetch a seed set for right-to-left matching
        i = matchExpr["needsContext"].test(selector) ? 0 : tokens.length;
        while (i--) {
          token = tokens[i];

          // Abort if we hit a combinator
          if (Expr.relative[type = token.type]) {
            break;
          }
          if (find = Expr.find[type]) {
            // Search, expanding context for leading sibling combinators
            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {
              // If seed is empty or no tokens remain, we can return early
              tokens.splice(i, 1);
              selector = seed.length && toSelector(tokens);
              if (!selector) {
                push.apply(results, seed);
                return results;
              }
              break;
            }
          }
        }
      }

      // Compile and execute a filtering function if one is not provided
      // Provide `match` to avoid retokenization if we modified the selector above
      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, !context || rsibling.test(selector) && testContext(context.parentNode) || context);
      return results;
    };

    // One-time assignments

    // Sort stability
    support.sortStable = expando.split("").sort(sortOrder).join("") === expando;

    // Support: Chrome 14-35+
    // Always assume duplicates if they aren't passed to the comparison function
    support.detectDuplicates = !!hasDuplicate;

    // Initialize against the default document
    setDocument();

    // Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
    // Detached nodes confoundingly follow *each other*
    support.sortDetached = assert(function (el) {
      // Should return 1, but returns 4 (following)
      return el.compareDocumentPosition(document.createElement("fieldset")) & 1;
    });

    // Support: IE<8
    // Prevent attribute/property "interpolation"
    // https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
    if (!assert(function (el) {
      el.innerHTML = "<a href='#'></a>";
      return el.firstChild.getAttribute("href") === "#";
    })) {
      addHandle("type|href|height|width", function (elem, name, isXML) {
        if (!isXML) {
          return elem.getAttribute(name, name.toLowerCase() === "type" ? 1 : 2);
        }
      });
    }

    // Support: IE<9
    // Use defaultValue in place of getAttribute("value")
    if (!support.attributes || !assert(function (el) {
      el.innerHTML = "<input/>";
      el.firstChild.setAttribute("value", "");
      return el.firstChild.getAttribute("value") === "";
    })) {
      addHandle("value", function (elem, _name, isXML) {
        if (!isXML && elem.nodeName.toLowerCase() === "input") {
          return elem.defaultValue;
        }
      });
    }

    // Support: IE<9
    // Use getAttributeNode to fetch booleans when getAttribute lies
    if (!assert(function (el) {
      return el.getAttribute("disabled") == null;
    })) {
      addHandle(booleans, function (elem, name, isXML) {
        var val;
        if (!isXML) {
          return elem[name] === true ? name.toLowerCase() : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;
        }
      });
    }
    return Sizzle;
  }(window);
  jQuery.find = Sizzle;
  jQuery.expr = Sizzle.selectors;

  // Deprecated
  jQuery.expr[":"] = jQuery.expr.pseudos;
  jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;
  jQuery.text = Sizzle.getText;
  jQuery.isXMLDoc = Sizzle.isXML;
  jQuery.contains = Sizzle.contains;
  jQuery.escapeSelector = Sizzle.escape;
  var dir = function dir(elem, _dir, until) {
    var matched = [],
      truncate = until !== undefined;
    while ((elem = elem[_dir]) && elem.nodeType !== 9) {
      if (elem.nodeType === 1) {
        if (truncate && jQuery(elem).is(until)) {
          break;
        }
        matched.push(elem);
      }
    }
    return matched;
  };
  var _siblings = function siblings(n, elem) {
    var matched = [];
    for (; n; n = n.nextSibling) {
      if (n.nodeType === 1 && n !== elem) {
        matched.push(n);
      }
    }
    return matched;
  };
  var rneedsContext = jQuery.expr.match.needsContext;
  function nodeName(elem, name) {
    return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
  }
  var rsingleTag = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;

  // Implement the identical functionality for filter and not
  function winnow(elements, qualifier, not) {
    if (isFunction(qualifier)) {
      return jQuery.grep(elements, function (elem, i) {
        return !!qualifier.call(elem, i, elem) !== not;
      });
    }

    // Single element
    if (qualifier.nodeType) {
      return jQuery.grep(elements, function (elem) {
        return elem === qualifier !== not;
      });
    }

    // Arraylike of elements (jQuery, arguments, Array)
    if (typeof qualifier !== "string") {
      return jQuery.grep(elements, function (elem) {
        return indexOf.call(qualifier, elem) > -1 !== not;
      });
    }

    // Filtered directly for both simple and complex selectors
    return jQuery.filter(qualifier, elements, not);
  }
  jQuery.filter = function (expr, elems, not) {
    var elem = elems[0];
    if (not) {
      expr = ":not(" + expr + ")";
    }
    if (elems.length === 1 && elem.nodeType === 1) {
      return jQuery.find.matchesSelector(elem, expr) ? [elem] : [];
    }
    return jQuery.find.matches(expr, jQuery.grep(elems, function (elem) {
      return elem.nodeType === 1;
    }));
  };
  jQuery.fn.extend({
    find: function find(selector) {
      var i,
        ret,
        len = this.length,
        self = this;
      if (typeof selector !== "string") {
        return this.pushStack(jQuery(selector).filter(function () {
          for (i = 0; i < len; i++) {
            if (jQuery.contains(self[i], this)) {
              return true;
            }
          }
        }));
      }
      ret = this.pushStack([]);
      for (i = 0; i < len; i++) {
        jQuery.find(selector, self[i], ret);
      }
      return len > 1 ? jQuery.uniqueSort(ret) : ret;
    },
    filter: function filter(selector) {
      return this.pushStack(winnow(this, selector || [], false));
    },
    not: function not(selector) {
      return this.pushStack(winnow(this, selector || [], true));
    },
    is: function is(selector) {
      return !!winnow(this,
      // If this is a positional/relative selector, check membership in the returned set
      // so $("p:first").is("p:last") won't return true for a doc with two "p".
      typeof selector === "string" && rneedsContext.test(selector) ? jQuery(selector) : selector || [], false).length;
    }
  });

  // Initialize a jQuery object

  // A central reference to the root jQuery(document)
  var rootjQuery,
    // A simple way to check for HTML strings
    // Prioritize #id over <tag> to avoid XSS via location.hash (trac-9521)
    // Strict HTML recognition (trac-11290: must start with <)
    // Shortcut simple #id case for speed
    rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,
    init = jQuery.fn.init = function (selector, context, root) {
      var match, elem;

      // HANDLE: $(""), $(null), $(undefined), $(false)
      if (!selector) {
        return this;
      }

      // Method init() accepts an alternate rootjQuery
      // so migrate can support jQuery.sub (gh-2101)
      root = root || rootjQuery;

      // Handle HTML strings
      if (typeof selector === "string") {
        if (selector[0] === "<" && selector[selector.length - 1] === ">" && selector.length >= 3) {
          // Assume that strings that start and end with <> are HTML and skip the regex check
          match = [null, selector, null];
        } else {
          match = rquickExpr.exec(selector);
        }

        // Match html or make sure no context is specified for #id
        if (match && (match[1] || !context)) {
          // HANDLE: $(html) -> $(array)
          if (match[1]) {
            context = context instanceof jQuery ? context[0] : context;

            // Option to run scripts is true for back-compat
            // Intentionally let the error be thrown if parseHTML is not present
            jQuery.merge(this, jQuery.parseHTML(match[1], context && context.nodeType ? context.ownerDocument || context : document, true));

            // HANDLE: $(html, props)
            if (rsingleTag.test(match[1]) && jQuery.isPlainObject(context)) {
              for (match in context) {
                // Properties of context are called as methods if possible
                if (isFunction(this[match])) {
                  this[match](context[match]);

                  // ...and otherwise set as attributes
                } else {
                  this.attr(match, context[match]);
                }
              }
            }
            return this;

            // HANDLE: $(#id)
          } else {
            elem = document.getElementById(match[2]);
            if (elem) {
              // Inject the element directly into the jQuery object
              this[0] = elem;
              this.length = 1;
            }
            return this;
          }

          // HANDLE: $(expr, $(...))
        } else if (!context || context.jquery) {
          return (context || root).find(selector);

          // HANDLE: $(expr, context)
          // (which is just equivalent to: $(context).find(expr)
        } else {
          return this.constructor(context).find(selector);
        }

        // HANDLE: $(DOMElement)
      } else if (selector.nodeType) {
        this[0] = selector;
        this.length = 1;
        return this;

        // HANDLE: $(function)
        // Shortcut for document ready
      } else if (isFunction(selector)) {
        return root.ready !== undefined ? root.ready(selector) :
        // Execute immediately if ready is not present
        selector(jQuery);
      }
      return jQuery.makeArray(selector, this);
    };

  // Give the init function the jQuery prototype for later instantiation
  init.prototype = jQuery.fn;

  // Initialize central reference
  rootjQuery = jQuery(document);
  var rparentsprev = /^(?:parents|prev(?:Until|All))/,
    // Methods guaranteed to produce a unique set when starting from a unique set
    guaranteedUnique = {
      children: true,
      contents: true,
      next: true,
      prev: true
    };
  jQuery.fn.extend({
    has: function has(target) {
      var targets = jQuery(target, this),
        l = targets.length;
      return this.filter(function () {
        var i = 0;
        for (; i < l; i++) {
          if (jQuery.contains(this, targets[i])) {
            return true;
          }
        }
      });
    },
    closest: function closest(selectors, context) {
      var cur,
        i = 0,
        l = this.length,
        matched = [],
        targets = typeof selectors !== "string" && jQuery(selectors);

      // Positional selectors never match, since there's no _selection_ context
      if (!rneedsContext.test(selectors)) {
        for (; i < l; i++) {
          for (cur = this[i]; cur && cur !== context; cur = cur.parentNode) {
            // Always skip document fragments
            if (cur.nodeType < 11 && (targets ? targets.index(cur) > -1 :
            // Don't pass non-elements to Sizzle
            cur.nodeType === 1 && jQuery.find.matchesSelector(cur, selectors))) {
              matched.push(cur);
              break;
            }
          }
        }
      }
      return this.pushStack(matched.length > 1 ? jQuery.uniqueSort(matched) : matched);
    },
    // Determine the position of an element within the set
    index: function index(elem) {
      // No argument, return index in parent
      if (!elem) {
        return this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
      }

      // Index in selector
      if (typeof elem === "string") {
        return indexOf.call(jQuery(elem), this[0]);
      }

      // Locate the position of the desired element
      return indexOf.call(this,
      // If it receives a jQuery object, the first element is used
      elem.jquery ? elem[0] : elem);
    },
    add: function add(selector, context) {
      return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(), jQuery(selector, context))));
    },
    addBack: function addBack(selector) {
      return this.add(selector == null ? this.prevObject : this.prevObject.filter(selector));
    }
  });
  function sibling(cur, dir) {
    while ((cur = cur[dir]) && cur.nodeType !== 1) {}
    return cur;
  }
  jQuery.each({
    parent: function parent(elem) {
      var parent = elem.parentNode;
      return parent && parent.nodeType !== 11 ? parent : null;
    },
    parents: function parents(elem) {
      return dir(elem, "parentNode");
    },
    parentsUntil: function parentsUntil(elem, _i, until) {
      return dir(elem, "parentNode", until);
    },
    next: function next(elem) {
      return sibling(elem, "nextSibling");
    },
    prev: function prev(elem) {
      return sibling(elem, "previousSibling");
    },
    nextAll: function nextAll(elem) {
      return dir(elem, "nextSibling");
    },
    prevAll: function prevAll(elem) {
      return dir(elem, "previousSibling");
    },
    nextUntil: function nextUntil(elem, _i, until) {
      return dir(elem, "nextSibling", until);
    },
    prevUntil: function prevUntil(elem, _i, until) {
      return dir(elem, "previousSibling", until);
    },
    siblings: function siblings(elem) {
      return _siblings((elem.parentNode || {}).firstChild, elem);
    },
    children: function children(elem) {
      return _siblings(elem.firstChild);
    },
    contents: function contents(elem) {
      if (elem.contentDocument != null &&
      // Support: IE 11+
      // <object> elements with no `data` attribute has an object
      // `contentDocument` with a `null` prototype.
      getProto(elem.contentDocument)) {
        return elem.contentDocument;
      }

      // Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only
      // Treat the template element as a regular one in browsers that
      // don't support it.
      if (nodeName(elem, "template")) {
        elem = elem.content || elem;
      }
      return jQuery.merge([], elem.childNodes);
    }
  }, function (name, fn) {
    jQuery.fn[name] = function (until, selector) {
      var matched = jQuery.map(this, fn, until);
      if (name.slice(-5) !== "Until") {
        selector = until;
      }
      if (selector && typeof selector === "string") {
        matched = jQuery.filter(selector, matched);
      }
      if (this.length > 1) {
        // Remove duplicates
        if (!guaranteedUnique[name]) {
          jQuery.uniqueSort(matched);
        }

        // Reverse order for parents* and prev-derivatives
        if (rparentsprev.test(name)) {
          matched.reverse();
        }
      }
      return this.pushStack(matched);
    };
  });
  var rnothtmlwhite = /[^\x20\t\r\n\f]+/g;

  // Convert String-formatted options into Object-formatted ones
  function createOptions(options) {
    var object = {};
    jQuery.each(options.match(rnothtmlwhite) || [], function (_, flag) {
      object[flag] = true;
    });
    return object;
  }

  /*
   * Create a callback list using the following parameters:
   *
   *	options: an optional list of space-separated options that will change how
   *			the callback list behaves or a more traditional option object
   *
   * By default a callback list will act like an event callback list and can be
   * "fired" multiple times.
   *
   * Possible options:
   *
   *	once:			will ensure the callback list can only be fired once (like a Deferred)
   *
   *	memory:			will keep track of previous values and will call any callback added
   *					after the list has been fired right away with the latest "memorized"
   *					values (like a Deferred)
   *
   *	unique:			will ensure a callback can only be added once (no duplicate in the list)
   *
   *	stopOnFalse:	interrupt callings when a callback returns false
   *
   */
  jQuery.Callbacks = function (options) {
    // Convert options from String-formatted to Object-formatted if needed
    // (we check in cache first)
    options = typeof options === "string" ? createOptions(options) : jQuery.extend({}, options);
    var
      // Flag to know if list is currently firing
      firing,
      // Last fire value for non-forgettable lists
      memory,
      // Flag to know if list was already fired
      _fired,
      // Flag to prevent firing
      _locked,
      // Actual callback list
      list = [],
      // Queue of execution data for repeatable lists
      queue = [],
      // Index of currently firing callback (modified by add/remove as needed)
      firingIndex = -1,
      // Fire callbacks
      fire = function fire() {
        // Enforce single-firing
        _locked = _locked || options.once;

        // Execute callbacks for all pending executions,
        // respecting firingIndex overrides and runtime changes
        _fired = firing = true;
        for (; queue.length; firingIndex = -1) {
          memory = queue.shift();
          while (++firingIndex < list.length) {
            // Run callback and check for early termination
            if (list[firingIndex].apply(memory[0], memory[1]) === false && options.stopOnFalse) {
              // Jump to end and forget the data so .add doesn't re-fire
              firingIndex = list.length;
              memory = false;
            }
          }
        }

        // Forget the data if we're done with it
        if (!options.memory) {
          memory = false;
        }
        firing = false;

        // Clean up if we're done firing for good
        if (_locked) {
          // Keep an empty list if we have data for future add calls
          if (memory) {
            list = [];

            // Otherwise, this object is spent
          } else {
            list = "";
          }
        }
      },
      // Actual Callbacks object
      self = {
        // Add a callback or a collection of callbacks to the list
        add: function add() {
          if (list) {
            // If we have memory from a past run, we should fire after adding
            if (memory && !firing) {
              firingIndex = list.length - 1;
              queue.push(memory);
            }
            (function add(args) {
              jQuery.each(args, function (_, arg) {
                if (isFunction(arg)) {
                  if (!options.unique || !self.has(arg)) {
                    list.push(arg);
                  }
                } else if (arg && arg.length && toType(arg) !== "string") {
                  // Inspect recursively
                  add(arg);
                }
              });
            })(arguments);
            if (memory && !firing) {
              fire();
            }
          }
          return this;
        },
        // Remove a callback from the list
        remove: function remove() {
          jQuery.each(arguments, function (_, arg) {
            var index;
            while ((index = jQuery.inArray(arg, list, index)) > -1) {
              list.splice(index, 1);

              // Handle firing indexes
              if (index <= firingIndex) {
                firingIndex--;
              }
            }
          });
          return this;
        },
        // Check if a given callback is in the list.
        // If no argument is given, return whether or not list has callbacks attached.
        has: function has(fn) {
          return fn ? jQuery.inArray(fn, list) > -1 : list.length > 0;
        },
        // Remove all callbacks from the list
        empty: function empty() {
          if (list) {
            list = [];
          }
          return this;
        },
        // Disable .fire and .add
        // Abort any current/pending executions
        // Clear all callbacks and values
        disable: function disable() {
          _locked = queue = [];
          list = memory = "";
          return this;
        },
        disabled: function disabled() {
          return !list;
        },
        // Disable .fire
        // Also disable .add unless we have memory (since it would have no effect)
        // Abort any pending executions
        lock: function lock() {
          _locked = queue = [];
          if (!memory && !firing) {
            list = memory = "";
          }
          return this;
        },
        locked: function locked() {
          return !!_locked;
        },
        // Call all callbacks with the given context and arguments
        fireWith: function fireWith(context, args) {
          if (!_locked) {
            args = args || [];
            args = [context, args.slice ? args.slice() : args];
            queue.push(args);
            if (!firing) {
              fire();
            }
          }
          return this;
        },
        // Call all the callbacks with the given arguments
        fire: function fire() {
          self.fireWith(this, arguments);
          return this;
        },
        // To know if the callbacks have already been called at least once
        fired: function fired() {
          return !!_fired;
        }
      };
    return self;
  };
  function Identity(v) {
    return v;
  }
  function Thrower(ex) {
    throw ex;
  }
  function adoptValue(value, resolve, reject, noValue) {
    var method;
    try {
      // Check for promise aspect first to privilege synchronous behavior
      if (value && isFunction(method = value.promise)) {
        method.call(value).done(resolve).fail(reject);

        // Other thenables
      } else if (value && isFunction(method = value.then)) {
        method.call(value, resolve, reject);

        // Other non-thenables
      } else {
        // Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:
        // * false: [ value ].slice( 0 ) => resolve( value )
        // * true: [ value ].slice( 1 ) => resolve()
        resolve.apply(undefined, [value].slice(noValue));
      }

      // For Promises/A+, convert exceptions into rejections
      // Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in
      // Deferred#then to conditionally suppress rejection.
    } catch (value) {
      // Support: Android 4.0 only
      // Strict mode functions invoked without .call/.apply get global-object context
      reject.apply(undefined, [value]);
    }
  }
  jQuery.extend({
    Deferred: function Deferred(func) {
      var tuples = [
        // action, add listener, callbacks,
        // ... .then handlers, argument index, [final state]
        ["notify", "progress", jQuery.Callbacks("memory"), jQuery.Callbacks("memory"), 2], ["resolve", "done", jQuery.Callbacks("once memory"), jQuery.Callbacks("once memory"), 0, "resolved"], ["reject", "fail", jQuery.Callbacks("once memory"), jQuery.Callbacks("once memory"), 1, "rejected"]],
        _state = "pending",
        _promise = {
          state: function state() {
            return _state;
          },
          always: function always() {
            deferred.done(arguments).fail(arguments);
            return this;
          },
          "catch": function _catch(fn) {
            return _promise.then(null, fn);
          },
          // Keep pipe for back-compat
          pipe: function pipe( /* fnDone, fnFail, fnProgress */
          ) {
            var fns = arguments;
            return jQuery.Deferred(function (newDefer) {
              jQuery.each(tuples, function (_i, tuple) {
                // Map tuples (progress, done, fail) to arguments (done, fail, progress)
                var fn = isFunction(fns[tuple[4]]) && fns[tuple[4]];

                // deferred.progress(function() { bind to newDefer or newDefer.notify })
                // deferred.done(function() { bind to newDefer or newDefer.resolve })
                // deferred.fail(function() { bind to newDefer or newDefer.reject })
                deferred[tuple[1]](function () {
                  var returned = fn && fn.apply(this, arguments);
                  if (returned && isFunction(returned.promise)) {
                    returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject);
                  } else {
                    newDefer[tuple[0] + "With"](this, fn ? [returned] : arguments);
                  }
                });
              });
              fns = null;
            }).promise();
          },
          then: function then(onFulfilled, onRejected, onProgress) {
            var maxDepth = 0;
            function resolve(depth, deferred, handler, special) {
              return function () {
                var that = this,
                  args = arguments,
                  mightThrow = function mightThrow() {
                    var returned, then;

                    // Support: Promises/A+ section 2.3.3.3.3
                    // https://promisesaplus.com/#point-59
                    // Ignore double-resolution attempts
                    if (depth < maxDepth) {
                      return;
                    }
                    returned = handler.apply(that, args);

                    // Support: Promises/A+ section 2.3.1
                    // https://promisesaplus.com/#point-48
                    if (returned === deferred.promise()) {
                      throw new TypeError("Thenable self-resolution");
                    }

                    // Support: Promises/A+ sections 2.3.3.1, 3.5
                    // https://promisesaplus.com/#point-54
                    // https://promisesaplus.com/#point-75
                    // Retrieve `then` only once
                    then = returned && (
                    // Support: Promises/A+ section 2.3.4
                    // https://promisesaplus.com/#point-64
                    // Only check objects and functions for thenability
                    typeof returned === "object" || typeof returned === "function") && returned.then;

                    // Handle a returned thenable
                    if (isFunction(then)) {
                      // Special processors (notify) just wait for resolution
                      if (special) {
                        then.call(returned, resolve(maxDepth, deferred, Identity, special), resolve(maxDepth, deferred, Thrower, special));

                        // Normal processors (resolve) also hook into progress
                      } else {
                        // ...and disregard older resolution values
                        maxDepth++;
                        then.call(returned, resolve(maxDepth, deferred, Identity, special), resolve(maxDepth, deferred, Thrower, special), resolve(maxDepth, deferred, Identity, deferred.notifyWith));
                      }

                      // Handle all other returned values
                    } else {
                      // Only substitute handlers pass on context
                      // and multiple values (non-spec behavior)
                      if (handler !== Identity) {
                        that = undefined;
                        args = [returned];
                      }

                      // Process the value(s)
                      // Default process is resolve
                      (special || deferred.resolveWith)(that, args);
                    }
                  },
                  // Only normal processors (resolve) catch and reject exceptions
                  process = special ? mightThrow : function () {
                    try {
                      mightThrow();
                    } catch (e) {
                      if (jQuery.Deferred.exceptionHook) {
                        jQuery.Deferred.exceptionHook(e, process.stackTrace);
                      }

                      // Support: Promises/A+ section 2.3.3.3.4.1
                      // https://promisesaplus.com/#point-61
                      // Ignore post-resolution exceptions
                      if (depth + 1 >= maxDepth) {
                        // Only substitute handlers pass on context
                        // and multiple values (non-spec behavior)
                        if (handler !== Thrower) {
                          that = undefined;
                          args = [e];
                        }
                        deferred.rejectWith(that, args);
                      }
                    }
                  };

                // Support: Promises/A+ section 2.3.3.3.1
                // https://promisesaplus.com/#point-57
                // Re-resolve promises immediately to dodge false rejection from
                // subsequent errors
                if (depth) {
                  process();
                } else {
                  // Call an optional hook to record the stack, in case of exception
                  // since it's otherwise lost when execution goes async
                  if (jQuery.Deferred.getStackHook) {
                    process.stackTrace = jQuery.Deferred.getStackHook();
                  }
                  window.setTimeout(process);
                }
              };
            }
            return jQuery.Deferred(function (newDefer) {
              // progress_handlers.add( ... )
              tuples[0][3].add(resolve(0, newDefer, isFunction(onProgress) ? onProgress : Identity, newDefer.notifyWith));

              // fulfilled_handlers.add( ... )
              tuples[1][3].add(resolve(0, newDefer, isFunction(onFulfilled) ? onFulfilled : Identity));

              // rejected_handlers.add( ... )
              tuples[2][3].add(resolve(0, newDefer, isFunction(onRejected) ? onRejected : Thrower));
            }).promise();
          },
          // Get a promise for this deferred
          // If obj is provided, the promise aspect is added to the object
          promise: function promise(obj) {
            return obj != null ? jQuery.extend(obj, _promise) : _promise;
          }
        },
        deferred = {};

      // Add list-specific methods
      jQuery.each(tuples, function (i, tuple) {
        var list = tuple[2],
          stateString = tuple[5];

        // promise.progress = list.add
        // promise.done = list.add
        // promise.fail = list.add
        _promise[tuple[1]] = list.add;

        // Handle state
        if (stateString) {
          list.add(function () {
            // state = "resolved" (i.e., fulfilled)
            // state = "rejected"
            _state = stateString;
          },
          // rejected_callbacks.disable
          // fulfilled_callbacks.disable
          tuples[3 - i][2].disable,
          // rejected_handlers.disable
          // fulfilled_handlers.disable
          tuples[3 - i][3].disable,
          // progress_callbacks.lock
          tuples[0][2].lock,
          // progress_handlers.lock
          tuples[0][3].lock);
        }

        // progress_handlers.fire
        // fulfilled_handlers.fire
        // rejected_handlers.fire
        list.add(tuple[3].fire);

        // deferred.notify = function() { deferred.notifyWith(...) }
        // deferred.resolve = function() { deferred.resolveWith(...) }
        // deferred.reject = function() { deferred.rejectWith(...) }
        deferred[tuple[0]] = function () {
          deferred[tuple[0] + "With"](this === deferred ? undefined : this, arguments);
          return this;
        };

        // deferred.notifyWith = list.fireWith
        // deferred.resolveWith = list.fireWith
        // deferred.rejectWith = list.fireWith
        deferred[tuple[0] + "With"] = list.fireWith;
      });

      // Make the deferred a promise
      _promise.promise(deferred);

      // Call given func if any
      if (func) {
        func.call(deferred, deferred);
      }

      // All done!
      return deferred;
    },
    // Deferred helper
    when: function when(singleValue) {
      var
        // count of uncompleted subordinates
        remaining = arguments.length,
        // count of unprocessed arguments
        i = remaining,
        // subordinate fulfillment data
        resolveContexts = Array(i),
        resolveValues = _slice.call(arguments),
        // the primary Deferred
        primary = jQuery.Deferred(),
        // subordinate callback factory
        updateFunc = function updateFunc(i) {
          return function (value) {
            resolveContexts[i] = this;
            resolveValues[i] = arguments.length > 1 ? _slice.call(arguments) : value;
            if (! --remaining) {
              primary.resolveWith(resolveContexts, resolveValues);
            }
          };
        };

      // Single- and empty arguments are adopted like Promise.resolve
      if (remaining <= 1) {
        adoptValue(singleValue, primary.done(updateFunc(i)).resolve, primary.reject, !remaining);

        // Use .then() to unwrap secondary thenables (cf. gh-3000)
        if (primary.state() === "pending" || isFunction(resolveValues[i] && resolveValues[i].then)) {
          return primary.then();
        }
      }

      // Multiple arguments are aggregated like Promise.all array elements
      while (i--) {
        adoptValue(resolveValues[i], updateFunc(i), primary.reject);
      }
      return primary.promise();
    }
  });

  // These usually indicate a programmer mistake during development,
  // warn about them ASAP rather than swallowing them by default.
  var rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
  jQuery.Deferred.exceptionHook = function (error, stack) {
    // Support: IE 8 - 9 only
    // Console exists when dev tools are open, which can happen at any time
    if (window.console && window.console.warn && error && rerrorNames.test(error.name)) {
      window.console.warn("jQuery.Deferred exception: " + error.message, error.stack, stack);
    }
  };
  jQuery.readyException = function (error) {
    window.setTimeout(function () {
      throw error;
    });
  };

  // The deferred used on DOM ready
  var readyList = jQuery.Deferred();
  jQuery.fn.ready = function (fn) {
    readyList.then(fn)

    // Wrap jQuery.readyException in a function so that the lookup
    // happens at the time of error handling instead of callback
    // registration.
    ["catch"](function (error) {
      jQuery.readyException(error);
    });
    return this;
  };
  jQuery.extend({
    // Is the DOM ready to be used? Set to true once it occurs.
    isReady: false,
    // A counter to track how many items to wait for before
    // the ready event fires. See trac-6781
    readyWait: 1,
    // Handle when the DOM is ready
    ready: function ready(wait) {
      // Abort if there are pending holds or we're already ready
      if (wait === true ? --jQuery.readyWait : jQuery.isReady) {
        return;
      }

      // Remember that the DOM is ready
      jQuery.isReady = true;

      // If a normal DOM Ready event fired, decrement, and wait if need be
      if (wait !== true && --jQuery.readyWait > 0) {
        return;
      }

      // If there are functions bound, to execute
      readyList.resolveWith(document, [jQuery]);
    }
  });
  jQuery.ready.then = readyList.then;

  // The ready event handler and self cleanup method
  function completed() {
    document.removeEventListener("DOMContentLoaded", completed);
    window.removeEventListener("load", completed);
    jQuery.ready();
  }

  // Catch cases where $(document).ready() is called
  // after the browser event has already occurred.
  // Support: IE <=9 - 10 only
  // Older IE sometimes signals "interactive" too soon
  if (document.readyState === "complete" || document.readyState !== "loading" && !document.documentElement.doScroll) {
    // Handle it asynchronously to allow scripts the opportunity to delay ready
    window.setTimeout(jQuery.ready);
  } else {
    // Use the handy event callback
    document.addEventListener("DOMContentLoaded", completed);

    // A fallback to window.onload, that will always work
    window.addEventListener("load", completed);
  }

  // Multifunctional method to get and set values of a collection
  // The value/s can optionally be executed if it's a function
  var access = function access(elems, fn, key, value, chainable, emptyGet, raw) {
    var i = 0,
      len = elems.length,
      bulk = key == null;

    // Sets many values
    if (toType(key) === "object") {
      chainable = true;
      for (i in key) {
        access(elems, fn, i, key[i], true, emptyGet, raw);
      }

      // Sets one value
    } else if (value !== undefined) {
      chainable = true;
      if (!isFunction(value)) {
        raw = true;
      }
      if (bulk) {
        // Bulk operations run against the entire set
        if (raw) {
          fn.call(elems, value);
          fn = null;

          // ...except when executing function values
        } else {
          bulk = fn;
          fn = function fn(elem, _key, value) {
            return bulk.call(jQuery(elem), value);
          };
        }
      }
      if (fn) {
        for (; i < len; i++) {
          fn(elems[i], key, raw ? value : value.call(elems[i], i, fn(elems[i], key)));
        }
      }
    }
    if (chainable) {
      return elems;
    }

    // Gets
    if (bulk) {
      return fn.call(elems);
    }
    return len ? fn(elems[0], key) : emptyGet;
  };

  // Matches dashed string for camelizing
  var rmsPrefix = /^-ms-/,
    rdashAlpha = /-([a-z])/g;

  // Used by camelCase as callback to replace()
  function fcamelCase(_all, letter) {
    return letter.toUpperCase();
  }

  // Convert dashed to camelCase; used by the css and data modules
  // Support: IE <=9 - 11, Edge 12 - 15
  // Microsoft forgot to hump their vendor prefix (trac-9572)
  function camelCase(string) {
    return string.replace(rmsPrefix, "ms-").replace(rdashAlpha, fcamelCase);
  }
  var acceptData = function acceptData(owner) {
    // Accepts only:
    //  - Node
    //    - Node.ELEMENT_NODE
    //    - Node.DOCUMENT_NODE
    //  - Object
    //    - Any
    return owner.nodeType === 1 || owner.nodeType === 9 || !+owner.nodeType;
  };
  function Data() {
    this.expando = jQuery.expando + Data.uid++;
  }
  Data.uid = 1;
  Data.prototype = {
    cache: function cache(owner) {
      // Check if the owner object already has a cache
      var value = owner[this.expando];

      // If not, create one
      if (!value) {
        value = {};

        // We can accept data for non-element nodes in modern browsers,
        // but we should not, see trac-8335.
        // Always return an empty object.
        if (acceptData(owner)) {
          // If it is a node unlikely to be stringify-ed or looped over
          // use plain assignment
          if (owner.nodeType) {
            owner[this.expando] = value;

            // Otherwise secure it in a non-enumerable property
            // configurable must be true to allow the property to be
            // deleted when data is removed
          } else {
            Object.defineProperty(owner, this.expando, {
              value: value,
              configurable: true
            });
          }
        }
      }
      return value;
    },
    set: function set(owner, data, value) {
      var prop,
        cache = this.cache(owner);

      // Handle: [ owner, key, value ] args
      // Always use camelCase key (gh-2257)
      if (typeof data === "string") {
        cache[camelCase(data)] = value;

        // Handle: [ owner, { properties } ] args
      } else {
        // Copy the properties one-by-one to the cache object
        for (prop in data) {
          cache[camelCase(prop)] = data[prop];
        }
      }
      return cache;
    },
    get: function get(owner, key) {
      return key === undefined ? this.cache(owner) :
      // Always use camelCase key (gh-2257)
      owner[this.expando] && owner[this.expando][camelCase(key)];
    },
    access: function access(owner, key, value) {
      // In cases where either:
      //
      //   1. No key was specified
      //   2. A string key was specified, but no value provided
      //
      // Take the "read" path and allow the get method to determine
      // which value to return, respectively either:
      //
      //   1. The entire cache object
      //   2. The data stored at the key
      //
      if (key === undefined || key && typeof key === "string" && value === undefined) {
        return this.get(owner, key);
      }

      // When the key is not a string, or both a key and value
      // are specified, set or extend (existing objects) with either:
      //
      //   1. An object of properties
      //   2. A key and value
      //
      this.set(owner, key, value);

      // Since the "set" path can have two possible entry points
      // return the expected data based on which path was taken[*]
      return value !== undefined ? value : key;
    },
    remove: function remove(owner, key) {
      var i,
        cache = owner[this.expando];
      if (cache === undefined) {
        return;
      }
      if (key !== undefined) {
        // Support array or space separated string of keys
        if (Array.isArray(key)) {
          // If key is an array of keys...
          // We always set camelCase keys, so remove that.
          key = key.map(camelCase);
        } else {
          key = camelCase(key);

          // If a key with the spaces exists, use it.
          // Otherwise, create an array by matching non-whitespace
          key = key in cache ? [key] : key.match(rnothtmlwhite) || [];
        }
        i = key.length;
        while (i--) {
          delete cache[key[i]];
        }
      }

      // Remove the expando if there's no more data
      if (key === undefined || jQuery.isEmptyObject(cache)) {
        // Support: Chrome <=35 - 45
        // Webkit & Blink performance suffers when deleting properties
        // from DOM nodes, so set to undefined instead
        // https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)
        if (owner.nodeType) {
          owner[this.expando] = undefined;
        } else {
          delete owner[this.expando];
        }
      }
    },
    hasData: function hasData(owner) {
      var cache = owner[this.expando];
      return cache !== undefined && !jQuery.isEmptyObject(cache);
    }
  };
  var dataPriv = new Data();
  var dataUser = new Data();

  //	Implementation Summary
  //
  //	1. Enforce API surface and semantic compatibility with 1.9.x branch
  //	2. Improve the module's maintainability by reducing the storage
  //		paths to a single mechanism.
  //	3. Use the same single mechanism to support "private" and "user" data.
  //	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
  //	5. Avoid exposing implementation details on user objects (eg. expando properties)
  //	6. Provide a clear path for implementation upgrade to WeakMap in 2014

  var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
    rmultiDash = /[A-Z]/g;
  function getData(data) {
    if (data === "true") {
      return true;
    }
    if (data === "false") {
      return false;
    }
    if (data === "null") {
      return null;
    }

    // Only convert to a number if it doesn't change the string
    if (data === +data + "") {
      return +data;
    }
    if (rbrace.test(data)) {
      return JSON.parse(data);
    }
    return data;
  }
  function dataAttr(elem, key, data) {
    var name;

    // If nothing was found internally, try to fetch any
    // data from the HTML5 data-* attribute
    if (data === undefined && elem.nodeType === 1) {
      name = "data-" + key.replace(rmultiDash, "-$&").toLowerCase();
      data = elem.getAttribute(name);
      if (typeof data === "string") {
        try {
          data = getData(data);
        } catch (e) {}

        // Make sure we set the data so it isn't changed later
        dataUser.set(elem, key, data);
      } else {
        data = undefined;
      }
    }
    return data;
  }
  jQuery.extend({
    hasData: function hasData(elem) {
      return dataUser.hasData(elem) || dataPriv.hasData(elem);
    },
    data: function data(elem, name, _data) {
      return dataUser.access(elem, name, _data);
    },
    removeData: function removeData(elem, name) {
      dataUser.remove(elem, name);
    },
    // TODO: Now that all calls to _data and _removeData have been replaced
    // with direct calls to dataPriv methods, these can be deprecated.
    _data: function _data(elem, name, data) {
      return dataPriv.access(elem, name, data);
    },
    _removeData: function _removeData(elem, name) {
      dataPriv.remove(elem, name);
    }
  });
  jQuery.fn.extend({
    data: function data(key, value) {
      var i,
        name,
        data,
        elem = this[0],
        attrs = elem && elem.attributes;

      // Gets all values
      if (key === undefined) {
        if (this.length) {
          data = dataUser.get(elem);
          if (elem.nodeType === 1 && !dataPriv.get(elem, "hasDataAttrs")) {
            i = attrs.length;
            while (i--) {
              // Support: IE 11 only
              // The attrs elements can be null (trac-14894)
              if (attrs[i]) {
                name = attrs[i].name;
                if (name.indexOf("data-") === 0) {
                  name = camelCase(name.slice(5));
                  dataAttr(elem, name, data[name]);
                }
              }
            }
            dataPriv.set(elem, "hasDataAttrs", true);
          }
        }
        return data;
      }

      // Sets multiple values
      if (typeof key === "object") {
        return this.each(function () {
          dataUser.set(this, key);
        });
      }
      return access(this, function (value) {
        var data;

        // The calling jQuery object (element matches) is not empty
        // (and therefore has an element appears at this[ 0 ]) and the
        // `value` parameter was not undefined. An empty jQuery object
        // will result in `undefined` for elem = this[ 0 ] which will
        // throw an exception if an attempt to read a data cache is made.
        if (elem && value === undefined) {
          // Attempt to get data from the cache
          // The key will always be camelCased in Data
          data = dataUser.get(elem, key);
          if (data !== undefined) {
            return data;
          }

          // Attempt to "discover" the data in
          // HTML5 custom data-* attrs
          data = dataAttr(elem, key);
          if (data !== undefined) {
            return data;
          }

          // We tried really hard, but the data doesn't exist.
          return;
        }

        // Set the data...
        this.each(function () {
          // We always store the camelCased key
          dataUser.set(this, key, value);
        });
      }, null, value, arguments.length > 1, null, true);
    },
    removeData: function removeData(key) {
      return this.each(function () {
        dataUser.remove(this, key);
      });
    }
  });
  jQuery.extend({
    queue: function queue(elem, type, data) {
      var queue;
      if (elem) {
        type = (type || "fx") + "queue";
        queue = dataPriv.get(elem, type);

        // Speed up dequeue by getting out quickly if this is just a lookup
        if (data) {
          if (!queue || Array.isArray(data)) {
            queue = dataPriv.access(elem, type, jQuery.makeArray(data));
          } else {
            queue.push(data);
          }
        }
        return queue || [];
      }
    },
    dequeue: function dequeue(elem, type) {
      type = type || "fx";
      var queue = jQuery.queue(elem, type),
        startLength = queue.length,
        fn = queue.shift(),
        hooks = jQuery._queueHooks(elem, type),
        next = function next() {
          jQuery.dequeue(elem, type);
        };

      // If the fx queue is dequeued, always remove the progress sentinel
      if (fn === "inprogress") {
        fn = queue.shift();
        startLength--;
      }
      if (fn) {
        // Add a progress sentinel to prevent the fx queue from being
        // automatically dequeued
        if (type === "fx") {
          queue.unshift("inprogress");
        }

        // Clear up the last queue stop function
        delete hooks.stop;
        fn.call(elem, next, hooks);
      }
      if (!startLength && hooks) {
        hooks.empty.fire();
      }
    },
    // Not public - generate a queueHooks object, or return the current one
    _queueHooks: function _queueHooks(elem, type) {
      var key = type + "queueHooks";
      return dataPriv.get(elem, key) || dataPriv.access(elem, key, {
        empty: jQuery.Callbacks("once memory").add(function () {
          dataPriv.remove(elem, [type + "queue", key]);
        })
      });
    }
  });
  jQuery.fn.extend({
    queue: function queue(type, data) {
      var setter = 2;
      if (typeof type !== "string") {
        data = type;
        type = "fx";
        setter--;
      }
      if (arguments.length < setter) {
        return jQuery.queue(this[0], type);
      }
      return data === undefined ? this : this.each(function () {
        var queue = jQuery.queue(this, type, data);

        // Ensure a hooks for this queue
        jQuery._queueHooks(this, type);
        if (type === "fx" && queue[0] !== "inprogress") {
          jQuery.dequeue(this, type);
        }
      });
    },
    dequeue: function dequeue(type) {
      return this.each(function () {
        jQuery.dequeue(this, type);
      });
    },
    clearQueue: function clearQueue(type) {
      return this.queue(type || "fx", []);
    },
    // Get a promise resolved when queues of a certain type
    // are emptied (fx is the type by default)
    promise: function promise(type, obj) {
      var tmp,
        count = 1,
        defer = jQuery.Deferred(),
        elements = this,
        i = this.length,
        resolve = function resolve() {
          if (! --count) {
            defer.resolveWith(elements, [elements]);
          }
        };
      if (typeof type !== "string") {
        obj = type;
        type = undefined;
      }
      type = type || "fx";
      while (i--) {
        tmp = dataPriv.get(elements[i], type + "queueHooks");
        if (tmp && tmp.empty) {
          count++;
          tmp.empty.add(resolve);
        }
      }
      resolve();
      return defer.promise(obj);
    }
  });
  var pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;
  var rcssNum = new RegExp("^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i");
  var cssExpand = ["Top", "Right", "Bottom", "Left"];
  var documentElement = document.documentElement;
  var isAttached = function isAttached(elem) {
      return jQuery.contains(elem.ownerDocument, elem);
    },
    composed = {
      composed: true
    };

  // Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only
  // Check attachment across shadow DOM boundaries when possible (gh-3504)
  // Support: iOS 10.0-10.2 only
  // Early iOS 10 versions support `attachShadow` but not `getRootNode`,
  // leading to errors. We need to check for `getRootNode`.
  if (documentElement.getRootNode) {
    isAttached = function isAttached(elem) {
      return jQuery.contains(elem.ownerDocument, elem) || elem.getRootNode(composed) === elem.ownerDocument;
    };
  }
  var isHiddenWithinTree = function isHiddenWithinTree(elem, el) {
    // isHiddenWithinTree might be called from jQuery#filter function;
    // in that case, element will be second argument
    elem = el || elem;

    // Inline style trumps all
    return elem.style.display === "none" || elem.style.display === "" &&
    // Otherwise, check computed style
    // Support: Firefox <=43 - 45
    // Disconnected elements can have computed display: none, so first confirm that elem is
    // in the document.
    isAttached(elem) && jQuery.css(elem, "display") === "none";
  };
  function adjustCSS(elem, prop, valueParts, tween) {
    var adjusted,
      scale,
      maxIterations = 20,
      currentValue = tween ? function () {
        return tween.cur();
      } : function () {
        return jQuery.css(elem, prop, "");
      },
      initial = currentValue(),
      unit = valueParts && valueParts[3] || (jQuery.cssNumber[prop] ? "" : "px"),
      // Starting value computation is required for potential unit mismatches
      initialInUnit = elem.nodeType && (jQuery.cssNumber[prop] || unit !== "px" && +initial) && rcssNum.exec(jQuery.css(elem, prop));
    if (initialInUnit && initialInUnit[3] !== unit) {
      // Support: Firefox <=54
      // Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)
      initial = initial / 2;

      // Trust units reported by jQuery.css
      unit = unit || initialInUnit[3];

      // Iteratively approximate from a nonzero starting point
      initialInUnit = +initial || 1;
      while (maxIterations--) {
        // Evaluate and update our best guess (doubling guesses that zero out).
        // Finish if the scale equals or crosses 1 (making the old*new product non-positive).
        jQuery.style(elem, prop, initialInUnit + unit);
        if ((1 - scale) * (1 - (scale = currentValue() / initial || 0.5)) <= 0) {
          maxIterations = 0;
        }
        initialInUnit = initialInUnit / scale;
      }
      initialInUnit = initialInUnit * 2;
      jQuery.style(elem, prop, initialInUnit + unit);

      // Make sure we update the tween properties later on
      valueParts = valueParts || [];
    }
    if (valueParts) {
      initialInUnit = +initialInUnit || +initial || 0;

      // Apply relative offset (+=/-=) if specified
      adjusted = valueParts[1] ? initialInUnit + (valueParts[1] + 1) * valueParts[2] : +valueParts[2];
      if (tween) {
        tween.unit = unit;
        tween.start = initialInUnit;
        tween.end = adjusted;
      }
    }
    return adjusted;
  }
  var defaultDisplayMap = {};
  function getDefaultDisplay(elem) {
    var temp,
      doc = elem.ownerDocument,
      nodeName = elem.nodeName,
      display = defaultDisplayMap[nodeName];
    if (display) {
      return display;
    }
    temp = doc.body.appendChild(doc.createElement(nodeName));
    display = jQuery.css(temp, "display");
    temp.parentNode.removeChild(temp);
    if (display === "none") {
      display = "block";
    }
    defaultDisplayMap[nodeName] = display;
    return display;
  }
  function showHide(elements, show) {
    var display,
      elem,
      values = [],
      index = 0,
      length = elements.length;

    // Determine new display value for elements that need to change
    for (; index < length; index++) {
      elem = elements[index];
      if (!elem.style) {
        continue;
      }
      display = elem.style.display;
      if (show) {
        // Since we force visibility upon cascade-hidden elements, an immediate (and slow)
        // check is required in this first loop unless we have a nonempty display value (either
        // inline or about-to-be-restored)
        if (display === "none") {
          values[index] = dataPriv.get(elem, "display") || null;
          if (!values[index]) {
            elem.style.display = "";
          }
        }
        if (elem.style.display === "" && isHiddenWithinTree(elem)) {
          values[index] = getDefaultDisplay(elem);
        }
      } else {
        if (display !== "none") {
          values[index] = "none";

          // Remember what we're overwriting
          dataPriv.set(elem, "display", display);
        }
      }
    }

    // Set the display of the elements in a second loop to avoid constant reflow
    for (index = 0; index < length; index++) {
      if (values[index] != null) {
        elements[index].style.display = values[index];
      }
    }
    return elements;
  }
  jQuery.fn.extend({
    show: function show() {
      return showHide(this, true);
    },
    hide: function hide() {
      return showHide(this);
    },
    toggle: function toggle(state) {
      if (typeof state === "boolean") {
        return state ? this.show() : this.hide();
      }
      return this.each(function () {
        if (isHiddenWithinTree(this)) {
          jQuery(this).show();
        } else {
          jQuery(this).hide();
        }
      });
    }
  });
  var rcheckableType = /^(?:checkbox|radio)$/i;
  var rtagName = /<([a-z][^\/\0>\x20\t\r\n\f]*)/i;
  var rscriptType = /^$|^module$|\/(?:java|ecma)script/i;
  (function () {
    var fragment = document.createDocumentFragment(),
      div = fragment.appendChild(document.createElement("div")),
      input = document.createElement("input");

    // Support: Android 4.0 - 4.3 only
    // Check state lost if the name is set (trac-11217)
    // Support: Windows Web Apps (WWA)
    // `name` and `type` must use .setAttribute for WWA (trac-14901)
    input.setAttribute("type", "radio");
    input.setAttribute("checked", "checked");
    input.setAttribute("name", "t");
    div.appendChild(input);

    // Support: Android <=4.1 only
    // Older WebKit doesn't clone checked state correctly in fragments
    support.checkClone = div.cloneNode(true).cloneNode(true).lastChild.checked;

    // Support: IE <=11 only
    // Make sure textarea (and checkbox) defaultValue is properly cloned
    div.innerHTML = "<textarea>x</textarea>";
    support.noCloneChecked = !!div.cloneNode(true).lastChild.defaultValue;

    // Support: IE <=9 only
    // IE <=9 replaces <option> tags with their contents when inserted outside of
    // the select element.
    div.innerHTML = "<option></option>";
    support.option = !!div.lastChild;
  })();

  // We have to close these tags to support XHTML (trac-13200)
  var wrapMap = {
    // XHTML parsers do not magically insert elements in the
    // same way that tag soup parsers do. So we cannot shorten
    // this by omitting <tbody> or other required elements.
    thead: [1, "<table>", "</table>"],
    col: [2, "<table><colgroup>", "</colgroup></table>"],
    tr: [2, "<table><tbody>", "</tbody></table>"],
    td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
    _default: [0, "", ""]
  };
  wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
  wrapMap.th = wrapMap.td;

  // Support: IE <=9 only
  if (!support.option) {
    wrapMap.optgroup = wrapMap.option = [1, "<select multiple='multiple'>", "</select>"];
  }
  function getAll(context, tag) {
    // Support: IE <=9 - 11 only
    // Use typeof to avoid zero-argument method invocation on host objects (trac-15151)
    var ret;
    if (typeof context.getElementsByTagName !== "undefined") {
      ret = context.getElementsByTagName(tag || "*");
    } else if (typeof context.querySelectorAll !== "undefined") {
      ret = context.querySelectorAll(tag || "*");
    } else {
      ret = [];
    }
    if (tag === undefined || tag && nodeName(context, tag)) {
      return jQuery.merge([context], ret);
    }
    return ret;
  }

  // Mark scripts as having already been evaluated
  function setGlobalEval(elems, refElements) {
    var i = 0,
      l = elems.length;
    for (; i < l; i++) {
      dataPriv.set(elems[i], "globalEval", !refElements || dataPriv.get(refElements[i], "globalEval"));
    }
  }
  var rhtml = /<|&#?\w+;/;
  function buildFragment(elems, context, scripts, selection, ignored) {
    var elem,
      tmp,
      tag,
      wrap,
      attached,
      j,
      fragment = context.createDocumentFragment(),
      nodes = [],
      i = 0,
      l = elems.length;
    for (; i < l; i++) {
      elem = elems[i];
      if (elem || elem === 0) {
        // Add nodes directly
        if (toType(elem) === "object") {
          // Support: Android <=4.0 only, PhantomJS 1 only
          // push.apply(_, arraylike) throws on ancient WebKit
          jQuery.merge(nodes, elem.nodeType ? [elem] : elem);

          // Convert non-html into a text node
        } else if (!rhtml.test(elem)) {
          nodes.push(context.createTextNode(elem));

          // Convert html into DOM nodes
        } else {
          tmp = tmp || fragment.appendChild(context.createElement("div"));

          // Deserialize a standard representation
          tag = (rtagName.exec(elem) || ["", ""])[1].toLowerCase();
          wrap = wrapMap[tag] || wrapMap._default;
          tmp.innerHTML = wrap[1] + jQuery.htmlPrefilter(elem) + wrap[2];

          // Descend through wrappers to the right content
          j = wrap[0];
          while (j--) {
            tmp = tmp.lastChild;
          }

          // Support: Android <=4.0 only, PhantomJS 1 only
          // push.apply(_, arraylike) throws on ancient WebKit
          jQuery.merge(nodes, tmp.childNodes);

          // Remember the top-level container
          tmp = fragment.firstChild;

          // Ensure the created nodes are orphaned (trac-12392)
          tmp.textContent = "";
        }
      }
    }

    // Remove wrapper from fragment
    fragment.textContent = "";
    i = 0;
    while (elem = nodes[i++]) {
      // Skip elements already in the context collection (trac-4087)
      if (selection && jQuery.inArray(elem, selection) > -1) {
        if (ignored) {
          ignored.push(elem);
        }
        continue;
      }
      attached = isAttached(elem);

      // Append to fragment
      tmp = getAll(fragment.appendChild(elem), "script");

      // Preserve script evaluation history
      if (attached) {
        setGlobalEval(tmp);
      }

      // Capture executables
      if (scripts) {
        j = 0;
        while (elem = tmp[j++]) {
          if (rscriptType.test(elem.type || "")) {
            scripts.push(elem);
          }
        }
      }
    }
    return fragment;
  }
  var rtypenamespace = /^([^.]*)(?:\.(.+)|)/;
  function returnTrue() {
    return true;
  }
  function returnFalse() {
    return false;
  }

  // Support: IE <=9 - 11+
  // focus() and blur() are asynchronous, except when they are no-op.
  // So expect focus to be synchronous when the element is already active,
  // and blur to be synchronous when the element is not already active.
  // (focus and blur are always synchronous in other supported browsers,
  // this just defines when we can count on it).
  function expectSync(elem, type) {
    return elem === safeActiveElement() === (type === "focus");
  }

  // Support: IE <=9 only
  // Accessing document.activeElement can throw unexpectedly
  // https://bugs.jquery.com/ticket/13393
  function safeActiveElement() {
    try {
      return document.activeElement;
    } catch (err) {}
  }
  function _on(elem, types, selector, data, fn, one) {
    var origFn, type;

    // Types can be a map of types/handlers
    if (typeof types === "object") {
      // ( types-Object, selector, data )
      if (typeof selector !== "string") {
        // ( types-Object, data )
        data = data || selector;
        selector = undefined;
      }
      for (type in types) {
        _on(elem, type, selector, data, types[type], one);
      }
      return elem;
    }
    if (data == null && fn == null) {
      // ( types, fn )
      fn = selector;
      data = selector = undefined;
    } else if (fn == null) {
      if (typeof selector === "string") {
        // ( types, selector, fn )
        fn = data;
        data = undefined;
      } else {
        // ( types, data, fn )
        fn = data;
        data = selector;
        selector = undefined;
      }
    }
    if (fn === false) {
      fn = returnFalse;
    } else if (!fn) {
      return elem;
    }
    if (one === 1) {
      origFn = fn;
      fn = function fn(event) {
        // Can use an empty set, since event contains the info
        jQuery().off(event);
        return origFn.apply(this, arguments);
      };

      // Use same guid so caller can remove using origFn
      fn.guid = origFn.guid || (origFn.guid = jQuery.guid++);
    }
    return elem.each(function () {
      jQuery.event.add(this, types, fn, data, selector);
    });
  }

  /*
   * Helper functions for managing events -- not part of the public interface.
   * Props to Dean Edwards' addEvent library for many of the ideas.
   */
  jQuery.event = {
    global: {},
    add: function add(elem, types, handler, data, selector) {
      var handleObjIn,
        eventHandle,
        tmp,
        events,
        t,
        handleObj,
        special,
        handlers,
        type,
        namespaces,
        origType,
        elemData = dataPriv.get(elem);

      // Only attach events to objects that accept data
      if (!acceptData(elem)) {
        return;
      }

      // Caller can pass in an object of custom data in lieu of the handler
      if (handler.handler) {
        handleObjIn = handler;
        handler = handleObjIn.handler;
        selector = handleObjIn.selector;
      }

      // Ensure that invalid selectors throw exceptions at attach time
      // Evaluate against documentElement in case elem is a non-element node (e.g., document)
      if (selector) {
        jQuery.find.matchesSelector(documentElement, selector);
      }

      // Make sure that the handler has a unique ID, used to find/remove it later
      if (!handler.guid) {
        handler.guid = jQuery.guid++;
      }

      // Init the element's event structure and main handler, if this is the first
      if (!(events = elemData.events)) {
        events = elemData.events = Object.create(null);
      }
      if (!(eventHandle = elemData.handle)) {
        eventHandle = elemData.handle = function (e) {
          // Discard the second event of a jQuery.event.trigger() and
          // when an event is called after a page has unloaded
          return typeof jQuery !== "undefined" && jQuery.event.triggered !== e.type ? jQuery.event.dispatch.apply(elem, arguments) : undefined;
        };
      }

      // Handle multiple events separated by a space
      types = (types || "").match(rnothtmlwhite) || [""];
      t = types.length;
      while (t--) {
        tmp = rtypenamespace.exec(types[t]) || [];
        type = origType = tmp[1];
        namespaces = (tmp[2] || "").split(".").sort();

        // There *must* be a type, no attaching namespace-only handlers
        if (!type) {
          continue;
        }

        // If event changes its type, use the special event handlers for the changed type
        special = jQuery.event.special[type] || {};

        // If selector defined, determine special event api type, otherwise given type
        type = (selector ? special.delegateType : special.bindType) || type;

        // Update special based on newly reset type
        special = jQuery.event.special[type] || {};

        // handleObj is passed to all event handlers
        handleObj = jQuery.extend({
          type: type,
          origType: origType,
          data: data,
          handler: handler,
          guid: handler.guid,
          selector: selector,
          needsContext: selector && jQuery.expr.match.needsContext.test(selector),
          namespace: namespaces.join(".")
        }, handleObjIn);

        // Init the event handler queue if we're the first
        if (!(handlers = events[type])) {
          handlers = events[type] = [];
          handlers.delegateCount = 0;

          // Only use addEventListener if the special events handler returns false
          if (!special.setup || special.setup.call(elem, data, namespaces, eventHandle) === false) {
            if (elem.addEventListener) {
              elem.addEventListener(type, eventHandle);
            }
          }
        }
        if (special.add) {
          special.add.call(elem, handleObj);
          if (!handleObj.handler.guid) {
            handleObj.handler.guid = handler.guid;
          }
        }

        // Add to the element's handler list, delegates in front
        if (selector) {
          handlers.splice(handlers.delegateCount++, 0, handleObj);
        } else {
          handlers.push(handleObj);
        }

        // Keep track of which events have ever been used, for event optimization
        jQuery.event.global[type] = true;
      }
    },
    // Detach an event or set of events from an element
    remove: function remove(elem, types, handler, selector, mappedTypes) {
      var j,
        origCount,
        tmp,
        events,
        t,
        handleObj,
        special,
        handlers,
        type,
        namespaces,
        origType,
        elemData = dataPriv.hasData(elem) && dataPriv.get(elem);
      if (!elemData || !(events = elemData.events)) {
        return;
      }

      // Once for each type.namespace in types; type may be omitted
      types = (types || "").match(rnothtmlwhite) || [""];
      t = types.length;
      while (t--) {
        tmp = rtypenamespace.exec(types[t]) || [];
        type = origType = tmp[1];
        namespaces = (tmp[2] || "").split(".").sort();

        // Unbind all events (on this namespace, if provided) for the element
        if (!type) {
          for (type in events) {
            jQuery.event.remove(elem, type + types[t], handler, selector, true);
          }
          continue;
        }
        special = jQuery.event.special[type] || {};
        type = (selector ? special.delegateType : special.bindType) || type;
        handlers = events[type] || [];
        tmp = tmp[2] && new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)");

        // Remove matching events
        origCount = j = handlers.length;
        while (j--) {
          handleObj = handlers[j];
          if ((mappedTypes || origType === handleObj.origType) && (!handler || handler.guid === handleObj.guid) && (!tmp || tmp.test(handleObj.namespace)) && (!selector || selector === handleObj.selector || selector === "**" && handleObj.selector)) {
            handlers.splice(j, 1);
            if (handleObj.selector) {
              handlers.delegateCount--;
            }
            if (special.remove) {
              special.remove.call(elem, handleObj);
            }
          }
        }

        // Remove generic event handler if we removed something and no more handlers exist
        // (avoids potential for endless recursion during removal of special event handlers)
        if (origCount && !handlers.length) {
          if (!special.teardown || special.teardown.call(elem, namespaces, elemData.handle) === false) {
            jQuery.removeEvent(elem, type, elemData.handle);
          }
          delete events[type];
        }
      }

      // Remove data and the expando if it's no longer used
      if (jQuery.isEmptyObject(events)) {
        dataPriv.remove(elem, "handle events");
      }
    },
    dispatch: function dispatch(nativeEvent) {
      var i,
        j,
        ret,
        matched,
        handleObj,
        handlerQueue,
        args = new Array(arguments.length),
        // Make a writable jQuery.Event from the native event object
        event = jQuery.event.fix(nativeEvent),
        handlers = (dataPriv.get(this, "events") || Object.create(null))[event.type] || [],
        special = jQuery.event.special[event.type] || {};

      // Use the fix-ed jQuery.Event rather than the (read-only) native event
      args[0] = event;
      for (i = 1; i < arguments.length; i++) {
        args[i] = arguments[i];
      }
      event.delegateTarget = this;

      // Call the preDispatch hook for the mapped type, and let it bail if desired
      if (special.preDispatch && special.preDispatch.call(this, event) === false) {
        return;
      }

      // Determine handlers
      handlerQueue = jQuery.event.handlers.call(this, event, handlers);

      // Run delegates first; they may want to stop propagation beneath us
      i = 0;
      while ((matched = handlerQueue[i++]) && !event.isPropagationStopped()) {
        event.currentTarget = matched.elem;
        j = 0;
        while ((handleObj = matched.handlers[j++]) && !event.isImmediatePropagationStopped()) {
          // If the event is namespaced, then each handler is only invoked if it is
          // specially universal or its namespaces are a superset of the event's.
          if (!event.rnamespace || handleObj.namespace === false || event.rnamespace.test(handleObj.namespace)) {
            event.handleObj = handleObj;
            event.data = handleObj.data;
            ret = ((jQuery.event.special[handleObj.origType] || {}).handle || handleObj.handler).apply(matched.elem, args);
            if (ret !== undefined) {
              if ((event.result = ret) === false) {
                event.preventDefault();
                event.stopPropagation();
              }
            }
          }
        }
      }

      // Call the postDispatch hook for the mapped type
      if (special.postDispatch) {
        special.postDispatch.call(this, event);
      }
      return event.result;
    },
    handlers: function handlers(event, _handlers) {
      var i,
        handleObj,
        sel,
        matchedHandlers,
        matchedSelectors,
        handlerQueue = [],
        delegateCount = _handlers.delegateCount,
        cur = event.target;

      // Find delegate handlers
      if (delegateCount &&
      // Support: IE <=9
      // Black-hole SVG <use> instance trees (trac-13180)
      cur.nodeType &&
      // Support: Firefox <=42
      // Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)
      // https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click
      // Support: IE 11 only
      // ...but not arrow key "clicks" of radio inputs, which can have `button` -1 (gh-2343)
      !(event.type === "click" && event.button >= 1)) {
        for (; cur !== this; cur = cur.parentNode || this) {
          // Don't check non-elements (trac-13208)
          // Don't process clicks on disabled elements (trac-6911, trac-8165, trac-11382, trac-11764)
          if (cur.nodeType === 1 && !(event.type === "click" && cur.disabled === true)) {
            matchedHandlers = [];
            matchedSelectors = {};
            for (i = 0; i < delegateCount; i++) {
              handleObj = _handlers[i];

              // Don't conflict with Object.prototype properties (trac-13203)
              sel = handleObj.selector + " ";
              if (matchedSelectors[sel] === undefined) {
                matchedSelectors[sel] = handleObj.needsContext ? jQuery(sel, this).index(cur) > -1 : jQuery.find(sel, this, null, [cur]).length;
              }
              if (matchedSelectors[sel]) {
                matchedHandlers.push(handleObj);
              }
            }
            if (matchedHandlers.length) {
              handlerQueue.push({
                elem: cur,
                handlers: matchedHandlers
              });
            }
          }
        }
      }

      // Add the remaining (directly-bound) handlers
      cur = this;
      if (delegateCount < _handlers.length) {
        handlerQueue.push({
          elem: cur,
          handlers: _handlers.slice(delegateCount)
        });
      }
      return handlerQueue;
    },
    addProp: function addProp(name, hook) {
      Object.defineProperty(jQuery.Event.prototype, name, {
        enumerable: true,
        configurable: true,
        get: isFunction(hook) ? function () {
          if (this.originalEvent) {
            return hook(this.originalEvent);
          }
        } : function () {
          if (this.originalEvent) {
            return this.originalEvent[name];
          }
        },
        set: function set(value) {
          Object.defineProperty(this, name, {
            enumerable: true,
            configurable: true,
            writable: true,
            value: value
          });
        }
      });
    },
    fix: function fix(originalEvent) {
      return originalEvent[jQuery.expando] ? originalEvent : new jQuery.Event(originalEvent);
    },
    special: {
      load: {
        // Prevent triggered image.load events from bubbling to window.load
        noBubble: true
      },
      click: {
        // Utilize native event to ensure correct state for checkable inputs
        setup: function setup(data) {
          // For mutual compressibility with _default, replace `this` access with a local var.
          // `|| data` is dead code meant only to preserve the variable through minification.
          var el = this || data;

          // Claim the first handler
          if (rcheckableType.test(el.type) && el.click && nodeName(el, "input")) {
            // dataPriv.set( el, "click", ... )
            leverageNative(el, "click", returnTrue);
          }

          // Return false to allow normal processing in the caller
          return false;
        },
        trigger: function trigger(data) {
          // For mutual compressibility with _default, replace `this` access with a local var.
          // `|| data` is dead code meant only to preserve the variable through minification.
          var el = this || data;

          // Force setup before triggering a click
          if (rcheckableType.test(el.type) && el.click && nodeName(el, "input")) {
            leverageNative(el, "click");
          }

          // Return non-false to allow normal event-path propagation
          return true;
        },
        // For cross-browser consistency, suppress native .click() on links
        // Also prevent it if we're currently inside a leveraged native-event stack
        _default: function _default(event) {
          var target = event.target;
          return rcheckableType.test(target.type) && target.click && nodeName(target, "input") && dataPriv.get(target, "click") || nodeName(target, "a");
        }
      },
      beforeunload: {
        postDispatch: function postDispatch(event) {
          // Support: Firefox 20+
          // Firefox doesn't alert if the returnValue field is not set.
          if (event.result !== undefined && event.originalEvent) {
            event.originalEvent.returnValue = event.result;
          }
        }
      }
    }
  };

  // Ensure the presence of an event listener that handles manually-triggered
  // synthetic events by interrupting progress until reinvoked in response to
  // *native* events that it fires directly, ensuring that state changes have
  // already occurred before other listeners are invoked.
  function leverageNative(el, type, expectSync) {
    // Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add
    if (!expectSync) {
      if (dataPriv.get(el, type) === undefined) {
        jQuery.event.add(el, type, returnTrue);
      }
      return;
    }

    // Register the controller as a special universal handler for all event namespaces
    dataPriv.set(el, type, false);
    jQuery.event.add(el, type, {
      namespace: false,
      handler: function handler(event) {
        var notAsync,
          result,
          saved = dataPriv.get(this, type);
        if (event.isTrigger & 1 && this[type]) {
          // Interrupt processing of the outer synthetic .trigger()ed event
          // Saved data should be false in such cases, but might be a leftover capture object
          // from an async native handler (gh-4350)
          if (!saved.length) {
            // Store arguments for use when handling the inner native event
            // There will always be at least one argument (an event object), so this array
            // will not be confused with a leftover capture object.
            saved = _slice.call(arguments);
            dataPriv.set(this, type, saved);

            // Trigger the native event and capture its result
            // Support: IE <=9 - 11+
            // focus() and blur() are asynchronous
            notAsync = expectSync(this, type);
            this[type]();
            result = dataPriv.get(this, type);
            if (saved !== result || notAsync) {
              dataPriv.set(this, type, false);
            } else {
              result = {};
            }
            if (saved !== result) {
              // Cancel the outer synthetic event
              event.stopImmediatePropagation();
              event.preventDefault();

              // Support: Chrome 86+
              // In Chrome, if an element having a focusout handler is blurred by
              // clicking outside of it, it invokes the handler synchronously. If
              // that handler calls `.remove()` on the element, the data is cleared,
              // leaving `result` undefined. We need to guard against this.
              return result && result.value;
            }

            // If this is an inner synthetic event for an event with a bubbling surrogate
            // (focus or blur), assume that the surrogate already propagated from triggering the
            // native event and prevent that from happening again here.
            // This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the
            // bubbling surrogate propagates *after* the non-bubbling base), but that seems
            // less bad than duplication.
          } else if ((jQuery.event.special[type] || {}).delegateType) {
            event.stopPropagation();
          }

          // If this is a native event triggered above, everything is now in order
          // Fire an inner synthetic event with the original arguments
        } else if (saved.length) {
          // ...and capture the result
          dataPriv.set(this, type, {
            value: jQuery.event.trigger(
            // Support: IE <=9 - 11+
            // Extend with the prototype to reset the above stopImmediatePropagation()
            jQuery.extend(saved[0], jQuery.Event.prototype), saved.slice(1), this)
          });

          // Abort handling of the native event
          event.stopImmediatePropagation();
        }
      }
    });
  }
  jQuery.removeEvent = function (elem, type, handle) {
    // This "if" is needed for plain objects
    if (elem.removeEventListener) {
      elem.removeEventListener(type, handle);
    }
  };
  jQuery.Event = function (src, props) {
    // Allow instantiation without the 'new' keyword
    if (!(this instanceof jQuery.Event)) {
      return new jQuery.Event(src, props);
    }

    // Event object
    if (src && src.type) {
      this.originalEvent = src;
      this.type = src.type;

      // Events bubbling up the document may have been marked as prevented
      // by a handler lower down the tree; reflect the correct value.
      this.isDefaultPrevented = src.defaultPrevented || src.defaultPrevented === undefined &&
      // Support: Android <=2.3 only
      src.returnValue === false ? returnTrue : returnFalse;

      // Create target properties
      // Support: Safari <=6 - 7 only
      // Target should not be a text node (trac-504, trac-13143)
      this.target = src.target && src.target.nodeType === 3 ? src.target.parentNode : src.target;
      this.currentTarget = src.currentTarget;
      this.relatedTarget = src.relatedTarget;

      // Event type
    } else {
      this.type = src;
    }

    // Put explicitly provided properties onto the event object
    if (props) {
      jQuery.extend(this, props);
    }

    // Create a timestamp if incoming event doesn't have one
    this.timeStamp = src && src.timeStamp || Date.now();

    // Mark it as fixed
    this[jQuery.expando] = true;
  };

  // jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
  // https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
  jQuery.Event.prototype = {
    constructor: jQuery.Event,
    isDefaultPrevented: returnFalse,
    isPropagationStopped: returnFalse,
    isImmediatePropagationStopped: returnFalse,
    isSimulated: false,
    preventDefault: function preventDefault() {
      var e = this.originalEvent;
      this.isDefaultPrevented = returnTrue;
      if (e && !this.isSimulated) {
        e.preventDefault();
      }
    },
    stopPropagation: function stopPropagation() {
      var e = this.originalEvent;
      this.isPropagationStopped = returnTrue;
      if (e && !this.isSimulated) {
        e.stopPropagation();
      }
    },
    stopImmediatePropagation: function stopImmediatePropagation() {
      var e = this.originalEvent;
      this.isImmediatePropagationStopped = returnTrue;
      if (e && !this.isSimulated) {
        e.stopImmediatePropagation();
      }
      this.stopPropagation();
    }
  };

  // Includes all common event props including KeyEvent and MouseEvent specific props
  jQuery.each({
    altKey: true,
    bubbles: true,
    cancelable: true,
    changedTouches: true,
    ctrlKey: true,
    detail: true,
    eventPhase: true,
    metaKey: true,
    pageX: true,
    pageY: true,
    shiftKey: true,
    view: true,
    "char": true,
    code: true,
    charCode: true,
    key: true,
    keyCode: true,
    button: true,
    buttons: true,
    clientX: true,
    clientY: true,
    offsetX: true,
    offsetY: true,
    pointerId: true,
    pointerType: true,
    screenX: true,
    screenY: true,
    targetTouches: true,
    toElement: true,
    touches: true,
    which: true
  }, jQuery.event.addProp);
  jQuery.each({
    focus: "focusin",
    blur: "focusout"
  }, function (type, delegateType) {
    jQuery.event.special[type] = {
      // Utilize native event if possible so blur/focus sequence is correct
      setup: function setup() {
        // Claim the first handler
        // dataPriv.set( this, "focus", ... )
        // dataPriv.set( this, "blur", ... )
        leverageNative(this, type, expectSync);

        // Return false to allow normal processing in the caller
        return false;
      },
      trigger: function trigger() {
        // Force setup before trigger
        leverageNative(this, type);

        // Return non-false to allow normal event-path propagation
        return true;
      },
      // Suppress native focus or blur if we're currently inside
      // a leveraged native-event stack
      _default: function _default(event) {
        return dataPriv.get(event.target, type);
      },
      delegateType: delegateType
    };
  });

  // Create mouseenter/leave events using mouseover/out and event-time checks
  // so that event delegation works in jQuery.
  // Do the same for pointerenter/pointerleave and pointerover/pointerout
  //
  // Support: Safari 7 only
  // Safari sends mouseenter too often; see:
  // https://bugs.chromium.org/p/chromium/issues/detail?id=470258
  // for the description of the bug (it existed in older Chrome versions as well).
  jQuery.each({
    mouseenter: "mouseover",
    mouseleave: "mouseout",
    pointerenter: "pointerover",
    pointerleave: "pointerout"
  }, function (orig, fix) {
    jQuery.event.special[orig] = {
      delegateType: fix,
      bindType: fix,
      handle: function handle(event) {
        var ret,
          target = this,
          related = event.relatedTarget,
          handleObj = event.handleObj;

        // For mouseenter/leave call the handler if related is outside the target.
        // NB: No relatedTarget if the mouse left/entered the browser window
        if (!related || related !== target && !jQuery.contains(target, related)) {
          event.type = handleObj.origType;
          ret = handleObj.handler.apply(this, arguments);
          event.type = fix;
        }
        return ret;
      }
    };
  });
  jQuery.fn.extend({
    on: function on(types, selector, data, fn) {
      return _on(this, types, selector, data, fn);
    },
    one: function one(types, selector, data, fn) {
      return _on(this, types, selector, data, fn, 1);
    },
    off: function off(types, selector, fn) {
      var handleObj, type;
      if (types && types.preventDefault && types.handleObj) {
        // ( event )  dispatched jQuery.Event
        handleObj = types.handleObj;
        jQuery(types.delegateTarget).off(handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType, handleObj.selector, handleObj.handler);
        return this;
      }
      if (typeof types === "object") {
        // ( types-object [, selector] )
        for (type in types) {
          this.off(type, selector, types[type]);
        }
        return this;
      }
      if (selector === false || typeof selector === "function") {
        // ( types [, fn] )
        fn = selector;
        selector = undefined;
      }
      if (fn === false) {
        fn = returnFalse;
      }
      return this.each(function () {
        jQuery.event.remove(this, types, fn, selector);
      });
    }
  });
  var
    // Support: IE <=10 - 11, Edge 12 - 13 only
    // In IE/Edge using regex groups here causes severe slowdowns.
    // See https://connect.microsoft.com/IE/feedback/details/1736512/
    rnoInnerhtml = /<script|<style|<link/i,
    // checked="checked" or checked
    rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
    rcleanScript = /^\s*<!\[CDATA\[|\]\]>\s*$/g;

  // Prefer a tbody over its parent table for containing new rows
  function manipulationTarget(elem, content) {
    if (nodeName(elem, "table") && nodeName(content.nodeType !== 11 ? content : content.firstChild, "tr")) {
      return jQuery(elem).children("tbody")[0] || elem;
    }
    return elem;
  }

  // Replace/restore the type attribute of script elements for safe DOM manipulation
  function disableScript(elem) {
    elem.type = (elem.getAttribute("type") !== null) + "/" + elem.type;
    return elem;
  }
  function restoreScript(elem) {
    if ((elem.type || "").slice(0, 5) === "true/") {
      elem.type = elem.type.slice(5);
    } else {
      elem.removeAttribute("type");
    }
    return elem;
  }
  function cloneCopyEvent(src, dest) {
    var i, l, type, pdataOld, udataOld, udataCur, events;
    if (dest.nodeType !== 1) {
      return;
    }

    // 1. Copy private data: events, handlers, etc.
    if (dataPriv.hasData(src)) {
      pdataOld = dataPriv.get(src);
      events = pdataOld.events;
      if (events) {
        dataPriv.remove(dest, "handle events");
        for (type in events) {
          for (i = 0, l = events[type].length; i < l; i++) {
            jQuery.event.add(dest, type, events[type][i]);
          }
        }
      }
    }

    // 2. Copy user data
    if (dataUser.hasData(src)) {
      udataOld = dataUser.access(src);
      udataCur = jQuery.extend({}, udataOld);
      dataUser.set(dest, udataCur);
    }
  }

  // Fix IE bugs, see support tests
  function fixInput(src, dest) {
    var nodeName = dest.nodeName.toLowerCase();

    // Fails to persist the checked state of a cloned checkbox or radio button.
    if (nodeName === "input" && rcheckableType.test(src.type)) {
      dest.checked = src.checked;

      // Fails to return the selected option to the default selected state when cloning options
    } else if (nodeName === "input" || nodeName === "textarea") {
      dest.defaultValue = src.defaultValue;
    }
  }
  function domManip(collection, args, callback, ignored) {
    // Flatten any nested arrays
    args = flat(args);
    var fragment,
      first,
      scripts,
      hasScripts,
      node,
      doc,
      i = 0,
      l = collection.length,
      iNoClone = l - 1,
      value = args[0],
      valueIsFunction = isFunction(value);

    // We can't cloneNode fragments that contain checked, in WebKit
    if (valueIsFunction || l > 1 && typeof value === "string" && !support.checkClone && rchecked.test(value)) {
      return collection.each(function (index) {
        var self = collection.eq(index);
        if (valueIsFunction) {
          args[0] = value.call(this, index, self.html());
        }
        domManip(self, args, callback, ignored);
      });
    }
    if (l) {
      fragment = buildFragment(args, collection[0].ownerDocument, false, collection, ignored);
      first = fragment.firstChild;
      if (fragment.childNodes.length === 1) {
        fragment = first;
      }

      // Require either new content or an interest in ignored elements to invoke the callback
      if (first || ignored) {
        scripts = jQuery.map(getAll(fragment, "script"), disableScript);
        hasScripts = scripts.length;

        // Use the original fragment for the last item
        // instead of the first because it can end up
        // being emptied incorrectly in certain situations (trac-8070).
        for (; i < l; i++) {
          node = fragment;
          if (i !== iNoClone) {
            node = jQuery.clone(node, true, true);

            // Keep references to cloned scripts for later restoration
            if (hasScripts) {
              // Support: Android <=4.0 only, PhantomJS 1 only
              // push.apply(_, arraylike) throws on ancient WebKit
              jQuery.merge(scripts, getAll(node, "script"));
            }
          }
          callback.call(collection[i], node, i);
        }
        if (hasScripts) {
          doc = scripts[scripts.length - 1].ownerDocument;

          // Reenable scripts
          jQuery.map(scripts, restoreScript);

          // Evaluate executable scripts on first document insertion
          for (i = 0; i < hasScripts; i++) {
            node = scripts[i];
            if (rscriptType.test(node.type || "") && !dataPriv.access(node, "globalEval") && jQuery.contains(doc, node)) {
              if (node.src && (node.type || "").toLowerCase() !== "module") {
                // Optional AJAX dependency, but won't run scripts if not present
                if (jQuery._evalUrl && !node.noModule) {
                  jQuery._evalUrl(node.src, {
                    nonce: node.nonce || node.getAttribute("nonce")
                  }, doc);
                }
              } else {
                // Unwrap a CDATA section containing script contents. This shouldn't be
                // needed as in XML documents they're already not visible when
                // inspecting element contents and in HTML documents they have no
                // meaning but we're preserving that logic for backwards compatibility.
                // This will be removed completely in 4.0. See gh-4904.
                DOMEval(node.textContent.replace(rcleanScript, ""), node, doc);
              }
            }
          }
        }
      }
    }
    return collection;
  }
  function _remove(elem, selector, keepData) {
    var node,
      nodes = selector ? jQuery.filter(selector, elem) : elem,
      i = 0;
    for (; (node = nodes[i]) != null; i++) {
      if (!keepData && node.nodeType === 1) {
        jQuery.cleanData(getAll(node));
      }
      if (node.parentNode) {
        if (keepData && isAttached(node)) {
          setGlobalEval(getAll(node, "script"));
        }
        node.parentNode.removeChild(node);
      }
    }
    return elem;
  }
  jQuery.extend({
    htmlPrefilter: function htmlPrefilter(html) {
      return html;
    },
    clone: function clone(elem, dataAndEvents, deepDataAndEvents) {
      var i,
        l,
        srcElements,
        destElements,
        clone = elem.cloneNode(true),
        inPage = isAttached(elem);

      // Fix IE cloning issues
      if (!support.noCloneChecked && (elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem)) {
        // We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2
        destElements = getAll(clone);
        srcElements = getAll(elem);
        for (i = 0, l = srcElements.length; i < l; i++) {
          fixInput(srcElements[i], destElements[i]);
        }
      }

      // Copy the events from the original to the clone
      if (dataAndEvents) {
        if (deepDataAndEvents) {
          srcElements = srcElements || getAll(elem);
          destElements = destElements || getAll(clone);
          for (i = 0, l = srcElements.length; i < l; i++) {
            cloneCopyEvent(srcElements[i], destElements[i]);
          }
        } else {
          cloneCopyEvent(elem, clone);
        }
      }

      // Preserve script evaluation history
      destElements = getAll(clone, "script");
      if (destElements.length > 0) {
        setGlobalEval(destElements, !inPage && getAll(elem, "script"));
      }

      // Return the cloned set
      return clone;
    },
    cleanData: function cleanData(elems) {
      var data,
        elem,
        type,
        special = jQuery.event.special,
        i = 0;
      for (; (elem = elems[i]) !== undefined; i++) {
        if (acceptData(elem)) {
          if (data = elem[dataPriv.expando]) {
            if (data.events) {
              for (type in data.events) {
                if (special[type]) {
                  jQuery.event.remove(elem, type);

                  // This is a shortcut to avoid jQuery.event.remove's overhead
                } else {
                  jQuery.removeEvent(elem, type, data.handle);
                }
              }
            }

            // Support: Chrome <=35 - 45+
            // Assign undefined instead of using delete, see Data#remove
            elem[dataPriv.expando] = undefined;
          }
          if (elem[dataUser.expando]) {
            // Support: Chrome <=35 - 45+
            // Assign undefined instead of using delete, see Data#remove
            elem[dataUser.expando] = undefined;
          }
        }
      }
    }
  });
  jQuery.fn.extend({
    detach: function detach(selector) {
      return _remove(this, selector, true);
    },
    remove: function remove(selector) {
      return _remove(this, selector);
    },
    text: function text(value) {
      return access(this, function (value) {
        return value === undefined ? jQuery.text(this) : this.empty().each(function () {
          if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
            this.textContent = value;
          }
        });
      }, null, value, arguments.length);
    },
    append: function append() {
      return domManip(this, arguments, function (elem) {
        if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
          var target = manipulationTarget(this, elem);
          target.appendChild(elem);
        }
      });
    },
    prepend: function prepend() {
      return domManip(this, arguments, function (elem) {
        if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
          var target = manipulationTarget(this, elem);
          target.insertBefore(elem, target.firstChild);
        }
      });
    },
    before: function before() {
      return domManip(this, arguments, function (elem) {
        if (this.parentNode) {
          this.parentNode.insertBefore(elem, this);
        }
      });
    },
    after: function after() {
      return domManip(this, arguments, function (elem) {
        if (this.parentNode) {
          this.parentNode.insertBefore(elem, this.nextSibling);
        }
      });
    },
    empty: function empty() {
      var elem,
        i = 0;
      for (; (elem = this[i]) != null; i++) {
        if (elem.nodeType === 1) {
          // Prevent memory leaks
          jQuery.cleanData(getAll(elem, false));

          // Remove any remaining nodes
          elem.textContent = "";
        }
      }
      return this;
    },
    clone: function clone(dataAndEvents, deepDataAndEvents) {
      dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
      deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;
      return this.map(function () {
        return jQuery.clone(this, dataAndEvents, deepDataAndEvents);
      });
    },
    html: function html(value) {
      return access(this, function (value) {
        var elem = this[0] || {},
          i = 0,
          l = this.length;
        if (value === undefined && elem.nodeType === 1) {
          return elem.innerHTML;
        }

        // See if we can take a shortcut and just use innerHTML
        if (typeof value === "string" && !rnoInnerhtml.test(value) && !wrapMap[(rtagName.exec(value) || ["", ""])[1].toLowerCase()]) {
          value = jQuery.htmlPrefilter(value);
          try {
            for (; i < l; i++) {
              elem = this[i] || {};

              // Remove element nodes and prevent memory leaks
              if (elem.nodeType === 1) {
                jQuery.cleanData(getAll(elem, false));
                elem.innerHTML = value;
              }
            }
            elem = 0;

            // If using innerHTML throws an exception, use the fallback method
          } catch (e) {}
        }
        if (elem) {
          this.empty().append(value);
        }
      }, null, value, arguments.length);
    },
    replaceWith: function replaceWith() {
      var ignored = [];

      // Make the changes, replacing each non-ignored context element with the new content
      return domManip(this, arguments, function (elem) {
        var parent = this.parentNode;
        if (jQuery.inArray(this, ignored) < 0) {
          jQuery.cleanData(getAll(this));
          if (parent) {
            parent.replaceChild(elem, this);
          }
        }

        // Force callback invocation
      }, ignored);
    }
  });
  jQuery.each({
    appendTo: "append",
    prependTo: "prepend",
    insertBefore: "before",
    insertAfter: "after",
    replaceAll: "replaceWith"
  }, function (name, original) {
    jQuery.fn[name] = function (selector) {
      var elems,
        ret = [],
        insert = jQuery(selector),
        last = insert.length - 1,
        i = 0;
      for (; i <= last; i++) {
        elems = i === last ? this : this.clone(true);
        jQuery(insert[i])[original](elems);

        // Support: Android <=4.0 only, PhantomJS 1 only
        // .get() because push.apply(_, arraylike) throws on ancient WebKit
        push.apply(ret, elems.get());
      }
      return this.pushStack(ret);
    };
  });
  var rnumnonpx = new RegExp("^(" + pnum + ")(?!px)[a-z%]+$", "i");
  var rcustomProp = /^--/;
  var getStyles = function getStyles(elem) {
    // Support: IE <=11 only, Firefox <=30 (trac-15098, trac-14150)
    // IE throws on elements created in popups
    // FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
    var view = elem.ownerDocument.defaultView;
    if (!view || !view.opener) {
      view = window;
    }
    return view.getComputedStyle(elem);
  };
  var swap = function swap(elem, options, callback) {
    var ret,
      name,
      old = {};

    // Remember the old values, and insert the new ones
    for (name in options) {
      old[name] = elem.style[name];
      elem.style[name] = options[name];
    }
    ret = callback.call(elem);

    // Revert the old values
    for (name in options) {
      elem.style[name] = old[name];
    }
    return ret;
  };
  var rboxStyle = new RegExp(cssExpand.join("|"), "i");
  var whitespace = "[\\x20\\t\\r\\n\\f]";
  var rtrimCSS = new RegExp("^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g");
  (function () {
    // Executing both pixelPosition & boxSizingReliable tests require only one layout
    // so they're executed at the same time to save the second computation.
    function computeStyleTests() {
      // This is a singleton, we need to execute it only once
      if (!div) {
        return;
      }
      container.style.cssText = "position:absolute;left:-11111px;width:60px;" + "margin-top:1px;padding:0;border:0";
      div.style.cssText = "position:relative;display:block;box-sizing:border-box;overflow:scroll;" + "margin:auto;border:1px;padding:1px;" + "width:60%;top:1%";
      documentElement.appendChild(container).appendChild(div);
      var divStyle = window.getComputedStyle(div);
      pixelPositionVal = divStyle.top !== "1%";

      // Support: Android 4.0 - 4.3 only, Firefox <=3 - 44
      reliableMarginLeftVal = roundPixelMeasures(divStyle.marginLeft) === 12;

      // Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3
      // Some styles come back with percentage values, even though they shouldn't
      div.style.right = "60%";
      pixelBoxStylesVal = roundPixelMeasures(divStyle.right) === 36;

      // Support: IE 9 - 11 only
      // Detect misreporting of content dimensions for box-sizing:border-box elements
      boxSizingReliableVal = roundPixelMeasures(divStyle.width) === 36;

      // Support: IE 9 only
      // Detect overflow:scroll screwiness (gh-3699)
      // Support: Chrome <=64
      // Don't get tricked when zoom affects offsetWidth (gh-4029)
      div.style.position = "absolute";
      scrollboxSizeVal = roundPixelMeasures(div.offsetWidth / 3) === 12;
      documentElement.removeChild(container);

      // Nullify the div so it wouldn't be stored in the memory and
      // it will also be a sign that checks already performed
      div = null;
    }
    function roundPixelMeasures(measure) {
      return Math.round(parseFloat(measure));
    }
    var pixelPositionVal,
      boxSizingReliableVal,
      scrollboxSizeVal,
      pixelBoxStylesVal,
      reliableTrDimensionsVal,
      reliableMarginLeftVal,
      container = document.createElement("div"),
      div = document.createElement("div");

    // Finish early in limited (non-browser) environments
    if (!div.style) {
      return;
    }

    // Support: IE <=9 - 11 only
    // Style of cloned element affects source element cloned (trac-8908)
    div.style.backgroundClip = "content-box";
    div.cloneNode(true).style.backgroundClip = "";
    support.clearCloneStyle = div.style.backgroundClip === "content-box";
    jQuery.extend(support, {
      boxSizingReliable: function boxSizingReliable() {
        computeStyleTests();
        return boxSizingReliableVal;
      },
      pixelBoxStyles: function pixelBoxStyles() {
        computeStyleTests();
        return pixelBoxStylesVal;
      },
      pixelPosition: function pixelPosition() {
        computeStyleTests();
        return pixelPositionVal;
      },
      reliableMarginLeft: function reliableMarginLeft() {
        computeStyleTests();
        return reliableMarginLeftVal;
      },
      scrollboxSize: function scrollboxSize() {
        computeStyleTests();
        return scrollboxSizeVal;
      },
      // Support: IE 9 - 11+, Edge 15 - 18+
      // IE/Edge misreport `getComputedStyle` of table rows with width/height
      // set in CSS while `offset*` properties report correct values.
      // Behavior in IE 9 is more subtle than in newer versions & it passes
      // some versions of this test; make sure not to make it pass there!
      //
      // Support: Firefox 70+
      // Only Firefox includes border widths
      // in computed dimensions. (gh-4529)
      reliableTrDimensions: function reliableTrDimensions() {
        var table, tr, trChild, trStyle;
        if (reliableTrDimensionsVal == null) {
          table = document.createElement("table");
          tr = document.createElement("tr");
          trChild = document.createElement("div");
          table.style.cssText = "position:absolute;left:-11111px;border-collapse:separate";
          tr.style.cssText = "border:1px solid";

          // Support: Chrome 86+
          // Height set through cssText does not get applied.
          // Computed height then comes back as 0.
          tr.style.height = "1px";
          trChild.style.height = "9px";

          // Support: Android 8 Chrome 86+
          // In our bodyBackground.html iframe,
          // display for all div elements is set to "inline",
          // which causes a problem only in Android 8 Chrome 86.
          // Ensuring the div is display: block
          // gets around this issue.
          trChild.style.display = "block";
          documentElement.appendChild(table).appendChild(tr).appendChild(trChild);
          trStyle = window.getComputedStyle(tr);
          reliableTrDimensionsVal = parseInt(trStyle.height, 10) + parseInt(trStyle.borderTopWidth, 10) + parseInt(trStyle.borderBottomWidth, 10) === tr.offsetHeight;
          documentElement.removeChild(table);
        }
        return reliableTrDimensionsVal;
      }
    });
  })();
  function curCSS(elem, name, computed) {
    var width,
      minWidth,
      maxWidth,
      ret,
      isCustomProp = rcustomProp.test(name),
      // Support: Firefox 51+
      // Retrieving style before computed somehow
      // fixes an issue with getting wrong values
      // on detached elements
      style = elem.style;
    computed = computed || getStyles(elem);

    // getPropertyValue is needed for:
    //   .css('filter') (IE 9 only, trac-12537)
    //   .css('--customProperty) (gh-3144)
    if (computed) {
      ret = computed.getPropertyValue(name) || computed[name];

      // trim whitespace for custom property (issue gh-4926)
      if (isCustomProp) {
        // rtrim treats U+000D CARRIAGE RETURN and U+000C FORM FEED
        // as whitespace while CSS does not, but this is not a problem
        // because CSS preprocessing replaces them with U+000A LINE FEED
        // (which *is* CSS whitespace)
        // https://www.w3.org/TR/css-syntax-3/#input-preprocessing
        ret = ret.replace(rtrimCSS, "$1");
      }
      if (ret === "" && !isAttached(elem)) {
        ret = jQuery.style(elem, name);
      }

      // A tribute to the "awesome hack by Dean Edwards"
      // Android Browser returns percentage for some values,
      // but width seems to be reliably pixels.
      // This is against the CSSOM draft spec:
      // https://drafts.csswg.org/cssom/#resolved-values
      if (!support.pixelBoxStyles() && rnumnonpx.test(ret) && rboxStyle.test(name)) {
        // Remember the original values
        width = style.width;
        minWidth = style.minWidth;
        maxWidth = style.maxWidth;

        // Put in the new values to get a computed value out
        style.minWidth = style.maxWidth = style.width = ret;
        ret = computed.width;

        // Revert the changed values
        style.width = width;
        style.minWidth = minWidth;
        style.maxWidth = maxWidth;
      }
    }
    return ret !== undefined ?
    // Support: IE <=9 - 11 only
    // IE returns zIndex value as an integer.
    ret + "" : ret;
  }
  function addGetHookIf(conditionFn, hookFn) {
    // Define the hook, we'll check on the first run if it's really needed.
    return {
      get: function get() {
        if (conditionFn()) {
          // Hook not needed (or it's not possible to use it due
          // to missing dependency), remove it.
          delete this.get;
          return;
        }

        // Hook needed; redefine it so that the support test is not executed again.
        return (this.get = hookFn).apply(this, arguments);
      }
    };
  }
  var cssPrefixes = ["Webkit", "Moz", "ms"],
    emptyStyle = document.createElement("div").style,
    vendorProps = {};

  // Return a vendor-prefixed property or undefined
  function vendorPropName(name) {
    // Check for vendor prefixed names
    var capName = name[0].toUpperCase() + name.slice(1),
      i = cssPrefixes.length;
    while (i--) {
      name = cssPrefixes[i] + capName;
      if (name in emptyStyle) {
        return name;
      }
    }
  }

  // Return a potentially-mapped jQuery.cssProps or vendor prefixed property
  function finalPropName(name) {
    var _final = jQuery.cssProps[name] || vendorProps[name];
    if (_final) {
      return _final;
    }
    if (name in emptyStyle) {
      return name;
    }
    return vendorProps[name] = vendorPropName(name) || name;
  }
  var
    // Swappable if display is none or starts with table
    // except "table", "table-cell", or "table-caption"
    // See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
    rdisplayswap = /^(none|table(?!-c[ea]).+)/,
    cssShow = {
      position: "absolute",
      visibility: "hidden",
      display: "block"
    },
    cssNormalTransform = {
      letterSpacing: "0",
      fontWeight: "400"
    };
  function setPositiveNumber(_elem, value, subtract) {
    // Any relative (+/-) values have already been
    // normalized at this point
    var matches = rcssNum.exec(value);
    return matches ?
    // Guard against undefined "subtract", e.g., when used as in cssHooks
    Math.max(0, matches[2] - (subtract || 0)) + (matches[3] || "px") : value;
  }
  function boxModelAdjustment(elem, dimension, box, isBorderBox, styles, computedVal) {
    var i = dimension === "width" ? 1 : 0,
      extra = 0,
      delta = 0;

    // Adjustment may not be necessary
    if (box === (isBorderBox ? "border" : "content")) {
      return 0;
    }
    for (; i < 4; i += 2) {
      // Both box models exclude margin
      if (box === "margin") {
        delta += jQuery.css(elem, box + cssExpand[i], true, styles);
      }

      // If we get here with a content-box, we're seeking "padding" or "border" or "margin"
      if (!isBorderBox) {
        // Add padding
        delta += jQuery.css(elem, "padding" + cssExpand[i], true, styles);

        // For "border" or "margin", add border
        if (box !== "padding") {
          delta += jQuery.css(elem, "border" + cssExpand[i] + "Width", true, styles);

          // But still keep track of it otherwise
        } else {
          extra += jQuery.css(elem, "border" + cssExpand[i] + "Width", true, styles);
        }

        // If we get here with a border-box (content + padding + border), we're seeking "content" or
        // "padding" or "margin"
      } else {
        // For "content", subtract padding
        if (box === "content") {
          delta -= jQuery.css(elem, "padding" + cssExpand[i], true, styles);
        }

        // For "content" or "padding", subtract border
        if (box !== "margin") {
          delta -= jQuery.css(elem, "border" + cssExpand[i] + "Width", true, styles);
        }
      }
    }

    // Account for positive content-box scroll gutter when requested by providing computedVal
    if (!isBorderBox && computedVal >= 0) {
      // offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border
      // Assuming integer scroll gutter, subtract the rest and round down
      delta += Math.max(0, Math.ceil(elem["offset" + dimension[0].toUpperCase() + dimension.slice(1)] - computedVal - delta - extra - 0.5

      // If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter
      // Use an explicit zero to avoid NaN (gh-3964)
      )) || 0;
    }
    return delta;
  }
  function getWidthOrHeight(elem, dimension, extra) {
    // Start with computed style
    var styles = getStyles(elem),
      // To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).
      // Fake content-box until we know it's needed to know the true value.
      boxSizingNeeded = !support.boxSizingReliable() || extra,
      isBorderBox = boxSizingNeeded && jQuery.css(elem, "boxSizing", false, styles) === "border-box",
      valueIsBorderBox = isBorderBox,
      val = curCSS(elem, dimension, styles),
      offsetProp = "offset" + dimension[0].toUpperCase() + dimension.slice(1);

    // Support: Firefox <=54
    // Return a confounding non-pixel value or feign ignorance, as appropriate.
    if (rnumnonpx.test(val)) {
      if (!extra) {
        return val;
      }
      val = "auto";
    }

    // Support: IE 9 - 11 only
    // Use offsetWidth/offsetHeight for when box sizing is unreliable.
    // In those cases, the computed value can be trusted to be border-box.
    if ((!support.boxSizingReliable() && isBorderBox ||
    // Support: IE 10 - 11+, Edge 15 - 18+
    // IE/Edge misreport `getComputedStyle` of table rows with width/height
    // set in CSS while `offset*` properties report correct values.
    // Interestingly, in some cases IE 9 doesn't suffer from this issue.
    !support.reliableTrDimensions() && nodeName(elem, "tr") ||
    // Fall back to offsetWidth/offsetHeight when value is "auto"
    // This happens for inline elements with no explicit setting (gh-3571)
    val === "auto" ||
    // Support: Android <=4.1 - 4.3 only
    // Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)
    !parseFloat(val) && jQuery.css(elem, "display", false, styles) === "inline") &&
    // Make sure the element is visible & connected
    elem.getClientRects().length) {
      isBorderBox = jQuery.css(elem, "boxSizing", false, styles) === "border-box";

      // Where available, offsetWidth/offsetHeight approximate border box dimensions.
      // Where not available (e.g., SVG), assume unreliable box-sizing and interpret the
      // retrieved value as a content box dimension.
      valueIsBorderBox = offsetProp in elem;
      if (valueIsBorderBox) {
        val = elem[offsetProp];
      }
    }

    // Normalize "" and auto
    val = parseFloat(val) || 0;

    // Adjust for the element's box model
    return val + boxModelAdjustment(elem, dimension, extra || (isBorderBox ? "border" : "content"), valueIsBorderBox, styles,
    // Provide the current computed size to request scroll gutter calculation (gh-3589)
    val) + "px";
  }
  jQuery.extend({
    // Add in style property hooks for overriding the default
    // behavior of getting and setting a style property
    cssHooks: {
      opacity: {
        get: function get(elem, computed) {
          if (computed) {
            // We should always get a number back from opacity
            var ret = curCSS(elem, "opacity");
            return ret === "" ? "1" : ret;
          }
        }
      }
    },
    // Don't automatically add "px" to these possibly-unitless properties
    cssNumber: {
      "animationIterationCount": true,
      "columnCount": true,
      "fillOpacity": true,
      "flexGrow": true,
      "flexShrink": true,
      "fontWeight": true,
      "gridArea": true,
      "gridColumn": true,
      "gridColumnEnd": true,
      "gridColumnStart": true,
      "gridRow": true,
      "gridRowEnd": true,
      "gridRowStart": true,
      "lineHeight": true,
      "opacity": true,
      "order": true,
      "orphans": true,
      "widows": true,
      "zIndex": true,
      "zoom": true
    },
    // Add in properties whose names you wish to fix before
    // setting or getting the value
    cssProps: {},
    // Get and set the style property on a DOM Node
    style: function style(elem, name, value, extra) {
      // Don't set styles on text and comment nodes
      if (!elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style) {
        return;
      }

      // Make sure that we're working with the right name
      var ret,
        type,
        hooks,
        origName = camelCase(name),
        isCustomProp = rcustomProp.test(name),
        style = elem.style;

      // Make sure that we're working with the right name. We don't
      // want to query the value if it is a CSS custom property
      // since they are user-defined.
      if (!isCustomProp) {
        name = finalPropName(origName);
      }

      // Gets hook for the prefixed version, then unprefixed version
      hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName];

      // Check if we're setting a value
      if (value !== undefined) {
        type = typeof value;

        // Convert "+=" or "-=" to relative numbers (trac-7345)
        if (type === "string" && (ret = rcssNum.exec(value)) && ret[1]) {
          value = adjustCSS(elem, name, ret);

          // Fixes bug trac-9237
          type = "number";
        }

        // Make sure that null and NaN values aren't set (trac-7116)
        if (value == null || value !== value) {
          return;
        }

        // If a number was passed in, add the unit (except for certain CSS properties)
        // The isCustomProp check can be removed in jQuery 4.0 when we only auto-append
        // "px" to a few hardcoded values.
        if (type === "number" && !isCustomProp) {
          value += ret && ret[3] || (jQuery.cssNumber[origName] ? "" : "px");
        }

        // background-* props affect original clone's values
        if (!support.clearCloneStyle && value === "" && name.indexOf("background") === 0) {
          style[name] = "inherit";
        }

        // If a hook was provided, use that value, otherwise just set the specified value
        if (!hooks || !("set" in hooks) || (value = hooks.set(elem, value, extra)) !== undefined) {
          if (isCustomProp) {
            style.setProperty(name, value);
          } else {
            style[name] = value;
          }
        }
      } else {
        // If a hook was provided get the non-computed value from there
        if (hooks && "get" in hooks && (ret = hooks.get(elem, false, extra)) !== undefined) {
          return ret;
        }

        // Otherwise just get the value from the style object
        return style[name];
      }
    },
    css: function css(elem, name, extra, styles) {
      var val,
        num,
        hooks,
        origName = camelCase(name),
        isCustomProp = rcustomProp.test(name);

      // Make sure that we're working with the right name. We don't
      // want to modify the value if it is a CSS custom property
      // since they are user-defined.
      if (!isCustomProp) {
        name = finalPropName(origName);
      }

      // Try prefixed name followed by the unprefixed name
      hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName];

      // If a hook was provided get the computed value from there
      if (hooks && "get" in hooks) {
        val = hooks.get(elem, true, extra);
      }

      // Otherwise, if a way to get the computed value exists, use that
      if (val === undefined) {
        val = curCSS(elem, name, styles);
      }

      // Convert "normal" to computed value
      if (val === "normal" && name in cssNormalTransform) {
        val = cssNormalTransform[name];
      }

      // Make numeric if forced or a qualifier was provided and val looks numeric
      if (extra === "" || extra) {
        num = parseFloat(val);
        return extra === true || isFinite(num) ? num || 0 : val;
      }
      return val;
    }
  });
  jQuery.each(["height", "width"], function (_i, dimension) {
    jQuery.cssHooks[dimension] = {
      get: function get(elem, computed, extra) {
        if (computed) {
          // Certain elements can have dimension info if we invisibly show them
          // but it must have a current display style that would benefit
          return rdisplayswap.test(jQuery.css(elem, "display")) && (
          // Support: Safari 8+
          // Table columns in Safari have non-zero offsetWidth & zero
          // getBoundingClientRect().width unless display is changed.
          // Support: IE <=11 only
          // Running getBoundingClientRect on a disconnected node
          // in IE throws an error.
          !elem.getClientRects().length || !elem.getBoundingClientRect().width) ? swap(elem, cssShow, function () {
            return getWidthOrHeight(elem, dimension, extra);
          }) : getWidthOrHeight(elem, dimension, extra);
        }
      },
      set: function set(elem, value, extra) {
        var matches,
          styles = getStyles(elem),
          // Only read styles.position if the test has a chance to fail
          // to avoid forcing a reflow.
          scrollboxSizeBuggy = !support.scrollboxSize() && styles.position === "absolute",
          // To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)
          boxSizingNeeded = scrollboxSizeBuggy || extra,
          isBorderBox = boxSizingNeeded && jQuery.css(elem, "boxSizing", false, styles) === "border-box",
          subtract = extra ? boxModelAdjustment(elem, dimension, extra, isBorderBox, styles) : 0;

        // Account for unreliable border-box dimensions by comparing offset* to computed and
        // faking a content-box to get border and padding (gh-3699)
        if (isBorderBox && scrollboxSizeBuggy) {
          subtract -= Math.ceil(elem["offset" + dimension[0].toUpperCase() + dimension.slice(1)] - parseFloat(styles[dimension]) - boxModelAdjustment(elem, dimension, "border", false, styles) - 0.5);
        }

        // Convert to pixels if value adjustment is needed
        if (subtract && (matches = rcssNum.exec(value)) && (matches[3] || "px") !== "px") {
          elem.style[dimension] = value;
          value = jQuery.css(elem, dimension);
        }
        return setPositiveNumber(elem, value, subtract);
      }
    };
  });
  jQuery.cssHooks.marginLeft = addGetHookIf(support.reliableMarginLeft, function (elem, computed) {
    if (computed) {
      return (parseFloat(curCSS(elem, "marginLeft")) || elem.getBoundingClientRect().left - swap(elem, {
        marginLeft: 0
      }, function () {
        return elem.getBoundingClientRect().left;
      })) + "px";
    }
  });

  // These hooks are used by animate to expand properties
  jQuery.each({
    margin: "",
    padding: "",
    border: "Width"
  }, function (prefix, suffix) {
    jQuery.cssHooks[prefix + suffix] = {
      expand: function expand(value) {
        var i = 0,
          expanded = {},
          // Assumes a single number if not a string
          parts = typeof value === "string" ? value.split(" ") : [value];
        for (; i < 4; i++) {
          expanded[prefix + cssExpand[i] + suffix] = parts[i] || parts[i - 2] || parts[0];
        }
        return expanded;
      }
    };
    if (prefix !== "margin") {
      jQuery.cssHooks[prefix + suffix].set = setPositiveNumber;
    }
  });
  jQuery.fn.extend({
    css: function css(name, value) {
      return access(this, function (elem, name, value) {
        var styles,
          len,
          map = {},
          i = 0;
        if (Array.isArray(name)) {
          styles = getStyles(elem);
          len = name.length;
          for (; i < len; i++) {
            map[name[i]] = jQuery.css(elem, name[i], false, styles);
          }
          return map;
        }
        return value !== undefined ? jQuery.style(elem, name, value) : jQuery.css(elem, name);
      }, name, value, arguments.length > 1);
    }
  });
  function Tween(elem, options, prop, end, easing) {
    return new Tween.prototype.init(elem, options, prop, end, easing);
  }
  jQuery.Tween = Tween;
  Tween.prototype = {
    constructor: Tween,
    init: function init(elem, options, prop, end, easing, unit) {
      this.elem = elem;
      this.prop = prop;
      this.easing = easing || jQuery.easing._default;
      this.options = options;
      this.start = this.now = this.cur();
      this.end = end;
      this.unit = unit || (jQuery.cssNumber[prop] ? "" : "px");
    },
    cur: function cur() {
      var hooks = Tween.propHooks[this.prop];
      return hooks && hooks.get ? hooks.get(this) : Tween.propHooks._default.get(this);
    },
    run: function run(percent) {
      var eased,
        hooks = Tween.propHooks[this.prop];
      if (this.options.duration) {
        this.pos = eased = jQuery.easing[this.easing](percent, this.options.duration * percent, 0, 1, this.options.duration);
      } else {
        this.pos = eased = percent;
      }
      this.now = (this.end - this.start) * eased + this.start;
      if (this.options.step) {
        this.options.step.call(this.elem, this.now, this);
      }
      if (hooks && hooks.set) {
        hooks.set(this);
      } else {
        Tween.propHooks._default.set(this);
      }
      return this;
    }
  };
  Tween.prototype.init.prototype = Tween.prototype;
  Tween.propHooks = {
    _default: {
      get: function get(tween) {
        var result;

        // Use a property on the element directly when it is not a DOM element,
        // or when there is no matching style property that exists.
        if (tween.elem.nodeType !== 1 || tween.elem[tween.prop] != null && tween.elem.style[tween.prop] == null) {
          return tween.elem[tween.prop];
        }

        // Passing an empty string as a 3rd parameter to .css will automatically
        // attempt a parseFloat and fallback to a string if the parse fails.
        // Simple values such as "10px" are parsed to Float;
        // complex values such as "rotate(1rad)" are returned as-is.
        result = jQuery.css(tween.elem, tween.prop, "");

        // Empty strings, null, undefined and "auto" are converted to 0.
        return !result || result === "auto" ? 0 : result;
      },
      set: function set(tween) {
        // Use step hook for back compat.
        // Use cssHook if its there.
        // Use .style if available and use plain properties where available.
        if (jQuery.fx.step[tween.prop]) {
          jQuery.fx.step[tween.prop](tween);
        } else if (tween.elem.nodeType === 1 && (jQuery.cssHooks[tween.prop] || tween.elem.style[finalPropName(tween.prop)] != null)) {
          jQuery.style(tween.elem, tween.prop, tween.now + tween.unit);
        } else {
          tween.elem[tween.prop] = tween.now;
        }
      }
    }
  };

  // Support: IE <=9 only
  // Panic based approach to setting things on disconnected nodes
  Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
    set: function set(tween) {
      if (tween.elem.nodeType && tween.elem.parentNode) {
        tween.elem[tween.prop] = tween.now;
      }
    }
  };
  jQuery.easing = {
    linear: function linear(p) {
      return p;
    },
    swing: function swing(p) {
      return 0.5 - Math.cos(p * Math.PI) / 2;
    },
    _default: "swing"
  };
  jQuery.fx = Tween.prototype.init;

  // Back compat <1.8 extension point
  jQuery.fx.step = {};
  var fxNow,
    inProgress,
    rfxtypes = /^(?:toggle|show|hide)$/,
    rrun = /queueHooks$/;
  function schedule() {
    if (inProgress) {
      if (document.hidden === false && window.requestAnimationFrame) {
        window.requestAnimationFrame(schedule);
      } else {
        window.setTimeout(schedule, jQuery.fx.interval);
      }
      jQuery.fx.tick();
    }
  }

  // Animations created synchronously will run synchronously
  function createFxNow() {
    window.setTimeout(function () {
      fxNow = undefined;
    });
    return fxNow = Date.now();
  }

  // Generate parameters to create a standard animation
  function genFx(type, includeWidth) {
    var which,
      i = 0,
      attrs = {
        height: type
      };

    // If we include width, step value is 1 to do all cssExpand values,
    // otherwise step value is 2 to skip over Left and Right
    includeWidth = includeWidth ? 1 : 0;
    for (; i < 4; i += 2 - includeWidth) {
      which = cssExpand[i];
      attrs["margin" + which] = attrs["padding" + which] = type;
    }
    if (includeWidth) {
      attrs.opacity = attrs.width = type;
    }
    return attrs;
  }
  function createTween(value, prop, animation) {
    var tween,
      collection = (Animation.tweeners[prop] || []).concat(Animation.tweeners["*"]),
      index = 0,
      length = collection.length;
    for (; index < length; index++) {
      if (tween = collection[index].call(animation, prop, value)) {
        // We're done with this property
        return tween;
      }
    }
  }
  function defaultPrefilter(elem, props, opts) {
    var prop,
      value,
      toggle,
      hooks,
      oldfire,
      propTween,
      restoreDisplay,
      display,
      isBox = "width" in props || "height" in props,
      anim = this,
      orig = {},
      style = elem.style,
      hidden = elem.nodeType && isHiddenWithinTree(elem),
      dataShow = dataPriv.get(elem, "fxshow");

    // Queue-skipping animations hijack the fx hooks
    if (!opts.queue) {
      hooks = jQuery._queueHooks(elem, "fx");
      if (hooks.unqueued == null) {
        hooks.unqueued = 0;
        oldfire = hooks.empty.fire;
        hooks.empty.fire = function () {
          if (!hooks.unqueued) {
            oldfire();
          }
        };
      }
      hooks.unqueued++;
      anim.always(function () {
        // Ensure the complete handler is called before this completes
        anim.always(function () {
          hooks.unqueued--;
          if (!jQuery.queue(elem, "fx").length) {
            hooks.empty.fire();
          }
        });
      });
    }

    // Detect show/hide animations
    for (prop in props) {
      value = props[prop];
      if (rfxtypes.test(value)) {
        delete props[prop];
        toggle = toggle || value === "toggle";
        if (value === (hidden ? "hide" : "show")) {
          // Pretend to be hidden if this is a "show" and
          // there is still data from a stopped show/hide
          if (value === "show" && dataShow && dataShow[prop] !== undefined) {
            hidden = true;

            // Ignore all other no-op show/hide data
          } else {
            continue;
          }
        }
        orig[prop] = dataShow && dataShow[prop] || jQuery.style(elem, prop);
      }
    }

    // Bail out if this is a no-op like .hide().hide()
    propTween = !jQuery.isEmptyObject(props);
    if (!propTween && jQuery.isEmptyObject(orig)) {
      return;
    }

    // Restrict "overflow" and "display" styles during box animations
    if (isBox && elem.nodeType === 1) {
      // Support: IE <=9 - 11, Edge 12 - 15
      // Record all 3 overflow attributes because IE does not infer the shorthand
      // from identically-valued overflowX and overflowY and Edge just mirrors
      // the overflowX value there.
      opts.overflow = [style.overflow, style.overflowX, style.overflowY];

      // Identify a display type, preferring old show/hide data over the CSS cascade
      restoreDisplay = dataShow && dataShow.display;
      if (restoreDisplay == null) {
        restoreDisplay = dataPriv.get(elem, "display");
      }
      display = jQuery.css(elem, "display");
      if (display === "none") {
        if (restoreDisplay) {
          display = restoreDisplay;
        } else {
          // Get nonempty value(s) by temporarily forcing visibility
          showHide([elem], true);
          restoreDisplay = elem.style.display || restoreDisplay;
          display = jQuery.css(elem, "display");
          showHide([elem]);
        }
      }

      // Animate inline elements as inline-block
      if (display === "inline" || display === "inline-block" && restoreDisplay != null) {
        if (jQuery.css(elem, "float") === "none") {
          // Restore the original display value at the end of pure show/hide animations
          if (!propTween) {
            anim.done(function () {
              style.display = restoreDisplay;
            });
            if (restoreDisplay == null) {
              display = style.display;
              restoreDisplay = display === "none" ? "" : display;
            }
          }
          style.display = "inline-block";
        }
      }
    }
    if (opts.overflow) {
      style.overflow = "hidden";
      anim.always(function () {
        style.overflow = opts.overflow[0];
        style.overflowX = opts.overflow[1];
        style.overflowY = opts.overflow[2];
      });
    }

    // Implement show/hide animations
    propTween = false;
    for (prop in orig) {
      // General show/hide setup for this element animation
      if (!propTween) {
        if (dataShow) {
          if ("hidden" in dataShow) {
            hidden = dataShow.hidden;
          }
        } else {
          dataShow = dataPriv.access(elem, "fxshow", {
            display: restoreDisplay
          });
        }

        // Store hidden/visible for toggle so `.stop().toggle()` "reverses"
        if (toggle) {
          dataShow.hidden = !hidden;
        }

        // Show elements before animating them
        if (hidden) {
          showHide([elem], true);
        }

        /* eslint-disable no-loop-func */

        anim.done(function () {
          /* eslint-enable no-loop-func */

          // The final step of a "hide" animation is actually hiding the element
          if (!hidden) {
            showHide([elem]);
          }
          dataPriv.remove(elem, "fxshow");
          for (prop in orig) {
            jQuery.style(elem, prop, orig[prop]);
          }
        });
      }

      // Per-property setup
      propTween = createTween(hidden ? dataShow[prop] : 0, prop, anim);
      if (!(prop in dataShow)) {
        dataShow[prop] = propTween.start;
        if (hidden) {
          propTween.end = propTween.start;
          propTween.start = 0;
        }
      }
    }
  }
  function propFilter(props, specialEasing) {
    var index, name, easing, value, hooks;

    // camelCase, specialEasing and expand cssHook pass
    for (index in props) {
      name = camelCase(index);
      easing = specialEasing[name];
      value = props[index];
      if (Array.isArray(value)) {
        easing = value[1];
        value = props[index] = value[0];
      }
      if (index !== name) {
        props[name] = value;
        delete props[index];
      }
      hooks = jQuery.cssHooks[name];
      if (hooks && "expand" in hooks) {
        value = hooks.expand(value);
        delete props[name];

        // Not quite $.extend, this won't overwrite existing keys.
        // Reusing 'index' because we have the correct "name"
        for (index in value) {
          if (!(index in props)) {
            props[index] = value[index];
            specialEasing[index] = easing;
          }
        }
      } else {
        specialEasing[name] = easing;
      }
    }
  }
  function Animation(elem, properties, options) {
    var result,
      stopped,
      index = 0,
      length = Animation.prefilters.length,
      deferred = jQuery.Deferred().always(function () {
        // Don't match elem in the :animated selector
        delete tick.elem;
      }),
      tick = function tick() {
        if (stopped) {
          return false;
        }
        var currentTime = fxNow || createFxNow(),
          remaining = Math.max(0, animation.startTime + animation.duration - currentTime),
          // Support: Android 2.3 only
          // Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (trac-12497)
          temp = remaining / animation.duration || 0,
          percent = 1 - temp,
          index = 0,
          length = animation.tweens.length;
        for (; index < length; index++) {
          animation.tweens[index].run(percent);
        }
        deferred.notifyWith(elem, [animation, percent, remaining]);

        // If there's more to do, yield
        if (percent < 1 && length) {
          return remaining;
        }

        // If this was an empty animation, synthesize a final progress notification
        if (!length) {
          deferred.notifyWith(elem, [animation, 1, 0]);
        }

        // Resolve the animation and report its conclusion
        deferred.resolveWith(elem, [animation]);
        return false;
      },
      animation = deferred.promise({
        elem: elem,
        props: jQuery.extend({}, properties),
        opts: jQuery.extend(true, {
          specialEasing: {},
          easing: jQuery.easing._default
        }, options),
        originalProperties: properties,
        originalOptions: options,
        startTime: fxNow || createFxNow(),
        duration: options.duration,
        tweens: [],
        createTween: function createTween(prop, end) {
          var tween = jQuery.Tween(elem, animation.opts, prop, end, animation.opts.specialEasing[prop] || animation.opts.easing);
          animation.tweens.push(tween);
          return tween;
        },
        stop: function stop(gotoEnd) {
          var index = 0,
            // If we are going to the end, we want to run all the tweens
            // otherwise we skip this part
            length = gotoEnd ? animation.tweens.length : 0;
          if (stopped) {
            return this;
          }
          stopped = true;
          for (; index < length; index++) {
            animation.tweens[index].run(1);
          }

          // Resolve when we played the last frame; otherwise, reject
          if (gotoEnd) {
            deferred.notifyWith(elem, [animation, 1, 0]);
            deferred.resolveWith(elem, [animation, gotoEnd]);
          } else {
            deferred.rejectWith(elem, [animation, gotoEnd]);
          }
          return this;
        }
      }),
      props = animation.props;
    propFilter(props, animation.opts.specialEasing);
    for (; index < length; index++) {
      result = Animation.prefilters[index].call(animation, elem, props, animation.opts);
      if (result) {
        if (isFunction(result.stop)) {
          jQuery._queueHooks(animation.elem, animation.opts.queue).stop = result.stop.bind(result);
        }
        return result;
      }
    }
    jQuery.map(props, createTween, animation);
    if (isFunction(animation.opts.start)) {
      animation.opts.start.call(elem, animation);
    }

    // Attach callbacks from options
    animation.progress(animation.opts.progress).done(animation.opts.done, animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);
    jQuery.fx.timer(jQuery.extend(tick, {
      elem: elem,
      anim: animation,
      queue: animation.opts.queue
    }));
    return animation;
  }
  jQuery.Animation = jQuery.extend(Animation, {
    tweeners: {
      "*": [function (prop, value) {
        var tween = this.createTween(prop, value);
        adjustCSS(tween.elem, prop, rcssNum.exec(value), tween);
        return tween;
      }]
    },
    tweener: function tweener(props, callback) {
      if (isFunction(props)) {
        callback = props;
        props = ["*"];
      } else {
        props = props.match(rnothtmlwhite);
      }
      var prop,
        index = 0,
        length = props.length;
      for (; index < length; index++) {
        prop = props[index];
        Animation.tweeners[prop] = Animation.tweeners[prop] || [];
        Animation.tweeners[prop].unshift(callback);
      }
    },
    prefilters: [defaultPrefilter],
    prefilter: function prefilter(callback, prepend) {
      if (prepend) {
        Animation.prefilters.unshift(callback);
      } else {
        Animation.prefilters.push(callback);
      }
    }
  });
  jQuery.speed = function (speed, easing, fn) {
    var opt = speed && typeof speed === "object" ? jQuery.extend({}, speed) : {
      complete: fn || !fn && easing || isFunction(speed) && speed,
      duration: speed,
      easing: fn && easing || easing && !isFunction(easing) && easing
    };

    // Go to the end state if fx are off
    if (jQuery.fx.off) {
      opt.duration = 0;
    } else {
      if (typeof opt.duration !== "number") {
        if (opt.duration in jQuery.fx.speeds) {
          opt.duration = jQuery.fx.speeds[opt.duration];
        } else {
          opt.duration = jQuery.fx.speeds._default;
        }
      }
    }

    // Normalize opt.queue - true/undefined/null -> "fx"
    if (opt.queue == null || opt.queue === true) {
      opt.queue = "fx";
    }

    // Queueing
    opt.old = opt.complete;
    opt.complete = function () {
      if (isFunction(opt.old)) {
        opt.old.call(this);
      }
      if (opt.queue) {
        jQuery.dequeue(this, opt.queue);
      }
    };
    return opt;
  };
  jQuery.fn.extend({
    fadeTo: function fadeTo(speed, to, easing, callback) {
      // Show any hidden elements after setting opacity to 0
      return this.filter(isHiddenWithinTree).css("opacity", 0).show()

      // Animate to the value specified
      .end().animate({
        opacity: to
      }, speed, easing, callback);
    },
    animate: function animate(prop, speed, easing, callback) {
      var empty = jQuery.isEmptyObject(prop),
        optall = jQuery.speed(speed, easing, callback),
        doAnimation = function doAnimation() {
          // Operate on a copy of prop so per-property easing won't be lost
          var anim = Animation(this, jQuery.extend({}, prop), optall);

          // Empty animations, or finishing resolves immediately
          if (empty || dataPriv.get(this, "finish")) {
            anim.stop(true);
          }
        };
      doAnimation.finish = doAnimation;
      return empty || optall.queue === false ? this.each(doAnimation) : this.queue(optall.queue, doAnimation);
    },
    stop: function stop(type, clearQueue, gotoEnd) {
      var stopQueue = function stopQueue(hooks) {
        var stop = hooks.stop;
        delete hooks.stop;
        stop(gotoEnd);
      };
      if (typeof type !== "string") {
        gotoEnd = clearQueue;
        clearQueue = type;
        type = undefined;
      }
      if (clearQueue) {
        this.queue(type || "fx", []);
      }
      return this.each(function () {
        var dequeue = true,
          index = type != null && type + "queueHooks",
          timers = jQuery.timers,
          data = dataPriv.get(this);
        if (index) {
          if (data[index] && data[index].stop) {
            stopQueue(data[index]);
          }
        } else {
          for (index in data) {
            if (data[index] && data[index].stop && rrun.test(index)) {
              stopQueue(data[index]);
            }
          }
        }
        for (index = timers.length; index--;) {
          if (timers[index].elem === this && (type == null || timers[index].queue === type)) {
            timers[index].anim.stop(gotoEnd);
            dequeue = false;
            timers.splice(index, 1);
          }
        }

        // Start the next in the queue if the last step wasn't forced.
        // Timers currently will call their complete callbacks, which
        // will dequeue but only if they were gotoEnd.
        if (dequeue || !gotoEnd) {
          jQuery.dequeue(this, type);
        }
      });
    },
    finish: function finish(type) {
      if (type !== false) {
        type = type || "fx";
      }
      return this.each(function () {
        var index,
          data = dataPriv.get(this),
          queue = data[type + "queue"],
          hooks = data[type + "queueHooks"],
          timers = jQuery.timers,
          length = queue ? queue.length : 0;

        // Enable finishing flag on private data
        data.finish = true;

        // Empty the queue first
        jQuery.queue(this, type, []);
        if (hooks && hooks.stop) {
          hooks.stop.call(this, true);
        }

        // Look for any active animations, and finish them
        for (index = timers.length; index--;) {
          if (timers[index].elem === this && timers[index].queue === type) {
            timers[index].anim.stop(true);
            timers.splice(index, 1);
          }
        }

        // Look for any animations in the old queue and finish them
        for (index = 0; index < length; index++) {
          if (queue[index] && queue[index].finish) {
            queue[index].finish.call(this);
          }
        }

        // Turn off finishing flag
        delete data.finish;
      });
    }
  });
  jQuery.each(["toggle", "show", "hide"], function (_i, name) {
    var cssFn = jQuery.fn[name];
    jQuery.fn[name] = function (speed, easing, callback) {
      return speed == null || typeof speed === "boolean" ? cssFn.apply(this, arguments) : this.animate(genFx(name, true), speed, easing, callback);
    };
  });

  // Generate shortcuts for custom animations
  jQuery.each({
    slideDown: genFx("show"),
    slideUp: genFx("hide"),
    slideToggle: genFx("toggle"),
    fadeIn: {
      opacity: "show"
    },
    fadeOut: {
      opacity: "hide"
    },
    fadeToggle: {
      opacity: "toggle"
    }
  }, function (name, props) {
    jQuery.fn[name] = function (speed, easing, callback) {
      return this.animate(props, speed, easing, callback);
    };
  });
  jQuery.timers = [];
  jQuery.fx.tick = function () {
    var timer,
      i = 0,
      timers = jQuery.timers;
    fxNow = Date.now();
    for (; i < timers.length; i++) {
      timer = timers[i];

      // Run the timer and safely remove it when done (allowing for external removal)
      if (!timer() && timers[i] === timer) {
        timers.splice(i--, 1);
      }
    }
    if (!timers.length) {
      jQuery.fx.stop();
    }
    fxNow = undefined;
  };
  jQuery.fx.timer = function (timer) {
    jQuery.timers.push(timer);
    jQuery.fx.start();
  };
  jQuery.fx.interval = 13;
  jQuery.fx.start = function () {
    if (inProgress) {
      return;
    }
    inProgress = true;
    schedule();
  };
  jQuery.fx.stop = function () {
    inProgress = null;
  };
  jQuery.fx.speeds = {
    slow: 600,
    fast: 200,
    // Default speed
    _default: 400
  };

  // Based off of the plugin by Clint Helfers, with permission.
  jQuery.fn.delay = function (time, type) {
    time = jQuery.fx ? jQuery.fx.speeds[time] || time : time;
    type = type || "fx";
    return this.queue(type, function (next, hooks) {
      var timeout = window.setTimeout(next, time);
      hooks.stop = function () {
        window.clearTimeout(timeout);
      };
    });
  };
  (function () {
    var input = document.createElement("input"),
      select = document.createElement("select"),
      opt = select.appendChild(document.createElement("option"));
    input.type = "checkbox";

    // Support: Android <=4.3 only
    // Default value for a checkbox should be "on"
    support.checkOn = input.value !== "";

    // Support: IE <=11 only
    // Must access selectedIndex to make default options select
    support.optSelected = opt.selected;

    // Support: IE <=11 only
    // An input loses its value after becoming a radio
    input = document.createElement("input");
    input.value = "t";
    input.type = "radio";
    support.radioValue = input.value === "t";
  })();
  var boolHook,
    attrHandle = jQuery.expr.attrHandle;
  jQuery.fn.extend({
    attr: function attr(name, value) {
      return access(this, jQuery.attr, name, value, arguments.length > 1);
    },
    removeAttr: function removeAttr(name) {
      return this.each(function () {
        jQuery.removeAttr(this, name);
      });
    }
  });
  jQuery.extend({
    attr: function attr(elem, name, value) {
      var ret,
        hooks,
        nType = elem.nodeType;

      // Don't get/set attributes on text, comment and attribute nodes
      if (nType === 3 || nType === 8 || nType === 2) {
        return;
      }

      // Fallback to prop when attributes are not supported
      if (typeof elem.getAttribute === "undefined") {
        return jQuery.prop(elem, name, value);
      }

      // Attribute hooks are determined by the lowercase version
      // Grab necessary hook if one is defined
      if (nType !== 1 || !jQuery.isXMLDoc(elem)) {
        hooks = jQuery.attrHooks[name.toLowerCase()] || (jQuery.expr.match.bool.test(name) ? boolHook : undefined);
      }
      if (value !== undefined) {
        if (value === null) {
          jQuery.removeAttr(elem, name);
          return;
        }
        if (hooks && "set" in hooks && (ret = hooks.set(elem, value, name)) !== undefined) {
          return ret;
        }
        elem.setAttribute(name, value + "");
        return value;
      }
      if (hooks && "get" in hooks && (ret = hooks.get(elem, name)) !== null) {
        return ret;
      }
      ret = jQuery.find.attr(elem, name);

      // Non-existent attributes return null, we normalize to undefined
      return ret == null ? undefined : ret;
    },
    attrHooks: {
      type: {
        set: function set(elem, value) {
          if (!support.radioValue && value === "radio" && nodeName(elem, "input")) {
            var val = elem.value;
            elem.setAttribute("type", value);
            if (val) {
              elem.value = val;
            }
            return value;
          }
        }
      }
    },
    removeAttr: function removeAttr(elem, value) {
      var name,
        i = 0,
        // Attribute names can contain non-HTML whitespace characters
        // https://html.spec.whatwg.org/multipage/syntax.html#attributes-2
        attrNames = value && value.match(rnothtmlwhite);
      if (attrNames && elem.nodeType === 1) {
        while (name = attrNames[i++]) {
          elem.removeAttribute(name);
        }
      }
    }
  });

  // Hooks for boolean attributes
  boolHook = {
    set: function set(elem, value, name) {
      if (value === false) {
        // Remove boolean attributes when set to false
        jQuery.removeAttr(elem, name);
      } else {
        elem.setAttribute(name, name);
      }
      return name;
    }
  };
  jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g), function (_i, name) {
    var getter = attrHandle[name] || jQuery.find.attr;
    attrHandle[name] = function (elem, name, isXML) {
      var ret,
        handle,
        lowercaseName = name.toLowerCase();
      if (!isXML) {
        // Avoid an infinite loop by temporarily removing this function from the getter
        handle = attrHandle[lowercaseName];
        attrHandle[lowercaseName] = ret;
        ret = getter(elem, name, isXML) != null ? lowercaseName : null;
        attrHandle[lowercaseName] = handle;
      }
      return ret;
    };
  });
  var rfocusable = /^(?:input|select|textarea|button)$/i,
    rclickable = /^(?:a|area)$/i;
  jQuery.fn.extend({
    prop: function prop(name, value) {
      return access(this, jQuery.prop, name, value, arguments.length > 1);
    },
    removeProp: function removeProp(name) {
      return this.each(function () {
        delete this[jQuery.propFix[name] || name];
      });
    }
  });
  jQuery.extend({
    prop: function prop(elem, name, value) {
      var ret,
        hooks,
        nType = elem.nodeType;

      // Don't get/set properties on text, comment and attribute nodes
      if (nType === 3 || nType === 8 || nType === 2) {
        return;
      }
      if (nType !== 1 || !jQuery.isXMLDoc(elem)) {
        // Fix name and attach hooks
        name = jQuery.propFix[name] || name;
        hooks = jQuery.propHooks[name];
      }
      if (value !== undefined) {
        if (hooks && "set" in hooks && (ret = hooks.set(elem, value, name)) !== undefined) {
          return ret;
        }
        return elem[name] = value;
      }
      if (hooks && "get" in hooks && (ret = hooks.get(elem, name)) !== null) {
        return ret;
      }
      return elem[name];
    },
    propHooks: {
      tabIndex: {
        get: function get(elem) {
          // Support: IE <=9 - 11 only
          // elem.tabIndex doesn't always return the
          // correct value when it hasn't been explicitly set
          // Use proper attribute retrieval (trac-12072)
          var tabindex = jQuery.find.attr(elem, "tabindex");
          if (tabindex) {
            return parseInt(tabindex, 10);
          }
          if (rfocusable.test(elem.nodeName) || rclickable.test(elem.nodeName) && elem.href) {
            return 0;
          }
          return -1;
        }
      }
    },
    propFix: {
      "for": "htmlFor",
      "class": "className"
    }
  });

  // Support: IE <=11 only
  // Accessing the selectedIndex property
  // forces the browser to respect setting selected
  // on the option
  // The getter ensures a default option is selected
  // when in an optgroup
  // eslint rule "no-unused-expressions" is disabled for this code
  // since it considers such accessions noop
  if (!support.optSelected) {
    jQuery.propHooks.selected = {
      get: function get(elem) {
        /* eslint no-unused-expressions: "off" */

        var parent = elem.parentNode;
        if (parent && parent.parentNode) {
          parent.parentNode.selectedIndex;
        }
        return null;
      },
      set: function set(elem) {
        /* eslint no-unused-expressions: "off" */

        var parent = elem.parentNode;
        if (parent) {
          parent.selectedIndex;
          if (parent.parentNode) {
            parent.parentNode.selectedIndex;
          }
        }
      }
    };
  }
  jQuery.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () {
    jQuery.propFix[this.toLowerCase()] = this;
  });

  // Strip and collapse whitespace according to HTML spec
  // https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace
  function stripAndCollapse(value) {
    var tokens = value.match(rnothtmlwhite) || [];
    return tokens.join(" ");
  }
  function getClass(elem) {
    return elem.getAttribute && elem.getAttribute("class") || "";
  }
  function classesToArray(value) {
    if (Array.isArray(value)) {
      return value;
    }
    if (typeof value === "string") {
      return value.match(rnothtmlwhite) || [];
    }
    return [];
  }
  jQuery.fn.extend({
    addClass: function addClass(value) {
      var classNames, cur, curValue, className, i, finalValue;
      if (isFunction(value)) {
        return this.each(function (j) {
          jQuery(this).addClass(value.call(this, j, getClass(this)));
        });
      }
      classNames = classesToArray(value);
      if (classNames.length) {
        return this.each(function () {
          curValue = getClass(this);
          cur = this.nodeType === 1 && " " + stripAndCollapse(curValue) + " ";
          if (cur) {
            for (i = 0; i < classNames.length; i++) {
              className = classNames[i];
              if (cur.indexOf(" " + className + " ") < 0) {
                cur += className + " ";
              }
            }

            // Only assign if different to avoid unneeded rendering.
            finalValue = stripAndCollapse(cur);
            if (curValue !== finalValue) {
              this.setAttribute("class", finalValue);
            }
          }
        });
      }
      return this;
    },
    removeClass: function removeClass(value) {
      var classNames, cur, curValue, className, i, finalValue;
      if (isFunction(value)) {
        return this.each(function (j) {
          jQuery(this).removeClass(value.call(this, j, getClass(this)));
        });
      }
      if (!arguments.length) {
        return this.attr("class", "");
      }
      classNames = classesToArray(value);
      if (classNames.length) {
        return this.each(function () {
          curValue = getClass(this);

          // This expression is here for better compressibility (see addClass)
          cur = this.nodeType === 1 && " " + stripAndCollapse(curValue) + " ";
          if (cur) {
            for (i = 0; i < classNames.length; i++) {
              className = classNames[i];

              // Remove *all* instances
              while (cur.indexOf(" " + className + " ") > -1) {
                cur = cur.replace(" " + className + " ", " ");
              }
            }

            // Only assign if different to avoid unneeded rendering.
            finalValue = stripAndCollapse(cur);
            if (curValue !== finalValue) {
              this.setAttribute("class", finalValue);
            }
          }
        });
      }
      return this;
    },
    toggleClass: function toggleClass(value, stateVal) {
      var classNames,
        className,
        i,
        self,
        type = typeof value,
        isValidValue = type === "string" || Array.isArray(value);
      if (isFunction(value)) {
        return this.each(function (i) {
          jQuery(this).toggleClass(value.call(this, i, getClass(this), stateVal), stateVal);
        });
      }
      if (typeof stateVal === "boolean" && isValidValue) {
        return stateVal ? this.addClass(value) : this.removeClass(value);
      }
      classNames = classesToArray(value);
      return this.each(function () {
        if (isValidValue) {
          // Toggle individual class names
          self = jQuery(this);
          for (i = 0; i < classNames.length; i++) {
            className = classNames[i];

            // Check each className given, space separated list
            if (self.hasClass(className)) {
              self.removeClass(className);
            } else {
              self.addClass(className);
            }
          }

          // Toggle whole class name
        } else if (value === undefined || type === "boolean") {
          className = getClass(this);
          if (className) {
            // Store className if set
            dataPriv.set(this, "__className__", className);
          }

          // If the element has a class name or if we're passed `false`,
          // then remove the whole classname (if there was one, the above saved it).
          // Otherwise bring back whatever was previously saved (if anything),
          // falling back to the empty string if nothing was stored.
          if (this.setAttribute) {
            this.setAttribute("class", className || value === false ? "" : dataPriv.get(this, "__className__") || "");
          }
        }
      });
    },
    hasClass: function hasClass(selector) {
      var className,
        elem,
        i = 0;
      className = " " + selector + " ";
      while (elem = this[i++]) {
        if (elem.nodeType === 1 && (" " + stripAndCollapse(getClass(elem)) + " ").indexOf(className) > -1) {
          return true;
        }
      }
      return false;
    }
  });
  var rreturn = /\r/g;
  jQuery.fn.extend({
    val: function val(value) {
      var hooks,
        ret,
        valueIsFunction,
        elem = this[0];
      if (!arguments.length) {
        if (elem) {
          hooks = jQuery.valHooks[elem.type] || jQuery.valHooks[elem.nodeName.toLowerCase()];
          if (hooks && "get" in hooks && (ret = hooks.get(elem, "value")) !== undefined) {
            return ret;
          }
          ret = elem.value;

          // Handle most common string cases
          if (typeof ret === "string") {
            return ret.replace(rreturn, "");
          }

          // Handle cases where value is null/undef or number
          return ret == null ? "" : ret;
        }
        return;
      }
      valueIsFunction = isFunction(value);
      return this.each(function (i) {
        var val;
        if (this.nodeType !== 1) {
          return;
        }
        if (valueIsFunction) {
          val = value.call(this, i, jQuery(this).val());
        } else {
          val = value;
        }

        // Treat null/undefined as ""; convert numbers to string
        if (val == null) {
          val = "";
        } else if (typeof val === "number") {
          val += "";
        } else if (Array.isArray(val)) {
          val = jQuery.map(val, function (value) {
            return value == null ? "" : value + "";
          });
        }
        hooks = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()];

        // If set returns undefined, fall back to normal setting
        if (!hooks || !("set" in hooks) || hooks.set(this, val, "value") === undefined) {
          this.value = val;
        }
      });
    }
  });
  jQuery.extend({
    valHooks: {
      option: {
        get: function get(elem) {
          var val = jQuery.find.attr(elem, "value");
          return val != null ? val :
          // Support: IE <=10 - 11 only
          // option.text throws exceptions (trac-14686, trac-14858)
          // Strip and collapse whitespace
          // https://html.spec.whatwg.org/#strip-and-collapse-whitespace
          stripAndCollapse(jQuery.text(elem));
        }
      },
      select: {
        get: function get(elem) {
          var value,
            option,
            i,
            options = elem.options,
            index = elem.selectedIndex,
            one = elem.type === "select-one",
            values = one ? null : [],
            max = one ? index + 1 : options.length;
          if (index < 0) {
            i = max;
          } else {
            i = one ? index : 0;
          }

          // Loop through all the selected options
          for (; i < max; i++) {
            option = options[i];

            // Support: IE <=9 only
            // IE8-9 doesn't update selected after form reset (trac-2551)
            if ((option.selected || i === index) &&
            // Don't return options that are disabled or in a disabled optgroup
            !option.disabled && (!option.parentNode.disabled || !nodeName(option.parentNode, "optgroup"))) {
              // Get the specific value for the option
              value = jQuery(option).val();

              // We don't need an array for one selects
              if (one) {
                return value;
              }

              // Multi-Selects return an array
              values.push(value);
            }
          }
          return values;
        },
        set: function set(elem, value) {
          var optionSet,
            option,
            options = elem.options,
            values = jQuery.makeArray(value),
            i = options.length;
          while (i--) {
            option = options[i];

            /* eslint-disable no-cond-assign */

            if (option.selected = jQuery.inArray(jQuery.valHooks.option.get(option), values) > -1) {
              optionSet = true;
            }

            /* eslint-enable no-cond-assign */
          }

          // Force browsers to behave consistently when non-matching value is set
          if (!optionSet) {
            elem.selectedIndex = -1;
          }
          return values;
        }
      }
    }
  });

  // Radios and checkboxes getter/setter
  jQuery.each(["radio", "checkbox"], function () {
    jQuery.valHooks[this] = {
      set: function set(elem, value) {
        if (Array.isArray(value)) {
          return elem.checked = jQuery.inArray(jQuery(elem).val(), value) > -1;
        }
      }
    };
    if (!support.checkOn) {
      jQuery.valHooks[this].get = function (elem) {
        return elem.getAttribute("value") === null ? "on" : elem.value;
      };
    }
  });

  // Return jQuery for attributes-only inclusion

  support.focusin = "onfocusin" in window;
  var rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
    stopPropagationCallback = function stopPropagationCallback(e) {
      e.stopPropagation();
    };
  jQuery.extend(jQuery.event, {
    trigger: function trigger(event, data, elem, onlyHandlers) {
      var i,
        cur,
        tmp,
        bubbleType,
        ontype,
        handle,
        special,
        lastElement,
        eventPath = [elem || document],
        type = hasOwn.call(event, "type") ? event.type : event,
        namespaces = hasOwn.call(event, "namespace") ? event.namespace.split(".") : [];
      cur = lastElement = tmp = elem = elem || document;

      // Don't do events on text and comment nodes
      if (elem.nodeType === 3 || elem.nodeType === 8) {
        return;
      }

      // focus/blur morphs to focusin/out; ensure we're not firing them right now
      if (rfocusMorph.test(type + jQuery.event.triggered)) {
        return;
      }
      if (type.indexOf(".") > -1) {
        // Namespaced trigger; create a regexp to match event type in handle()
        namespaces = type.split(".");
        type = namespaces.shift();
        namespaces.sort();
      }
      ontype = type.indexOf(":") < 0 && "on" + type;

      // Caller can pass in a jQuery.Event object, Object, or just an event type string
      event = event[jQuery.expando] ? event : new jQuery.Event(type, typeof event === "object" && event);

      // Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
      event.isTrigger = onlyHandlers ? 2 : 3;
      event.namespace = namespaces.join(".");
      event.rnamespace = event.namespace ? new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)") : null;

      // Clean up the event in case it is being reused
      event.result = undefined;
      if (!event.target) {
        event.target = elem;
      }

      // Clone any incoming data and prepend the event, creating the handler arg list
      data = data == null ? [event] : jQuery.makeArray(data, [event]);

      // Allow special events to draw outside the lines
      special = jQuery.event.special[type] || {};
      if (!onlyHandlers && special.trigger && special.trigger.apply(elem, data) === false) {
        return;
      }

      // Determine event propagation path in advance, per W3C events spec (trac-9951)
      // Bubble up to document, then to window; watch for a global ownerDocument var (trac-9724)
      if (!onlyHandlers && !special.noBubble && !isWindow(elem)) {
        bubbleType = special.delegateType || type;
        if (!rfocusMorph.test(bubbleType + type)) {
          cur = cur.parentNode;
        }
        for (; cur; cur = cur.parentNode) {
          eventPath.push(cur);
          tmp = cur;
        }

        // Only add window if we got to document (e.g., not plain obj or detached DOM)
        if (tmp === (elem.ownerDocument || document)) {
          eventPath.push(tmp.defaultView || tmp.parentWindow || window);
        }
      }

      // Fire handlers on the event path
      i = 0;
      while ((cur = eventPath[i++]) && !event.isPropagationStopped()) {
        lastElement = cur;
        event.type = i > 1 ? bubbleType : special.bindType || type;

        // jQuery handler
        handle = (dataPriv.get(cur, "events") || Object.create(null))[event.type] && dataPriv.get(cur, "handle");
        if (handle) {
          handle.apply(cur, data);
        }

        // Native handler
        handle = ontype && cur[ontype];
        if (handle && handle.apply && acceptData(cur)) {
          event.result = handle.apply(cur, data);
          if (event.result === false) {
            event.preventDefault();
          }
        }
      }
      event.type = type;

      // If nobody prevented the default action, do it now
      if (!onlyHandlers && !event.isDefaultPrevented()) {
        if ((!special._default || special._default.apply(eventPath.pop(), data) === false) && acceptData(elem)) {
          // Call a native DOM method on the target with the same name as the event.
          // Don't do default actions on window, that's where global variables be (trac-6170)
          if (ontype && isFunction(elem[type]) && !isWindow(elem)) {
            // Don't re-trigger an onFOO event when we call its FOO() method
            tmp = elem[ontype];
            if (tmp) {
              elem[ontype] = null;
            }

            // Prevent re-triggering of the same event, since we already bubbled it above
            jQuery.event.triggered = type;
            if (event.isPropagationStopped()) {
              lastElement.addEventListener(type, stopPropagationCallback);
            }
            elem[type]();
            if (event.isPropagationStopped()) {
              lastElement.removeEventListener(type, stopPropagationCallback);
            }
            jQuery.event.triggered = undefined;
            if (tmp) {
              elem[ontype] = tmp;
            }
          }
        }
      }
      return event.result;
    },
    // Piggyback on a donor event to simulate a different one
    // Used only for `focus(in | out)` events
    simulate: function simulate(type, elem, event) {
      var e = jQuery.extend(new jQuery.Event(), event, {
        type: type,
        isSimulated: true
      });
      jQuery.event.trigger(e, null, elem);
    }
  });
  jQuery.fn.extend({
    trigger: function trigger(type, data) {
      return this.each(function () {
        jQuery.event.trigger(type, data, this);
      });
    },
    triggerHandler: function triggerHandler(type, data) {
      var elem = this[0];
      if (elem) {
        return jQuery.event.trigger(type, data, elem, true);
      }
    }
  });

  // Support: Firefox <=44
  // Firefox doesn't have focus(in | out) events
  // Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787
  //
  // Support: Chrome <=48 - 49, Safari <=9.0 - 9.1
  // focus(in | out) events fire after focus & blur events,
  // which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order
  // Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857
  if (!support.focusin) {
    jQuery.each({
      focus: "focusin",
      blur: "focusout"
    }, function (orig, fix) {
      // Attach a single capturing handler on the document while someone wants focusin/focusout
      var handler = function handler(event) {
        jQuery.event.simulate(fix, event.target, jQuery.event.fix(event));
      };
      jQuery.event.special[fix] = {
        setup: function setup() {
          // Handle: regular nodes (via `this.ownerDocument`), window
          // (via `this.document`) & document (via `this`).
          var doc = this.ownerDocument || this.document || this,
            attaches = dataPriv.access(doc, fix);
          if (!attaches) {
            doc.addEventListener(orig, handler, true);
          }
          dataPriv.access(doc, fix, (attaches || 0) + 1);
        },
        teardown: function teardown() {
          var doc = this.ownerDocument || this.document || this,
            attaches = dataPriv.access(doc, fix) - 1;
          if (!attaches) {
            doc.removeEventListener(orig, handler, true);
            dataPriv.remove(doc, fix);
          } else {
            dataPriv.access(doc, fix, attaches);
          }
        }
      };
    });
  }
  var location = window.location;
  var nonce = {
    guid: Date.now()
  };
  var rquery = /\?/;

  // Cross-browser xml parsing
  jQuery.parseXML = function (data) {
    var xml, parserErrorElem;
    if (!data || typeof data !== "string") {
      return null;
    }

    // Support: IE 9 - 11 only
    // IE throws on parseFromString with invalid input.
    try {
      xml = new window.DOMParser().parseFromString(data, "text/xml");
    } catch (e) {}
    parserErrorElem = xml && xml.getElementsByTagName("parsererror")[0];
    if (!xml || parserErrorElem) {
      jQuery.error("Invalid XML: " + (parserErrorElem ? jQuery.map(parserErrorElem.childNodes, function (el) {
        return el.textContent;
      }).join("\n") : data));
    }
    return xml;
  };
  var rbracket = /\[\]$/,
    rCRLF = /\r?\n/g,
    rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
    rsubmittable = /^(?:input|select|textarea|keygen)/i;
  function buildParams(prefix, obj, traditional, add) {
    var name;
    if (Array.isArray(obj)) {
      // Serialize array item.
      jQuery.each(obj, function (i, v) {
        if (traditional || rbracket.test(prefix)) {
          // Treat each array item as a scalar.
          add(prefix, v);
        } else {
          // Item is non-scalar (array or object), encode its numeric index.
          buildParams(prefix + "[" + (typeof v === "object" && v != null ? i : "") + "]", v, traditional, add);
        }
      });
    } else if (!traditional && toType(obj) === "object") {
      // Serialize object item.
      for (name in obj) {
        buildParams(prefix + "[" + name + "]", obj[name], traditional, add);
      }
    } else {
      // Serialize scalar item.
      add(prefix, obj);
    }
  }

  // Serialize an array of form elements or a set of
  // key/values into a query string
  jQuery.param = function (a, traditional) {
    var prefix,
      s = [],
      add = function add(key, valueOrFunction) {
        // If value is a function, invoke it and use its return value
        var value = isFunction(valueOrFunction) ? valueOrFunction() : valueOrFunction;
        s[s.length] = encodeURIComponent(key) + "=" + encodeURIComponent(value == null ? "" : value);
      };
    if (a == null) {
      return "";
    }

    // If an array was passed in, assume that it is an array of form elements.
    if (Array.isArray(a) || a.jquery && !jQuery.isPlainObject(a)) {
      // Serialize the form elements
      jQuery.each(a, function () {
        add(this.name, this.value);
      });
    } else {
      // If traditional, encode the "old" way (the way 1.3.2 or older
      // did it), otherwise encode params recursively.
      for (prefix in a) {
        buildParams(prefix, a[prefix], traditional, add);
      }
    }

    // Return the resulting serialization
    return s.join("&");
  };
  jQuery.fn.extend({
    serialize: function serialize() {
      return jQuery.param(this.serializeArray());
    },
    serializeArray: function serializeArray() {
      return this.map(function () {
        // Can add propHook for "elements" to filter or add form elements
        var elements = jQuery.prop(this, "elements");
        return elements ? jQuery.makeArray(elements) : this;
      }).filter(function () {
        var type = this.type;

        // Use .is( ":disabled" ) so that fieldset[disabled] works
        return this.name && !jQuery(this).is(":disabled") && rsubmittable.test(this.nodeName) && !rsubmitterTypes.test(type) && (this.checked || !rcheckableType.test(type));
      }).map(function (_i, elem) {
        var val = jQuery(this).val();
        if (val == null) {
          return null;
        }
        if (Array.isArray(val)) {
          return jQuery.map(val, function (val) {
            return {
              name: elem.name,
              value: val.replace(rCRLF, "\r\n")
            };
          });
        }
        return {
          name: elem.name,
          value: val.replace(rCRLF, "\r\n")
        };
      }).get();
    }
  });
  var r20 = /%20/g,
    rhash = /#.*$/,
    rantiCache = /([?&])_=[^&]*/,
    rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,
    // trac-7653, trac-8125, trac-8152: local protocol detection
    rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
    rnoContent = /^(?:GET|HEAD)$/,
    rprotocol = /^\/\//,
    /* Prefilters
     * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
     * 2) These are called:
     *    - BEFORE asking for a transport
     *    - AFTER param serialization (s.data is a string if s.processData is true)
     * 3) key is the dataType
     * 4) the catchall symbol "*" can be used
     * 5) execution will start with transport dataType and THEN continue down to "*" if needed
     */
    prefilters = {},
    /* Transports bindings
     * 1) key is the dataType
     * 2) the catchall symbol "*" can be used
     * 3) selection will start with transport dataType and THEN go to "*" if needed
     */
    transports = {},
    // Avoid comment-prolog char sequence (trac-10098); must appease lint and evade compression
    allTypes = "*/".concat("*"),
    // Anchor tag for parsing the document origin
    originAnchor = document.createElement("a");
  originAnchor.href = location.href;

  // Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
  function addToPrefiltersOrTransports(structure) {
    // dataTypeExpression is optional and defaults to "*"
    return function (dataTypeExpression, func) {
      if (typeof dataTypeExpression !== "string") {
        func = dataTypeExpression;
        dataTypeExpression = "*";
      }
      var dataType,
        i = 0,
        dataTypes = dataTypeExpression.toLowerCase().match(rnothtmlwhite) || [];
      if (isFunction(func)) {
        // For each dataType in the dataTypeExpression
        while (dataType = dataTypes[i++]) {
          // Prepend if requested
          if (dataType[0] === "+") {
            dataType = dataType.slice(1) || "*";
            (structure[dataType] = structure[dataType] || []).unshift(func);

            // Otherwise append
          } else {
            (structure[dataType] = structure[dataType] || []).push(func);
          }
        }
      }
    };
  }

  // Base inspection function for prefilters and transports
  function inspectPrefiltersOrTransports(structure, options, originalOptions, jqXHR) {
    var inspected = {},
      seekingTransport = structure === transports;
    function inspect(dataType) {
      var selected;
      inspected[dataType] = true;
      jQuery.each(structure[dataType] || [], function (_, prefilterOrFactory) {
        var dataTypeOrTransport = prefilterOrFactory(options, originalOptions, jqXHR);
        if (typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[dataTypeOrTransport]) {
          options.dataTypes.unshift(dataTypeOrTransport);
          inspect(dataTypeOrTransport);
          return false;
        } else if (seekingTransport) {
          return !(selected = dataTypeOrTransport);
        }
      });
      return selected;
    }
    return inspect(options.dataTypes[0]) || !inspected["*"] && inspect("*");
  }

  // A special extend for ajax options
  // that takes "flat" options (not to be deep extended)
  // Fixes trac-9887
  function ajaxExtend(target, src) {
    var key,
      deep,
      flatOptions = jQuery.ajaxSettings.flatOptions || {};
    for (key in src) {
      if (src[key] !== undefined) {
        (flatOptions[key] ? target : deep || (deep = {}))[key] = src[key];
      }
    }
    if (deep) {
      jQuery.extend(true, target, deep);
    }
    return target;
  }

  /* Handles responses to an ajax request:
   * - finds the right dataType (mediates between content-type and expected dataType)
   * - returns the corresponding response
   */
  function ajaxHandleResponses(s, jqXHR, responses) {
    var ct,
      type,
      finalDataType,
      firstDataType,
      contents = s.contents,
      dataTypes = s.dataTypes;

    // Remove auto dataType and get content-type in the process
    while (dataTypes[0] === "*") {
      dataTypes.shift();
      if (ct === undefined) {
        ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
      }
    }

    // Check if we're dealing with a known content-type
    if (ct) {
      for (type in contents) {
        if (contents[type] && contents[type].test(ct)) {
          dataTypes.unshift(type);
          break;
        }
      }
    }

    // Check to see if we have a response for the expected dataType
    if (dataTypes[0] in responses) {
      finalDataType = dataTypes[0];
    } else {
      // Try convertible dataTypes
      for (type in responses) {
        if (!dataTypes[0] || s.converters[type + " " + dataTypes[0]]) {
          finalDataType = type;
          break;
        }
        if (!firstDataType) {
          firstDataType = type;
        }
      }

      // Or just use first one
      finalDataType = finalDataType || firstDataType;
    }

    // If we found a dataType
    // We add the dataType to the list if needed
    // and return the corresponding response
    if (finalDataType) {
      if (finalDataType !== dataTypes[0]) {
        dataTypes.unshift(finalDataType);
      }
      return responses[finalDataType];
    }
  }

  /* Chain conversions given the request and the original response
   * Also sets the responseXXX fields on the jqXHR instance
   */
  function ajaxConvert(s, response, jqXHR, isSuccess) {
    var conv2,
      current,
      conv,
      tmp,
      prev,
      converters = {},
      // Work with a copy of dataTypes in case we need to modify it for conversion
      dataTypes = s.dataTypes.slice();

    // Create converters map with lowercased keys
    if (dataTypes[1]) {
      for (conv in s.converters) {
        converters[conv.toLowerCase()] = s.converters[conv];
      }
    }
    current = dataTypes.shift();

    // Convert to each sequential dataType
    while (current) {
      if (s.responseFields[current]) {
        jqXHR[s.responseFields[current]] = response;
      }

      // Apply the dataFilter if provided
      if (!prev && isSuccess && s.dataFilter) {
        response = s.dataFilter(response, s.dataType);
      }
      prev = current;
      current = dataTypes.shift();
      if (current) {
        // There's only work to do if current dataType is non-auto
        if (current === "*") {
          current = prev;

          // Convert response if prev dataType is non-auto and differs from current
        } else if (prev !== "*" && prev !== current) {
          // Seek a direct converter
          conv = converters[prev + " " + current] || converters["* " + current];

          // If none found, seek a pair
          if (!conv) {
            for (conv2 in converters) {
              // If conv2 outputs current
              tmp = conv2.split(" ");
              if (tmp[1] === current) {
                // If prev can be converted to accepted input
                conv = converters[prev + " " + tmp[0]] || converters["* " + tmp[0]];
                if (conv) {
                  // Condense equivalence converters
                  if (conv === true) {
                    conv = converters[conv2];

                    // Otherwise, insert the intermediate dataType
                  } else if (converters[conv2] !== true) {
                    current = tmp[0];
                    dataTypes.unshift(tmp[1]);
                  }
                  break;
                }
              }
            }
          }

          // Apply converter (if not an equivalence)
          if (conv !== true) {
            // Unless errors are allowed to bubble, catch and return them
            if (conv && s["throws"]) {
              response = conv(response);
            } else {
              try {
                response = conv(response);
              } catch (e) {
                return {
                  state: "parsererror",
                  error: conv ? e : "No conversion from " + prev + " to " + current
                };
              }
            }
          }
        }
      }
    }
    return {
      state: "success",
      data: response
    };
  }
  jQuery.extend({
    // Counter for holding the number of active queries
    active: 0,
    // Last-Modified header cache for next request
    lastModified: {},
    etag: {},
    ajaxSettings: {
      url: location.href,
      type: "GET",
      isLocal: rlocalProtocol.test(location.protocol),
      global: true,
      processData: true,
      async: true,
      contentType: "application/x-www-form-urlencoded; charset=UTF-8",
      /*
      timeout: 0,
      data: null,
      dataType: null,
      username: null,
      password: null,
      cache: null,
      throws: false,
      traditional: false,
      headers: {},
      */

      accepts: {
        "*": allTypes,
        text: "text/plain",
        html: "text/html",
        xml: "application/xml, text/xml",
        json: "application/json, text/javascript"
      },
      contents: {
        xml: /\bxml\b/,
        html: /\bhtml/,
        json: /\bjson\b/
      },
      responseFields: {
        xml: "responseXML",
        text: "responseText",
        json: "responseJSON"
      },
      // Data converters
      // Keys separate source (or catchall "*") and destination types with a single space
      converters: {
        // Convert anything to text
        "* text": String,
        // Text to html (true = no transformation)
        "text html": true,
        // Evaluate text as a json expression
        "text json": JSON.parse,
        // Parse text as xml
        "text xml": jQuery.parseXML
      },
      // For options that shouldn't be deep extended:
      // you can add your own custom options here if
      // and when you create one that shouldn't be
      // deep extended (see ajaxExtend)
      flatOptions: {
        url: true,
        context: true
      }
    },
    // Creates a full fledged settings object into target
    // with both ajaxSettings and settings fields.
    // If target is omitted, writes into ajaxSettings.
    ajaxSetup: function ajaxSetup(target, settings) {
      return settings ?
      // Building a settings object
      ajaxExtend(ajaxExtend(target, jQuery.ajaxSettings), settings) :
      // Extending ajaxSettings
      ajaxExtend(jQuery.ajaxSettings, target);
    },
    ajaxPrefilter: addToPrefiltersOrTransports(prefilters),
    ajaxTransport: addToPrefiltersOrTransports(transports),
    // Main method
    ajax: function ajax(url, options) {
      // If url is an object, simulate pre-1.5 signature
      if (typeof url === "object") {
        options = url;
        url = undefined;
      }

      // Force options to be an object
      options = options || {};
      var transport,
        // URL without anti-cache param
        cacheURL,
        // Response headers
        responseHeadersString,
        responseHeaders,
        // timeout handle
        timeoutTimer,
        // Url cleanup var
        urlAnchor,
        // Request state (becomes false upon send and true upon completion)
        completed,
        // To know if global events are to be dispatched
        fireGlobals,
        // Loop variable
        i,
        // uncached part of the url
        uncached,
        // Create the final options object
        s = jQuery.ajaxSetup({}, options),
        // Callbacks context
        callbackContext = s.context || s,
        // Context for global events is callbackContext if it is a DOM node or jQuery collection
        globalEventContext = s.context && (callbackContext.nodeType || callbackContext.jquery) ? jQuery(callbackContext) : jQuery.event,
        // Deferreds
        deferred = jQuery.Deferred(),
        completeDeferred = jQuery.Callbacks("once memory"),
        // Status-dependent callbacks
        _statusCode = s.statusCode || {},
        // Headers (they are sent all at once)
        requestHeaders = {},
        requestHeadersNames = {},
        // Default abort message
        strAbort = "canceled",
        // Fake xhr
        jqXHR = {
          readyState: 0,
          // Builds headers hashtable if needed
          getResponseHeader: function getResponseHeader(key) {
            var match;
            if (completed) {
              if (!responseHeaders) {
                responseHeaders = {};
                while (match = rheaders.exec(responseHeadersString)) {
                  responseHeaders[match[1].toLowerCase() + " "] = (responseHeaders[match[1].toLowerCase() + " "] || []).concat(match[2]);
                }
              }
              match = responseHeaders[key.toLowerCase() + " "];
            }
            return match == null ? null : match.join(", ");
          },
          // Raw string
          getAllResponseHeaders: function getAllResponseHeaders() {
            return completed ? responseHeadersString : null;
          },
          // Caches the header
          setRequestHeader: function setRequestHeader(name, value) {
            if (completed == null) {
              name = requestHeadersNames[name.toLowerCase()] = requestHeadersNames[name.toLowerCase()] || name;
              requestHeaders[name] = value;
            }
            return this;
          },
          // Overrides response content-type header
          overrideMimeType: function overrideMimeType(type) {
            if (completed == null) {
              s.mimeType = type;
            }
            return this;
          },
          // Status-dependent callbacks
          statusCode: function statusCode(map) {
            var code;
            if (map) {
              if (completed) {
                // Execute the appropriate callbacks
                jqXHR.always(map[jqXHR.status]);
              } else {
                // Lazy-add the new callbacks in a way that preserves old ones
                for (code in map) {
                  _statusCode[code] = [_statusCode[code], map[code]];
                }
              }
            }
            return this;
          },
          // Cancel the request
          abort: function abort(statusText) {
            var finalText = statusText || strAbort;
            if (transport) {
              transport.abort(finalText);
            }
            done(0, finalText);
            return this;
          }
        };

      // Attach deferreds
      deferred.promise(jqXHR);

      // Add protocol if not provided (prefilters might expect it)
      // Handle falsy url in the settings object (trac-10093: consistency with old signature)
      // We also use the url parameter if available
      s.url = ((url || s.url || location.href) + "").replace(rprotocol, location.protocol + "//");

      // Alias method option to type as per ticket trac-12004
      s.type = options.method || options.type || s.method || s.type;

      // Extract dataTypes list
      s.dataTypes = (s.dataType || "*").toLowerCase().match(rnothtmlwhite) || [""];

      // A cross-domain request is in order when the origin doesn't match the current origin.
      if (s.crossDomain == null) {
        urlAnchor = document.createElement("a");

        // Support: IE <=8 - 11, Edge 12 - 15
        // IE throws exception on accessing the href property if url is malformed,
        // e.g. http://example.com:80x/
        try {
          urlAnchor.href = s.url;

          // Support: IE <=8 - 11 only
          // Anchor's host property isn't correctly set when s.url is relative
          urlAnchor.href = urlAnchor.href;
          s.crossDomain = originAnchor.protocol + "//" + originAnchor.host !== urlAnchor.protocol + "//" + urlAnchor.host;
        } catch (e) {
          // If there is an error parsing the URL, assume it is crossDomain,
          // it can be rejected by the transport if it is invalid
          s.crossDomain = true;
        }
      }

      // Convert data if not already a string
      if (s.data && s.processData && typeof s.data !== "string") {
        s.data = jQuery.param(s.data, s.traditional);
      }

      // Apply prefilters
      inspectPrefiltersOrTransports(prefilters, s, options, jqXHR);

      // If request was aborted inside a prefilter, stop there
      if (completed) {
        return jqXHR;
      }

      // We can fire global events as of now if asked to
      // Don't fire events if jQuery.event is undefined in an AMD-usage scenario (trac-15118)
      fireGlobals = jQuery.event && s.global;

      // Watch for a new set of requests
      if (fireGlobals && jQuery.active++ === 0) {
        jQuery.event.trigger("ajaxStart");
      }

      // Uppercase the type
      s.type = s.type.toUpperCase();

      // Determine if request has content
      s.hasContent = !rnoContent.test(s.type);

      // Save the URL in case we're toying with the If-Modified-Since
      // and/or If-None-Match header later on
      // Remove hash to simplify url manipulation
      cacheURL = s.url.replace(rhash, "");

      // More options handling for requests with no content
      if (!s.hasContent) {
        // Remember the hash so we can put it back
        uncached = s.url.slice(cacheURL.length);

        // If data is available and should be processed, append data to url
        if (s.data && (s.processData || typeof s.data === "string")) {
          cacheURL += (rquery.test(cacheURL) ? "&" : "?") + s.data;

          // trac-9682: remove data so that it's not used in an eventual retry
          delete s.data;
        }

        // Add or update anti-cache param if needed
        if (s.cache === false) {
          cacheURL = cacheURL.replace(rantiCache, "$1");
          uncached = (rquery.test(cacheURL) ? "&" : "?") + "_=" + nonce.guid++ + uncached;
        }

        // Put hash and anti-cache on the URL that will be requested (gh-1732)
        s.url = cacheURL + uncached;

        // Change '%20' to '+' if this is encoded form body content (gh-2658)
      } else if (s.data && s.processData && (s.contentType || "").indexOf("application/x-www-form-urlencoded") === 0) {
        s.data = s.data.replace(r20, "+");
      }

      // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
      if (s.ifModified) {
        if (jQuery.lastModified[cacheURL]) {
          jqXHR.setRequestHeader("If-Modified-Since", jQuery.lastModified[cacheURL]);
        }
        if (jQuery.etag[cacheURL]) {
          jqXHR.setRequestHeader("If-None-Match", jQuery.etag[cacheURL]);
        }
      }

      // Set the correct header, if data is being sent
      if (s.data && s.hasContent && s.contentType !== false || options.contentType) {
        jqXHR.setRequestHeader("Content-Type", s.contentType);
      }

      // Set the Accepts header for the server, depending on the dataType
      jqXHR.setRequestHeader("Accept", s.dataTypes[0] && s.accepts[s.dataTypes[0]] ? s.accepts[s.dataTypes[0]] + (s.dataTypes[0] !== "*" ? ", " + allTypes + "; q=0.01" : "") : s.accepts["*"]);

      // Check for headers option
      for (i in s.headers) {
        jqXHR.setRequestHeader(i, s.headers[i]);
      }

      // Allow custom headers/mimetypes and early abort
      if (s.beforeSend && (s.beforeSend.call(callbackContext, jqXHR, s) === false || completed)) {
        // Abort if not done already and return
        return jqXHR.abort();
      }

      // Aborting is no longer a cancellation
      strAbort = "abort";

      // Install callbacks on deferreds
      completeDeferred.add(s.complete);
      jqXHR.done(s.success);
      jqXHR.fail(s.error);

      // Get transport
      transport = inspectPrefiltersOrTransports(transports, s, options, jqXHR);

      // If no transport, we auto-abort
      if (!transport) {
        done(-1, "No Transport");
      } else {
        jqXHR.readyState = 1;

        // Send global event
        if (fireGlobals) {
          globalEventContext.trigger("ajaxSend", [jqXHR, s]);
        }

        // If request was aborted inside ajaxSend, stop there
        if (completed) {
          return jqXHR;
        }

        // Timeout
        if (s.async && s.timeout > 0) {
          timeoutTimer = window.setTimeout(function () {
            jqXHR.abort("timeout");
          }, s.timeout);
        }
        try {
          completed = false;
          transport.send(requestHeaders, done);
        } catch (e) {
          // Rethrow post-completion exceptions
          if (completed) {
            throw e;
          }

          // Propagate others as results
          done(-1, e);
        }
      }

      // Callback for when everything is done
      function done(status, nativeStatusText, responses, headers) {
        var isSuccess,
          success,
          error,
          response,
          modified,
          statusText = nativeStatusText;

        // Ignore repeat invocations
        if (completed) {
          return;
        }
        completed = true;

        // Clear timeout if it exists
        if (timeoutTimer) {
          window.clearTimeout(timeoutTimer);
        }

        // Dereference transport for early garbage collection
        // (no matter how long the jqXHR object will be used)
        transport = undefined;

        // Cache response headers
        responseHeadersString = headers || "";

        // Set readyState
        jqXHR.readyState = status > 0 ? 4 : 0;

        // Determine if successful
        isSuccess = status >= 200 && status < 300 || status === 304;

        // Get response data
        if (responses) {
          response = ajaxHandleResponses(s, jqXHR, responses);
        }

        // Use a noop converter for missing script but not if jsonp
        if (!isSuccess && jQuery.inArray("script", s.dataTypes) > -1 && jQuery.inArray("json", s.dataTypes) < 0) {
          s.converters["text script"] = function () {};
        }

        // Convert no matter what (that way responseXXX fields are always set)
        response = ajaxConvert(s, response, jqXHR, isSuccess);

        // If successful, handle type chaining
        if (isSuccess) {
          // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
          if (s.ifModified) {
            modified = jqXHR.getResponseHeader("Last-Modified");
            if (modified) {
              jQuery.lastModified[cacheURL] = modified;
            }
            modified = jqXHR.getResponseHeader("etag");
            if (modified) {
              jQuery.etag[cacheURL] = modified;
            }
          }

          // if no content
          if (status === 204 || s.type === "HEAD") {
            statusText = "nocontent";

            // if not modified
          } else if (status === 304) {
            statusText = "notmodified";

            // If we have data, let's convert it
          } else {
            statusText = response.state;
            success = response.data;
            error = response.error;
            isSuccess = !error;
          }
        } else {
          // Extract error from statusText and normalize for non-aborts
          error = statusText;
          if (status || !statusText) {
            statusText = "error";
            if (status < 0) {
              status = 0;
            }
          }
        }

        // Set data for the fake xhr object
        jqXHR.status = status;
        jqXHR.statusText = (nativeStatusText || statusText) + "";

        // Success/Error
        if (isSuccess) {
          deferred.resolveWith(callbackContext, [success, statusText, jqXHR]);
        } else {
          deferred.rejectWith(callbackContext, [jqXHR, statusText, error]);
        }

        // Status-dependent callbacks
        jqXHR.statusCode(_statusCode);
        _statusCode = undefined;
        if (fireGlobals) {
          globalEventContext.trigger(isSuccess ? "ajaxSuccess" : "ajaxError", [jqXHR, s, isSuccess ? success : error]);
        }

        // Complete
        completeDeferred.fireWith(callbackContext, [jqXHR, statusText]);
        if (fireGlobals) {
          globalEventContext.trigger("ajaxComplete", [jqXHR, s]);

          // Handle the global AJAX counter
          if (! --jQuery.active) {
            jQuery.event.trigger("ajaxStop");
          }
        }
      }
      return jqXHR;
    },
    getJSON: function getJSON(url, data, callback) {
      return jQuery.get(url, data, callback, "json");
    },
    getScript: function getScript(url, callback) {
      return jQuery.get(url, undefined, callback, "script");
    }
  });
  jQuery.each(["get", "post"], function (_i, method) {
    jQuery[method] = function (url, data, callback, type) {
      // Shift arguments if data argument was omitted
      if (isFunction(data)) {
        type = type || callback;
        callback = data;
        data = undefined;
      }

      // The url can be an options object (which then must have .url)
      return jQuery.ajax(jQuery.extend({
        url: url,
        type: method,
        dataType: type,
        data: data,
        success: callback
      }, jQuery.isPlainObject(url) && url));
    };
  });
  jQuery.ajaxPrefilter(function (s) {
    var i;
    for (i in s.headers) {
      if (i.toLowerCase() === "content-type") {
        s.contentType = s.headers[i] || "";
      }
    }
  });
  jQuery._evalUrl = function (url, options, doc) {
    return jQuery.ajax({
      url: url,
      // Make this explicit, since user can override this through ajaxSetup (trac-11264)
      type: "GET",
      dataType: "script",
      cache: true,
      async: false,
      global: false,
      // Only evaluate the response if it is successful (gh-4126)
      // dataFilter is not invoked for failure responses, so using it instead
      // of the default converter is kludgy but it works.
      converters: {
        "text script": function textScript() {}
      },
      dataFilter: function dataFilter(response) {
        jQuery.globalEval(response, options, doc);
      }
    });
  };
  jQuery.fn.extend({
    wrapAll: function wrapAll(html) {
      var wrap;
      if (this[0]) {
        if (isFunction(html)) {
          html = html.call(this[0]);
        }

        // The elements to wrap the target around
        wrap = jQuery(html, this[0].ownerDocument).eq(0).clone(true);
        if (this[0].parentNode) {
          wrap.insertBefore(this[0]);
        }
        wrap.map(function () {
          var elem = this;
          while (elem.firstElementChild) {
            elem = elem.firstElementChild;
          }
          return elem;
        }).append(this);
      }
      return this;
    },
    wrapInner: function wrapInner(html) {
      if (isFunction(html)) {
        return this.each(function (i) {
          jQuery(this).wrapInner(html.call(this, i));
        });
      }
      return this.each(function () {
        var self = jQuery(this),
          contents = self.contents();
        if (contents.length) {
          contents.wrapAll(html);
        } else {
          self.append(html);
        }
      });
    },
    wrap: function wrap(html) {
      var htmlIsFunction = isFunction(html);
      return this.each(function (i) {
        jQuery(this).wrapAll(htmlIsFunction ? html.call(this, i) : html);
      });
    },
    unwrap: function unwrap(selector) {
      this.parent(selector).not("body").each(function () {
        jQuery(this).replaceWith(this.childNodes);
      });
      return this;
    }
  });
  jQuery.expr.pseudos.hidden = function (elem) {
    return !jQuery.expr.pseudos.visible(elem);
  };
  jQuery.expr.pseudos.visible = function (elem) {
    return !!(elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length);
  };
  jQuery.ajaxSettings.xhr = function () {
    try {
      return new window.XMLHttpRequest();
    } catch (e) {}
  };
  var xhrSuccessStatus = {
      // File protocol always yields status code 0, assume 200
      0: 200,
      // Support: IE <=9 only
      // trac-1450: sometimes IE returns 1223 when it should be 204
      1223: 204
    },
    xhrSupported = jQuery.ajaxSettings.xhr();
  support.cors = !!xhrSupported && "withCredentials" in xhrSupported;
  support.ajax = xhrSupported = !!xhrSupported;
  jQuery.ajaxTransport(function (options) {
    var _callback, errorCallback;

    // Cross domain only allowed if supported through XMLHttpRequest
    if (support.cors || xhrSupported && !options.crossDomain) {
      return {
        send: function send(headers, complete) {
          var i,
            xhr = options.xhr();
          xhr.open(options.type, options.url, options.async, options.username, options.password);

          // Apply custom fields if provided
          if (options.xhrFields) {
            for (i in options.xhrFields) {
              xhr[i] = options.xhrFields[i];
            }
          }

          // Override mime type if needed
          if (options.mimeType && xhr.overrideMimeType) {
            xhr.overrideMimeType(options.mimeType);
          }

          // X-Requested-With header
          // For cross-domain requests, seeing as conditions for a preflight are
          // akin to a jigsaw puzzle, we simply never set it to be sure.
          // (it can always be set on a per-request basis or even using ajaxSetup)
          // For same-domain requests, won't change header if already provided.
          if (!options.crossDomain && !headers["X-Requested-With"]) {
            headers["X-Requested-With"] = "XMLHttpRequest";
          }

          // Set headers
          for (i in headers) {
            xhr.setRequestHeader(i, headers[i]);
          }

          // Callback
          _callback = function callback(type) {
            return function () {
              if (_callback) {
                _callback = errorCallback = xhr.onload = xhr.onerror = xhr.onabort = xhr.ontimeout = xhr.onreadystatechange = null;
                if (type === "abort") {
                  xhr.abort();
                } else if (type === "error") {
                  // Support: IE <=9 only
                  // On a manual native abort, IE9 throws
                  // errors on any property access that is not readyState
                  if (typeof xhr.status !== "number") {
                    complete(0, "error");
                  } else {
                    complete(
                    // File: protocol always yields status 0; see trac-8605, trac-14207
                    xhr.status, xhr.statusText);
                  }
                } else {
                  complete(xhrSuccessStatus[xhr.status] || xhr.status, xhr.statusText,
                  // Support: IE <=9 only
                  // IE9 has no XHR2 but throws on binary (trac-11426)
                  // For XHR2 non-text, let the caller handle it (gh-2498)
                  (xhr.responseType || "text") !== "text" || typeof xhr.responseText !== "string" ? {
                    binary: xhr.response
                  } : {
                    text: xhr.responseText
                  }, xhr.getAllResponseHeaders());
                }
              }
            };
          };

          // Listen to events
          xhr.onload = _callback();
          errorCallback = xhr.onerror = xhr.ontimeout = _callback("error");

          // Support: IE 9 only
          // Use onreadystatechange to replace onabort
          // to handle uncaught aborts
          if (xhr.onabort !== undefined) {
            xhr.onabort = errorCallback;
          } else {
            xhr.onreadystatechange = function () {
              // Check readyState before timeout as it changes
              if (xhr.readyState === 4) {
                // Allow onerror to be called first,
                // but that will not handle a native abort
                // Also, save errorCallback to a variable
                // as xhr.onerror cannot be accessed
                window.setTimeout(function () {
                  if (_callback) {
                    errorCallback();
                  }
                });
              }
            };
          }

          // Create the abort callback
          _callback = _callback("abort");
          try {
            // Do send the request (this may raise an exception)
            xhr.send(options.hasContent && options.data || null);
          } catch (e) {
            // trac-14683: Only rethrow if this hasn't been notified as an error yet
            if (_callback) {
              throw e;
            }
          }
        },
        abort: function abort() {
          if (_callback) {
            _callback();
          }
        }
      };
    }
  });

  // Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)
  jQuery.ajaxPrefilter(function (s) {
    if (s.crossDomain) {
      s.contents.script = false;
    }
  });

  // Install script dataType
  jQuery.ajaxSetup({
    accepts: {
      script: "text/javascript, application/javascript, " + "application/ecmascript, application/x-ecmascript"
    },
    contents: {
      script: /\b(?:java|ecma)script\b/
    },
    converters: {
      "text script": function textScript(text) {
        jQuery.globalEval(text);
        return text;
      }
    }
  });

  // Handle cache's special case and crossDomain
  jQuery.ajaxPrefilter("script", function (s) {
    if (s.cache === undefined) {
      s.cache = false;
    }
    if (s.crossDomain) {
      s.type = "GET";
    }
  });

  // Bind script tag hack transport
  jQuery.ajaxTransport("script", function (s) {
    // This transport only deals with cross domain or forced-by-attrs requests
    if (s.crossDomain || s.scriptAttrs) {
      var script, _callback2;
      return {
        send: function send(_, complete) {
          script = jQuery("<script>").attr(s.scriptAttrs || {}).prop({
            charset: s.scriptCharset,
            src: s.url
          }).on("load error", _callback2 = function callback(evt) {
            script.remove();
            _callback2 = null;
            if (evt) {
              complete(evt.type === "error" ? 404 : 200, evt.type);
            }
          });

          // Use native DOM manipulation to avoid our domManip AJAX trickery
          document.head.appendChild(script[0]);
        },
        abort: function abort() {
          if (_callback2) {
            _callback2();
          }
        }
      };
    }
  });
  var oldCallbacks = [],
    rjsonp = /(=)\?(?=&|$)|\?\?/;

  // Default jsonp settings
  jQuery.ajaxSetup({
    jsonp: "callback",
    jsonpCallback: function jsonpCallback() {
      var callback = oldCallbacks.pop() || jQuery.expando + "_" + nonce.guid++;
      this[callback] = true;
      return callback;
    }
  });

  // Detect, normalize options and install callbacks for jsonp requests
  jQuery.ajaxPrefilter("json jsonp", function (s, originalSettings, jqXHR) {
    var callbackName,
      overwritten,
      responseContainer,
      jsonProp = s.jsonp !== false && (rjsonp.test(s.url) ? "url" : typeof s.data === "string" && (s.contentType || "").indexOf("application/x-www-form-urlencoded") === 0 && rjsonp.test(s.data) && "data");

    // Handle iff the expected data type is "jsonp" or we have a parameter to set
    if (jsonProp || s.dataTypes[0] === "jsonp") {
      // Get callback name, remembering preexisting value associated with it
      callbackName = s.jsonpCallback = isFunction(s.jsonpCallback) ? s.jsonpCallback() : s.jsonpCallback;

      // Insert callback into url or form data
      if (jsonProp) {
        s[jsonProp] = s[jsonProp].replace(rjsonp, "$1" + callbackName);
      } else if (s.jsonp !== false) {
        s.url += (rquery.test(s.url) ? "&" : "?") + s.jsonp + "=" + callbackName;
      }

      // Use data converter to retrieve json after script execution
      s.converters["script json"] = function () {
        if (!responseContainer) {
          jQuery.error(callbackName + " was not called");
        }
        return responseContainer[0];
      };

      // Force json dataType
      s.dataTypes[0] = "json";

      // Install callback
      overwritten = window[callbackName];
      window[callbackName] = function () {
        responseContainer = arguments;
      };

      // Clean-up function (fires after converters)
      jqXHR.always(function () {
        // If previous value didn't exist - remove it
        if (overwritten === undefined) {
          jQuery(window).removeProp(callbackName);

          // Otherwise restore preexisting value
        } else {
          window[callbackName] = overwritten;
        }

        // Save back as free
        if (s[callbackName]) {
          // Make sure that re-using the options doesn't screw things around
          s.jsonpCallback = originalSettings.jsonpCallback;

          // Save the callback name for future use
          oldCallbacks.push(callbackName);
        }

        // Call if it was a function and we have a response
        if (responseContainer && isFunction(overwritten)) {
          overwritten(responseContainer[0]);
        }
        responseContainer = overwritten = undefined;
      });

      // Delegate to script
      return "script";
    }
  });

  // Support: Safari 8 only
  // In Safari 8 documents created via document.implementation.createHTMLDocument
  // collapse sibling forms: the second one becomes a child of the first one.
  // Because of that, this security measure has to be disabled in Safari 8.
  // https://bugs.webkit.org/show_bug.cgi?id=137337
  support.createHTMLDocument = function () {
    var body = document.implementation.createHTMLDocument("").body;
    body.innerHTML = "<form></form><form></form>";
    return body.childNodes.length === 2;
  }();

  // Argument "data" should be string of html
  // context (optional): If specified, the fragment will be created in this context,
  // defaults to document
  // keepScripts (optional): If true, will include scripts passed in the html string
  jQuery.parseHTML = function (data, context, keepScripts) {
    if (typeof data !== "string") {
      return [];
    }
    if (typeof context === "boolean") {
      keepScripts = context;
      context = false;
    }
    var base, parsed, scripts;
    if (!context) {
      // Stop scripts or inline event handlers from being executed immediately
      // by using document.implementation
      if (support.createHTMLDocument) {
        context = document.implementation.createHTMLDocument("");

        // Set the base href for the created document
        // so any parsed elements with URLs
        // are based on the document's URL (gh-2965)
        base = context.createElement("base");
        base.href = document.location.href;
        context.head.appendChild(base);
      } else {
        context = document;
      }
    }
    parsed = rsingleTag.exec(data);
    scripts = !keepScripts && [];

    // Single tag
    if (parsed) {
      return [context.createElement(parsed[1])];
    }
    parsed = buildFragment([data], context, scripts);
    if (scripts && scripts.length) {
      jQuery(scripts).remove();
    }
    return jQuery.merge([], parsed.childNodes);
  };

  /**
   * Load a url into a page
   */
  jQuery.fn.load = function (url, params, callback) {
    var selector,
      type,
      response,
      self = this,
      off = url.indexOf(" ");
    if (off > -1) {
      selector = stripAndCollapse(url.slice(off));
      url = url.slice(0, off);
    }

    // If it's a function
    if (isFunction(params)) {
      // We assume that it's the callback
      callback = params;
      params = undefined;

      // Otherwise, build a param string
    } else if (params && typeof params === "object") {
      type = "POST";
    }

    // If we have elements to modify, make the request
    if (self.length > 0) {
      jQuery.ajax({
        url: url,
        // If "type" variable is undefined, then "GET" method will be used.
        // Make value of this field explicit since
        // user can override it through ajaxSetup method
        type: type || "GET",
        dataType: "html",
        data: params
      }).done(function (responseText) {
        // Save response for use in complete callback
        response = arguments;
        self.html(selector ?
        // If a selector was specified, locate the right elements in a dummy div
        // Exclude scripts to avoid IE 'Permission Denied' errors
        jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector) :
        // Otherwise use the full result
        responseText);

        // If the request succeeds, this function gets "data", "status", "jqXHR"
        // but they are ignored because response was set above.
        // If it fails, this function gets "jqXHR", "status", "error"
      }).always(callback && function (jqXHR, status) {
        self.each(function () {
          callback.apply(this, response || [jqXHR.responseText, status, jqXHR]);
        });
      });
    }
    return this;
  };
  jQuery.expr.pseudos.animated = function (elem) {
    return jQuery.grep(jQuery.timers, function (fn) {
      return elem === fn.elem;
    }).length;
  };
  jQuery.offset = {
    setOffset: function setOffset(elem, options, i) {
      var curPosition,
        curLeft,
        curCSSTop,
        curTop,
        curOffset,
        curCSSLeft,
        calculatePosition,
        position = jQuery.css(elem, "position"),
        curElem = jQuery(elem),
        props = {};

      // Set position first, in-case top/left are set even on static elem
      if (position === "static") {
        elem.style.position = "relative";
      }
      curOffset = curElem.offset();
      curCSSTop = jQuery.css(elem, "top");
      curCSSLeft = jQuery.css(elem, "left");
      calculatePosition = (position === "absolute" || position === "fixed") && (curCSSTop + curCSSLeft).indexOf("auto") > -1;

      // Need to be able to calculate position if either
      // top or left is auto and position is either absolute or fixed
      if (calculatePosition) {
        curPosition = curElem.position();
        curTop = curPosition.top;
        curLeft = curPosition.left;
      } else {
        curTop = parseFloat(curCSSTop) || 0;
        curLeft = parseFloat(curCSSLeft) || 0;
      }
      if (isFunction(options)) {
        // Use jQuery.extend here to allow modification of coordinates argument (gh-1848)
        options = options.call(elem, i, jQuery.extend({}, curOffset));
      }
      if (options.top != null) {
        props.top = options.top - curOffset.top + curTop;
      }
      if (options.left != null) {
        props.left = options.left - curOffset.left + curLeft;
      }
      if ("using" in options) {
        options.using.call(elem, props);
      } else {
        curElem.css(props);
      }
    }
  };
  jQuery.fn.extend({
    // offset() relates an element's border box to the document origin
    offset: function offset(options) {
      // Preserve chaining for setter
      if (arguments.length) {
        return options === undefined ? this : this.each(function (i) {
          jQuery.offset.setOffset(this, options, i);
        });
      }
      var rect,
        win,
        elem = this[0];
      if (!elem) {
        return;
      }

      // Return zeros for disconnected and hidden (display: none) elements (gh-2310)
      // Support: IE <=11 only
      // Running getBoundingClientRect on a
      // disconnected node in IE throws an error
      if (!elem.getClientRects().length) {
        return {
          top: 0,
          left: 0
        };
      }

      // Get document-relative position by adding viewport scroll to viewport-relative gBCR
      rect = elem.getBoundingClientRect();
      win = elem.ownerDocument.defaultView;
      return {
        top: rect.top + win.pageYOffset,
        left: rect.left + win.pageXOffset
      };
    },
    // position() relates an element's margin box to its offset parent's padding box
    // This corresponds to the behavior of CSS absolute positioning
    position: function position() {
      if (!this[0]) {
        return;
      }
      var offsetParent,
        offset,
        doc,
        elem = this[0],
        parentOffset = {
          top: 0,
          left: 0
        };

      // position:fixed elements are offset from the viewport, which itself always has zero offset
      if (jQuery.css(elem, "position") === "fixed") {
        // Assume position:fixed implies availability of getBoundingClientRect
        offset = elem.getBoundingClientRect();
      } else {
        offset = this.offset();

        // Account for the *real* offset parent, which can be the document or its root element
        // when a statically positioned element is identified
        doc = elem.ownerDocument;
        offsetParent = elem.offsetParent || doc.documentElement;
        while (offsetParent && (offsetParent === doc.body || offsetParent === doc.documentElement) && jQuery.css(offsetParent, "position") === "static") {
          offsetParent = offsetParent.parentNode;
        }
        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {
          // Incorporate borders into its offset, since they are outside its content origin
          parentOffset = jQuery(offsetParent).offset();
          parentOffset.top += jQuery.css(offsetParent, "borderTopWidth", true);
          parentOffset.left += jQuery.css(offsetParent, "borderLeftWidth", true);
        }
      }

      // Subtract parent offsets and element margins
      return {
        top: offset.top - parentOffset.top - jQuery.css(elem, "marginTop", true),
        left: offset.left - parentOffset.left - jQuery.css(elem, "marginLeft", true)
      };
    },
    // This method will return documentElement in the following cases:
    // 1) For the element inside the iframe without offsetParent, this method will return
    //    documentElement of the parent window
    // 2) For the hidden or detached element
    // 3) For body or html element, i.e. in case of the html node - it will return itself
    //
    // but those exceptions were never presented as a real life use-cases
    // and might be considered as more preferable results.
    //
    // This logic, however, is not guaranteed and can change at any point in the future
    offsetParent: function offsetParent() {
      return this.map(function () {
        var offsetParent = this.offsetParent;
        while (offsetParent && jQuery.css(offsetParent, "position") === "static") {
          offsetParent = offsetParent.offsetParent;
        }
        return offsetParent || documentElement;
      });
    }
  });

  // Create scrollLeft and scrollTop methods
  jQuery.each({
    scrollLeft: "pageXOffset",
    scrollTop: "pageYOffset"
  }, function (method, prop) {
    var top = "pageYOffset" === prop;
    jQuery.fn[method] = function (val) {
      return access(this, function (elem, method, val) {
        // Coalesce documents and windows
        var win;
        if (isWindow(elem)) {
          win = elem;
        } else if (elem.nodeType === 9) {
          win = elem.defaultView;
        }
        if (val === undefined) {
          return win ? win[prop] : elem[method];
        }
        if (win) {
          win.scrollTo(!top ? val : win.pageXOffset, top ? val : win.pageYOffset);
        } else {
          elem[method] = val;
        }
      }, method, val, arguments.length);
    };
  });

  // Support: Safari <=7 - 9.1, Chrome <=37 - 49
  // Add the top/left cssHooks using jQuery.fn.position
  // Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
  // Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347
  // getComputedStyle returns percent when specified for top/left/bottom/right;
  // rather than make the css module depend on the offset module, just check for it here
  jQuery.each(["top", "left"], function (_i, prop) {
    jQuery.cssHooks[prop] = addGetHookIf(support.pixelPosition, function (elem, computed) {
      if (computed) {
        computed = curCSS(elem, prop);

        // If curCSS returns percentage, fallback to offset
        return rnumnonpx.test(computed) ? jQuery(elem).position()[prop] + "px" : computed;
      }
    });
  });

  // Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
  jQuery.each({
    Height: "height",
    Width: "width"
  }, function (name, type) {
    jQuery.each({
      padding: "inner" + name,
      content: type,
      "": "outer" + name
    }, function (defaultExtra, funcName) {
      // Margin is only for outerHeight, outerWidth
      jQuery.fn[funcName] = function (margin, value) {
        var chainable = arguments.length && (defaultExtra || typeof margin !== "boolean"),
          extra = defaultExtra || (margin === true || value === true ? "margin" : "border");
        return access(this, function (elem, type, value) {
          var doc;
          if (isWindow(elem)) {
            // $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)
            return funcName.indexOf("outer") === 0 ? elem["inner" + name] : elem.document.documentElement["client" + name];
          }

          // Get document width or height
          if (elem.nodeType === 9) {
            doc = elem.documentElement;

            // Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
            // whichever is greatest
            return Math.max(elem.body["scroll" + name], doc["scroll" + name], elem.body["offset" + name], doc["offset" + name], doc["client" + name]);
          }
          return value === undefined ?
          // Get width or height on the element, requesting but not forcing parseFloat
          jQuery.css(elem, type, extra) :
          // Set width or height on the element
          jQuery.style(elem, type, value, extra);
        }, type, chainable ? margin : undefined, chainable);
      };
    });
  });
  jQuery.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (_i, type) {
    jQuery.fn[type] = function (fn) {
      return this.on(type, fn);
    };
  });
  jQuery.fn.extend({
    bind: function bind(types, data, fn) {
      return this.on(types, null, data, fn);
    },
    unbind: function unbind(types, fn) {
      return this.off(types, null, fn);
    },
    delegate: function delegate(selector, types, data, fn) {
      return this.on(types, selector, data, fn);
    },
    undelegate: function undelegate(selector, types, fn) {
      // ( namespace ) or ( selector, types [, fn] )
      return arguments.length === 1 ? this.off(selector, "**") : this.off(types, selector || "**", fn);
    },
    hover: function hover(fnOver, fnOut) {
      return this.mouseenter(fnOver).mouseleave(fnOut || fnOver);
    }
  });
  jQuery.each(("blur focus focusin focusout resize scroll click dblclick " + "mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " + "change select submit keydown keypress keyup contextmenu").split(" "), function (_i, name) {
    // Handle event binding
    jQuery.fn[name] = function (data, fn) {
      return arguments.length > 0 ? this.on(name, null, data, fn) : this.trigger(name);
    };
  });

  // Support: Android <=4.0 only
  // Make sure we trim BOM and NBSP
  // Require that the "whitespace run" starts from a non-whitespace
  // to avoid O(N^2) behavior when the engine would try matching "\s+$" at each space position.
  var rtrim = /^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;

  // Bind a function to a context, optionally partially applying any
  // arguments.
  // jQuery.proxy is deprecated to promote standards (specifically Function#bind)
  // However, it is not slated for removal any time soon
  jQuery.proxy = function (fn, context) {
    var tmp, args, proxy;
    if (typeof context === "string") {
      tmp = fn[context];
      context = fn;
      fn = tmp;
    }

    // Quick check to determine if target is callable, in the spec
    // this throws a TypeError, but we will just return undefined.
    if (!isFunction(fn)) {
      return undefined;
    }

    // Simulated bind
    args = _slice.call(arguments, 2);
    proxy = function proxy() {
      return fn.apply(context || this, args.concat(_slice.call(arguments)));
    };

    // Set the guid of unique handler to the same of original handler, so it can be removed
    proxy.guid = fn.guid = fn.guid || jQuery.guid++;
    return proxy;
  };
  jQuery.holdReady = function (hold) {
    if (hold) {
      jQuery.readyWait++;
    } else {
      jQuery.ready(true);
    }
  };
  jQuery.isArray = Array.isArray;
  jQuery.parseJSON = JSON.parse;
  jQuery.nodeName = nodeName;
  jQuery.isFunction = isFunction;
  jQuery.isWindow = isWindow;
  jQuery.camelCase = camelCase;
  jQuery.type = toType;
  jQuery.now = Date.now;
  jQuery.isNumeric = function (obj) {
    // As of jQuery 3.0, isNumeric is limited to
    // strings and numbers (primitives or objects)
    // that can be coerced to finite numbers (gh-2662)
    var type = jQuery.type(obj);
    return (type === "number" || type === "string") &&
    // parseFloat NaNs numeric-cast false positives ("")
    // ...but misinterprets leading-number strings, particularly hex literals ("0x...")
    // subtraction forces infinities to NaN
    !isNaN(obj - parseFloat(obj));
  };
  jQuery.trim = function (text) {
    return text == null ? "" : (text + "").replace(rtrim, "$1");
  };

  // Register as a named AMD module, since jQuery can be concatenated with other
  // files that may use define, but not via a proper concatenation script that
  // understands anonymous AMD modules. A named AMD is safest and most robust
  // way to register. Lowercase jquery is used because AMD module names are
  // derived from file names, and jQuery is normally delivered in a lowercase
  // file name. Do this after creating the global so that if an AMD module wants
  // to call noConflict to hide this version of jQuery, it will work.

  // Note that for maximum portability, libraries that are not jQuery should
  // declare themselves as anonymous modules, and avoid setting a global if an
  // AMD loader is present. jQuery is a special case. For more information, see
  // https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {
      return jQuery;
    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
		__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  }
  var
    // Map over jQuery in case of overwrite
    _jQuery = window.jQuery,
    // Map over the $ in case of overwrite
    _$ = window.$;
  jQuery.noConflict = function (deep) {
    if (window.$ === jQuery) {
      window.$ = _$;
    }
    if (deep && window.jQuery === jQuery) {
      window.jQuery = _jQuery;
    }
    return jQuery;
  };

  // Expose jQuery and $ identifiers, even in AMD
  // (trac-7102#comment:10, https://github.com/jquery/jquery/pull/557)
  // and CommonJS for browser emulators (trac-13566)
  if (typeof noGlobal === "undefined") {
    window.jQuery = window.$ = jQuery;
  }
  return jQuery;
});

/***/ }),

/***/ "../../../node_modules/mithril/api/mount-redraw.js":
/*!*********************************************************!*\
  !*** ../../../node_modules/mithril/api/mount-redraw.js ***!
  \*********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var Vnode = __webpack_require__(/*! ../render/vnode */ "../../../node_modules/mithril/render/vnode.js");
module.exports = function (render, schedule, console) {
  var subscriptions = [];
  var rendering = false;
  var pending = false;
  function sync() {
    if (rendering) throw new Error("Nested m.redraw.sync() call");
    rendering = true;
    for (var i = 0; i < subscriptions.length; i += 2) {
      try {
        render(subscriptions[i], Vnode(subscriptions[i + 1]), redraw);
      } catch (e) {
        console.error(e);
      }
    }
    rendering = false;
  }
  function redraw() {
    if (!pending) {
      pending = true;
      schedule(function () {
        pending = false;
        sync();
      });
    }
  }
  redraw.sync = sync;
  function mount(root, component) {
    if (component != null && component.view == null && typeof component !== "function") {
      throw new TypeError("m.mount(element, component) expects a component, not a vnode");
    }
    var index = subscriptions.indexOf(root);
    if (index >= 0) {
      subscriptions.splice(index, 2);
      render(root, [], redraw);
    }
    if (component != null) {
      subscriptions.push(root, component);
      render(root, Vnode(component), redraw);
    }
  }
  return {
    mount: mount,
    redraw: redraw
  };
};

/***/ }),

/***/ "../../../node_modules/mithril/api/router.js":
/*!***************************************************!*\
  !*** ../../../node_modules/mithril/api/router.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var Vnode = __webpack_require__(/*! ../render/vnode */ "../../../node_modules/mithril/render/vnode.js");
var m = __webpack_require__(/*! ../render/hyperscript */ "../../../node_modules/mithril/render/hyperscript.js");
var Promise = __webpack_require__(/*! ../promise/promise */ "../../../node_modules/mithril/promise/promise.js");
var buildPathname = __webpack_require__(/*! ../pathname/build */ "../../../node_modules/mithril/pathname/build.js");
var parsePathname = __webpack_require__(/*! ../pathname/parse */ "../../../node_modules/mithril/pathname/parse.js");
var compileTemplate = __webpack_require__(/*! ../pathname/compileTemplate */ "../../../node_modules/mithril/pathname/compileTemplate.js");
var assign = __webpack_require__(/*! ../pathname/assign */ "../../../node_modules/mithril/pathname/assign.js");
var sentinel = {};
module.exports = function ($window, mountRedraw) {
  var fireAsync;
  function setPath(path, data, options) {
    path = buildPathname(path, data);
    if (fireAsync != null) {
      fireAsync();
      var state = options ? options.state : null;
      var title = options ? options.title : null;
      if (options && options.replace) $window.history.replaceState(state, title, route.prefix + path);else $window.history.pushState(state, title, route.prefix + path);
    } else {
      $window.location.href = route.prefix + path;
    }
  }
  var currentResolver = sentinel,
    component,
    attrs,
    currentPath,
    _lastUpdate;
  var SKIP = route.SKIP = {};
  function route(root, defaultRoute, routes) {
    if (root == null) throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");
    // 0 = start
    // 1 = init
    // 2 = ready
    var state = 0;
    var compiled = Object.keys(routes).map(function (route) {
      if (route[0] !== "/") throw new SyntaxError("Routes must start with a `/`");
      if (/:([^\/\.-]+)(\.{3})?:/.test(route)) {
        throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");
      }
      return {
        route: route,
        component: routes[route],
        check: compileTemplate(route)
      };
    });
    var callAsync = typeof setImmediate === "function" ? setImmediate : setTimeout;
    var p = Promise.resolve();
    var scheduled = false;
    var onremove;
    fireAsync = null;
    if (defaultRoute != null) {
      var defaultData = parsePathname(defaultRoute);
      if (!compiled.some(function (i) {
        return i.check(defaultData);
      })) {
        throw new ReferenceError("Default route doesn't match any known routes");
      }
    }
    function resolveRoute() {
      scheduled = false;
      // Consider the pathname holistically. The prefix might even be invalid,
      // but that's not our problem.
      var prefix = $window.location.hash;
      if (route.prefix[0] !== "#") {
        prefix = $window.location.search + prefix;
        if (route.prefix[0] !== "?") {
          prefix = $window.location.pathname + prefix;
          if (prefix[0] !== "/") prefix = "/" + prefix;
        }
      }
      // This seemingly useless `.concat()` speeds up the tests quite a bit,
      // since the representation is consistently a relatively poorly
      // optimized cons string.
      var path = prefix.concat().replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent).slice(route.prefix.length);
      var data = parsePathname(path);
      assign(data.params, $window.history.state);
      function fail() {
        if (path === defaultRoute) throw new Error("Could not resolve default route " + defaultRoute);
        setPath(defaultRoute, null, {
          replace: true
        });
      }
      loop(0);
      function loop(i) {
        // 0 = init
        // 1 = scheduled
        // 2 = done
        for (; i < compiled.length; i++) {
          if (compiled[i].check(data)) {
            var payload = compiled[i].component;
            var matchedRoute = compiled[i].route;
            var localComp = payload;
            var update = _lastUpdate = function lastUpdate(comp) {
              if (update !== _lastUpdate) return;
              if (comp === SKIP) return loop(i + 1);
              component = comp != null && (typeof comp.view === "function" || typeof comp === "function") ? comp : "div";
              attrs = data.params, currentPath = path, _lastUpdate = null;
              currentResolver = payload.render ? payload : null;
              if (state === 2) mountRedraw.redraw();else {
                state = 2;
                mountRedraw.redraw.sync();
              }
            };
            // There's no understating how much I *wish* I could
            // use `async`/`await` here...
            if (payload.view || typeof payload === "function") {
              payload = {};
              update(localComp);
            } else if (payload.onmatch) {
              p.then(function () {
                return payload.onmatch(data.params, path, matchedRoute);
              }).then(update, fail);
            } else update("div");
            return;
          }
        }
        fail();
      }
    }

    // Set it unconditionally so `m.route.set` and `m.route.Link` both work,
    // even if neither `pushState` nor `hashchange` are supported. It's
    // cleared if `hashchange` is used, since that makes it automatically
    // async.
    fireAsync = function fireAsync() {
      if (!scheduled) {
        scheduled = true;
        callAsync(resolveRoute);
      }
    };
    if (typeof $window.history.pushState === "function") {
      onremove = function onremove() {
        $window.removeEventListener("popstate", fireAsync, false);
      };
      $window.addEventListener("popstate", fireAsync, false);
    } else if (route.prefix[0] === "#") {
      fireAsync = null;
      onremove = function onremove() {
        $window.removeEventListener("hashchange", resolveRoute, false);
      };
      $window.addEventListener("hashchange", resolveRoute, false);
    }
    return mountRedraw.mount(root, {
      onbeforeupdate: function onbeforeupdate() {
        state = state ? 2 : 1;
        return !(!state || sentinel === currentResolver);
      },
      oncreate: resolveRoute,
      onremove: onremove,
      view: function view() {
        if (!state || sentinel === currentResolver) return;
        // Wrap in a fragment to preserve existing key semantics
        var vnode = [Vnode(component, attrs.key, attrs)];
        if (currentResolver) vnode = currentResolver.render(vnode[0]);
        return vnode;
      }
    });
  }
  route.set = function (path, data, options) {
    if (_lastUpdate != null) {
      options = options || {};
      options.replace = true;
    }
    _lastUpdate = null;
    setPath(path, data, options);
  };
  route.get = function () {
    return currentPath;
  };
  route.prefix = "#!";
  route.Link = {
    view: function view(vnode) {
      var options = vnode.attrs.options;
      // Remove these so they don't get overwritten
      var attrs = {},
        onclick,
        href;
      assign(attrs, vnode.attrs);
      // The first two are internal, but the rest are magic attributes
      // that need censored to not screw up rendering.
      attrs.selector = attrs.options = attrs.key = attrs.oninit = attrs.oncreate = attrs.onbeforeupdate = attrs.onupdate = attrs.onbeforeremove = attrs.onremove = null;

      // Do this now so we can get the most current `href` and `disabled`.
      // Those attributes may also be specified in the selector, and we
      // should honor that.
      var child = m(vnode.attrs.selector || "a", attrs, vnode.children);

      // Let's provide a *right* way to disable a route link, rather than
      // letting people screw up accessibility on accident.
      //
      // The attribute is coerced so users don't get surprised over
      // `disabled: 0` resulting in a button that's somehow routable
      // despite being visibly disabled.
      if (child.attrs.disabled = Boolean(child.attrs.disabled)) {
        child.attrs.href = null;
        child.attrs["aria-disabled"] = "true";
        // If you *really* do want to do this on a disabled link, use
        // an `oncreate` hook to add it.
        child.attrs.onclick = null;
      } else {
        onclick = child.attrs.onclick;
        href = child.attrs.href;
        child.attrs.href = route.prefix + href;
        child.attrs.onclick = function (e) {
          var result;
          if (typeof onclick === "function") {
            result = onclick.call(e.currentTarget, e);
          } else if (onclick == null || typeof onclick !== "object") {
            // do nothing
          } else if (typeof onclick.handleEvent === "function") {
            onclick.handleEvent(e);
          }

          // Adapted from React Router's implementation:
          // https://github.com/ReactTraining/react-router/blob/520a0acd48ae1b066eb0b07d6d4d1790a1d02482/packages/react-router-dom/modules/Link.js
          //
          // Try to be flexible and intuitive in how we handle links.
          // Fun fact: links aren't as obvious to get right as you
          // would expect. There's a lot more valid ways to click a
          // link than this, and one might want to not simply click a
          // link, but right click or command-click it to copy the
          // link target, etc. Nope, this isn't just for blind people.
          if (
          // Skip if `onclick` prevented default
          result !== false && !e.defaultPrevented && (
          // Ignore everything but left clicks
          e.button === 0 || e.which === 0 || e.which === 1) && (
          // Let the browser handle `target=_blank`, etc.
          !e.currentTarget.target || e.currentTarget.target === "_self") &&
          // No modifier keys
          !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey) {
            e.preventDefault();
            e.redraw = false;
            route.set(href, null, options);
          }
        };
      }
      return child;
    }
  };
  route.param = function (key) {
    return attrs && key != null ? attrs[key] : attrs;
  };
  return route;
};

/***/ }),

/***/ "../../../node_modules/mithril/hyperscript.js":
/*!****************************************************!*\
  !*** ../../../node_modules/mithril/hyperscript.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var hyperscript = __webpack_require__(/*! ./render/hyperscript */ "../../../node_modules/mithril/render/hyperscript.js");
hyperscript.trust = __webpack_require__(/*! ./render/trust */ "../../../node_modules/mithril/render/trust.js");
hyperscript.fragment = __webpack_require__(/*! ./render/fragment */ "../../../node_modules/mithril/render/fragment.js");
module.exports = hyperscript;

/***/ }),

/***/ "../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/mithril/index.js":
/*!*******************************************************************************************************************!*\
  !*** ../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/mithril/index.js ***!
  \*******************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var hyperscript = __webpack_require__(/*! ./hyperscript */ "../../../node_modules/mithril/hyperscript.js");
var request = __webpack_require__(/*! ./request */ "../../../node_modules/mithril/request.js");
var mountRedraw = __webpack_require__(/*! ./mount-redraw */ "../../../node_modules/mithril/mount-redraw.js");
var m = function m() {
  return hyperscript.apply(this, arguments);
};
m.m = hyperscript;
m.trust = hyperscript.trust;
m.fragment = hyperscript.fragment;
m.mount = mountRedraw.mount;
m.route = __webpack_require__(/*! ./route */ "../../../node_modules/mithril/route.js");
m.render = __webpack_require__(/*! ./render */ "../../../node_modules/mithril/render.js");
m.redraw = mountRedraw.redraw;
m.request = request.request;
m.jsonp = request.jsonp;
m.parseQueryString = __webpack_require__(/*! ./querystring/parse */ "../../../node_modules/mithril/querystring/parse.js");
m.buildQueryString = __webpack_require__(/*! ./querystring/build */ "../../../node_modules/mithril/querystring/build.js");
m.parsePathname = __webpack_require__(/*! ./pathname/parse */ "../../../node_modules/mithril/pathname/parse.js");
m.buildPathname = __webpack_require__(/*! ./pathname/build */ "../../../node_modules/mithril/pathname/build.js");
m.vnode = __webpack_require__(/*! ./render/vnode */ "../../../node_modules/mithril/render/vnode.js");
m.PromisePolyfill = __webpack_require__(/*! ./promise/polyfill */ "../../../node_modules/mithril/promise/polyfill.js");
module.exports = m;

/***/ }),

/***/ "../../../node_modules/mithril/mount-redraw.js":
/*!*****************************************************!*\
  !*** ../../../node_modules/mithril/mount-redraw.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var render = __webpack_require__(/*! ./render */ "../../../node_modules/mithril/render.js");
module.exports = __webpack_require__(/*! ./api/mount-redraw */ "../../../node_modules/mithril/api/mount-redraw.js")(render, requestAnimationFrame, console);

/***/ }),

/***/ "../../../node_modules/mithril/pathname/assign.js":
/*!********************************************************!*\
  !*** ../../../node_modules/mithril/pathname/assign.js ***!
  \********************************************************/
/***/ ((module) => {

"use strict";


module.exports = Object.assign || function (target, source) {
  if (source) Object.keys(source).forEach(function (key) {
    target[key] = source[key];
  });
};

/***/ }),

/***/ "../../../node_modules/mithril/pathname/build.js":
/*!*******************************************************!*\
  !*** ../../../node_modules/mithril/pathname/build.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var buildQueryString = __webpack_require__(/*! ../querystring/build */ "../../../node_modules/mithril/querystring/build.js");
var assign = __webpack_require__(/*! ./assign */ "../../../node_modules/mithril/pathname/assign.js");

// Returns `path` from `template` + `params`
module.exports = function (template, params) {
  if (/:([^\/\.-]+)(\.{3})?:/.test(template)) {
    throw new SyntaxError("Template parameter names *must* be separated");
  }
  if (params == null) return template;
  var queryIndex = template.indexOf("?");
  var hashIndex = template.indexOf("#");
  var queryEnd = hashIndex < 0 ? template.length : hashIndex;
  var pathEnd = queryIndex < 0 ? queryEnd : queryIndex;
  var path = template.slice(0, pathEnd);
  var query = {};
  assign(query, params);
  var resolved = path.replace(/:([^\/\.-]+)(\.{3})?/g, function (m, key, variadic) {
    delete query[key];
    // If no such parameter exists, don't interpolate it.
    if (params[key] == null) return m;
    // Escape normal parameters, but not variadic ones.
    return variadic ? params[key] : encodeURIComponent(String(params[key]));
  });

  // In case the template substitution adds new query/hash parameters.
  var newQueryIndex = resolved.indexOf("?");
  var newHashIndex = resolved.indexOf("#");
  var newQueryEnd = newHashIndex < 0 ? resolved.length : newHashIndex;
  var newPathEnd = newQueryIndex < 0 ? newQueryEnd : newQueryIndex;
  var result = resolved.slice(0, newPathEnd);
  if (queryIndex >= 0) result += template.slice(queryIndex, queryEnd);
  if (newQueryIndex >= 0) result += (queryIndex < 0 ? "?" : "&") + resolved.slice(newQueryIndex, newQueryEnd);
  var querystring = buildQueryString(query);
  if (querystring) result += (queryIndex < 0 && newQueryIndex < 0 ? "?" : "&") + querystring;
  if (hashIndex >= 0) result += template.slice(hashIndex);
  if (newHashIndex >= 0) result += (hashIndex < 0 ? "" : "&") + resolved.slice(newHashIndex);
  return result;
};

/***/ }),

/***/ "../../../node_modules/mithril/pathname/compileTemplate.js":
/*!*****************************************************************!*\
  !*** ../../../node_modules/mithril/pathname/compileTemplate.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var parsePathname = __webpack_require__(/*! ./parse */ "../../../node_modules/mithril/pathname/parse.js");

// Compiles a template into a function that takes a resolved path (without query
// strings) and returns an object containing the template parameters with their
// parsed values. This expects the input of the compiled template to be the
// output of `parsePathname`. Note that it does *not* remove query parameters
// specified in the template.
module.exports = function (template) {
  var templateData = parsePathname(template);
  var templateKeys = Object.keys(templateData.params);
  var keys = [];
  var regexp = new RegExp("^" + templateData.path.replace(
  // I escape literal text so people can use things like `:file.:ext` or
  // `:lang-:locale` in routes. This is all merged into one pass so I
  // don't also accidentally escape `-` and make it harder to detect it to
  // ban it from template parameters.
  /:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g, function (m, key, extra) {
    if (key == null) return "\\" + m;
    keys.push({
      k: key,
      r: extra === "..."
    });
    if (extra === "...") return "(.*)";
    if (extra === ".") return "([^/]+)\\.";
    return "([^/]+)" + (extra || "");
  }) + "$");
  return function (data) {
    // First, check the params. Usually, there isn't any, and it's just
    // checking a static set.
    for (var i = 0; i < templateKeys.length; i++) {
      if (templateData.params[templateKeys[i]] !== data.params[templateKeys[i]]) return false;
    }
    // If no interpolations exist, let's skip all the ceremony
    if (!keys.length) return regexp.test(data.path);
    var values = regexp.exec(data.path);
    if (values == null) return false;
    for (var i = 0; i < keys.length; i++) {
      data.params[keys[i].k] = keys[i].r ? values[i + 1] : decodeURIComponent(values[i + 1]);
    }
    return true;
  };
};

/***/ }),

/***/ "../../../node_modules/mithril/pathname/parse.js":
/*!*******************************************************!*\
  !*** ../../../node_modules/mithril/pathname/parse.js ***!
  \*******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var parseQueryString = __webpack_require__(/*! ../querystring/parse */ "../../../node_modules/mithril/querystring/parse.js");

// Returns `{path, params}` from `url`
module.exports = function (url) {
  var queryIndex = url.indexOf("?");
  var hashIndex = url.indexOf("#");
  var queryEnd = hashIndex < 0 ? url.length : hashIndex;
  var pathEnd = queryIndex < 0 ? queryEnd : queryIndex;
  var path = url.slice(0, pathEnd).replace(/\/{2,}/g, "/");
  if (!path) path = "/";else {
    if (path[0] !== "/") path = "/" + path;
    if (path.length > 1 && path[path.length - 1] === "/") path = path.slice(0, -1);
  }
  return {
    path: path,
    params: queryIndex < 0 ? {} : parseQueryString(url.slice(queryIndex + 1, queryEnd))
  };
};

/***/ }),

/***/ "../../../node_modules/mithril/promise/polyfill.js":
/*!*********************************************************!*\
  !*** ../../../node_modules/mithril/promise/polyfill.js ***!
  \*********************************************************/
/***/ ((module) => {

"use strict";


/** @constructor */
var PromisePolyfill = function PromisePolyfill(executor) {
  if (!(this instanceof PromisePolyfill)) throw new Error("Promise must be called with `new`");
  if (typeof executor !== "function") throw new TypeError("executor must be a function");
  var self = this,
    resolvers = [],
    rejectors = [],
    resolveCurrent = handler(resolvers, true),
    rejectCurrent = handler(rejectors, false);
  var instance = self._instance = {
    resolvers: resolvers,
    rejectors: rejectors
  };
  var callAsync = typeof setImmediate === "function" ? setImmediate : setTimeout;
  function handler(list, shouldAbsorb) {
    return function execute(value) {
      var then;
      try {
        if (shouldAbsorb && value != null && (typeof value === "object" || typeof value === "function") && typeof (then = value.then) === "function") {
          if (value === self) throw new TypeError("Promise can't be resolved w/ itself");
          executeOnce(then.bind(value));
        } else {
          callAsync(function () {
            if (!shouldAbsorb && list.length === 0) console.error("Possible unhandled promise rejection:", value);
            for (var i = 0; i < list.length; i++) {
              list[i](value);
            }
            resolvers.length = 0, rejectors.length = 0;
            instance.state = shouldAbsorb;
            instance.retry = function () {
              execute(value);
            };
          });
        }
      } catch (e) {
        rejectCurrent(e);
      }
    };
  }
  function executeOnce(then) {
    var runs = 0;
    function run(fn) {
      return function (value) {
        if (runs++ > 0) return;
        fn(value);
      };
    }
    var onerror = run(rejectCurrent);
    try {
      then(run(resolveCurrent), onerror);
    } catch (e) {
      onerror(e);
    }
  }
  executeOnce(executor);
};
PromisePolyfill.prototype.then = function (onFulfilled, onRejection) {
  var self = this,
    instance = self._instance;
  function handle(callback, list, next, state) {
    list.push(function (value) {
      if (typeof callback !== "function") next(value);else try {
        resolveNext(callback(value));
      } catch (e) {
        if (rejectNext) rejectNext(e);
      }
    });
    if (typeof instance.retry === "function" && state === instance.state) instance.retry();
  }
  var resolveNext, rejectNext;
  var promise = new PromisePolyfill(function (resolve, reject) {
    resolveNext = resolve, rejectNext = reject;
  });
  handle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false);
  return promise;
};
PromisePolyfill.prototype["catch"] = function (onRejection) {
  return this.then(null, onRejection);
};
PromisePolyfill.prototype["finally"] = function (callback) {
  return this.then(function (value) {
    return PromisePolyfill.resolve(callback()).then(function () {
      return value;
    });
  }, function (reason) {
    return PromisePolyfill.resolve(callback()).then(function () {
      return PromisePolyfill.reject(reason);
    });
  });
};
PromisePolyfill.resolve = function (value) {
  if (value instanceof PromisePolyfill) return value;
  return new PromisePolyfill(function (resolve) {
    resolve(value);
  });
};
PromisePolyfill.reject = function (value) {
  return new PromisePolyfill(function (resolve, reject) {
    reject(value);
  });
};
PromisePolyfill.all = function (list) {
  return new PromisePolyfill(function (resolve, reject) {
    var total = list.length,
      count = 0,
      values = [];
    if (list.length === 0) resolve([]);else for (var i = 0; i < list.length; i++) {
      (function (i) {
        function consume(value) {
          count++;
          values[i] = value;
          if (count === total) resolve(values);
        }
        if (list[i] != null && (typeof list[i] === "object" || typeof list[i] === "function") && typeof list[i].then === "function") {
          list[i].then(consume, reject);
        } else consume(list[i]);
      })(i);
    }
  });
};
PromisePolyfill.race = function (list) {
  return new PromisePolyfill(function (resolve, reject) {
    for (var i = 0; i < list.length; i++) {
      list[i].then(resolve, reject);
    }
  });
};
module.exports = PromisePolyfill;

/***/ }),

/***/ "../../../node_modules/mithril/promise/promise.js":
/*!********************************************************!*\
  !*** ../../../node_modules/mithril/promise/promise.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var PromisePolyfill = __webpack_require__(/*! ./polyfill */ "../../../node_modules/mithril/promise/polyfill.js");
if (typeof window !== "undefined") {
  if (typeof window.Promise === "undefined") {
    window.Promise = PromisePolyfill;
  } else if (!window.Promise.prototype["finally"]) {
    window.Promise.prototype["finally"] = PromisePolyfill.prototype["finally"];
  }
  module.exports = window.Promise;
} else if (typeof __webpack_require__.g !== "undefined") {
  if (typeof __webpack_require__.g.Promise === "undefined") {
    __webpack_require__.g.Promise = PromisePolyfill;
  } else if (!__webpack_require__.g.Promise.prototype["finally"]) {
    __webpack_require__.g.Promise.prototype["finally"] = PromisePolyfill.prototype["finally"];
  }
  module.exports = __webpack_require__.g.Promise;
} else {
  module.exports = PromisePolyfill;
}

/***/ }),

/***/ "../../../node_modules/mithril/querystring/build.js":
/*!**********************************************************!*\
  !*** ../../../node_modules/mithril/querystring/build.js ***!
  \**********************************************************/
/***/ ((module) => {

"use strict";


module.exports = function (object) {
  if (Object.prototype.toString.call(object) !== "[object Object]") return "";
  var args = [];
  for (var key in object) {
    destructure(key, object[key]);
  }
  return args.join("&");
  function destructure(key, value) {
    if (Array.isArray(value)) {
      for (var i = 0; i < value.length; i++) {
        destructure(key + "[" + i + "]", value[i]);
      }
    } else if (Object.prototype.toString.call(value) === "[object Object]") {
      for (var i in value) {
        destructure(key + "[" + i + "]", value[i]);
      }
    } else args.push(encodeURIComponent(key) + (value != null && value !== "" ? "=" + encodeURIComponent(value) : ""));
  }
};

/***/ }),

/***/ "../../../node_modules/mithril/querystring/parse.js":
/*!**********************************************************!*\
  !*** ../../../node_modules/mithril/querystring/parse.js ***!
  \**********************************************************/
/***/ ((module) => {

"use strict";


module.exports = function (string) {
  if (string === "" || string == null) return {};
  if (string.charAt(0) === "?") string = string.slice(1);
  var entries = string.split("&"),
    counters = {},
    data = {};
  for (var i = 0; i < entries.length; i++) {
    var entry = entries[i].split("=");
    var key = decodeURIComponent(entry[0]);
    var value = entry.length === 2 ? decodeURIComponent(entry[1]) : "";
    if (value === "true") value = true;else if (value === "false") value = false;
    var levels = key.split(/\]\[?|\[/);
    var cursor = data;
    if (key.indexOf("[") > -1) levels.pop();
    for (var j = 0; j < levels.length; j++) {
      var level = levels[j],
        nextLevel = levels[j + 1];
      var isNumber = nextLevel == "" || !isNaN(parseInt(nextLevel, 10));
      if (level === "") {
        var key = levels.slice(0, j).join();
        if (counters[key] == null) {
          counters[key] = Array.isArray(cursor) ? cursor.length : 0;
        }
        level = counters[key]++;
      }
      // Disallow direct prototype pollution
      else if (level === "__proto__") break;
      if (j === levels.length - 1) cursor[level] = value;else {
        // Read own properties exclusively to disallow indirect
        // prototype pollution
        var desc = Object.getOwnPropertyDescriptor(cursor, level);
        if (desc != null) desc = desc.value;
        if (desc == null) cursor[level] = desc = isNumber ? [] : {};
        cursor = desc;
      }
    }
  }
  return data;
};

/***/ }),

/***/ "../../../node_modules/mithril/render.js":
/*!***********************************************!*\
  !*** ../../../node_modules/mithril/render.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


module.exports = __webpack_require__(/*! ./render/render */ "../../../node_modules/mithril/render/render.js")(window);

/***/ }),

/***/ "../../../node_modules/mithril/render/fragment.js":
/*!********************************************************!*\
  !*** ../../../node_modules/mithril/render/fragment.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var Vnode = __webpack_require__(/*! ../render/vnode */ "../../../node_modules/mithril/render/vnode.js");
var hyperscriptVnode = __webpack_require__(/*! ./hyperscriptVnode */ "../../../node_modules/mithril/render/hyperscriptVnode.js");
module.exports = function () {
  var vnode = hyperscriptVnode.apply(0, arguments);
  vnode.tag = "[";
  vnode.children = Vnode.normalizeChildren(vnode.children);
  return vnode;
};

/***/ }),

/***/ "../../../node_modules/mithril/render/hyperscript.js":
/*!***********************************************************!*\
  !*** ../../../node_modules/mithril/render/hyperscript.js ***!
  \***********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var Vnode = __webpack_require__(/*! ../render/vnode */ "../../../node_modules/mithril/render/vnode.js");
var hyperscriptVnode = __webpack_require__(/*! ./hyperscriptVnode */ "../../../node_modules/mithril/render/hyperscriptVnode.js");
var selectorParser = /(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g;
var selectorCache = {};
var hasOwn = {}.hasOwnProperty;
function isEmpty(object) {
  for (var key in object) {
    if (hasOwn.call(object, key)) return false;
  }
  return true;
}
function compileSelector(selector) {
  var match,
    tag = "div",
    classes = [],
    attrs = {};
  while (match = selectorParser.exec(selector)) {
    var type = match[1],
      value = match[2];
    if (type === "" && value !== "") tag = value;else if (type === "#") attrs.id = value;else if (type === ".") classes.push(value);else if (match[3][0] === "[") {
      var attrValue = match[6];
      if (attrValue) attrValue = attrValue.replace(/\\(["'])/g, "$1").replace(/\\\\/g, "\\");
      if (match[4] === "class") classes.push(attrValue);else attrs[match[4]] = attrValue === "" ? attrValue : attrValue || true;
    }
  }
  if (classes.length > 0) attrs.className = classes.join(" ");
  return selectorCache[selector] = {
    tag: tag,
    attrs: attrs
  };
}
function execSelector(state, vnode) {
  var attrs = vnode.attrs;
  var children = Vnode.normalizeChildren(vnode.children);
  var hasClass = hasOwn.call(attrs, "class");
  var className = hasClass ? attrs["class"] : attrs.className;
  vnode.tag = state.tag;
  vnode.attrs = null;
  vnode.children = undefined;
  if (!isEmpty(state.attrs) && !isEmpty(attrs)) {
    var newAttrs = {};
    for (var key in attrs) {
      if (hasOwn.call(attrs, key)) newAttrs[key] = attrs[key];
    }
    attrs = newAttrs;
  }
  for (var key in state.attrs) {
    if (hasOwn.call(state.attrs, key) && key !== "className" && !hasOwn.call(attrs, key)) {
      attrs[key] = state.attrs[key];
    }
  }
  if (className != null || state.attrs.className != null) attrs.className = className != null ? state.attrs.className != null ? String(state.attrs.className) + " " + String(className) : className : state.attrs.className != null ? state.attrs.className : null;
  if (hasClass) attrs["class"] = null;
  for (var key in attrs) {
    if (hasOwn.call(attrs, key) && key !== "key") {
      vnode.attrs = attrs;
      break;
    }
  }
  if (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === "#") {
    vnode.text = children[0].children;
  } else {
    vnode.children = children;
  }
  return vnode;
}
function hyperscript(selector) {
  if (selector == null || typeof selector !== "string" && typeof selector !== "function" && typeof selector.view !== "function") {
    throw Error("The selector must be either a string or a component.");
  }
  var vnode = hyperscriptVnode.apply(1, arguments);
  if (typeof selector === "string") {
    vnode.children = Vnode.normalizeChildren(vnode.children);
    if (selector !== "[") return execSelector(selectorCache[selector] || compileSelector(selector), vnode);
  }
  vnode.tag = selector;
  return vnode;
}
module.exports = hyperscript;

/***/ }),

/***/ "../../../node_modules/mithril/render/hyperscriptVnode.js":
/*!****************************************************************!*\
  !*** ../../../node_modules/mithril/render/hyperscriptVnode.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var Vnode = __webpack_require__(/*! ../render/vnode */ "../../../node_modules/mithril/render/vnode.js");

// Call via `hyperscriptVnode.apply(startOffset, arguments)`
//
// The reason I do it this way, forwarding the arguments and passing the start
// offset in `this`, is so I don't have to create a temporary array in a
// performance-critical path.
//
// In native ES6, I'd instead add a final `...args` parameter to the
// `hyperscript` and `fragment` factories and define this as
// `hyperscriptVnode(...args)`, since modern engines do optimize that away. But
// ES5 (what Mithril requires thanks to IE support) doesn't give me that luxury,
// and engines aren't nearly intelligent enough to do either of these:
//
// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to
//    another function only to be indexed.
// 2. Elide an `arguments` allocation when it's passed to any function other
//    than `Function.prototype.apply` or `Reflect.apply`.
//
// In ES6, it'd probably look closer to this (I'd need to profile it, though):
// module.exports = function(attrs, ...children) {
//     if (attrs == null || typeof attrs === "object" && attrs.tag == null && !Array.isArray(attrs)) {
//         if (children.length === 1 && Array.isArray(children[0])) children = children[0]
//     } else {
//         children = children.length === 0 && Array.isArray(attrs) ? attrs : [attrs, ...children]
//         attrs = undefined
//     }
//
//     if (attrs == null) attrs = {}
//     return Vnode("", attrs.key, attrs, children)
// }
module.exports = function () {
  var attrs = arguments[this],
    start = this + 1,
    children;
  if (attrs == null) {
    attrs = {};
  } else if (typeof attrs !== "object" || attrs.tag != null || Array.isArray(attrs)) {
    attrs = {};
    start = this;
  }
  if (arguments.length === start + 1) {
    children = arguments[start];
    if (!Array.isArray(children)) children = [children];
  } else {
    children = [];
    while (start < arguments.length) {
      children.push(arguments[start++]);
    }
  }
  return Vnode("", attrs.key, attrs, children);
};

/***/ }),

/***/ "../../../node_modules/mithril/render/render.js":
/*!******************************************************!*\
  !*** ../../../node_modules/mithril/render/render.js ***!
  \******************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var Vnode = __webpack_require__(/*! ../render/vnode */ "../../../node_modules/mithril/render/vnode.js");
module.exports = function ($window) {
  var $doc = $window && $window.document;
  var currentRedraw;
  var nameSpace = {
    svg: "http://www.w3.org/2000/svg",
    math: "http://www.w3.org/1998/Math/MathML"
  };
  function getNameSpace(vnode) {
    return vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag];
  }

  //sanity check to discourage people from doing `vnode.state = ...`
  function checkState(vnode, original) {
    if (vnode.state !== original) throw new Error("`vnode.state` must not be modified");
  }

  //Note: the hook is passed as the `this` argument to allow proxying the
  //arguments without requiring a full array allocation to do so. It also
  //takes advantage of the fact the current `vnode` is the first argument in
  //all lifecycle methods.
  function callHook(vnode) {
    var original = vnode.state;
    try {
      return this.apply(original, arguments);
    } finally {
      checkState(vnode, original);
    }
  }

  // IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when
  // inside an iframe. Catch and swallow this error, and heavy-handidly return null.
  function activeElement() {
    try {
      return $doc.activeElement;
    } catch (e) {
      return null;
    }
  }
  //create
  function createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {
    for (var i = start; i < end; i++) {
      var vnode = vnodes[i];
      if (vnode != null) {
        createNode(parent, vnode, hooks, ns, nextSibling);
      }
    }
  }
  function createNode(parent, vnode, hooks, ns, nextSibling) {
    var tag = vnode.tag;
    if (typeof tag === "string") {
      vnode.state = {};
      if (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks);
      switch (tag) {
        case "#":
          createText(parent, vnode, nextSibling);
          break;
        case "<":
          createHTML(parent, vnode, ns, nextSibling);
          break;
        case "[":
          createFragment(parent, vnode, hooks, ns, nextSibling);
          break;
        default:
          createElement(parent, vnode, hooks, ns, nextSibling);
      }
    } else createComponent(parent, vnode, hooks, ns, nextSibling);
  }
  function createText(parent, vnode, nextSibling) {
    vnode.dom = $doc.createTextNode(vnode.children);
    insertNode(parent, vnode.dom, nextSibling);
  }
  var possibleParents = {
    caption: "table",
    thead: "table",
    tbody: "table",
    tfoot: "table",
    tr: "tbody",
    th: "tr",
    td: "tr",
    colgroup: "table",
    col: "colgroup"
  };
  function createHTML(parent, vnode, ns, nextSibling) {
    var match = vnode.children.match(/^\s*?<(\w+)/im) || [];
    // not using the proper parent makes the child element(s) vanish.
    //     var div = document.createElement("div")
    //     div.innerHTML = "<td>i</td><td>j</td>"
    //     console.log(div.innerHTML)
    // --> "ij", no <td> in sight.
    var temp = $doc.createElement(possibleParents[match[1]] || "div");
    if (ns === "http://www.w3.org/2000/svg") {
      temp.innerHTML = "<svg xmlns=\"http://www.w3.org/2000/svg\">" + vnode.children + "</svg>";
      temp = temp.firstChild;
    } else {
      temp.innerHTML = vnode.children;
    }
    vnode.dom = temp.firstChild;
    vnode.domSize = temp.childNodes.length;
    // Capture nodes to remove, so we don't confuse them.
    vnode.instance = [];
    var fragment = $doc.createDocumentFragment();
    var child;
    while (child = temp.firstChild) {
      vnode.instance.push(child);
      fragment.appendChild(child);
    }
    insertNode(parent, fragment, nextSibling);
  }
  function createFragment(parent, vnode, hooks, ns, nextSibling) {
    var fragment = $doc.createDocumentFragment();
    if (vnode.children != null) {
      var children = vnode.children;
      createNodes(fragment, children, 0, children.length, hooks, null, ns);
    }
    vnode.dom = fragment.firstChild;
    vnode.domSize = fragment.childNodes.length;
    insertNode(parent, fragment, nextSibling);
  }
  function createElement(parent, vnode, hooks, ns, nextSibling) {
    var tag = vnode.tag;
    var attrs = vnode.attrs;
    var is = attrs && attrs.is;
    ns = getNameSpace(vnode) || ns;
    var element = ns ? is ? $doc.createElementNS(ns, tag, {
      is: is
    }) : $doc.createElementNS(ns, tag) : is ? $doc.createElement(tag, {
      is: is
    }) : $doc.createElement(tag);
    vnode.dom = element;
    if (attrs != null) {
      setAttrs(vnode, attrs, ns);
    }
    insertNode(parent, element, nextSibling);
    if (!maybeSetContentEditable(vnode)) {
      if (vnode.text != null) {
        if (vnode.text !== "") element.textContent = vnode.text;else vnode.children = [Vnode("#", undefined, undefined, vnode.text, undefined, undefined)];
      }
      if (vnode.children != null) {
        var children = vnode.children;
        createNodes(element, children, 0, children.length, hooks, null, ns);
        if (vnode.tag === "select" && attrs != null) setLateSelectAttrs(vnode, attrs);
      }
    }
  }
  function initComponent(vnode, hooks) {
    var sentinel;
    if (typeof vnode.tag.view === "function") {
      vnode.state = Object.create(vnode.tag);
      sentinel = vnode.state.view;
      if (sentinel.$$reentrantLock$$ != null) return;
      sentinel.$$reentrantLock$$ = true;
    } else {
      vnode.state = void 0;
      sentinel = vnode.tag;
      if (sentinel.$$reentrantLock$$ != null) return;
      sentinel.$$reentrantLock$$ = true;
      vnode.state = vnode.tag.prototype != null && typeof vnode.tag.prototype.view === "function" ? new vnode.tag(vnode) : vnode.tag(vnode);
    }
    initLifecycle(vnode.state, vnode, hooks);
    if (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks);
    vnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode));
    if (vnode.instance === vnode) throw Error("A view cannot return the vnode it received as argument");
    sentinel.$$reentrantLock$$ = null;
  }
  function createComponent(parent, vnode, hooks, ns, nextSibling) {
    initComponent(vnode, hooks);
    if (vnode.instance != null) {
      createNode(parent, vnode.instance, hooks, ns, nextSibling);
      vnode.dom = vnode.instance.dom;
      vnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0;
    } else {
      vnode.domSize = 0;
    }
  }

  //update
  /**
   * @param {Element|Fragment} parent - the parent element
   * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for
   *                               this part of the tree
   * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.
   * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)
   * @param {Element | null} nextSibling - the next DOM node if we're dealing with a
   *                                       fragment that is not the last item in its
   *                                       parent
   * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any
   * @returns void
   */
  // This function diffs and patches lists of vnodes, both keyed and unkeyed.
  //
  // We will:
  //
  // 1. describe its general structure
  // 2. focus on the diff algorithm optimizations
  // 3. discuss DOM node operations.

  // ## Overview:
  //
  // The updateNodes() function:
  // - deals with trivial cases
  // - determines whether the lists are keyed or unkeyed based on the first non-null node
  //   of each list.
  // - diffs them and patches the DOM if needed (that's the brunt of the code)
  // - manages the leftovers: after diffing, are there:
  //   - old nodes left to remove?
  // 	 - new nodes to insert?
  // 	 deal with them!
  //
  // The lists are only iterated over once, with an exception for the nodes in `old` that
  // are visited in the fourth part of the diff and in the `removeNodes` loop.

  // ## Diffing
  //
  // Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837
  // may be good for context on longest increasing subsequence-based logic for moving nodes.
  //
  // In order to diff keyed lists, one has to
  //
  // 1) match nodes in both lists, per key, and update them accordingly
  // 2) create the nodes present in the new list, but absent in the old one
  // 3) remove the nodes present in the old list, but absent in the new one
  // 4) figure out what nodes in 1) to move in order to minimize the DOM operations.
  //
  // To achieve 1) one can create a dictionary of keys => index (for the old list), then iterate
  // over the new list and for each new vnode, find the corresponding vnode in the old list using
  // the map.
  // 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new
  // and must be created.
  // For the removals, we actually remove the nodes that have been updated from the old list.
  // The nodes that remain in that list after 1) and 2) have been performed can be safely removed.
  // The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)
  // algorithm.
  //
  // the longest increasing subsequence is the list of nodes that can remain in place. Imagine going
  // from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices
  // corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would
  //  match the above lists, for example).
  //
  // In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We
  // can update those nodes without moving them, and only call `insertNode` on `4` and `5`.
  //
  // @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually
  // the longest increasing subsequence *of old nodes still present in the new list*).
  //
  // It is a general algorithm that is fireproof in all circumstances, but it requires the allocation
  // and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,
  // the `LIS` and a temporary one to create the LIS).
  //
  // So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of
  // the LIS and can be updated without moving them.
  //
  // If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with
  // the exception of the last node if the list is fully reversed).
  //
  // ## Finding the next sibling.
  //
  // `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.
  // When the list is being traversed top-down, at any index, the DOM nodes up to the previous
  // vnode reflect the content of the new list, whereas the rest of the DOM nodes reflect the old
  // list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.
  //
  // In the other scenarios (swaps, upwards traversal, map-based diff),
  // the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the
  // bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node
  // as the next sibling (cached in the `nextSibling` variable).

  // ## DOM node moves
  //
  // In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,
  // this is not the case if the node moved (second and fourth part of the diff algo). We move
  // the old DOM nodes before updateNode runs because it enables us to use the cached `nextSibling`
  // variable rather than fetching it using `getNextSibling()`.
  //
  // The fourth part of the diff currently inserts nodes unconditionally, leading to issues
  // like #1791 and #1999. We need to be smarter about those situations where adjascent old
  // nodes remain together in the new list in a way that isn't covered by parts one and
  // three of the diff algo.

  function updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {
    if (old === vnodes || old == null && vnodes == null) return;else if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns);else if (vnodes == null || vnodes.length === 0) removeNodes(parent, old, 0, old.length);else {
      var isOldKeyed = old[0] != null && old[0].key != null;
      var isKeyed = vnodes[0] != null && vnodes[0].key != null;
      var start = 0,
        oldStart = 0;
      if (!isOldKeyed) while (oldStart < old.length && old[oldStart] == null) {
        oldStart++;
      }
      if (!isKeyed) while (start < vnodes.length && vnodes[start] == null) {
        start++;
      }
      if (isKeyed === null && isOldKeyed == null) return; // both lists are full of nulls
      if (isOldKeyed !== isKeyed) {
        removeNodes(parent, old, oldStart, old.length);
        createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns);
      } else if (!isKeyed) {
        // Don't index past the end of either list (causes deopts).
        var commonLength = old.length < vnodes.length ? old.length : vnodes.length;
        // Rewind if necessary to the first non-null index on either side.
        // We could alternatively either explicitly create or remove nodes when `start !== oldStart`
        // but that would be optimizing for sparse lists which are more rare than dense ones.
        start = start < oldStart ? start : oldStart;
        for (; start < commonLength; start++) {
          o = old[start];
          v = vnodes[start];
          if (o === v || o == null && v == null) continue;else if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling));else if (v == null) removeNode(parent, o);else updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns);
        }
        if (old.length > commonLength) removeNodes(parent, old, start, old.length);
        if (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns);
      } else {
        // keyed diff
        var oldEnd = old.length - 1,
          end = vnodes.length - 1,
          map,
          o,
          v,
          oe,
          ve,
          topSibling;

        // bottom-up
        while (oldEnd >= oldStart && end >= start) {
          oe = old[oldEnd];
          ve = vnodes[end];
          if (oe.key !== ve.key) break;
          if (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns);
          if (ve.dom != null) nextSibling = ve.dom;
          oldEnd--, end--;
        }
        // top-down
        while (oldEnd >= oldStart && end >= start) {
          o = old[oldStart];
          v = vnodes[start];
          if (o.key !== v.key) break;
          oldStart++, start++;
          if (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns);
        }
        // swaps and list reversals
        while (oldEnd >= oldStart && end >= start) {
          if (start === end) break;
          if (o.key !== ve.key || oe.key !== v.key) break;
          topSibling = getNextSibling(old, oldStart, nextSibling);
          moveNodes(parent, oe, topSibling);
          if (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns);
          if (++start <= --end) moveNodes(parent, o, nextSibling);
          if (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns);
          if (ve.dom != null) nextSibling = ve.dom;
          oldStart++;
          oldEnd--;
          oe = old[oldEnd];
          ve = vnodes[end];
          o = old[oldStart];
          v = vnodes[start];
        }
        // bottom up once again
        while (oldEnd >= oldStart && end >= start) {
          if (oe.key !== ve.key) break;
          if (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns);
          if (ve.dom != null) nextSibling = ve.dom;
          oldEnd--, end--;
          oe = old[oldEnd];
          ve = vnodes[end];
        }
        if (start > end) removeNodes(parent, old, oldStart, oldEnd + 1);else if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns);else {
          // inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul
          var originalNextSibling = nextSibling,
            vnodesLength = end - start + 1,
            oldIndices = new Array(vnodesLength),
            li = 0,
            i = 0,
            pos = 2147483647,
            matched = 0,
            map,
            lisIndices;
          for (i = 0; i < vnodesLength; i++) {
            oldIndices[i] = -1;
          }
          for (i = end; i >= start; i--) {
            if (map == null) map = getKeyMap(old, oldStart, oldEnd + 1);
            ve = vnodes[i];
            var oldIndex = map[ve.key];
            if (oldIndex != null) {
              pos = oldIndex < pos ? oldIndex : -1; // becomes -1 if nodes were re-ordered
              oldIndices[i - start] = oldIndex;
              oe = old[oldIndex];
              old[oldIndex] = null;
              if (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns);
              if (ve.dom != null) nextSibling = ve.dom;
              matched++;
            }
          }
          nextSibling = originalNextSibling;
          if (matched !== oldEnd - oldStart + 1) removeNodes(parent, old, oldStart, oldEnd + 1);
          if (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns);else {
            if (pos === -1) {
              // the indices of the indices of the items that are part of the
              // longest increasing subsequence in the oldIndices list
              lisIndices = makeLisIndices(oldIndices);
              li = lisIndices.length - 1;
              for (i = end; i >= start; i--) {
                v = vnodes[i];
                if (oldIndices[i - start] === -1) createNode(parent, v, hooks, ns, nextSibling);else {
                  if (lisIndices[li] === i - start) li--;else moveNodes(parent, v, nextSibling);
                }
                if (v.dom != null) nextSibling = vnodes[i].dom;
              }
            } else {
              for (i = end; i >= start; i--) {
                v = vnodes[i];
                if (oldIndices[i - start] === -1) createNode(parent, v, hooks, ns, nextSibling);
                if (v.dom != null) nextSibling = vnodes[i].dom;
              }
            }
          }
        }
      }
    }
  }
  function updateNode(parent, old, vnode, hooks, nextSibling, ns) {
    var oldTag = old.tag,
      tag = vnode.tag;
    if (oldTag === tag) {
      vnode.state = old.state;
      vnode.events = old.events;
      if (shouldNotUpdate(vnode, old)) return;
      if (typeof oldTag === "string") {
        if (vnode.attrs != null) {
          updateLifecycle(vnode.attrs, vnode, hooks);
        }
        switch (oldTag) {
          case "#":
            updateText(old, vnode);
            break;
          case "<":
            updateHTML(parent, old, vnode, ns, nextSibling);
            break;
          case "[":
            updateFragment(parent, old, vnode, hooks, nextSibling, ns);
            break;
          default:
            updateElement(old, vnode, hooks, ns);
        }
      } else updateComponent(parent, old, vnode, hooks, nextSibling, ns);
    } else {
      removeNode(parent, old);
      createNode(parent, vnode, hooks, ns, nextSibling);
    }
  }
  function updateText(old, vnode) {
    if (old.children.toString() !== vnode.children.toString()) {
      old.dom.nodeValue = vnode.children;
    }
    vnode.dom = old.dom;
  }
  function updateHTML(parent, old, vnode, ns, nextSibling) {
    if (old.children !== vnode.children) {
      removeHTML(parent, old);
      createHTML(parent, vnode, ns, nextSibling);
    } else {
      vnode.dom = old.dom;
      vnode.domSize = old.domSize;
      vnode.instance = old.instance;
    }
  }
  function updateFragment(parent, old, vnode, hooks, nextSibling, ns) {
    updateNodes(parent, old.children, vnode.children, hooks, nextSibling, ns);
    var domSize = 0,
      children = vnode.children;
    vnode.dom = null;
    if (children != null) {
      for (var i = 0; i < children.length; i++) {
        var child = children[i];
        if (child != null && child.dom != null) {
          if (vnode.dom == null) vnode.dom = child.dom;
          domSize += child.domSize || 1;
        }
      }
      if (domSize !== 1) vnode.domSize = domSize;
    }
  }
  function updateElement(old, vnode, hooks, ns) {
    var element = vnode.dom = old.dom;
    ns = getNameSpace(vnode) || ns;
    if (vnode.tag === "textarea") {
      if (vnode.attrs == null) vnode.attrs = {};
      if (vnode.text != null) {
        vnode.attrs.value = vnode.text; //FIXME handle multiple children
        vnode.text = undefined;
      }
    }
    updateAttrs(vnode, old.attrs, vnode.attrs, ns);
    if (!maybeSetContentEditable(vnode)) {
      if (old.text != null && vnode.text != null && vnode.text !== "") {
        if (old.text.toString() !== vnode.text.toString()) old.dom.firstChild.nodeValue = vnode.text;
      } else {
        if (old.text != null) old.children = [Vnode("#", undefined, undefined, old.text, undefined, old.dom.firstChild)];
        if (vnode.text != null) vnode.children = [Vnode("#", undefined, undefined, vnode.text, undefined, undefined)];
        updateNodes(element, old.children, vnode.children, hooks, null, ns);
      }
    }
  }
  function updateComponent(parent, old, vnode, hooks, nextSibling, ns) {
    vnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode));
    if (vnode.instance === vnode) throw Error("A view cannot return the vnode it received as argument");
    updateLifecycle(vnode.state, vnode, hooks);
    if (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks);
    if (vnode.instance != null) {
      if (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling);else updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, ns);
      vnode.dom = vnode.instance.dom;
      vnode.domSize = vnode.instance.domSize;
    } else if (old.instance != null) {
      removeNode(parent, old.instance);
      vnode.dom = undefined;
      vnode.domSize = 0;
    } else {
      vnode.dom = old.dom;
      vnode.domSize = old.domSize;
    }
  }
  function getKeyMap(vnodes, start, end) {
    var map = Object.create(null);
    for (; start < end; start++) {
      var vnode = vnodes[start];
      if (vnode != null) {
        var key = vnode.key;
        if (key != null) map[key] = start;
      }
    }
    return map;
  }
  // Lifted from ivi https://github.com/ivijs/ivi/
  // takes a list of unique numbers (-1 is special and can
  // occur multiple times) and returns an array with the indices
  // of the items that are part of the longest increasing
  // subsequece
  var lisTemp = [];
  function makeLisIndices(a) {
    var result = [0];
    var u = 0,
      v = 0,
      i = 0;
    var il = lisTemp.length = a.length;
    for (var i = 0; i < il; i++) {
      lisTemp[i] = a[i];
    }
    for (var i = 0; i < il; ++i) {
      if (a[i] === -1) continue;
      var j = result[result.length - 1];
      if (a[j] < a[i]) {
        lisTemp[i] = j;
        result.push(i);
        continue;
      }
      u = 0;
      v = result.length - 1;
      while (u < v) {
        // Fast integer average without overflow.
        // eslint-disable-next-line no-bitwise
        var c = (u >>> 1) + (v >>> 1) + (u & v & 1);
        if (a[result[c]] < a[i]) {
          u = c + 1;
        } else {
          v = c;
        }
      }
      if (a[i] < a[result[u]]) {
        if (u > 0) lisTemp[i] = result[u - 1];
        result[u] = i;
      }
    }
    u = result.length;
    v = result[u - 1];
    while (u-- > 0) {
      result[u] = v;
      v = lisTemp[v];
    }
    lisTemp.length = 0;
    return result;
  }
  function getNextSibling(vnodes, i, nextSibling) {
    for (; i < vnodes.length; i++) {
      if (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom;
    }
    return nextSibling;
  }

  // This covers a really specific edge case:
  // - Parent node is keyed and contains child
  // - Child is removed, returns unresolved promise in `onbeforeremove`
  // - Parent node is moved in keyed diff
  // - Remaining children still need moved appropriately
  //
  // Ideally, I'd track removed nodes as well, but that introduces a lot more
  // complexity and I'm not exactly interested in doing that.
  function moveNodes(parent, vnode, nextSibling) {
    var frag = $doc.createDocumentFragment();
    moveChildToFrag(parent, frag, vnode);
    insertNode(parent, frag, nextSibling);
  }
  function moveChildToFrag(parent, frag, vnode) {
    // Dodge the recursion overhead in a few of the most common cases.
    while (vnode.dom != null && vnode.dom.parentNode === parent) {
      if (typeof vnode.tag !== "string") {
        vnode = vnode.instance;
        if (vnode != null) continue;
      } else if (vnode.tag === "<") {
        for (var i = 0; i < vnode.instance.length; i++) {
          frag.appendChild(vnode.instance[i]);
        }
      } else if (vnode.tag !== "[") {
        // Don't recurse for text nodes *or* elements, just fragments
        frag.appendChild(vnode.dom);
      } else if (vnode.children.length === 1) {
        vnode = vnode.children[0];
        if (vnode != null) continue;
      } else {
        for (var i = 0; i < vnode.children.length; i++) {
          var child = vnode.children[i];
          if (child != null) moveChildToFrag(parent, frag, child);
        }
      }
      break;
    }
  }
  function insertNode(parent, dom, nextSibling) {
    if (nextSibling != null) parent.insertBefore(dom, nextSibling);else parent.appendChild(dom);
  }
  function maybeSetContentEditable(vnode) {
    if (vnode.attrs == null || vnode.attrs.contenteditable == null &&
    // attribute
    vnode.attrs.contentEditable == null // property
    ) return false;
    var children = vnode.children;
    if (children != null && children.length === 1 && children[0].tag === "<") {
      var content = children[0].children;
      if (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content;
    } else if (vnode.text != null || children != null && children.length !== 0) throw new Error("Child node of a contenteditable must be trusted");
    return true;
  }

  //remove
  function removeNodes(parent, vnodes, start, end) {
    for (var i = start; i < end; i++) {
      var vnode = vnodes[i];
      if (vnode != null) removeNode(parent, vnode);
    }
  }
  function removeNode(parent, vnode) {
    var mask = 0;
    var original = vnode.state;
    var stateResult, attrsResult;
    if (typeof vnode.tag !== "string" && typeof vnode.state.onbeforeremove === "function") {
      var result = callHook.call(vnode.state.onbeforeremove, vnode);
      if (result != null && typeof result.then === "function") {
        mask = 1;
        stateResult = result;
      }
    }
    if (vnode.attrs && typeof vnode.attrs.onbeforeremove === "function") {
      var result = callHook.call(vnode.attrs.onbeforeremove, vnode);
      if (result != null && typeof result.then === "function") {
        // eslint-disable-next-line no-bitwise
        mask |= 2;
        attrsResult = result;
      }
    }
    checkState(vnode, original);

    // If we can, try to fast-path it and avoid all the overhead of awaiting
    if (!mask) {
      onremove(vnode);
      removeChild(parent, vnode);
    } else {
      if (stateResult != null) {
        var next = function next() {
          // eslint-disable-next-line no-bitwise
          if (mask & 1) {
            mask &= 2;
            if (!mask) reallyRemove();
          }
        };
        stateResult.then(next, next);
      }
      if (attrsResult != null) {
        var next = function next() {
          // eslint-disable-next-line no-bitwise
          if (mask & 2) {
            mask &= 1;
            if (!mask) reallyRemove();
          }
        };
        attrsResult.then(next, next);
      }
    }
    function reallyRemove() {
      checkState(vnode, original);
      onremove(vnode);
      removeChild(parent, vnode);
    }
  }
  function removeHTML(parent, vnode) {
    for (var i = 0; i < vnode.instance.length; i++) {
      parent.removeChild(vnode.instance[i]);
    }
  }
  function removeChild(parent, vnode) {
    // Dodge the recursion overhead in a few of the most common cases.
    while (vnode.dom != null && vnode.dom.parentNode === parent) {
      if (typeof vnode.tag !== "string") {
        vnode = vnode.instance;
        if (vnode != null) continue;
      } else if (vnode.tag === "<") {
        removeHTML(parent, vnode);
      } else {
        if (vnode.tag !== "[") {
          parent.removeChild(vnode.dom);
          if (!Array.isArray(vnode.children)) break;
        }
        if (vnode.children.length === 1) {
          vnode = vnode.children[0];
          if (vnode != null) continue;
        } else {
          for (var i = 0; i < vnode.children.length; i++) {
            var child = vnode.children[i];
            if (child != null) removeChild(parent, child);
          }
        }
      }
      break;
    }
  }
  function onremove(vnode) {
    if (typeof vnode.tag !== "string" && typeof vnode.state.onremove === "function") callHook.call(vnode.state.onremove, vnode);
    if (vnode.attrs && typeof vnode.attrs.onremove === "function") callHook.call(vnode.attrs.onremove, vnode);
    if (typeof vnode.tag !== "string") {
      if (vnode.instance != null) onremove(vnode.instance);
    } else {
      var children = vnode.children;
      if (Array.isArray(children)) {
        for (var i = 0; i < children.length; i++) {
          var child = children[i];
          if (child != null) onremove(child);
        }
      }
    }
  }

  //attrs
  function setAttrs(vnode, attrs, ns) {
    for (var key in attrs) {
      setAttr(vnode, key, null, attrs[key], ns);
    }
  }
  function setAttr(vnode, key, old, value, ns) {
    if (key === "key" || key === "is" || value == null || isLifecycleMethod(key) || old === value && !isFormAttribute(vnode, key) && typeof value !== "object") return;
    if (key[0] === "o" && key[1] === "n") return updateEvent(vnode, key, value);
    if (key.slice(0, 6) === "xlink:") vnode.dom.setAttributeNS("http://www.w3.org/1999/xlink", key.slice(6), value);else if (key === "style") updateStyle(vnode.dom, old, value);else if (hasPropertyKey(vnode, key, ns)) {
      if (key === "value") {
        // Only do the coercion if we're actually going to check the value.
        /* eslint-disable no-implicit-coercion */
        //setting input[value] to same value by typing on focused element moves cursor to end in Chrome
        if ((vnode.tag === "input" || vnode.tag === "textarea") && vnode.dom.value === "" + value && vnode.dom === activeElement()) return;
        //setting select[value] to same value while having select open blinks select dropdown in Chrome
        if (vnode.tag === "select" && old !== null && vnode.dom.value === "" + value) return;
        //setting option[value] to same value while having select open blinks select dropdown in Chrome
        if (vnode.tag === "option" && old !== null && vnode.dom.value === "" + value) return;
        /* eslint-enable no-implicit-coercion */
      }
      // If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.
      if (vnode.tag === "input" && key === "type") vnode.dom.setAttribute(key, value);else vnode.dom[key] = value;
    } else {
      if (typeof value === "boolean") {
        if (value) vnode.dom.setAttribute(key, "");else vnode.dom.removeAttribute(key);
      } else vnode.dom.setAttribute(key === "className" ? "class" : key, value);
    }
  }
  function removeAttr(vnode, key, old, ns) {
    if (key === "key" || key === "is" || old == null || isLifecycleMethod(key)) return;
    if (key[0] === "o" && key[1] === "n" && !isLifecycleMethod(key)) updateEvent(vnode, key, undefined);else if (key === "style") updateStyle(vnode.dom, old, null);else if (hasPropertyKey(vnode, key, ns) && key !== "className" && !(key === "value" && (vnode.tag === "option" || vnode.tag === "select" && vnode.dom.selectedIndex === -1 && vnode.dom === activeElement())) && !(vnode.tag === "input" && key === "type")) {
      vnode.dom[key] = null;
    } else {
      var nsLastIndex = key.indexOf(":");
      if (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1);
      if (old !== false) vnode.dom.removeAttribute(key === "className" ? "class" : key);
    }
  }
  function setLateSelectAttrs(vnode, attrs) {
    if ("value" in attrs) {
      if (attrs.value === null) {
        if (vnode.dom.selectedIndex !== -1) vnode.dom.value = null;
      } else {
        var normalized = "" + attrs.value; // eslint-disable-line no-implicit-coercion
        if (vnode.dom.value !== normalized || vnode.dom.selectedIndex === -1) {
          vnode.dom.value = normalized;
        }
      }
    }
    if ("selectedIndex" in attrs) setAttr(vnode, "selectedIndex", null, attrs.selectedIndex, undefined);
  }
  function updateAttrs(vnode, old, attrs, ns) {
    if (attrs != null) {
      for (var key in attrs) {
        setAttr(vnode, key, old && old[key], attrs[key], ns);
      }
    }
    var val;
    if (old != null) {
      for (var key in old) {
        if ((val = old[key]) != null && (attrs == null || attrs[key] == null)) {
          removeAttr(vnode, key, val, ns);
        }
      }
    }
  }
  function isFormAttribute(vnode, attr) {
    return attr === "value" || attr === "checked" || attr === "selectedIndex" || attr === "selected" && vnode.dom === activeElement() || vnode.tag === "option" && vnode.dom.parentNode === $doc.activeElement;
  }
  function isLifecycleMethod(attr) {
    return attr === "oninit" || attr === "oncreate" || attr === "onupdate" || attr === "onremove" || attr === "onbeforeremove" || attr === "onbeforeupdate";
  }
  function hasPropertyKey(vnode, key, ns) {
    // Filter out namespaced keys
    return ns === undefined && (
    // If it's a custom element, just keep it.
    vnode.tag.indexOf("-") > -1 || vnode.attrs != null && vnode.attrs.is ||
    // If it's a normal element, let's try to avoid a few browser bugs.
    key !== "href" && key !== "list" && key !== "form" && key !== "width" && key !== "height" // && key !== "type"
    // Defer the property check until *after* we check everything.
    ) && key in vnode.dom;
  }

  //style
  var uppercaseRegex = /[A-Z]/g;
  function toLowerCase(capital) {
    return "-" + capital.toLowerCase();
  }
  function normalizeKey(key) {
    return key[0] === "-" && key[1] === "-" ? key : key === "cssFloat" ? "float" : key.replace(uppercaseRegex, toLowerCase);
  }
  function updateStyle(element, old, style) {
    if (old === style) {
      // Styles are equivalent, do nothing.
    } else if (style == null) {
      // New style is missing, just clear it.
      element.style.cssText = "";
    } else if (typeof style !== "object") {
      // New style is a string, let engine deal with patching.
      element.style.cssText = style;
    } else if (old == null || typeof old !== "object") {
      // `old` is missing or a string, `style` is an object.
      element.style.cssText = "";
      // Add new style properties
      for (var key in style) {
        var value = style[key];
        if (value != null) element.style.setProperty(normalizeKey(key), String(value));
      }
    } else {
      // Both old & new are (different) objects.
      // Update style properties that have changed
      for (var key in style) {
        var value = style[key];
        if (value != null && (value = String(value)) !== String(old[key])) {
          element.style.setProperty(normalizeKey(key), value);
        }
      }
      // Remove style properties that no longer exist
      for (var key in old) {
        if (old[key] != null && style[key] == null) {
          element.style.removeProperty(normalizeKey(key));
        }
      }
    }
  }

  // Here's an explanation of how this works:
  // 1. The event names are always (by design) prefixed by `on`.
  // 2. The EventListener interface accepts either a function or an object
  //    with a `handleEvent` method.
  // 3. The object does not inherit from `Object.prototype`, to avoid
  //    any potential interference with that (e.g. setters).
  // 4. The event name is remapped to the handler before calling it.
  // 5. In function-based event handlers, `ev.target === this`. We replicate
  //    that below.
  // 6. In function-based event handlers, `return false` prevents the default
  //    action and stops event propagation. We replicate that below.
  function EventDict() {
    // Save this, so the current redraw is correctly tracked.
    this._ = currentRedraw;
  }
  EventDict.prototype = Object.create(null);
  EventDict.prototype.handleEvent = function (ev) {
    var handler = this["on" + ev.type];
    var result;
    if (typeof handler === "function") result = handler.call(ev.currentTarget, ev);else if (typeof handler.handleEvent === "function") handler.handleEvent(ev);
    if (this._ && ev.redraw !== false) (0, this._)();
    if (result === false) {
      ev.preventDefault();
      ev.stopPropagation();
    }
  };

  //event
  function updateEvent(vnode, key, value) {
    if (vnode.events != null) {
      if (vnode.events[key] === value) return;
      if (value != null && (typeof value === "function" || typeof value === "object")) {
        if (vnode.events[key] == null) vnode.dom.addEventListener(key.slice(2), vnode.events, false);
        vnode.events[key] = value;
      } else {
        if (vnode.events[key] != null) vnode.dom.removeEventListener(key.slice(2), vnode.events, false);
        vnode.events[key] = undefined;
      }
    } else if (value != null && (typeof value === "function" || typeof value === "object")) {
      vnode.events = new EventDict();
      vnode.dom.addEventListener(key.slice(2), vnode.events, false);
      vnode.events[key] = value;
    }
  }

  //lifecycle
  function initLifecycle(source, vnode, hooks) {
    if (typeof source.oninit === "function") callHook.call(source.oninit, vnode);
    if (typeof source.oncreate === "function") hooks.push(callHook.bind(source.oncreate, vnode));
  }
  function updateLifecycle(source, vnode, hooks) {
    if (typeof source.onupdate === "function") hooks.push(callHook.bind(source.onupdate, vnode));
  }
  function shouldNotUpdate(vnode, old) {
    do {
      if (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === "function") {
        var force = callHook.call(vnode.attrs.onbeforeupdate, vnode, old);
        if (force !== undefined && !force) break;
      }
      if (typeof vnode.tag !== "string" && typeof vnode.state.onbeforeupdate === "function") {
        var force = callHook.call(vnode.state.onbeforeupdate, vnode, old);
        if (force !== undefined && !force) break;
      }
      return false;
    } while (false); // eslint-disable-line no-constant-condition
    vnode.dom = old.dom;
    vnode.domSize = old.domSize;
    vnode.instance = old.instance;
    // One would think having the actual latest attributes would be ideal,
    // but it doesn't let us properly diff based on our current internal
    // representation. We have to save not only the old DOM info, but also
    // the attributes used to create it, as we diff *that*, not against the
    // DOM directly (with a few exceptions in `setAttr`). And, of course, we
    // need to save the children and text as they are conceptually not
    // unlike special "attributes" internally.
    vnode.attrs = old.attrs;
    vnode.children = old.children;
    vnode.text = old.text;
    return true;
  }
  return function (dom, vnodes, redraw) {
    if (!dom) throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");
    var hooks = [];
    var active = activeElement();
    var namespace = dom.namespaceURI;

    // First time rendering into a node clears it out
    if (dom.vnodes == null) dom.textContent = "";
    vnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes]);
    var prevRedraw = currentRedraw;
    try {
      currentRedraw = typeof redraw === "function" ? redraw : undefined;
      updateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === "http://www.w3.org/1999/xhtml" ? undefined : namespace);
    } finally {
      currentRedraw = prevRedraw;
    }
    dom.vnodes = vnodes;
    // `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement
    if (active != null && activeElement() !== active && typeof active.focus === "function") active.focus();
    for (var i = 0; i < hooks.length; i++) {
      hooks[i]();
    }
  };
};

/***/ }),

/***/ "../../../node_modules/mithril/render/trust.js":
/*!*****************************************************!*\
  !*** ../../../node_modules/mithril/render/trust.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var Vnode = __webpack_require__(/*! ../render/vnode */ "../../../node_modules/mithril/render/vnode.js");
module.exports = function (html) {
  if (html == null) html = "";
  return Vnode("<", undefined, undefined, html, undefined, undefined);
};

/***/ }),

/***/ "../../../node_modules/mithril/render/vnode.js":
/*!*****************************************************!*\
  !*** ../../../node_modules/mithril/render/vnode.js ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";


function Vnode(tag, key, attrs, children, text, dom) {
  return {
    tag: tag,
    key: key,
    attrs: attrs,
    children: children,
    text: text,
    dom: dom,
    domSize: undefined,
    state: undefined,
    events: undefined,
    instance: undefined
  };
}
Vnode.normalize = function (node) {
  if (Array.isArray(node)) return Vnode("[", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined);
  if (node == null || typeof node === "boolean") return null;
  if (typeof node === "object") return node;
  return Vnode("#", undefined, undefined, String(node), undefined, undefined);
};
Vnode.normalizeChildren = function (input) {
  var children = [];
  if (input.length) {
    var isKeyed = input[0] != null && input[0].key != null;
    // Note: this is a *very* perf-sensitive check.
    // Fun fact: merging the loop like this is somehow faster than splitting
    // it, noticeably so.
    for (var i = 1; i < input.length; i++) {
      if ((input[i] != null && input[i].key != null) !== isKeyed) {
        throw new TypeError("Vnodes must either always have keys or never have keys!");
      }
    }
    for (var i = 0; i < input.length; i++) {
      children[i] = Vnode.normalize(input[i]);
    }
  }
  return children;
};
module.exports = Vnode;

/***/ }),

/***/ "../../../node_modules/mithril/request.js":
/*!************************************************!*\
  !*** ../../../node_modules/mithril/request.js ***!
  \************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var PromisePolyfill = __webpack_require__(/*! ./promise/promise */ "../../../node_modules/mithril/promise/promise.js");
var mountRedraw = __webpack_require__(/*! ./mount-redraw */ "../../../node_modules/mithril/mount-redraw.js");
module.exports = __webpack_require__(/*! ./request/request */ "../../../node_modules/mithril/request/request.js")(window, PromisePolyfill, mountRedraw.redraw);

/***/ }),

/***/ "../../../node_modules/mithril/request/request.js":
/*!********************************************************!*\
  !*** ../../../node_modules/mithril/request/request.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var buildPathname = __webpack_require__(/*! ../pathname/build */ "../../../node_modules/mithril/pathname/build.js");
module.exports = function ($window, Promise, oncompletion) {
  var callbackCount = 0;
  function PromiseProxy(executor) {
    return new Promise(executor);
  }

  // In case the global Promise is some userland library's where they rely on
  // `foo instanceof this.constructor`, `this.constructor.resolve(value)`, or
  // similar. Let's *not* break them.
  PromiseProxy.prototype = Promise.prototype;
  PromiseProxy.__proto__ = Promise; // eslint-disable-line no-proto

  function makeRequest(factory) {
    return function (url, args) {
      if (typeof url !== "string") {
        args = url;
        url = url.url;
      } else if (args == null) args = {};
      var promise = new Promise(function (resolve, reject) {
        factory(buildPathname(url, args.params), args, function (data) {
          if (typeof args.type === "function") {
            if (Array.isArray(data)) {
              for (var i = 0; i < data.length; i++) {
                data[i] = new args.type(data[i]);
              }
            } else data = new args.type(data);
          }
          resolve(data);
        }, reject);
      });
      if (args.background === true) return promise;
      var count = 0;
      function complete() {
        if (--count === 0 && typeof oncompletion === "function") oncompletion();
      }
      return wrap(promise);
      function wrap(promise) {
        var then = promise.then;
        // Set the constructor, so engines know to not await or resolve
        // this as a native promise. At the time of writing, this is
        // only necessary for V8, but their behavior is the correct
        // behavior per spec. See this spec issue for more details:
        // https://github.com/tc39/ecma262/issues/1577. Also, see the
        // corresponding comment in `request/tests/test-request.js` for
        // a bit more background on the issue at hand.
        promise.constructor = PromiseProxy;
        promise.then = function () {
          count++;
          var next = then.apply(promise, arguments);
          next.then(complete, function (e) {
            complete();
            if (count === 0) throw e;
          });
          return wrap(next);
        };
        return promise;
      }
    };
  }
  function hasHeader(args, name) {
    for (var key in args.headers) {
      if ({}.hasOwnProperty.call(args.headers, key) && name.test(key)) return true;
    }
    return false;
  }
  return {
    request: makeRequest(function (url, args, resolve, reject) {
      var method = args.method != null ? args.method.toUpperCase() : "GET";
      var body = args.body;
      var assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(body instanceof $window.FormData);
      var responseType = args.responseType || (typeof args.extract === "function" ? "" : "json");
      var xhr = new $window.XMLHttpRequest(),
        aborted = false;
      var original = xhr,
        replacedAbort;
      var abort = xhr.abort;
      xhr.abort = function () {
        aborted = true;
        abort.call(this);
      };
      xhr.open(method, url, args.async !== false, typeof args.user === "string" ? args.user : undefined, typeof args.password === "string" ? args.password : undefined);
      if (assumeJSON && body != null && !hasHeader(args, /^content-type$/i)) {
        xhr.setRequestHeader("Content-Type", "application/json; charset=utf-8");
      }
      if (typeof args.deserialize !== "function" && !hasHeader(args, /^accept$/i)) {
        xhr.setRequestHeader("Accept", "application/json, text/*");
      }
      if (args.withCredentials) xhr.withCredentials = args.withCredentials;
      if (args.timeout) xhr.timeout = args.timeout;
      xhr.responseType = responseType;
      for (var key in args.headers) {
        if ({}.hasOwnProperty.call(args.headers, key)) {
          xhr.setRequestHeader(key, args.headers[key]);
        }
      }
      xhr.onreadystatechange = function (ev) {
        // Don't throw errors on xhr.abort().
        if (aborted) return;
        if (ev.target.readyState === 4) {
          try {
            var success = ev.target.status >= 200 && ev.target.status < 300 || ev.target.status === 304 || /^file:\/\//i.test(url);
            // When the response type isn't "" or "text",
            // `xhr.responseText` is the wrong thing to use.
            // Browsers do the right thing and throw here, and we
            // should honor that and do the right thing by
            // preferring `xhr.response` where possible/practical.
            var response = ev.target.response,
              message;
            if (responseType === "json") {
              // For IE and Edge, which don't implement
              // `responseType: "json"`.
              if (!ev.target.responseType && typeof args.extract !== "function") response = JSON.parse(ev.target.responseText);
            } else if (!responseType || responseType === "text") {
              // Only use this default if it's text. If a parsed
              // document is needed on old IE and friends (all
              // unsupported), the user should use a custom
              // `config` instead. They're already using this at
              // their own risk.
              if (response == null) response = ev.target.responseText;
            }
            if (typeof args.extract === "function") {
              response = args.extract(ev.target, args);
              success = true;
            } else if (typeof args.deserialize === "function") {
              response = args.deserialize(response);
            }
            if (success) resolve(response);else {
              try {
                message = ev.target.responseText;
              } catch (e) {
                message = response;
              }
              var error = new Error(message);
              error.code = ev.target.status;
              error.response = response;
              reject(error);
            }
          } catch (e) {
            reject(e);
          }
        }
      };
      if (typeof args.config === "function") {
        xhr = args.config(xhr, args, url) || xhr;

        // Propagate the `abort` to any replacement XHR as well.
        if (xhr !== original) {
          replacedAbort = xhr.abort;
          xhr.abort = function () {
            aborted = true;
            replacedAbort.call(this);
          };
        }
      }
      if (body == null) xhr.send();else if (typeof args.serialize === "function") xhr.send(args.serialize(body));else if (body instanceof $window.FormData) xhr.send(body);else xhr.send(JSON.stringify(body));
    }),
    jsonp: makeRequest(function (url, args, resolve, reject) {
      var callbackName = args.callbackName || "_mithril_" + Math.round(Math.random() * 1e16) + "_" + callbackCount++;
      var script = $window.document.createElement("script");
      $window[callbackName] = function (data) {
        delete $window[callbackName];
        script.parentNode.removeChild(script);
        resolve(data);
      };
      script.onerror = function () {
        delete $window[callbackName];
        script.parentNode.removeChild(script);
        reject(new Error("JSONP request failed"));
      };
      script.src = url + (url.indexOf("?") < 0 ? "?" : "&") + encodeURIComponent(args.callbackKey || "callback") + "=" + encodeURIComponent(callbackName);
      $window.document.documentElement.appendChild(script);
    })
  };
};

/***/ }),

/***/ "../../../node_modules/mithril/route.js":
/*!**********************************************!*\
  !*** ../../../node_modules/mithril/route.js ***!
  \**********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var mountRedraw = __webpack_require__(/*! ./mount-redraw */ "../../../node_modules/mithril/mount-redraw.js");
module.exports = __webpack_require__(/*! ./api/router */ "../../../node_modules/mithril/api/router.js")(window, mountRedraw);

/***/ }),

/***/ "../../../node_modules/mithril/stream.js":
/*!***********************************************!*\
  !*** ../../../node_modules/mithril/stream.js ***!
  \***********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


module.exports = __webpack_require__(/*! ./stream/stream */ "../../../node_modules/mithril/stream/stream.js");

/***/ }),

/***/ "../../../node_modules/mithril/stream/stream.js":
/*!******************************************************!*\
  !*** ../../../node_modules/mithril/stream/stream.js ***!
  \******************************************************/
/***/ ((module) => {

/* eslint-disable */
;
(function () {
  "use strict";

  /* eslint-enable */
  Stream.SKIP = {};
  Stream.lift = lift;
  Stream.scan = scan;
  Stream.merge = merge;
  Stream.combine = combine;
  Stream.scanMerge = scanMerge;
  Stream["fantasy-land/of"] = Stream;
  var warnedHalt = false;
  Object.defineProperty(Stream, "HALT", {
    get: function get() {
      warnedHalt || console.log("HALT is deprecated and has been renamed to SKIP");
      warnedHalt = true;
      return Stream.SKIP;
    }
  });
  function Stream(value) {
    var dependentStreams = [];
    var dependentFns = [];
    function stream(v) {
      if (arguments.length && v !== Stream.SKIP) {
        value = v;
        if (open(stream)) {
          stream._changing();
          stream._state = "active";
          dependentStreams.forEach(function (s, i) {
            s(dependentFns[i](value));
          });
        }
      }
      return value;
    }
    stream.constructor = Stream;
    stream._state = arguments.length && value !== Stream.SKIP ? "active" : "pending";
    stream._parents = [];
    stream._changing = function () {
      if (open(stream)) stream._state = "changing";
      dependentStreams.forEach(function (s) {
        s._changing();
      });
    };
    stream._map = function (fn, ignoreInitial) {
      var target = ignoreInitial ? Stream() : Stream(fn(value));
      target._parents.push(stream);
      dependentStreams.push(target);
      dependentFns.push(fn);
      return target;
    };
    stream.map = function (fn) {
      return stream._map(fn, stream._state !== "active");
    };
    var end;
    function createEnd() {
      end = Stream();
      end.map(function (value) {
        if (value === true) {
          stream._parents.forEach(function (p) {
            p._unregisterChild(stream);
          });
          stream._state = "ended";
          stream._parents.length = dependentStreams.length = dependentFns.length = 0;
        }
        return value;
      });
      return end;
    }
    stream.toJSON = function () {
      return value != null && typeof value.toJSON === "function" ? value.toJSON() : value;
    };
    stream["fantasy-land/map"] = stream.map;
    stream["fantasy-land/ap"] = function (x) {
      return combine(function (s1, s2) {
        return s1()(s2());
      }, [x, stream]);
    };
    stream._unregisterChild = function (child) {
      var childIndex = dependentStreams.indexOf(child);
      if (childIndex !== -1) {
        dependentStreams.splice(childIndex, 1);
        dependentFns.splice(childIndex, 1);
      }
    };
    Object.defineProperty(stream, "end", {
      get: function get() {
        return end || createEnd();
      }
    });
    return stream;
  }
  function combine(fn, streams) {
    var ready = streams.every(function (s) {
      if (s.constructor !== Stream) throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream");
      return s._state === "active";
    });
    var stream = ready ? Stream(fn.apply(null, streams.concat([streams]))) : Stream();
    var changed = [];
    var mappers = streams.map(function (s) {
      return s._map(function (value) {
        changed.push(s);
        if (ready || streams.every(function (s) {
          return s._state !== "pending";
        })) {
          ready = true;
          stream(fn.apply(null, streams.concat([changed])));
          changed = [];
        }
        return value;
      }, true);
    });
    var endStream = stream.end.map(function (value) {
      if (value === true) {
        mappers.forEach(function (mapper) {
          mapper.end(true);
        });
        endStream.end(true);
      }
      return undefined;
    });
    return stream;
  }
  function merge(streams) {
    return combine(function () {
      return streams.map(function (s) {
        return s();
      });
    }, streams);
  }
  function scan(fn, acc, origin) {
    var stream = origin.map(function (v) {
      var next = fn(acc, v);
      if (next !== Stream.SKIP) acc = next;
      return next;
    });
    stream(acc);
    return stream;
  }
  function scanMerge(tuples, seed) {
    var streams = tuples.map(function (tuple) {
      return tuple[0];
    });
    var stream = combine(function () {
      var changed = arguments[arguments.length - 1];
      streams.forEach(function (stream, i) {
        if (changed.indexOf(stream) > -1) seed = tuples[i][1](seed, stream());
      });
      return seed;
    }, streams);
    stream(seed);
    return stream;
  }
  function lift() {
    var fn = arguments[0];
    var streams = Array.prototype.slice.call(arguments, 1);
    return merge(streams).map(function (streams) {
      return fn.apply(undefined, streams);
    });
  }
  function open(s) {
    return s._state === "pending" || s._state === "active" || s._state === "changing";
  }
  if (true) module["exports"] = Stream;else {}
})();

/***/ }),

/***/ "../../../node_modules/tabbable/dist/index.esm.js":
/*!********************************************************!*\
  !*** ../../../node_modules/tabbable/dist/index.esm.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "focusable": () => (/* binding */ focusable),
/* harmony export */   "isFocusable": () => (/* binding */ isFocusable),
/* harmony export */   "isTabbable": () => (/* binding */ isTabbable),
/* harmony export */   "tabbable": () => (/* binding */ tabbable)
/* harmony export */ });
/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
var candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]:not(slot)', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable="false"])', 'details>summary:first-of-type', 'details'];
var candidateSelector = /* #__PURE__ */candidateSelectors.join(',');
var NoElement = typeof Element === 'undefined';
var matches = NoElement ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
var getRootNode = !NoElement && Element.prototype.getRootNode ? function (element) {
  return element.getRootNode();
} : function (element) {
  return element.ownerDocument;
};
/**
 * @param {Element} el container to check in
 * @param {boolean} includeContainer add container to check
 * @param {(node: Element) => boolean} filter filter candidates
 * @returns {Element[]}
 */

var getCandidates = function getCandidates(el, includeContainer, filter) {
  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));
  if (includeContainer && matches.call(el, candidateSelector)) {
    candidates.unshift(el);
  }
  candidates = candidates.filter(filter);
  return candidates;
};
/**
 * @callback GetShadowRoot
 * @param {Element} element to check for shadow root
 * @returns {ShadowRoot|boolean} ShadowRoot if available or boolean indicating if a shadowRoot is attached but not available.
 */

/**
 * @callback ShadowRootFilter
 * @param {Element} shadowHostNode the element which contains shadow content
 * @returns {boolean} true if a shadow root could potentially contain valid candidates.
 */

/**
 * @typedef {Object} CandidatesScope
 * @property {Element} scope contains inner candidates
 * @property {Element[]} candidates
 */

/**
 * @typedef {Object} IterativeOptions
 * @property {GetShadowRoot|boolean} getShadowRoot true if shadow support is enabled; falsy if not;
 *  if a function, implies shadow support is enabled and either returns the shadow root of an element
 *  or a boolean stating if it has an undisclosed shadow root
 * @property {(node: Element) => boolean} filter filter candidates
 * @property {boolean} flatten if true then result will flatten any CandidatesScope into the returned list
 * @property {ShadowRootFilter} shadowRootFilter filter shadow roots;
 */

/**
 * @param {Element[]} elements list of element containers to match candidates from
 * @param {boolean} includeContainer add container list to check
 * @param {IterativeOptions} options
 * @returns {Array.<Element|CandidatesScope>}
 */

var getCandidatesIteratively = function getCandidatesIteratively(elements, includeContainer, options) {
  var candidates = [];
  var elementsToCheck = Array.from(elements);
  while (elementsToCheck.length) {
    var element = elementsToCheck.shift();
    if (element.tagName === 'SLOT') {
      // add shadow dom slot scope (slot itself cannot be focusable)
      var assigned = element.assignedElements();
      var content = assigned.length ? assigned : element.children;
      var nestedCandidates = getCandidatesIteratively(content, true, options);
      if (options.flatten) {
        candidates.push.apply(candidates, nestedCandidates);
      } else {
        candidates.push({
          scope: element,
          candidates: nestedCandidates
        });
      }
    } else {
      // check candidate element
      var validCandidate = matches.call(element, candidateSelector);
      if (validCandidate && options.filter(element) && (includeContainer || !elements.includes(element))) {
        candidates.push(element);
      } // iterate over shadow content if possible

      var shadowRoot = element.shadowRoot ||
      // check for an undisclosed shadow
      typeof options.getShadowRoot === 'function' && options.getShadowRoot(element);
      var validShadowRoot = !options.shadowRootFilter || options.shadowRootFilter(element);
      if (shadowRoot && validShadowRoot) {
        // add shadow dom scope IIF a shadow root node was given; otherwise, an undisclosed
        //  shadow exists, so look at light dom children as fallback BUT create a scope for any
        //  child candidates found because they're likely slotted elements (elements that are
        //  children of the web component element (which has the shadow), in the light dom, but
        //  slotted somewhere _inside_ the undisclosed shadow) -- the scope is created below,
        //  _after_ we return from this recursive call
        var _nestedCandidates = getCandidatesIteratively(shadowRoot === true ? element.children : shadowRoot.children, true, options);
        if (options.flatten) {
          candidates.push.apply(candidates, _nestedCandidates);
        } else {
          candidates.push({
            scope: element,
            candidates: _nestedCandidates
          });
        }
      } else {
        // there's not shadow so just dig into the element's (light dom) children
        //  __without__ giving the element special scope treatment
        elementsToCheck.unshift.apply(elementsToCheck, element.children);
      }
    }
  }
  return candidates;
};
var getTabindex = function getTabindex(node, isScope) {
  if (node.tabIndex < 0) {
    // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default
    // `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,
    // yet they are still part of the regular tab order; in FF, they get a default
    // `tabIndex` of 0; since Chrome still puts those elements in the regular tab
    // order, consider their tab index to be 0.
    // Also browsers do not return `tabIndex` correctly for contentEditable nodes;
    // so if they don't have a tabindex attribute specifically set, assume it's 0.
    //
    // isScope is positive for custom element with shadow root or slot that by default
    // have tabIndex -1, but need to be sorted by document order in order for their
    // content to be inserted in the correct position
    if ((isScope || /^(AUDIO|VIDEO|DETAILS)$/.test(node.tagName) || node.isContentEditable) && isNaN(parseInt(node.getAttribute('tabindex'), 10))) {
      return 0;
    }
  }
  return node.tabIndex;
};
var sortOrderedTabbables = function sortOrderedTabbables(a, b) {
  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;
};
var isInput = function isInput(node) {
  return node.tagName === 'INPUT';
};
var isHiddenInput = function isHiddenInput(node) {
  return isInput(node) && node.type === 'hidden';
};
var isDetailsWithSummary = function isDetailsWithSummary(node) {
  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {
    return child.tagName === 'SUMMARY';
  });
  return r;
};
var getCheckedRadio = function getCheckedRadio(nodes, form) {
  for (var i = 0; i < nodes.length; i++) {
    if (nodes[i].checked && nodes[i].form === form) {
      return nodes[i];
    }
  }
};
var isTabbableRadio = function isTabbableRadio(node) {
  if (!node.name) {
    return true;
  }
  var radioScope = node.form || getRootNode(node);
  var queryRadios = function queryRadios(name) {
    return radioScope.querySelectorAll('input[type="radio"][name="' + name + '"]');
  };
  var radioSet;
  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {
    radioSet = queryRadios(window.CSS.escape(node.name));
  } else {
    try {
      radioSet = queryRadios(node.name);
    } catch (err) {
      // eslint-disable-next-line no-console
      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);
      return false;
    }
  }
  var checked = getCheckedRadio(radioSet, node.form);
  return !checked || checked === node;
};
var isRadio = function isRadio(node) {
  return isInput(node) && node.type === 'radio';
};
var isNonTabbableRadio = function isNonTabbableRadio(node) {
  return isRadio(node) && !isTabbableRadio(node);
};
var isZeroArea = function isZeroArea(node) {
  var _node$getBoundingClie = node.getBoundingClientRect(),
    width = _node$getBoundingClie.width,
    height = _node$getBoundingClie.height;
  return width === 0 && height === 0;
};
var isHidden = function isHidden(node, _ref) {
  var displayCheck = _ref.displayCheck,
    getShadowRoot = _ref.getShadowRoot;

  // NOTE: visibility will be `undefined` if node is detached from the document
  //  (see notes about this further down), which means we will consider it visible
  //  (this is legacy behavior from a very long way back)
  // NOTE: we check this regardless of `displayCheck="none"` because this is a
  //  _visibility_ check, not a _display_ check
  if (getComputedStyle(node).visibility === 'hidden') {
    return true;
  }
  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');
  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;
  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {
    return true;
  } // The root node is the shadow root if the node is in a shadow DOM; some document otherwise
  //  (but NOT _the_ document; see second 'If' comment below for more).
  // If rootNode is shadow root, it'll have a host, which is the element to which the shadow
  //  is attached, and the one we need to check if it's in the document or not (because the
  //  shadow, and all nodes it contains, is never considered in the document since shadows
  //  behave like self-contained DOMs; but if the shadow's HOST, which is part of the document,
  //  is hidden, or is not in the document itself but is detached, it will affect the shadow's
  //  visibility, including all the nodes it contains). The host could be any normal node,
  //  or a custom element (i.e. web component). Either way, that's the one that is considered
  //  part of the document, not the shadow root, nor any of its children (i.e. the node being
  //  tested).
  // If rootNode is not a shadow root, it won't have a host, and so rootNode should be the
  //  document (per the docs) and while it's a Document-type object, that document does not
  //  appear to be the same as the node's `ownerDocument` for some reason, so it's safer
  //  to ignore the rootNode at this point, and use `node.ownerDocument`. Otherwise,
  //  using `rootNode.contains(node)` will _always_ be true we'll get false-positives when
  //  node is actually detached.

  var nodeRootHost = getRootNode(node).host;
  var nodeIsAttached = (nodeRootHost === null || nodeRootHost === void 0 ? void 0 : nodeRootHost.ownerDocument.contains(nodeRootHost)) || node.ownerDocument.contains(node);
  if (!displayCheck || displayCheck === 'full') {
    if (typeof getShadowRoot === 'function') {
      // figure out if we should consider the node to be in an undisclosed shadow and use the
      //  'non-zero-area' fallback
      var originalNode = node;
      while (node) {
        var parentElement = node.parentElement;
        var rootNode = getRootNode(node);
        if (parentElement && !parentElement.shadowRoot && getShadowRoot(parentElement) === true // check if there's an undisclosed shadow
        ) {
          // node has an undisclosed shadow which means we can only treat it as a black box, so we
          //  fall back to a non-zero-area test
          return isZeroArea(node);
        } else if (node.assignedSlot) {
          // iterate up slot
          node = node.assignedSlot;
        } else if (!parentElement && rootNode !== node.ownerDocument) {
          // cross shadow boundary
          node = rootNode.host;
        } else {
          // iterate up normal dom
          node = parentElement;
        }
      }
      node = originalNode;
    } // else, `getShadowRoot` might be true, but all that does is enable shadow DOM support
    //  (i.e. it does not also presume that all nodes might have undisclosed shadows); or
    //  it might be a falsy value, which means shadow DOM support is disabled
    // Since we didn't find it sitting in an undisclosed shadow (or shadows are disabled)
    //  now we can just test to see if it would normally be visible or not, provided it's
    //  attached to the main document.
    // NOTE: We must consider case where node is inside a shadow DOM and given directly to
    //  `isTabbable()` or `isFocusable()` -- regardless of `getShadowRoot` option setting.

    if (nodeIsAttached) {
      // this works wherever the node is: if there's at least one client rect, it's
      //  somehow displayed; it also covers the CSS 'display: contents' case where the
      //  node itself is hidden in place of its contents; and there's no need to search
      //  up the hierarchy either
      return !node.getClientRects().length;
    } // Else, the node isn't attached to the document, which means the `getClientRects()`
    //  API will __always__ return zero rects (this can happen, for example, if React
    //  is used to render nodes onto a detached tree, as confirmed in this thread:
    //  https://github.com/facebook/react/issues/9117#issuecomment-284228870)
    //
    // It also means that even window.getComputedStyle(node).display will return `undefined`
    //  because styles are only computed for nodes that are in the document.
    //
    // NOTE: THIS HAS BEEN THE CASE FOR YEARS. It is not new, nor is it caused by tabbable
    //  somehow. Though it was never stated officially, anyone who has ever used tabbable
    //  APIs on nodes in detached containers has actually implicitly used tabbable in what
    //  was later (as of v5.2.0 on Apr 9, 2021) called `displayCheck="none"` mode -- essentially
    //  considering __everything__ to be visible because of the innability to determine styles.
  } else if (displayCheck === 'non-zero-area') {
    // NOTE: Even though this tests that the node's client rect is non-zero to determine
    //  whether it's displayed, and that a detached node will __always__ have a zero-area
    //  client rect, we don't special-case for whether the node is attached or not. In
    //  this mode, we do want to consider nodes that have a zero area to be hidden at all
    //  times, and that includes attached or not.
    return isZeroArea(node);
  } // visible, as far as we can tell, or per current `displayCheck` mode

  return false;
}; // form fields (nested) inside a disabled fieldset are not focusable/tabbable
//  unless they are in the _first_ <legend> element of the top-most disabled
//  fieldset

var isDisabledFromFieldset = function isDisabledFromFieldset(node) {
  if (/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(node.tagName)) {
    var parentNode = node.parentElement; // check if `node` is contained in a disabled <fieldset>

    while (parentNode) {
      if (parentNode.tagName === 'FIELDSET' && parentNode.disabled) {
        // look for the first <legend> among the children of the disabled <fieldset>
        for (var i = 0; i < parentNode.children.length; i++) {
          var child = parentNode.children.item(i); // when the first <legend> (in document order) is found

          if (child.tagName === 'LEGEND') {
            // if its parent <fieldset> is not nested in another disabled <fieldset>,
            // return whether `node` is a descendant of its first <legend>
            return matches.call(parentNode, 'fieldset[disabled] *') ? true : !child.contains(node);
          }
        } // the disabled <fieldset> containing `node` has no <legend>

        return true;
      }
      parentNode = parentNode.parentElement;
    }
  } // else, node's tabbable/focusable state should not be affected by a fieldset's
  //  enabled/disabled state

  return false;
};
var isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(options, node) {
  if (node.disabled || isHiddenInput(node) || isHidden(node, options) ||
  // For a details element with a summary, the summary element gets the focus
  isDetailsWithSummary(node) || isDisabledFromFieldset(node)) {
    return false;
  }
  return true;
};
var isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(options, node) {
  if (isNonTabbableRadio(node) || getTabindex(node) < 0 || !isNodeMatchingSelectorFocusable(options, node)) {
    return false;
  }
  return true;
};
var isValidShadowRootTabbable = function isValidShadowRootTabbable(shadowHostNode) {
  var tabIndex = parseInt(shadowHostNode.getAttribute('tabindex'), 10);
  if (isNaN(tabIndex) || tabIndex >= 0) {
    return true;
  } // If a custom element has an explicit negative tabindex,
  // browsers will not allow tab targeting said element's children.

  return false;
};
/**
 * @param {Array.<Element|CandidatesScope>} candidates
 * @returns Element[]
 */

var sortByOrder = function sortByOrder(candidates) {
  var regularTabbables = [];
  var orderedTabbables = [];
  candidates.forEach(function (item, i) {
    var isScope = !!item.scope;
    var element = isScope ? item.scope : item;
    var candidateTabindex = getTabindex(element, isScope);
    var elements = isScope ? sortByOrder(item.candidates) : element;
    if (candidateTabindex === 0) {
      isScope ? regularTabbables.push.apply(regularTabbables, elements) : regularTabbables.push(element);
    } else {
      orderedTabbables.push({
        documentOrder: i,
        tabIndex: candidateTabindex,
        item: item,
        isScope: isScope,
        content: elements
      });
    }
  });
  return orderedTabbables.sort(sortOrderedTabbables).reduce(function (acc, sortable) {
    sortable.isScope ? acc.push.apply(acc, sortable.content) : acc.push(sortable.content);
    return acc;
  }, []).concat(regularTabbables);
};
var tabbable = function tabbable(el, options) {
  options = options || {};
  var candidates;
  if (options.getShadowRoot) {
    candidates = getCandidatesIteratively([el], options.includeContainer, {
      filter: isNodeMatchingSelectorTabbable.bind(null, options),
      flatten: false,
      getShadowRoot: options.getShadowRoot,
      shadowRootFilter: isValidShadowRootTabbable
    });
  } else {
    candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable.bind(null, options));
  }
  return sortByOrder(candidates);
};
var focusable = function focusable(el, options) {
  options = options || {};
  var candidates;
  if (options.getShadowRoot) {
    candidates = getCandidatesIteratively([el], options.includeContainer, {
      filter: isNodeMatchingSelectorFocusable.bind(null, options),
      flatten: true,
      getShadowRoot: options.getShadowRoot
    });
  } else {
    candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable.bind(null, options));
  }
  return candidates;
};
var isTabbable = function isTabbable(node, options) {
  options = options || {};
  if (!node) {
    throw new Error('No node provided');
  }
  if (matches.call(node, candidateSelector) === false) {
    return false;
  }
  return isNodeMatchingSelectorTabbable(options, node);
};
var focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');
var isFocusable = function isFocusable(node, options) {
  options = options || {};
  if (!node) {
    throw new Error('No node provided');
  }
  if (matches.call(node, focusableCandidateSelector) === false) {
    return false;
  }
  return isNodeMatchingSelectorFocusable(options, node);
};


/***/ }),

/***/ "../../../node_modules/textarea-caret/index.js":
/*!*****************************************************!*\
  !*** ../../../node_modules/textarea-caret/index.js ***!
  \*****************************************************/
/***/ ((module) => {

/* jshint browser: true */

(function () {
  // We'll copy the properties below into the mirror div.
  // Note that some browsers, such as Firefox, do not concatenate properties
  // into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),
  // so we have to list every single property explicitly.
  var properties = ['direction',
  // RTL support
  'boxSizing', 'width',
  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does
  'height', 'overflowX', 'overflowY',
  // copy the scrollbar for IE

  'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'borderStyle', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft',
  // https://developer.mozilla.org/en-US/docs/Web/CSS/font
  'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration',
  // might not make a difference, but better be safe

  'letterSpacing', 'wordSpacing', 'tabSize', 'MozTabSize'];
  var isBrowser = typeof window !== 'undefined';
  var isFirefox = isBrowser && window.mozInnerScreenX != null;
  function getCaretCoordinates(element, position, options) {
    if (!isBrowser) {
      throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');
    }
    var debug = options && options.debug || false;
    if (debug) {
      var el = document.querySelector('#input-textarea-caret-position-mirror-div');
      if (el) el.parentNode.removeChild(el);
    }

    // The mirror div will replicate the textarea's style
    var div = document.createElement('div');
    div.id = 'input-textarea-caret-position-mirror-div';
    document.body.appendChild(div);
    var style = div.style;
    var computed = window.getComputedStyle ? window.getComputedStyle(element) : element.currentStyle; // currentStyle for IE < 9
    var isInput = element.nodeName === 'INPUT';

    // Default textarea styles
    style.whiteSpace = 'pre-wrap';
    if (!isInput) style.wordWrap = 'break-word'; // only for textarea-s

    // Position off-screen
    style.position = 'absolute'; // required to return coordinates properly
    if (!debug) style.visibility = 'hidden'; // not 'display: none' because we want rendering

    // Transfer the element's properties to the div
    properties.forEach(function (prop) {
      if (isInput && prop === 'lineHeight') {
        // Special case for <input>s because text is rendered centered and line height may be != height
        style.lineHeight = computed.height;
      } else {
        style[prop] = computed[prop];
      }
    });
    if (isFirefox) {
      // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275
      if (element.scrollHeight > parseInt(computed.height)) style.overflowY = 'scroll';
    } else {
      style.overflow = 'hidden'; // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'
    }

    div.textContent = element.value.substring(0, position);
    // The second special handling for input type="text" vs textarea:
    // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037
    if (isInput) div.textContent = div.textContent.replace(/\s/g, "\xA0");
    var span = document.createElement('span');
    // Wrapping must be replicated *exactly*, including when a long word gets
    // onto the next line, with whitespace at the end of the line before (#7).
    // The  *only* reliable way to do that is to copy the *entire* rest of the
    // textarea's content into the <span> created at the caret position.
    // For inputs, just '.' would be enough, but no need to bother.
    span.textContent = element.value.substring(position) || '.'; // || because a completely empty faux span doesn't render at all
    div.appendChild(span);
    var coordinates = {
      top: span.offsetTop + parseInt(computed['borderTopWidth']),
      left: span.offsetLeft + parseInt(computed['borderLeftWidth']),
      height: parseInt(computed['lineHeight'])
    };
    if (debug) {
      span.style.backgroundColor = '#aaa';
    } else {
      document.body.removeChild(div);
    }
    return coordinates;
  }
  if ( true && typeof module.exports != 'undefined') {
    module.exports = getCaretCoordinates;
  } else if (isBrowser) {
    window.getCaretCoordinates = getCaretCoordinates;
  }
})();

/***/ }),

/***/ "../../../node_modules/expose-loader/dist/cjs.js?exposes=$,jQuery!../../../node_modules/jquery/dist/jquery-exposed.js":
/*!****************************************************************************************************************************!*\
  !*** ../../../node_modules/expose-loader/dist/cjs.js?exposes=$,jQuery!../../../node_modules/jquery/dist/jquery-exposed.js ***!
  \****************************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!../../babel-loader/lib/index.js??ruleSet[1].rules[0]!./jquery.js */ "../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/jquery/dist/jquery.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../../expose-loader/dist/runtime/getGlobalThis.js */ "../../../node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["$"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["$"] = ___EXPOSE_LOADER_IMPORT___;
else throw new Error('[exposes-loader] The "$" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["jQuery"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["jQuery"] = ___EXPOSE_LOADER_IMPORT___;
else throw new Error('[exposes-loader] The "jQuery" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "../../../node_modules/expose-loader/dist/cjs.js?exposes=dayjs!../../../node_modules/dayjs/dayjs.min-exposed.js":
/*!**********************************************************************************************************************!*\
  !*** ../../../node_modules/expose-loader/dist/cjs.js?exposes=dayjs!../../../node_modules/dayjs/dayjs.min-exposed.js ***!
  \**********************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!../babel-loader/lib/index.js??ruleSet[1].rules[0]!./dayjs.min.js */ "../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/dayjs/dayjs.min.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../expose-loader/dist/runtime/getGlobalThis.js */ "../../../node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["dayjs"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["dayjs"] = ___EXPOSE_LOADER_IMPORT___;
else throw new Error('[exposes-loader] The "dayjs" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "../../../node_modules/expose-loader/dist/cjs.js?exposes=m!../../../node_modules/mithril/index-exposed.js":
/*!****************************************************************************************************************!*\
  !*** ../../../node_modules/expose-loader/dist/cjs.js?exposes=m!../../../node_modules/mithril/index-exposed.js ***!
  \****************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var ___EXPOSE_LOADER_IMPORT___ = __webpack_require__(/*! -!../babel-loader/lib/index.js??ruleSet[1].rules[0]!./index.js */ "../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[0]!../../../node_modules/mithril/index.js");
var ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = __webpack_require__(/*! ../expose-loader/dist/runtime/getGlobalThis.js */ "../../../node_modules/expose-loader/dist/runtime/getGlobalThis.js");
var ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;
if (typeof ___EXPOSE_LOADER_GLOBAL_THIS___["m"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___["m"] = ___EXPOSE_LOADER_IMPORT___;
else throw new Error('[exposes-loader] The "m" value exists in the global scope, it may not be safe to overwrite it, use the "override" option')
module.exports = ___EXPOSE_LOADER_IMPORT___;


/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/arrayLikeToArray.js":
/*!************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/arrayLikeToArray.js ***!
  \************************************************************************/
/***/ ((module) => {

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }
  return arr2;
}
module.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/arrayWithHoles.js":
/*!**********************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/arrayWithHoles.js ***!
  \**********************************************************************/
/***/ ((module) => {

function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}
module.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js":
/*!*****************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js ***!
  \*****************************************************************************/
/***/ ((module) => {

function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self;
}
module.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/classCallCheck.js":
/*!**********************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/classCallCheck.js ***!
  \**********************************************************************/
/***/ ((module) => {

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
module.exports = _classCallCheck, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/createClass.js":
/*!*******************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/createClass.js ***!
  \*******************************************************************/
/***/ ((module) => {

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}
module.exports = _createClass, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/defineProperty.js":
/*!**********************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/defineProperty.js ***!
  \**********************************************************************/
/***/ ((module) => {

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
module.exports = _defineProperty, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js":
/*!**********************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js ***!
  \**********************************************************************/
/***/ ((module) => {

function _getPrototypeOf(o) {
  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  }, module.exports.__esModule = true, module.exports["default"] = module.exports;
  return _getPrototypeOf(o);
}
module.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/inherits.js":
/*!****************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/inherits.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var setPrototypeOf = __webpack_require__(/*! ./setPrototypeOf.js */ "../../../node_modules/@babel/runtime/helpers/setPrototypeOf.js");
function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }
  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  Object.defineProperty(subClass, "prototype", {
    writable: false
  });
  if (superClass) setPrototypeOf(subClass, superClass);
}
module.exports = _inherits, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":
/*!****************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js ***!
  \****************************************************************************/
/***/ ((module) => {

function _iterableToArrayLimit(arr, i) {
  var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"];
  if (_i == null) return;
  var _arr = [];
  var _n = true;
  var _d = false;
  var _s, _e;
  try {
    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);
      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }
  return _arr;
}
module.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/nonIterableRest.js":
/*!***********************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/nonIterableRest.js ***!
  \***********************************************************************/
/***/ ((module) => {

function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
module.exports = _nonIterableRest, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":
/*!*********************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js ***!
  \*********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var _typeof = (__webpack_require__(/*! ./typeof.js */ "../../../node_modules/@babel/runtime/helpers/typeof.js")["default"]);
var assertThisInitialized = __webpack_require__(/*! ./assertThisInitialized.js */ "../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js");
function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  } else if (call !== void 0) {
    throw new TypeError("Derived constructors may only return object or undefined");
  }
  return assertThisInitialized(self);
}
module.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/regeneratorRuntime.js":
/*!**************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/regeneratorRuntime.js ***!
  \**************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var _typeof = (__webpack_require__(/*! ./typeof.js */ "../../../node_modules/@babel/runtime/helpers/typeof.js")["default"]);
function _regeneratorRuntime() {
  "use strict";

  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {
    return exports;
  }, module.exports.__esModule = true, module.exports["default"] = module.exports;
  var exports = {},
    Op = Object.prototype,
    hasOwn = Op.hasOwnProperty,
    defineProperty = Object.defineProperty || function (obj, key, desc) {
      obj[key] = desc.value;
    },
    $Symbol = "function" == typeof Symbol ? Symbol : {},
    iteratorSymbol = $Symbol.iterator || "@@iterator",
    asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator",
    toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";
  function define(obj, key, value) {
    return Object.defineProperty(obj, key, {
      value: value,
      enumerable: !0,
      configurable: !0,
      writable: !0
    }), obj[key];
  }
  try {
    define({}, "");
  } catch (err) {
    define = function define(obj, key, value) {
      return obj[key] = value;
    };
  }
  function wrap(innerFn, outerFn, self, tryLocsList) {
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,
      generator = Object.create(protoGenerator.prototype),
      context = new Context(tryLocsList || []);
    return defineProperty(generator, "_invoke", {
      value: makeInvokeMethod(innerFn, self, context)
    }), generator;
  }
  function tryCatch(fn, obj, arg) {
    try {
      return {
        type: "normal",
        arg: fn.call(obj, arg)
      };
    } catch (err) {
      return {
        type: "throw",
        arg: err
      };
    }
  }
  exports.wrap = wrap;
  var ContinueSentinel = {};
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}
  var IteratorPrototype = {};
  define(IteratorPrototype, iteratorSymbol, function () {
    return this;
  });
  var getProto = Object.getPrototypeOf,
    NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);
  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function (method) {
      define(prototype, method, function (arg) {
        return this._invoke(method, arg);
      });
    });
  }
  function AsyncIterator(generator, PromiseImpl) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if ("throw" !== record.type) {
        var result = record.arg,
          value = result.value;
        return value && "object" == _typeof(value) && hasOwn.call(value, "__await") ? PromiseImpl.resolve(value.__await).then(function (value) {
          invoke("next", value, resolve, reject);
        }, function (err) {
          invoke("throw", err, resolve, reject);
        }) : PromiseImpl.resolve(value).then(function (unwrapped) {
          result.value = unwrapped, resolve(result);
        }, function (error) {
          return invoke("throw", error, resolve, reject);
        });
      }
      reject(record.arg);
    }
    var previousPromise;
    defineProperty(this, "_invoke", {
      value: function value(method, arg) {
        function callInvokeWithMethodAndArg() {
          return new PromiseImpl(function (resolve, reject) {
            invoke(method, arg, resolve, reject);
          });
        }
        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();
      }
    });
  }
  function makeInvokeMethod(innerFn, self, context) {
    var state = "suspendedStart";
    return function (method, arg) {
      if ("executing" === state) throw new Error("Generator is already running");
      if ("completed" === state) {
        if ("throw" === method) throw arg;
        return doneResult();
      }
      for (context.method = method, context.arg = arg;;) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }
        if ("next" === context.method) context.sent = context._sent = context.arg;else if ("throw" === context.method) {
          if ("suspendedStart" === state) throw state = "completed", context.arg;
          context.dispatchException(context.arg);
        } else "return" === context.method && context.abrupt("return", context.arg);
        state = "executing";
        var record = tryCatch(innerFn, self, context);
        if ("normal" === record.type) {
          if (state = context.done ? "completed" : "suspendedYield", record.arg === ContinueSentinel) continue;
          return {
            value: record.arg,
            done: context.done
          };
        }
        "throw" === record.type && (state = "completed", context.method = "throw", context.arg = record.arg);
      }
    };
  }
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (undefined === method) {
      if (context.delegate = null, "throw" === context.method) {
        if (delegate.iterator["return"] && (context.method = "return", context.arg = undefined, maybeInvokeDelegate(delegate, context), "throw" === context.method)) return ContinueSentinel;
        context.method = "throw", context.arg = new TypeError("The iterator does not provide a 'throw' method");
      }
      return ContinueSentinel;
    }
    var record = tryCatch(method, delegate.iterator, context.arg);
    if ("throw" === record.type) return context.method = "throw", context.arg = record.arg, context.delegate = null, ContinueSentinel;
    var info = record.arg;
    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, "return" !== context.method && (context.method = "next", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = "throw", context.arg = new TypeError("iterator result is not an object"), context.delegate = null, ContinueSentinel);
  }
  function pushTryEntry(locs) {
    var entry = {
      tryLoc: locs[0]
    };
    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);
  }
  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal", delete record.arg, entry.completion = record;
  }
  function Context(tryLocsList) {
    this.tryEntries = [{
      tryLoc: "root"
    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);
  }
  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) return iteratorMethod.call(iterable);
      if ("function" == typeof iterable.next) return iterable;
      if (!isNaN(iterable.length)) {
        var i = -1,
          next = function next() {
            for (; ++i < iterable.length;) {
              if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;
            }
            return next.value = undefined, next.done = !0, next;
          };
        return next.next = next;
      }
    }
    return {
      next: doneResult
    };
  }
  function doneResult() {
    return {
      value: undefined,
      done: !0
    };
  }
  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, "constructor", {
    value: GeneratorFunctionPrototype,
    configurable: !0
  }), defineProperty(GeneratorFunctionPrototype, "constructor", {
    value: GeneratorFunction,
    configurable: !0
  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, "GeneratorFunction"), exports.isGeneratorFunction = function (genFun) {
    var ctor = "function" == typeof genFun && genFun.constructor;
    return !!ctor && (ctor === GeneratorFunction || "GeneratorFunction" === (ctor.displayName || ctor.name));
  }, exports.mark = function (genFun) {
    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, "GeneratorFunction")), genFun.prototype = Object.create(Gp), genFun;
  }, exports.awrap = function (arg) {
    return {
      __await: arg
    };
  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {
    return this;
  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {
    void 0 === PromiseImpl && (PromiseImpl = Promise);
    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);
    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {
      return result.done ? result.value : iter.next();
    });
  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, "Generator"), define(Gp, iteratorSymbol, function () {
    return this;
  }), define(Gp, "toString", function () {
    return "[object Generator]";
  }), exports.keys = function (val) {
    var object = Object(val),
      keys = [];
    for (var key in object) {
      keys.push(key);
    }
    return keys.reverse(), function next() {
      for (; keys.length;) {
        var key = keys.pop();
        if (key in object) return next.value = key, next.done = !1, next;
      }
      return next.done = !0, next;
    };
  }, exports.values = values, Context.prototype = {
    constructor: Context,
    reset: function reset(skipTempReset) {
      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = "next", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {
        "t" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);
      }
    },
    stop: function stop() {
      this.done = !0;
      var rootRecord = this.tryEntries[0].completion;
      if ("throw" === rootRecord.type) throw rootRecord.arg;
      return this.rval;
    },
    dispatchException: function dispatchException(exception) {
      if (this.done) throw exception;
      var context = this;
      function handle(loc, caught) {
        return record.type = "throw", record.arg = exception, context.next = loc, caught && (context.method = "next", context.arg = undefined), !!caught;
      }
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i],
          record = entry.completion;
        if ("root" === entry.tryLoc) return handle("end");
        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc"),
            hasFinally = hasOwn.call(entry, "finallyLoc");
          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);
            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);
          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);
          } else {
            if (!hasFinally) throw new Error("try statement without catch or finally");
            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);
          }
        }
      }
    },
    abrupt: function abrupt(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }
      finallyEntry && ("break" === type || "continue" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);
      var record = finallyEntry ? finallyEntry.completion : {};
      return record.type = type, record.arg = arg, finallyEntry ? (this.method = "next", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);
    },
    complete: function complete(record, afterLoc) {
      if ("throw" === record.type) throw record.arg;
      return "break" === record.type || "continue" === record.type ? this.next = record.arg : "return" === record.type ? (this.rval = this.arg = record.arg, this.method = "return", this.next = "end") : "normal" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;
    },
    finish: function finish(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;
      }
    },
    "catch": function _catch(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if ("throw" === record.type) {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }
      throw new Error("illegal catch attempt");
    },
    delegateYield: function delegateYield(iterable, resultName, nextLoc) {
      return this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      }, "next" === this.method && (this.arg = undefined), ContinueSentinel;
    }
  }, exports;
}
module.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/setPrototypeOf.js":
/*!**********************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/setPrototypeOf.js ***!
  \**********************************************************************/
/***/ ((module) => {

function _setPrototypeOf(o, p) {
  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  }, module.exports.__esModule = true, module.exports["default"] = module.exports;
  return _setPrototypeOf(o, p);
}
module.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/slicedToArray.js":
/*!*********************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/slicedToArray.js ***!
  \*********************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var arrayWithHoles = __webpack_require__(/*! ./arrayWithHoles.js */ "../../../node_modules/@babel/runtime/helpers/arrayWithHoles.js");
var iterableToArrayLimit = __webpack_require__(/*! ./iterableToArrayLimit.js */ "../../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js");
var unsupportedIterableToArray = __webpack_require__(/*! ./unsupportedIterableToArray.js */ "../../../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js");
var nonIterableRest = __webpack_require__(/*! ./nonIterableRest.js */ "../../../node_modules/@babel/runtime/helpers/nonIterableRest.js");
function _slicedToArray(arr, i) {
  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();
}
module.exports = _slicedToArray, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/typeof.js":
/*!**************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/typeof.js ***!
  \**************************************************************/
/***/ ((module) => {

function _typeof(obj) {
  "@babel/helpers - typeof";

  return (module.exports = _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
  }, module.exports.__esModule = true, module.exports["default"] = module.exports), _typeof(obj);
}
module.exports = _typeof, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":
/*!**********************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var arrayLikeToArray = __webpack_require__(/*! ./arrayLikeToArray.js */ "../../../node_modules/@babel/runtime/helpers/arrayLikeToArray.js");
function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);
}
module.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports["default"] = module.exports;

/***/ }),

/***/ "../../../node_modules/@babel/runtime/regenerator/index.js":
/*!*****************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/regenerator/index.js ***!
  \*****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

// TODO(Babel 8): Remove this file.

var runtime = __webpack_require__(/*! ../helpers/regeneratorRuntime */ "../../../node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();
module.exports = runtime;

// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=
try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  if (typeof globalThis === "object") {
    globalThis.regeneratorRuntime = runtime;
  } else {
    Function("r", "regeneratorRuntime = r")(runtime);
  }
}

/***/ }),

/***/ "./src/admin/components/AdminHeader.js":
/*!*********************************************!*\
  !*** ./src/admin/components/AdminHeader.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AdminHeader)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _common_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Component */ "./src/common/Component.ts");
/* harmony import */ var _common_utils_classList__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/utils/classList */ "./src/common/utils/classList.ts");
/* harmony import */ var _common_helpers_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/helpers/icon */ "./src/common/helpers/icon.tsx");




var AdminHeader = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(AdminHeader, _Component);
  function AdminHeader() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = AdminHeader.prototype;
  _proto.view = function view(vnode) {
    return [m("div", {
      className: (0,_common_utils_classList__WEBPACK_IMPORTED_MODULE_2__["default"])(['AdminHeader', this.attrs.className])
    }, m("div", {
      className: "container"
    }, m("h2", null, (0,_common_helpers_icon__WEBPACK_IMPORTED_MODULE_3__["default"])(this.attrs.icon), vnode.children), m("div", {
      className: "AdminHeader-description"
    }, this.attrs.description)))];
  };
  return AdminHeader;
}(_common_Component__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/admin/components/AdminNav.js":
/*!******************************************!*\
  !*** ./src/admin/components/AdminNav.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ AdminNav)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _ExtensionLinkButton__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ExtensionLinkButton */ "./src/admin/components/ExtensionLinkButton.js");
/* harmony import */ var _common_Component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/Component */ "./src/common/Component.ts");
/* harmony import */ var _common_components_LinkButton__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/components/LinkButton */ "./src/common/components/LinkButton.js");
/* harmony import */ var _common_components_SelectDropdown__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/components/SelectDropdown */ "./src/common/components/SelectDropdown.tsx");
/* harmony import */ var _utils_getCategorizedExtensions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/getCategorizedExtensions */ "./src/admin/utils/getCategorizedExtensions.js");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _common_utils_Stream__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/utils/Stream */ "./src/common/utils/Stream.ts");









var AdminNav = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(AdminNav, _Component);
  function AdminNav() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = AdminNav.prototype;
  _proto.oninit = function oninit(vnode) {
    _Component.prototype.oninit.call(this, vnode);
    this.query = (0,_common_utils_Stream__WEBPACK_IMPORTED_MODULE_8__["default"])('');
  };
  _proto.view = function view() {
    return m(_common_components_SelectDropdown__WEBPACK_IMPORTED_MODULE_5__["default"], {
      className: "AdminNav App-titleControl AdminNav-Main",
      buttonClassName: "Button"
    }, this.items().toArray().concat(this.extensionItems().toArray()));
  };
  _proto.oncreate = function oncreate(vnode) {
    _Component.prototype.oncreate.call(this, vnode);
    this.scrollToActive();
  };
  _proto.onupdate = function onupdate(vnode) {
    _Component.prototype.onupdate.call(this, vnode);
    this.scrollToActive();
  };
  _proto.scrollToActive = function scrollToActive() {
    var children = $('.Dropdown-menu').children('.active');
    var nav = $('#admin-navigation');
    var time = _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].previous.type ? 250 : 0;
    if (children.length > 0 && (children[0].offsetTop > nav.scrollTop() + nav.outerHeight() || children[0].offsetTop + children[0].offsetHeight < nav.scrollTop())) {
      nav.animate({
        scrollTop: children[0].offsetTop - nav.height() / 2
      }, time);
    }
  }

  /**
   * Build an item list of main links to show in the admin navigation.
   *
   * @return {ItemList<import('mithril').Children>}
   */;
  _proto.items = function items() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_7__["default"]();
    items.add('category-core', m("h4", {
      className: "ExtensionListTitle"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.categories.core')), 120);
    items.add('dashboard', m(_common_components_LinkButton__WEBPACK_IMPORTED_MODULE_4__["default"], {
      href: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].route('dashboard'),
      icon: "far fa-chart-bar",
      title: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.dashboard_title')
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.dashboard_button')), 100);
    items.add('basics', m(_common_components_LinkButton__WEBPACK_IMPORTED_MODULE_4__["default"], {
      href: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].route('basics'),
      icon: "fas fa-pencil-alt",
      title: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.basics_title')
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.basics_button')), 90);
    items.add('mail', m(_common_components_LinkButton__WEBPACK_IMPORTED_MODULE_4__["default"], {
      href: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].route('mail'),
      icon: "fas fa-envelope",
      title: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.email_title')
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.email_button')), 80);
    items.add('permissions', m(_common_components_LinkButton__WEBPACK_IMPORTED_MODULE_4__["default"], {
      href: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].route('permissions'),
      icon: "fas fa-key",
      title: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.permissions_title')
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.permissions_button')), 70);
    items.add('appearance', m(_common_components_LinkButton__WEBPACK_IMPORTED_MODULE_4__["default"], {
      href: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].route('appearance'),
      icon: "fas fa-paint-brush",
      title: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.appearance_title')
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.appearance_button')), 60);
    items.add('userList', m(_common_components_LinkButton__WEBPACK_IMPORTED_MODULE_4__["default"], {
      href: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].route('users'),
      icon: "fas fa-users",
      title: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.userlist_title')
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.userlist_button')), 50);
    items.add('search', m("div", {
      className: "Search-input"
    }, m("input", {
      className: "FormControl SearchBar",
      bidi: this.query,
      type: "search",
      placeholder: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.nav.search_placeholder')
    })), 0);
    return items;
  };
  _proto.extensionItems = function extensionItems() {
    var _this = this;
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_7__["default"]();
    var categorizedExtensions = (0,_utils_getCategorizedExtensions__WEBPACK_IMPORTED_MODULE_6__["default"])();
    var categories = _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionCategories;
    Object.keys(categorizedExtensions).map(function (category) {
      if (!_this.query()) {
        items.add("category-" + category, m("h4", {
          className: "ExtensionListTitle"
        }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans("core.admin.nav.categories." + category)), categories[category]);
      }
      categorizedExtensions[category].map(function (extension) {
        var query = _this.query().toUpperCase();
        var title = extension.extra['flarum-extension'].title || '';
        var description = extension.description || '';
        if (!query || title.toUpperCase().includes(query) || description.toUpperCase().includes(query)) {
          items.add("extension-" + extension.id, m(_ExtensionLinkButton__WEBPACK_IMPORTED_MODULE_2__["default"], {
            href: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].route('extension', {
              id: extension.id
            }),
            extensionId: extension.id,
            className: "ExtensionNavButton",
            title: description
          }, title), categories[category]);
        }
      });
    });
    return items;
  };
  return AdminNav;
}(_common_Component__WEBPACK_IMPORTED_MODULE_3__["default"]);


/***/ }),

/***/ "./src/admin/components/ExtensionLinkButton.js":
/*!*****************************************************!*\
  !*** ./src/admin/components/ExtensionLinkButton.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ExtensionLinkButton)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _utils_isExtensionEnabled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/isExtensionEnabled */ "./src/admin/utils/isExtensionEnabled.js");
/* harmony import */ var _common_components_LinkButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/LinkButton */ "./src/common/components/LinkButton.js");
/* harmony import */ var _common_helpers_icon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");






var ExtensionLinkButton = /*#__PURE__*/function (_LinkButton) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(ExtensionLinkButton, _LinkButton);
  function ExtensionLinkButton() {
    return _LinkButton.apply(this, arguments) || this;
  }
  var _proto = ExtensionLinkButton.prototype;
  _proto.getButtonContent = function getButtonContent(children) {
    var content = _LinkButton.prototype.getButtonContent.call(this, children);
    var extension = _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.extensions[this.attrs.extensionId];
    var statuses = this.statusItems(extension.id).toArray();
    content.unshift(m("span", {
      className: "ExtensionListItem-icon ExtensionIcon",
      style: extension.icon
    }, !!extension.icon && (0,_common_helpers_icon__WEBPACK_IMPORTED_MODULE_4__["default"])(extension.icon.name)));
    content.push(statuses);
    return content;
  };
  _proto.statusItems = function statusItems(name) {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_5__["default"]();
    items.add('enabled', m("span", {
      className: 'ExtensionListItem-Dot ' + ((0,_utils_isExtensionEnabled__WEBPACK_IMPORTED_MODULE_2__["default"])(name) ? 'enabled' : 'disabled')
    }));
    return items;
  };
  return ExtensionLinkButton;
}(_common_components_LinkButton__WEBPACK_IMPORTED_MODULE_3__["default"]);


/***/ }),

/***/ "./src/admin/components/ExtensionsWidget.js":
/*!**************************************************!*\
  !*** ./src/admin/components/ExtensionsWidget.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ExtensionsWidget)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _DashboardWidget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DashboardWidget */ "./src/admin/components/DashboardWidget.tsx");
/* harmony import */ var _utils_isExtensionEnabled__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/isExtensionEnabled */ "./src/admin/utils/isExtensionEnabled.js");
/* harmony import */ var _utils_getCategorizedExtensions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/getCategorizedExtensions */ "./src/admin/utils/getCategorizedExtensions.js");
/* harmony import */ var _common_components_Link__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/components/Link */ "./src/common/components/Link.js");
/* harmony import */ var _common_helpers_icon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _common_utils_classList__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../common/utils/classList */ "./src/common/utils/classList.ts");








var ExtensionsWidget = /*#__PURE__*/function (_DashboardWidget) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(ExtensionsWidget, _DashboardWidget);
  function ExtensionsWidget() {
    return _DashboardWidget.apply(this, arguments) || this;
  }
  var _proto = ExtensionsWidget.prototype;
  _proto.oninit = function oninit(vnode) {
    _DashboardWidget.prototype.oninit.call(this, vnode);
    this.categorizedExtensions = (0,_utils_getCategorizedExtensions__WEBPACK_IMPORTED_MODULE_4__["default"])();
  };
  _proto.className = function className() {
    return 'ExtensionsWidget';
  };
  _proto.content = function content() {
    var _this = this;
    var categories = _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].extensionCategories;
    return m("div", {
      className: "ExtensionsWidget-list"
    }, Object.keys(categories).map(function (category) {
      return !!_this.categorizedExtensions[category] && _this.extensionCategory(category);
    }));
  };
  _proto.extensionCategory = function extensionCategory(category) {
    var _this2 = this;
    return m("div", {
      className: "ExtensionList-Category"
    }, m("h4", {
      className: "ExtensionList-Label"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans("core.admin.nav.categories." + category)), m("ul", {
      className: "ExtensionList"
    }, this.categorizedExtensions[category].map(function (extension) {
      return _this2.extensionWidget(extension);
    })));
  };
  _proto.extensionWidget = function extensionWidget(extension) {
    return m("li", {
      className: (0,_common_utils_classList__WEBPACK_IMPORTED_MODULE_7__["default"])('ExtensionListItem', {
        disabled: !(0,_utils_isExtensionEnabled__WEBPACK_IMPORTED_MODULE_3__["default"])(extension.id)
      })
    }, m(_common_components_Link__WEBPACK_IMPORTED_MODULE_5__["default"], {
      href: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].route('extension', {
        id: extension.id
      })
    }, m("div", {
      className: "ExtensionListItem-content"
    }, m("span", {
      className: "ExtensionListItem-icon ExtensionIcon",
      style: extension.icon
    }, !!extension.icon && (0,_common_helpers_icon__WEBPACK_IMPORTED_MODULE_6__["default"])(extension.icon.name)), m("span", {
      className: "ExtensionListItem-title"
    }, extension.extra['flarum-extension'].title))));
  };
  return ExtensionsWidget;
}(_DashboardWidget__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/admin/components/HeaderPrimary.js":
/*!***********************************************!*\
  !*** ./src/admin/components/HeaderPrimary.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ HeaderPrimary)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _common_Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Component */ "./src/common/Component.ts");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _common_helpers_listItems__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/helpers/listItems */ "./src/common/helpers/listItems.tsx");





/**
 * The `HeaderPrimary` component displays primary header controls. On the
 * default skin, these are shown just to the right of the forum title.
 */
var HeaderPrimary = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(HeaderPrimary, _Component);
  function HeaderPrimary() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = HeaderPrimary.prototype;
  _proto.view = function view() {
    return m("ul", {
      className: "Header-controls"
    }, (0,_common_helpers_listItems__WEBPACK_IMPORTED_MODULE_3__["default"])(this.items().toArray()));
  };
  _proto.config = function config(isInitialized, context) {
    // Since this component is 'above' the content of the page (that is, it is a
    // part of the global UI that persists between routes), we will flag the DOM
    // to be retained across route changes.
    context.retain = true;
  }

  /**
   * Build an item list for the controls.
   *
   * @return {ItemList<import('mithril').Children>}
   */;
  _proto.items = function items() {
    return new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_2__["default"]();
  };
  return HeaderPrimary;
}(_common_Component__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/admin/components/HeaderSecondary.js":
/*!*************************************************!*\
  !*** ./src/admin/components/HeaderSecondary.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ HeaderSecondary)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../common/Component */ "./src/common/Component.ts");
/* harmony import */ var _common_components_LinkButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/LinkButton */ "./src/common/components/LinkButton.js");
/* harmony import */ var _SessionDropdown__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SessionDropdown */ "./src/admin/components/SessionDropdown.tsx");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _common_helpers_listItems__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/helpers/listItems */ "./src/common/helpers/listItems.tsx");








/**
 * The `HeaderSecondary` component displays secondary header controls.
 */
var HeaderSecondary = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(HeaderSecondary, _Component);
  function HeaderSecondary() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = HeaderSecondary.prototype;
  _proto.view = function view() {
    return m("ul", {
      className: "Header-controls"
    }, (0,_common_helpers_listItems__WEBPACK_IMPORTED_MODULE_6__["default"])(this.items().toArray()));
  }

  /**
   * Build an item list for the controls.
   *
   * @return {ItemList<import('mithril').Children>}
   */;
  _proto.items = function items() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_5__["default"]();
    items.add('help', m(_common_components_LinkButton__WEBPACK_IMPORTED_MODULE_3__["default"], {
      href: "https://docs.flarum.org/troubleshoot/",
      icon: "fas fa-question-circle",
      external: true,
      target: "_blank"
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.header.get_help')));
    items.add('session', m(_SessionDropdown__WEBPACK_IMPORTED_MODULE_4__["default"], null));
    return items;
  };
  return HeaderSecondary;
}(_common_Component__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/admin/components/StatusWidget.js":
/*!**********************************************!*\
  !*** ./src/admin/components/StatusWidget.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ StatusWidget)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _DashboardWidget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DashboardWidget */ "./src/admin/components/DashboardWidget.tsx");
/* harmony import */ var _common_helpers_listItems__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/helpers/listItems */ "./src/common/helpers/listItems.tsx");
/* harmony import */ var _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _common_components_Dropdown__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../common/components/Dropdown */ "./src/common/components/Dropdown.tsx");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _LoadingModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./LoadingModal */ "./src/admin/components/LoadingModal.tsx");
/* harmony import */ var _common_components_LinkButton__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/components/LinkButton */ "./src/common/components/LinkButton.js");









var StatusWidget = /*#__PURE__*/function (_DashboardWidget) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(StatusWidget, _DashboardWidget);
  function StatusWidget() {
    return _DashboardWidget.apply(this, arguments) || this;
  }
  var _proto = StatusWidget.prototype;
  _proto.className = function className() {
    return 'StatusWidget';
  };
  _proto.content = function content() {
    return m("ul", null, (0,_common_helpers_listItems__WEBPACK_IMPORTED_MODULE_3__["default"])(this.items().toArray()));
  };
  _proto.items = function items() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
    items.add('tools', m(_common_components_Dropdown__WEBPACK_IMPORTED_MODULE_5__["default"], {
      label: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.dashboard.tools_button'),
      icon: "fas fa-cog",
      buttonClassName: "Button",
      menuClassName: "Dropdown-menu--right"
    }, this.toolsItems().toArray()));
    items.add('version-flarum', [m("strong", null, "Flarum"), m("br", null), _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].forum.attribute('version')], 100);
    items.add('version-php', [m("strong", null, "PHP"), m("br", null), _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.phpVersion], 90);
    items.add('version-mysql', [m("strong", null, "MySQL"), m("br", null), _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.mysqlVersion], 80);
    if (_admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.schedulerStatus) {
      items.add('schedule-status', [m("span", null, m("strong", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.dashboard.status.headers.scheduler-status')), ' ', m(_common_components_LinkButton__WEBPACK_IMPORTED_MODULE_8__["default"], {
        href: "https://docs.flarum.org/scheduler",
        external: true,
        target: "_blank",
        icon: "fas fa-info-circle"
      })), m("br", null), _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.schedulerStatus], 70);
    }
    items.add('queue-driver', [m("strong", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.dashboard.status.headers.queue-driver')), m("br", null), _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.queueDriver], 60);
    items.add('session-driver', [m("strong", null, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.dashboard.status.headers.session-driver')), m("br", null), _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].data.sessionDriver], 50);
    return items;
  };
  _proto.toolsItems = function toolsItems() {
    var items = new _common_utils_ItemList__WEBPACK_IMPORTED_MODULE_4__["default"]();
    items.add('clearCache', m(_common_components_Button__WEBPACK_IMPORTED_MODULE_6__["default"], {
      onclick: this.handleClearCache.bind(this)
    }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.dashboard.clear_cache_button')));
    return items;
  };
  _proto.handleClearCache = function handleClearCache(e) {
    _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.show(_LoadingModal__WEBPACK_IMPORTED_MODULE_7__["default"]);
    _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].request({
      method: 'DELETE',
      url: _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].forum.attribute('apiUrl') + '/cache'
    }).then(function () {
      return window.location.reload();
    })["catch"](function (e) {
      if (e.status === 409) {
        _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].alerts.clear();
        _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].alerts.show({
          type: 'error'
        }, _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.admin.dashboard.io_error_message'));
      }
      _admin_app__WEBPACK_IMPORTED_MODULE_1__["default"].modal.close();
    });
  };
  return StatusWidget;
}(_DashboardWidget__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/admin/components/UploadImageButton.js":
/*!***************************************************!*\
  !*** ./src/admin/components/UploadImageButton.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ UploadImageButton)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "../../../node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");
/* harmony import */ var _common_components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/components/Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _common_utils_classList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/utils/classList */ "./src/common/utils/classList.ts");





var UploadImageButton = /*#__PURE__*/function (_Button) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(UploadImageButton, _Button);
  function UploadImageButton() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Button.call.apply(_Button, [this].concat(args)) || this;
    _this.loading = false;
    return _this;
  }
  var _proto = UploadImageButton.prototype;
  _proto.view = function view(vnode) {
    this.attrs.loading = this.loading;
    this.attrs.className = (0,_common_utils_classList__WEBPACK_IMPORTED_MODULE_4__["default"])(this.attrs.className, 'Button');
    if (_admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].data.settings[this.attrs.name + '_path']) {
      this.attrs.onclick = this.remove.bind(this);
      return m("div", null, m("p", null, m("img", {
        src: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].forum.attribute(this.attrs.name + 'Url'),
        alt: ""
      })), m("p", null, _Button.prototype.view.call(this, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, vnode, {
        children: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.upload_image.remove_button')
      }))));
    } else {
      this.attrs.onclick = this.upload.bind(this);
    }
    return _Button.prototype.view.call(this, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, vnode, {
      children: _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].translator.trans('core.admin.upload_image.upload_button')
    }));
  }

  /**
   * Prompt the user to upload an image.
   */;
  _proto.upload = function upload() {
    var _this2 = this;
    if (this.loading) return;
    var $input = $('<input type="file">');
    $input.appendTo('body').hide().trigger('click').on('change', function (e) {
      var body = new FormData();
      body.append(_this2.attrs.name, $(e.target)[0].files[0]);
      _this2.loading = true;
      m.redraw();
      _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].request({
        method: 'POST',
        url: _this2.resourceUrl(),
        serialize: function serialize(raw) {
          return raw;
        },
        body: body
      }).then(_this2.success.bind(_this2), _this2.failure.bind(_this2));
    });
  }

  /**
   * Remove the logo.
   */;
  _proto.remove = function remove() {
    this.loading = true;
    m.redraw();
    _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].request({
      method: 'DELETE',
      url: this.resourceUrl()
    }).then(this.success.bind(this), this.failure.bind(this));
  };
  _proto.resourceUrl = function resourceUrl() {
    return _admin_app__WEBPACK_IMPORTED_MODULE_2__["default"].forum.attribute('apiUrl') + '/' + this.attrs.name;
  }

  /**
   * After a successful upload/removal, reload the page.
   *
   * @param {object} response
   * @protected
   */;
  _proto.success = function success(response) {
    window.location.reload();
  }

  /**
   * If upload/removal fails, stop loading.
   *
   * @param {object} response
   * @protected
   */;
  _proto.failure = function failure(response) {
    this.loading = false;
    m.redraw();
  };
  return UploadImageButton;
}(_common_components_Button__WEBPACK_IMPORTED_MODULE_3__["default"]);


/***/ }),

/***/ "./src/admin/models/ExtensionReadme.js":
/*!*********************************************!*\
  !*** ./src/admin/models/ExtensionReadme.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ExtensionReadme)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _common_Model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/Model */ "./src/common/Model.ts");


var ExtensionReadme = /*#__PURE__*/function (_Model) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(ExtensionReadme, _Model);
  function ExtensionReadme() {
    var _this;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _Model.call.apply(_Model, [this].concat(args)) || this;
    _this.content = _common_Model__WEBPACK_IMPORTED_MODULE_1__["default"].attribute('content');
    return _this;
  }
  return ExtensionReadme;
}(_common_Model__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/admin/utils/getCategorizedExtensions.js":
/*!*****************************************************!*\
  !*** ./src/admin/utils/getCategorizedExtensions.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ getCategorizedExtensions)
/* harmony export */ });
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");

function getCategorizedExtensions() {
  var extensions = {};
  Object.keys(_admin_app__WEBPACK_IMPORTED_MODULE_0__["default"].data.extensions).map(function (id) {
    var extension = _admin_app__WEBPACK_IMPORTED_MODULE_0__["default"].data.extensions[id];
    var category = extension.extra['flarum-extension'].category;

    // Wrap languages packs into new system
    if (extension.extra['flarum-locale']) {
      category = 'language';
    }
    if (category in _admin_app__WEBPACK_IMPORTED_MODULE_0__["default"].extensionCategories) {
      extensions[category] = extensions[category] || [];
      extensions[category].push(extension);
    } else {
      extensions.feature = extensions.feature || [];
      extensions.feature.push(extension);
    }
  });
  return extensions;
}

/***/ }),

/***/ "./src/admin/utils/isExtensionEnabled.js":
/*!***********************************************!*\
  !*** ./src/admin/utils/isExtensionEnabled.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ isExtensionEnabled)
/* harmony export */ });
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");

function isExtensionEnabled(name) {
  var enabled = JSON.parse(_admin_app__WEBPACK_IMPORTED_MODULE_0__["default"].data.settings.extensions_enabled);
  return enabled.includes(name);
}

/***/ }),

/***/ "./src/admin/utils/saveSettings.js":
/*!*****************************************!*\
  !*** ./src/admin/utils/saveSettings.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ saveSettings)
/* harmony export */ });
/* harmony import */ var _admin_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../admin/app */ "./src/admin/app.ts");

function saveSettings(settings) {
  var oldSettings = JSON.parse(JSON.stringify(_admin_app__WEBPACK_IMPORTED_MODULE_0__["default"].data.settings));
  Object.assign(_admin_app__WEBPACK_IMPORTED_MODULE_0__["default"].data.settings, settings);
  return _admin_app__WEBPACK_IMPORTED_MODULE_0__["default"].request({
    method: 'POST',
    url: _admin_app__WEBPACK_IMPORTED_MODULE_0__["default"].forum.attribute('apiUrl') + '/settings',
    body: settings
  })["catch"](function (error) {
    _admin_app__WEBPACK_IMPORTED_MODULE_0__["default"].data.settings = oldSettings;
    throw error;
  });
}

/***/ }),

/***/ "./src/common/components/FieldSet.js":
/*!*******************************************!*\
  !*** ./src/common/components/FieldSet.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ FieldSet)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _helpers_listItems__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/listItems */ "./src/common/helpers/listItems.tsx");




/**
 * The `FieldSet` component defines a collection of fields, displayed in a list
 * underneath a title. Accepted properties are:
 *
 * - `className` The class name for the fieldset.
 * - `label` The title of this group of fields.
 *
 * The children should be an array of items to show in the fieldset.
 */
var FieldSet = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(FieldSet, _Component);
  function FieldSet() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = FieldSet.prototype;
  _proto.view = function view(vnode) {
    return m("fieldset", {
      className: this.attrs.className
    }, m("legend", null, this.attrs.label), m("ul", null, (0,_helpers_listItems__WEBPACK_IMPORTED_MODULE_2__["default"])(vnode.children)));
  };
  return FieldSet;
}(_Component__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/components/Link.js":
/*!***************************************!*\
  !*** ./src/common/components/Link.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Link)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _utils_extract__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/extract */ "./src/common/utils/extract.ts");


var _excluded = ["options"];



/**
 * The link component enables both internal and external links.
 * It will return a regular HTML link for any links to external sites,
 * and it will use Mithril's m.route.Link for any internal links.
 *
 * Links will default to internal; the 'external' attr must be set to
 * `true` for the link to be external.
 */
var Link = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(Link, _Component);
  function Link() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = Link.prototype;
  _proto.view = function view(vnode) {
    var _vnode$attrs = vnode.attrs,
      _vnode$attrs$options = _vnode$attrs.options,
      options = _vnode$attrs$options === void 0 ? {} : _vnode$attrs$options,
      attrs = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(_vnode$attrs, _excluded);
    attrs.href || (attrs.href = '');

    // For some reason, m.route.Link does not like vnode.text, so if present, we
    // need to convert it to text vnodes and store it in children.
    var children = vnode.children || {
      tag: '#',
      children: vnode.text
    };
    if (attrs.external) {
      return m("a", attrs, children);
    }

    // If the href URL of the link is the same as the current page path
    // we will not add a new entry to the browser history.
    // This allows us to still refresh the Page component
    // without adding endless history entries.
    if (attrs.href === m.route.get()) {
      if (!('replace' in options)) options.replace = true;
    }

    // Mithril 2 does not completely rerender the page if a route change leads to the same route
    // (or the same component handling a different route).
    // Here, the `force` parameter will use Mithril's key system to force a full rerender
    // see https://mithril.js.org/route.html#key-parameter
    if ((0,_utils_extract__WEBPACK_IMPORTED_MODULE_3__["default"])(attrs, 'force')) {
      if (!('state' in options)) options.state = {};
      if (!('key' in options.state)) options.state.key = Date.now();
    }
    attrs.options = options;
    return m(m.route.Link, attrs, children);
  };
  return Link;
}(_Component__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/components/LinkButton.js":
/*!*********************************************!*\
  !*** ./src/common/components/LinkButton.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ LinkButton)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _Link__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Link */ "./src/common/components/Link.js");




/**
 * The `LinkButton` component defines a `Button` which links to a route.
 *
 * ### Attrs
 *
 * All of the attrs accepted by `Button`, plus:
 *
 * - `active` Whether or not the page that this button links to is currently
 *   active.
 * - `href` The URL to link to. If the current URL `m.route()` matches this,
 *   the `active` prop will automatically be set to true.
 * - `force` Whether the page should be fully rerendered. Defaults to `true`.
 */
var LinkButton = /*#__PURE__*/function (_Button) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(LinkButton, _Button);
  function LinkButton() {
    return _Button.apply(this, arguments) || this;
  }
  LinkButton.initAttrs = function initAttrs(attrs) {
    _Button.initAttrs.call(this, attrs);
    attrs.active = this.isActive(attrs);
    if (attrs.force === undefined) attrs.force = true;
  };
  var _proto = LinkButton.prototype;
  _proto.view = function view(vnode) {
    var vdom = _Button.prototype.view.call(this, vnode);
    vdom.tag = _Link__WEBPACK_IMPORTED_MODULE_2__["default"];
    vdom.attrs.active = String(vdom.attrs.active);
    delete vdom.attrs.type;
    return vdom;
  }

  /**
   * Determine whether a component with the given attrs is 'active'.
   *
   * @param {object} attrs
   * @return {boolean}
   */;
  LinkButton.isActive = function isActive(attrs) {
    var _m$route$get, _attrs$href;
    return typeof attrs.active !== 'undefined' ? attrs.active : ((_m$route$get = m.route.get()) == null ? void 0 : _m$route$get.split('?')[0]) === ((_attrs$href = attrs.href) == null ? void 0 : _attrs$href.split('?')[0]);
  };
  return LinkButton;
}(_Button__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/components/Placeholder.js":
/*!**********************************************!*\
  !*** ./src/common/components/Placeholder.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Placeholder)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");



/**
 * The `Placeholder` component displays a muted text with some call to action,
 * usually used as an empty state.
 *
 * ### Attrs
 *
 * - `text`
 */
var Placeholder = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Placeholder, _Component);
  function Placeholder() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = Placeholder.prototype;
  _proto.view = function view() {
    return m("div", {
      className: "Placeholder"
    }, m("p", null, this.attrs.text));
  };
  return Placeholder;
}(_Component__WEBPACK_IMPORTED_MODULE_1__["default"]);


/***/ }),

/***/ "./src/common/components/Select.js":
/*!*****************************************!*\
  !*** ./src/common/components/Select.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Select)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _helpers_icon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../helpers/icon */ "./src/common/helpers/icon.tsx");
/* harmony import */ var _utils_withAttr__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/withAttr */ "./src/common/utils/withAttr.ts");
/* harmony import */ var _utils_classList__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/classList */ "./src/common/utils/classList.ts");


var _excluded = ["className", "class"],
  _excluded2 = ["options", "onchange", "value", "disabled", "className", "class", "wrapperAttrs"];





/**
 * The `Select` component displays a <select> input, surrounded with some extra
 * elements for styling. It accepts the following attrs:
 *
 * - `options` A map of option values to labels.
 * - `onchange` A callback to run when the selected value is changed.
 * - `value` The value of the selected option.
 * - `disabled` Disabled state for the input.
 * - `wrapperAttrs` A map of attrs to be passed to the DOM element wrapping the `<select>`
 *
 * Other attributes are passed directly to the `<select>` element rendered to the DOM.
 */
var Select = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_1__["default"])(Select, _Component);
  function Select() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = Select.prototype;
  _proto.view = function view() {
    var _this$attrs = this.attrs,
      options = _this$attrs.options,
      onchange = _this$attrs.onchange,
      value = _this$attrs.value,
      disabled = _this$attrs.disabled,
      className = _this$attrs.className,
      _class = _this$attrs["class"],
      _this$attrs$wrapperAt = _this$attrs.wrapperAttrs;
    _this$attrs$wrapperAt = _this$attrs$wrapperAt === void 0 ? {} : _this$attrs$wrapperAt;
    var wrapperClassName = _this$attrs$wrapperAt.className,
      wrapperClass = _this$attrs$wrapperAt["class"],
      wrapperAttrs = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(_this$attrs$wrapperAt, _excluded),
      domAttrs = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(_this$attrs, _excluded2);
    return m("span", Object.assign({
      className: (0,_utils_classList__WEBPACK_IMPORTED_MODULE_5__["default"])('Select', wrapperClassName, wrapperClass)
    }, wrapperAttrs), m("select", Object.assign({
      className: (0,_utils_classList__WEBPACK_IMPORTED_MODULE_5__["default"])('Select-input FormControl', className, _class),
      onchange: onchange ? (0,_utils_withAttr__WEBPACK_IMPORTED_MODULE_4__["default"])('value', onchange.bind(this)) : undefined,
      value: value,
      disabled: disabled
    }, domAttrs), Object.keys(options).map(function (key) {
      return m("option", {
        value: key
      }, options[key]);
    })), (0,_helpers_icon__WEBPACK_IMPORTED_MODULE_3__["default"])('fas fa-sort', {
      className: 'Select-caret'
    }));
  };
  return Select;
}(_Component__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/components/Separator.js":
/*!********************************************!*\
  !*** ./src/common/components/Separator.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");



/**
 * The `Separator` component defines a menu separator item.
 */
var Separator = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Separator, _Component);
  function Separator() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = Separator.prototype;
  _proto.view = function view() {
    return m("li", {
      className: "Dropdown-separator"
    });
  };
  return Separator;
}(_Component__WEBPACK_IMPORTED_MODULE_1__["default"]);
Separator.isListItem = true;
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Separator);

/***/ }),

/***/ "./src/common/components/TextEditor.js":
/*!*********************************************!*\
  !*** ./src/common/components/TextEditor.js ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ TextEditor)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");
/* harmony import */ var _Component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Component */ "./src/common/Component.ts");
/* harmony import */ var _utils_ItemList__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/ItemList */ "./src/common/utils/ItemList.ts");
/* harmony import */ var _helpers_listItems__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../helpers/listItems */ "./src/common/helpers/listItems.tsx");
/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _utils_BasicEditorDriver__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/BasicEditorDriver */ "./src/common/utils/BasicEditorDriver.ts");
/* harmony import */ var _Tooltip__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Tooltip */ "./src/common/components/Tooltip.tsx");









/**
 * The `TextEditor` component displays a textarea with controls, including a
 * submit button.
 *
 * ### Attrs
 *
 * - `composer`
 * - `submitLabel`
 * - `value`
 * - `placeholder`
 * - `disabled`
 * - `preview`
 */
var TextEditor = /*#__PURE__*/function (_Component) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(TextEditor, _Component);
  function TextEditor() {
    return _Component.apply(this, arguments) || this;
  }
  var _proto = TextEditor.prototype;
  _proto.oninit = function oninit(vnode) {
    _Component.prototype.oninit.call(this, vnode);

    /**
     * The value of the editor.
     *
     * @type {String}
     */
    this.value = this.attrs.value || '';

    /**
     * Whether the editor is disabled.
     */
    this.disabled = !!this.attrs.disabled;
  };
  _proto.view = function view() {
    return m("div", {
      className: "TextEditor"
    }, m("div", {
      className: "TextEditor-editorContainer"
    }), m("ul", {
      className: "TextEditor-controls Composer-footer"
    }, (0,_helpers_listItems__WEBPACK_IMPORTED_MODULE_4__["default"])(this.controlItems().toArray()), m("li", {
      className: "TextEditor-toolbar"
    }, this.toolbarItems().toArray())));
  };
  _proto.oncreate = function oncreate(vnode) {
    _Component.prototype.oncreate.call(this, vnode);
    this.attrs.composer.editor = this.buildEditor(this.$('.TextEditor-editorContainer')[0]);
  };
  _proto.onupdate = function onupdate(vnode) {
    _Component.prototype.onupdate.call(this, vnode);
    var newDisabled = !!this.attrs.disabled;
    if (this.disabled !== newDisabled) {
      this.disabled = newDisabled;
      this.attrs.composer.editor.disabled(newDisabled);
    }
  };
  _proto.buildEditorParams = function buildEditorParams() {
    var _this = this;
    return {
      classNames: ['FormControl', 'Composer-flexible', 'TextEditor-editor'],
      disabled: this.disabled,
      placeholder: this.attrs.placeholder || '',
      value: this.value,
      oninput: this.oninput.bind(this),
      inputListeners: [],
      onsubmit: function onsubmit() {
        _this.onsubmit();
        m.redraw();
      }
    };
  };
  _proto.buildEditor = function buildEditor(dom) {
    return new _utils_BasicEditorDriver__WEBPACK_IMPORTED_MODULE_6__["default"](dom, this.buildEditorParams());
  }

  /**
   * Build an item list for the text editor controls.
   *
   * @return {ItemList<import('mithril').Children>}
   */;
  _proto.controlItems = function controlItems() {
    var items = new _utils_ItemList__WEBPACK_IMPORTED_MODULE_3__["default"]();
    items.add('submit', m(_Button__WEBPACK_IMPORTED_MODULE_5__["default"], {
      icon: "fas fa-paper-plane",
      className: "Button Button--primary",
      itemClassName: "App-primaryControl",
      onclick: this.onsubmit.bind(this)
    }, this.attrs.submitLabel));
    if (this.attrs.preview) {
      items.add('preview', m(_Tooltip__WEBPACK_IMPORTED_MODULE_7__["default"], {
        text: _common_app__WEBPACK_IMPORTED_MODULE_1__["default"].translator.trans('core.forum.composer.preview_tooltip')
      }, m(_Button__WEBPACK_IMPORTED_MODULE_5__["default"], {
        icon: "far fa-eye",
        className: "Button Button--icon",
        onclick: this.attrs.preview
      })));
    }
    return items;
  }

  /**
   * Build an item list for the toolbar controls.
   *
   * @return {ItemList<import('mithril').Children>}
   */;
  _proto.toolbarItems = function toolbarItems() {
    return new _utils_ItemList__WEBPACK_IMPORTED_MODULE_3__["default"]();
  }

  /**
   * Handle input into the textarea.
   *
   * @param {string} value
   */;
  _proto.oninput = function oninput(value) {
    this.value = value;
    this.attrs.onchange(this.value);
  }

  /**
   * Handle the submit button being clicked.
   */;
  _proto.onsubmit = function onsubmit() {
    this.attrs.onsubmit(this.value);
  };
  return TextEditor;
}(_Component__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/components/TextEditorButton.js":
/*!***************************************************!*\
  !*** ./src/common/components/TextEditorButton.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ TextEditorButton)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _utils_extractText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/extractText */ "./src/common/utils/extractText.ts");
/* harmony import */ var _Button__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Button */ "./src/common/components/Button.tsx");
/* harmony import */ var _Tooltip__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Tooltip */ "./src/common/components/Tooltip.tsx");





/**
 * The `TextEditorButton` component displays a button suitable for the text
 * editor toolbar.
 *
 * Automatically creates tooltips using the Tooltip component and provided text.
 *
 * ## Attrs
 * - `title` - Tooltip for the button
 */
var TextEditorButton = /*#__PURE__*/function (_Button) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(TextEditorButton, _Button);
  function TextEditorButton() {
    return _Button.apply(this, arguments) || this;
  }
  var _proto = TextEditorButton.prototype;
  _proto.view = function view(vnode) {
    var originalView = _Button.prototype.view.call(this, vnode);
    return m(_Tooltip__WEBPACK_IMPORTED_MODULE_3__["default"], {
      text: this.attrs.tooltipText || (0,_utils_extractText__WEBPACK_IMPORTED_MODULE_1__["default"])(vnode.children)
    }, originalView);
  };
  TextEditorButton.initAttrs = function initAttrs(attrs) {
    _Button.initAttrs.call(this, attrs);
    attrs.className = attrs.className || 'Button Button--icon Button--link';
    attrs.tooltipText = attrs.title;
  };
  return TextEditorButton;
}(_Button__WEBPACK_IMPORTED_MODULE_2__["default"]);


/***/ }),

/***/ "./src/common/helpers/punctuateSeries.js":
/*!***********************************************!*\
  !*** ./src/common/helpers/punctuateSeries.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ punctuateSeries)
/* harmony export */ });
/* harmony import */ var _common_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/app */ "./src/common/app.ts");


/**
 * The `punctuateSeries` helper formats a list of strings (e.g. names) to read
 * fluently in the application's locale.
 *
 * ```js
 * punctuateSeries(['Toby', 'Franz', 'Dominion']) // Toby, Franz, and Dominion
 * ```
 *
 * @param {import('mithril').Children[]} items
 * @return {import('mithril').Children}')}
 */
function punctuateSeries(items) {
  if (items.length === 2) {
    return _common_app__WEBPACK_IMPORTED_MODULE_0__["default"].translator.trans('core.lib.series.two_text', {
      first: items[0],
      second: items[1]
    });
  } else if (items.length >= 3) {
    // If there are three or more items, we will join all but the first and
    // last items with the equivalent of a comma, and then we will feed that
    // into the translator along with the first and last item.
    var second = items.slice(1, items.length - 1).reduce(function (list, item) {
      return list.concat([item, _common_app__WEBPACK_IMPORTED_MODULE_0__["default"].translator.trans('core.lib.series.glue_text')]);
    }, []).slice(0, -1);
    return _common_app__WEBPACK_IMPORTED_MODULE_0__["default"].translator.trans('core.lib.series.three_text', {
      first: items[0],
      second: second,
      third: items[items.length - 1]
    });
  }
  return items;
}

/***/ }),

/***/ "./src/common/states/PageState.js":
/*!****************************************!*\
  !*** ./src/common/states/PageState.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PageState)
/* harmony export */ });
/* harmony import */ var _common_utils_subclassOf__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/utils/subclassOf */ "./src/common/utils/subclassOf.js");

var PageState = /*#__PURE__*/function () {
  function PageState(type, data) {
    if (data === void 0) {
      data = {};
    }
    this.type = type;
    this.data = data;
  }

  /**
   * Determine whether the page matches the given class and data.
   *
   * @param {object} type The page class to check against. Subclasses are accepted as well.
   * @param {Record<string, unknown>} data
   * @return {boolean}
   */
  var _proto = PageState.prototype;
  _proto.matches = function matches(type, data) {
    var _this = this;
    if (data === void 0) {
      data = {};
    }
    // Fail early when the page is of a different type
    if (!(0,_common_utils_subclassOf__WEBPACK_IMPORTED_MODULE_0__["default"])(this.type, type)) return false;

    // Now that the type is known to be correct, we loop through the provided
    // data to see whether it matches the data in our state.
    return Object.keys(data).every(function (key) {
      return _this.data[key] === data[key];
    });
  };
  _proto.get = function get(key) {
    return this.data[key];
  };
  _proto.set = function set(key, value) {
    this.data[key] = value;
  };
  return PageState;
}();


/***/ }),

/***/ "./src/common/utils/Drawer.js":
/*!************************************!*\
  !*** ./src/common/utils/Drawer.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Drawer)
/* harmony export */ });
/* harmony import */ var _focusTrap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./focusTrap */ "./src/common/utils/focusTrap.ts");


/**
 * The `Drawer` class controls the page's drawer. The drawer is the area the
 * slides out from the left on mobile devices; it contains the header and the
 * footer.
 */
var Drawer = /*#__PURE__*/function () {
  /**
   * @type {import('./focusTrap').FocusTrap}
   */

  /**
   * @type {HTMLDivElement}
   */

  function Drawer() {
    var _this = this;
    this.focusTrap = void 0;
    this.appElement = void 0;
    this.resizeHandler = function (e) {
      if (!e.matches && _this.isOpen()) {
        // Drawer is open but we've made window bigger, so hide it.
        _this.hide();
      }
    }.bind(this);
    this.drawerAvailableMediaQuery = void 0;
    // Set up an event handler so that whenever the content area is tapped,
    // the drawer will close.
    document.getElementById('content').addEventListener('click', function (e) {
      if (_this.isOpen()) {
        e.preventDefault();
        _this.hide();
      }
    });
    this.appElement = document.getElementById('app');
    // Despite the `focus-trap` documentation, both `clickOutsideDeactivates`
    // and `allowOutsideClick` are necessary so that inputs in modals triggered
    // from the drawer's nav components can be interacted with.
    this.focusTrap = (0,_focusTrap__WEBPACK_IMPORTED_MODULE_0__.createFocusTrap)('#drawer', {
      allowOutsideClick: true,
      clickOutsideDeactivates: true
    });
    this.drawerAvailableMediaQuery = window.matchMedia("(max-width: " + getComputedStyle(document.documentElement).getPropertyValue('--screen-phone-max') + ")");
  }

  /**
   * Handler for the `resize` event on `window`.
   *
   * This is used to close the drawer when the viewport is widened past the `phone` size.
   * At this point, the drawer turns into the standard header that we see on desktop, but
   * the drawer is still registered as 'open' internally.
   *
   * This causes issues with the focus trap, resulting in focus becoming trapped within
   * the header on desktop viewports.
   *
   * @internal
   */
  var _proto = Drawer.prototype;
  /**
   * Check whether or not the drawer is currently open.
   *
   * @return {boolean}
   */
  _proto.isOpen = function isOpen() {
    return this.appElement.classList.contains('drawerOpen');
  }

  /**
   * Hide the drawer.
   */;
  _proto.hide = function hide() {
    var _this$$backdrop;
    /**
     * As part of hiding the drawer, this function also ensures that the drawer
     * correctly animates out, while ensuring it is not part of the navigation
     * tree while off-screen.
     *
     * More info: https://github.com/flarum/core/pull/2666#discussion_r595381014
     */

    this.focusTrap.deactivate();
    this.drawerAvailableMediaQuery.removeListener(this.resizeHandler);
    if (!this.isOpen()) return;
    var $drawer = $('#drawer');

    // Used to prevent `visibility: hidden` from breaking the exit animation
    $drawer.css('visibility', 'visible').one('transitionend', function () {
      return $drawer.css('visibility', '');
    });
    this.appElement.classList.remove('drawerOpen');
    (_this$$backdrop = this.$backdrop) == null ? void 0 : _this$$backdrop.remove == null ? void 0 : _this$$backdrop.remove();
  }

  /**
   * Show the drawer.
   */;
  _proto.show = function show() {
    var _this2 = this;
    this.appElement.classList.add('drawerOpen');
    this.drawerAvailableMediaQuery.addListener(this.resizeHandler);
    this.$backdrop = $('<div/>').addClass('drawer-backdrop fade').appendTo('body').on('click', this.hide.bind(this));
    requestAnimationFrame(function () {
      _this2.$backdrop.addClass('in');
      _this2.focusTrap.activate();
    });
  };
  return Drawer;
}();


/***/ }),

/***/ "./src/common/utils/ScrollListener.js":
/*!********************************************!*\
  !*** ./src/common/utils/ScrollListener.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ScrollListener)
/* harmony export */ });
/**
 * The `ScrollListener` class sets up a listener that handles window scroll
 * events.
 */
var ScrollListener = /*#__PURE__*/function () {
  /**
   * @param {(top: number) => void} callback The callback to run when the scroll position
   *     changes.
   */
  function ScrollListener(callback) {
    this.callback = callback;
    this.ticking = false;
  }

  /**
   * On each animation frame, as long as the listener is active, run the
   * `update` method.
   *
   * @protected
   */
  var _proto = ScrollListener.prototype;
  _proto.loop = function loop() {
    var _this = this;
    // THROTTLE: If the callback is still running (or hasn't yet run), we ignore
    // further scroll events.
    if (this.ticking) return;

    // Schedule the callback to be executed soon (TM), and stop throttling once
    // the callback is done.
    requestAnimationFrame(function () {
      _this.update();
      _this.ticking = false;
    });
    this.ticking = true;
  }

  /**
   * Run the callback, whether there was a scroll event or not.
   */;
  _proto.update = function update() {
    this.callback(window.pageYOffset);
  }

  /**
   * Start listening to and handling the window's scroll position.
   */;
  _proto.start = function start() {
    if (!this.active) {
      window.addEventListener('scroll', this.active = this.loop.bind(this), {
        passive: true
      });
    }
  }

  /**
   * Stop listening to and handling the window's scroll position.
   */;
  _proto.stop = function stop() {
    window.removeEventListener('scroll', this.active);
    this.active = null;
  };
  return ScrollListener;
}();


/***/ }),

/***/ "./src/common/utils/anchorScroll.js":
/*!******************************************!*\
  !*** ./src/common/utils/anchorScroll.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ anchorScroll)
/* harmony export */ });
/**
 * The `anchorScroll` utility saves the scroll position relative to an element,
 * and then restores it after a callback has been run.
 *
 * This is useful if a redraw will change the page's content above the viewport.
 * Normally doing this will result in the content in the viewport being pushed
 * down or pulled up. By wrapping the redraw with this utility, the scroll
 * position can be anchor to an element that is in or below the viewport, so
 * the content in the viewport will stay the same.
 *
 * @param {string | HTMLElement | SVGElement | Element} element The element to anchor the scroll position to.
 * @param {() => void} callback The callback to run that will change page content.
 */
function anchorScroll(element, callback) {
  var $window = $(window);
  var relativeScroll = $(element).offset().top - $window.scrollTop();
  callback();
  $window.scrollTop($(element).offset().top - relativeScroll);
}

/***/ }),

/***/ "./src/common/utils/bidi.js":
/*!**********************************!*\
  !*** ./src/common/utils/bidi.js ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
function bidi(node, prop) {
  var type = node.tag === 'select' ? node.attrs.multi ? 'multi' : 'select' : node.attrs.type;

  // Setup: bind listeners
  if (type === 'multi') {
    node.attrs.onchange = function () {
      prop([].slice.call(this.selectedOptions, function (x) {
        return x.value;
      }));
    };
  } else if (type === 'select') {
    node.attrs.onchange = function (e) {
      prop(this.selectedOptions[0].value);
    };
  } else if (type === 'checkbox') {
    node.attrs.onchange = function (e) {
      prop(this.checked);
    };
  } else {
    node.attrs.onchange = node.attrs.oninput = function (e) {
      prop(this.value);
    };
  }
  if (node.tag === 'select') {
    node.children.forEach(function (option) {
      if (option.attrs.value === prop() || option.children[0] === prop()) {
        option.attrs.selected = true;
      }
    });
  } else if (type === 'checkbox') {
    node.attrs.checked = prop();
  } else if (type === 'radio') {
    node.attrs.checked = prop() === node.attrs.value;
  } else {
    node.attrs.value = prop();
  }
  node.attrs.bidi = null;
  return node;
}
bidi.view = function (ctrl, node, prop) {
  return bidi(node, node.attrs.bidi);
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (bidi);

/***/ }),

/***/ "./src/common/utils/evented.js":
/*!*************************************!*\
  !*** ./src/common/utils/evented.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/fireDebugWarning */ "./src/common/helpers/fireDebugWarning.ts");

var deprecatedNotice = 'The `evented` util is deprecated and no longer supported.';
var deprecationIssueId = '2547';

/**
 * The `evented` mixin provides methods allowing an object to trigger events,
 * running externally registered event handlers.
 *
 * @deprecated v1.2, to be removed in v2.0
 */
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  /**
   * Arrays of registered event handlers, grouped by the event name.
   *
   * @type {Record<string, unknown>}
   * @protected
   *
   * @deprecated
   */
  handlers: null,
  /**
   * Get all of the registered handlers for an event.
   *
   * @param {string} event The name of the event.
   * @return {Function[]}
   * @protected
   *
   * @deprecated
   */
  getHandlers: function getHandlers(event) {
    (0,_helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_0__.fireDeprecationWarning)(deprecatedNotice, deprecationIssueId);
    this.handlers = this.handlers || {};
    this.handlers[event] = this.handlers[event] || [];
    return this.handlers[event];
  },
  /**
   * Trigger an event.
   *
   * @param {string} event The name of the event.
   * @param {any[]} args Arguments to pass to event handlers.
   *
   * @deprecated
   */
  trigger: function trigger(event) {
    var _this = this;
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    (0,_helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_0__.fireDeprecationWarning)(deprecatedNotice, deprecationIssueId);
    this.getHandlers(event).forEach(function (handler) {
      return handler.apply(_this, args);
    });
  },
  /**
   * Register an event handler.
   *
   * @param {string} event The name of the event.
   * @param {Function} handler The function to handle the event.
   *
   * @deprecated
   */
  on: function on(event, handler) {
    (0,_helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_0__.fireDeprecationWarning)(deprecatedNotice, deprecationIssueId);
    this.getHandlers(event).push(handler);
  },
  /**
   * Register an event handler so that it will run only once, and then
   * unregister itself.
   *
   * @param {string} event The name of the event.
   * @param {Function} handler The function to handle the event.
   *
   * @deprecated
   */
  one: function one(event, handler) {
    (0,_helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_0__.fireDeprecationWarning)(deprecatedNotice, deprecationIssueId);
    var wrapper = function wrapper() {
      handler.apply(this, arguments);
      this.off(event, wrapper);
    };
    this.getHandlers(event).push(wrapper);
  },
  /**
   * Unregister an event handler.
   *
   * @param {string} event The name of the event.
   * @param {Function} handler The function that handles the event.
   *
   * @deprecated
   */
  off: function off(event, handler) {
    (0,_helpers_fireDebugWarning__WEBPACK_IMPORTED_MODULE_0__.fireDeprecationWarning)(deprecatedNotice, deprecationIssueId);
    var handlers = this.getHandlers(event);
    var index = handlers.indexOf(handler);
    if (index !== -1) {
      handlers.splice(index, 1);
    }
  }
});

/***/ }),

/***/ "./src/common/utils/mixin.js":
/*!***********************************!*\
  !*** ./src/common/utils/mixin.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ mixin)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");

/**
 * The `mixin` utility assigns the properties of a set of 'mixin' objects to
 * the prototype of a parent object.
 *
 * @example
 * class MyClass extends mixin(ExistingClass, evented, etc) {}
 *
 * @param {object} Parent The class to extend the new class from.
 * @param {Record<string, any>[]} mixins The objects to mix in.
 * @return {object} A new class that extends Parent and contains the mixins.
 */
function mixin(Parent) {
  var Mixed = /*#__PURE__*/function (_Parent) {
    (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(Mixed, _Parent);
    function Mixed() {
      return _Parent.apply(this, arguments) || this;
    }
    return Mixed;
  }(Parent);
  for (var _len = arguments.length, mixins = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    mixins[_key - 1] = arguments[_key];
  }
  mixins.forEach(function (object) {
    Object.assign(Mixed.prototype, object);
  });
  return Mixed;
}

/***/ }),

/***/ "./src/common/utils/patchMithril.js":
/*!******************************************!*\
  !*** ./src/common/utils/patchMithril.js ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ patchMithril)
/* harmony export */ });
/* harmony import */ var _bidi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bidi */ "./src/common/utils/bidi.js");

function patchMithril(global) {
  var defaultMithril = global.m;
  var modifiedMithril = function modifiedMithril(comp) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    var node = defaultMithril.apply(this, arguments);
    if (!node.attrs) node.attrs = {};

    // Allows the use of the bidi attr.
    if (node.attrs.bidi) {
      (0,_bidi__WEBPACK_IMPORTED_MODULE_0__["default"])(node, node.attrs.bidi);
    }
    return node;
  };
  Object.keys(defaultMithril).forEach(function (key) {
    return modifiedMithril[key] = defaultMithril[key];
  });
  global.m = modifiedMithril;
}

/***/ }),

/***/ "./src/common/utils/subclassOf.js":
/*!****************************************!*\
  !*** ./src/common/utils/subclassOf.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ subclassOf)
/* harmony export */ });
/**
 * Check if class A is the same as or a subclass of class B.
 */
function subclassOf(A, B) {
  return A && (A === B || A.prototype instanceof B);
}

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":
/*!*********************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _assertThisInitialized)
/* harmony export */ });
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self;
}

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js":
/*!****************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _asyncToGenerator)
/* harmony export */ });
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }
  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}
function _asyncToGenerator(fn) {
  return function () {
    var self = this,
      args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);
      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }
      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }
      _next(undefined);
    });
  };
}

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/esm/createClass.js":
/*!***********************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/esm/createClass.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _createClass)
/* harmony export */ });
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/esm/extends.js":
/*!*******************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/esm/extends.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _extends)
/* harmony export */ });
function _extends() {
  _extends = Object.assign ? Object.assign.bind() : function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js":
/*!*************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _inheritsLoose)
/* harmony export */ });
/* harmony import */ var _setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setPrototypeOf.js */ "../../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  (0,_setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(subClass, superClass);
}

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":
/*!****************************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _objectWithoutPropertiesLoose)
/* harmony export */ });
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;
  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }
  return target;
}

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":
/*!**************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _setPrototypeOf)
/* harmony export */ });
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };
  return _setPrototypeOf(o, p);
}

/***/ }),

/***/ "../../../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteralLoose.js":
/*!**************************************************************************************!*\
  !*** ../../../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteralLoose.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _taggedTemplateLiteralLoose)
/* harmony export */ });
function _taggedTemplateLiteralLoose(strings, raw) {
  if (!raw) {
    raw = strings.slice(0);
  }
  strings.raw = raw;
  return strings;
}

/***/ }),

/***/ "../../../node_modules/nanoid/index.browser.js":
/*!*****************************************************!*\
  !*** ../../../node_modules/nanoid/index.browser.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "customAlphabet": () => (/* binding */ customAlphabet),
/* harmony export */   "customRandom": () => (/* binding */ customRandom),
/* harmony export */   "nanoid": () => (/* binding */ nanoid),
/* harmony export */   "random": () => (/* binding */ random),
/* harmony export */   "urlAlphabet": () => (/* reexport safe */ _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_0__.urlAlphabet)
/* harmony export */ });
/* harmony import */ var _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./url-alphabet/index.js */ "../../../node_modules/nanoid/url-alphabet/index.js");

var random = function random(bytes) {
  return crypto.getRandomValues(new Uint8Array(bytes));
};
var customRandom = function customRandom(alphabet, defaultSize, getRandom) {
  var mask = (2 << Math.log(alphabet.length - 1) / Math.LN2) - 1;
  var step = -~(1.6 * mask * defaultSize / alphabet.length);
  return function (size) {
    if (size === void 0) {
      size = defaultSize;
    }
    var id = '';
    while (true) {
      var bytes = getRandom(step);
      var j = step;
      while (j--) {
        id += alphabet[bytes[j] & mask] || '';
        if (id.length === size) return id;
      }
    }
  };
};
var customAlphabet = function customAlphabet(alphabet, size) {
  if (size === void 0) {
    size = 21;
  }
  return customRandom(alphabet, size, random);
};
var nanoid = function nanoid(size) {
  if (size === void 0) {
    size = 21;
  }
  return crypto.getRandomValues(new Uint8Array(size)).reduce(function (id, _byte) {
    _byte &= 63;
    if (_byte < 36) {
      id += _byte.toString(36);
    } else if (_byte < 62) {
      id += (_byte - 26).toString(36).toUpperCase();
    } else if (_byte > 62) {
      id += '-';
    } else {
      id += '_';
    }
    return id;
  }, '');
};


/***/ }),

/***/ "../../../node_modules/nanoid/url-alphabet/index.js":
/*!**********************************************************!*\
  !*** ../../../node_modules/nanoid/url-alphabet/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "urlAlphabet": () => (/* binding */ urlAlphabet)
/* harmony export */ });
var urlAlphabet = 'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict';


/***/ }),

/***/ "../../../node_modules/throttle-debounce/esm/index.js":
/*!************************************************************!*\
  !*** ../../../node_modules/throttle-debounce/esm/index.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "debounce": () => (/* binding */ debounce),
/* harmony export */   "throttle": () => (/* binding */ throttle)
/* harmony export */ });
/* eslint-disable no-undefined,no-param-reassign,no-shadow */

/**
 * Throttle execution of a function. Especially useful for rate limiting
 * execution of handlers on events like resize and scroll.
 *
 * @param  {number}    delay -          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.
 * @param  {boolean}   [noTrailing] -   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the
 *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time
 *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,
 *                                    the internal counter is reset).
 * @param  {Function}  callback -       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,
 *                                    to `callback` when the throttled-function is executed.
 * @param  {boolean}   [debounceMode] - If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),
 *                                    schedule `callback` to execute after `delay` ms.
 *
 * @returns {Function}  A new, throttled, function.
 */
function throttle(delay, noTrailing, callback, debounceMode) {
  /*
   * After wrapper has stopped being called, this timeout ensures that
   * `callback` is executed at the proper times in `throttle` and `end`
   * debounce modes.
   */
  var timeoutID;
  var cancelled = false; // Keep track of the last time `callback` was executed.

  var lastExec = 0; // Function to clear existing timeout

  function clearExistingTimeout() {
    if (timeoutID) {
      clearTimeout(timeoutID);
    }
  } // Function to cancel next exec

  function cancel() {
    clearExistingTimeout();
    cancelled = true;
  } // `noTrailing` defaults to falsy.

  if (typeof noTrailing !== 'boolean') {
    debounceMode = callback;
    callback = noTrailing;
    noTrailing = undefined;
  }
  /*
   * The `wrapper` function encapsulates all of the throttling / debouncing
   * functionality and when executed will limit the rate at which `callback`
   * is executed.
   */

  function wrapper() {
    for (var _len = arguments.length, arguments_ = new Array(_len), _key = 0; _key < _len; _key++) {
      arguments_[_key] = arguments[_key];
    }
    var self = this;
    var elapsed = Date.now() - lastExec;
    if (cancelled) {
      return;
    } // Execute `callback` and update the `lastExec` timestamp.

    function exec() {
      lastExec = Date.now();
      callback.apply(self, arguments_);
    }
    /*
     * If `debounceMode` is true (at begin) this is used to clear the flag
     * to allow future `callback` executions.
     */

    function clear() {
      timeoutID = undefined;
    }
    if (debounceMode && !timeoutID) {
      /*
       * Since `wrapper` is being called for the first time and
       * `debounceMode` is true (at begin), execute `callback`.
       */
      exec();
    }
    clearExistingTimeout();
    if (debounceMode === undefined && elapsed > delay) {
      /*
       * In throttle mode, if `delay` time has been exceeded, execute
       * `callback`.
       */
      exec();
    } else if (noTrailing !== true) {
      /*
       * In trailing throttle mode, since `delay` time has not been
       * exceeded, schedule `callback` to execute `delay` ms after most
       * recent execution.
       *
       * If `debounceMode` is true (at begin), schedule `clear` to execute
       * after `delay` ms.
       *
       * If `debounceMode` is false (at end), schedule `callback` to
       * execute after `delay` ms.
       */
      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);
    }
  }
  wrapper.cancel = cancel; // Return the wrapper function.

  return wrapper;
}

/* eslint-disable no-undefined */
/**
 * Debounce execution of a function. Debouncing, unlike throttling,
 * guarantees that a function is only executed a single time, either at the
 * very beginning of a series of calls, or at the very end.
 *
 * @param  {number}   delay -         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.
 * @param  {boolean}  [atBegin] -     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds
 *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.
 *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).
 * @param  {Function} callback -      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,
 *                                  to `callback` when the debounced-function is executed.
 *
 * @returns {Function} A new, debounced function.
 */

function debounce(delay, atBegin, callback) {
  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!******************!*\
  !*** ./admin.ts ***!
  \******************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "app": () => (/* reexport safe */ _src_common__WEBPACK_IMPORTED_MODULE_0__.app),
/* harmony export */   "compat": () => (/* reexport safe */ _src_admin__WEBPACK_IMPORTED_MODULE_1__.compat)
/* harmony export */ });
/* harmony import */ var _src_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/common */ "./src/common/index.ts");
/* harmony import */ var _src_admin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/admin */ "./src/admin/index.ts");


})();

flarum.core = __webpack_exports__;
/******/ })()
;
//# sourceMappingURL=admin.js.map